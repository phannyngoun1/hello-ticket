function e(e,t){for(var n=0;n<t.length;n++){const a=t[n];if("string"!=typeof a&&!Array.isArray(a))for(const t in a)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(a,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>a[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a,s,r={exports:{}},i={};var o,l,c=(s||(s=1,r.exports=function(){if(a)return i;a=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,a){var s=null;if(void 0!==a&&(s=""+a),void 0!==n.key&&(s=""+n.key),"key"in n)for(var r in a={},n)"key"!==r&&(a[r]=n[r]);else a=n;return n=a.ref,{$$typeof:e,type:t,key:s,ref:void 0!==n?n:null,props:a}}return i.Fragment=t,i.jsx=n,i.jsxs=n,i}()),r.exports),d={exports:{}},u={};function h(){if(o)return u;o=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray;function j(){}var C={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function N(t,n,a){var s=a.ref;return{$$typeof:e,type:t,key:n,ref:void 0!==s?s:null,props:a}}function _(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var E=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,a={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return a[e]})):t.toString(36);var n,a}function A(n,a,s,r,i){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var l,c,d=!1;if(null===n)d=!0;else switch(o){case"bigint":case"string":case"number":d=!0;break;case"object":switch(n.$$typeof){case e:case t:d=!0;break;case h:return A((d=n._init)(n._payload),a,s,r,i)}}if(d)return i=i(n),d=""===r?"."+P(n,0):r,S(i)?(s="",null!=d&&(s=d.replace(E,"$&/")+"/"),A(i,a,s,"",function(e){return e})):null!=i&&(_(i)&&(l=i,c=s+(null==i.key||n&&n.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+d,i=N(l.type,c,l.props)),a.push(i)),1;d=0;var u,m=""===r?".":r+":";if(S(n))for(var f=0;f<n.length;f++)d+=A(r=n[f],a,s,o=m+P(r,f),i);else if("function"==typeof(f=null===(u=n)||"object"!=typeof u?null:"function"==typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(n=f.call(n),f=0;!(r=n.next()).done;)d+=A(r=r.value,a,s,o=m+P(r,f++),i);else if("object"===o){if("function"==typeof n.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(j,j):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),a,s,r,i);throw a=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===a?"object with keys {"+Object.keys(n).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.")}return d}function R(e,t,n){if(null==e)return e;var a=[],s=0;return A(e,a,"","",function(e){return t.call(n,e,s++)}),a}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},D={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return u.Activity=m,u.Children=D,u.Component=v,u.Fragment=n,u.Profiler=s,u.PureComponent=b,u.StrictMode=a,u.Suspense=c,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,u.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},u.cache=function(e){return function(){return e.apply(null,arguments)}},u.cacheSignal=function(){return null},u.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var a=g({},e.props),s=e.key;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)!k.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(a[r]=t[r]);var r=arguments.length-2;if(1===r)a.children=n;else if(1<r){for(var i=Array(r),o=0;o<r;o++)i[o]=arguments[o+2];a.children=i}return N(e.type,s,a)},u.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:r,_context:e},e},u.createElement=function(e,t,n){var a,s={},r=null;if(null!=t)for(a in void 0!==t.key&&(r=""+t.key),t)k.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&(s[a]=t[a]);var i=arguments.length-2;if(1===i)s.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(a in i=e.defaultProps)void 0===s[a]&&(s[a]=i[a]);return N(e,r,s)},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:l,render:e}},u.isValidElement=_,u.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},u.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},u.startTransition=function(e){var t=C.T,n={};C.T=n;try{var a=e(),s=C.S;null!==s&&s(n,a),"object"==typeof a&&null!==a&&"function"==typeof a.then&&a.then(j,M)}catch(r){M(r)}finally{null!==t&&null!==n.types&&(t.types=n.types),C.T=t}},u.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},u.use=function(e){return C.H.use(e)},u.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},u.useCallback=function(e,t){return C.H.useCallback(e,t)},u.useContext=function(e){return C.H.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},u.useEffect=function(e,t){return C.H.useEffect(e,t)},u.useEffectEvent=function(e){return C.H.useEffectEvent(e)},u.useId=function(){return C.H.useId()},u.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},u.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},u.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},u.useMemo=function(e,t){return C.H.useMemo(e,t)},u.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},u.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},u.useRef=function(e){return C.H.useRef(e)},u.useState=function(e){return C.H.useState(e)},u.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},u.useTransition=function(){return C.H.useTransition()},u.version="19.2.3",u}function m(){return l||(l=1,d.exports=h()),d.exports}var p=m();const f=n(p),g=e({__proto__:null,default:f},[p]);var x,v,y={exports:{}},b={},w={exports:{}},S={};function j(){return v||(v=1,w.exports=(x||(x=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<s(r,t)))break e;e[a]=t,e[n]=r,n=a}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<r&&0>s(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<r&&0>s(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,f=!1,g=!1,x="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var s=n(c);null!==s;){if(null===s.callback)a(c);else{if(!(s.startTime<=e))break;a(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function w(e){if(f=!1,b(e),!p)if(null!==n(l))p=!0,j||(j=!0,S());else{var t=n(c);null!==t&&R(w,t.startTime-e)}}var S,j=!1,C=-1,k=5,N=-1;function _(){return!(!g&&e.unstable_now()-N<k)}function E(){if(g=!1,j){var t=e.unstable_now();N=t;var s=!0;try{e:{p=!1,f&&(f=!1,v(C),C=-1),m=!0;var r=h;try{t:{for(b(t),u=n(l);null!==u&&!(u.expirationTime>t&&_());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){u.callback=o,b(t),s=!0;break t}u===n(l)&&a(l),b(t)}else a(l);u=n(l)}if(null!==u)s=!0;else{var d=n(c);null!==d&&R(w,d.startTime-t),s=!1}}break e}finally{u=null,h=r,m=!1}s=void 0}}finally{s?S():j=!1}}}if("function"==typeof y)S=function(){y(E)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=E,S=function(){A.postMessage(null)}}else S=function(){x(E,0)};function R(t,n){C=x(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(a,s,r){var i=e.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?i+r:i,a){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return a={id:d++,callback:s,priorityLevel:a,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(a.sortIndex=r,t(c,a),null===n(l)&&a===n(c)&&(f?(v(C),C=-1):f=!0,R(w,r-i))):(a.sortIndex=o,t(l,a),p||m||(p=!0,j||(j=!0,S()))),a},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(S)),S)),w.exports}var C,k,N,_,E={exports:{}},P={};function A(){if(C)return P;C=1;var e=m();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");var r=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function i(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return P.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,P.createPortal=function(e,n){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,n,null,a)},P.flushSync=function(e){var t=r.T,n=a.p;try{if(r.T=null,a.p=2,e)return e()}finally{r.T=t,a.p=n,a.d.f()}},P.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},P.prefetchDNS=function(e){"string"==typeof e&&a.d.D(e)},P.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,s=i(n,t.crossOrigin),r="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},P.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=i(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},P.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,s=i(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:s,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},P.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=i(t.as,t.crossOrigin);a.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},P.requestFormReset=function(e){a.d.r(e)},P.unstable_batchedUpdates=function(e,t){return e(t)},P.useFormState=function(e,t,n){return r.H.useFormState(e,t,n)},P.useFormStatus=function(){return r.H.useHostTransitionStatus()},P.version="19.2.3",P}function R(){if(k)return E.exports;return k=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),E.exports=A(),E.exports}function T(){if(N)return b;N=1;var e=j(),t=m(),n=R();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function r(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function i(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function l(e){if(r(e)!==e)throw Error(a(188))}function c(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=c(e)))return t;e=e.sibling}return null}var d=Object.assign,u=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function T(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case x:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case C:return"SuspenseList";case E:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case y:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var L=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},z=[],B=-1;function $(e){return{current:e}}function U(e){0>B||(e.current=z[B],z[B]=null,B--)}function V(e,t){B++,z[B]=e.current,e.current=t}var q,H,G=$(null),K=$(null),W=$(null),Q=$(null);function Y(e,t){switch(V(W,t),V(K,e),V(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bu(t=yu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(G),V(G,e)}function X(){U(G),U(K),U(W)}function Z(e){null!==e.memoizedState&&V(Q,e);var t=G.current,n=bu(t,e.type);t!==n&&(V(K,e),V(G,n))}function J(e){K.current===e&&(U(G),U(K)),Q.current===e&&(U(Q),hh._currentValue=O)}function ee(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+q+e+H}var te=!1;function ne(e,t){if(!e||te)return"";te=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var a=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){a=r}e.call(n.prototype)}}else{try{throw Error()}catch(i){a=i}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&a&&"string"==typeof o.stack)return[o.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),i=r[0],o=r[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(s=a=0;a<l.length&&!l[a].includes("DetermineComponentFrameRoot");)a++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(a===l.length||s===c.length)for(a=l.length-1,s=c.length-1;1<=a&&0<=s&&l[a]!==c[s];)s--;for(;1<=a&&0<=s;a--,s--)if(l[a]!==c[s]){if(1!==a||1!==s)do{if(a--,0>--s||l[a]!==c[s]){var d="\n"+l[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=a&&0<=s);break}}}finally{te=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ee(n):""}function ae(e,t){switch(e.tag){case 26:case 27:case 5:return ee(e.type);case 16:return ee("Lazy");case 13:return e.child!==t&&null!==t?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return ne(e.type,!1);case 11:return ne(e.type.render,!1);case 1:return ne(e.type,!0);case 31:return ee("Activity");default:return""}}function se(e){try{var t="",n=null;do{t+=ae(e,n),n=e,e=e.return}while(e);return t}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}var re=Object.prototype.hasOwnProperty,ie=e.unstable_scheduleCallback,oe=e.unstable_cancelCallback,le=e.unstable_shouldYield,ce=e.unstable_requestPaint,de=e.unstable_now,ue=e.unstable_getCurrentPriorityLevel,he=e.unstable_ImmediatePriority,me=e.unstable_UserBlockingPriority,pe=e.unstable_NormalPriority,fe=e.unstable_LowPriority,ge=e.unstable_IdlePriority,xe=e.log,ve=e.unstable_setDisableYieldValue,ye=null,be=null;function we(e){if("function"==typeof xe&&ve(e),be&&"function"==typeof be.setStrictMode)try{be.setStrictMode(ye,e)}catch(t){}}var Se=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(je(e)/Ce|0)|0},je=Math.log,Ce=Math.LN2;var ke=256,Ne=262144,_e=4194304;function Ee(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Pe(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&a;return 0!==o?0!==(a=o&~r)?s=Ee(a):0!==(i&=o)?s=Ee(i):n||0!==(n=o&~e)&&(s=Ee(n)):0!==(o=a&~r)?s=Ee(o):0!==i?s=Ee(i):n||0!==(n=a&~e)&&(s=Ee(n)),0===s?0:0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(n=t&-t)||32===r&&4194048&n)?t:s}function Ae(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Re(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=_e;return!(62914560&(_e<<=1))&&(_e=4194304),e}function Me(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Le(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Se(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|261930&n}function Fe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Se(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}function Ie(e,t){var n=t&-t;return 0!==((n=42&n?1:Oe(n))&(e.suspendedLanes|t))?0:n}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ze(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Be(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:Eh(e.type)}function $e(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var Ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Ue,qe="__reactProps$"+Ue,He="__reactContainer$"+Ue,Ge="__reactEvents$"+Ue,Ke="__reactListeners$"+Ue,We="__reactHandles$"+Ue,Qe="__reactResources$"+Ue,Ye="__reactMarker$"+Ue;function Xe(e){delete e[Ve],delete e[qe],delete e[Ge],delete e[Ke],delete e[We]}function Ze(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ou(e);null!==e;){if(n=e[Ve])return n;e=Ou(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[Ve]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function et(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function tt(e){var t=e[Qe];return t||(t=e[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[Ye]=!0}var at=new Set,st={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(st[e]=t,e=0;e<t.length;e++)at.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},ct={};function dt(e,t,n){if(s=t,re.call(ct,s)||!re.call(lt,s)&&(ot.test(s)?ct[s]=!0:(lt[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ut(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ht(e,t,n,a){if(null===a)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+a)}}function mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function pt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=pt(e)?"checked":"value";e._valueTracker=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==a&&"function"==typeof a.get&&"function"==typeof a.set){var s=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=pt(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function xt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var vt=/[\n"\\]/g;function yt(e){return e.replace(vt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function bt(e,t,n,a,s,r,i,o){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+mt(t)):e.value!==""+mt(t)&&(e.value=""+mt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?St(e,i,mt(t)):null!=n?St(e,i,mt(n)):null!=a&&e.removeAttribute("value"),null==s&&null!=r&&(e.defaultChecked=!!r),null!=s&&(e.checked=s&&"function"!=typeof s&&"symbol"!=typeof s),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+mt(o):e.removeAttribute("name")}function wt(e,t,n,a,s,r,i,o){if(null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&"boolean"!=typeof r&&(e.type=r),null!=t||null!=n){if(("submit"===r||"reset"===r)&&null==t)return void ft(e);n=null!=n?""+mt(n):"",t=null!=t?""+mt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}a="function"!=typeof(a=null!=a?a:s)&&"symbol"!=typeof a&&!!a,e.checked=o?e.checked:!!a,e.defaultChecked=!!a,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i),ft(e)}function St(e,t,n){"number"===t&&xt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function jt(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+mt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(a&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+mt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+mt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,s){if(null==t){if(null!=s){if(null!=n)throw Error(a(92));if(L(s)){if(1<s.length)throw Error(a(93));s=s[0]}n=s}null==n&&(n=""),t=n}n=mt(t),e.defaultValue=n,(s=e.textContent)===n&&""!==s&&null!==s&&(e.value=s),ft(e)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var a=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,n):"number"!=typeof n||0===n||_t.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Pt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var s in n)!n.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&Et(e,r,s)}else for(var i in t)t.hasOwnProperty(i)&&Et(e,i,t[i])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Lt=null;function Ft(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Ot=null;function zt(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;e:switch(e=t.stateNode,t.type){case"input":if(bt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[qe]||null;if(!r)throw Error(a(90));bt(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(s=n[t]).form===e.form&&gt(s)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&jt(e,!!n.multiple,t,!1)}}}var Bt=!1;function $t(e,t,n){if(Bt)return e(t,n);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==It||null!==Ot)&&(td(),It&&(t=It,e=Ot,Ot=It=null,zt(t),e)))for(t=0;t<e.length;t++)zt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var s=n[qe]||null;if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Vt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),qt=!1;if(Vt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Jh){qt=!1}var Gt=null,Kt=null,Wt=null;function Qt(){if(Wt)return Wt;var e,t,n=Kt,a=n.length,s="value"in Gt?Gt.value:Gt.textContent,r=s.length;for(e=0;e<a&&n[e]===s[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===s[r-t];t++);return Wt=s.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Zt(){return!1}function Jt(e){function t(t,n,a,s,r){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Xt:Zt,this.isPropagationStopped=Zt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var en,tn,nn,an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=Jt(an),rn=d({},an,{view:0,detail:0}),on=Jt(rn),ln=d({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,tn=e.screenY-nn.screenY):tn=en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),cn=Jt(ln),dn=Jt(d({},ln,{dataTransfer:0})),un=Jt(d({},rn,{relatedTarget:0})),hn=Jt(d({},an,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=Jt(d({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),pn=Jt(d({},an,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function yn(){return vn}var bn=Jt(d({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Jt(d({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sn=Jt(d({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),jn=Jt(d({},an,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=Jt(d({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=Jt(d({},an,{newState:0,oldState:0})),Nn=[9,13,27,32],_n=Vt&&"CompositionEvent"in window,En=null;Vt&&"documentMode"in document&&(En=document.documentMode);var Pn=Vt&&"TextEvent"in window&&!En,An=Vt&&(!_n||En&&8<En&&11>=En),Rn=String.fromCharCode(32),Tn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fn[e.type]:"textarea"===t}function On(e,t,n,a){It?Ot?Ot.push(a):Ot=[a]:It=a,0<(t=ru(t,"onChange")).length&&(n=new sn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var zn=null,Bn=null;function $n(e){Xd(e,0)}function Un(e){if(gt(et(e)))return e}function Vn(e,t){if("change"===e)return t}var qn=!1;if(Vt){var Hn;if(Vt){var Gn="oninput"in document;if(!Gn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Gn="function"==typeof Kn.oninput}Hn=Gn}else Hn=!1;qn=Hn&&(!document.documentMode||9<document.documentMode)}function Wn(){zn&&(zn.detachEvent("onpropertychange",Qn),Bn=zn=null)}function Qn(e){if("value"===e.propertyName&&Un(Bn)){var t=[];On(t,Bn,e,Ft(e)),$t($n,t)}}function Yn(e,t,n){"focusin"===e?(Wn(),Bn=n,(zn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Wn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Bn)}function Zn(e,t){if("click"===e)return Un(t)}function Jn(e,t){if("input"===e||"change"===e)return Un(t)}var ea="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ta(e,t){if(ea(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!re.call(t,s)||!ea(e[s],t[s]))return!1}return!0}function na(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function aa(e,t){var n,a=na(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=na(a)}}function sa(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sa(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ra(e){for(var t=xt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=xt((e=t.contentWindow).document)}return t}function ia(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var oa=Vt&&"documentMode"in document&&11>=document.documentMode,la=null,ca=null,da=null,ua=!1;function ha(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ua||null==la||la!==xt(a)||("selectionStart"in(a=la)&&ia(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},da&&ta(da,a)||(da=a,0<(a=ru(ca,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=la)))}function ma(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pa={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},fa={},ga={};function xa(e){if(fa[e])return fa[e];if(!pa[e])return e;var t,n=pa[e];for(t in n)if(n.hasOwnProperty(t)&&t in ga)return fa[e]=n[t];return e}Vt&&(ga=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);var va=xa("animationend"),ya=xa("animationiteration"),ba=xa("animationstart"),wa=xa("transitionrun"),Sa=xa("transitionstart"),ja=xa("transitioncancel"),Ca=xa("transitionend"),ka=new Map,Na="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(e,t){ka.set(e,t),rt(t,[e])}Na.push("scrollEnd");var Ea="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},Pa=[],Aa=0,Ra=0;function Ta(){for(var e=Aa,t=Ra=Aa=0;t<e;){var n=Pa[t];Pa[t++]=null;var a=Pa[t];Pa[t++]=null;var s=Pa[t];Pa[t++]=null;var r=Pa[t];if(Pa[t++]=null,null!==a&&null!==s){var i=a.pending;null===i?s.next=s:(s.next=i.next,i.next=s),a.pending=s}0!==r&&Fa(n,s,r)}}function Ma(e,t,n,a){Pa[Aa++]=e,Pa[Aa++]=t,Pa[Aa++]=n,Pa[Aa++]=a,Ra|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Da(e,t,n,a){return Ma(e,t,n,a),Ia(e)}function La(e,t){return Ma(e,null,null,t),Ia(e)}function Fa(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var s=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(a=r.alternate)&&(a.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,s&&null!==t&&(s=31-Se(n),null===(a=(e=r.hiddenUpdates)[s])?e[s]=[t]:a.push(t),t.lane=536870912|n),r):null}function Ia(e){if(50<Gc)throw Gc=0,Kc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Oa={};function za(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(e,t,n,a){return new za(e,t,n,a)}function $a(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ua(e,t){var n=e.alternate;return null===n?((n=Ba(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Va(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qa(e,t,n,s,r,i){var o=0;if(s=e,"function"==typeof e)$a(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Ba(31,n,t,r)).elementType=E,e.lanes=i,e;case f:return Ha(n.children,r,i,t);case g:o=8,r|=24;break;case x:return(e=Ba(12,n,t,2|r)).elementType=x,e.lanes=i,e;case S:return(e=Ba(13,n,t,r)).elementType=S,e.lanes=i,e;case C:return(e=Ba(19,n,t,r)).elementType=C,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case y:o=10;break e;case v:o=9;break e;case w:o=11;break e;case k:o=14;break e;case _:o=16,s=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),s=null}return(t=Ba(o,n,t,r)).elementType=e,t.type=s,t.lanes=i,t}function Ha(e,t,n,a){return(e=Ba(7,e,a,t)).lanes=n,e}function Ga(e,t,n){return(e=Ba(6,e,null,t)).lanes=n,e}function Ka(e){var t=Ba(18,null,null,0);return t.stateNode=e,t}function Wa(e,t,n){return(t=Ba(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qa=new WeakMap;function Ya(e,t){if("object"==typeof e&&null!==e){var n=Qa.get(e);return void 0!==n?n:(t={value:e,source:t,stack:se(t)},Qa.set(e,t),t)}return{value:e,source:t,stack:se(t)}}var Xa=[],Za=0,Ja=null,es=0,ts=[],ns=0,as=null,ss=1,rs="";function is(e,t){Xa[Za++]=es,Xa[Za++]=Ja,Ja=e,es=t}function os(e,t,n){ts[ns++]=ss,ts[ns++]=rs,ts[ns++]=as,as=e;var a=ss;e=rs;var s=32-Se(a)-1;a&=~(1<<s),n+=1;var r=32-Se(t)+s;if(30<r){var i=s-s%5;r=(a&(1<<i)-1).toString(32),a>>=i,s-=i,ss=1<<32-Se(t)+s|n<<s|a,rs=r+e}else ss=1<<r|n<<s|a,rs=e}function ls(e){null!==e.return&&(is(e,1),os(e,1,0))}function cs(e){for(;e===Ja;)Ja=Xa[--Za],Xa[Za]=null,es=Xa[--Za],Xa[Za]=null;for(;e===as;)as=ts[--ns],ts[ns]=null,rs=ts[--ns],ts[ns]=null,ss=ts[--ns],ts[ns]=null}function ds(e,t){ts[ns++]=ss,ts[ns++]=rs,ts[ns++]=as,ss=t.id,rs=t.overflow,as=e}var us=null,hs=null,ms=!1,ps=null,fs=!1,gs=Error(a(519));function xs(e){throw js(Ya(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),gs}function vs(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Ve]=e,t[qe]=a,n){case"dialog":Zd("cancel",t),Zd("close",t);break;case"iframe":case"object":case"embed":Zd("load",t);break;case"video":case"audio":for(n=0;n<Qd.length;n++)Zd(Qd[n],t);break;case"source":Zd("error",t);break;case"img":case"image":case"link":Zd("error",t),Zd("load",t);break;case"details":Zd("toggle",t);break;case"input":Zd("invalid",t),wt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Zd("invalid",t);break;case"textarea":Zd("invalid",t),kt(t,a.value,a.defaultValue,a.children)}"string"!=typeof(n=a.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===a.suppressHydrationWarning||uu(t.textContent,n)?(null!=a.popover&&(Zd("beforetoggle",t),Zd("toggle",t)),null!=a.onScroll&&Zd("scroll",t),null!=a.onScrollEnd&&Zd("scrollend",t),null!=a.onClick&&(t.onclick=Dt),t=!0):t=!1,t||xs(e,!0)}function ys(e){for(us=e.return;us;)switch(us.tag){case 5:case 31:case 13:return void(fs=!1);case 27:case 3:return void(fs=!0);default:us=us.return}}function bs(e){if(e!==us)return!1;if(!ms)return ys(e),ms=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wu(e.type,e.memoizedProps)),t=!t),t&&hs&&xs(e),ys(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));hs=Iu(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));hs=Iu(e)}else 27===n?(n=hs,Eu(e.type)?(e=Fu,Fu=null,hs=e):hs=n):hs=us?Lu(e.stateNode.nextSibling):null;return!0}function ws(){hs=us=null,ms=!1}function Ss(){var e=ps;return null!==e&&(null===Tc?Tc=e:Tc.push.apply(Tc,e),ps=null),e}function js(e){null===ps?ps=[e]:ps.push(e)}var Cs=$(null),ks=null,Ns=null;function _s(e,t,n){V(Cs,t._currentValue),t._currentValue=n}function Es(e){e._currentValue=Cs.current,U(Cs)}function Ps(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function As(e,t,n,s){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var o=r.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ps(i.return,n,e),s||(o=null);break e}i=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Ps(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Rs(e,t,n,s){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(524288&r.flags)i=!0;else if(262144&r.flags)break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=r.type;ea(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===Q.current){if(null===(o=r.alternate))throw Error(a(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(hh):e=[hh])}r=r.return}null!==e&&As(t,e,n,s),t.flags|=262144}function Ts(e){for(e=e.firstContext;null!==e;){if(!ea(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ms(e){ks=e,Ns=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ds(e){return Fs(ks,e)}function Ls(e,t){return null===ks&&Ms(e),Fs(e,t)}function Fs(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ns){if(null===e)throw Error(a(308));Ns=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ns=Ns.next=t;return n}var Is="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Os=e.unstable_scheduleCallback,zs=e.unstable_NormalPriority,Bs={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $s(){return{controller:new Is,data:new Map,refCount:0}}function Us(e){e.refCount--,0===e.refCount&&Os(zs,function(){e.controller.abort()})}var Vs=null,qs=0,Hs=0,Gs=null;function Ks(){if(0===--qs&&null!==Vs){null!==Gs&&(Gs.status="fulfilled");var e=Vs;Vs=null,Hs=0,Gs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ws=F.S;F.S=function(e,t){Lc=de(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Vs){var n=Vs=[];qs=0,Hs=qd(),Gs={status:"pending",value:void 0,then:function(e){n.push(e)}}}qs++,t.then(Ks,Ks)}(0,t),null!==Ws&&Ws(e,t)};var Qs=$(null);function Ys(){var e=Qs.current;return null!==e?e:gc.pooledCache}function Xs(e,t){V(Qs,null===t?Qs.current:t.pool)}function Zs(){var e=Ys();return null===e?null:{parent:Bs._currentValue,pool:e}}var Js=Error(a(460)),er=Error(a(474)),tr=Error(a(542)),nr={then:function(){}};function ar(e){return"fulfilled"===(e=e.status)||"rejected"===e}function sr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Dt,Dt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw lr(e=t.reason),e;default:if("string"==typeof t.status)t.then(Dt,Dt);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw lr(e=t.reason),e}throw ir=t,Js}}function rr(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw ir=t,Js;throw t}}var ir=null;function or(){if(null===ir)throw Error(a(459));var e=ir;return ir=null,e}function lr(e){if(e===Js||e===tr)throw Error(a(483))}var cr=null,dr=0;function ur(e){var t=dr;return dr+=1,null===cr&&(cr=[]),sr(cr,e,t)}function hr(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function mr(e,t){if(t.$$typeof===u)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pr(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Ua(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Ga(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var s=n.type;return s===f?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===_&&rr(s)===t.type)?(hr(t=r(t,n.props),n),t.return=e,t):(hr(t=qa(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wa(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,a,s){return null===t||7!==t.tag?((t=Ha(n,e.mode,a,s)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Ga(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case h:return hr(n=qa(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Wa(t,e.mode,n)).return=e,t;case _:return m(e,t=rr(t),n)}if(L(t)||T(t))return(t=Ha(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,ur(t),n);if(t.$$typeof===y)return m(e,Ls(e,t),n);mr(e,t)}return null}function g(e,t,n,a){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==s?null:l(e,t,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case h:return n.key===s?c(e,t,n,a):null;case p:return n.key===s?d(e,t,n,a):null;case _:return g(e,t,n=rr(n),a)}if(L(n)||T(n))return null!==s?null:u(e,t,n,a,null);if("function"==typeof n.then)return g(e,t,ur(n),a);if(n.$$typeof===y)return g(e,t,Ls(e,n),a);mr(e,n)}return null}function x(e,t,n,a,s){if("string"==typeof a&&""!==a||"number"==typeof a||"bigint"==typeof a)return l(t,e=e.get(n)||null,""+a,s);if("object"==typeof a&&null!==a){switch(a.$$typeof){case h:return c(t,e=e.get(null===a.key?n:a.key)||null,a,s);case p:return d(t,e=e.get(null===a.key?n:a.key)||null,a,s);case _:return x(e,t,n,a=rr(a),s)}if(L(a)||T(a))return u(t,e=e.get(n)||null,a,s,null);if("function"==typeof a.then)return x(e,t,n,ur(a),s);if(a.$$typeof===y)return x(e,t,n,Ls(t,a),s);mr(t,a)}return null}function v(l,c,d,u){if("object"==typeof d&&null!==d&&d.type===f&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case h:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===f){if(7===c.tag){n(l,c.sibling),(u=r(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===_&&rr(b)===c.type){n(l,c.sibling),hr(u=r(c,d.props),d),u.return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}d.type===f?((u=Ha(d.props.children,l.mode,u,d.key)).return=l,l=u):(hr(u=qa(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return o(l);case p:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(u=r(c,d.children||[])).return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}(u=Wa(d,l.mode,u)).return=l,l=u}return o(l);case _:return v(l,c,d=rr(d),u)}if(L(d))return function(a,r,o,l){for(var c=null,d=null,u=r,h=r=0,p=null;null!==u&&h<o.length;h++){u.index>h?(p=u,u=null):p=u.sibling;var f=g(a,u,o[h],l);if(null===f){null===u&&(u=p);break}e&&u&&null===f.alternate&&t(a,u),r=i(f,r,h),null===d?c=f:d.sibling=f,d=f,u=p}if(h===o.length)return n(a,u),ms&&is(a,h),c;if(null===u){for(;h<o.length;h++)null!==(u=m(a,o[h],l))&&(r=i(u,r,h),null===d?c=u:d.sibling=u,d=u);return ms&&is(a,h),c}for(u=s(u);h<o.length;h++)null!==(p=x(u,a,h,o[h],l))&&(e&&null!==p.alternate&&u.delete(null===p.key?h:p.key),r=i(p,r,h),null===d?c=p:d.sibling=p,d=p);return e&&u.forEach(function(e){return t(a,e)}),ms&&is(a,h),c}(l,c,d,u);if(T(d)){if("function"!=typeof(b=T(d)))throw Error(a(150));return function(r,o,l,c){if(null==l)throw Error(a(151));for(var d=null,u=null,h=o,p=o=0,f=null,v=l.next();null!==h&&!v.done;p++,v=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var y=g(r,h,v.value,c);if(null===y){null===h&&(h=f);break}e&&h&&null===y.alternate&&t(r,h),o=i(y,o,p),null===u?d=y:u.sibling=y,u=y,h=f}if(v.done)return n(r,h),ms&&is(r,p),d;if(null===h){for(;!v.done;p++,v=l.next())null!==(v=m(r,v.value,c))&&(o=i(v,o,p),null===u?d=v:u.sibling=v,u=v);return ms&&is(r,p),d}for(h=s(h);!v.done;p++,v=l.next())null!==(v=x(h,r,p,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?p:v.key),o=i(v,o,p),null===u?d=v:u.sibling=v,u=v);return e&&h.forEach(function(e){return t(r,e)}),ms&&is(r,p),d}(l,c,d=b.call(d),u)}if("function"==typeof d.then)return v(l,c,ur(d),u);if(d.$$typeof===y)return v(l,c,Ls(l,d),u);mr(l,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(u=r(c,d)).return=l,l=u):(n(l,c),(u=Ga(d,l.mode,u)).return=l,l=u),o(l)):n(l,c)}return function(e,t,n,a){try{dr=0;var s=v(e,t,n,a);return cr=null,s}catch(i){if(i===Js||i===tr)throw i;var r=Ba(29,i,null,e.mode);return r.lanes=a,r.return=e,r}}}var fr=pr(!0),gr=pr(!1),xr=!1;function vr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function br(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wr(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,2&fc){var s=a.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),a.pending=t,t=Ia(e),Fa(e,null,n),t}return Ma(e,a,t,n),Ia(e)}function Sr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Fe(e,n)}}function jr(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?s=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Cr=!1;function kr(){if(Cr){if(null!==Gs)throw Gs}}function Nr(e,t,n,a){Cr=!1;var s=e.updateQueue;xr=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?r=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==r){var h=s.baseState;for(i=0,u=c=l=null,o=r;;){var m=-536870913&o.lane,p=m!==o.lane;if(p?(vc&m)===m:(a&m)===m){0!==m&&m===Hs&&(Cr=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,g=o;m=t;var x=n;switch(g.tag){case 1:if("function"==typeof(f=g.payload)){h=f.call(x,h,m);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(m="function"==typeof(f=g.payload)?f.call(x,h,m):f))break e;h=d({},h,m);break e;case 2:xr=!0}}null!==(m=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[m]:p.push(m))}else p={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,i|=m;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===r&&(s.shared.lanes=0),Nc|=i,e.lanes=i,e.memoizedState=h}}function _r(e,t){if("function"!=typeof e)throw Error(a(191,e));e.call(t)}function Er(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)_r(n[e],t)}var Pr=$(null),Ar=$(0);function Rr(e,t){V(Ar,e=Cc),V(Pr,t),Cc=e|t.baseLanes}function Tr(){V(Ar,Cc),V(Pr,Pr.current)}function Mr(){Cc=Ar.current,U(Pr),U(Ar)}var Dr=$(null),Lr=null;function Fr(e){var t=e.alternate;V($r,1&$r.current),V(Dr,e),null===Lr&&(null===t||null!==Pr.current||null!==t.memoizedState)&&(Lr=e)}function Ir(e){V($r,$r.current),V(Dr,e),null===Lr&&(Lr=e)}function Or(e){22===e.tag?(V($r,$r.current),V(Dr,e),null===Lr&&(Lr=e)):zr()}function zr(){V($r,$r.current),V(Dr,Dr.current)}function Br(e){U(Dr),Lr===e&&(Lr=null),U($r)}var $r=$(0);function Ur(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Mu(n)||Du(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vr=0,qr=null,Hr=null,Gr=null,Kr=!1,Wr=!1,Qr=!1,Yr=0,Xr=0,Zr=null,Jr=0;function ei(){throw Error(a(321))}function ti(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ea(e[n],t[n]))return!1;return!0}function ni(e,t,n,a,s,r){return Vr=r,qr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=null===e||null===e.memoizedState?vo:yo,Qr=!1,r=n(a,s),Qr=!1,Wr&&(r=si(t,n,a,s)),ai(e),r}function ai(e){F.H=xo;var t=null!==Hr&&null!==Hr.next;if(Vr=0,Gr=Hr=qr=null,Kr=!1,Xr=0,Zr=null,t)throw Error(a(300));null===e||Lo||null!==(e=e.dependencies)&&Ts(e)&&(Lo=!0)}function si(e,t,n,s){qr=e;var r=0;do{if(Wr&&(Zr=null),Xr=0,Wr=!1,25<=r)throw Error(a(301));if(r+=1,Gr=Hr=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}F.H=bo,i=t(n,s)}while(Wr);return i}function ri(){var e=F.H,t=e.useState()[0];return t="function"==typeof t.then?ui(t):t,e=e.useState()[0],(null!==Hr?Hr.memoizedState:null)!==e&&(qr.flags|=1024),t}function ii(){var e=0!==Yr;return Yr=0,e}function oi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function li(e){if(Kr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Kr=!1}Vr=0,Gr=Hr=qr=null,Wr=!1,Xr=Yr=0,Zr=null}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gr?qr.memoizedState=Gr=e:Gr=Gr.next=e,Gr}function di(){if(null===Hr){var e=qr.alternate;e=null!==e?e.memoizedState:null}else e=Hr.next;var t=null===Gr?qr.memoizedState:Gr.next;if(null!==t)Gr=t,Hr=e;else{if(null===e){if(null===qr.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Hr=e).memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},null===Gr?qr.memoizedState=Gr=e:Gr=Gr.next=e}return Gr}function ui(e){var t=Xr;return Xr+=1,null===Zr&&(Zr=[]),e=sr(Zr,e,t),t=qr,null===(null===Gr?t.memoizedState:Gr.next)&&(t=t.alternate,F.H=null===t||null===t.memoizedState?vo:yo),e}function hi(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ui(e);if(e.$$typeof===y)return Ds(e)}throw Error(a(438,String(e)))}function mi(e){var t=null,n=qr.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=qr.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=P;return t.index++,n}function pi(e,t){return"function"==typeof t?t(e):t}function fi(e){return gi(di(),Hr,e)}function gi(e,t,n){var s=e.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=n;var r=e.baseQueue,i=s.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var l=o=null,c=null,d=t=r.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(vc&h)===h:(Vr&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Hs&&(u=!0);else{if((Vr&m)===m){d=d.next,m===Hs&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,qr.lanes|=m,Nc|=m}h=d.action,Qr&&n(i,h),i=d.hasEagerState?d.eagerState:n(i,h)}else m={lane:h,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,o=i):c=c.next=m,qr.lanes|=h,Nc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=i:c.next=l,!ea(i,e.memoizedState)&&(Lo=!0,u&&null!==(n=Gs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return null===r&&(s.lanes=0),[e.memoizedState,s.dispatch]}function xi(e){var t=di(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);ea(i,t.memoizedState)||(Lo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function vi(e,t,n){var s=qr,r=di(),i=ms;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!ea((Hr||r).memoizedState,n);if(o&&(r.memoizedState=n,Lo=!0),r=r.queue,Vi(wi.bind(null,s,r,e),[e]),r.getSnapshot!==t||o||null!==Gr&&1&Gr.memoizedState.tag){if(s.flags|=2048,Oi(9,{destroy:void 0},bi.bind(null,s,r,n,t),null),null===gc)throw Error(a(349));i||127&Vr||yi(s,t,n)}return n}function yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=qr.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bi(e,t,n,a){t.value=n,t.getSnapshot=a,Si(t)&&ji(e)}function wi(e,t,n){return n(function(){Si(t)&&ji(e)})}function Si(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ea(e,n)}catch(a){return!0}}function ji(e){var t=La(e,2);null!==t&&Yc(t,e,2)}function Ci(e){var t=ci();if("function"==typeof e){var n=e;if(e=n(),Qr){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:e},t}function ki(e,t,n,a){return e.baseState=n,gi(e,Hr,"function"==typeof a?a:pi)}function Ni(e,t,n,s,r){if(po(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==F.T?n(!0):i.isTransition=!1,s(i),null===(n=t.pending)?(i.next=t.pending=i,_i(t,i)):(i.next=n.next,t.pending=n.next=i)}}function _i(e,t){var n=t.action,a=t.payload,s=e.state;if(t.isTransition){var r=F.T,i={};F.T=i;try{var o=n(s,a),l=F.S;null!==l&&l(i,o),Ei(e,t,o)}catch(c){Ai(e,t,c)}finally{null!==r&&null!==i.types&&(r.types=i.types),F.T=r}}else try{Ei(e,t,r=n(s,a))}catch(d){Ai(e,t,d)}}function Ei(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Pi(e,t,n)},function(n){return Ai(e,t,n)}):Pi(e,t,n)}function Pi(e,t,n){t.status="fulfilled",t.value=n,Ri(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,_i(e,n)))}function Ai(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,Ri(t),t=t.next}while(t!==a)}e.action=null}function Ri(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ti(e,t){return t}function Mi(e,t){if(ms){var n=gc.formState;if(null!==n){e:{var a=qr;if(ms){if(hs){t:{for(var s=hs,r=fs;8!==s.nodeType;){if(!r){s=null;break t}if(null===(s=Lu(s.nextSibling))){s=null;break t}}s="F!"===(r=s.data)||"F"===r?s:null}if(s){hs=Lu(s.nextSibling),a="F!"===s.data;break e}}xs(a)}a=!1}a&&(t=n[0])}}return(n=ci()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},n.queue=a,n=uo.bind(null,qr,a),a.dispatch=n,a=Ci(!1),r=mo.bind(null,qr,!1,a.queue),s={state:t,dispatch:null,action:e,pending:null},(a=ci()).queue=s,n=Ni.bind(null,qr,s,r,n),s.dispatch=n,a.memoizedState=e,[t,n,!1]}function Di(e){return Li(di(),Hr,e)}function Li(e,t,n){if(t=gi(e,t,Ti)[0],e=fi(pi)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var a=ui(t)}catch(i){if(i===Js)throw tr;throw i}else a=t;var s=(t=di()).queue,r=s.dispatch;return n!==t.memoizedState&&(qr.flags|=2048,Oi(9,{destroy:void 0},Fi.bind(null,s,n),null)),[a,r,e]}function Fi(e,t){e.action=t}function Ii(e){var t=di(),n=Hr;if(null!==n)return Li(t,n,e);di(),t=t.memoizedState;var a=(n=di()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Oi(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=qr.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function zi(){return di().memoizedState}function Bi(e,t,n,a){var s=ci();qr.flags|=e,s.memoizedState=Oi(1|t,{destroy:void 0},n,void 0===a?null:a)}function $i(e,t,n,a){var s=di();a=void 0===a?null:a;var r=s.memoizedState.inst;null!==Hr&&null!==a&&ti(a,Hr.memoizedState.deps)?s.memoizedState=Oi(t,r,n,a):(qr.flags|=e,s.memoizedState=Oi(1|t,r,n,a))}function Ui(e,t){Bi(8390656,8,e,t)}function Vi(e,t){$i(2048,8,e,t)}function qi(e){var t=di().memoizedState;return function(e){qr.flags|=4;var t=qr.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&fc)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Hi(e,t){return $i(4,2,e,t)}function Gi(e,t){return $i(4,4,e,t)}function Ki(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Wi(e,t,n){n=null!=n?n.concat([e]):null,$i(4,4,Ki.bind(null,t,e),n)}function Qi(){}function Yi(e,t){var n=di();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&ti(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Xi(e,t){var n=di();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&ti(t,a[1]))return a[0];if(a=e(),Qr){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[a,t],a}function Zi(e,t,n){return void 0===n||1073741824&Vr&&!(261930&vc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),qr.lanes|=e,Nc|=e,n)}function Ji(e,t,n,a){return ea(n,t)?n:null!==Pr.current?(e=Zi(e,n,a),ea(e,t)||(Lo=!0),e):42&Vr&&(!(1073741824&Vr)||261930&vc)?(e=Qc(),qr.lanes|=e,Nc|=e,t):(Lo=!0,e.memoizedState=n)}function eo(e,t,n,a,s){var r=I.p;I.p=0!==r&&8>r?r:8;var i,o,l,c=F.T,d={};F.T=d,mo(e,!1,t,n);try{var u=s(),h=F.S;if(null!==h&&h(d,u),null!==u&&"object"==typeof u&&"function"==typeof u.then)ho(e,t,(i=a,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},u.then(function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Wc());else ho(e,t,a,Wc())}catch(m){ho(e,t,{then:function(){},status:"rejected",reason:m},Wc())}finally{I.p=r,null!==c&&null!==d.types&&(c.types=d.types),F.T=c}}function to(){}function no(e,t,n,s){if(5!==e.tag)throw Error(a(476));var r=ao(e).queue;eo(e,r,t,O,null===n?to:function(){return so(e),n(s)})}function ao(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function so(e){var t=ao(e);null===t.next&&(t=e.alternate.memoizedState),ho(e,t.next.queue,{},Wc())}function ro(){return Ds(hh)}function io(){return di().memoizedState}function oo(){return di().memoizedState}function lo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Wc(),a=wr(t,e=br(n),n);return null!==a&&(Yc(a,t,n),Sr(a,t,n)),t={cache:$s()},void(e.payload=t)}t=t.return}}function co(e,t,n){var a=Wc();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},po(e)?fo(t,n):null!==(n=Da(e,t,n,a))&&(Yc(n,e,a),go(n,t,a))}function uo(e,t,n){ho(e,t,n,Wc())}function ho(e,t,n,a){var s={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(po(e))fo(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,n);if(s.hasEagerState=!0,s.eagerState=o,ea(o,i))return Ma(e,t,s,0),null===gc&&Ta(),!1}catch(l){}if(null!==(n=Da(e,t,s,a)))return Yc(n,e,a),go(n,t,a),!0}return!1}function mo(e,t,n,s){if(s={lane:2,revertLane:qd(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},po(e)){if(t)throw Error(a(479))}else null!==(t=Da(e,n,s,2))&&Yc(t,e,2)}function po(e){var t=e.alternate;return e===qr||null!==t&&t===qr}function fo(e,t){Wr=Kr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function go(e,t,n){if(4194048&n){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Fe(e,n)}}var xo={readContext:Ds,use:hi,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useInsertionEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useSyncExternalStore:ei,useId:ei,useHostTransitionStatus:ei,useFormState:ei,useActionState:ei,useOptimistic:ei,useMemoCache:ei,useCacheRefresh:ei};xo.useEffectEvent=ei;var vo={readContext:Ds,use:hi,useCallback:function(e,t){return ci().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Ui,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Bi(4194308,4,Ki.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bi(4194308,4,e,t)},useInsertionEffect:function(e,t){Bi(4,2,e,t)},useMemo:function(e,t){var n=ci();t=void 0===t?null:t;var a=e();if(Qr){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=ci();if(void 0!==n){var s=n(t);if(Qr){we(!0);try{n(t)}finally{we(!1)}}}else s=t;return a.memoizedState=a.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=co.bind(null,qr,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},ci().memoizedState=e},useState:function(e){var t=(e=Ci(e)).queue,n=uo.bind(null,qr,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qi,useDeferredValue:function(e,t){return Zi(ci(),e,t)},useTransition:function(){var e=Ci(!1);return e=eo.bind(null,qr,e.queue,!0,!1),ci().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=qr,r=ci();if(ms){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gc)throw Error(a(349));127&vc||yi(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Ui(wi.bind(null,s,i,e),[e]),s.flags|=2048,Oi(9,{destroy:void 0},bi.bind(null,s,i,n,t),null),n},useId:function(){var e=ci(),t=gc.identifierPrefix;if(ms){var n=rs;t="_"+t+"R_"+(n=(ss&~(1<<32-Se(ss)-1)).toString(32)+n),0<(n=Yr++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Jr++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Mi,useActionState:Mi,useOptimistic:function(e){var t=ci();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=mo.bind(null,qr,!0,n),n.dispatch=t,[e,t]},useMemoCache:mi,useCacheRefresh:function(){return ci().memoizedState=lo.bind(null,qr)},useEffectEvent:function(e){var t=ci(),n={impl:e};return t.memoizedState=n,function(){if(2&fc)throw Error(a(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Ds,use:hi,useCallback:Yi,useContext:Ds,useEffect:Vi,useImperativeHandle:Wi,useInsertionEffect:Hi,useLayoutEffect:Gi,useMemo:Xi,useReducer:fi,useRef:zi,useState:function(){return fi(pi)},useDebugValue:Qi,useDeferredValue:function(e,t){return Ji(di(),Hr.memoizedState,e,t)},useTransition:function(){var e=fi(pi)[0],t=di().memoizedState;return["boolean"==typeof e?e:ui(e),t]},useSyncExternalStore:vi,useId:io,useHostTransitionStatus:ro,useFormState:Di,useActionState:Di,useOptimistic:function(e,t){return ki(di(),0,e,t)},useMemoCache:mi,useCacheRefresh:oo};yo.useEffectEvent=qi;var bo={readContext:Ds,use:hi,useCallback:Yi,useContext:Ds,useEffect:Vi,useImperativeHandle:Wi,useInsertionEffect:Hi,useLayoutEffect:Gi,useMemo:Xi,useReducer:xi,useRef:zi,useState:function(){return xi(pi)},useDebugValue:Qi,useDeferredValue:function(e,t){var n=di();return null===Hr?Zi(n,e,t):Ji(n,Hr.memoizedState,e,t)},useTransition:function(){var e=xi(pi)[0],t=di().memoizedState;return["boolean"==typeof e?e:ui(e),t]},useSyncExternalStore:vi,useId:io,useHostTransitionStatus:ro,useFormState:Ii,useActionState:Ii,useOptimistic:function(e,t){var n=di();return null!==Hr?ki(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:mi,useCacheRefresh:oo};function wo(e,t,n,a){n=null==(n=n(a,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=qi;var So={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Wc(),s=br(a);s.payload=t,null!=n&&(s.callback=n),null!==(t=wr(e,s,a))&&(Yc(t,e,a),Sr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Wc(),s=br(a);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=wr(e,s,a))&&(Yc(t,e,a),Sr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wc(),a=br(n);a.tag=2,null!=t&&(a.callback=t),null!==(t=wr(e,a,n))&&(Yc(t,e,n),Sr(t,e,n))}};function jo(e,t,n,a,s,r,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!ta(n,a)||!ta(s,r))}function Co(e,t,n,a){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&So.enqueueReplaceState(t,t.state,null)}function ko(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var s in n===t&&(n=d({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function No(e){Ea(e)}function _o(e){}function Eo(e){Ea(e)}function Po(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ao(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Ro(e,t,n){return(n=br(n)).tag=3,n.payload={element:null},n.callback=function(){Po(e,t)},n}function To(e){return(e=br(e)).tag=3,e}function Mo(e,t,n,a){var s=n.type.getDerivedStateFromError;if("function"==typeof s){var r=a.value;e.payload=function(){return s(r)},e.callback=function(){Ao(t,n,a)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){Ao(t,n,a),"function"!=typeof s&&(null===Oc?Oc=new Set([this]):Oc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var Do=Error(a(461)),Lo=!1;function Fo(e,t,n,a){t.child=null===e?gr(t,null,n,a):fr(t,e.child,n,a)}function Io(e,t,n,a,s){n=n.render;var r=t.ref;if("ref"in a){var i={};for(var o in a)"ref"!==o&&(i[o]=a[o])}else i=a;return Ms(t),a=ni(e,t,n,i,r,s),o=ii(),null===e||Lo?(ms&&o&&ls(t),t.flags|=1,Fo(e,t,a,s),t.child):(oi(e,t,s),il(e,t,s))}function Oo(e,t,n,a,s){if(null===e){var r=n.type;return"function"!=typeof r||$a(r)||void 0!==r.defaultProps||null!==n.compare?((e=qa(n.type,null,a,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,zo(e,t,r,a,s))}if(r=e.child,!ol(e,s)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:ta)(i,a)&&e.ref===t.ref)return il(e,t,s)}return t.flags|=1,(e=Ua(r,a)).ref=t.ref,e.return=t,t.child=e}function zo(e,t,n,a,s){if(null!==e){var r=e.memoizedProps;if(ta(r,a)&&e.ref===t.ref){if(Lo=!1,t.pendingProps=a=r,!ol(e,s))return t.lanes=e.lanes,il(e,t,s);131072&e.flags&&(Lo=!0)}}return Go(e,t,n,a,s)}function Bo(e,t,n,a){var s=a.children,r=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===a.mode){if(128&t.flags){if(r=null!==r?r.baseLanes|n:n,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;a=s&~r}else a=0,t.child=null;return Uo(e,t,r,n,a)}if(!(536870912&n))return a=t.lanes=536870912,Uo(e,t,null!==r?r.baseLanes|n:n,n,a);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xs(0,null!==r?r.cachePool:null),null!==r?Rr(t,r):Tr(),Or(t)}else null!==r?(Xs(0,r.cachePool),Rr(t,r),zr(),t.memoizedState=null):(null!==e&&Xs(0,null),Tr(),zr());return Fo(e,t,s,n),t.child}function $o(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uo(e,t,n,a,s){var r=Ys();return r=null===r?null:{parent:Bs._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Xs(0,null),Tr(),Or(t),null!==e&&Rs(e,t,a,!0),t.childLanes=s,null}function Vo(e,t){return(t=tl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return fr(t,e.child,null,n),(e=Vo(t,t.pendingProps)).flags|=2,Br(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Go(e,t,n,a,s){return Ms(t),n=ni(e,t,n,a,void 0,s),a=ii(),null===e||Lo?(ms&&a&&ls(t),t.flags|=1,Fo(e,t,n,s),t.child):(oi(e,t,s),il(e,t,s))}function Ko(e,t,n,a,s,r){return Ms(t),t.updateQueue=null,n=si(t,a,n,s),ai(e),a=ii(),null===e||Lo?(ms&&a&&ls(t),t.flags|=1,Fo(e,t,n,r),t.child):(oi(e,t,r),il(e,t,r))}function Wo(e,t,n,a,s){if(Ms(t),null===t.stateNode){var r=Oa,i=n.contextType;"object"==typeof i&&null!==i&&(r=Ds(i)),r=new n(a,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=So,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=a,r.state=t.memoizedState,r.refs={},vr(t),i=n.contextType,r.context="object"==typeof i&&null!==i?Ds(i):Oa,r.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(wo(t,n,i,a),r.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(i=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),i!==r.state&&So.enqueueReplaceState(r,r.state,null),Nr(t,a,r,s),kr(),r.state=t.memoizedState),"function"==typeof r.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){r=t.stateNode;var o=t.memoizedProps,l=ko(n,o);r.props=l;var c=r.context,d=n.contextType;i=Oa,"object"==typeof d&&null!==d&&(i=Ds(d));var u=n.getDerivedStateFromProps;d="function"==typeof u||"function"==typeof r.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o||c!==i)&&Co(t,r,a,i),xr=!1;var h=t.memoizedState;r.state=h,Nr(t,a,r,s),kr(),c=t.memoizedState,o||h!==c||xr?("function"==typeof u&&(wo(t,n,u,a),c=t.memoizedState),(l=xr||jo(t,n,l,a,h,c,i))?(d||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.flags|=4194308)):("function"==typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),r.props=a,r.state=c,r.context=i,a=l):("function"==typeof r.componentDidMount&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,yr(e,t),d=ko(n,i=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=n.contextType,l=Oa,"object"==typeof c&&null!==c&&(l=Ds(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(i!==u||h!==l)&&Co(t,r,a,l),xr=!1,h=t.memoizedState,r.state=h,Nr(t,a,r,s),kr();var m=t.memoizedState;i!==u||h!==m||xr||null!==e&&null!==e.dependencies&&Ts(e.dependencies)?("function"==typeof o&&(wo(t,n,o,a),m=t.memoizedState),(d=xr||jo(t,n,d,a,h,m,l)||null!==e&&null!==e.dependencies&&Ts(e.dependencies))?(c||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(a,m,l),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(a,m,l)),"function"==typeof r.componentDidUpdate&&(t.flags|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),r.props=a,r.state=m,r.context=l,a=d):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,Ho(e,t),a=!!(128&t.flags),r||a?(r=t.stateNode,n=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&a?(t.child=fr(t,e.child,null,s),t.child=fr(t,null,n,s)):Fo(e,t,n,s),t.memoizedState=r.state,e=t.child):e=il(e,t,s),e}function Qo(e,t,n,a){return ws(),t.flags|=256,Fo(e,t,n,a),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Zs()}}function Zo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Pc),e}function Jo(e,t,n){var s,r=t.pendingProps,i=!1,o=!!(128&t.flags);if((s=o)||(s=(null===e||null!==e.memoizedState)&&!!(2&$r.current)),s&&(i=!0,t.flags&=-129),s=!!(32&t.flags),t.flags&=-33,null===e){if(ms){if(i?Fr(t):zr(),(e=hs)?null!==(e=null!==(e=Tu(e,fs))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==as?{id:ss,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Ka(e)).return=t,t.child=n,us=t,hs=null):e=null,null===e)throw xs(t);return Du(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,i?(zr(),l=tl({mode:"hidden",children:l},i=t.mode),r=Ha(r,i,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Xo(n),r.childLanes=Zo(e,s,n),t.memoizedState=Yo,$o(null,r)):(Fr(t),el(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Fr(t),t.flags&=-257,t=nl(e,t,n)):null!==t.memoizedState?(zr(),t.child=e.child,t.flags|=128,t=null):(zr(),l=r.fallback,i=t.mode,r=tl({mode:"visible",children:r.children},i),(l=Ha(l,i,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,fr(t,e.child,null,n),(r=t.child).memoizedState=Xo(n),r.childLanes=Zo(e,s,n),t.memoizedState=Yo,t=$o(null,r));else if(Fr(t),Du(l)){if(s=l.nextSibling&&l.nextSibling.dataset)var d=s.dgst;s=d,(r=Error(a(419))).stack="",r.digest=s,js({value:r,source:null,stack:null}),t=nl(e,t,n)}else if(Lo||Rs(e,t,n,!1),s=0!==(n&e.childLanes),Lo||s){if(null!==(s=gc)&&(0!==(r=Ie(s,n))&&r!==c.retryLane))throw c.retryLane=r,La(e,r),Yc(s,e,r),Do;Mu(l)||ld(),t=nl(e,t,n)}else Mu(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,hs=Lu(l.nextSibling),us=t,ms=!0,ps=null,fs=!1,null!==e&&ds(t,e),(t=el(t,r.children)).flags|=4096);return t}return i?(zr(),l=r.fallback,i=t.mode,d=(c=e.child).sibling,(r=Ua(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?l=Ua(d,l):(l=Ha(l,i,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,$o(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(i=l.cachePool)?(c=Bs._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Zs(),l={baseLanes:l.baseLanes|n,cachePool:i}),r.memoizedState=l,r.childLanes=Zo(e,s,n),t.memoizedState=Yo,$o(e.child,r)):(Fr(t),e=(n=e.child).sibling,(n=Ua(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function el(e,t){return(t=tl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function tl(e,t){return(e=Ba(22,e,null,t)).lanes=0,e}function nl(e,t,n){return fr(t,e.child,null,n),(e=el(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function al(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Ps(e.return,t,n)}function sl(e,t,n,a,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=s,i.treeForkCount=r)}function rl(e,t,n){var a=t.pendingProps,s=a.revealOrder,r=a.tail;a=a.children;var i=$r.current,o=!!(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,V($r,i),Fo(e,t,a,n),a=ms?es:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&al(e,n,t);else if(19===e.tag)al(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Ur(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),sl(t,!1,s,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Ur(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}sl(t,!0,n,null,r,a);break;case"together":sl(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Rs(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ua(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ua(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ts(e))}function ll(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Lo=!0;else{if(!(ol(e,n)||128&t.flags))return Lo=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),_s(0,Bs,e.memoizedState.cache),ws();break;case 27:case 5:Z(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:_s(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ir(t),null;break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(Fr(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Jo(e,t,n):(Fr(t),null!==(e=il(e,t,n))?e.sibling:null);Fr(t);break;case 19:var s=!!(128&e.flags);if((a=0!==(n&t.childLanes))||(Rs(e,t,n,!1),a=0!==(n&t.childLanes)),s){if(a)return rl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),V($r,$r.current),a)break;return null;case 22:return t.lanes=0,Bo(e,t,n,t.pendingProps);case 24:_s(0,Bs,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Lo=!!(131072&e.flags)}else Lo=!1,ms&&1048576&t.flags&&os(t,es,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=rr(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var r=e.$$typeof;if(r===w){t.tag=11,t=Io(null,t,e,s,n);break e}if(r===k){t.tag=14,t=Oo(null,t,e,s,n);break e}}throw t=D(e)||e,Error(a(306,t,""))}$a(e)?(s=ko(e,s),t.tag=1,t=Wo(null,t,e,s,n)):(t.tag=0,t=Go(null,t,e,s,n))}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return Wo(e,t,s=t.type,r=ko(s,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(a(387));s=t.pendingProps;var i=t.memoizedState;r=i.element,yr(e,t),Nr(t,s,null,n);var o=t.memoizedState;if(s=o.cache,_s(0,Bs,s),s!==i.cache&&As(t,[Bs],n,!0),kr(),s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Qo(e,t,s,n);break e}if(s!==r){js(r=Ya(Error(a(424)),t)),t=Qo(e,t,s,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(hs=Lu(e.firstChild),us=t,ms=!0,ps=null,fs=!0,n=gr(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ws(),s===r){t=il(e,t,n);break e}Fo(e,t,s,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Ku(t.type,null,t.pendingProps,null))?t.memoizedState=n:ms||(n=t.type,e=t.pendingProps,(s=vu(W.current).createElement(n))[Ve]=t,s[qe]=e,pu(s,n,e),nt(s),t.stateNode=s):t.memoizedState=Ku(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),null===e&&ms&&(s=t.stateNode=zu(t.type,t.pendingProps,W.current),us=t,fs=!0,r=hs,Eu(t.type)?(Fu=r,hs=Lu(s.firstChild)):hs=r),Fo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ms&&((r=s=hs)&&(null!==(s=function(e,t,n,a){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===r)return e}if(null===(e=Lu(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,fs))?(t.stateNode=s,us=t,hs=Lu(s.firstChild),fs=!1,r=!0):r=!1),r||xs(t)),Z(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,wu(r,i)?s=null:null!==o&&wu(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=ni(e,t,ri,null,null,n),hh._currentValue=r),Ho(e,t),Fo(e,t,s,n),t.child;case 6:return null===e&&ms&&((e=n=hs)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}(n,t.pendingProps,fs))?(t.stateNode=n,us=t,hs=null,e=!0):e=!1),e||xs(t)),null;case 13:return Jo(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=fr(t,null,s,n):Fo(e,t,s,n),t.child;case 11:return Io(e,t,t.type,t.pendingProps,n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,_s(0,t.type,s.value),Fo(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Ms(t),s=s(r=Ds(r)),t.flags|=1,Fo(e,t,s,n),t.child;case 14:return Oo(e,t,t.type,t.pendingProps,n);case 15:return zo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var s=t.pendingProps,r=!!(128&t.flags);if(t.flags&=-129,null===e){if(ms){if("hidden"===s.mode)return e=Vo(t,s),t.lanes=536870912,$o(null,e);if(Ir(t),(e=hs)?null!==(e=null!==(e=Tu(e,fs))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==as?{id:ss,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Ka(e)).return=t,t.child=n,us=t,hs=null):e=null,null===e)throw xs(t);return t.lanes=536870912,null}return Vo(t,s)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Ir(t),r)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Lo||Rs(e,t,n,!1),r=0!==(n&e.childLanes),Lo||r){if(null!==(s=gc)&&0!==(o=Ie(s,n))&&o!==i.retryLane)throw i.retryLane=o,La(e,o),Yc(s,e,o),Do;ld(),t=qo(e,t,n)}else e=i.treeContext,hs=Lu(o.nextSibling),us=t,ms=!0,ps=null,fs=!1,null!==e&&ds(t,e),(t=Vo(t,s)).flags|=4096;return t}return(e=Ua(e.child,{mode:s.mode,children:s.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Bo(e,t,n,t.pendingProps);case 24:return Ms(t),s=Ds(Bs),null===e?(null===(r=Ys())&&(r=gc,i=$s(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:s,cache:r},vr(t),_s(0,Bs,r)):(0!==(e.lanes&n)&&(yr(e,t),Nr(t,null,null,n),kr()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),_s(0,Bs,s)):(s=i.cache,_s(0,Bs,s),s!==r.cache&&As(t,[Bs],n,!0))),Fo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function cl(e){e.flags|=4}function dl(e,t,n,a,s){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!rd())throw ir=nr,er;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!rd())throw ir=nr,er;e.flags|=8192}}function hl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,Ac|=t)}function ml(e,t){if(!ms)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function pl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=65011712&s.subtreeFlags,a|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function fl(e,t,n){var s=t.pendingProps;switch(cs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return pl(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Es(Bs),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bs(t)?cl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,Ss())),pl(t),null;case 26:var r=t.type,i=t.memoizedState;return null===e?(cl(t),null!==i?(pl(t),ul(t,i)):(pl(t),dl(t,r,0,0,n))):i?i!==e.memoizedState?(cl(t),pl(t),ul(t,i)):(pl(t),t.flags&=-16777217):((e=e.memoizedProps)!==s&&cl(t),pl(t),dl(t,r,0,0,n)),null;case 27:if(J(t),n=W.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&cl(t);else{if(!s){if(null===t.stateNode)throw Error(a(166));return pl(t),null}e=G.current,bs(t)?vs(t):(e=zu(r,s,n),t.stateNode=e,cl(t))}return pl(t),null;case 5:if(J(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&cl(t);else{if(!s){if(null===t.stateNode)throw Error(a(166));return pl(t),null}if(i=G.current,bs(t))vs(t);else{var o=vu(W.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"==typeof s.is?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i="string"==typeof s.is?o.createElement(r,{is:s.is}):o.createElement(r)}}i[Ve]=t,i[qe]=s;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(pu(i,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&cl(t)}}return pl(t),dl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&cl(t);else{if("string"!=typeof s&&null===t.stateNode)throw Error(a(166));if(e=W.current,bs(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(r=us))switch(r.tag){case 27:case 5:s=r.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==s&&!0===s.suppressHydrationWarning||uu(e.nodeValue,n)))||xs(t,!0)}else(e=vu(e).createTextNode(s))[Ve]=t,t.stateNode=e}return pl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(s=bs(t),null!==n){if(null===e){if(!s)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[Ve]=t}else ws(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;pl(t),e=!1}else n=Ss(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Br(t),t):(Br(t),null);if(128&t.flags)throw Error(a(558))}return pl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=bs(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[Ve]=t}else ws(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;pl(t),r=!1}else r=Ss(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Br(t),t):(Br(t),null)}return Br(t),128&t.flags?(t.lanes=n,t):(n=null!==s,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(r=s.alternate.memoizedState.cachePool.pool),i=null,null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),hl(t,t.updateQueue),pl(t),null);case 4:return X(),null===e&&tu(t.stateNode.containerInfo),pl(t),null;case 10:return Es(t.type),pl(t),null;case 19:if(U($r),null===(s=t.memoizedState))return pl(t),null;if(r=!!(128&t.flags),null===(i=s.rendering))if(r)ml(s,!1);else{if(0!==kc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=Ur(e))){for(t.flags|=128,ml(s,!1),e=i.updateQueue,t.updateQueue=e,hl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Va(n,e),n=n.sibling;return V($r,1&$r.current|2),ms&&is(t,s.treeForkCount),t.child}e=e.sibling}null!==s.tail&&de()>Fc&&(t.flags|=128,r=!0,ml(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ur(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,hl(t,e),ml(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!ms)return pl(t),null}else 2*de()-s.renderingStartTime>Fc&&536870912!==n&&(t.flags|=128,r=!0,ml(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=de(),e.sibling=null,n=$r.current,V($r,r?1&n|2:1&n),ms&&is(t,s.treeForkCount),e):(pl(t),null);case 22:case 23:return Br(t),Mr(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?!!(536870912&n)&&!(128&t.flags)&&(pl(t),6&t.subtreeFlags&&(t.flags|=8192)):pl(t),null!==(n=t.updateQueue)&&hl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&U(Qs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Es(Bs),pl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function gl(e,t){switch(cs(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Es(Bs),X(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(Br(t),null===t.alternate)throw Error(a(340));ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Br(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U($r),null;case 4:return X(),null;case 10:return Es(t.type),null;case 22:case 23:return Br(t),Mr(),null!==e&&U(Qs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Es(Bs),null;default:return null}}function xl(e,t){switch(cs(t),t.tag){case 3:Es(Bs),X();break;case 26:case 27:case 5:J(t);break;case 4:X();break;case 31:null!==t.memoizedState&&Br(t);break;case 13:Br(t);break;case 19:U($r);break;case 10:Es(t.type);break;case 22:case 23:Br(t),Mr(),null!==e&&U(Qs);break;case 24:Es(Bs)}}function vl(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){a=void 0;var r=n.create,i=n.inst;a=r(),i.destroy=a}n=n.next}while(n!==s)}}catch(o){kd(t,t.return,o)}}function yl(e,t,n){try{var a=t.updateQueue,s=null!==a?a.lastEffect:null;if(null!==s){var r=s.next;a=r;do{if((a.tag&e)===e){var i=a.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(d){kd(s,l,d)}}}a=a.next}while(a!==r)}}catch(d){kd(t,t.return,d)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Er(t,n)}catch(a){kd(e,e.return,a)}}}function wl(e,t,n){n.props=ko(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){kd(e,t,a)}}function Sl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"==typeof n?e.refCleanup=n(a):n.current=a}}catch(s){kd(e,t,s)}}function jl(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"==typeof a)try{a()}catch(s){kd(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(r){kd(e,t,r)}else n.current=null}function Cl(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){kd(e,e.return,s)}}function kl(e,t,n){try{var s=e.stateNode;!function(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,o=null,l=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(p)||hu(e,t,p,null,s,h)}}for(var m in s){var p=s[m];if(h=n[m],s.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":i=p;break;case"name":r=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&hu(e,t,m,p,s,h)}}return void bt(e,o,l,c,d,u,i,r);case"select":for(i in p=o=l=m=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:s.hasOwnProperty(i)||hu(e,t,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(null!=i||null!=c))switch(r){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&hu(e,t,r,i,s,c)}return t=l,n=o,s=p,void(null!=m?jt(e,!!n,m,!1):!!s!=!!n&&(null!=t?jt(e,!!n,t,!0):jt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=m=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:hu(e,t,l,null,s,r)}for(o in s)if(r=s[o],i=n[o],s.hasOwnProperty(o)&&(null!=r||null!=i))switch(o){case"value":m=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(a(91));break;default:r!==i&&hu(e,t,o,r,s,i)}return void Ct(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!s.hasOwnProperty(f))if("selected"===f)e.selected=!1;else hu(e,t,f,null,s,m);for(c in s)if(m=s[c],p=n[c],s.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!=typeof m&&"symbol"!=typeof m;else hu(e,t,c,m,s,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!s.hasOwnProperty(g)&&hu(e,t,g,null,s,m);for(d in s)if(m=s[d],p=n[d],s.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:hu(e,t,d,m,s,p)}return;default:if(At(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&void 0!==m&&!s.hasOwnProperty(x)&&mu(e,t,x,void 0,s,m);for(u in s)m=s[u],p=n[u],!s.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||mu(e,t,u,m,s,p);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&null!=m&&!s.hasOwnProperty(v)&&hu(e,t,v,null,s,m);for(h in s)m=s[h],p=n[h],!s.hasOwnProperty(h)||m===p||null==m&&null==p||hu(e,t,h,m,s,p)}(s,e.type,n,t),s[qe]=t}catch(r){kd(e,e.return,r)}}function Nl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Eu(e.type)||4===e.tag}function _l(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Eu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function El(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Dt));else if(4!==a&&(27===a&&Eu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function Pl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&(27===a&&Eu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Pl(e,t,n),e=e.sibling;null!==e;)Pl(e,t,n),e=e.sibling}function Al(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);pu(t,a,n),t[Ve]=e,t[qe]=n}catch(r){kd(e,e.return,r)}}var Rl=!1,Tl=!1,Ml=!1,Dl="function"==typeof WeakSet?WeakSet:Set,Ll=null;function Fl(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&a&&vl(5,n);break;case 1:if(Yl(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){kd(n,n.return,i)}else{var s=ko(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){kd(n,n.return,o)}}64&a&&bl(n),512&a&&Sl(n,n.return);break;case 3:if(Yl(e,n),64&a&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Er(e,t)}catch(i){kd(n,n.return,i)}}break;case 27:null===t&&4&a&&Al(n);case 26:case 5:Yl(e,n),null===t&&4&a&&Cl(n),512&a&&Sl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&a&&Ul(e,n);break;case 13:Yl(e,n),4&a&&Vl(e,n),64&a&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,n=Pd.bind(null,n))));break;case 22:if(!(a=null!==n.memoizedState||Rl)){t=null!==t&&null!==t.memoizedState||Tl,s=Rl;var r=Tl;Rl=a,(Tl=t)&&!r?Zl(e,n,!!(8772&n.subtreeFlags)):Yl(e,n),Rl=s,Tl=r}break;case 30:break;default:Yl(e,n)}}function Il(e){var t=e.alternate;null!==t&&(e.alternate=null,Il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ol=null,zl=!1;function Bl(e,t,n){for(n=n.child;null!==n;)$l(e,t,n),n=n.sibling}function $l(e,t,n){if(be&&"function"==typeof be.onCommitFiberUnmount)try{be.onCommitFiberUnmount(ye,n)}catch(r){}switch(n.tag){case 26:Tl||jl(n,t),Bl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Tl||jl(n,t);var a=Ol,s=zl;Eu(n.type)&&(Ol=n.stateNode,zl=!1),Bl(e,t,n),Bu(n.stateNode),Ol=a,zl=s;break;case 5:Tl||jl(n,t);case 6:if(a=Ol,s=zl,Ol=null,Bl(e,t,n),zl=s,null!==(Ol=a))if(zl)try{(9===Ol.nodeType?Ol.body:"HTML"===Ol.nodeName?Ol.ownerDocument.body:Ol).removeChild(n.stateNode)}catch(i){kd(n,t,i)}else try{Ol.removeChild(n.stateNode)}catch(i){kd(n,t,i)}break;case 18:null!==Ol&&(zl?(Pu(9===(e=Ol).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):Pu(Ol,n.stateNode));break;case 4:a=Ol,s=zl,Ol=n.stateNode.containerInfo,zl=!0,Bl(e,t,n),Ol=a,zl=s;break;case 0:case 11:case 14:case 15:yl(2,n,t),Tl||yl(4,n,t),Bl(e,t,n);break;case 1:Tl||(jl(n,t),"function"==typeof(a=n.stateNode).componentWillUnmount&&wl(n,t,a)),Bl(e,t,n);break;case 21:Bl(e,t,n);break;case 22:Tl=(a=Tl)||null!==n.memoizedState,Bl(e,t,n),Tl=a;break;default:Bl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gh(e)}catch(n){kd(t,t.return,n)}}}function Vl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gh(e)}catch(n){kd(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var a=Ad.bind(null,e,t);t.then(a,a)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Eu(l.type)){Ol=l.stateNode,zl=!1;break e}break;case 5:Ol=l.stateNode,zl=!1;break e;case 3:case 4:Ol=l.stateNode.containerInfo,zl=!0;break e}l=l.return}if(null===Ol)throw Error(a(160));$l(i,o,r),Ol=null,zl=!1,null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Gl=null;function Kl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Wl(e),4&s&&(yl(3,e,e.return),vl(3,e),yl(5,e,e.return));break;case 1:Hl(t,e),Wl(e),512&s&&(Tl||null===n||jl(n,n.return)),64&s&&Rl&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s))));break;case 26:var r=Gl;if(Hl(t,e),Wl(e),512&s&&(Tl||null===n||jl(n,n.return)),4&s){var i=null!==n?n.memoizedState:null;if(s=e.memoizedState,null===n)if(null===s)if(null===e.stateNode){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":(!(i=r.getElementsByTagName("title")[0])||i[Ye]||i[Ve]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),pu(i,s,n),i[Ve]=e,nt(i),s=i;break e;case"link":var o=sh("link","href",r).get(s+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}pu(i=r.createElement(s),s,n),r.head.appendChild(i);break;case"meta":if(o=sh("meta","content",r).get(s+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}pu(i=r.createElement(s),s,n),r.head.appendChild(i);break;default:throw Error(a(468,s))}i[Ve]=e,nt(i),s=i}e.stateNode=s}else rh(r,e.type,e.stateNode);else e.stateNode=Ju(r,s,e.memoizedProps);else i!==s?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===s?rh(r,e.type,e.stateNode):Ju(r,s,e.memoizedProps)):null===s&&null!==e.stateNode&&kl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Wl(e),512&s&&(Tl||null===n||jl(n,n.return)),null!==n&&4&s&&kl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Wl(e),512&s&&(Tl||null===n||jl(n,n.return)),32&e.flags){r=e.stateNode;try{Nt(r,"")}catch(f){kd(e,e.return,f)}}4&s&&null!=e.stateNode&&kl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&s&&(Ml=!0);break;case 6:if(Hl(t,e),Wl(e),4&s){if(null===e.stateNode)throw Error(a(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(f){kd(e,e.return,f)}}break;case 3:if(ah=null,r=Gl,Gl=Vu(t.containerInfo),Hl(t,e),Gl=r,Wl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(f){kd(e,e.return,f)}Ml&&(Ml=!1,Ql(e));break;case 4:s=Gl,Gl=Vu(e.stateNode.containerInfo),Hl(t,e),Wl(e),Gl=s;break;case 12:default:Hl(t,e),Wl(e);break;case 31:case 19:Hl(t,e),Wl(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,ql(e,s)));break;case 13:Hl(t,e),Wl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Dc=de()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,ql(e,s)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=Rl,u=Tl;if(Rl=d||r,Tl=u||c,Hl(t,e),Tl=u,Rl=d,Wl(e),8192&s)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||Rl||Tl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,r)"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"==typeof m?"":(""+m).trim()}}catch(f){kd(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(f){kd(c,c.return,f)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;r?Au(p,!0):Au(c.stateNode,!1)}catch(f){kd(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(n=s.retryQueue)&&(s.retryQueue=null,ql(e,n))));case 30:case 21:}}function Wl(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(Nl(s)){n=s;break}s=s.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var r=n.stateNode;Pl(e,_l(e),r);break;case 5:var i=n.stateNode;32&n.flags&&(Nt(i,""),n.flags&=-33),Pl(e,_l(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;El(e,_l(e),o);break;default:throw Error(a(161))}}catch(l){kd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Fl(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Xl(t);break;case 1:jl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&wl(t,t.return,n),Xl(t);break;case 27:Bu(t.stateNode);case 26:case 5:jl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Zl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,s=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:Zl(s,r,n),vl(4,r);break;case 1:if(Zl(s,r,n),"function"==typeof(s=(a=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){kd(a,a.return,c)}if(null!==(s=(a=r).updateQueue)){var o=a.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)_r(l[s],o)}catch(c){kd(a,a.return,c)}}n&&64&i&&bl(r),Sl(r,r.return);break;case 27:Al(r);case 26:case 5:Zl(s,r,n),n&&null===a&&4&i&&Cl(r),Sl(r,r.return);break;case 12:Zl(s,r,n);break;case 31:Zl(s,r,n),n&&4&i&&Ul(s,r);break;case 13:Zl(s,r,n),n&&4&i&&Vl(s,r);break;case 22:null===r.memoizedState&&Zl(s,r,n),Sl(r,r.return);break;case 30:break;default:Zl(s,r,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Us(n))}function ec(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Us(e))}function tc(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nc(e,t,n,a),t=t.sibling}function nc(e,t,n,a){var s=t.flags;switch(t.tag){case 0:case 11:case 15:tc(e,t,n,a),2048&s&&vl(9,t);break;case 1:case 31:case 13:default:tc(e,t,n,a);break;case 3:tc(e,t,n,a),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Us(e)));break;case 12:if(2048&s){tc(e,t,n,a),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,o=r.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){kd(t,t.return,l)}}else tc(e,t,n,a);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,null!==t.memoizedState?2&r._visibility?tc(e,t,n,a):sc(e,t):2&r._visibility?tc(e,t,n,a):(r._visibility|=2,ac(e,t,n,a,!!(10256&t.subtreeFlags)||!1)),2048&s&&Jl(i,t);break;case 24:tc(e,t,n,a),2048&s&&ec(t.alternate,t)}}function ac(e,t,n,a,s){for(s=s&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var r=e,i=t,o=n,l=a,c=i.flags;switch(i.tag){case 0:case 11:case 15:ac(r,i,o,l,s),vl(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?ac(r,i,o,l,s):sc(r,i):(d._visibility|=2,ac(r,i,o,l,s)),s&&2048&c&&Jl(i.alternate,i);break;case 24:ac(r,i,o,l,s),s&&2048&c&&ec(i.alternate,i);break;default:ac(r,i,o,l,s)}t=t.sibling}}function sc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,s=a.flags;switch(a.tag){case 22:sc(n,a),2048&s&&Jl(a.alternate,a);break;case 24:sc(n,a),2048&s&&ec(a.alternate,a);break;default:sc(n,a)}t=t.sibling}}var rc=8192;function ic(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)oc(e,t,n),e=e.sibling}function oc(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,a){if(!("stylesheet"!==n.type||"string"==typeof a.media&&!1===matchMedia(a.media).matches||4&n.state.loading)){if(null===n.instance){var s=Wu(a.href),r=t.querySelector(Qu(s));if(r)return null!==(t=r._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=lh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,void nt(r);r=t.ownerDocument||t,a=Yu(a),(s=$u.get(s))&&th(a,s),nt(r=r.createElement("link"));var i=r;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),pu(r,"link",a),n.instance=r}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=lh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var a=Gl;Gl=Vu(e.stateNode.containerInfo),ic(e,t,n),Gl=a;break;case 22:null===e.memoizedState&&(null!==(a=e.alternate)&&null!==a.memoizedState?(a=rc,rc=16777216,ic(e,t,n),rc=a):ic(e,t,n))}}function lc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function cc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Ll=a,hc(a,e)}lc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)dc(e),e=e.sibling}function dc(e){switch(e.tag){case 0:case 11:case 15:cc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:cc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):cc(e)}}function uc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Ll=a,hc(a,e)}lc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function hc(e,t){for(;null!==Ll;){var n=Ll;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Us(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,Ll=a;else e:for(n=e;null!==Ll;){var s=(a=Ll).sibling,r=a.return;if(Il(a),a===n){Ll=null;break e}if(null!==s){s.return=r,Ll=s;break e}Ll=r}}}var mc={getCacheForType:function(e){var t=Ds(Bs),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ds(Bs).controller.signal}},pc="function"==typeof WeakMap?WeakMap:Map,fc=0,gc=null,xc=null,vc=0,yc=0,bc=null,wc=!1,Sc=!1,jc=!1,Cc=0,kc=0,Nc=0,_c=0,Ec=0,Pc=0,Ac=0,Rc=null,Tc=null,Mc=!1,Dc=0,Lc=0,Fc=1/0,Ic=null,Oc=null,zc=0,Bc=null,$c=null,Uc=0,Vc=0,qc=null,Hc=null,Gc=0,Kc=null;function Wc(){return 2&fc&&0!==vc?vc&-vc:null!==F.T?qd():Be()}function Qc(){if(0===Pc)if(536870912&vc&&!ms)Pc=536870912;else{var e=Ne;!(3932160&(Ne<<=1))&&(Ne=262144),Pc=e}return null!==(e=Dr.current)&&(e.flags|=32),Pc}function Yc(e,t,n){(e!==gc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(ad(e,0),ed(e,vc,Pc,!1)),De(e,n),2&fc&&e===gc||(e===gc&&(!(2&fc)&&(_c|=n),4===kc&&ed(e,vc,Pc,!1)),Id(e))}function Xc(e,t,n){if(6&fc)throw Error(a(327));for(var s=!n&&!(127&t)&&0===(t&e.expiredLanes)||Ae(e,t),r=s?function(e,t){var n=fc;fc|=2;var s=id(),r=od();gc!==e||vc!==t?(Ic=null,Fc=de()+500,ad(e,t)):Sc=Ae(e,t);e:for(;;)try{if(0!==yc&&null!==xc){t=xc;var i=bc;t:switch(yc){case 1:yc=0,bc=null,pd(e,t,i,1);break;case 2:case 9:if(ar(i)){yc=0,bc=null,md(t);break}t=function(){2!==yc&&9!==yc||gc!==e||(yc=7),Id(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ar(i)?(yc=0,bc=null,md(t)):(yc=0,bc=null,pd(e,t,i,7));break;case 5:var o=null;switch(xc.tag){case 26:o=xc.memoizedState;case 5:case 27:var l=xc;if(o?ih(o):l.stateNode.complete){yc=0,bc=null;var c=l.sibling;if(null!==c)xc=c;else{var d=l.return;null!==d?(xc=d,fd(d)):xc=null}break t}}yc=0,bc=null,pd(e,t,i,5);break;case 6:yc=0,bc=null,pd(e,t,i,6);break;case 8:nd(),kc=6;break e;default:throw Error(a(462))}}ud();break}catch(u){sd(e,u)}return Ns=ks=null,F.H=s,F.A=r,fc=n,null!==xc?0:(gc=null,vc=0,Ta(),kc)}(e,t):cd(e,t,!0),i=s;;){if(0===r){Sc&&!s&&ed(e,t,0,!1);break}if(n=e.current.alternate,!i||Jc(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=Rc;var c=l.current.memoizedState.isDehydrated;if(c&&(ad(l,o).flags|=256),2!==(o=cd(l,o,!1))){if(jc&&!c){l.errorRecoveryDisabledLanes|=i,_c|=i,r=4;break e}i=Tc,Tc=r,null!==i&&(null===Tc?Tc=i:Tc.push.apply(Tc,i))}r=o}if(i=!1,2!==r)continue}}if(1===r){ad(e,0),ed(e,t,0,!0);break}e:{switch(s=e,i=r){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:ed(s,t,Pc,!wc);break e;case 2:Tc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(r=Dc+300-de())){if(ed(s,t,Pc,!wc),0!==Pe(s,0,!0))break e;Uc=t,s.timeoutHandle=ju(Zc.bind(null,s,n,Tc,Ic,Mc,t,Pc,_c,Ac,wc,i,"Throttled",-0,0),r)}else Zc(s,n,Tc,Ic,Mc,t,Pc,_c,Ac,wc,i,null,-0,0)}break}r=cd(e,t,!1),i=!1}Id(e)}function Zc(e,t,n,a,s,r,i,o,l,c,d,u,h,m){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||!(16785408&~u)){oc(t,r,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var p=(62914560&r)===r?Dc-de():(4194048&r)===r?Lc-de():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&dh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&dh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===oh&&(oh=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var s=n[a],r=s.transferSize,i=s.initiatorType,o=s.duration;if(r&&o&&fu(i)){for(i=0,o=s.responseEnd,a+=1;a<n.length;a++){var l=n[a],c=l.startTime;if(c>o)break;var d=l.transferSize,u=l.initiatorType;d&&fu(u)&&(i+=d*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--a,t+=8*(r+i)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&dh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>oh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(s)}}:null}(u,p)))return Uc=r,e.cancelPendingCommit=p(xd.bind(null,e,t,r,n,a,s,i,o,l,d,u,null,h,m)),void ed(e,r,i,!c)}xd(e,t,r,n,a,s,i,o,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!ea(r(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ed(e,t,n,a){t&=~Ec,t&=~_c,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var s=t;0<s;){var r=31-Se(s),i=1<<r;a[r]=-1,s&=~i}0!==n&&Le(e,n,t)}function td(){return!!(6&fc)||(Od(0),!1)}function nd(){if(null!==xc){if(0===yc)var e=xc.return;else Ns=ks=null,li(e=xc),cr=null,dr=0,e=xc;for(;null!==e;)xl(e.alternate,e),e=e.return;xc=null}}function ad(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,nd(),gc=e,xc=n=Ua(e.current,null),vc=t,yc=0,bc=null,wc=!1,Sc=Ae(e,t),jc=!1,Ac=Pc=Ec=_c=Nc=kc=0,Tc=Rc=null,Mc=!1,8&t&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var s=31-Se(a),r=1<<s;t|=e[s],a&=~r}return Cc=t,Ta(),n}function sd(e,t){qr=null,F.H=xo,t===Js||t===tr?(t=or(),yc=3):t===er?(t=or(),yc=4):yc=t===Do?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,bc=t,null===xc&&(kc=1,Po(e,Ya(t,e.current)))}function rd(){var e=Dr.current;return null===e||((4194048&vc)===vc?null===Lr:!!((62914560&vc)===vc||536870912&vc)&&e===Lr)}function id(){var e=F.H;return F.H=xo,null===e?xo:e}function od(){var e=F.A;return F.A=mc,e}function ld(){kc=4,wc||(4194048&vc)!==vc&&null!==Dr.current||(Sc=!0),!(134217727&Nc)&&!(134217727&_c)||null===gc||ed(gc,vc,Pc,!1)}function cd(e,t,n){var a=fc;fc|=2;var s=id(),r=od();gc===e&&vc===t||(Ic=null,ad(e,t)),t=!1;var i=kc;e:for(;;)try{if(0!==yc&&null!==xc){var o=xc,l=bc;switch(yc){case 8:nd(),i=6;break e;case 3:case 2:case 9:case 6:null===Dr.current&&(t=!0);var c=yc;if(yc=0,bc=null,pd(e,o,l,c),n&&Sc){i=0;break e}break;default:c=yc,yc=0,bc=null,pd(e,o,l,c)}}dd(),i=kc;break}catch(d){sd(e,d)}return t&&e.shellSuspendCounter++,Ns=ks=null,fc=a,F.H=s,F.A=r,null===xc&&(gc=null,vc=0,Ta()),i}function dd(){for(;null!==xc;)hd(xc)}function ud(){for(;null!==xc&&!le();)hd(xc)}function hd(e){var t=ll(e.alternate,e,Cc);e.memoizedProps=e.pendingProps,null===t?fd(e):xc=t}function md(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,vc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,vc);break;case 5:li(t);default:xl(n,t),t=ll(n,t=xc=Va(t,Cc),Cc)}e.memoizedProps=e.pendingProps,null===t?fd(e):xc=t}function pd(e,t,n,s){Ns=ks=null,li(t),cr=null,dr=0;var r=t.return;try{if(function(e,t,n,s,r){if(n.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){if(null!==(t=n.alternate)&&Rs(t,n,r,!0),null!==(n=Dr.current)){switch(n.tag){case 31:case 13:return null===Lr?ld():null===n.alternate&&0===kc&&(kc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===nr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),Nd(e,s,r)),!1;case 22:return n.flags|=65536,s===nr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),Nd(e,s,r)),!1}throw Error(a(435,n.tag))}return Nd(e,s,r),ld(),!1}if(ms)return null!==(t=Dr.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==gs&&js(Ya(e=Error(a(422),{cause:s}),n))):(s!==gs&&js(Ya(t=Error(a(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,s=Ya(s,n),jr(e,r=Ro(e.stateNode,s,r)),4!==kc&&(kc=2)),!1;var i=Error(a(520),{cause:s});if(i=Ya(i,n),null===Rc?Rc=[i]:Rc.push(i),4!==kc&&(kc=2),null===t)return!0;s=Ya(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,jr(n,e=Ro(n.stateNode,s,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Oc&&Oc.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,Mo(r=To(r),e,n,s),jr(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,vc))return kc=1,Po(e,Ya(n,e.current)),void(xc=null)}catch(i){if(null!==r)throw xc=r,i;return kc=1,Po(e,Ya(n,e.current)),void(xc=null)}32768&t.flags?(ms||1===s?e=!0:Sc||536870912&vc?e=!1:(wc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=Dr.current)&&13===s.tag&&(s.flags|=16384))),gd(t,e)):fd(t)}function fd(e){var t=e;do{if(32768&t.flags)return void gd(t,wc);e=t.return;var n=fl(t.alternate,t,Cc);if(null!==n)return void(xc=n);if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===kc&&(kc=5)}function gd(e,t){do{var n=gl(e.alternate,e);if(null!==n)return n.flags&=32767,void(xc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(xc=e);xc=e=n}while(null!==e);kc=6,xc=null}function xd(e,t,n,s,r,i,o,l,c){e.cancelPendingCommit=null;do{Sd()}while(0!==zc);if(6&fc)throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,a,s,r){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-Se(n),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==a&&Le(e,a,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(i&~t))}(e,n,i|=Ra,o,l,c),e===gc&&(xc=gc=null,vc=0),$c=t,Bc=e,Uc=n,Vc=i,qc=r,Hc=s,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,ie(pe,function(){return jd(),null})):(e.callbackNode=null,e.callbackPriority=0),s=!!(13878&t.flags),13878&t.subtreeFlags||s){s=F.T,F.T=null,r=I.p,I.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,gu=wh,ia(e=ra(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===r&&(l=o),m===i&&++u===s&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xu={focusedElem:e,selectionRange:n},wh=!1,Ll=t;null!==Ll;)if(e=(t=Ll).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ll=e;else for(;null!==Ll;){switch(i=(t=Ll).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var f=ko(n.type,r);e=s.getSnapshotBeforeUpdate(f,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(x){kd(n,n.return,x)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ru(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ru(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Ll=e;break}Ll=t.return}}(e,t)}finally{fc=o,I.p=r,F.T=s}}zc=1,vd(),yd(),bd()}}function vd(){if(1===zc){zc=0;var e=Bc,t=$c,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=F.T,F.T=null;var a=I.p;I.p=2;var s=fc;fc|=4;try{Kl(t,e);var r=xu,i=ra(e.containerInfo),o=r.focusedElem,l=r.selectionRange;if(i!==o&&o&&o.ownerDocument&&sa(o.ownerDocument.documentElement,o)){if(null!==l&&ia(o)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var u=o.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=o.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(i=g,g=f,f=i);var x=aa(o,f),v=aa(o,g);if(x&&v&&(1!==m.rangeCount||m.anchorNode!==x.node||m.anchorOffset!==x.offset||m.focusNode!==v.node||m.focusOffset!==v.offset)){var y=u.createRange();y.setStart(x.node,x.offset),m.removeAllRanges(),f>g?(m.addRange(y),m.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),m.addRange(y))}}}}for(u=[],m=o;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<u.length;o++){var b=u[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}wh=!!gu,xu=gu=null}finally{fc=s,I.p=a,F.T=n}}e.current=t,zc=2}}function yd(){if(2===zc){zc=0;var e=Bc,t=$c,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=F.T,F.T=null;var a=I.p;I.p=2;var s=fc;fc|=4;try{Fl(e,t.alternate,t)}finally{fc=s,I.p=a,F.T=n}}zc=3}}function bd(){if(4===zc||3===zc){zc=0,ce();var e=Bc,t=$c,n=Uc,a=Hc;10256&t.subtreeFlags||10256&t.flags?zc=5:(zc=0,$c=Bc=null,wd(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Oc=null),ze(n),t=t.stateNode,be&&"function"==typeof be.onCommitFiberRoot)try{be.onCommitFiberRoot(ye,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==a){t=F.T,s=I.p,I.p=2,F.T=null;try{for(var r=e.onRecoverableError,i=0;i<a.length;i++){var o=a[i];r(o.value,{componentStack:o.stack})}}finally{F.T=t,I.p=s}}3&Uc&&Sd(),Id(e),s=e.pendingLanes,261930&n&&42&s?e===Kc?Gc++:(Gc=0,Kc=e):Gc=0,Od(0)}}function wd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Us(t)))}function Sd(){return vd(),yd(),bd(),jd()}function jd(){if(5!==zc)return!1;var e=Bc,t=Vc;Vc=0;var n=ze(Uc),s=F.T,r=I.p;try{I.p=32>n?32:n,F.T=null,n=qc,qc=null;var i=Bc,o=Uc;if(zc=0,$c=Bc=null,Uc=0,6&fc)throw Error(a(331));var l=fc;if(fc|=4,dc(i.current),nc(i,i.current,o,n),fc=l,Od(0,!1),be&&"function"==typeof be.onPostCommitFiberRoot)try{be.onPostCommitFiberRoot(ye,i)}catch(c){}return!0}finally{I.p=r,F.T=s,wd(e,t)}}function Cd(e,t,n){t=Ya(n,t),null!==(e=wr(e,t=Ro(e.stateNode,t,2),2))&&(De(e,2),Id(e))}function kd(e,t,n){if(3===e.tag)Cd(e,e,n);else for(;null!==t;){if(3===t.tag){Cd(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof a.componentDidCatch&&(null===Oc||!Oc.has(a))){e=Ya(n,e),null!==(a=wr(t,n=To(2),2))&&(Mo(n,a,t,e),De(a,2),Id(a));break}}t=t.return}}function Nd(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new pc;var s=new Set;a.set(t,s)}else void 0===(s=a.get(t))&&(s=new Set,a.set(t,s));s.has(n)||(jc=!0,s.add(n),e=_d.bind(null,e,t,n),t.then(e,e))}function _d(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gc===e&&(vc&n)===n&&(4===kc||3===kc&&(62914560&vc)===vc&&300>de()-Dc?!(2&fc)&&ad(e,0):Ec|=n,Ac===vc&&(Ac=0)),Id(e)}function Ed(e,t){0===t&&(t=Te()),null!==(e=La(e,t))&&(De(e,t),Id(e))}function Pd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ed(e,n)}function Ad(e,t){var n=0;switch(e.tag){case 31:case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==s&&s.delete(t),Ed(e,n)}var Rd=null,Td=null,Md=!1,Dd=!1,Ld=!1,Fd=0;function Id(e){e!==Td&&null===e.next&&(null===Td?Rd=Td=e:Td=Td.next=e),Dd=!0,Md||(Md=!0,Nu(function(){6&fc?ie(he,zd):Bd()}))}function Od(e,t){if(!Ld&&Dd){Ld=!0;do{for(var n=!1,a=Rd;null!==a;){if(0!==e){var s=a.pendingLanes;if(0===s)var r=0;else{var i=a.suspendedLanes,o=a.pingedLanes;r=(1<<31-Se(42|e)+1)-1,r=201326741&(r&=s&~(i&~o))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,Vd(a,r))}else r=vc,!(3&(r=Pe(a,a===gc?r:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||Ae(a,r)||(n=!0,Vd(a,r));a=a.next}}while(n);Ld=!1}}function zd(){Bd()}function Bd(){Dd=Md=!1;var e=0;0!==Fd&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Su&&(Su=e,!0);return Su=null,!1}()&&(e=Fd);for(var t=de(),n=null,a=Rd;null!==a;){var s=a.next,r=$d(a,t);0===r?(a.next=null,null===n?Rd=s:n.next=s,null===s&&(Td=n)):(n=a,(0!==e||3&r)&&(Dd=!0)),a=s}0!==zc&&5!==zc||Od(e),0!==Fd&&(Fd=0)}function $d(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var i=31-Se(r),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&a)||(s[i]=Re(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(n=vc,n=Pe(e,e===(t=gc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&oe(a),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Ae(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&oe(a),ze(n)){case 2:case 8:n=me;break;case 32:default:n=pe;break;case 268435456:n=ge}return a=Ud.bind(null,e),n=ie(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&oe(a),e.callbackPriority=2,e.callbackNode=null,2}function Ud(e,t){if(0!==zc&&5!==zc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Sd()&&e.callbackNode!==n)return null;var a=vc;return 0===(a=Pe(e,e===gc?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,a,t),$d(e,de()),null!=e.callbackNode&&e.callbackNode===n?Ud.bind(null,e):null)}function Vd(e,t){if(Sd())return null;Xc(e,t,!0)}function qd(){if(0===Fd){var e=Hs;0===e&&(e=ke,!(261888&(ke<<=1))&&(ke=256)),Fd=e}return Fd}function Hd(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Mt(""+e)}function Gd(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Kd=0;Kd<Na.length;Kd++){var Wd=Na[Kd];_a(Wd.toLowerCase(),"on"+(Wd[0].toUpperCase()+Wd.slice(1)))}_a(va,"onAnimationEnd"),_a(ya,"onAnimationIteration"),_a(ba,"onAnimationStart"),_a("dblclick","onDoubleClick"),_a("focusin","onFocus"),_a("focusout","onBlur"),_a(wa,"onTransitionRun"),_a(Sa,"onTransitionStart"),_a(ja,"onTransitionCancel"),_a(Ca,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qd));function Xd(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var i=a.length-1;0<=i;i--){var o=a[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(d){Ea(d)}s.currentTarget=null,r=l}else for(i=0;i<a.length;i++){if(l=(o=a[i]).instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(d){Ea(d)}s.currentTarget=null,r=l}}}}function Zd(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var a=e+"__bubble";n.has(a)||(nu(t,e,2,!1),n.add(a))}function Jd(e,t,n){var a=0;t&&(a|=4),nu(n,e,a,t)}var eu="_reactListening"+Math.random().toString(36).slice(2);function tu(e){if(!e[eu]){e[eu]=!0,at.forEach(function(t){"selectionchange"!==t&&(Yd.has(t)||Jd(t,!1,e),Jd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[eu]||(t[eu]=!0,Jd("selectionchange",!1,t))}}function nu(e,t,n,a){switch(Eh(t)){case 2:var s=Sh;break;case 8:s=jh;break;default:s=Ch}n=s.bind(null,t,n,e),s=void 0,!qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),a?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function au(e,t,n,a,s){var i=a;if(!(1&t||2&t||null===a))e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var l=a.stateNode.containerInfo;if(l===s)break;if(4===o)for(o=a.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==l;){if(null===(o=Ze(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){a=i=o;continue e}l=l.parentNode}}a=a.return}$t(function(){var a=i,s=Ft(n),o=[];e:{var l=ka.get(e);if(void 0!==l){var c=sn,d=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=bn;break;case"focusin":d="focus",c=un;break;case"focusout":d="blur",c=un;break;case"beforeblur":case"afterblur":c=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Sn;break;case va:case ya:case ba:c=hn;break;case Ca:c=jn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=Cn;break;case"copy":case"cut":case"paste":c=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=kn}var u=!!(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==l?l+"Capture":null:l;u=[];for(var p,f=a;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Ut(f,m))&&u.push(su(f,g,p)),h)break;f=f.return}0<u.length&&(l=new c(l,d,null,n,s),o.push({event:l,listeners:u}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Lt||!(d=n.relatedTarget||n.fromElement)||!Ze(d)&&!d[He])&&(c||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=a,null!==(d=(d=n.relatedTarget||n.toElement)?Ze(d):null)&&(h=r(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=a),c!==d)){if(u=cn,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=wn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?l:et(c),p=null==d?l:et(d),(l=new u(g,f+"leave",c,n,s)).target=h,l.relatedTarget=p,g=null,Ze(s)===a&&((u=new u(m,f+"enter",d,n,s)).target=p,u.relatedTarget=h,g=u),h=g,c&&d)e:{for(u=iu,f=d,p=0,g=m=c;g;g=u(g))p++;g=0;for(var x=f;x;x=u(x))g++;for(;0<p-g;)m=u(m),p--;for(;0<g-p;)f=u(f),g--;for(;p--;){if(m===f||null!==f&&m===f.alternate){u=m;break e}m=u(m),f=u(f)}u=null}else u=null;null!==c&&ou(o,l,c,u,!1),null!==d&&null!==h&&ou(o,h,d,u,!0)}if("select"===(c=(l=a?et(a):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var v=Vn;else if(In(l))if(qn)v=Jn;else{v=Xn;var y=Yn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?a&&At(a.elementType)&&(v=Vn):v=Zn;switch(v&&(v=v(e,a))?On(o,v,n,s):(y&&y(e,l,a),"focusout"===e&&a&&"number"===l.type&&null!=a.memoizedProps.value&&St(l,"number",l.value)),y=a?et(a):window,e){case"focusin":(In(y)||"true"===y.contentEditable)&&(la=y,ca=a,da=null);break;case"focusout":da=ca=la=null;break;case"mousedown":ua=!0;break;case"contextmenu":case"mouseup":case"dragend":ua=!1,ha(o,n,s);break;case"selectionchange":if(oa)break;case"keydown":case"keyup":ha(o,n,s)}var b;if(_n)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ln?Mn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(An&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==w?"onCompositionEnd"===w&&Ln&&(b=Qt()):(Kt="value"in(Gt=s)?Gt.value:Gt.textContent,Ln=!0)),0<(y=ru(a,w)).length&&(w=new pn(w,e,null,n,s),o.push({event:w,listeners:y}),b?w.data=b:null!==(b=Dn(n))&&(w.data=b))),(b=Pn?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(Tn=!0,Rn);case"textInput":return(e=t.data)===Rn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!_n&&Mn(e,t)?(e=Qt(),Wt=Kt=Gt=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=ru(a,"onBeforeInput")).length&&(y=new pn("onBeforeInput","beforeinput",null,n,s),o.push({event:y,listeners:w}),y.data=b)),function(e,t,n,a,s){if("submit"===t&&n&&n.stateNode===s){var r=Hd((s[qe]||null).action),i=a.submitter;i&&null!==(t=(t=i[qe]||null)?Hd(t.formAction):i.getAttribute("formAction"))&&(r=t,i=null);var o=new sn("action","action",null,a,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==Fd){var e=i?Gd(s,i):new FormData(s);no(n,{pending:!0,data:e,method:s.method,action:r},null,e)}}else"function"==typeof r&&(o.preventDefault(),e=i?Gd(s,i):new FormData(s),no(n,{pending:!0,data:e,method:s.method,action:r},r,e))},currentTarget:s}]})}}(o,e,a,n,s)}Xd(o,t)})}function su(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ru(e,t){for(var n=t+"Capture",a=[];null!==e;){var s=e,r=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===r||(null!=(s=Ut(e,n))&&a.unshift(su(e,s,r)),null!=(s=Ut(e,t))&&a.push(su(e,s,r))),3===e.tag)return a;e=e.return}return[]}function iu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ou(e,t,n,a,s){for(var r=t._reactName,i=[];null!==n&&n!==a;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===a)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ut(n,r))&&i.unshift(su(n,c,l)):s||null!=(c=Ut(n,r))&&i.push(su(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var lu=/\r\n?/g,cu=/\u0000|\uFFFD/g;function du(e){return("string"==typeof e?e:""+e).replace(lu,"\n").replace(cu,"")}function uu(e,t){return t=du(t),du(e)===t}function hu(e,t,n,s,r,i){switch(n){case"children":"string"==typeof s?"body"===t||"textarea"===t&&""===s||Nt(e,s):("number"==typeof s||"bigint"==typeof s)&&"body"!==t&&Nt(e,""+s);break;case"className":ut(e,"class",s);break;case"tabIndex":ut(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(e,n,s);break;case"style":Pt(e,s,i);break;case"data":if("object"!==t){ut(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==s||"function"==typeof s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=Mt(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if("function"==typeof s){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===n?("input"!==t&&hu(e,t,"name",r.name,r,null),hu(e,t,"formEncType",r.formEncType,r,null),hu(e,t,"formMethod",r.formMethod,r,null),hu(e,t,"formTarget",r.formTarget,r,null)):(hu(e,t,"encType",r.encType,r,null),hu(e,t,"method",r.method,r,null),hu(e,t,"target",r.target,r,null))),null==s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=Mt(""+s),e.setAttribute(n,s);break;case"onClick":null!=s&&(e.onclick=Dt);break;case"onScroll":null!=s&&Zd("scroll",e);break;case"onScrollEnd":null!=s&&Zd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(a(61));if(null!=(n=s.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"muted":e.muted=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"==typeof s||"boolean"==typeof s||"symbol"==typeof s){e.removeAttribute("xlink:href");break}n=Mt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===s?e.setAttribute(n,""):!1!==s&&null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":null==s||"function"==typeof s||"symbol"==typeof s||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Zd("beforetoggle",e),Zd("toggle",e),dt(e,"popover",s);break;case"xlinkActuate":ht(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ht(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ht(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ht(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ht(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ht(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ht(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ht(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ht(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":dt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&dt(e,n=Rt.get(n)||n,s)}}function mu(e,t,n,s,r,i){switch(n){case"style":Pt(e,s,i);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(a(61));if(null!=(n=s.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"==typeof s?Nt(e,s):("number"==typeof s||"bigint"==typeof s)&&Nt(e,""+s);break;case"onScroll":null!=s&&Zd("scroll",e);break;case"onScrollEnd":null!=s&&Zd("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:st.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"==typeof(i=null!=(i=e[qe]||null)?i[n]:null)&&e.removeEventListener(t,i,r),"function"!=typeof s)?n in e?e[n]=s:!0===s?e.setAttribute(n,""):dt(e,n,s):("function"!=typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r)))}}function pu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zd("error",e),Zd("load",e);var s,r=!1,i=!1;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(null!=o)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:hu(e,t,s,o,n,null)}}return i&&hu(e,t,"srcSet",n.srcSet,n,null),void(r&&hu(e,t,"src",n.src,n,null));case"input":Zd("invalid",e);var l=s=o=i=null,c=null,d=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(null!=u)switch(r){case"name":i=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":s=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(a(137,t));break;default:hu(e,t,r,u,n,null)}}return void wt(e,s,l,c,d,o,i,!1);case"select":for(i in Zd("invalid",e),r=o=s=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:hu(e,t,i,l,n,null)}return t=s,n=o,e.multiple=!!r,void(null!=t?jt(e,!!r,t,!1):null!=n&&jt(e,!!r,n,!0));case"textarea":for(o in Zd("invalid",e),s=i=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:hu(e,t,o,l,n,null)}return void kt(e,r,i,s);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!=typeof r&&"symbol"!=typeof r;else hu(e,t,c,r,n,null);return;case"dialog":Zd("beforetoggle",e),Zd("toggle",e),Zd("cancel",e),Zd("close",e);break;case"iframe":case"object":Zd("load",e);break;case"video":case"audio":for(r=0;r<Qd.length;r++)Zd(Qd[r],e);break;case"image":Zd("error",e),Zd("load",e);break;case"details":Zd("toggle",e);break;case"embed":case"source":case"link":Zd("error",e),Zd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(r=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:hu(e,t,d,r,n,null)}return;default:if(At(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(r=n[u])&&mu(e,t,u,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&hu(e,t,l,r,n,null))}function fu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gu=null,xu=null;function vu(e){return 9===e.nodeType?e:e.ownerDocument}function yu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wu(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Su=null;var ju="function"==typeof setTimeout?setTimeout:void 0,Cu="function"==typeof clearTimeout?clearTimeout:void 0,ku="function"==typeof Promise?Promise:void 0,Nu="function"==typeof queueMicrotask?queueMicrotask:void 0!==ku?function(e){return ku.resolve(null).then(e).catch(_u)}:ju;function _u(e){setTimeout(function(){throw e})}function Eu(e){return"head"===e}function Pu(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===a)return e.removeChild(s),void Gh(t);a--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)a++;else if("html"===n)Bu(e.ownerDocument.documentElement);else if("head"===n){Bu(n=e.ownerDocument.head);for(var r=n.firstChild;r;){var i=r.nextSibling,o=r.nodeName;r[Ye]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===r.rel.toLowerCase()||n.removeChild(r),r=i}}else"body"===n&&Bu(e.ownerDocument.body);n=s}while(n);Gh(t)}function Au(e,t){var n=e;e=0;do{var a=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=a}while(n)}function Ru(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ru(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Tu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}function Mu(e){return"$?"===e.data||"$~"===e.data}function Du(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Fu=null;function Iu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Lu(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ou(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function zu(e,t,n){switch(t=vu(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Bu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var $u=new Map,Uu=new Set;function Vu(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qu=I.d;I.d={f:function(){var e=qu.f(),t=td();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?so(t):qu.r(e)},D:function(e){qu.D(e),Gu("dns-prefetch",e,null)},C:function(e,t){qu.C(e,t),Gu("preconnect",e,t)},L:function(e,t,n){qu.L(e,t,n);var a=Hu;if(a&&e&&t){var s='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(s+='[imagesizes="'+yt(n.imageSizes)+'"]')):s+='[href="'+yt(e)+'"]';var r=s;switch(t){case"style":r=Wu(e);break;case"script":r=Xu(e)}$u.has(r)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),$u.set(r,e),null!==a.querySelector(s)||"style"===t&&a.querySelector(Qu(r))||"script"===t&&a.querySelector(Zu(r))||(pu(t=a.createElement("link"),"link",e),nt(t),a.head.appendChild(t)))}},m:function(e,t){qu.m(e,t);var n=Hu;if(n&&e){var a=t&&"string"==typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+yt(a)+'"][href="'+yt(e)+'"]',r=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Xu(e)}if(!$u.has(r)&&(e=d({rel:"modulepreload",href:e},t),$u.set(r,e),null===n.querySelector(s))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zu(r)))return}pu(a=n.createElement("link"),"link",e),nt(a),n.head.appendChild(a)}}},X:function(e,t){qu.X(e,t);var n=Hu;if(n&&e){var a=tt(n).hoistableScripts,s=Xu(e),r=a.get(s);r||((r=n.querySelector(Zu(s)))||(e=d({src:e,async:!0},t),(t=$u.get(s))&&nh(e,t),nt(r=n.createElement("script")),pu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}},S:function(e,t,n){qu.S(e,t,n);var a=Hu;if(a&&e){var s=tt(a).hoistableStyles,r=Wu(e);t=t||"default";var i=s.get(r);if(!i){var o={loading:0,preload:null};if(i=a.querySelector(Qu(r)))o.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=$u.get(r))&&th(e,n);var l=i=a.createElement("link");nt(l),pu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,eh(i,t,a)}i={type:"stylesheet",instance:i,count:1,state:o},s.set(r,i)}}},M:function(e,t){qu.M(e,t);var n=Hu;if(n&&e){var a=tt(n).hoistableScripts,s=Xu(e),r=a.get(s);r||((r=n.querySelector(Zu(s)))||(e=d({src:e,async:!0,type:"module"},t),(t=$u.get(s))&&nh(e,t),nt(r=n.createElement("script")),pu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}}};var Hu="undefined"==typeof document?null:document;function Gu(e,t,n){var a=Hu;if(a&&"string"==typeof t&&t){var s=yt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"==typeof n&&(s+='[crossorigin="'+n+'"]'),Uu.has(s)||(Uu.add(s),e={rel:e,crossOrigin:n,href:t},null===a.querySelector(s)&&(pu(t=a.createElement("link"),"link",e),nt(t),a.head.appendChild(t)))}}function Ku(e,t,n,s){var r,i,o,l,c=(c=W.current)?Vu(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Wu(n.href),(s=(n=tt(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Wu(n.href);var d=tt(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Qu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),$u.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$u.set(e,n),d||(r=c,i=e,o=n,l=u.state,r.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=r.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),pu(i,"link",o),nt(i),r.head.appendChild(i))))),t&&null===s)throw Error(a(528,""));return u}if(t&&null!==s)throw Error(a(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Xu(n),(s=(n=tt(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Wu(e){return'href="'+yt(e)+'"'}function Qu(e){return'link[rel="stylesheet"]['+e+"]"}function Yu(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Xu(e){return'[src="'+yt(e)+'"]'}function Zu(e){return"script[async]"+e}function Ju(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(s)return t.instance=s,nt(s),s;var r=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return nt(s=(e.ownerDocument||e).createElement("style")),pu(s,"style",r),eh(s,n.precedence,e),t.instance=s;case"stylesheet":r=Wu(n.href);var i=e.querySelector(Qu(r));if(i)return t.state.loading|=4,t.instance=i,nt(i),i;s=Yu(n),(r=$u.get(r))&&th(s,r),nt(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),pu(i,"link",s),t.state.loading|=4,eh(i,n.precedence,e),t.instance=i;case"script":return i=Xu(n.src),(r=e.querySelector(Zu(i)))?(t.instance=r,nt(r),r):(s=n,(r=$u.get(i))&&nh(s=d({},n),r),nt(r=(e=e.ownerDocument||e).createElement("script")),pu(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,eh(s,n.precedence,e));return t.instance}function eh(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,r=s,i=0;i<a.length;i++){var o=a[i];if(o.dataset.precedence===t)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function nh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ah=null;function sh(e,t,n){if(null===ah){var a=new Map,s=ah=new Map;s.set(n,a)}else(a=(s=ah).get(n))||(a=new Map,s.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[Ye]||r[Ve]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var i=r.getAttribute(t)||"";i=e+i;var o=a.get(i);o?o.push(r):a.set(i,[r])}}return a}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var oh=0;function lh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)dh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ch=null;function dh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ch=new Map,t.forEach(uh,e),ch=null,lh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=ch.get(e);if(n)var a=n.get(null);else{n=new Map,ch.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var i=s[r];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),a=i)}a&&n.set(null,a)}i=(s=t.instance).getAttribute("data-precedence"),(r=n.get(i)||a)===a&&n.set(null,s),n.set(i,s),this.count++,a=lh.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),r?r.parentNode.insertBefore(s,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var hh={$$typeof:y,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function mh(e,t,n,a,s,r,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function ph(e,t,n,a,s,r,i,o,l,c,d,u){return e=new mh(e,t,n,i,l,c,d,u,o),t=1,!0===r&&(t|=24),r=Ba(3,null,null,t),e.current=r,r.stateNode=e,(t=$s()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:t},vr(r),e}function fh(e){return e?e=Oa:Oa}function gh(e,t,n,a,s,r){s=fh(s),null===a.context?a.context=s:a.pendingContext=s,(a=br(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(a.callback=r),null!==(n=wr(e,a,t))&&(Yc(n,0,t),Sr(n,e,t))}function xh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function vh(e,t){xh(e,t),(e=e.alternate)&&xh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=La(e,67108864);null!==t&&Yc(t,0,67108864),vh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Wc(),n=La(e,t=Oe(t));null!==n&&Yc(n,0,t),vh(e,t)}}var wh=!0;function Sh(e,t,n,a){var s=F.T;F.T=null;var r=I.p;try{I.p=2,Ch(e,t,n,a)}finally{I.p=r,F.T=s}}function jh(e,t,n,a){var s=F.T;F.T=null;var r=I.p;try{I.p=8,Ch(e,t,n,a)}finally{I.p=r,F.T=s}}function Ch(e,t,n,a){if(wh){var s=kh(a);if(null===s)au(e,t,a,Nh,n),Ih(e,a);else if(function(e,t,n,a,s){switch(t){case"focusin":return Ah=Oh(Ah,e,t,n,a,s),!0;case"dragenter":return Rh=Oh(Rh,e,t,n,a,s),!0;case"mouseover":return Th=Oh(Th,e,t,n,a,s),!0;case"pointerover":var r=s.pointerId;return Mh.set(r,Oh(Mh.get(r)||null,e,t,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,Dh.set(r,Oh(Dh.get(r)||null,e,t,n,a,s)),!0}return!1}(s,e,t,n,a))a.stopPropagation();else if(Ih(e,a),4&t&&-1<Fh.indexOf(e)){for(;null!==s;){var r=Je(s);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var i=Ee(r.pendingLanes);if(0!==i){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-Se(i);o.entanglements[1]|=l,i&=~l}Id(r),!(6&fc)&&(Fc=de()+500,Od(0))}}break;case 31:case 13:null!==(o=La(r,2))&&Yc(o,0,2),td(),vh(r,2)}if(null===(r=kh(a))&&au(e,t,a,Nh,n),r===s)break;s=r}null!==s&&a.stopPropagation()}else au(e,t,a,null,n)}}function kh(e){return _h(e=Ft(e))}var Nh=null;function _h(e){if(Nh=null,null!==(e=Ze(e))){var t=r(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=i(t)))return e;e=null}else if(31===n){if(null!==(e=o(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nh=e,null}function Eh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case he:return 2;case me:return 8;case pe:case fe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Ph=!1,Ah=null,Rh=null,Th=null,Mh=new Map,Dh=new Map,Lh=[],Fh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ih(e,t){switch(e){case"focusin":case"focusout":Ah=null;break;case"dragenter":case"dragleave":Rh=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":Mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function Oh(e,t,n,a,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=Je(t))&&yh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function zh(e){var t=Ze(e.target);if(null!==t){var n=r(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=i(n)))return e.blockedOn=t,void $e(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=o(n)))return e.blockedOn=t,void $e(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=kh(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&yh(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);Lt=a,n.target.dispatchEvent(a),Lt=null,t.shift()}return!0}function $h(e,t,n){Bh(e)&&n.delete(t)}function Uh(){Ph=!1,null!==Ah&&Bh(Ah)&&(Ah=null),null!==Rh&&Bh(Rh)&&(Rh=null),null!==Th&&Bh(Th)&&(Th=null),Mh.forEach($h),Dh.forEach($h)}function Vh(t,n){t.blockedOn===n&&(t.blockedOn=null,Ph||(Ph=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Uh)))}var qh=null;function Hh(t){qh!==t&&(qh=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qh===t&&(qh=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],s=t[e+2];if("function"!=typeof a){if(null===_h(a||n))continue;break}var r=Je(n);null!==r&&(t.splice(e,3),e-=3,no(r,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function Gh(e){function t(t){return Vh(t,e)}null!==Ah&&Vh(Ah,e),null!==Rh&&Vh(Rh,e),null!==Th&&Vh(Th,e),Mh.forEach(t),Dh.forEach(t);for(var n=0;n<Lh.length;n++){var a=Lh[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Lh.length&&null===(n=Lh[0]).blockedOn;)zh(n),null===n.blockedOn&&Lh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<n.length;a+=3){var s=n[a],r=n[a+1],i=s[qe]||null;if("function"==typeof r)i||Hh(n);else if(i){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,i=r[qe]||null)o=i.formAction;else if(null!==_h(s))continue}else o=i.action;"function"==typeof o?n[a+1]=o:(n.splice(a,3),a-=3),Hh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var a=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Wh(e){this._internalRoot=e}function Qh(e){this._internalRoot=e}Qh.prototype.render=Wh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));gh(t.current,Wc(),e,t,null,null)},Qh.prototype.unmount=Wh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),td(),t[He]=null}},Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lh.length&&0!==t&&t<Lh[n].priority;n++);Lh.splice(n,0,e),0===n&&zh(e)}};var Yh=t.version;if("19.2.3"!==Yh)throw Error(a(527,Yh,"19.2.3"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=r(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(s=i.return)){n=s;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return l(i),e;if(o===s)return l(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==s.return)n=i,s=o;else{for(var c=!1,d=i.child;d;){if(d===n){c=!0,n=i,s=o;break}if(d===s){c=!0,s=i,n=o;break}d=d.sibling}if(!c){for(d=o.child;d;){if(d===n){c=!0,n=o,s=i;break}if(d===s){c=!0,s=o,n=i;break}d=d.sibling}if(!c)throw Error(a(189))}}if(n.alternate!==s)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?c(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{ye=Zh.inject(Xh),be=Zh}catch(em){}}return b.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",i=No,o=_o,l=Eo;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=ph(e,1,!1,null,0,n,r,null,i,o,l,Kh),e[He]=t.current,tu(e),new Wh(t)},b.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,i="",o=No,l=_o,c=Eo,d=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(d=n.formState)),(t=ph(e,1,!0,t,0,r,i,d,o,l,c,Kh)).context=fh(null),n=t.current,(i=br(r=Oe(r=Wc()))).callback=null,wr(n,i,r),n=r,t.current.lanes=n,De(t,n),Id(t),e[He]=t.current,tu(e),new Qh(t)},b.version="19.2.3",b}const M=n((_||(_=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),y.exports=T()),y.exports)),D=new WeakMap,L=new WeakMap,F={current:[]};let I=!1,O=0;const z=new Set,B=new Map;function $(e){for(const t of e){if(F.current.includes(t))continue;F.current.push(t),t.recompute();const e=L.get(t);if(e)for(const t of e){const e=D.get(t);(null==e?void 0:e.length)&&$(e)}}}function U(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function V(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function q(e){if(O>0&&!B.has(e)&&B.set(e,e.prevState),z.add(e),!(O>0||I))try{for(I=!0;z.size>0;){const e=Array.from(z);z.clear();for(const t of e){const e=B.get(t)??t.prevState;t.prevState=e,U(t)}for(const t of e){const e=D.get(t);e&&(F.current.push(t),$(e))}for(const t of e){const e=D.get(t);if(e)for(const t of e)V(t)}}}finally{I=!1,F.current=[],B.clear()}}function H(e){O++;try{e()}finally{if(O--,0===O){const e=z.values().next().value;e&&q(e)}}}let G=class{constructor(e,t){this.listeners=new Set,this.subscribe=e=>{var t,n;this.listeners.add(e);const a=null==(n=null==(t=this.options)?void 0:t.onSubscribe)?void 0:n.call(t,e,this);return()=>{this.listeners.delete(e),null==a||a()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,n,a;this.prevState=this.state,(null==(t=this.options)?void 0:t.updateFn)?this.state=this.options.updateFn(this.prevState)(e):!function(e){return"function"==typeof e}(e)?this.state=e:this.state=e(this.prevState),null==(a=null==(n=this.options)?void 0:n.onUpdate)||a.call(n),q(this)}};const K="__TSR_index",W="popstate",Q="beforeunload";function Y(e,t){t||(t={});const n=J();return{...t,key:n,__TSR_key:n,[K]:e}}function X(e){const t="undefined"!=typeof document?window:void 0,n=t.history.pushState,a=t.history.replaceState;let s=[];const r=()=>s,i=()=>Z(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);if(!t.history.state?.__TSR_key&&!t.history.state?.key){const e=J();t.history.replaceState({[K]:0,key:e,__TSR_key:e},"")}let o,l=i(),c=!1,d=!1,u=!1,h=!1;let m,p;const f=()=>{m&&(b._ignoreSubscribers=!0,(m.isPush?t.history.pushState:t.history.replaceState)(m.state,"",m.href),b._ignoreSubscribers=!1,m=void 0,p=void 0,o=void 0)},g=(e,t,n)=>{const a=t;p||(o=l),l=Z(t,n),m={href:a,state:n,isPush:m?.isPush||"push"===e},p||(p=Promise.resolve().then(()=>f()))},x=e=>{l=i(),b.notify({type:e})},v=async()=>{if(d)return void(d=!1);const e=i(),n=e.state[K]-l.state[K],a=-1===n,s=!(1===n)&&!a||c;c=!1;const o=s?"GO":a?"BACK":"FORWARD",h=s?{type:"GO",index:n}:{type:a?"BACK":"FORWARD"};if(u)u=!1;else{const n=r();if("undefined"!=typeof document&&n.length)for(const a of n){if(await a.blockerFn({currentLocation:l,nextLocation:e,action:o}))return d=!0,t.history.go(1),void b.notify(h)}}l=i(),b.notify(h)},y=e=>{if(h)return void(h=!1);let t=!1;const n=r();if("undefined"!=typeof document&&n.length)for(const a of n){const e=a.enableBeforeUnload??!0;if(!0===e){t=!0;break}if("function"==typeof e&&!0===e()){t=!0;break}}return t?(e.preventDefault(),e.returnValue=""):void 0},b=function(e){let t=e.getLocation();const n=new Set,a=a=>{t=e.getLocation(),n.forEach(e=>e({location:t,action:a}))},s=n=>{e.notifyOnIndexChange??1?a(n):t=e.getLocation()},r=async({task:n,navigateOpts:a,...s})=>{if(a?.ignoreBlocker)return void n();const r=e.getBlockers?.()??[],i="PUSH"===s.type||"REPLACE"===s.type;if("undefined"!=typeof document&&r.length&&i)for(const o of r){const n=Z(s.path,s.state);if(await o.blockerFn({currentLocation:t,nextLocation:n,action:s.type}))return void e.onBlocked?.()}n()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:e=>(n.add(e),()=>{n.delete(e)}),push:(n,s,i)=>{const o=t.state[K];s=Y(o+1,s),r({task:()=>{e.pushState(n,s),a({type:"PUSH"})},navigateOpts:i,type:"PUSH",path:n,state:s})},replace:(n,s,i)=>{const o=t.state[K];s=Y(o,s),r({task:()=>{e.replaceState(n,s),a({type:"REPLACE"})},navigateOpts:i,type:"REPLACE",path:n,state:s})},go:(t,n)=>{r({task:()=>{e.go(t),s({type:"GO",index:t})},navigateOpts:n,type:"GO"})},back:t=>{r({task:()=>{e.back(t?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:t,type:"BACK"})},forward:t=>{r({task:()=>{e.forward(t?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:t,type:"FORWARD"})},canGoBack:()=>0!==t.state[K],createHref:t=>e.createHref(t),block:t=>{if(!e.setBlockers)return()=>{};const n=e.getBlockers?.()??[];return e.setBlockers([...n,t]),()=>{const n=e.getBlockers?.()??[];e.setBlockers?.(n.filter(e=>e!==t))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:a}}({getLocation:()=>l,getLength:()=>t.history.length,pushState:(e,t)=>g("push",e,t),replaceState:(e,t)=>g("replace",e,t),back:e=>(e&&(u=!0),h=!0,t.history.back()),forward:e=>{e&&(u=!0),h=!0,t.history.forward()},go:e=>{c=!0,t.history.go(e)},createHref:e=>e,flush:f,destroy:()=>{t.history.pushState=n,t.history.replaceState=a,t.removeEventListener(Q,y,{capture:!0}),t.removeEventListener(W,v)},onBlocked:()=>{o&&l!==o&&(l=o)},getBlockers:r,setBlockers:e=>s=e,notifyOnIndexChange:!1});return t.addEventListener(Q,y,{capture:!0}),t.addEventListener(W,v),t.history.pushState=function(...e){const a=n.apply(t.history,e);return b._ignoreSubscribers||x("PUSH"),a},t.history.replaceState=function(...e){const n=a.apply(t.history,e);return b._ignoreSubscribers||x("REPLACE"),n},b}function Z(e,t){const n=function(e){let t=e.replace(/[\x00-\x1f\x7f]/g,"");return t.startsWith("//")&&(t="/"+t.replace(/^\/+/,"")),t}(e),a=n.indexOf("#"),s=n.indexOf("?"),r=J();return{href:n,pathname:n.substring(0,a>0?s>0?Math.min(a,s):a:s>0?s:n.length),hash:a>-1?n.substring(a):"",search:s>-1?n.slice(s,-1===a?void 0:a):"",state:t||{[K]:0,key:r,__TSR_key:r}}}function J(){return(Math.random()+1).toString(36).substring(7)}function ee(e){return e[e.length-1]}function te(e,t){return"function"==typeof e?e(t):e}const ne=Object.prototype.hasOwnProperty;function ae(e,t){if(e===t)return e;const n=t,a=oe(e)&&oe(n);if(!(a||re(e)&&re(n)))return n;const s=a?e:se(e);if(!s)return n;const r=a?n:se(n);if(!r)return n;const i=s.length,o=r.length,l=a?new Array(o):{};let c=0;for(let d=0;d<o;d++){const t=a?d:r[d],s=e[t],o=n[t];if(s===o){l[t]=s,(a?d<i:ne.call(e,t))&&c++;continue}if(null===s||null===o||"object"!=typeof s||"object"!=typeof o){l[t]=o;continue}const u=ae(s,o);l[t]=u,u===s&&c++}return i===o&&c===i?e:l}function se(e){const t=[],n=Object.getOwnPropertyNames(e);for(const s of n){if(!Object.prototype.propertyIsEnumerable.call(e,s))return!1;t.push(s)}const a=Object.getOwnPropertySymbols(e);for(const s of a){if(!Object.prototype.propertyIsEnumerable.call(e,s))return!1;t.push(s)}return t}function re(e){if(!ie(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!ie(n)&&!!n.hasOwnProperty("isPrototypeOf")}function ie(e){return"[object Object]"===Object.prototype.toString.call(e)}function oe(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function le(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let a=0,s=e.length;a<s;a++)if(!le(e[a],t[a],n))return!1;return!0}if(re(e)&&re(t)){const a=n?.ignoreUndefined??!0;if(n?.partial){for(const s in t)if(!(a&&void 0===t[s]||le(e[s],t[s],n)))return!1;return!0}let s=0;if(a)for(const t in e)void 0!==e[t]&&s++;else s=Object.keys(e).length;let r=0;for(const i in t)if((!a||void 0!==t[i])&&(r++,r>s||!le(e[i],t[i],n)))return!1;return s===r}return!1}function ce(e){let t,n;const a=new Promise((e,a)=>{t=e,n=a});return a.status="pending",a.resolve=n=>{a.status="resolved",a.value=n,t(n),e?.(n)},a.reject=e=>{a.status="rejected",n(e)},a}function de(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)}function ue(e){let t;try{t=decodeURI(e)}catch{t=e.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}return function(e){return e.replace(/[\x00-\x1f\x7f]/g,"")}(t)}function he(e,t){if(!e)return e;const n=/%25|%5C/gi;let a,s=0,r="";for(;null!==(a=n.exec(e));)r+=ue(e.slice(s,a.index))+a[0],s=n.lastIndex;return r+=ue(s?e.slice(s):e),r.startsWith("//")&&(r="/"+r.replace(/^\/+/,"")),r}function me(e,t){if(!e)throw new Error("Invariant failed")}function pe(e){const t=new Map;let n,a;const s=e=>{e.next&&(e.prev?(e.prev.next=e.next,e.next.prev=e.prev,e.next=void 0,a&&(a.next=e,e.prev=a)):(e.next.prev=void 0,n=e.next,e.next=void 0,a&&(e.prev=a,a.next=e)),a=e)};return{get(e){const n=t.get(e);if(n)return s(n),n.value},set(r,i){if(t.size>=e&&n){const e=n;t.delete(e.key),e.next&&(n=e.next,e.next.prev=void 0),e===a&&(a=void 0)}const o=t.get(r);if(o)o.value=i,s(o);else{const e={key:r,value:i,prev:a};a&&(a.next=e),a=e,n||(n=e),t.set(r,e)}},clear(){t.clear(),n=void 0,a=void 0}}}const fe=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,ge=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,xe=/^([^{]*)\{\$\}([^}]*)$/;function ve(e,t,n=new Uint16Array(6)){const a=e.indexOf("/",t),s=-1===a?e.length:a,r=e.substring(t,s);if(!r||!r.includes("$"))return n[0]=0,n[1]=t,n[2]=t,n[3]=s,n[4]=s,n[5]=s,n;if("$"===r){const a=e.length;return n[0]=2,n[1]=t,n[2]=t,n[3]=a,n[4]=a,n[5]=a,n}if(36===r.charCodeAt(0))return n[0]=1,n[1]=t,n[2]=t+1,n[3]=s,n[4]=s,n[5]=s,n;const i=r.match(xe);if(i){const a=i[1].length;return n[0]=2,n[1]=t+a,n[2]=t+a+1,n[3]=t+a+2,n[4]=t+a+3,n[5]=e.length,n}const o=r.match(ge);if(o){const e=o[1],a=o[2],r=o[3],i=e.length;return n[0]=3,n[1]=t+i,n[2]=t+i+3,n[3]=t+i+3+a.length,n[4]=s-r.length,n[5]=s,n}const l=r.match(fe);if(l){const e=l[1],a=l[2],r=l[3],i=e.length;return n[0]=1,n[1]=t+i,n[2]=t+i+2,n[3]=t+i+2+a.length,n[4]=s-r.length,n[5]=s,n}return n[0]=0,n[1]=t,n[2]=t,n[3]=s,n[4]=s,n[5]=s,n}function ye(e,t,n,a,s,r,i){i?.(n);let o=a;{const a=n.fullPath??n.from,i=a.length,l=n.options?.caseSensitive??e;for(;o<i;){const e=ve(a,o,t);let i;const c=o,d=e[5];o=d+1,r++;switch(e[0]){case 0:{const t=a.substring(e[2],e[3]);if(l){const e=s.static?.get(t);if(e)i=e;else{s.static??=new Map;const e=Se(n.fullPath??n.from);e.parent=s,e.depth=r,i=e,s.static.set(t,e)}}else{const e=t.toLowerCase(),a=s.staticInsensitive?.get(e);if(a)i=a;else{s.staticInsensitive??=new Map;const t=Se(n.fullPath??n.from);t.parent=s,t.depth=r,i=t,s.staticInsensitive.set(e,t)}}break}case 1:{const t=a.substring(c,e[1]),o=a.substring(e[4],d),u=l&&!(!t&&!o),h=t?u?t:t.toLowerCase():void 0,m=o?u?o:o.toLowerCase():void 0,p=s.dynamic?.find(e=>e.caseSensitive===u&&e.prefix===h&&e.suffix===m);if(p)i=p;else{const e=je(1,n.fullPath??n.from,u,h,m);i=e,e.depth=r,e.parent=s,s.dynamic??=[],s.dynamic.push(e)}break}case 3:{const t=a.substring(c,e[1]),o=a.substring(e[4],d),u=l&&!(!t&&!o),h=t?u?t:t.toLowerCase():void 0,m=o?u?o:o.toLowerCase():void 0,p=s.optional?.find(e=>e.caseSensitive===u&&e.prefix===h&&e.suffix===m);if(p)i=p;else{const e=je(3,n.fullPath??n.from,u,h,m);i=e,e.parent=s,e.depth=r,s.optional??=[],s.optional.push(e)}break}case 2:{const t=a.substring(c,e[1]),o=a.substring(e[4],d),u=l&&!(!t&&!o),h=t?u?t:t.toLowerCase():void 0,m=o?u?o:o.toLowerCase():void 0,p=je(2,n.fullPath??n.from,u,h,m);i=p,p.parent=s,p.depth=r,s.wildcard??=[],s.wildcard.push(p)}}s=i}const c=(n.path||!n.children)&&!n.isRoot;if(c&&a.endsWith("/")){const e=Se(n.fullPath??n.from);e.kind=4,e.parent=s,r++,e.depth=r,s.index=e,s=e}c&&!s.route&&(s.route=n,s.fullPath=n.fullPath??n.from)}if(n.children)for(const l of n.children)ye(e,t,l,o,s,r,i)}function be(e,t){if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function we(e){if(e.static)for(const t of e.static.values())we(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())we(t);if(e.dynamic?.length){e.dynamic.sort(be);for(const t of e.dynamic)we(t)}if(e.optional?.length){e.optional.sort(be);for(const t of e.optional)we(t)}if(e.wildcard?.length){e.wildcard.sort(be);for(const t of e.wildcard)we(t)}}function Se(e){return{kind:0,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null}}function je(e,t,n,a,s){return{kind:e,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,caseSensitive:n,prefix:a,suffix:s}}function Ce(e,t,n=!1){const a=e.split("/"),s=function(e,t,n,a){if("/"===e&&n.index)return{node:n.index,skipped:0};const s=!ee(t),r=s&&"/"!==e,i=t.length-(s?1:0),o=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let l=null,c=null,d=null;for(;o.length;){const e=o.pop();let{node:n,index:s,skipped:u,depth:h,statics:m,dynamics:p,optionals:f}=e;a&&n.route&&4!==n.kind&&ke(c,e)&&(c=e);const g=s===i;if(g&&(n.route&&!r&&ke(d,e)&&(d=e),!n.optional&&!n.wildcard&&!n.index))continue;const x=g?void 0:t[s];let v;if(g&&n.index){const e={node:n.index,index:s,skipped:u,depth:h+1,statics:m,dynamics:p,optionals:f};if(m===i&&!p&&!f&&!u)return e;ke(d,e)&&(d=e)}if(n.wildcard&&ke(l,e))for(const a of n.wildcard){const{prefix:e,suffix:n}=a;if(e){if(g)continue;if(!(a.caseSensitive?x:v??=x.toLowerCase()).startsWith(e))continue}if(n){if(g)continue;const e=t.slice(s).join("/").slice(-n.length);if((a.caseSensitive?e:e.toLowerCase())!==n)continue}l={node:a,index:i,skipped:u,depth:h,statics:m,dynamics:p,optionals:f};break}if(n.optional){const e=u|1<<h,t=h+1;for(let a=n.optional.length-1;a>=0;a--){const r=n.optional[a];o.push({node:r,index:s,skipped:e,depth:t,statics:m,dynamics:p,optionals:f})}if(!g)for(let a=n.optional.length-1;a>=0;a--){const e=n.optional[a],{prefix:r,suffix:i}=e;if(r||i){const t=e.caseSensitive?x:v??=x.toLowerCase();if(r&&!t.startsWith(r))continue;if(i&&!t.endsWith(i))continue}o.push({node:e,index:s+1,skipped:u,depth:t,statics:m,dynamics:p,optionals:f+1})}}if(!g&&n.dynamic&&x)for(let t=n.dynamic.length-1;t>=0;t--){const e=n.dynamic[t],{prefix:a,suffix:r}=e;if(a||r){const t=e.caseSensitive?x:v??=x.toLowerCase();if(a&&!t.startsWith(a))continue;if(r&&!t.endsWith(r))continue}o.push({node:e,index:s+1,skipped:u,depth:h+1,statics:m,dynamics:p+1,optionals:f})}if(!g&&n.staticInsensitive){const e=n.staticInsensitive.get(v??=x.toLowerCase());e&&o.push({node:e,index:s+1,skipped:u,depth:h+1,statics:m+1,dynamics:p,optionals:f})}if(!g&&n.static){const e=n.static.get(x);e&&o.push({node:e,index:s+1,skipped:u,depth:h+1,statics:m+1,dynamics:p,optionals:f})}}if(d&&l)return ke(l,d)?d:l;if(d)return d;if(l)return l;if(a&&c){let n=c.index;for(let e=0;e<c.index;e++)n+=t[e].length;const a=n===e.length?"/":e.slice(n);return{node:c.node,skipped:c.skipped,"**":decodeURIComponent(a)}}return null}(e,a,t,n);if(!s)return null;const r=function(e,t,n){const a=function(e){const t=Array(e.depth+1);do{t[e.depth]=e,e=e.parent}while(e);return t}(n.node);let s=null;const r={};for(let i=0,o=0,l=0;o<a.length;i++,o++,l++){const c=a[o],d=t[i],u=l;if(d&&(l+=d.length),1===c.kind){s??=n.node.fullPath.split("/");const e=s[o],t=c.prefix?.length??0;if(123===e.charCodeAt(t)){const n=c.suffix?.length??0,a=e.substring(t+2,e.length-n-1),s=d.substring(t,d.length-n);r[a]=decodeURIComponent(s)}else{r[e.substring(1)]=decodeURIComponent(d)}}else if(3===c.kind){if(n.skipped&1<<o){i--;continue}s??=n.node.fullPath.split("/");const e=s[o],t=c.prefix?.length??0,a=c.suffix?.length??0,l=e.substring(t+3,e.length-a-1),u=c.suffix||c.prefix?d.substring(t,d.length-a):d;u&&(r[l]=decodeURIComponent(u))}else if(2===c.kind){const t=c,n=e.substring(u+(t.prefix?.length??0),e.length-(t.suffix?.length??0)),a=decodeURIComponent(n);r["*"]=a,r._splat=a;break}}return r}(e,a,s);"**"in s&&(r["**"]=s["**"]);return{route:s.node.route,params:r}}function ke(e,t){return!e||(t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((4===t.node.kind)>(4===e.node.kind)||4===t.node.kind==(4===e.node.kind)&&t.depth>e.depth))))}function Ne(e){return _e(e.filter(e=>void 0!==e).join("/"))}function _e(e){return e.replace(/\/{2,}/g,"/")}function Ee(e){return"/"===e?e:e.replace(/^\/{1,}/,"")}function Pe(e){const t=e.length;return t>1&&"/"===e[t-1]?e.replace(/\/{1,}$/,""):e}function Ae(e){return Pe(Ee(e))}function Re(e,t){return e?.endsWith("/")&&"/"!==e&&e!==`${t}/`?e.slice(0,-1):e}function Te(e,t,n){const a=t[e];return"string"!=typeof a?a:"_splat"===e?encodeURI(a):function(e,t){let n=encodeURIComponent(e);if(t)for(const[a,s]of t)n=n.replaceAll(a,s);return n}(a,n)}function Me({path:e,params:t,decodeCharMap:n}){let a=!1;const s={};if(!e||"/"===e)return{interpolatedPath:"/",usedParams:s,isMissingParams:a};if(!e.includes("$"))return{interpolatedPath:e,usedParams:s,isMissingParams:a};const r=e.length;let i,o=0,l="";for(;o<r;){const r=o;i=ve(e,r,i);const c=i[5];if(o=c+1,r===c)continue;const d=i[0];if(0!==d){if(2===d){const o=t._splat;s._splat=o,s["*"]=o;const d=e.substring(r,i[1]),u=e.substring(i[4],c);if(!o){a=!0,(d||u)&&(l+="/"+d+u);continue}l+="/"+d+Te("_splat",t,n)+u;continue}if(1===d){const o=e.substring(i[2],i[3]);a||o in t||(a=!0),s[o]=t[o];const d=e.substring(r,i[1]),u=e.substring(i[4],c);l+="/"+d+(Te(o,t,n)??"undefined")+u;continue}if(3===d){const a=e.substring(i[2],i[3]),o=t[a];if(null==o)continue;s[a]=o;const d=e.substring(r,i[1]),u=e.substring(i[4],c);l+="/"+d+(Te(a,t,n)??"")+u;continue}}else l+="/"+e.substring(r,c)}e.endsWith("/")&&(l+="/");return{usedParams:s,interpolatedPath:l||"/",isMissingParams:a}}function De(e){return!!e?.isNotFound}const Le="tsr-scroll-restoration-v1_3";const Fe=function(){const e=function(){try{if("undefined"!=typeof window&&"object"==typeof window.sessionStorage)return window.sessionStorage}catch{}}();if(!e)return null;const t=e.getItem(Le);let n=t?JSON.parse(t):{};return{state:n,set:t=>{n=te(t,n)||n;try{e.setItem(Le,JSON.stringify(n))}catch{}}}}(),Ie=e=>e.state.__TSR_key||e.href;let Oe=!1;function ze({storageKey:e,key:t,behavior:n,shouldScrollRestoration:a,scrollToTopSelectors:s,location:r}){let i;try{i=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(l){return}const o=i[t||window.history.state?.__TSR_key];Oe=!0;e:{if(a&&o&&Object.keys(o).length>0){for(const e in o){const t=o[e];if("window"===e)window.scrollTo({top:t.scrollY,left:t.scrollX,behavior:n});else if(e){const n=document.querySelector(e);n&&(n.scrollLeft=t.scrollX,n.scrollTop=t.scrollY)}}break e}const e=(r??window.location).hash.split("#",2)[1];if(e){const t=window.history.state?.__hashScrollIntoViewOptions??!0;if(t){const n=document.getElementById(e);n&&n.scrollIntoView(t)}break e}const t={top:0,left:0,behavior:n};if(window.scrollTo(t),s)for(const n of s){if("window"===n)continue;const e="function"==typeof n?n():document.querySelector(n);e&&e.scrollTo(t)}}Oe=!1}function Be(e,t){if(!Fe&&!e.isServer)return;if((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!Fe)return;e.isScrollRestorationSetup=!0,Oe=!1;const n=e.options.getScrollRestorationKey||Ie;window.history.scrollRestoration="manual";const a=t=>{if(Oe||!e.isScrollRestoring)return;let a="";if(t.target===document||t.target===window)a="window";else{const e=t.target.getAttribute("data-scroll-restoration-id");a=e?`[data-scroll-restoration-id="${e}"]`:function(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}(t.target)}const s=n(e.state.location);Fe.set(e=>{const t=e[s]||={},n=t[a]||={};if("window"===a)n.scrollX=window.scrollX||0,n.scrollY=window.scrollY||0;else if(a){const e=document.querySelector(a);e&&(n.scrollX=e.scrollLeft||0,n.scrollY=e.scrollTop||0)}return e})};"undefined"!=typeof document&&document.addEventListener("scroll",((e,t)=>{let n;return(...a)=>{n||(n=setTimeout(()=>{e(...a),n=null},t))}})(a,100),!0),e.subscribe("onRendered",t=>{const a=n(t.toLocation);if(e.resetNextScroll){if("function"==typeof e.options.scrollRestoration){if(!e.options.scrollRestoration({location:e.latestLocation}))return}ze({storageKey:Le,key:a,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&Fe.set(e=>(e[a]||={},e))}else e.resetNextScroll=!0})}function $e(e){return e?"false"!==e&&("true"===e||(0*+e==0&&+e+""===e?+e:e)):""}const Ue=(Ve=JSON.parse,e=>{"?"===e[0]&&(e=e.substring(1));const t=function(e){const t=new URLSearchParams(e),n={};for(const[a,s]of t.entries()){const e=n[a];null==e?n[a]=$e(s):Array.isArray(e)?e.push($e(s)):n[a]=[e,$e(s)]}return n}(e);for(const a in t){const e=t[a];if("string"==typeof e)try{t[a]=Ve(e)}catch(n){}}return t});var Ve;const qe=function(e,t){const n="function"==typeof t;function a(a){if("object"==typeof a&&null!==a)try{return e(a)}catch(s){}else if(n&&"string"==typeof a)try{return t(a),e(a)}catch(s){}return a}return e=>{const t=function(e,t=String){const n=new URLSearchParams;for(const a in e){const s=e[a];void 0!==s&&n.set(a,t(s))}return n.toString()}(e,a);return t?`?${t}`:""}}(JSON.stringify,JSON.parse);const He="__root__";function Ge(e){return e instanceof Response&&!!e.options}const Ke=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},We=(e,t)=>!(!e.preload||e.router.state.matches.some(e=>e.id===t)),Qe=(e,t,n=!0)=>{const a={...e.router.options.context??{}},s=n?t:t-1;for(let r=0;r<=s;r++){const t=e.matches[r];if(!t)continue;const n=e.router.getMatch(t.id);n&&Object.assign(a,n.__routeContext,n.__beforeLoadContext)}return a},Ye=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),me(n.options.notFoundComponent);const a=e.matches.find(e=>e.routeId===n.id);me(a,n.id),e.updateMatch(a.id,e=>({...e,status:"notFound",error:t,isFetching:!1})),"BEFORE_LOAD"===t.routerCode&&n.parentRoute&&(t.routeId=n.parentRoute.id,Ye(e,t))},Xe=(e,t,n)=>{if(Ge(n)||De(n)){if(Ge(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const a=Ge(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,e=>({...e,status:a,isFetching:!1,error:n})),De(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw Ge(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n)):(Ye(e,n),n)}},Ze=(e,t)=>{const n=e.router.getMatch(t);return!(e.router.isServer||!n._nonReactive.dehydrated)||!(!e.router.isServer||!1!==n.ssr)},Je=(e,t,n,a)=>{const{id:s,routeId:r}=e.matches[t],i=e.router.looseRoutesById[r];if(n instanceof Promise)throw n;n.routerCode=a,e.firstBadMatchIndex??=t,Xe(e,e.router.getMatch(s),n);try{i.options.onError?.(n)}catch(o){n=o,Xe(e,e.router.getMatch(s),n)}e.updateMatch(s,e=>(e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loadPromise?.resolve(),{...e,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},et=(e,t,n,a)=>{if(void 0!==a._nonReactive.pendingTimeout)return;const s=n.options.pendingMs??e.router.options.defaultPendingMs;if(!(!e.onReady||e.router.isServer||We(e,t)||!(n.options.loader||n.options.beforeLoad||ct(n))||"number"!=typeof s||s===1/0||!(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const t=setTimeout(()=>{Ke(e)},s);a._nonReactive.pendingTimeout=t}},tt=(e,t)=>{const{id:n,routeId:a}=e.matches[t],s=e.router.looseRoutesById[a],r=()=>((e,t,n,a)=>{const s=e.router.getMatch(t),r=s._nonReactive.loadPromise;s._nonReactive.loadPromise=ce(()=>{r?.resolve()});const{paramsError:i,searchError:o}=s;i&&Je(e,n,i,"PARSE_PARAMS"),o&&Je(e,n,o,"VALIDATE_SEARCH"),et(e,t,a,s);const l=new AbortController,c=e.matches[n-1]?.id,d=c?e.router.getMatch(c):void 0;d?.context??e.router.options.context;let u=!1;const h=()=>{u||(u=!0,e.updateMatch(t,e=>({...e,isFetching:"beforeLoad",fetchCount:e.fetchCount+1,abortController:l})))},m=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,e=>({...e,isFetching:!1}))};if(!a.options.beforeLoad)return void H(()=>{h(),m()});s._nonReactive.beforeLoadPromise=ce();const p={...Qe(e,n,!1),...s.__routeContext},{search:f,params:g,cause:x}=s,v=We(e,t),y={search:f,abortController:l,params:g,preload:v,context:p,location:e.location,navigate:t=>e.router.navigate({...t,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:v?"preload":x,matches:e.matches,...e.router.options.additionalContext},b=a=>{void 0!==a?((Ge(a)||De(a))&&(h(),Je(e,n,a,"BEFORE_LOAD")),H(()=>{h(),e.updateMatch(t,e=>({...e,__beforeLoadContext:a})),m()})):H(()=>{h(),m()})};let w;try{if(w=a.options.beforeLoad(y),de(w))return h(),w.catch(t=>{Je(e,n,t,"BEFORE_LOAD")}).then(b)}catch(S){h(),Je(e,n,S,"BEFORE_LOAD")}b(w)})(e,n,t,s),i=()=>{if(Ze(e,n))return;const t=((e,t,n)=>{const a=e.router.getMatch(t);if(!a._nonReactive.beforeLoadPromise&&!a._nonReactive.loaderPromise)return;et(e,t,n,a);const s=()=>{const n=e.router.getMatch(t);!n.preload||"redirected"!==n.status&&"notFound"!==n.status||Xe(e,n,n.error)};return a._nonReactive.beforeLoadPromise?a._nonReactive.beforeLoadPromise.then(s):s()})(e,n,s);return de(t)?t.then(r):r()};return(()=>{if(e.router.isServer){const a=((e,t,n,a)=>{const s=e.router.getMatch(t),r=e.matches[n-1]?.id,i=r?e.router.getMatch(r):void 0;if(e.router.isShell())return void(s.ssr=a.id===He);if(!1===i?.ssr)return void(s.ssr=!1);const o=e=>!0===e&&"data-only"===i?.ssr?"data-only":e,l=e.router.options.defaultSsr??!0;if(void 0===a.options.ssr)return void(s.ssr=o(l));if("function"!=typeof a.options.ssr)return void(s.ssr=o(a.options.ssr));const{search:c,params:d}=s,u={search:lt(c,s.searchError),params:lt(d,s.paramsError),location:e.location,matches:e.matches.map(e=>({index:e.index,pathname:e.pathname,fullPath:e.fullPath,staticData:e.staticData,id:e.id,routeId:e.routeId,search:lt(e.search,e.searchError),params:lt(e.params,e.paramsError),ssr:e.ssr}))},h=a.options.ssr(u);if(de(h))return h.then(e=>{s.ssr=o(e??l)});s.ssr=o(h??l)})(e,n,t,s);if(de(a))return a.then(i)}return i()})()},nt=(e,t,n)=>{const a=e.router.getMatch(t);if(!a)return;if(!n.options.head&&!n.options.scripts&&!n.options.headers)return;const s={matches:e.matches,match:a,params:a.params,loaderData:a.loaderData};return Promise.all([n.options.head?.(s),n.options.scripts?.(s),n.options.headers?.(s)]).then(([e,t,n])=>{const a=e?.meta,s=e?.links,r=e?.scripts,i=e?.styles;return{meta:a,links:s,headScripts:r,headers:n,scripts:t,styles:i}})},at=(e,t,n,a)=>{const s=e.matchPromises[n-1],{params:r,loaderDeps:i,abortController:o,cause:l}=e.router.getMatch(t),c=Qe(e,n),d=We(e,t);return{params:r,deps:i,preload:!!d,parentMatchPromise:s,abortController:o,context:c,location:e.location,navigate:t=>e.router.navigate({...t,_fromLocation:e.location}),cause:d?"preload":l,route:a,...e.router.options.additionalContext}},st=async(e,t,n,a)=>{try{const i=e.router.getMatch(t);try{e.router.isServer&&!0!==i.ssr||ot(a);const s=a.options.loader?.(at(e,t,n,a)),r=a.options.loader&&de(s);if(!!(r||a._lazyPromise||a._componentsPromise||a.options.head||a.options.scripts||a.options.headers||i._nonReactive.minPendingPromise)&&e.updateMatch(t,e=>({...e,isFetching:"loader"})),a.options.loader){const n=r?await s:s;Xe(e,e.router.getMatch(t),n),void 0!==n&&e.updateMatch(t,e=>({...e,loaderData:n}))}a._lazyPromise&&await a._lazyPromise;const o=i._nonReactive.minPendingPromise;o&&await o,a._componentsPromise&&await a._componentsPromise,e.updateMatch(t,e=>({...e,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(s){let n=s;const o=i._nonReactive.minPendingPromise;o&&await o,De(s)&&await(a.options.notFoundComponent?.preload?.()),Xe(e,e.router.getMatch(t),s);try{a.options.onError?.(s)}catch(r){n=r,Xe(e,e.router.getMatch(t),r)}e.updateMatch(t,e=>({...e,error:n,status:"error",isFetching:!1}))}}catch(i){const n=e.router.getMatch(t);n&&(n._nonReactive.loaderPromise=void 0),Xe(e,n,i)}},rt=async(e,t)=>{const{id:n,routeId:a}=e.matches[t];let s=!1,r=!1;const i=e.router.looseRoutesById[a],o=()=>{e.updateMatch(n,n=>({...n,context:Qe(e,t)}))};if(Ze(e,n)){if(e.router.isServer)return e.router.getMatch(n)}else{const a=e.router.getMatch(n);if(a._nonReactive.loaderPromise){if("success"===a.status&&!e.sync&&!a.preload)return a;await a._nonReactive.loaderPromise;const t=e.router.getMatch(n),s=t._nonReactive.error||t.error;s&&Xe(e,t,s)}else{const l=Date.now()-a.updatedAt,c=We(e,n),d=c?i.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:i.options.staleTime??e.router.options.defaultStaleTime??0,u=i.options.shouldReload,h="function"==typeof u?u(at(e,n,t,i)):u,m=!!c&&!e.router.state.matches.some(e=>e.id===n),p=e.router.getMatch(n);p._nonReactive.loaderPromise=ce(),m!==p.preload&&e.updateMatch(n,e=>({...e,preload:m}));const{status:f,invalid:g}=p;s="success"===f&&(g||(h??l>d)),c&&!1===i.options.preload||(s&&!e.sync?(r=!0,(async()=>{try{await st(e,n,t,i),o();const a=e.router.getMatch(n);a._nonReactive.loaderPromise?.resolve(),a._nonReactive.loadPromise?.resolve(),a._nonReactive.loaderPromise=void 0}catch(a){Ge(a)&&await e.router.navigate(a.options)}})()):("success"!==f||s&&e.sync)&&await st(e,n,t,i))}}const l=e.router.getMatch(n);r||(l._nonReactive.loaderPromise?.resolve(),l._nonReactive.loadPromise?.resolve()),clearTimeout(l._nonReactive.pendingTimeout),l._nonReactive.pendingTimeout=void 0,r||(l._nonReactive.loaderPromise=void 0),l._nonReactive.dehydrated=void 0,r||o();const c=!!r&&l.isFetching;return c!==l.isFetching||!1!==l.invalid?(e.updateMatch(n,e=>({...e,isFetching:c,invalid:!1})),e.router.getMatch(n)):l};async function it(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(e=>e._forcePending)&&Ke(t);try{for(let n=0;n<t.matches.length;n++){const e=tt(t,n);de(e)&&await e}const e=t.firstBadMatchIndex??t.matches.length;for(let n=0;n<e;n++)t.matchPromises.push(rt(t,n));const a=(await Promise.allSettled(t.matchPromises)).filter(e=>"rejected"===e.status).map(e=>e.reason);let s;for(const t of a){if(Ge(t))throw t;!s&&De(t)&&(s=t)}for(const i of t.matches){const{id:e,routeId:a}=i,s=t.router.looseRoutesById[a];try{const n=nt(t,e,s);if(n){const a=await n;t.updateMatch(e,e=>({...e,...a}))}}catch(n){}}if(s)throw s;const r=Ke(t);de(r)&&await r}catch(n){if(De(n)&&!t.preload){const e=Ke(t);throw de(e)&&await e,n}if(Ge(n))throw n}return t.matches}async function ot(e){if(e._lazyLoaded||void 0!==e._lazyPromise||(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...a}=t.options;Object.assign(e.options,a),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&void 0===e._componentsPromise){const t=()=>{const t=[];for(const n of dt){const a=e.options[n]?.preload;a&&t.push(a())}if(t.length)return Promise.all(t).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function lt(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function ct(e){for(const t of dt)if(e.options[t]?.preload)return!0;return!1}const dt=["component","errorComponent","pendingComponent","notFoundComponent"];function ut(e,t){const n=e?.input?.({url:t});if(n){if("string"==typeof n)return new URL(n);if(n instanceof URL)return n}return t}function ht(e,t){const n=e?.output?.({url:t});if(n){if("string"==typeof n)return new URL(n);if(n instanceof URL)return n}return t}function mt(e){const t=e.resolvedLocation,n=e.location;return{fromLocation:t,toLocation:n,pathChanged:t?.pathname!==n.pathname,hrefChanged:t?.href!==n.href,hashChanged:t?.hash!==n.hash}}class pt{constructor(e){this.tempLocationKey=`${Math.round(1e7*Math.random())}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=e=>e(),this.update=e=>{e.notFoundRoute;const t=this.options,n=this.basepath??t?.basepath??"/",a=void 0===this.basepath,s=t?.rewrite;this.options={...t,...e},this.isServer=this.options.isServer??"undefined"==typeof document,this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(e=>[encodeURIComponent(e),e])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=X())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&"null"!==window.origin?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new G({loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:this.latestLocation,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200},{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(e=>!["redirected"].includes(e.status))}}}),Be(this));let r=!1;const i=this.options.basepath??"/",o=this.options.rewrite;if(a||n!==i||s!==o){this.basepath=i;const e=[];""!==Ae(i)&&e.push(function(e){const t=Ae(e.basepath),n=`/${t}`,a=`${n}/`,s=e.caseSensitive?n:n.toLowerCase(),r=e.caseSensitive?a:a.toLowerCase();return{input:({url:t})=>{const a=e.caseSensitive?t.pathname:t.pathname.toLowerCase();return a===s?t.pathname="/":a.startsWith(r)&&(t.pathname=t.pathname.slice(n.length)),t},output:({url:e})=>(e.pathname=Ne(["/",t,e.pathname]),e)}}({basepath:i})),o&&e.push(o),this.rewrite=0===e.length?void 0:1===e.length?e[0]:function(e){return{input:({url:t})=>{for(const n of e)t=ut(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=ht(e[n],t);return t}}}(e),this.history&&this.updateLatestLocation(),r=!0}r&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),"undefined"!=typeof window&&"CSS"in window&&"function"==typeof window.CSS?.supports&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:e,routesByPath:t,processedTree:n}=function(e,t=!1,n){const a=Se(e.fullPath),s=new Uint16Array(6),r={},i={};let o=0;return ye(t,s,e,1,a,0,e=>{if(n?.(e,o),me(!(e.id in r),String(e.id)),r[e.id]=e,0!==o&&e.path){const n="/"===(t=e.fullPath)?t:t.replace(/\/{1,}$/,"");i[n]&&!e.fullPath.endsWith("/")||(i[n]=e)}var t;o++}),we(a),{processedTree:{segmentTree:a,singleCache:pe(1e3),matchCache:pe(1e3),flatCache:null,masksTree:null},routesById:r,routesByPath:i}}(this.routeTree,this.options.caseSensitive,(e,t)=>{e.init({originalIndex:t})});this.options.routeMasks&&function(e,t){const n=Se("/"),a=new Uint16Array(6);for(const s of e)ye(!1,a,s,1,n,0);we(n),t.masksTree=n,t.flatCache=pe(1e3)}(this.options.routeMasks,n),this.routesById=e,this.routesByPath=t,this.processedTree=n;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(e,t)=>{const n={eventType:e,fn:t};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=e=>{this.subscribers.forEach(t=>{t.eventType===e.type&&t.fn(e)})},this.parseLocation=(e,t)=>{const n=({href:e,state:n})=>{const a=new URL(e,this.origin),s=ut(this.rewrite,a),r=this.options.parseSearch(s.search),i=this.options.stringifySearch(r);s.search=i;return{href:s.href.replace(s.origin,""),publicHref:e,url:s,pathname:he(s.pathname),searchStr:i,search:ae(t?.search,r),hash:s.hash.split("#").reverse()[0]??"",state:ae(t?.state,n)}},a=n(e),{__tempLocation:s,__tempKey:r}=a.state;if(s&&(!r||r===this.tempLocationKey)){const e=n(s);return e.state.key=a.state.key,e.state.__TSR_key=a.state.__TSR_key,delete e.state.__tempLocation,{...e,maskedLocation:a}}return a},this.resolvePathCache=pe(1e3),this.resolvePathWithBase=(e,t)=>function({base:e,to:t,trailingSlash:n="never",cache:a}){const s=t.startsWith("/"),r=!s&&"."===t;let i,o,l;if(a){i=s?t:r?e:e+"\0"+t;const n=a.get(i);if(n)return n}if(r)o=e.split("/");else if(s)o=t.split("/");else{for(o=e.split("/");o.length>1&&""===ee(o);)o.pop();const n=t.split("/");for(let e=0,t=n.length;e<t;e++){const a=n[e];""===a?e?e===t-1&&o.push(a):o=[a]:".."===a?o.pop():"."===a||o.push(a)}}o.length>1&&(""===ee(o)?"never"===n&&o.pop():"always"===n&&o.push(""));let c="";for(let u=0;u<o.length;u++){u>0&&(c+="/");const e=o[u];if(!e)continue;l=ve(e,0,l);const t=l[0];if(0===t){c+=e;continue}const n=l[5],a=e.substring(0,l[1]),s=e.substring(l[4],n),r=e.substring(l[2],l[3]);c+=1===t?a||s?`${a}{$${r}}${s}`:`$${r}`:2===t?a||s?`${a}{$}${s}`:"$":`${a}{-$${r}}${s}`}c=_e(c);const d=c||"/";return i&&a&&a.set(i,d),d}({base:e,to:_e(t),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(e,t,n)=>"string"==typeof e?this.matchRoutesInternal({pathname:e,search:t},n):this.matchRoutesInternal(e,t),this.getMatchedRoutes=e=>function({pathname:e,routesById:t,processedTree:n}){const a={},s=Pe(e);let r;const i=function(e,t,n=!1){const a=n?e:`nofuzz\0${e}`,s=t.matchCache.get(a);if(void 0!==s)return s;e||="/";const r=Ce(e,t.segmentTree,n);return r&&(r.branch=function(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}(r.route)),t.matchCache.set(a,r),r}(s,n,!0);i&&(r=i.route,Object.assign(a,i.params));return{matchedRoutes:i?.branch||[t[He]],routeParams:a,foundRoute:r}}({pathname:e,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=e=>{const t=this.getMatch(e);t&&(t.abortController.abort(),clearTimeout(t._nonReactive.pendingTimeout),t._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const e=this.state.matches.filter(e=>"pending"===e.status),t=this.state.matches.filter(e=>"loader"===e.isFetching);new Set([...this.state.pendingMatches??[],...e,...t]).forEach(e=>{this.cancelMatch(e.id)})},this.buildLocation=e=>{const t=(t={})=>{const n=t._fromLocation||this.pendingBuiltLocation||this.latestLocation,a=ee(this.matchRoutes(n,{_buildLocation:!0}));t.from;const s="path"===t.unsafeRelative?n.pathname:t.from??a.fullPath,r=this.resolvePathWithBase(s,"."),i=a.search,o={...a.params},l=t.to?this.resolvePathWithBase(r,`${t.to}`):this.resolvePathWithBase(r,"."),c=!1===t.params||null===t.params?{}:!0===(t.params??!0)?o:Object.assign(o,te(t.params,o)),d=Me({path:l,params:c}).interpolatedPath,u=this.matchRoutes(d,void 0,{_buildLocation:!0}).map(e=>this.looseRoutesById[e.routeId]);if(Object.keys(c).length>0)for(const e of u){const t=e.options.params?.stringify??e.options.stringifyParams;t&&Object.assign(c,t(c))}const h=e.leaveParams?l:he(Me({path:l,params:c,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let m=i;if(e._includeValidateSearch&&this.options.search?.strict){const e={};u.forEach(t=>{if(t.options.validateSearch)try{Object.assign(e,xt(t.options.validateSearch,{...e,...m}))}catch{}}),m=e}m=function({search:e,dest:t,destRoutes:n,_includeValidateSearch:a}){const s=n.reduce((e,t)=>{const n=[];if("search"in t.options)t.options.search?.middlewares&&n.push(...t.options.search.middlewares);else if(t.options.preSearchFilters||t.options.postSearchFilters){const e=({search:e,next:n})=>{let a=e;"preSearchFilters"in t.options&&t.options.preSearchFilters&&(a=t.options.preSearchFilters.reduce((e,t)=>t(e),e));const s=n(a);return"postSearchFilters"in t.options&&t.options.postSearchFilters?t.options.postSearchFilters.reduce((e,t)=>t(e),s):s};n.push(e)}if(a&&t.options.validateSearch){const e=({search:e,next:n})=>{const a=n(e);try{return{...a,...xt(t.options.validateSearch,a)??void 0}}catch{return a}};n.push(e)}return e.concat(n)},[])??[],r=({search:e})=>t.search?!0===t.search?e:te(t.search,e):{};s.push(r);const i=(e,t)=>{if(e>=s.length)return t;return(0,s[e])({search:t,next:t=>i(e+1,t)})};return i(0,e)}({search:m,dest:t,destRoutes:u,_includeValidateSearch:e._includeValidateSearch}),m=ae(i,m);const p=this.options.stringifySearch(m),f=!0===t.hash?n.hash:t.hash?te(t.hash,n.hash):void 0,g=f?`#${f}`:"";let x=!0===t.state?n.state:t.state?te(t.state,n.state):{};x=ae(n.state,x);const v=`${h}${p}${g}`,y=new URL(v,this.origin),b=ht(this.rewrite,y);return{publicHref:b.pathname+b.search+b.hash,href:v,url:b,pathname:h,search:m,searchStr:p,state:x,hash:f??"",unmaskOnReload:t.unmaskOnReload}},n=(n={},a)=>{const s=t(n);let r=a?t(a):void 0;if(!r){const n={};if(this.options.routeMasks){const i=function(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const a=Ce(e,t.masksTree);return t.flatCache.set(e,a),a}(s.pathname,this.processedTree);if(i){Object.assign(n,i.params);const{from:s,params:o,...l}=i.route,c=!1===o||null===o?{}:!0===(o??!0)?n:Object.assign(n,te(o,n));a={from:e.from,...l,params:c},r=t(a)}}}return r&&(s.maskedLocation=r),s};return e.mask?n(e,{from:e.from,...e.mask}):n(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:t,...n})=>{const a=Pe(this.latestLocation.href)===Pe(n.href),s=this.commitLocationPromise;if(this.commitLocationPromise=ce(()=>{s?.resolve()}),a&&(()=>{const e=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];e.forEach(e=>{n.state[e]=this.latestLocation.state[e]});const t=le(n.state,this.latestLocation.state);return e.forEach(e=>{delete n.state[e]}),t})())this.load();else{let{maskedLocation:a,hashScrollIntoView:s,url:r,...i}=n;a&&(i={...a,state:{...a.state,__tempKey:void 0,__tempLocation:{...i,search:i.searchStr,state:{...i.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(i.unmaskOnReload??this.options.unmaskOnReload)&&(i.state.__tempKey=this.tempLocationKey)),i.state.__hashScrollIntoViewOptions=s??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=e,this.history[n.replace?"replace":"push"](i.publicHref,i.state,{ignoreBlocker:t})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:t,hashScrollIntoView:n,viewTransition:a,ignoreBlocker:s,href:r,...i}={})=>{if(r){const t=this.history.location.state.__TSR_index,n=Z(r,{__TSR_index:e?t:t+1});i.to=n.pathname,i.search=this.options.parseSearch(n.search),i.hash=n.hash.slice(1)}const o=this.buildLocation({...i,_includeValidateSearch:!0});this.pendingBuiltLocation=o;const l=this.commitLocation({...o,viewTransition:a,replace:e,resetScroll:t,hashScrollIntoView:n,ignoreBlocker:s});return Promise.resolve().then(()=>{this.pendingBuiltLocation===o&&(this.pendingBuiltLocation=void 0)}),l},this.navigate=async({to:e,reloadDocument:t,href:n,publicHref:a,...s})=>{let r=!1;if(n)try{new URL(`${n}`),r=!0}catch{}if(r&&!t&&(t=!0),t){if(!n||!a&&!r){const t=this.buildLocation({to:e,...s});n=n??t.url.href,a=a??t.url.href}const t=!r&&a?a:n;if(!s.ignoreBlocker){const e=this.history,t=e.getBlockers?.()??[];for(const n of t)if(n?.blockerFn){if(await n.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}}return s.replace?window.location.replace(t):window.location.href=t,Promise.resolve()}return this.buildAndCommitLocation({...s,href:n,to:e,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const e=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==e.publicHref||e.url.origin!==this.origin){throw function(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&"string"==typeof e.href)try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&null===t.get("Location")&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}({href:this.getParsedLocationHref(e)})}}const e=this.matchRoutes(this.latestLocation);this.__store.setState(t=>({...t,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:e,cachedMatches:t.cachedMatches.filter(t=>!e.some(e=>e.id===t.id))}))},this.load=async e=>{let t,n,a,s;for(a=new Promise(s=>{this.startTransition(async()=>{try{this.beforeLoad();const t=this.latestLocation,n=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...mt({resolvedLocation:n,location:t})}),this.emit({type:"onBeforeLoad",...mt({resolvedLocation:n,location:t})}),await it({router:this,sync:e?.sync,matches:this.state.pendingMatches,location:t,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let e=[],t=[],n=[];H(()=>{this.__store.setState(a=>{const s=a.matches,r=a.pendingMatches||a.matches;return e=s.filter(e=>!r.some(t=>t.id===e.id)),t=r.filter(e=>!s.some(t=>t.id===e.id)),n=r.filter(e=>s.some(t=>t.id===e.id)),{...a,isLoading:!1,loadedAt:Date.now(),matches:r,pendingMatches:void 0,cachedMatches:[...a.cachedMatches,...e.filter(e=>"error"!==e.status&&"notFound"!==e.status)]}}),this.clearExpiredCache()}),[[e,"onLeave"],[t,"onEnter"],[n,"onStay"]].forEach(([e,t])=>{e.forEach(e=>{this.looseRoutesById[e.routeId].options[t]?.(e)})})})})}})}catch(r){Ge(r)?(t=r,this.isServer||this.navigate({...t.options,replace:!0,ignoreBlocker:!0})):De(r)&&(n=r),this.__store.setState(e=>({...e,statusCode:t?t.status:n?404:e.matches.some(e=>"error"===e.status)?500:200,redirect:t}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),s()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()?s=404:this.__store.state.matches.some(e=>"error"===e.status)&&(s=500),void 0!==s&&this.__store.setState(e=>({...e,statusCode:s}))},this.startViewTransition=e=>{const t=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,t&&"undefined"!=typeof document&&"startViewTransition"in document&&"function"==typeof document.startViewTransition){let n;if("object"==typeof t&&this.isViewTransitionTypesSupported){const a=this.latestLocation,s=this.state.resolvedLocation,r="function"==typeof t.types?t.types(mt({resolvedLocation:s,location:a})):t.types;if(!1===r)return void e();n={update:e,types:r}}else n=e;document.startViewTransition(n)}else e()},this.updateMatch=(e,t)=>{this.startTransition(()=>{const n=this.state.pendingMatches?.some(t=>t.id===e)?"pendingMatches":this.state.matches.some(t=>t.id===e)?"matches":this.state.cachedMatches.some(t=>t.id===e)?"cachedMatches":"";n&&this.__store.setState(a=>({...a,[n]:a[n]?.map(n=>n.id===e?t(n):n)}))})},this.getMatch=e=>{const t=t=>t.id===e;return this.state.cachedMatches.find(t)??this.state.pendingMatches?.find(t)??this.state.matches.find(t)},this.invalidate=e=>{const t=t=>e?.filter?.(t)??1?{...t,invalid:!0,...e?.forcePending||"error"===t.status||"notFound"===t.status?{status:"pending",error:void 0}:void 0}:t;return this.__store.setState(e=>({...e,matches:e.matches.map(t),cachedMatches:e.cachedMatches.map(t),pendingMatches:e.pendingMatches?.map(t)})),this.shouldViewTransition=!1,this.load({sync:e?.sync})},this.getParsedLocationHref=e=>{let t=e.url.href;return this.origin&&e.url.origin===this.origin&&(t=t.replace(this.origin,"")||"/"),t},this.resolveRedirect=e=>{if(!e.options.href){const t=this.buildLocation(e.options),n=this.getParsedLocationHref(t);e.options.href=t.href,e.headers.set("Location",n)}return e.headers.get("Location")||e.headers.set("Location",e.options.href),e},this.clearCache=e=>{const t=e?.filter;void 0!==t?this.__store.setState(e=>({...e,cachedMatches:e.cachedMatches.filter(e=>!t(e))})):this.__store.setState(e=>({...e,cachedMatches:[]}))},this.clearExpiredCache=()=>{this.clearCache({filter:e=>{const t=this.looseRoutesById[e.routeId];if(!t.options.loader)return!0;const n=(e.preload?t.options.preloadGcTime??this.options.defaultPreloadGcTime:t.options.gcTime??this.options.defaultGcTime)??3e5;if("error"===e.status)return!0;return Date.now()-e.updatedAt>=n}})},this.loadRouteChunk=ot,this.preloadRoute=async e=>{const t=this.buildLocation(e);let n=this.matchRoutes(t,{throwOnError:!0,preload:!0,dest:e});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(e=>e.id)),s=new Set([...a,...this.state.cachedMatches.map(e=>e.id)]);H(()=>{n.forEach(e=>{s.has(e.id)||this.__store.setState(t=>({...t,cachedMatches:[...t.cachedMatches,e]}))})});try{return n=await it({router:this,matches:n,location:t,preload:!0,updateMatch:(e,t)=>{a.has(e)?n=n.map(n=>n.id===e?t(n):n):this.updateMatch(e,t)}}),n}catch(r){if(Ge(r)){if(r.options.reloadDocument)return;return await this.preloadRoute({...r.options,_fromLocation:t})}return void De(r)}},this.matchRoute=(e,t)=>{const n={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},a=this.buildLocation(n);if(t?.pending&&"pending"!==this.state.status)return!1;const s=(void 0===t?.pending?!this.state.isLoading:t.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,r=function(e,t,n,a,s){e||="/",a||="/";const r=t?`case\0${e}`:e;let i=s.singleCache.get(r);i||(i=Se("/"),ye(t,new Uint16Array(6),{from:e},1,i,0),s.singleCache.set(r,i));return Ce(a,i,n)}(a.pathname,t?.caseSensitive??!1,t?.fuzzy??!1,s.pathname,this.processedTree);return!!r&&(!(e.params&&!le(r.params,e.params,{partial:!0}))&&(t?.includeSearch??1?!!le(s.search,a.search,{partial:!0})&&r.params:r.params))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>"notFound"===e.status||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??qe,parseSearch:e.parseSearch??Ue}),"undefined"!=typeof document&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,t){const n=this.getMatchedRoutes(e.pathname),{foundRoute:a,routeParams:s}=n;let{matchedRoutes:r}=n,i=!1;(a?"/"!==a.path&&s["**"]:Pe(e.pathname))&&(this.options.notFoundRoute?r=[...r,this.options.notFoundRoute]:i=!0);const o=(()=>{if(i){if("root"!==this.options.notFoundMode)for(let e=r.length-1;e>=0;e--){const t=r[e];if(t.children)return t.id}return He}})(),l=[],c=e=>{const t=e?.id;return t?e.context??this.options.context??void 0:this.options.context??void 0};return r.forEach((n,a)=>{const r=l[a-1],[i,d,u]=(()=>{const a=r?.search??e.search,s=r?._strictSearch??void 0;try{const e=xt(n.options.validateSearch,{...a})??void 0;return[{...a,...e},{...s,...e},void 0]}catch(i){let e=i;if(i instanceof ft||(e=new ft(i.message,{cause:i})),t?.throwOnError)throw e;return[a,{},e]}})(),h=n.options.loaderDeps?.({search:i})??"",m=h?JSON.stringify(h):"",{interpolatedPath:p,usedParams:f}=Me({path:n.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),g=n.id+p+m,x=this.getMatch(g),v=this.state.matches.find(e=>e.routeId===n.id),y=x?._strictParams??f;let b;if(!x){const e=n.options.params?.parse??n.options.parseParams;if(e)try{Object.assign(y,e(y))}catch(C){if(b=De(C)||Ge(C)?C:new gt(C.message,{cause:C}),t?.throwOnError)throw b}}Object.assign(s,y);const w=v?"stay":"enter";let S;if(x)S={...x,cause:w,params:v?ae(v.params,s):s,_strictParams:y,search:ae(v?v.search:x.search,i),_strictSearch:d};else{const e=n.options.loader||n.options.beforeLoad||n.lazyFn||ct(n)?"pending":"success";S={id:g,ssr:this.isServer?void 0:n.options.ssr,index:a,routeId:n.id,params:v?ae(v.params,s):s,_strictParams:y,pathname:p,updatedAt:Date.now(),search:v?ae(v.search,i):i,_strictSearch:d,searchError:void 0,status:e,isFetching:!1,error:void 0,paramsError:b,__routeContext:void 0,_nonReactive:{loadPromise:ce()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:w,loaderDeps:v?ae(v.loaderDeps,h):h,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:n.options.staticData||{},fullPath:n.fullPath}}t?.preload||(S.globalNotFound=o===n.id),S.searchError=u;const j=c(r);S.context={...j,...S.__routeContext,...S.__beforeLoadContext},l.push(S)}),l.forEach((n,a)=>{const s=this.looseRoutesById[n.routeId];if(!this.getMatch(n.id)&&!0!==t?._buildLocation){const t=l[a-1],r=c(t);if(s.options.context){const t={deps:n.loaderDeps,params:n.params,context:r??{},location:e,navigate:t=>this.navigate({...t,_fromLocation:e}),buildLocation:this.buildLocation,cause:n.cause,abortController:n.abortController,preload:!!n.preload,matches:l};n.__routeContext=s.options.context(t)??void 0}n.context={...r,...n.__routeContext,...n.__beforeLoadContext}}}),l}}class ft extends Error{}class gt extends Error{}function xt(e,t){if(null==e)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new ft("Async validation not supported");if(n.issues)throw new ft(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):"function"==typeof e?e(t):{}}class vt{constructor(e){if(this.init=e=>{this.originalIndex=e.originalIndex;const t=this.options,n=!t?.path&&!t?.id;this.parentRoute=this.options.getParentRoute?.(),n?this._path=He:this.parentRoute||me(!1);let a=n?He:t?.path;a&&"/"!==a&&(a=Ee(a));const s=t?.id||a;let r=n?He:Ne([this.parentRoute.id===He?"":this.parentRoute.id,s]);a===He&&(a="/"),r!==He&&(r=Ne(["/",r]));const i=r===He?"/":Ne([this.parentRoute.fullPath,a]);this._path=a,this._id=r,this._fullPath=i,this._to=i},this.addChildren=e=>this._addFileChildren(e),this._addFileChildren=e=>(Array.isArray(e)&&(this.children=e),"object"==typeof e&&null!==e&&(this.children=Object.values(e)),this),this._addFileTypes=()=>this,this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class yt extends vt{constructor(e){super(e)}}function bt(e){const t=e.errorComponent??St;return c.jsx(wt,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:n,reset:a})=>n?p.createElement(t,{error:n,reset:a}):e.children})}class wt extends p.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function St({error:e}){const[t,n]=p.useState(!1);return c.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[c.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),c.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(e=>!e),children:t?"Hide Error":"Show Error"})]}),c.jsx("div",{style:{height:".25rem"}}),t?c.jsx("div",{children:c.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?c.jsx("code",{children:e.message}):null})}):null]})}function jt({children:e,fallback:t=null}){return f.useSyncExternalStore(Ct,()=>!0,()=>!1)?c.jsx(f.Fragment,{children:e}):c.jsx(f.Fragment,{children:t})}function Ct(){return()=>{}}var kt,Nt,_t,Et,Pt={exports:{}},At={},Rt={exports:{}},Tt={};function Mt(){return Nt||(Nt=1,Rt.exports=function(){if(kt)return Tt;kt=1;var e=m(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,a=e.useEffect,s=e.useLayoutEffect,r=e.useDebugValue;function i(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!t(e,a)}catch(s){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=n({inst:{value:o,getSnapshot:t}}),c=l[0].inst,d=l[1];return s(function(){c.value=o,c.getSnapshot=t,i(c)&&d({inst:c})},[e,o,t]),a(function(){return i(c)&&d({inst:c}),e(function(){i(c)&&d({inst:c})})},[e]),r(o),o};return Tt.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,Tt}()),Rt.exports}var Dt=(Et||(Et=1,Pt.exports=function(){if(_t)return At;_t=1;var e=m(),t=Mt(),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=t.useSyncExternalStore,s=e.useRef,r=e.useEffect,i=e.useMemo,o=e.useDebugValue;return At.useSyncExternalStoreWithSelector=function(e,t,l,c,d){var u=s(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=i(function(){function e(e){if(!r){if(r=!0,a=e,e=c(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return s=t}return s=e}if(t=s,n(a,e))return t;var i=c(e);return void 0!==d&&d(t,i)?(a=e,t):(a=e,s=i)}var a,s,r=!1,i=void 0===l?null:l;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]},[t,l,c,d]);var m=a(e,u[0],u[1]);return r(function(){h.hasValue=!0,h.value=m},[m]),o(m),m},At}()),Pt.exports);function Lt(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!t.has(n)||!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Ft(e);if(n.length!==Ft(t).length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!Object.is(e[n[a]],t[n[a]]))return!1;return!0}function Ft(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const It=p.createContext(null);function Ot(){return"undefined"==typeof document?It:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=It,It)}function zt(e){const t=p.useContext(Ot());return t}function Bt(e){const t=zt(),n=e?.router||t,a=p.useRef(void 0);return function(e,t=e=>e,n={}){const a=n.equal??Lt;return Dt.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,a)}(n.__store,t=>{if(e?.select){if(e.structuralSharing??n.options.defaultStructuralSharing){const n=ae(a.current,e.select(t));return a.current=n,n}return e.select(t)}return t})}const $t=p.createContext(void 0),Ut=p.createContext(void 0);function Vt(e){const t=p.useContext(e.from?Ut:$t);return Bt({select:n=>{const a=n.matches.find(n=>e.from?e.from===n.routeId:n.id===t);if(me(!((e.shouldThrow??1)&&!a),e.from&&e.from),void 0!==a)return e.select?e.select(a):a},structuralSharing:e.structuralSharing})}function qt(e){return Vt({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function Ht(e){const{select:t,...n}=e;return Vt({...n,select:e=>t?t(e.loaderDeps):e.loaderDeps})}function Gt(e){return Vt({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const n=!1===e.strict?t.params:t._strictParams;return e.select?e.select(n):n}})}function Kt(e){return Vt({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}const Wt="undefined"!=typeof window?p.useLayoutEffect:p.useEffect;function Qt(e){const t=p.useRef({value:e,prev:null}),n=t.current.value;return e!==n&&(t.current={value:e,prev:n}),t.current.prev}function Yt(e){const t=zt();return p.useCallback(n=>t.navigate({...n,from:n.from??e?.from}),[e?.from,t])}function Xt(e){const t=zt(),n=Yt(),a=p.useRef(null);return Wt(()=>{a.current!==e&&(n(e),a.current=e)},[t,e,n]),null}var Zt=R();const Jt=n(Zt);function en(e,t){const n=zt(),[a,s]=p.useState(!1),r=p.useRef(!1),i=function(e){const t=p.useRef(null);return p.useImperativeHandle(e,()=>t.current,[]),t}(t),{activeProps:o,inactiveProps:l,activeOptions:c,to:d,preload:u,preloadDelay:h,hashScrollIntoView:m,replace:f,startTransition:g,resetScroll:x,viewTransition:v,children:y,target:b,disabled:w,style:S,className:j,onClick:C,onFocus:k,onMouseEnter:N,onMouseLeave:_,onTouchStart:E,ignoreBlocker:P,params:A,search:R,hash:T,state:M,mask:D,reloadDocument:L,unsafeRelative:F,from:I,_fromLocation:O,...z}=e,B=Bt({select:e=>e.location.search,structuralSharing:!0}),$=e.from,U=p.useMemo(()=>({...e,from:$}),[n,B,$,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),V=p.useMemo(()=>n.buildLocation({...U}),[n,U]),q=p.useMemo(()=>{if(w)return;let e=V.maskedLocation?V.maskedLocation.url.href:V.url.href,t=!1;return n.origin&&(e.startsWith(n.origin)?e=n.history.createHref(e.replace(n.origin,""))||"/":t=!0),{href:e,external:t}},[w,V.maskedLocation,V.url,n.origin,n.history]),H=p.useMemo(()=>{if(q?.external)return q.href;try{return new URL(d),d}catch{}},[d,q]),G=!e.reloadDocument&&!H&&(u??n.options.defaultPreload),K=h??n.options.defaultPreloadDelay??0,W=Bt({select:e=>{if(H)return!1;if(c?.exact){if(!(t=e.location.pathname,a=V.pathname,s=n.basepath,Re(t,s)===Re(a,s)))return!1}else{const t=Re(e.location.pathname,n.basepath),a=Re(V.pathname,n.basepath);if(!(t.startsWith(a)&&(t.length===a.length||"/"===t[a.length])))return!1}var t,a,s;if(c?.includeSearch??1){if(!le(e.location.search,V.search,{partial:!c?.exact,ignoreUndefined:!c?.explicitUndefined}))return!1}return!c?.includeHash||e.location.hash===V.hash}}),Q=p.useCallback(()=>{n.preloadRoute({...U}).catch(e=>{})},[n,U]);!function(e,t,n={},a={}){p.useEffect(()=>{if(!e.current||a.disabled||"function"!=typeof IntersectionObserver)return;const s=new IntersectionObserver(([e])=>{t(e)},n);return s.observe(e.current),()=>{s.disconnect()}},[t,n,a.disabled,e])}(i,p.useCallback(e=>{e?.isIntersecting&&Q()},[Q]),ln,{disabled:!(!w&&"viewport"===G)}),p.useEffect(()=>{r.current||w||"render"!==G||(Q(),r.current=!0)},[w,Q,G]);if(H)return{...z,ref:i,href:H,...y&&{children:y},...b&&{target:b},...w&&{disabled:w},...S&&{style:S},...j&&{className:j},...C&&{onClick:C},...k&&{onFocus:k},...N&&{onMouseEnter:N},..._&&{onMouseLeave:_},...E&&{onTouchStart:E}};const Y=e=>{w||G&&Q()},X=Y,Z=W?te(o,{})??nn:tn,J=W?tn:te(l,{})??tn,ee=[j,Z.className,J.className].filter(Boolean).join(" "),ne=(S||Z.style||J.style)&&{...S,...Z.style,...J.style};return{...z,...Z,...J,href:q?.href,ref:i,onClick:cn([C,e=>{const t=e.currentTarget.getAttribute("target"),a=void 0!==b?b:t;if(!(w||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||e.defaultPrevented||a&&"_self"!==a||0!==e.button)){e.preventDefault(),Zt.flushSync(()=>{s(!0)});const t=n.subscribe("onResolved",()=>{t(),s(!1)});n.navigate({...U,replace:f,resetScroll:x,hashScrollIntoView:m,startTransition:g,viewTransition:v,ignoreBlocker:P})}}]),onFocus:cn([k,Y]),onMouseEnter:cn([N,e=>{if(!w&&G)if(K){const t=e.target;if(on.has(t))return;const n=setTimeout(()=>{on.delete(t),Q()},K);on.set(t,n)}else Q()}]),onMouseLeave:cn([_,e=>{if(w||!G||!K)return;const t=e.target,n=on.get(t);n&&(clearTimeout(n),on.delete(t))}]),onTouchStart:cn([E,X]),disabled:!!w,target:b,...ne&&{style:ne},...ee&&{className:ee},...w&&an,...W&&sn,...a&&rn}}const tn={},nn={className:"active"},an={role:"link","aria-disabled":!0},sn={"data-status":"active","aria-current":"page"},rn={"data-transitioning":"transitioning"},on=new WeakMap,ln={rootMargin:"100px"},cn=e=>t=>{for(const n of e)if(n){if(t.defaultPrevented)return;n(t)}},dn=p.forwardRef((e,t)=>{const{_asChild:n,...a}=e,{type:s,ref:r,...i}=en(a,t),o="function"==typeof a.children?a.children({isActive:"active"===i["data-status"]}):a.children;return void 0===n&&delete i.disabled,p.createElement(n||"a",{...i,ref:r},o)});let un=class extends vt{constructor(e){super(e),this.useMatch=e=>Vt({select:e?.select,from:this.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>Vt({...e,from:this.id,select:t=>e?.select?e.select(t.context):t.context}),this.useSearch=e=>Kt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useParams=e=>Gt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useLoaderDeps=e=>Ht({...e,from:this.id}),this.useLoaderData=e=>qt({...e,from:this.id}),this.useNavigate=()=>Yt({from:this.fullPath}),this.Link=f.forwardRef((e,t)=>c.jsx(dn,{ref:t,from:this.fullPath,...e})),this.$$typeof=Symbol.for("react.memo")}};class hn extends yt{constructor(e){super(e),this.useMatch=e=>Vt({select:e?.select,from:this.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>Vt({...e,from:this.id,select:t=>e?.select?e.select(t.context):t.context}),this.useSearch=e=>Kt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useParams=e=>Gt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useLoaderDeps=e=>Ht({...e,from:this.id}),this.useLoaderData=e=>qt({...e,from:this.id}),this.useNavigate=()=>Yt({from:this.fullPath}),this.Link=f.forwardRef((e,t)=>c.jsx(dn,{ref:t,from:this.fullPath,...e})),this.$$typeof=Symbol.for("react.memo")}}function mn(e){return"object"==typeof e?new pn(e,{silent:!0}).createRoute(e):new pn(e,{silent:!0}).createRoute}class pn{constructor(e,t){this.path=e,this.createRoute=e=>{this.silent;const t=function(e){return new un(e)}(e);return t.isRoot=!1,t},this.silent=t?.silent}}class fn{constructor(e){this.useMatch=e=>Vt({select:e?.select,from:this.options.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>Vt({from:this.options.id,select:t=>e?.select?e.select(t.context):t.context}),this.useSearch=e=>Kt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.options.id}),this.useParams=e=>Gt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.options.id}),this.useLoaderDeps=e=>Ht({...e,from:this.options.id}),this.useLoaderData=e=>qt({...e,from:this.options.id}),this.useNavigate=()=>Yt({from:zt().routesById[this.options.id].fullPath}),this.options=e,this.$$typeof=Symbol.for("react.memo")}}function gn(e){return"object"==typeof e?new fn(e):t=>new fn({id:e,...t})}function xn(){const e=zt(),t=p.useRef({router:e,mounted:!1}),[n,a]=p.useState(!1),{hasPendingMatches:s,isLoading:r}=Bt({select:e=>({isLoading:e.isLoading,hasPendingMatches:e.matches.some(e=>"pending"===e.status)}),structuralSharing:!0}),i=Qt(r),o=r||n||s,l=Qt(o),c=r||s,d=Qt(c);return e.startTransition=e=>{a(!0),p.startTransition(()=>{e(),a(!1)})},p.useEffect(()=>{const t=e.history.subscribe(e.load),n=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Pe(e.latestLocation.publicHref)!==Pe(n.publicHref)&&e.commitLocation({...n,replace:!0}),()=>{t()}},[e,e.history]),Wt(()=>{if("undefined"!=typeof window&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0};(async()=>{try{await e.load()}catch(t){}})()},[e]),Wt(()=>{i&&!r&&e.emit({type:"onLoad",...mt(e.state)})},[i,e,r]),Wt(()=>{d&&!c&&e.emit({type:"onBeforeRouteMount",...mt(e.state)})},[c,d,e]),Wt(()=>{if(l&&!o){const t=mt(e.state);e.emit({type:"onResolved",...t}),e.__store.setState(e=>({...e,status:"idle",resolvedLocation:e.location})),t.hrefChanged&&function(e){if("undefined"!=typeof document&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&""!==e.state.location.hash){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}(e)}},[o,l,e]),null}function vn(e){const t=Bt({select:e=>`not-found-${e.location.pathname}-${e.status}`});return c.jsx(bt,{getResetKey:()=>t,onCatch:(t,n)=>{if(!De(t))throw t;e.onCatch?.(t,n)},errorComponent:({error:t})=>{if(De(t))return e.fallback?.(t);throw t},children:e.children})}function yn(){return c.jsx("p",{children:"Not Found"})}function bn(e){return c.jsx(c.Fragment,{children:e.children})}function wn(e,t,n){return t.options.notFoundComponent?c.jsx(t.options.notFoundComponent,{...n}):e.options.defaultNotFoundComponent?c.jsx(e.options.defaultNotFoundComponent,{...n}):c.jsx(yn,{})}function Sn({children:e}){const t=zt();return t.isServer?c.jsx("script",{nonce:t.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:e+";document.currentScript.remove()"}}):null}function jn(){const e=zt();if(!e.isScrollRestoring||!e.isServer)return null;if("function"==typeof e.options.scrollRestoration){if(!e.options.scrollRestoration({location:e.latestLocation}))return null}const t=(e.options.getScrollRestorationKey||Ie)(e.latestLocation),n=t!==Ie(e.latestLocation)?t:void 0,a={storageKey:Le,shouldScrollRestoration:!0};return n&&(a.key=n),c.jsx(Sn,{children:`(${ze.toString()})(${JSON.stringify(a)})`})}const Cn=p.memo(function({matchId:e}){const t=zt(),n=Bt({select:t=>{const n=t.matches.find(t=>t.id===e);return me(n),{routeId:n.routeId,ssr:n.ssr,_displayPending:n._displayPending}},structuralSharing:!0}),a=t.routesById[n.routeId],s=a.options.pendingComponent??t.options.defaultPendingComponent,r=s?c.jsx(s,{}):null,i=a.options.errorComponent??t.options.defaultErrorComponent,o=a.options.onCatch??t.options.defaultOnCatch,l=a.isRoot?a.options.notFoundComponent??t.options.notFoundRoute?.options.component:a.options.notFoundComponent,d=!1===n.ssr||"data-only"===n.ssr,u=(!a.isRoot||a.options.wrapInSuspense||d)&&(a.options.wrapInSuspense??s??(a.options.errorComponent?.preload||d))?p.Suspense:bn,h=i?bt:bn,m=l?vn:bn,f=Bt({select:e=>e.loadedAt}),g=Bt({select:t=>{const n=t.matches.findIndex(t=>t.id===e);return t.matches[n-1]?.routeId}}),x=a.isRoot?a.options.shellComponent??bn:bn;return c.jsxs(x,{children:[c.jsx($t.Provider,{value:e,children:c.jsx(u,{fallback:r,children:c.jsx(h,{getResetKey:()=>f,errorComponent:i||St,onCatch:(e,t)=>{if(De(e))throw e;o?.(e,t)},children:c.jsx(m,{fallback:e=>{if(!l||e.routeId&&e.routeId!==n.routeId||!e.routeId&&!a.isRoot)throw e;return p.createElement(l,e)},children:d||n._displayPending?c.jsx(jt,{fallback:r,children:c.jsx(Nn,{matchId:e})}):c.jsx(Nn,{matchId:e})})})})}),g===He&&t.options.scrollRestoration?c.jsxs(c.Fragment,{children:[c.jsx(kn,{}),c.jsx(jn,{})]}):null]})});function kn(){const e=zt(),t=p.useRef(void 0);return c.jsx("script",{suppressHydrationWarning:!0,ref:n=>{!n||void 0!==t.current&&t.current.href===e.latestLocation.href||(e.emit({type:"onRendered",...mt(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const Nn=p.memo(function({matchId:e}){const t=zt(),{match:n,key:a,routeId:s}=Bt({select:n=>{const a=n.matches.find(t=>t.id===e),s=a.routeId,r=t.routesById[s].options.remountDeps??t.options.defaultRemountDeps,i=r?.({routeId:s,loaderDeps:a.loaderDeps,params:a._strictParams,search:a._strictSearch});return{key:i?JSON.stringify(i):void 0,routeId:s,match:{id:a.id,status:a.status,error:a.error,invalid:a.invalid,_forcePending:a._forcePending,_displayPending:a._displayPending}}},structuralSharing:!0}),r=t.routesById[s],i=p.useMemo(()=>{const e=r.options.component??t.options.defaultComponent;return e?c.jsx(e,{},a):c.jsx(_n,{})},[a,r.options.component,t.options.defaultComponent]);if(n._displayPending)throw t.getMatch(n.id)?._nonReactive.displayPendingPromise;if(n._forcePending)throw t.getMatch(n.id)?._nonReactive.minPendingPromise;if("pending"===n.status){const e=r.options.pendingMinMs??t.options.defaultPendingMinMs;if(e){const a=t.getMatch(n.id);if(a&&!a._nonReactive.minPendingPromise&&!t.isServer){const t=ce();a._nonReactive.minPendingPromise=t,setTimeout(()=>{t.resolve(),a._nonReactive.minPendingPromise=void 0},e)}}throw t.getMatch(n.id)?._nonReactive.loadPromise}if("notFound"===n.status)return me(De(n.error)),wn(t,r,n.error);if("redirected"===n.status)throw me(Ge(n.error)),t.getMatch(n.id)?._nonReactive.loadPromise;if("error"===n.status){if(t.isServer){const e=(r.options.errorComponent??t.options.defaultErrorComponent)||St;return c.jsx(e,{error:n.error,reset:void 0,info:{componentStack:""}})}throw n.error}return i}),_n=p.memo(function(){const e=zt(),t=p.useContext($t),n=Bt({select:e=>e.matches.find(e=>e.id===t)?.routeId}),a=e.routesById[n],s=Bt({select:e=>{const n=e.matches.find(e=>e.id===t);return me(n),n.globalNotFound}}),r=Bt({select:e=>{const n=e.matches,a=n.findIndex(e=>e.id===t);return n[a+1]?.id}}),i=e.options.defaultPendingComponent?c.jsx(e.options.defaultPendingComponent,{}):null;if(s)return wn(e,a,void 0);if(!r)return null;const o=c.jsx(Cn,{matchId:r});return n===He?c.jsx(p.Suspense,{fallback:i,children:o}):o});function En(){const e=zt(),t=e.routesById[He].options.pendingComponent??e.options.defaultPendingComponent,n=t?c.jsx(t,{}):null,a=e.isServer||"undefined"!=typeof document&&e.ssr?bn:p.Suspense,s=c.jsxs(a,{fallback:n,children:[!e.isServer&&c.jsx(xn,{}),c.jsx(Pn,{})]});return e.options.InnerWrap?c.jsx(e.options.InnerWrap,{children:s}):s}function Pn(){const e=zt(),t=Bt({select:e=>e.matches[0]?.id}),n=Bt({select:e=>e.loadedAt}),a=t?c.jsx(Cn,{matchId:t}):null;return c.jsx($t.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?a:c.jsx(bt,{getResetKey:()=>n,errorComponent:St,onCatch:e=>{e.message||e.toString()},children:a})})}class An extends pt{constructor(e){super(e)}}function Rn({router:e,children:t,...n}){Object.keys(n).length>0&&e.update({...e.options,...n,context:{...e.options.context,...n.context}});const a=Ot(),s=c.jsx(a.Provider,{value:e,children:t});return e.options.Wrap?c.jsx(e.options.Wrap,{children:s}):s}function Tn({router:e,...t}){return c.jsx(Rn,{router:e,...t,children:c.jsx(En,{})})}function Mn(e){return Bt({select:e=>e.location})}"undefined"!=typeof globalThis?(globalThis.createFileRoute=mn,globalThis.createLazyFileRoute=gn):"undefined"!=typeof window&&(window.createFileRoute=mn,window.createLazyFileRoute=gn);var Dn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ln={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Fn=new class{#e=Ln;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}};var In="undefined"==typeof window||"Deno"in globalThis;function On(){}function zn(e){return"number"==typeof e&&e>=0&&e!==1/0}function Bn(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $n(e,t){return"function"==typeof e?e(t):e}function Un(e,t){return"function"==typeof e?e(t):e}function Vn(e,t){const{type:n="all",exact:a,fetchStatus:s,predicate:r,queryKey:i,stale:o}=e;if(i)if(a){if(t.queryHash!==Hn(i,t.options))return!1}else if(!Kn(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!s||s===t.state.fetchStatus)&&!(r&&!r(t)))}function qn(e,t){const{exact:n,status:a,predicate:s,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(n){if(Gn(t.options.mutationKey)!==Gn(r))return!1}else if(!Kn(t.options.mutationKey,r))return!1}return(!a||t.state.status===a)&&!(s&&!s(t))}function Hn(e,t){return(t?.queryKeyHashFn||Gn)(e)}function Gn(e){return JSON.stringify(e,(e,t)=>Zn(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function Kn(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>Kn(e[n],t[n])))}var Wn=Object.prototype.hasOwnProperty;function Qn(e,t){if(e===t)return e;const n=Xn(e)&&Xn(t);if(!(n||Zn(e)&&Zn(t)))return t;const a=(n?e:Object.keys(e)).length,s=n?t:Object.keys(t),r=s.length,i=n?new Array(r):{};let o=0;for(let l=0;l<r;l++){const r=n?l:s[l],c=e[r],d=t[r];if(c===d){i[r]=c,(n?l<a:Wn.call(e,r))&&o++;continue}if(null===c||null===d||"object"!=typeof c||"object"!=typeof d){i[r]=d;continue}const u=Qn(c,d);i[r]=u,u===c&&o++}return a===r&&o===a?e:i}function Yn(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Xn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zn(e){if(!Jn(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!Jn(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Jn(e){return"[object Object]"===Object.prototype.toString.call(e)}function ea(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?Qn(e,t):t}function ta(e,t,n=0){const a=[...e,t];return n&&a.length>n?a.slice(1):a}function na(e,t,n=0){const a=[t,...e];return n&&a.length>n?a.slice(0,-1):a}var aa=Symbol();function sa(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==aa?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function ra(e,t){return"function"==typeof e?e(...t):!!e}var ia=new class extends Dn{#n;#a;#s;constructor(){super(),this.#s=e=>{if(!In&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#a||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#a?.(),this.#a=void 0)}setEventListener(e){this.#s=e,this.#a?.(),this.#a=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#n!==e&&(this.#n=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#n?this.#n:"hidden"!==globalThis.document?.visibilityState}};function oa(){let e,t;const n=new Promise((n,a)=>{e=n,t=a});function a(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{a({status:"fulfilled",value:t}),e(t)},n.reject=e=>{a({status:"rejected",reason:e}),t(e)},n}function la(e){return e}function ca(e){return{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}}function da(e,t,n){return{dehydratedAt:Date.now(),state:{...e.state,...void 0!==e.state.data&&{data:t(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,..."pending"===e.state.status&&{promise:(()=>{const a=e.promise?.then(t).catch(e=>n(e)?Promise.reject(new Error("redacted")):Promise.reject(e));return a?.catch(On),a})()},...e.meta&&{meta:e.meta}}}function ua(e){return e.state.isPaused}function ha(e){return"success"===e.state.status}function ma(e){return!0}function pa(e,t={}){const n=t.shouldDehydrateMutation??e.getDefaultOptions().dehydrate?.shouldDehydrateMutation??ua,a=e.getMutationCache().getAll().flatMap(e=>n(e)?[ca(e)]:[]),s=t.shouldDehydrateQuery??e.getDefaultOptions().dehydrate?.shouldDehydrateQuery??ha,r=t.shouldRedactErrors??e.getDefaultOptions().dehydrate?.shouldRedactErrors??ma,i=t.serializeData??e.getDefaultOptions().dehydrate?.serializeData??la;return{mutations:a,queries:e.getQueryCache().getAll().flatMap(e=>s(e)?[da(e,i,r)]:[])}}function fa(e,t,n){if("object"!=typeof t||null===t)return;const a=e.getMutationCache(),s=e.getQueryCache(),r=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??la,i=t.mutations||[],o=t.queries||[];i.forEach(({state:t,...s})=>{a.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...s},t)}),o.forEach(({queryKey:t,state:a,queryHash:i,meta:o,promise:l,dehydratedAt:c})=>{const d=l?function(e){let t;if(e.then(e=>(t=e,e),On)?.catch(On),void 0!==t)return{data:t}}(l):void 0,u=void 0===a.data?d?.data:a.data,h=void 0===u?u:r(u);let m=s.get(i);const p="pending"===m?.state.status,f="fetching"===m?.state.fetchStatus;if(m){const e=d&&void 0!==c&&c>m.state.dataUpdatedAt;if(a.dataUpdatedAt>m.state.dataUpdatedAt||e){const{fetchStatus:e,...t}=a;m.setState({...t,data:h})}}else m=s.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:t,queryHash:i,meta:o},{...a,data:h,fetchStatus:"idle",status:void 0!==h?"success":a.status});l&&!p&&!f&&(void 0===c||c>m.state.dataUpdatedAt)&&m.fetch(void 0,{initialPromise:Promise.resolve(l).then(r)}).catch(On)})}var ga=function(e){setTimeout(e,0)};var xa=function(){let e=[],t=0,n=e=>{e()},a=e=>{e()},s=ga;const r=a=>{t?e.push(a):s(()=>{n(a)})};return{batch:r=>{let i;t++;try{i=r()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{a(()=>{t.forEach(e=>{n(e)})})})})()}return i},batchCalls:e=>(...t)=>{r(()=>{e(...t)})},schedule:r,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{a=e},setScheduler:e=>{s=e}}}(),va=new class extends Dn{#r=!0;#a;#s;constructor(){super(),this.#s=e=>{if(!In&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#a||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#a?.(),this.#a=void 0)}setEventListener(e){this.#s=e,this.#a?.(),this.#a=e(this.setOnline.bind(this))}setOnline(e){this.#r!==e&&(this.#r=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#r}};function ya(e){return Math.min(1e3*2**e,3e4)}function ba(e){return"online"!==(e??"online")||va.isOnline()}var wa=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Sa(e){let t,n=!1,a=0;const s=oa(),r=()=>"pending"!==s.status,i=()=>ia.isFocused()&&("always"===e.networkMode||va.isOnline())&&e.canRun(),o=()=>ba(e.networkMode)&&e.canRun(),l=e=>{r()||(t?.(),s.resolve(e))},c=e=>{r()||(t?.(),s.reject(e))},d=()=>new Promise(n=>{t=e=>{(r()||i())&&n(e)},e.onPause?.()}).then(()=>{t=void 0,r()||e.onContinue?.()}),u=()=>{if(r())return;let t;const s=0===a?e.initialPromise:void 0;try{t=s??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{if(r())return;const s=e.retry??(In?0:3),o=e.retryDelay??ya,l="function"==typeof o?o(a,t):o,h=!0===s||"number"==typeof s&&a<s||"function"==typeof s&&s(a,t);var m;!n&&h?(a++,e.onFail?.(a,t),(m=l,new Promise(e=>{Fn.setTimeout(e,m)})).then(()=>i()?void 0:d()).then(()=>{n?c(t):u()})):c(t)})};return{promise:s,status:()=>s.status,cancel:t=>{if(!r()){const n=new wa(t);c(n),e.onCancel?.(n)}},continue:()=>(t?.(),s),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),s)}}var ja=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zn(this.gcTime)&&(this.#i=Fn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(In?1/0:3e5))}clearGcTimeout(){this.#i&&(Fn.clearTimeout(this.#i),this.#i=void 0)}},Ca=class extends ja{#o;#l;#c;#d;#u;#h;#m;constructor(e){super(),this.#m=!1,this.#h=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#d=e.client,this.#c=this.#d.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#o=_a(this.options),this.state=e.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#u?.promise}setOptions(e){if(this.options={...this.#h,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=_a(this.options);void 0!==e.data&&(this.setState(Na(e.data,e.dataUpdatedAt)),this.#o=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#c.remove(this)}setData(e,t){const n=ea(this.state.data,e,this.options);return this.#p({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#p({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#u?.promise;return this.#u?.cancel(e),t?t.then(On).catch(On):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some(e=>!1!==Un(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aa||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===$n(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!Bn(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#u?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#u?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#c.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#u&&(this.#m?this.#u.cancel({revert:!0}):this.#u.cancelRetry()),this.scheduleGc()),this.#c.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#p({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#u?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#u)return this.#u.continueRetry(),this.#u.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const n=new AbortController,a=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#m=!0,n.signal)})},s=()=>{const e=sa(this.options,t),n=(()=>{const e={client:this.#d,queryKey:this.queryKey,meta:this.meta};return a(e),e})();return this.#m=!1,this.options.persister?this.options.persister(e,n,this):e(n)},r=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#d,state:this.state,fetchFn:s};return a(e),e})();this.options.behavior?.onFetch(r,this),this.#l=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===r.fetchOptions?.meta||this.#p({type:"fetch",meta:r.fetchOptions?.meta}),this.#u=Sa({initialPromise:t?.initialPromise,fn:r.fetchFn,onCancel:e=>{e instanceof wa&&e.revert&&this.setState({...this.#l,fetchStatus:"idle"}),n.abort()},onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:()=>{this.#p({type:"continue"})},retry:r.options.retry,retryDelay:r.options.retryDelay,networkMode:r.options.networkMode,canRun:()=>!0});try{const e=await this.#u.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#c.config.onSuccess?.(e,this),this.#c.config.onSettled?.(e,this.state.error,this),e}catch(i){if(i instanceof wa){if(i.silent)return this.#u.promise;if(i.revert){if(void 0===this.state.data)throw i;return this.state.data}}throw this.#p({type:"error",error:i}),this.#c.config.onError?.(i,this),this.#c.config.onSettled?.(this.state.data,i,this),i}finally{this.scheduleGc()}}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...ka(t.data,this.options),fetchMeta:e.meta??null};case"success":const n={...t,...Na(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#l=e.manual?n:void 0,n;case"error":const a=e.error;return{...t,error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),xa.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#c.notify({query:this,type:"updated",action:e})})}};function ka(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ba(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function Na(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _a(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,a=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ea=class extends Dn{constructor(e,t){super(),this.options=t,this.#d=e,this.#f=null,this.#g=oa(),this.bindMethods(),this.setOptions(t)}#d;#x=void 0;#v=void 0;#y=void 0;#b;#w;#g;#f;#S;#j;#C;#k;#N;#_;#E=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#x.addObserver(this),Pa(this.#x,this.options)?this.#P():this.updateResult(),this.#A())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Aa(this.#x,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Aa(this.#x,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#R(),this.#T(),this.#x.removeObserver(this)}setOptions(e){const t=this.options,n=this.#x;if(this.options=this.#d.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof Un(this.options.enabled,this.#x))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#M(),this.#x.setOptions(this.options),t._defaulted&&!Yn(this.options,t)&&this.#d.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#x,observer:this});const a=this.hasListeners();a&&Ra(this.#x,n,this.options,t)&&this.#P(),this.updateResult(),!a||this.#x===n&&Un(this.options.enabled,this.#x)===Un(t.enabled,this.#x)&&$n(this.options.staleTime,this.#x)===$n(t.staleTime,this.#x)||this.#D();const s=this.#L();!a||this.#x===n&&Un(this.options.enabled,this.#x)===Un(t.enabled,this.#x)&&s===this.#_||this.#F(s)}getOptimisticResult(e){const t=this.#d.getQueryCache().build(this.#d,e),n=this.createResult(t,e);return function(e,t){if(!Yn(e.getCurrentResult(),t))return!0;return!1}(this,n)&&(this.#y=n,this.#w=this.options,this.#b=this.#x.state),n}getCurrentResult(){return this.#y}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),t?.(n),"promise"===n&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#g.status||this.#g.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,n))})}trackProp(e){this.#E.add(e)}getCurrentQuery(){return this.#x}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#d.defaultQueryOptions(e),n=this.#d.getQueryCache().build(this.#d,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#P({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#y))}#P(e){this.#M();let t=this.#x.fetch(this.options,e);return e?.throwOnError||(t=t.catch(On)),t}#D(){this.#R();const e=$n(this.options.staleTime,this.#x);if(In||this.#y.isStale||!zn(e))return;const t=Bn(this.#y.dataUpdatedAt,e)+1;this.#k=Fn.setTimeout(()=>{this.#y.isStale||this.updateResult()},t)}#L(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#x):this.options.refetchInterval)??!1}#F(e){this.#T(),this.#_=e,!In&&!1!==Un(this.options.enabled,this.#x)&&zn(this.#_)&&0!==this.#_&&(this.#N=Fn.setInterval(()=>{(this.options.refetchIntervalInBackground||ia.isFocused())&&this.#P()},this.#_))}#A(){this.#D(),this.#F(this.#L())}#R(){this.#k&&(Fn.clearTimeout(this.#k),this.#k=void 0)}#T(){this.#N&&(Fn.clearInterval(this.#N),this.#N=void 0)}createResult(e,t){const n=this.#x,a=this.options,s=this.#y,r=this.#b,i=this.#w,o=e!==n?e.state:this.#v,{state:l}=e;let c,d={...l},u=!1;if(t._optimisticResults){const s=this.hasListeners(),r=!s&&Pa(e,t),i=s&&Ra(e,n,t,a);(r||i)&&(d={...d,...ka(l.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:m,status:p}=d;c=d.data;let f=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===p){let e;s?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(e=s.data,f=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#C?.state.data,this.#C):t.placeholderData,void 0!==e&&(p="success",c=ea(s?.data,e,t),u=!0)}if(t.select&&void 0!==c&&!f)if(s&&c===r?.data&&t.select===this.#S)c=this.#j;else try{this.#S=t.select,c=t.select(c),c=ea(s?.data,c,t),this.#j=c,this.#f=null}catch(S){this.#f=S}this.#f&&(h=this.#f,c=this.#j,m=Date.now(),p="error");const g="fetching"===d.fetchStatus,x="pending"===p,v="error"===p,y=x&&g,b=void 0!==c,w={status:p,fetchStatus:d.fetchStatus,isPending:x,isSuccess:"success"===p,isError:v,isInitialLoading:y,isLoading:y,data:c,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>o.dataUpdateCount||d.errorUpdateCount>o.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:v&&!b,isPaused:"paused"===d.fetchStatus,isPlaceholderData:u,isRefetchError:v&&b,isStale:Ta(e,t),refetch:this.refetch,promise:this.#g,isEnabled:!1!==Un(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},a=()=>{const e=this.#g=w.promise=oa();t(e)},s=this.#g;switch(s.status){case"pending":e.queryHash===n.queryHash&&t(s);break;case"fulfilled":"error"!==w.status&&w.data===s.value||a();break;case"rejected":"error"===w.status&&w.error===s.reason||a()}}return w}updateResult(){const e=this.#y,t=this.createResult(this.#x,this.options);if(this.#b=this.#x.state,this.#w=this.options,void 0!==this.#b.data&&(this.#C=this.#x),Yn(t,e))return;this.#y=t;this.#I({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!this.#E.size)return!0;const a=new Set(n??this.#E);return this.options.throwOnError&&a.add("error"),Object.keys(this.#y).some(t=>{const n=t;return this.#y[n]!==e[n]&&a.has(n)})})()})}#M(){const e=this.#d.getQueryCache().build(this.#d,this.options);if(e===this.#x)return;const t=this.#x;this.#x=e,this.#v=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#A()}#I(e){xa.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#y)}),this.#d.getQueryCache().notify({query:this.#x,type:"observerResultsUpdated"})})}};function Pa(e,t){return function(e,t){return!1!==Un(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Aa(e,t,t.refetchOnMount)}function Aa(e,t,n){if(!1!==Un(t.enabled,e)&&"static"!==$n(t.staleTime,e)){const a="function"==typeof n?n(e):n;return"always"===a||!1!==a&&Ta(e,t)}return!1}function Ra(e,t,n,a){return(e!==t||!1===Un(a.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&Ta(e,n)}function Ta(e,t){return!1!==Un(t.enabled,e)&&e.isStaleByTime($n(t.staleTime,e))}function Ma(e){return{onFetch:(t,n)=>{const a=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,r=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let n=!1;const c=e=>{!function(e,t,n){let a,s=!1;Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??=t(),s||(s=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)})}(e,()=>t.signal,()=>n=!0)},d=sa(t.options,t.fetchOptions),u=async(e,a,s)=>{if(n)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const r=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:s?"backward":"forward",meta:t.options.meta};return c(e),e})(),i=await d(r),{maxPages:o}=t.options,l=s?na:ta;return{pages:l(e.pages,i,o),pageParams:l(e.pageParams,a,o)}};if(s&&r.length){const e="backward"===s,t={pages:r,pageParams:i},n=(e?La:Da)(a,t);o=await u(t,n,e)}else{const t=e??r.length;do{const e=0===l?i[0]??a.initialPageParam:Da(a,o);if(l>0&&null==e)break;o=await u(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function Da(e,{pages:t,pageParams:n}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,n[a],n):void 0}function La(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Fa=class extends ja{#d;#O;#z;#u;constructor(e){super(),this.#d=e.client,this.mutationId=e.mutationId,this.#z=e.mutationCache,this.#O=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#O.includes(e)||(this.#O.push(e),this.clearGcTimeout(),this.#z.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#O=this.#O.filter(t=>t!==e),this.scheduleGc(),this.#z.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#O.length||("pending"===this.state.status?this.scheduleGc():this.#z.remove(this))}continue(){return this.#u?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#p({type:"continue"})},n={client:this.#d,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#u=Sa({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#z.canRun(this)});const a="pending"===this.state.status,s=!this.#u.canStart();try{if(a)t();else{this.#p({type:"pending",variables:e,isPaused:s}),await(this.#z.config.onMutate?.(e,this,n));const t=await(this.options.onMutate?.(e,n));t!==this.state.context&&this.#p({type:"pending",context:t,variables:e,isPaused:s})}const r=await this.#u.start();return await(this.#z.config.onSuccess?.(r,e,this.state.context,this,n)),await(this.options.onSuccess?.(r,e,this.state.context,n)),await(this.#z.config.onSettled?.(r,null,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(r,null,e,this.state.context,n)),this.#p({type:"success",data:r}),r}catch(r){try{await(this.#z.config.onError?.(r,e,this.state.context,this,n))}catch(i){Promise.reject(i)}try{await(this.options.onError?.(r,e,this.state.context,n))}catch(i){Promise.reject(i)}try{await(this.#z.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this,n))}catch(i){Promise.reject(i)}try{await(this.options.onSettled?.(void 0,r,e,this.state.context,n))}catch(i){Promise.reject(i)}throw this.#p({type:"error",error:r}),r}finally{this.#z.runNext(this)}}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),xa.batch(()=>{this.#O.forEach(t=>{t.onMutationUpdate(e)}),this.#z.notify({mutation:this,type:"updated",action:e})})}};var Ia=class extends Dn{constructor(e={}){super(),this.config=e,this.#B=new Set,this.#$=new Map,this.#U=0}#B;#$;#U;build(e,t,n){const a=new Fa({client:e,mutationCache:this,mutationId:++this.#U,options:e.defaultMutationOptions(t),state:n});return this.add(a),a}add(e){this.#B.add(e);const t=Oa(e);if("string"==typeof t){const n=this.#$.get(t);n?n.push(e):this.#$.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#B.delete(e)){const t=Oa(e);if("string"==typeof t){const n=this.#$.get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#$.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Oa(e);if("string"==typeof t){const n=this.#$.get(t),a=n?.find(e=>"pending"===e.state.status);return!a||a===e}return!0}runNext(e){const t=Oa(e);if("string"==typeof t){const n=this.#$.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}return Promise.resolve()}clear(){xa.batch(()=>{this.#B.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#B.clear(),this.#$.clear()})}getAll(){return Array.from(this.#B)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>qn(t,e))}findAll(e={}){return this.getAll().filter(t=>qn(e,t))}notify(e){xa.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return xa.batch(()=>Promise.all(e.map(e=>e.continue().catch(On))))}};function Oa(e){return e.options.scope?.id}var za=class extends Dn{#d;#y=void 0;#V;#q;constructor(e,t){super(),this.#d=e,this.setOptions(t),this.bindMethods(),this.#H()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#d.defaultMutationOptions(e),Yn(this.options,t)||this.#d.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#V,observer:this}),t?.mutationKey&&this.options.mutationKey&&Gn(t.mutationKey)!==Gn(this.options.mutationKey)?this.reset():"pending"===this.#V?.state.status&&this.#V.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#V?.removeObserver(this)}onMutationUpdate(e){this.#H(),this.#I(e)}getCurrentResult(){return this.#y}reset(){this.#V?.removeObserver(this),this.#V=void 0,this.#H(),this.#I()}mutate(e,t){return this.#q=t,this.#V?.removeObserver(this),this.#V=this.#d.getMutationCache().build(this.#d,this.options),this.#V.addObserver(this),this.#V.execute(e)}#H(){const e=this.#V?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#y={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#I(e){xa.batch(()=>{if(this.#q&&this.hasListeners()){const n=this.#y.variables,a=this.#y.context,s={client:this.#d,meta:this.options.meta,mutationKey:this.options.mutationKey};if("success"===e?.type){try{this.#q.onSuccess?.(e.data,n,a,s)}catch(t){Promise.reject(t)}try{this.#q.onSettled?.(e.data,null,n,a,s)}catch(t){Promise.reject(t)}}else if("error"===e?.type){try{this.#q.onError?.(e.error,n,a,s)}catch(t){Promise.reject(t)}try{this.#q.onSettled?.(void 0,e.error,n,a,s)}catch(t){Promise.reject(t)}}}this.listeners.forEach(e=>{e(this.#y)})})}},Ba=class extends Dn{constructor(e={}){super(),this.config=e,this.#G=new Map}#G;build(e,t,n){const a=t.queryKey,s=t.queryHash??Hn(a,t);let r=this.get(s);return r||(r=new Ca({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(r)),r}add(e){this.#G.has(e.queryHash)||(this.#G.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#G.get(e.queryHash);t&&(e.destroy(),t===e&&this.#G.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){xa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#G.get(e)}getAll(){return[...this.#G.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>Vn(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>Vn(e,t)):t}notify(e){xa.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){xa.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){xa.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$a=class{#K;#z;#h;#W;#Q;#Y;#X;#Z;constructor(e={}){this.#K=e.queryCache||new Ba,this.#z=e.mutationCache||new Ia,this.#h=e.defaultOptions||{},this.#W=new Map,this.#Q=new Map,this.#Y=0}mount(){this.#Y++,1===this.#Y&&(this.#X=ia.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#K.onFocus())}),this.#Z=va.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#K.onOnline())}))}unmount(){this.#Y--,0===this.#Y&&(this.#X?.(),this.#X=void 0,this.#Z?.(),this.#Z=void 0)}isFetching(e){return this.#K.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#z.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#K.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#K.build(this,t),a=n.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime($n(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#K.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const a=this.defaultQueryOptions({queryKey:e}),s=this.#K.get(a.queryHash),r=s?.state.data,i=function(e,t){return"function"==typeof e?e(t):e}(t,r);if(void 0!==i)return this.#K.build(this,a).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return xa.batch(()=>this.#K.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#K.get(t.queryHash)?.state}removeQueries(e){const t=this.#K;xa.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=this.#K;return xa.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},a=xa.batch(()=>this.#K.findAll(e).map(e=>e.cancel(n)));return Promise.all(a).then(On).catch(On)}invalidateQueries(e,t={}){return xa.batch(()=>(this.#K.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},a=xa.batch(()=>this.#K.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(On)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(a).then(On)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=this.#K.build(this,t);return n.isStaleByTime($n(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(On).catch(On)}fetchInfiniteQuery(e){return e.behavior=Ma(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(On).catch(On)}ensureInfiniteQueryData(e){return e.behavior=Ma(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return va.isOnline()?this.#z.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#K}getMutationCache(){return this.#z}getDefaultOptions(){return this.#h}setDefaultOptions(e){this.#h=e}setQueryDefaults(e,t){this.#W.set(Gn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#W.values()],n={};return t.forEach(t=>{Kn(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#Q.set(Gn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#Q.values()],n={};return t.forEach(t=>{Kn(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#h.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Hn(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===aa&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#h.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#K.clear(),this.#z.clear()}},Ua=p.createContext(void 0),Va=e=>{const t=p.useContext(Ua);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},qa=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(Ua.Provider,{value:e,children:t})),Ha=p.createContext(!1),Ga=Ha.Provider;var Ka=p.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Wa=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Qa(e,t,n){const a=p.useContext(Ha),s=p.useContext(Ka),r=Va(),i=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(i);const o=r.getQueryCache().get(i.queryHash);i._optimisticResults=a?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,n=e=>"static"===e?e:Math.max(e??t,t),a=e.staleTime;e.staleTime="function"==typeof a?(...e)=>n(a(...e)):n(a),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(i),((e,t,n)=>{const a=n?.state.error&&"function"==typeof e.throwOnError?ra(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||a)&&(t.isReset()||(e.retryOnMount=!1))})(i,s,o),(e=>{p.useEffect(()=>{e.clearReset()},[e])})(s);const l=!r.getQueryCache().get(i.queryHash),[c]=p.useState(()=>new t(r,i)),d=c.getOptimisticResult(i),u=!a&&!1!==e.subscribed;if(p.useSyncExternalStore(p.useCallback(e=>{const t=u?c.subscribe(xa.batchCalls(e)):On;return c.updateResult(),t},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(i)},[i,c]),((e,t)=>e?.suspense&&t.isPending)(i,d))throw Wa(i,c,s);if((({result:e,errorResetBoundary:t,throwOnError:n,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&void 0===e.data||ra(n,[e.error,a])))({result:d,errorResetBoundary:s,throwOnError:i.throwOnError,query:o,suspense:i.suspense}))throw d.error;if(r.getDefaultOptions().queries?._experimental_afterQuery?.(i,d),i.experimental_prefetchInRender&&!In&&((e,t)=>e.isLoading&&e.isFetching&&!t)(d,a)){const e=l?Wa(i,c,s):o?.promise;e?.catch(On).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function Ya(e,t){return Qa(e,Ea)}function Xa(e,t){const n=Va(),[a]=p.useState(()=>new za(n,e));p.useEffect(()=>{a.setOptions(e)},[a,e]);const s=p.useSyncExternalStore(p.useCallback(e=>a.subscribe(xa.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),r=p.useCallback((e,t)=>{a.mutate(e,t).catch(On)},[a]);if(s.error&&ra(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:r,mutateAsync:s.mutate}}const Za={},Ja=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),s=n?.nonce||n?.getAttribute("nonce");a=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in Za)return;Za[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};var es=function(){return null};function ts(e){try{const t=e.split(".");if(3!==t.length)return null;const n=t[1].replace(/-/g,"+").replace(/_/g,"/"),a=n+"=".repeat((4-n.length%4)%4),s=atob(a);return JSON.parse(s)}catch(t){return null}}function ns(e){const t=ts(e);return t&&t.exp?new Date(1e3*t.exp):null}function as(e,t=0){const n=ns(e);if(!n)return!0;return new Date>=new Date(n.getTime()-1e3*t)}function ss(e){const t=ns(e);if(!t)return null;const n=new Date,a=t.getTime()-n.getTime();return a>0?a:null}const rs={};class is{memoryCache=new Map;handlers=new Map;queryClient=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;setQueryClient(e){this.queryClient=e}register(e){switch(e.type){case"localStorage":break;case"memory":this.memoryCache.set(e.key,e)}}get(e,t="localStorage"){switch(t){case"localStorage":{const n=Gs.get(`cache:${e}`);if(!n)return null;if(n.timestamp&&n.ttl){if(Date.now()-n.timestamp>n.ttl)return this.remove(e,t),null}return n.value??null}case"memory":{const n=this.memoryCache.get(e);if(!n)return null;if(n.timestamp&&n.ttl){if(Date.now()-n.timestamp>n.ttl)return this.remove(e,t),null}return n.value}case"react-query":if(!this.queryClient)return null;return this.queryClient.getQueryData(e.split(":"))??null}}set(e,t,n="localStorage",a){const s={key:e,type:n,value:t,timestamp:Date.now(),ttl:a};switch(n){case"localStorage":Gs.set(`cache:${e}`,s);break;case"memory":this.memoryCache.set(e,s);break;case"react-query":if(this.queryClient){const n=e.includes(":")?e.split(":"):[e];this.queryClient.setQueryData(n,t)}}}remove(e,t){t?this.removeByType(e,t):(this.removeByType(e,"localStorage"),this.removeByType(e,"memory"),this.removeByType(e,"react-query"))}removeByType(e,t){switch(t){case"localStorage":Gs.remove(`cache:${e}`);break;case"memory":this.memoryCache.delete(e);break;case"react-query":if(this.queryClient){const t=e.includes(":")?e.split(":"):[e];this.queryClient.removeQueries({queryKey:t})}}}clear(e,t){e?this.clearByPattern(e,t):this.clearAll()}clearByPattern(e,t){const n="string"==typeof e?new RegExp(e.replace("*",".*")):e;(t?[t]:["localStorage","memory","react-query"]).forEach(e=>{switch(e){case"localStorage":{const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);a?.startsWith("cache:")&&n.test(a)&&e.push(a)}e.forEach(e=>{const t=e.replace("cache:","");this.remove(t,"localStorage")});break}case"memory":{const e=[];this.memoryCache.forEach((t,a)=>{n.test(a)&&e.push(a)}),e.forEach(e=>this.remove(e,"memory"));break}case"react-query":this.queryClient&&this.queryClient.removeQueries({predicate:e=>{const t=Array.isArray(e.queryKey)?e.queryKey.join(":"):String(e.queryKey);return n.test(t)}})}})}clearAll(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n?.startsWith("cache:")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),this.memoryCache.clear(),this.queryClient&&this.queryClient.clear()}onInvalidate(e,t){return this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),()=>{const n=this.handlers.get(e);if(n){const a=n.indexOf(t);a>-1&&n.splice(a,1),0===n.length&&this.handlers.delete(e)}}}async handleInvalidation(e){if(e.cacheKey){this.remove(e.cacheKey,e.cacheType);const t=this.handlers.get(e.cacheKey)||[];for(const n of t)await n(e)}if(e.cachePattern){this.clear(e.cachePattern,e.cacheType);const t=new RegExp(e.cachePattern.replace("*",".*"));for(const[n,a]of this.handlers.entries())if(t.test(n)||t.test(e.cachePattern))for(const t of a)await t(e)}e.cacheKey||e.cachePattern||"global"===e.scope&&this.clearAll()}connect(e){if(this.isConnected)return;"true"===rs?.VITE_ENABLE_CACHE_BROADCAST&&setTimeout(()=>{this.connectWebSocket(e)},0)}connectWebSocket(e){const t=e||`${rs?.VITE_API_BASE_URL||"http://localhost:8000"}/ws/cache-invalidate`.replace("http://","ws://").replace("https://","wss://");try{const n=new WebSocket(t);let a=!0;const s=setTimeout(()=>{this.isConnected||(a=!1)},1e3);n.onopen=()=>{clearTimeout(s),a=!1,this.isConnected=!0,this.reconnectAttempts=0},n.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleInvalidation(t)}catch(t){}},n.onerror=()=>{this.isConnected=!1,clearTimeout(s),0===this.reconnectAttempts&&a&&setTimeout(()=>this.connectSSE(e),100)},n.onclose=e=>{clearTimeout(s),this.isConnected=!1,1006===e.code&&0===this.reconnectAttempts&&a||this.reconnectAttempts>0&&this.reconnectAttempts<this.maxReconnectAttempts&&this.attemptReconnect()}}catch(n){this.connectSSE(e)}}connectSSE(e){const t=e||`${rs?.VITE_API_BASE_URL||"http://localhost:8000"}/api/v1/cache/invalidate/stream`;try{const e=new EventSource(t);let n=!1;const a=setTimeout(()=>{n||(e.close(),this.isConnected=!1)},2e3);e.onopen=()=>{clearTimeout(a),n=!0,this.isConnected=!0,this.reconnectAttempts=0},e.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleInvalidation(t)}catch(t){}},e.onerror=()=>{clearTimeout(a),this.isConnected=!1,(n||0!==this.reconnectAttempts)&&n&&this.reconnectAttempts<this.maxReconnectAttempts?(e.close(),this.attemptReconnect()):e.close()}}catch(n){this.isConnected=!1}}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.reconnectAttempts<=this.maxReconnectAttempts&&this.connect()},e)}disconnect(){this.isConnected=!1}getStats(){let e=0;for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n?.startsWith("cache:")&&e++}return{memoryCacheSize:this.memoryCache.size,localStorageCacheSize:e,isConnected:this.isConnected}}}const os=new is,ls=Object.freeze(Object.defineProperty({__proto__:null,CacheManager:is,cacheManager:os},Symbol.toStringTag,{value:"Module"})),cs={SESSION_CONFIG:"session:config",AUTH_TOKEN:"auth:token",REFRESH_TOKEN:"auth:refresh_token",USER_PROFILE:"user:profile",USERS_LIST:"users:list",USER_DETAIL:"user:detail",USER_ACTIVITY:"user:activity",REACT_QUERY_CACHE:"react-query:cache",APP_TABS:"app:tabs",SCROLL_POSITIONS:"app:scroll:positions",COMMAND_PALETTE_RECENT:"ui:command-palette:recent",THEME:"app:theme",LOCALE:"app:locale",USER_PREFERENCES:"user:preferences"},ds={ALL_SESSION:"session:*",ALL_USERS:"users:*",ALL_USER_DETAILS:"user:detail:*",ALL_USER_ACTIVITY:"user:activity:*",ALL_AUTH:"auth:*",ALL_UI:"ui:*"},us=[{key:cs.SESSION_CONFIG,type:"localStorage",ttl:36e5,description:"Session configuration from server",invalidateOn:[ds.ALL_SESSION,"auth:logout"]},{key:cs.USERS_LIST,type:"react-query",description:"List of users",invalidateOn:["users:create","users:update","users:delete"]},{key:cs.USER_DETAIL,type:"react-query",description:"Individual user details",invalidateOn:["user:update","user:delete"]},{key:cs.USER_ACTIVITY,type:"react-query",description:"User activity logs",invalidateOn:["user:update","user:activity:new"]},{key:cs.REACT_QUERY_CACHE,type:"localStorage",description:"React Query persisted cache",invalidateOn:["auth:logout","auth:login"]},{key:cs.APP_TABS,type:"localStorage",description:"Open tabs state",invalidateOn:["auth:logout"]},{key:cs.SCROLL_POSITIONS,type:"localStorage",description:"Scroll positions",invalidateOn:["auth:logout"]},{key:cs.COMMAND_PALETTE_RECENT,type:"localStorage",description:"Command palette recent searches",invalidateOn:["auth:logout"]},{key:cs.USER_PREFERENCES,type:"localStorage",ttl:31536e6,description:"User preferences (UI settings, data display preferences, etc.)"}];function hs(){us.forEach(e=>{os.register({key:e.key,type:e.type,ttl:e.ttl,invalidateOn:e.invalidateOn})}),os.onInvalidate("auth:logout",async e=>{if(os.clear(ds.ALL_SESSION),os.clear(ds.ALL_AUTH),os.clear(ds.ALL_USERS),os.clear(ds.ALL_USER_DETAILS),os.clear(ds.ALL_USER_ACTIVITY),os.clear(ds.ALL_UI),"react-query"===e.cacheType||!e.cacheType){const{cacheManager:e}=await Ja(async()=>{const{cacheManager:e}=await Promise.resolve().then(()=>ls);return{cacheManager:e}},void 0);e.queryClient&&e.queryClient.clear()}}),os.onInvalidate("user:update",async e=>{const t=e.metadata?.userId;t&&(os.remove(`${cs.USER_DETAIL}:${t}`),os.remove(`${cs.USER_ACTIVITY}:${t}`)),os.clear(ds.ALL_USERS)}),os.onInvalidate("users:create",async()=>{os.clear(ds.ALL_USERS)}),os.onInvalidate("users:delete",async e=>{const t=e.metadata?.userId;t&&(os.remove(`${cs.USER_DETAIL}:${t}`),os.remove(`${cs.USER_ACTIVITY}:${t}`)),os.clear(ds.ALL_USERS)})}const ms={BASE_URL:"http://localhost:8000",ENDPOINTS:{AUTH:{LOGIN:"/api/v1/auth/token"},USERS:{FETCH:"/api/v1/users"},ROLES:"/api/v1/roles",GROUPS:"/api/v1/groups",SALES:{CUSTOMERS:"/api/v1/sales/customers",BOOKINGS:"/api/v1/sales/bookings"},TICKETING:{VENUES:"/api/v1/ticketing/venues",EVENTS:"/api/v1/ticketing/events"}}},ps="en",fs={defaultOptions:{queries:{retry:3,staleTime:3e5,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}}},gs="auth_token",xs="refresh_token",vs="locale",ys="session_config";let bs=null,ws=null,Ss=!1,js=[];let Cs=null,ks=!1;function Ns(){Cs=Date.now()+3e3}function _s(e){ks=e}function Es(){if(!Cs)return!1;return!(Date.now()>Cs)||(Cs=null,!1)}function Ps(e){bs=e}function As(e){ws=e}const Rs=(e,t=null)=>{js.forEach(n=>{e?n.reject(e):n.resolve(t)}),js=[]};class Ts extends Error{constructor(e,t,n){super(Ts.parseErrorMessage(n||t)),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"statusText",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="ApiError",this.status=e,this.statusText=t,Object.defineProperty(this,"status",{enumerable:!0,value:e,writable:!1}),Object.defineProperty(this,"statusText",{enumerable:!0,value:t,writable:!1})}static parseErrorMessage(e){try{const t=JSON.parse(e);if(void 0!==t.detail&&null!==t.detail){const e=t.detail;if("string"==typeof e)return e;if(Array.isArray(e)){return e.map(e=>String(e&&"object"==typeof e&&"msg"in e?e.msg:e)).filter(Boolean).join(" ")||"Validation error"}}return t.message?t.message:t.error?.message?t.error.message:t.error?.detail?t.error.detail:e}catch{return e}}isAuthError(){return 401===this.status||403===this.status}isPermissionError(){return 403===this.status&&(this.message.includes("Permission")&&this.message.includes("required"))}toString(){return`${this.name} [${this.status} ${this.statusText}]: ${this.message}`}}let Ms=null,Ds=null;async function Ls(e,t={}){const{requiresAuth:n=!1,...a}=t,s=`${ms.BASE_URL}${e}`,r={...a.headers};if(a.body instanceof FormData||(r["Content-Type"]="application/json"),n){const e=Gs.get(gs);e&&(r.Authorization=`Bearer ${e}`)}const i=await fetch(s,{...a,headers:r});if(!i.ok){const a=await i.text(),s=["/api/v1/sessions/config"].some(t=>e.includes(t)),r=new Ts(i.status,i.statusText,a);if(!s||404!==i.status&&401!==i.status||(r._silent=!0),401===r.status&&n&&!Ss&&Ms){if(Gs.get(xs)){if(Ss)return new Promise((e,t)=>{js.push({resolve:e,reject:t})}).then(()=>Ls(e,t));Ss=!0;try{const n=await Ms();return Rs(null,n.access_token),Ss=!1,Ls(e,t)}catch(o){throw Rs(o,null),Ss=!1,Ds&&Ds(),!bs||Es()||ks||bs(),r}}else!bs||Es()||ks||bs()}throw 401!==r.status||!bs||Es()||ks||bs(),403!==r.status||r.isPermissionError()||!ws||Es()||ks||ws(r.message),r}if(204!==i.status)return i.json()}const Fs={get:(e,t)=>Ls(e,{...t,method:"GET"}),post:(e,t,n)=>Ls(e,{...n,method:"POST",body:JSON.stringify(t)}),patch:(e,t,n)=>Ls(e,{...n,method:"PATCH",body:JSON.stringify(t)}),put:(e,t,n)=>Ls(e,{...n,method:"PUT",body:JSON.stringify(t)}),delete:(e,t)=>Ls(e,{...t,method:"DELETE"}),postForm:(e,t,n)=>Ls(e,{...n,method:"POST",body:t})};async function Is(){return Fs.get("/api/v1/user-preferences/",{requiresAuth:!0})}class Os{CACHE_KEY=cs.USER_PREFERENCES;CACHE_TTL=31536e6;SYNC_METADATA_KEY=`${cs.USER_PREFERENCES}:metadata`;SYNC_DEBOUNCE_MS=2e3;MAX_BATCH_SIZE=10;syncTimeout=null;pendingChanges=new Set;isDirty=!1;isOnline="undefined"==typeof navigator||navigator.onLine;isInitialized=!1;syncInProgress=!1;constructor(){"undefined"!=typeof window&&(window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),window.addEventListener("beforeunload",()=>{this.isDirty&&this.isOnline&&this.syncNow(!0)}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.isDirty&&this.isOnline&&this.syncNow()}))}handleOnline(){this.isOnline=!0,this.isDirty&&this.syncNow().catch(e=>{})}handleOffline(){this.isOnline=!1,this.cancelPendingSync()}hasCache(){const e=os.get(this.CACHE_KEY,"localStorage");return null!==e&&Object.keys(e||{}).length>0}async initialize(e=!1){if(this.isInitialized&&!e)return;const t=this.hasCache();if(t&&!e)return this.isOnline&&this.syncToServerIfNeeded().catch(e=>{}),void(this.isInitialized=!0);if(this.isOnline)try{const e=await Is();if(e?.preferences){const t=e.preferences,n=this.getAll();if(this.isDirty&&Object.keys(n).length>0){const e=this.deepMerge(t,n);os.set(this.CACHE_KEY,e,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.scheduleSync()}else os.set(this.CACHE_KEY,t,"localStorage",this.CACHE_TTL),this.isDirty=!1,this.pendingChanges.clear();this.saveSyncMetadata()}else t||os.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL)}catch(n){t||os.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL)}else t||os.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL);this.isInitialized=!0}async syncToServerIfNeeded(){if(this.isOnline&&this.isDirty&&!this.syncInProgress)try{await this.syncNow()}catch(e){}}saveSyncMetadata(){const e={lastSync:Date.now(),isDirty:this.isDirty};os.set(this.SYNC_METADATA_KEY,e,"localStorage",this.CACHE_TTL)}getAll(){const e=os.get(this.CACHE_KEY,"localStorage");return e||this.isInitialized?e||{}:(os.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL),{})}async getAllFromBackend(){if(!this.isOnline)return this.getAll();try{const e=await Is();if(e?.preferences){const t=e.preferences,n=this.getAll();if(this.isDirty&&Object.keys(n).length>0){const e=this.deepMerge(t,n);return os.set(this.CACHE_KEY,e,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.scheduleSync(),e}return os.set(this.CACHE_KEY,t,"localStorage",this.CACHE_TTL),this.isDirty=!1,this.pendingChanges.clear(),this.saveSyncMetadata(),t}return this.getAll()}catch(e){return this.getAll()}}scheduleSync(){this.syncTimeout&&clearTimeout(this.syncTimeout),this.pendingChanges.size>=this.MAX_BATCH_SIZE?this.syncNow():this.syncTimeout=setTimeout(()=>{this.syncNow()},this.SYNC_DEBOUNCE_MS)}async syncNow(e=!1){if(this.syncTimeout&&(clearTimeout(this.syncTimeout),this.syncTimeout=null),this.isDirty&&0!==this.pendingChanges.size&&this.isOnline)if(this.syncInProgress)setTimeout(()=>this.syncNow(e),100);else{this.syncInProgress=!0;try{const e=this.getAll();await this.performSync(e),this.isDirty=!1,this.pendingChanges.clear(),this.saveSyncMetadata()}catch(t){t instanceof TypeError&&t.message.includes("fetch")&&(this.isOnline=!1)}finally{this.syncInProgress=!1}}}async performSync(e){await async function(e){return Fs.put("/api/v1/user-preferences/",{preferences:e},{requiresAuth:!0})}(e)}markDirty(e){this.isDirty=!0;const t=e.join(".");this.pendingChanges.add(t),this.scheduleSync()}get(...e){let t=this.getAll();for(const n of e){if(!t||"object"!=typeof t||!(n in t))return;t=t[n]}return t}set(e,t){const n=Array.isArray(e)?e:e.split("."),a=this.getAll();let s=a;for(let r=0;r<n.length-1;r++){const e=n[r];s[e]&&"object"==typeof s[e]||(s[e]={}),s=s[e]}s[n[n.length-1]]=t,os.set(this.CACHE_KEY,a,"localStorage",this.CACHE_TTL),this.markDirty(n)}async setAsync(e,t){const n=Array.isArray(e)?e:e.split("."),a=this.getAll();let s=a;for(let r=0;r<n.length-1;r++){const e=n[r];s[e]&&"object"==typeof s[e]||(s[e]={}),s=s[e]}s[n[n.length-1]]=t,os.set(this.CACHE_KEY,a,"localStorage",this.CACHE_TTL),this.markDirty(n),await this.syncNow()}remove(...e){if(0===e.length)return;const t=this.getAll();let n=t;for(let a=0;a<e.length-1;a++){const t=e[a];if(!n[t]||"object"!=typeof n[t])return;n=n[t]}delete n[e[e.length-1]],os.set(this.CACHE_KEY,t,"localStorage",this.CACHE_TTL),this.markDirty(e)}async removeAsync(...e){0!==e.length&&(this.remove(...e),await this.syncNow())}clear(){os.remove(this.CACHE_KEY,"localStorage"),this.isDirty=!0,this.pendingChanges.clear(),this.pendingChanges.add("*"),this.scheduleSync()}async clearAsync(){os.remove(this.CACHE_KEY,"localStorage"),this.isDirty=!0,this.pendingChanges.clear(),this.pendingChanges.add("*"),await this.syncNow()}update(e){const t=this.getAll(),n=this.deepMerge(t,e);os.set(this.CACHE_KEY,n,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.pendingChanges.add("*"),this.scheduleSync()}async updateAsync(e){const t=this.getAll(),n=this.deepMerge(t,e);os.set(this.CACHE_KEY,n,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.pendingChanges.add("*"),await this.syncNow()}deepMerge(e,t){const n={...e};for(const a in t)t[a]&&"object"==typeof t[a]&&!Array.isArray(t[a])?n[a]=this.deepMerge(e[a]||{},t[a]):n[a]=t[a];return n}getDataListView(e){return this.get("ui","dataListView",e)}setDataListView(e,t){this.set(["ui","dataListView",e],t)}async setDataListViewAsync(e,t){await this.setAsync(["ui","dataListView",e],t)}getStoreLocationView(){return this.get("ui","storeLocationView")}setStoreLocationView(e){this.set(["ui","storeLocationView"],e)}async setStoreLocationViewAsync(e){await this.setAsync(["ui","storeLocationView"],e)}async flush(){this.isOnline&&await this.syncNow()}isCurrentlyOnline(){return this.isOnline}clearCache(){os.remove(this.CACHE_KEY,"localStorage"),os.remove(this.SYNC_METADATA_KEY,"localStorage"),this.isDirty=!1,this.pendingChanges.clear(),this.isInitialized=!1,this.cancelPendingSync()}hasPendingChanges(){return this.isDirty&&this.pendingChanges.size>0}getPendingChangesCount(){return this.pendingChanges.size}cancelPendingSync(){this.syncTimeout&&(clearTimeout(this.syncTimeout),this.syncTimeout=null)}}const zs=new Os,Bs="ui-density";function $s(){const[e,t]=p.useState(()=>function(){if("undefined"==typeof window)return"normal";try{const e=localStorage.getItem(Bs);if(!e||"undefined"===e||"null"===e)return"normal";let t;try{t=JSON.parse(e)}catch{t=e}if("normal"===t||"compact"===t)return t}catch{}return"normal"}());return p.useEffect(()=>{const e=e=>{const n=e;if(n.detail?.density){const e=n.detail.density;"normal"!==e&&"compact"!==e||t(e)}},n=e=>{if(e.key===Bs&&e.newValue){let n;try{n=JSON.parse(e.newValue)}catch{n=e.newValue}"normal"!==n&&"compact"!==n||t(n)}};return window.addEventListener("density-preference-changed",e),window.addEventListener("storage",n),()=>{window.removeEventListener("density-preference-changed",e),window.removeEventListener("storage",n)}},[]),{density:e,isCompact:"compact"===e}}function Us(){const{isCompact:e}=$s();return{textSize:e?"text-xs":"text-sm",textSizeSmall:e?"text-xs":"text-sm",textSizeLabel:e?"text-xs":"text-sm",textSizeCardTitle:e?"text-lg":"text-2xl",textSizeCardDescription:e?"text-xs":"text-sm",inputHeight:e?"h-7":"h-10",searchInputHeight:e?"h-7":"h-10",buttonHeight:e?"h-7":"h-10",buttonHeightSmall:e?"h-7":"h-9",paddingContainer:e?"p-4":"p-6",paddingForm:e?"p-4":"p-6",paddingCell:e?"px-2":"px-3",paddingRow:e?"py-1":"py-2",paddingCard:e?"p-4":"p-6",paddingCardHeader:e?"p-4":"p-6",paddingCardContent:e?"p-4 pt-0":"p-6 pt-0",paddingCardFooter:e?"p-4 pt-0":"p-6 pt-0",gapForm:e?"gap-4":"gap-6",gapFormItem:e?"gap-1.5":"gap-2",gapButtonGroup:e?"gap-2":"gap-3",gapCard:e?"gap-2":"gap-3",spacingFormSection:e?"space-y-4":"space-y-6",spacingFormItem:e?"space-y-1.5":"space-y-2",spacingCard:e?"space-y-2":"space-y-3",iconSize:e?"h-3 w-3":"h-4 w-4",iconSizeSmall:e?"h-3 w-3":"h-3.5 w-3.5"}}function Vs(){const{isCompact:e}=$s();return e}const qs=(e,t="en-US")=>{const n="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"long",day:"numeric"}).format(n)};function Hs(){try{return"undefined"!=typeof window&&void 0!==window.localStorage&&null!==window.localStorage}catch{return!1}}const Gs={get:(e,t)=>{if(!Hs())return t??null;try{const n=window.localStorage.getItem(e);return n&&"undefined"!==n&&"null"!==n?JSON.parse(n):t??null}catch(n){try{window.localStorage.removeItem(e)}catch{}return t??null}},set:(e,t)=>{if(Hs())try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){}},remove:e=>{if(Hs())try{window.localStorage.removeItem(e)}catch(t){}},clear:()=>{if(Hs())try{window.localStorage.clear()}catch(e){}},removeMatching:e=>{if(Hs())try{const t="string"==typeof e?new RegExp(e):e,n=[];for(let e=0;e<window.localStorage.length;e++){const a=window.localStorage.key(e);a&&t.test(a)&&n.push(a)}n.forEach(e=>window.localStorage.removeItem(e))}catch(t){}}},Ks=Object.freeze(Object.defineProperty({__proto__:null,CACHE_KEYS:cs,CACHE_PATTERNS:ds,CacheManager:is,UserPreferencesManager:Os,cacheManager:os,decodeJWTPayload:ts,formatDate:qs,getTimeUntilExpiration:ss,getTokenExpiration:ns,initializeCacheRegistry:hs,isTokenExpired:as,storage:Gs,useDensity:$s,useDensityStyles:Us,useIsCompact:Vs,userPreferences:zs},Symbol.toStringTag,{value:"Module"})),Ws=p.createContext({theme:"system",resolvedTheme:"light",setTheme:()=>null}),Qs=e=>"undefined"==typeof window?"light":"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e,Ys=e=>{if("undefined"==typeof window)return;const t=window.document.documentElement;if(t.classList.remove("light","dark"),"system"===e){const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return void t.classList.add(e)}t.classList.add(e)};function Xs({children:e,defaultTheme:t="system",storageKey:n="ui-theme",...a}){const s=(()=>{if("undefined"==typeof window)return t;const e=Gs.get(n)||t;return Ys(e),e})(),[r,i]=p.useState(s),[o,l]=p.useState(()=>Qs(s));p.useLayoutEffect(()=>{Ys(r),l(Qs(r))},[r]),p.useEffect(()=>{if("system"!==r||"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{"system"===Gs.get(n)&&(Ys("system"),l(Qs("system")))};return e.addEventListener?e.addEventListener("change",t):e.addListener(t),()=>{e.removeEventListener?e.removeEventListener("change",t):e.removeListener(t)}},[r,n]);const d={theme:r,resolvedTheme:o,setTheme:e=>{Gs.set(n,e),Ys(e),i(e)}};return c.jsx(Ws.Provider,{...a,value:d,children:e})}const Zs=p.createContext({density:"normal",setDensity:()=>null});function Js({children:e,defaultDensity:t="normal",storageKey:n="ui-density",...a}){const[s,r]=p.useState(()=>Gs.get(n)||t);p.useEffect(()=>{const e=e=>{const t=e;if(t.detail?.density){const e=t.detail.density;"normal"!==e&&"compact"!==e||e===s||r(e)}},t=e=>{if(e.key===n&&e.newValue)try{let t;try{t=JSON.parse(e.newValue)}catch{t=e.newValue}"normal"!==t&&"compact"!==t||t===s||r(t)}catch{}};return window.addEventListener("density-preference-changed",e),window.addEventListener("storage",t),()=>{window.removeEventListener("density-preference-changed",e),window.removeEventListener("storage",t)}},[n,s]);const i={density:s,setDensity:e=>{Gs.set(n,e),r(e),window.dispatchEvent(new CustomEvent("density-preference-changed",{detail:{density:e}}))}};return c.jsx(Zs.Provider,{...a,value:i,children:e})}const er={};function tr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];rr(t[0])&&er[t[0]]||(rr(t[0])&&(er[t[0]]=new Date),function(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];rr(t[0])&&(t[0]=`react-i18next:: ${t[0]}`)}}(...t))}const nr=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},ar=(e,t,n)=>{e.loadNamespaces(t,nr(e,n))},sr=(e,t,n,a)=>{rr(n)&&(n=[n]),n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,nr(e,a))},rr=e=>"string"==typeof e,ir=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,or={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},lr=e=>or[e];let cr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(ir,lr)};let dr;const ur={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cr={...cr,...e}}(e.options.react),(e=>{dr=e})(e)}},hr=p.createContext();class mr{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const pr=(e,t,n,a)=>e.getFixedT(t,n,a),fr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n}=t,{i18n:a,defaultNS:s}=p.useContext(hr)||{},r=n||a||dr;if(r&&!r.reportNamespaces&&(r.reportNamespaces=new mr),!r){tr("You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return rr(t)?t:"object"==typeof(n=t)&&null!==n&&rr(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}r.options.react&&void 0!==r.options.react.wait&&tr("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...cr,...r.options.react,...t},{useSuspense:o,keyPrefix:l}=i;let c=s||r.options&&r.options.defaultNS;c=rr(c)?[c]:c||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(c);const d=(r.isInitialized||r.initializedStoreOnce)&&c.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e))return!1}}):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=t.languages[0],s=!!t.options&&t.options.fallbackLng,r=t.languages[t.languages.length-1];if("cimode"===a.toLowerCase())return!0;const i=(e,n)=>{const a=t.services.backendConnector.state[`${e}|${n}`];return-1===a||2===a};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e)||!t.hasResourceBundle(a,e)&&t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages)&&(!i(a,e)||s&&!i(r,e)))}(e,t,n):(tr("i18n.languages were undefined or empty",t.languages),!0)}(e,r,i)),u=((e,t,n,a)=>p.useCallback(pr(e,t,n,a),[e,t,n,a]))(r,t.lng||null,"fallback"===i.nsMode?c:c[0],l),h=()=>u,m=()=>pr(r,t.lng||null,"fallback"===i.nsMode?c:c[0],l),[f,g]=p.useState(h);let x=c.join();t.lng&&(x=`${t.lng}${x}`);const v=((e,t)=>{const n=p.useRef();return p.useEffect(()=>{n.current=e},[e,t]),n.current})(x),y=p.useRef(!0);p.useEffect(()=>{const{bindI18n:e,bindI18nStore:n}=i;y.current=!0,d||o||(t.lng?sr(r,t.lng,c,()=>{y.current&&g(m)}):ar(r,c,()=>{y.current&&g(m)})),d&&v&&v!==x&&y.current&&g(m);const a=()=>{y.current&&g(m)};return e&&r&&r.on(e,a),n&&r&&r.store.on(n,a),()=>{y.current=!1,e&&r&&e.split(" ").forEach(e=>r.off(e,a)),n&&r&&n.split(" ").forEach(e=>r.store.off(e,a))}},[r,x]),p.useEffect(()=>{y.current&&d&&g(h)},[r,l,d]);const b=[f,r,d];if(b.t=f,b.i18n=r,b.ready=d,d)return b;if(!d&&!o)return b;throw new Promise(e=>{t.lng?sr(r,t.lng,c,()=>e()):ar(r,c,()=>e())})};function gr(e){let{i18n:t,defaultNS:n,children:a}=e;const s=p.useMemo(()=>({i18n:t,defaultNS:n}),[t,n]);return p.createElement(hr.Provider,{value:s},a)}const xr=e=>"string"==typeof e,vr=()=>{let e,t;const n=new Promise((n,a)=>{e=n,t=a});return n.resolve=e,n.reject=t,n},yr=e=>null==e?"":""+e,br=/###/g,wr=e=>e&&e.indexOf("###")>-1?e.replace(br,"."):e,Sr=e=>!e||xr(e),jr=(e,t,n)=>{const a=xr(t)?t.split("."):t;let s=0;for(;s<a.length-1;){if(Sr(e))return{};const t=wr(a[s]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return Sr(e)?{}:{obj:e,k:wr(a[s])}},Cr=(e,t,n)=>{const{obj:a,k:s}=jr(e,t,Object);if(void 0!==a||1===t.length)return void(a[s]=n);let r=t[t.length-1],i=t.slice(0,t.length-1),o=jr(e,i,Object);for(;void 0===o.obj&&i.length;)r=`${i[i.length-1]}.${r}`,i=i.slice(0,i.length-1),o=jr(e,i,Object),o&&o.obj&&void 0!==o.obj[`${o.k}.${r}`]&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=n},kr=(e,t)=>{const{obj:n,k:a}=jr(e,t);if(n)return n[a]},Nr=(e,t,n)=>{for(const a in t)"__proto__"!==a&&"constructor"!==a&&(a in e?xr(e[a])||e[a]instanceof String||xr(t[a])||t[a]instanceof String?n&&(e[a]=t[a]):Nr(e[a],t[a],n):e[a]=t[a]);return e},_r=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Pr=e=>xr(e)?e.replace(/[&<>"'\/]/g,e=>Er[e]):e;const Ar=[" ",",","?","!",";"],Rr=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),Tr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const a=t.split(n);let s=e;for(let r=0;r<a.length;){if(!s||"object"!=typeof s)return;let e,t="";for(let i=r;i<a.length;++i)if(i!==r&&(t+=n),t+=a[i],e=s[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&i<a.length-1)continue;r+=i-r+1;break}s=e}return s},Mr=e=>e&&e.replace("_","-"),Dr={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]}};class Lr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Dr,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,a){return a&&!this.debug?null:(xr(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Lr(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Lr(this.logger,e)}}var Fr=new Lr;class Ir{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,a]=e;for(let s=0;s<a;s++)t(...n)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[a,s]=t;for(let r=0;r<s;r++)a.apply(a,[e,...n])})}}}class Or extends Ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,r=void 0!==a.ignoreJSONStructure?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let i;e.indexOf(".")>-1?i=e.split("."):(i=[e,t],n&&(Array.isArray(n)?i.push(...n):xr(n)&&s?i.push(...n.split(s)):i.push(n)));const o=kr(this.data,i);return!o&&!t&&!n&&e.indexOf(".")>-1&&(e=i[0],t=i[1],n=i.slice(2).join(".")),!o&&r&&xr(n)?Tr(this.data&&this.data[e]&&this.data[e][t],n,s):o}addResource(e,t,n,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let i=[e,t];n&&(i=i.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(i=e.split("."),a=t,t=i[1]),this.addNamespaces(t),Cr(this.data,i,a),s.silent||this.emit("added",e,t,n,a)}addResources(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const s in n)(xr(n[s])||Array.isArray(n[s]))&&this.addResource(e,t,s,n[s],{silent:!0});a.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,a,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),a=n,n=t,t=i[1]),this.addNamespaces(t);let o=kr(this.data,i)||{};r.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?Nr(o,n,s):o={...o,...n},Cr(this.data,i,o),r.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var zr={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,a,s){return e.forEach(e=>{this.processors[e]&&(t=this.processors[e].process(t,n,a,s))}),t}};const Br={};class $r extends Ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,a;super(),n=e,a=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{n[e]&&(a[e]=n[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Fr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const a=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const r=n&&e.indexOf(n)>-1,i=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const a=Ar.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===a.length)return!0;const s=Rr.getRegExp(`(${a.map(e=>"?"===e?"\\?":e).join("|")})`);let r=!s.test(e);if(!r){const t=e.indexOf(n);t>0&&!s.test(e.substring(0,t))&&(r=!0)}return r})(e,n,a));if(r&&!i){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:xr(s)?[s]:s};const r=e.split(n);(n!==a||n===a&&this.options.ns.indexOf(r[0])>-1)&&(s=r.shift()),e=r.join(a)}return{key:e,namespaces:xr(s)?[s]:s}}translate(e,t,n){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const a=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:r,namespaces:i}=this.extractFromKey(e[e.length-1],t),o=i[i.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return a?{res:`${o}${e}${r}`,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(t)}:`${o}${e}${r}`}return a?{res:r,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(t)}:r}const d=this.resolve(e,t);let u=d&&d.res;const h=d&&d.usedKey||r,m=d&&d.exactUsedKey||r,p=Object.prototype.toString.apply(u),f=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!xr(u)&&"boolean"!=typeof u&&"number"!=typeof u;if(!(g&&u&&x&&["[object Number]","[object Function]","[object RegExp]"].indexOf(p)<0)||xr(f)&&Array.isArray(u))if(g&&xr(f)&&Array.isArray(u))u=u.join(f),u&&(u=this.extendTranslation(u,e,t,n));else{let a=!1,i=!1;const c=void 0!==t.count&&!xr(t.count),h=$r.hasDefaultValue(t),m=c?this.pluralResolver.getSuffix(l,t.count,t):"",p=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",f=c&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=f&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${m}`]||t[`defaultValue${p}`]||t.defaultValue;!this.isValidLookup(u)&&h&&(a=!0,u=g),this.isValidLookup(u)||(i=!0,u=r);const x=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:u,v=h&&g!==u&&this.options.updateMissing;if(i||a||v){if(this.logger.log(v?"updateKey":"missingKey",l,o,r,v?g:u),s){const e=this.resolve(r,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const a=(e,n,a)=>{const s=h&&a!==u?a:x;this.options.missingKeyHandler?this.options.missingKeyHandler(e,o,n,s,v,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,o,n,s,v,t),this.emit("missingKey",e,o,n,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach(e=>{const n=this.pluralResolver.getSuffixes(e,t);f&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach(n=>{a([e],r+n,t[`defaultValue${n}`]||g)})}):a(e,r,g))}u=this.extendTranslation(u,e,t,d,n),i&&u===r&&this.options.appendNamespaceToMissingKey&&(u=`${o}:${r}`),(i||a)&&this.options.parseMissingKeyHandler&&(u="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${o}:${r}`:r,a?u:void 0):this.options.parseMissingKeyHandler(u))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,u,{...t,ns:i}):`key '${r} (${this.language})' returned an object instead of string.`;return a?(d.res=e,d.usedParams=this.getUsedParamsDetails(t),d):e}if(s){const e=Array.isArray(u),n=e?[]:{},a=e?m:h;for(const r in u)if(Object.prototype.hasOwnProperty.call(u,r)){const e=`${a}${s}${r}`;n[r]=this.translate(e,{...t,joinArrays:!1,ns:i}),n[r]===e&&(n[r]=u[r])}u=n}}return a?(d.res=u,d.usedParams=this.getUsedParamsDetails(t),d):u}extendTranslation(e,t,n,a,s){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const i=xr(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(i){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let l=n.replace&&!xr(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||a.usedLng,n),i){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&a&&a.res&&(n.lng=this.language||a.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return s&&s[0]===a[0]&&!n.context?(r.logger.warn(`It seems you are nesting recursively key: ${a[0]} in key: ${t[0]}`),null):r.translate(...a,t)},n)),n.interpolation&&this.interpolator.reset()}const i=n.postProcess||this.options.postProcess,o=xr(i)?[i]:i;return null!=e&&o&&o.length&&!1!==n.applyPostProcessor&&(e=zr.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,a,s,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xr(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,i),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==i.count&&!xr(i.count),u=d&&!i.ordinal&&0===i.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==i.context&&(xr(i.context)||"number"==typeof i.context)&&""!==i.context,m=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);c.forEach(e=>{this.isValidLookup(t)||(r=e,!Br[`${m[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(r)&&(Br[`${m[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${m.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(n=>{if(this.isValidLookup(t))return;s=n;const r=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,n,e,i);else{let e;d&&(e=this.pluralResolver.getSuffix(n,i.count,i));const t=`${this.options.pluralSeparator}zero`,a=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(r.push(l+e),i.ordinal&&0===e.indexOf(a)&&r.push(l+e.replace(a,this.options.pluralSeparator)),u&&r.push(l+t)),h){const n=`${l}${this.options.contextSeparator}${i.context}`;r.push(n),d&&(r.push(n+e),i.ordinal&&0===e.indexOf(a)&&r.push(n+e.replace(a,this.options.pluralSeparator)),u&&r.push(n+t))}}let o;for(;o=r.pop();)this.isValidLookup(t)||(a=o,t=this.getResource(n,e,o,i))}))})}),{res:t,usedKey:n,exactUsedKey:a,usedLng:s,usedNS:r}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,a):this.resourceStore.getResource(e,t,n,a)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!xr(e.replace);let a=n?e.replace:e;if(n&&void 0!==e.count&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const e of t)delete a[e]}return a}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const Ur=e=>e.charAt(0).toUpperCase()+e.slice(1);class Vr{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Fr.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Mr(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Mr(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(xr(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(t){}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let a=e.split("-");return this.options.lowerCaseLng?a=a.map(e=>e.toLowerCase()):2===a.length?(a[0]=a[0].toLowerCase(),a[1]=a[1].toUpperCase(),n.indexOf(a[1].toLowerCase())>-1&&(a[1]=Ur(a[1].toLowerCase()))):3===a.length&&(a[0]=a[0].toLowerCase(),2===a[1].length&&(a[1]=a[1].toUpperCase()),"sgn"!==a[0]&&2===a[2].length&&(a[2]=a[2].toUpperCase()),n.indexOf(a[1].toLowerCase())>-1&&(a[1]=Ur(a[1].toLowerCase())),n.indexOf(a[2].toLowerCase())>-1&&(a[2]=Ur(a[2].toLowerCase()))),a.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),xr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],s=e=>{e&&(this.isSupportedCode(e)?a.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return xr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):xr(e)&&s(this.formatLanguageCode(e)),n.forEach(e=>{a.indexOf(e)<0&&s(this.formatLanguageCode(e))}),a}}let qr=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Hr={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const Gr=["v1","v2","v3"],Kr=["v4"],Wr={zero:0,one:1,two:2,few:3,many:4,other:5};class Qr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Fr.create("pluralResolver"),this.options.compatibilityJSON&&!Kr.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return qr.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:Hr[t.fc]}})}),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const a=Mr("dev"===e?"en":e),s=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:a,type:s});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let i;try{i=new Intl.PluralRules(a,{type:s})}catch(n){if(!e.match(/-|_/))return;const a=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(a,t)}return this.pluralRulesCache[r]=i,i}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((e,t)=>Wr[e]-Wr[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):n.numbers.map(n=>this.getSuffix(e,n,t)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.getRule(e,n);return a?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(t)}`:this.getSuffixRetroCompatible(a,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let a=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===a?a="plural":1===a&&(a=""));const s=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?`_plural_${a.toString()}`:s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Gr.includes(this.options.compatibilityJSON)}}const Yr=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,n)=>{const a=kr(e,n);return void 0!==a?a:kr(t,n)})(e,t,n);return!r&&s&&xr(n)&&(r=Tr(e,n,a),void 0===r&&(r=Tr(t,n,a))),r},Xr=e=>e.replace(/\$/g,"$$$$");class Zr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Fr.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:a,prefix:s,prefixEscaped:r,suffix:i,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:m,nestingSuffixEscaped:p,nestingOptionsSeparator:f,maxReplaces:g,alwaysFormat:x}=e.interpolation;this.escape=void 0!==t?t:Pr,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==a&&a,this.prefix=s?_r(s):r||"{{",this.suffix=i?_r(i):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?_r(u):h||_r("$t("),this.nestingSuffix=m?_r(m):p||_r(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==x&&x,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,a){let s,r,i;const o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const s=Yr(t,o,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,{...a,...t,interpolationkey:e}):s}const s=e.split(this.formatSeparator),r=s.shift().trim(),i=s.join(this.formatSeparator).trim();return this.format(Yr(t,o,r,this.options.keySeparator,this.options.ignoreJSONStructure),i,n,{...a,...t,interpolationkey:r})};this.resetRegExp();const c=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,d=a&&a.interpolation&&void 0!==a.interpolation.skipOnVariables?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Xr(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Xr(this.escape(e)):Xr(e)}].forEach(t=>{for(i=0;s=t.regex.exec(e);){const n=s[1].trim();if(r=l(n),void 0===r)if("function"==typeof c){const t=c(e,s,a);r=xr(t)?t:""}else if(a&&Object.prototype.hasOwnProperty.call(a,n))r="";else{if(d){r=s[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),r=""}else xr(r)||this.useRawValueToEscape||(r=yr(r));const o=t.safeValue(r);if(e=e.replace(s[0],o),d?(t.regex.lastIndex+=r.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,i++,i>=this.maxReplaces)break}}),e}nest(e,t){let n,a,s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const a=e.split(new RegExp(`${n}[ ]*{`));let r=`{${a[1]}`;e=a[0],r=this.interpolate(r,s);const i=r.match(/'/g),o=r.match(/"/g);(i&&i.length%2==0&&!o||o.length%2!=0)&&(r=r.replace(/'/g,'"'));try{s=JSON.parse(r),t&&(s={...t,...s})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${n}${r}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];s={...r},s=s.replace&&!xr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map(e=>e.trim());n[1]=e.shift(),o=e,l=!0}if(a=t(i.call(this,n[1].trim(),s),s),a&&n[0]===e&&!xr(a))return a;xr(a)||(a=yr(a)),a||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),a=""),l&&(a=o.reduce((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:n[1].trim()}),a.trim())),e=e.replace(n[0],a),this.regexp.lastIndex=0}return e}}const Jr=e=>{const t={};return(n,a,s)=>{let r=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(r={...r,[s.interpolationkey]:void 0});const i=a+JSON.stringify(r);let o=t[i];return o||(o=e(Mr(a),s),t[i]=o),o(n)}};class ei{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Fr.create("formatter"),this.options=e,this.formats={number:Jr((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:Jr((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:Jr((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:Jr((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:Jr((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Jr(t)}format(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{const{formatName:s,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const a=e.split("(");t=a[0].toLowerCase().trim();const s=a[1].substring(0,a[1].length-1);"currency"===t&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...a]=e.split(":"),s=a.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();n[r]||(n[r]=s),"false"===s&&(n[r]=!1),"true"===s&&(n[r]=!0),isNaN(s)||(n[r]=parseInt(s,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[s]){let t=e;try{const i=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},o=i.locale||i.lng||a.locale||a.lng||n;t=this.formats[s](e,o,{...r,...a,...i})}catch(i){this.logger.warn(i)}return t}return this.logger.warn(`there was no format function for ${s}`),e},e)}}class ti extends Ir{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=Fr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,a.backend,a)}queueLoad(e,t,n,a){const s={},r={},i={},o={};return e.forEach(e=>{let a=!0;t.forEach(t=>{const i=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[i]=2:this.state[i]<0||(1===this.state[i]?void 0===r[i]&&(r[i]=!0):(this.state[i]=1,a=!1,void 0===r[i]&&(r[i]=!0),void 0===s[i]&&(s[i]=!0),void 0===o[t]&&(o[t]=!0)))}),a||(i[e]=!0)}),(Object.keys(s).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(s),pending:Object.keys(r),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const a=e.split("|"),s=a[0],r=a[1];t&&this.emit("failedLoading",s,r,t),!t&&n&&this.store.addResourceBundle(s,r,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const i={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:a,k:s}=jr(e,t,Object);a[s]=a[s]||[],a[s].push(n)})(n.loaded,[s],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{i[e]||(i[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===i[e][t]&&(i[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:a,wait:s,callback:r});this.readingCalls++;const i=(i,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}i&&o&&a<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,a+1,2*s,r)},s):r(i,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,i);try{const n=o(e,t);n&&"function"==typeof n.then?n.then(e=>i(null,e)).catch(i):i(null,n)}catch(l){i(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();xr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),xr(t)&&(t=[t]);const s=this.queueLoad(e,t,n,a);if(!s.toLoad.length)return s.pending.length||a(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),a=n[0],s=n[1];this.read(a,s,"read",void 0,void 0,(n,r)=>{n&&this.logger.warn(`${t}loading namespace ${s} for language ${a} failed`,n),!n&&r&&this.logger.log(`${t}loaded namespace ${s} for language ${a}`,r),this.loaded(e,n,r)})}saveMissing(e,t,n,a,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const l={...r,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let s;s=5===c.length?c(e,t,n,a,l):c(e,t,n,a),s&&"function"==typeof s.then?s.then(e=>i(null,e)).catch(i):i(null,s)}catch(o){i(o)}else c(e,t,n,a,i,l)}e&&e[0]&&this.store.addResource(e[0],t,n,a)}}}const ni=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),xr(e[1])&&(t.defaultValue=e[1]),xr(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ai=e=>(xr(e.ns)&&(e.ns=[e.ns]),xr(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),xr(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),si=()=>{};class ri extends Ir{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=ai(e),this.services={},this.logger=Fr,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(xr(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=ni();this.options={...a,...this.options,...ai(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?Fr.init(s(this.modules.logger),this.options):Fr.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=ei);const n=new Vr(this.options);this.store=new Or(this.options.resources,this.options);const r=this.services;r.logger=Fr,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new Qr(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format||(r.formatter=s(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new Zr(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new ti(s(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];e.emit(t,...a)}),this.modules.languageDetector&&(r.languageDetector=s(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=s(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new $r(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];e.emit(t,...a)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=si),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const r=vr(),i=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?i():setTimeout(i,0),r}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si;const n=xr(e)?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],a=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)a(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>a(e))}this.options.preload&&this.options.preload.forEach(e=>a(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,n){const a=vr();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=si),this.services.backendConnector.reload(e,t,e=>{a.resolve(),n(e)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&zr.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const a=vr();this.emit("languageChanging",e);const s=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},r=(e,r)=>{r?(s(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,a.resolve(function(){return n.t(...arguments)}),t&&t(e,function(){return n.t(...arguments)})},i=t=>{e||t||!this.services.languageDetector||(t=[]);const n=xr(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||s(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,e=>{r(e,n)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),a}getFixedT(e,t,n){var a=this;const s=function(e,t){let r;if("object"!=typeof t){for(var i=arguments.length,o=new Array(i>2?i-2:0),l=2;l<i;l++)o[l-2]=arguments[l];r=a.options.overloadTranslationOptionHandler([e,t].concat(o))}else r={...t};r.lng=r.lng||s.lng,r.lngs=r.lngs||s.lngs,r.ns=r.ns||s.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||s.keyPrefix);const c=a.options.keySeparator||".";let d;return d=r.keyPrefix&&Array.isArray(e)?e.map(e=>`${r.keyPrefix}${c}${e}`):r.keyPrefix?`${r.keyPrefix}${c}${e}`:e,a.t(d,r)};return xr(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],a=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const r=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!r(n,e)||a&&!r(s,e)))}loadNamespaces(e,t){const n=vr();return this.options.ns?(xr(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=vr();xr(e)&&(e=[e]);const a=this.options.preload||[],s=e.filter(e=>a.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=a.concat(s),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new Vr(ni());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new ri(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},s=new ri(a);void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e));return["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new Or(this.store.data,a),s.services.resourceStore=s.store),s.translator=new $r(s.services,a),s.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];s.emit(e,...n)}),s.init(a,t),s.translator.options=a,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ii=ri.createInstance();ii.createInstance=ri.createInstance,ii.createInstance,ii.dir,ii.init,ii.loadResources,ii.reloadResources,ii.use,ii.changeLanguage,ii.getFixedT,ii.t,ii.exists,ii.setDefaultNamespace,ii.hasLoadedNamespace,ii.loadNamespaces,ii.loadLanguages;const oi={en:{translation:{common:{welcome:"Welcome",home:"Home",dashboard:"Dashboard",settings:"Settings",profile:"Profile",logout:"Logout",login:"Login",register:"Register",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",create:"Create",search:"Search",loading:"Loading...",error:"Error",success:"Success",noData:"No data available",add:"Add",items:"items",actions:"Actions",errorOccurred:"An error occurred",noItems:"No items found",comingSoon:"Coming soon",none:"None",expandMenu:"Expand menu",collapseMenu:"Collapse menu"},theme:{light:"Light",dark:"Dark",system:"System",toggle:"Toggle theme"},language:{select:"Select language",en:"English",fr:"French",es:"Spanish"},auth:{email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password?",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",logoutSuccess:"You have been logged out successfully",authenticationRequired:"Authentication Required",authenticationRequiredMessage:"You need to be logged in to access this page. Please sign in to continue.",noAccount:"Don't have an account?",signUp:"Sign up",signupComingSoon:"Sign up functionality will be available soon."},pages:{home:{title:"Welcome to Hello Ticket",subtitle:"A ticket brokerage system with best practices",getStarted:"Get Started"},dashboard:{title:"Dashboard",overview:"Overview",statistics:"Statistics"},profile:{title:"Profile",subtitle:"Manage your account information and settings",loading:"Loading your profile...",error:"Failed to load profile information",contactInfo:"Contact Information",accountInfo:"Account Information",additionalInfo:"Additional Information",email:"Email",username:"Username",userId:"User ID",role:"Role",tenantId:"Tenant ID",displayName:"Display Name",accountStatus:"Account Status",active:"Active"},login:{title:"Welcome Back",subtitle:"Sign in to your account to continue",usernameLabel:"Username or Email",usernamePlaceholder:"Enter your username or email",passwordLabel:"Password",passwordPlaceholder:"Enter your password",forgotPassword:"Forgot password?",submit:"Sign In",loggingIn:"Signing in...",noAccount:"Don't have an account?",signUp:"Sign up",success:"Login successful",successDescription:"Welcome back!",error:"Login failed",capsLockOn:"Caps Lock is on",errors:{usernameRequired:"Username or email is required",passwordRequired:"Password is required",passwordTooShort:"Password must be at least 8 characters",invalidCredentials:"Invalid username or password"}},notFound:{title:"Page Not Found",message:"The page you're looking for doesn't exist or has been moved.",goHome:"Go to Home",goBack:"Go Back"},settings:{title:"Settings",subtitle:"Manage your account settings and preferences",menu:{profile:"Profile",profileDesc:"Manage your profile information",account:"Account",accountDesc:"Manage account settings",notifications:"Notifications",notificationsDesc:"Configure notifications",appearance:"Appearance",appearanceDesc:"Customize look and feel",language:"Language",languageDesc:"Choose your language",security:"Security",securityDesc:"Password and security",companyAddresses:"Company Addresses",companyAddressesDesc:"Manage company addresses and locations"},profile:{title:"Profile Settings",description:"Update your profile information",name:"Full Name",username:"Username",email:"Email Address",bio:"Bio",bioPlaceholder:"Tell us about yourself..."},account:{title:"Account Settings",description:"Manage your account preferences",accountStatus:"Account Status",accountStatusDesc:"Your account is currently active",active:"Active",cacheManagement:"Cache Management",cacheManagementDesc:"Clear cached data and refresh application state",enableQueryCache:"Enable Query Cache",enableQueryCacheDesc:"Enable backend query result caching for faster performance",enableReactQueryCache:"Enable React Query Cache",enableReactQueryCacheDesc:"Enable frontend React Query caching for faster performance",queryCacheEnabled:"Query Cache Enabled",queryCacheEnabledDesc:"Backend query caching has been enabled",queryCacheDisabled:"Query Cache Disabled",queryCacheDisabledDesc:"Backend query caching has been disabled",reactQueryCacheEnabled:"React Query Cache Enabled",reactQueryCacheEnabledDesc:"Frontend React Query caching has been enabled",reactQueryCacheDisabled:"React Query Cache Disabled",reactQueryCacheDisabledDesc:"Frontend React Query caching has been disabled",preferenceUpdateError:"Preference Update Failed",preferenceUpdateErrorDesc:"Failed to update preference. Please try again.",clearCache:"Clear Cache",invalidateAllQueries:"Invalidate All Queries",cacheCleared:"Cache Cleared",cacheClearedDesc:"All cached data has been successfully cleared",cacheClearError:"Cache Clear Failed",cacheClearErrorDesc:"Failed to clear cache. Please try again.",queriesInvalidated:"Queries Invalidated",queriesInvalidatedDesc:"All React Query queries have been invalidated and will refetch on next access",queriesInvalidateError:"Query Invalidation Failed",queriesInvalidateErrorDesc:"Failed to invalidate queries. Please try again.",dangerZone:"Danger Zone",dangerZoneDesc:"Irreversible and destructive actions",deleteAccount:"Delete Account"},appearance:{title:"Appearance Settings",description:"Customize the look and feel of the application",themeMode:"Theme Mode",interfaceSettings:"Interface Settings",interfaceSettingsDesc:"Customize interface elements",enableTabs:"Enable Tabs",enableTabsDesc:"Show in-app tabs for multitasking and task preservation",tabPosition:"Tab Position",tabPositionSeparate:"Separate Bar",tabPositionSeparateDesc:"Tabs in their own bar below header",tabPositionInline:"Inline Header",tabPositionInlineDesc:"Tabs integrated into header for more space"},language:{title:"Language Settings",description:"Choose your preferred language"},notifications:{title:"Notification Settings",description:"Manage how you receive notifications",emailNotifications:"Email Notifications",emailNotificationsDesc:"Receive email notifications for important updates",pushNotifications:"Push Notifications",pushNotificationsDesc:"Receive push notifications in your browser",marketingEmails:"Marketing Emails",marketingEmailsDesc:"Receive emails about new features and offers",securityAlerts:"Security Alerts",securityAlertsDesc:"Get notified about security-related activities"},security:{title:"Security Settings",description:"Manage your password and security options",changePassword:"Change Password",changePasswordDesc:"Update your password regularly to keep your account secure",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm New Password",updatePassword:"Update Password",twoFactor:"Two-Factor Authentication",twoFactorDesc:"Add an extra layer of security to your account",enableTwoFactor:"Enable Two-Factor Authentication"}}}}},fr:{translation:{common:{welcome:"Bienvenue",home:"Accueil",dashboard:"Tableau de bord",settings:"Paramtres",profile:"Profil",logout:"Dconnexion",login:"Connexion",register:"S'inscrire",save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",create:"Crer",search:"Rechercher",loading:"Chargement...",error:"Erreur",success:"Succs",noData:"Aucune donne disponible",expandMenu:"Dvelopper le menu",collapseMenu:"Rduire le menu"},theme:{light:"Clair",dark:"Sombre",system:"Systme",toggle:"Changer le thme"},language:{select:"Slectionner la langue",en:"Anglais",fr:"Franais",es:"Espagnol"},auth:{email:"Email",password:"Mot de passe",confirmPassword:"Confirmer le mot de passe",forgotPassword:"Mot de passe oubli ?",dontHaveAccount:"Vous n'avez pas de compte ?",alreadyHaveAccount:"Vous avez dj un compte ?",logoutSuccess:"Vous avez t dconnect avec succs",authenticationRequired:"Authentification requise",authenticationRequiredMessage:"Vous devez tre connect pour accder  cette page. Veuillez vous connecter pour continuer.",noAccount:"Vous n'avez pas de compte ?",signUp:"S'inscrire",signupComingSoon:"La fonctionnalit d'inscription sera bientt disponible."},pages:{home:{title:"Bienvenue sur Truths",subtitle:"Une application React moderne avec les meilleures pratiques",getStarted:"Commencer"},dashboard:{title:"Tableau de bord",overview:"Aperu",statistics:"Statistiques"},profile:{title:"Profil",subtitle:"Grez les informations et les paramtres de votre compte",loading:"Chargement de votre profil...",error:"chec du chargement des informations du profil",contactInfo:"Informations de contact",accountInfo:"Informations du compte",additionalInfo:"Informations supplmentaires",email:"Email",username:"Nom d'utilisateur",userId:"ID utilisateur",role:"Rle",tenantId:"ID locataire",displayName:"Nom d'affichage",accountStatus:"Statut du compte",active:"Actif"},login:{title:"Bon retour",subtitle:"Connectez-vous  votre compte pour continuer",usernameLabel:"Nom d'utilisateur ou Email",usernamePlaceholder:"Entrez votre nom d'utilisateur ou email",passwordLabel:"Mot de passe",passwordPlaceholder:"Entrez votre mot de passe",forgotPassword:"Mot de passe oubli ?",submit:"Se connecter",loggingIn:"Connexion en cours...",noAccount:"Vous n'avez pas de compte ?",signUp:"S'inscrire",success:"Connexion russie",successDescription:"Bon retour !",error:"chec de la connexion",capsLockOn:"Vrrouillage des majuscules activ",errors:{usernameRequired:"Le nom d'utilisateur ou l'email est requis",passwordRequired:"Le mot de passe est requis",passwordTooShort:"Le mot de passe doit contenir au moins 8 caractres",invalidCredentials:"Nom d'utilisateur ou mot de passe invalide"}},notFound:{title:"Page introuvable",message:"La page que vous recherchez n'existe pas ou a t dplace.",goHome:"Aller  l'accueil",goBack:"Retour"},settings:{title:"Paramtres",subtitle:"Grez les paramtres et prfrences de votre compte",menu:{profile:"Profil",profileDesc:"Grer vos informations de profil",account:"Compte",accountDesc:"Grer les paramtres du compte",notifications:"Notifications",notificationsDesc:"Configurer les notifications",appearance:"Apparence",appearanceDesc:"Personnaliser l'apparence",language:"Langue",languageDesc:"Choisir votre langue",security:"Scurit",securityDesc:"Mot de passe et scurit",companyAddresses:"Adresses de l'entreprise",companyAddressesDesc:"Grer les adresses et emplacements de l'entreprise"},profile:{title:"Paramtres du profil",description:"Mettez  jour vos informations de profil",name:"Nom complet",username:"Nom d'utilisateur",email:"Adresse e-mail",bio:"Biographie",bioPlaceholder:"Parlez-nous de vous..."},account:{title:"Paramtres du compte",description:"Grez les prfrences de votre compte",accountStatus:"Statut du compte",accountStatusDesc:"Votre compte est actuellement actif",active:"Actif",dangerZone:"Zone dangereuse",dangerZoneDesc:"Actions irrversibles et destructrices",deleteAccount:"Supprimer le compte"},appearance:{title:"Paramtres d'apparence",description:"Personnalisez l'apparence de l'application",themeMode:"Mode thme"},language:{title:"Paramtres de langue",description:"Choisissez votre langue prfre"},notifications:{title:"Paramtres de notification",description:"Grez la faon dont vous recevez les notifications",emailNotifications:"Notifications par e-mail",emailNotificationsDesc:"Recevoir des notifications par e-mail pour les mises  jour importantes",pushNotifications:"Notifications push",pushNotificationsDesc:"Recevoir des notifications push dans votre navigateur",marketingEmails:"E-mails marketing",marketingEmailsDesc:"Recevoir des e-mails sur les nouvelles fonctionnalits et offres",securityAlerts:"Alertes de scurit",securityAlertsDesc:"tre notifi des activits lies  la scurit"},security:{title:"Paramtres de scurit",description:"Grez votre mot de passe et vos options de scurit",changePassword:"Changer le mot de passe",changePasswordDesc:"Mettez  jour votre mot de passe rgulirement pour scuriser votre compte",currentPassword:"Mot de passe actuel",newPassword:"Nouveau mot de passe",confirmPassword:"Confirmer le nouveau mot de passe",updatePassword:"Mettre  jour le mot de passe",twoFactor:"Authentification  deux facteurs",twoFactorDesc:"Ajoutez une couche de scurit supplmentaire  votre compte",enableTwoFactor:"Activer l'authentification  deux facteurs"}}}}},es:{translation:{common:{welcome:"Bienvenido",home:"Inicio",dashboard:"Panel",settings:"Configuracin",profile:"Perfil",logout:"Cerrar sesin",login:"Iniciar sesin",register:"Registrarse",save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",create:"Crear",search:"Buscar",loading:"Cargando...",error:"Error",success:"xito",noData:"No hay datos disponibles",expandMenu:"Expandir men",collapseMenu:"Contraer men"},theme:{light:"Claro",dark:"Oscuro",system:"Sistema",toggle:"Cambiar tema"},language:{select:"Seleccionar idioma",en:"Ingls",fr:"Francs",es:"Espaol"},auth:{email:"Correo electrnico",password:"Contrasea",confirmPassword:"Confirmar contrasea",forgotPassword:"Olvidaste tu contrasea?",dontHaveAccount:"No tienes una cuenta?",alreadyHaveAccount:"Ya tienes una cuenta?",logoutSuccess:"Has cerrado sesin exitosamente",authenticationRequired:"Autenticacin requerida",authenticationRequiredMessage:"Debes iniciar sesin para acceder a esta pgina. Por favor, inicia sesin para continuar.",noAccount:"No tienes una cuenta?",signUp:"Regstrate",signupComingSoon:"La funcionalidad de registro estar disponible pronto."},pages:{home:{title:"Bienvenido a Truths",subtitle:"Una aplicacin React moderna con mejores prcticas",getStarted:"Comenzar"},dashboard:{title:"Panel",overview:"Resumen",statistics:"Estadsticas"},profile:{title:"Perfil",subtitle:"Administra la informacin y configuracin de tu cuenta",loading:"Cargando tu perfil...",error:"Error al cargar la informacin del perfil",contactInfo:"Informacin de Contacto",accountInfo:"Informacin de la Cuenta",additionalInfo:"Informacin Adicional",email:"Correo electrnico",username:"Usuario",userId:"ID de usuario",role:"Rol",tenantId:"ID de inquilino",displayName:"Nombre para mostrar",accountStatus:"Estado de la cuenta",active:"Activo"},login:{title:"Bienvenido de nuevo",subtitle:"Inicia sesin en tu cuenta para continuar",usernameLabel:"Usuario o Correo electrnico",usernamePlaceholder:"Ingresa tu usuario o correo electrnico",passwordLabel:"Contrasea",passwordPlaceholder:"Ingresa tu contrasea",forgotPassword:"Olvidaste tu contrasea?",submit:"Iniciar sesin",loggingIn:"Iniciando sesin...",noAccount:"No tienes una cuenta?",signUp:"Regstrate",success:"Inicio de sesin exitoso",successDescription:"Bienvenido de nuevo!",error:"Error al iniciar sesin",capsLockOn:"Bloq Mays est activado",errors:{usernameRequired:"El usuario o correo electrnico es requerido",passwordRequired:"La contrasea es requerida",passwordTooShort:"La contrasea debe tener al menos 8 caracteres",invalidCredentials:"Usuario o contrasea invlidos"}},notFound:{title:"Pgina no encontrada",message:"La pgina que buscas no existe o ha sido movida.",goHome:"Ir al inicio",goBack:"Volver"},settings:{title:"Configuracin",subtitle:"Administra la configuracin y preferencias de tu cuenta",menu:{profile:"Perfil",profileDesc:"Administrar informacin del perfil",account:"Cuenta",accountDesc:"Administrar configuracin de cuenta",notifications:"Notificaciones",notificationsDesc:"Configurar notificaciones",appearance:"Apariencia",appearanceDesc:"Personalizar apariencia",language:"Idioma",languageDesc:"Elegir tu idioma",security:"Seguridad",securityDesc:"Contrasea y seguridad",companyAddresses:"Direcciones de la empresa",companyAddressesDesc:"Administrar direcciones y ubicaciones de la empresa"},profile:{title:"Configuracin del perfil",description:"Actualiza tu informacin de perfil",name:"Nombre completo",username:"Nombre de usuario",email:"Correo electrnico",bio:"Biografa",bioPlaceholder:"Cuntanos sobre ti..."},account:{title:"Configuracin de cuenta",description:"Administra las preferencias de tu cuenta",accountStatus:"Estado de la cuenta",accountStatusDesc:"Tu cuenta est actualmente activa",active:"Activa",dangerZone:"Zona de peligro",dangerZoneDesc:"Acciones irreversibles y destructivas",deleteAccount:"Eliminar cuenta"},appearance:{title:"Configuracin de apariencia",description:"Personaliza la apariencia de la aplicacin",themeMode:"Modo de tema"},language:{title:"Configuracin de idioma",description:"Elige tu idioma preferido"},notifications:{title:"Configuracin de notificaciones",description:"Administra cmo recibes notificaciones",emailNotifications:"Notificaciones por correo",emailNotificationsDesc:"Recibir notificaciones por correo para actualizaciones importantes",pushNotifications:"Notificaciones push",pushNotificationsDesc:"Recibir notificaciones push en tu navegador",marketingEmails:"Correos de marketing",marketingEmailsDesc:"Recibir correos sobre nuevas funciones y ofertas",securityAlerts:"Alertas de seguridad",securityAlertsDesc:"Recibir notificaciones sobre actividades de seguridad"},security:{title:"Configuracin de seguridad",description:"Administra tu contrasea y opciones de seguridad",changePassword:"Cambiar contrasea",changePasswordDesc:"Actualiza tu contrasea regularmente para mantener tu cuenta segura",currentPassword:"Contrasea actual",newPassword:"Nueva contrasea",confirmPassword:"Confirmar nueva contrasea",updatePassword:"Actualizar contrasea",twoFactor:"Autenticacin de dos factores",twoFactorDesc:"Agrega una capa adicional de seguridad a tu cuenta",enableTwoFactor:"Activar autenticacin de dos factores"}}}}}};function li({children:e}){return c.jsx(gr,{i18n:ii,children:e})}ii.use(ur).init({resources:oi,lng:Gs.get(vs)||ps,fallbackLng:ps,interpolation:{escapeValue:!1}});class ci extends Error{constructor(e,t,n){super(e),this.type=t,this.lockedUntil=n,this.name="AuthenticationError"}}const di={async login(e){const t=new URLSearchParams;t.append("username",e.username),t.append("password",e.password);const n=`${ms.BASE_URL.replace(/\/$/,"")}${ms.ENDPOINTS.AUTH.LOGIN}`,a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!a.ok){let e,t="Login failed",n="unknown";const s=await a.text();try{const e=JSON.parse(s);t=e.detail||e.message||t}catch{t=s||t}if(t.includes("locked until")){n="locked";const a=t.match(/locked until (.+)/i);a&&(e=a[1].trim())}else n=t.toLowerCase().includes("account is inactive")||t.toLowerCase().includes("inactive")?"inactive":"invalid_credentials";throw new ci(t,n,e)}const s=await a.json();if(Gs&&"function"==typeof Gs.remove&&(Gs.remove("REACT_QUERY_OFFLINE_CACHE"),Gs.remove("app_tabs"),Gs.remove("scroll_positions")),!Gs||"function"!=typeof Gs.set)throw new Error("Storage utility is not available");return Gs.set(gs,s.access_token),Gs.set(xs,s.refresh_token),Gs.set("last_username",e.username),_s(!1),Ns(),zs.initialize().catch(e=>{}),s},async logout(){const e=Gs.get(xs);Gs.remove(gs),Gs.remove(xs),Gs.remove("must_change_password");const{cacheManager:t,CACHE_KEYS:n}=await Ja(async()=>{const{cacheManager:e,CACHE_KEYS:t}=await Promise.resolve().then(()=>Ks);return{cacheManager:e,CACHE_KEYS:t}},void 0);t.remove(n.SESSION_CONFIG);try{const{getSessionMonitor:e}=await Ja(async()=>{const{getSessionMonitor:e}=await Promise.resolve().then(()=>nF);return{getSessionMonitor:e}},void 0),t=e();t&&t.clearSessionConfigCache()}catch{}if(t.handleInvalidation({type:"invalidate",cachePattern:"auth:*"}),e)try{await Fs.post("/api/v1/auth/logout",{refresh_token:e},{requiresAuth:!1})}catch(a){}},logoutSync(){Gs.remove(gs),Gs.remove(xs),Gs.remove("must_change_password");try{const e="session:config";Gs.remove(`cache:${e}`)}catch{}},getCurrentUser:async()=>Fs.get("/api/v1/auth/me",{requiresAuth:!0}),isAuthenticated:()=>!!Gs.get(gs),getAccessToken:()=>Gs.get(gs),async refreshToken(){const e=Gs.get(xs);if(!e)throw new Error("No refresh token available");const t=await Fs.post("/api/v1/auth/refresh",{refresh_token:e},{requiresAuth:!1});return Gs.set(gs,t.access_token),Gs.set(xs,t.refresh_token),t},async changePassword(e){await Fs.post("/api/v1/auth/change-password",e,{requiresAuth:!0})},getMustChangePassword:()=>Gs.get("must_change_password")??!1,setMustChangePassword(e){Gs.set("must_change_password",e)},clearMustChangePassword(){Gs.remove("must_change_password")}};var ui,hi;function mi(e,t){return"function"==typeof e?e(t):e}function pi(e,t){return n=>{t.setState(t=>({...t,[e]:mi(n,t[e])}))}}function fi(e){return e instanceof Function}function gi(e,t,n){let a,s=[];return r=>{let i;n.key&&n.debug&&(i=Date.now());const o=e(r);if(!(o.length!==s.length||o.some((e,t)=>s[t]!==e)))return a;let l;if(s=o,n.key&&n.debug&&(l=Date.now()),a=t(...o),null==n||null==n.onChange||n.onChange(a),n.key&&n.debug&&null!=n&&n.debug()){Math.round(100*(Date.now()-i)),Math.round(100*(Date.now()-l))}return a}}function xi(e,t,n,a){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:a}}ui=di.refreshToken,hi=di.logoutSync,Ms=ui,Ds=hi;const vi="debugHeaders";function yi(e,t,n){var a;let s={id:null!=(a=n.id)?a:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(s),e},getContext:()=>({table:e,header:s,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(s,e)}),s}const bi={createTable:e=>{e.getHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a,s)=>{var r,i;const o=null!=(r=null==a?void 0:a.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[],l=null!=(i=null==s?void 0:s.map(e=>n.find(t=>t.id===e)).filter(Boolean))?i:[];return wi(t,[...o,...n.filter(e=>!(null!=a&&a.includes(e.id)||null!=s&&s.includes(e.id))),...l],e)},xi(e.options,vi)),e.getCenterHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a,s)=>wi(t,n=n.filter(e=>!(null!=a&&a.includes(e.id)||null!=s&&s.includes(e.id))),e,"center"),xi(e.options,vi)),e.getLeftHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,a)=>{var s;return wi(t,null!=(s=null==a?void 0:a.map(e=>n.find(t=>t.id===e)).filter(Boolean))?s:[],e,"left")},xi(e.options,vi)),e.getRightHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,a)=>{var s;return wi(t,null!=(s=null==a?void 0:a.map(e=>n.find(t=>t.id===e)).filter(Boolean))?s:[],e,"right")},xi(e.options,vi)),e.getFooterGroups=gi(()=>[e.getHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getLeftFooterGroups=gi(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getCenterFooterGroups=gi(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getRightFooterGroups=gi(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getFlatHeaders=gi(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getLeftFlatHeaders=gi(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getCenterFlatHeaders=gi(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getRightFlatHeaders=gi(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getCenterLeafHeaders=gi(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),xi(e.options,vi)),e.getLeftLeafHeaders=gi(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),xi(e.options,vi)),e.getRightLeafHeaders=gi(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),xi(e.options,vi)),e.getLeafHeaders=gi(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var a,s,r,i,o,l;return[...null!=(a=null==(s=e[0])?void 0:s.headers)?a:[],...null!=(r=null==(i=t[0])?void 0:i.headers)?r:[],...null!=(o=null==(l=n[0])?void 0:l.headers)?o:[]].map(e=>e.getLeafHeaders()).flat()},xi(e.options,vi))}};function wi(e,t,n,a){var s,r;let i=0;const o=function(e,t){void 0===t&&(t=1),i=Math.max(i,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&o(e.columns,t+1)},0)};o(e);let l=[];const c=(e,t)=>{const s={depth:t,id:[a,`${t}`].filter(Boolean).join("_"),headers:[]},r=[];e.forEach(e=>{const i=[...r].reverse()[0];let o,l=!1;if(e.column.depth===s.depth&&e.column.parent?o=e.column.parent:(o=e.column,l=!0),i&&(null==i?void 0:i.column)===o)i.subHeaders.push(e);else{const s=yi(n,o,{id:[a,t,o.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:l,placeholderId:l?`${r.filter(e=>e.column===o).length}`:void 0,depth:t,index:r.length});s.subHeaders.push(e),r.push(s)}s.headers.push(e),e.headerGroup=s}),l.push(s),t>0&&c(r,t-1)},d=t.map((e,t)=>yi(n,e,{depth:i,index:t}));c(d,i-1),l.reverse();const u=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,a=[0];e.subHeaders&&e.subHeaders.length?(a=[],u(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:s}=e;t+=n,a.push(s)})):t=1;return n+=Math.min(...a),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return u(null!=(s=null==(r=l[0])?void 0:r.headers)?s:[]),l}const Si=(e,t,n,a,s,r,i)=>{let o={id:t,index:a,original:n,depth:s,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(o._valuesCache.hasOwnProperty(t))return o._valuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?(o._valuesCache[t]=n.accessorFn(o.original,a),o._valuesCache[t]):void 0},getUniqueValues:t=>{if(o._uniqueValuesCache.hasOwnProperty(t))return o._uniqueValuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?n.columnDef.getUniqueValues?(o._uniqueValuesCache[t]=n.columnDef.getUniqueValues(o.original,a),o._uniqueValuesCache[t]):(o._uniqueValuesCache[t]=[o.getValue(t)],o._uniqueValuesCache[t]):void 0},renderValue:t=>{var n;return null!=(n=o.getValue(t))?n:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>function(e,t){const n=[],a=e=>{e.forEach(e=>{n.push(e);const s=t(e);null!=s&&s.length&&a(s)})};return a(e),n}(o.subRows,e=>e.subRows),getParentRow:()=>o.parentId?e.getRow(o.parentId,!0):void 0,getParentRows:()=>{let e=[],t=o;for(;;){const n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:gi(()=>[e.getAllLeafColumns()],t=>t.map(t=>function(e,t,n,a){const s={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(a),renderValue:()=>{var t;return null!=(t=s.getValue())?t:e.options.renderFallbackValue},getContext:gi(()=>[e,n,t,s],(e,t,n,a)=>({table:e,column:t,row:n,cell:a,getValue:a.getValue,renderValue:a.renderValue}),xi(e.options,"debugCells"))};return e._features.forEach(a=>{null==a.createCell||a.createCell(s,n,t,e)},{}),s}(e,o,t,t.id)),xi(e.options,"debugRows")),_getAllCellsByColumnId:gi(()=>[o.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),xi(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const t=e._features[l];null==t||null==t.createRow||t.createRow(o,e)}return o},ji={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Ci=(e,t,n)=>{var a,s;const r=null==n||null==(a=n.toString())?void 0:a.toLowerCase();return Boolean(null==(s=e.getValue(t))||null==(s=s.toString())||null==(s=s.toLowerCase())?void 0:s.includes(r))};Ci.autoRemove=e=>Di(e);const ki=(e,t,n)=>{var a;return Boolean(null==(a=e.getValue(t))||null==(a=a.toString())?void 0:a.includes(n))};ki.autoRemove=e=>Di(e);const Ni=(e,t,n)=>{var a;return(null==(a=e.getValue(t))||null==(a=a.toString())?void 0:a.toLowerCase())===(null==n?void 0:n.toLowerCase())};Ni.autoRemove=e=>Di(e);const _i=(e,t,n)=>{var a;return null==(a=e.getValue(t))?void 0:a.includes(n)};_i.autoRemove=e=>Di(e);const Ei=(e,t,n)=>!n.some(n=>{var a;return!(null!=(a=e.getValue(t))&&a.includes(n))});Ei.autoRemove=e=>Di(e)||!(null!=e&&e.length);const Pi=(e,t,n)=>n.some(n=>{var a;return null==(a=e.getValue(t))?void 0:a.includes(n)});Pi.autoRemove=e=>Di(e)||!(null!=e&&e.length);const Ai=(e,t,n)=>e.getValue(t)===n;Ai.autoRemove=e=>Di(e);const Ri=(e,t,n)=>e.getValue(t)==n;Ri.autoRemove=e=>Di(e);const Ti=(e,t,n)=>{let[a,s]=n;const r=e.getValue(t);return r>=a&&r<=s};Ti.resolveFilterValue=e=>{let[t,n]=e,a="number"!=typeof t?parseFloat(t):t,s="number"!=typeof n?parseFloat(n):n,r=null===t||Number.isNaN(a)?-1/0:a,i=null===n||Number.isNaN(s)?1/0:s;if(r>i){const e=r;r=i,i=e}return[r,i]},Ti.autoRemove=e=>Di(e)||Di(e[0])&&Di(e[1]);const Mi={includesString:Ci,includesStringSensitive:ki,equalsString:Ni,arrIncludes:_i,arrIncludesAll:Ei,arrIncludesSome:Pi,equals:Ai,weakEquals:Ri,inNumberRange:Ti};function Di(e){return null==e||""===e}const Li={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:pi("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],a=null==n?void 0:n.getValue(e.id);return"string"==typeof a?Mi.includesString:"number"==typeof a?Mi.inNumberRange:"boolean"==typeof a||null!==a&&"object"==typeof a?Mi.equals:Array.isArray(a)?Mi.arrIncludes:Mi.weakEquals},e.getFilterFn=()=>{var n,a;return fi(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(a=t.options.filterFns)?void 0:a[e.columnDef.filterFn])?n:Mi[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,a,s;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(a=t.options.enableColumnFilters)||a)&&(null==(s=t.options.enableFilters)||s)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,a;return null!=(n=null==(a=t.getState().columnFilters)?void 0:a.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{const a=e.getFilterFn(),s=null==t?void 0:t.find(t=>t.id===e.id),r=mi(n,s?s.value:void 0);var i;if(Fi(a,r,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];const o={id:e.id,value:r};var l;return s?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?o:t))?l:[]:null!=t&&t.length?[...t,o]:[o]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var a;return null==(a=mi(t,e))?void 0:a.filter(e=>{const t=n.find(t=>t.id===e.id);if(t){if(Fi(t.getFilterFn(),e.value,t))return!1}return!0})})},e.resetColumnFilters=t=>{var n,a;e.setColumnFilters(t?[]:null!=(n=null==(a=e.initialState)?void 0:a.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Fi(e,t,n){return!(!e||!e.autoRemove)&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}const Ii={sum:(e,t,n)=>n.reduce((t,n)=>{const a=n.getValue(e);return t+("number"==typeof a?a:0)},0),min:(e,t,n)=>{let a;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(a>n||void 0===a&&n>=n)&&(a=n)}),a},max:(e,t,n)=>{let a;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(a<n||void 0===a&&n>=n)&&(a=n)}),a},extent:(e,t,n)=>{let a,s;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(void 0===a?n>=n&&(a=s=n):(a>n&&(a=n),s<n&&(s=n)))}),[a,s]},mean:(e,t)=>{let n=0,a=0;if(t.forEach(t=>{let s=t.getValue(e);null!=s&&(s=+s)>=s&&(++n,a+=s)}),n)return a/n},median:(e,t)=>{if(!t.length)return;const n=t.map(t=>t.getValue(e));if(a=n,!Array.isArray(a)||!a.every(e=>"number"==typeof e))return;var a;if(1===n.length)return n[0];const s=Math.floor(n.length/2),r=n.sort((e,t)=>e-t);return n.length%2!=0?r[s]:(r[s-1]+r[s])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},Oi={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:pi("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,a;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(a=t.options.enableGrouping)||a)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],a=null==n?void 0:n.getValue(e.id);return"number"==typeof a?Ii.sum:"[object Date]"===Object.prototype.toString.call(a)?Ii.extent:void 0},e.getAggregationFn=()=>{var n,a;if(!e)throw new Error;return fi(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(a=t.options.aggregationFns)?void 0:a[e.columnDef.aggregationFn])?n:Ii[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,a;e.setGrouping(t?[]:null!=(n=null==(a=e.initialState)?void 0:a.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const a=t.getColumn(n);return null!=a&&a.columnDef.getGroupingValue?(e._groupingValuesCache[n]=a.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,a)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=n.subRows)||!t.length)}}};const zi={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:pi("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=gi(e=>[Hi(t,e)],t=>t.findIndex(t=>t.id===e.id),xi(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var a;return(null==(a=Hi(t,n)[0])?void 0:a.id)===e.id},e.getIsLastColumn=n=>{var a;const s=Hi(t,n);return(null==(a=s[s.length-1])?void 0:a.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=gi(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>a=>{let s=[];if(null!=e&&e.length){const t=[...e],n=[...a];for(;n.length&&t.length;){const e=t.shift(),a=n.findIndex(t=>t.id===e);a>-1&&s.push(n.splice(a,1)[0])}s=[...s,...n]}else s=a;return function(e,t,n){if(null==t||!t.length||!n)return e;const a=e.filter(e=>!t.includes(e.id));return"remove"===n?a:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...a]}(s,t,n)},xi(e.options,"debugTable"))}},Bi={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:pi("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const a=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,s,r,i,o,l;return"right"===n?{left:(null!=(r=null==e?void 0:e.left)?r:[]).filter(e=>!(null!=a&&a.includes(e))),right:[...(null!=(i=null==e?void 0:e.right)?i:[]).filter(e=>!(null!=a&&a.includes(e))),...a]}:"left"===n?{left:[...(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=a&&a.includes(e))),...a],right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=a&&a.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=a&&a.includes(e))),right:(null!=(s=null==e?void 0:e.right)?s:[]).filter(e=>!(null!=a&&a.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,a,s;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(a=null!=(s=t.options.enableColumnPinning)?s:t.options.enablePinning)||a)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(e=>e.id),{left:a,right:s}=t.getState().columnPinning,r=n.some(e=>null==a?void 0:a.includes(e)),i=n.some(e=>null==s?void 0:s.includes(e));return r?"left":!!i&&"right"},e.getPinnedIndex=()=>{var n,a;const s=e.getIsPinned();return s?null!=(n=null==(a=t.getState().columnPinning)||null==(a=a[s])?void 0:a.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=gi(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{const a=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!a.includes(e.column.id))},xi(t.options,"debugRows")),e.getLeftVisibleCells=gi(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),xi(t.options,"debugRows")),e.getRightVisibleCells=gi(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),xi(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,a;return e.setColumnPinning(t?{left:[],right:[]}:null!=(n=null==(a=e.initialState)?void 0:a.columnPinning)?n:{left:[],right:[]})},e.getIsSomeColumnsPinned=t=>{var n;const a=e.getState().columnPinning;var s,r;return t?Boolean(null==(n=a[t])?void 0:n.length):Boolean((null==(s=a.left)?void 0:s.length)||(null==(r=a.right)?void 0:r.length))},e.getLeftLeafColumns=gi(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),xi(e.options,"debugColumns")),e.getRightLeafColumns=gi(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),xi(e.options,"debugColumns")),e.getCenterLeafColumns=gi(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{const a=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!a.includes(e.id))},xi(e.options,"debugColumns"))}};const $i={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ui={getDefaultColumnDef:()=>$i,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:pi("columnSizing",e),onColumnSizingInfoChange:pi("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,a,s;const r=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:$i.minSize,null!=(a=null!=r?r:e.columnDef.size)?a:$i.size),null!=(s=e.columnDef.maxSize)?s:$i.maxSize)},e.getStart=gi(e=>[e,Hi(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),xi(t.options,"debugColumns")),e.getAfter=gi(e=>[e,Hi(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),xi(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...a}=t;return a})},e.getCanResize=()=>{var n,a;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(a=t.options.enableColumnResizing)||a)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0;const n=e=>{var a;e.subHeaders.length?e.subHeaders.forEach(n):t+=null!=(a=e.column.getSize())?a:0};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{const a=t.getColumn(e.column.id),s=null==a?void 0:a.getCanResize();return r=>{if(!a||!s)return;if(null==r.persist||r.persist(),qi(r)&&r.touches&&r.touches.length>1)return;const i=e.getSize(),o=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[a.id,a.getSize()]],l=qi(r)?Math.round(r.touches[0].clientX):r.clientX,c={},d=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var a,s;const r="rtl"===t.options.columnResizeDirection?-1:1,i=(n-(null!=(a=null==e?void 0:e.startOffset)?a:0))*r,o=Math.max(i/(null!=(s=null==e?void 0:e.startSize)?s:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;c[t]=Math.round(100*Math.max(n+n*o,0))/100}),{...e,deltaOffset:i,deltaPercentage:o}}),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing(e=>({...e,...c})))},u=e=>d("move",e),h=e=>{d("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=n||("undefined"!=typeof document?document:null);const p={moveHandler:e=>u(e.clientX),upHandler:e=>{null==m||m.removeEventListener("mousemove",p.moveHandler),null==m||m.removeEventListener("mouseup",p.upHandler),h(e.clientX)}},f={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(e.touches[0].clientX),!1),upHandler:e=>{var t;null==m||m.removeEventListener("touchmove",f.moveHandler),null==m||m.removeEventListener("touchend",f.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),h(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof Vi)return Vi;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(t){e=!1}return Vi=e,Vi}()&&{passive:!1};qi(r)?(null==m||m.addEventListener("touchmove",f.moveHandler,g),null==m||m.addEventListener("touchend",f.upHandler,g)):(null==m||m.addEventListener("mousemove",p.moveHandler,g),null==m||m.addEventListener("mouseup",p.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:l,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:a.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(n=e.initialState.columnSizingInfo)?n:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}};let Vi=null;function qi(e){return"touchstart"===e.type}function Hi(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Gi={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:pi("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();const a={...n},s=e.getPreGroupedRowModel().flatRows;return t?s.forEach(e=>{e.getCanSelect()&&(a[e.id]=!0)}):s.forEach(e=>{delete a[e.id]}),a})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const a=void 0!==t?t:!e.getIsAllPageRowsSelected(),s={...n};return e.getRowModel().rows.forEach(t=>{Ki(s,t.id,a,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=gi(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Wi(e,n):{rows:[],flatRows:[],rowsById:{}},xi(e.options,"debugTable")),e.getFilteredSelectedRowModel=gi(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Wi(e,n):{rows:[],flatRows:[],rowsById:{}},xi(e.options,"debugTable")),e.getGroupedSelectedRowModel=gi(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Wi(e,n):{rows:[],flatRows:[],rowsById:{}},xi(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let a=Boolean(t.length&&Object.keys(n).length);return a&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(a=!1),a},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState();let a=!!t.length;return a&&t.some(e=>!n[e.id])&&(a=!1),a},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,a)=>{const s=e.getIsSelected();t.setRowSelection(r=>{var i;if(n=void 0!==n?n:!s,e.getCanSelect()&&s===n)return r;const o={...r};return Ki(o,e.id,n,null==(i=null==a?void 0:a.selectChildren)||i,t),o})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Qi(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return"some"===Yi(e,n)},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return"all"===Yi(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var a;t&&e.toggleSelected(null==(a=n.target)?void 0:a.checked)}}}},Ki=(e,t,n,a,s)=>{var r;const i=s.getRow(t,!0);n?(i.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),i.getCanSelect()&&(e[t]=!0)):delete e[t],a&&null!=(r=i.subRows)&&r.length&&i.getCanSelectSubRows()&&i.subRows.forEach(t=>Ki(e,t.id,n,a,s))};function Wi(e,t){const n=e.getState().rowSelection,a=[],s={},r=function(e,t){return e.map(e=>{var t;const i=Qi(e,n);if(i&&(a.push(e),s[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:r(e.subRows)}),i)return e}).filter(Boolean)};return{rows:r(t.rows),flatRows:a,rowsById:s}}function Qi(e,t){var n;return null!=(n=t[e.id])&&n}function Yi(e,t,n){var a;if(null==(a=e.subRows)||!a.length)return!1;let s=!0,r=!1;return e.subRows.forEach(e=>{if((!r||s)&&(e.getCanSelect()&&(Qi(e,t)?r=!0:s=!1),e.subRows&&e.subRows.length)){const n=Yi(e,t);"all"===n?r=!0:"some"===n?(r=!0,s=!1):s=!1}}),s?"all":!!r&&"some"}const Xi=/([0-9]+)/gm;function Zi(e,t){return e===t?0:e>t?1:-1}function Ji(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function eo(e,t){const n=e.split(Xi).filter(Boolean),a=t.split(Xi).filter(Boolean);for(;n.length&&a.length;){const e=n.shift(),t=a.shift(),s=parseInt(e,10),r=parseInt(t,10),i=[s,r].sort();if(isNaN(i[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(i[1]))return isNaN(s)?-1:1;if(s>r)return 1;if(r>s)return-1}}return n.length-a.length}const to={alphanumeric:(e,t,n)=>eo(Ji(e.getValue(n)).toLowerCase(),Ji(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>eo(Ji(e.getValue(n)),Ji(t.getValue(n))),text:(e,t,n)=>Zi(Ji(e.getValue(n)).toLowerCase(),Ji(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>Zi(Ji(e.getValue(n)),Ji(t.getValue(n))),datetime:(e,t,n)=>{const a=e.getValue(n),s=t.getValue(n);return a>s?1:a<s?-1:0},basic:(e,t,n)=>Zi(e.getValue(n),t.getValue(n))},no=[bi,{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:pi("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,a;const s=e.columns;return null==(n=s.length?s.some(e=>e.getIsVisible()):null==(a=t.getState().columnVisibility)?void 0:a[e.id])||n},e.getCanHide=()=>{var n,a;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(a=t.options.enableHiding)||a)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=gi(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),xi(t.options,"debugRows")),e.getVisibleCells=gi(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],xi(t.options,"debugRows"))},createTable:e=>{const t=(t,n)=>gi(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),xi(e.options,"debugColumns"));e.getVisibleFlatColumns=t(0,()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t(0,()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t(0,()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t(0,()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t(0,()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},zi,Bi,ji,Li,{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:pi("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const a=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof a||"number"==typeof a}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,a,s,r;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(a=t.options.enableGlobalFilter)||a)&&(null==(s=t.options.enableFilters)||s)&&(null==(r=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||r)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Mi.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:a}=e.options;return fi(a)?a:"auto"===a?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[a])?t:Mi[a]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:pi("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let a=!1;for(const t of n){const n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return to.datetime;if("string"==typeof n&&(a=!0,n.split(Xi).length>1))return to.alphanumeric}return a?to.text:to.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,a;if(!e)throw new Error;return fi(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(a=t.options.sortingFns)?void 0:a[e.columnDef.sortingFn])?n:to[e.columnDef.sortingFn]},e.toggleSorting=(n,a)=>{const s=e.getNextSortingOrder(),r=null!=n;t.setSorting(i=>{const o=null==i?void 0:i.find(t=>t.id===e.id),l=null==i?void 0:i.findIndex(t=>t.id===e.id);let c,d=[],u=r?n:"desc"===s;var h;(c=null!=i&&i.length&&e.getCanMultiSort()&&a?o?"toggle":"add":null!=i&&i.length&&l!==i.length-1?"replace":o?"toggle":"replace","toggle"===c&&(r||s||(c="remove")),"add"===c)?(d=[...i,{id:e.id,desc:u}],d.splice(0,d.length-(null!=(h=t.options.maxMultiSortColCount)?h:Number.MAX_SAFE_INTEGER))):d="toggle"===c?i.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===c?i.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return d})},e.getFirstSortDir=()=>{var n,a;return(null!=(n=null!=(a=e.columnDef.sortDescFirst)?a:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var a,s;const r=e.getFirstSortDir(),i=e.getIsSorted();return i?!!(i===r||null!=(a=t.options.enableSortingRemoval)&&!a||n&&null!=(s=t.options.enableMultiRemove)&&!s)&&("desc"===i?"asc":"desc"):r},e.getCanSort=()=>{var n,a;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(a=t.options.enableSorting)||a)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,a;return null!=(n=null!=(a=e.columnDef.enableMultiSort)?a:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const a=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!a&&(a.desc?"desc":"asc")},e.getSortIndex=()=>{var n,a;return null!=(n=null==(a=t.getState().sorting)?void 0:a.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return a=>{n&&(null==a.persist||a.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(a))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,a;e.setSorting(t?[]:null!=(n=null==(a=e.initialState)?void 0:a.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Oi,{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:pi("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var a,s;if(t){if(null!=(a=null!=(s=e.options.autoResetAll)?s:e.options.autoResetExpanded)?a:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}}else e._queue(()=>{t=!0})},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,a;e.setExpanded(t?{}:null!=(n=null==(a=e.initialState)?void 0:a.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{const t=e.getState().expanded;return"boolean"==typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some(e=>!e.getIsExpanded())},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{const n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(a=>{var s;const r=!0===a||!(null==a||!a[e.id]);let i={};if(!0===a?Object.keys(t.getRowModel().rowsById).forEach(e=>{i[e]=!0}):i=a,n=null!=(s=n)?s:!r,!r&&n)return{...i,[e.id]:!0};if(r&&!n){const{[e.id]:t,...n}=i;return n}return a})},e.getIsExpanded=()=>{var n;const a=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===a||(null==a?void 0:a[e.id]))},e.getCanExpand=()=>{var n,a,s;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(a=t.options.enableExpanding)||a)&&!(null==(s=e.subRows)||!s.length)},e.getIsAllParentsExpanded=()=>{let n=!0,a=e;for(;n&&a.parentId;)a=t.getRow(a.parentId,!0),n=a.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:pi("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var a,s;if(t){if(null!=(a=null!=(s=e.options.autoResetAll)?s:e.options.autoResetPageIndex)?a:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}}else e._queue(()=>{t=!0})},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>mi(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(n=e.initialState.pagination)?n:{pageIndex:0,pageSize:10})},e.setPageIndex=t=>{e.setPagination(n=>{let a=mi(t,n.pageIndex);const s=void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return a=Math.max(0,Math.min(a,s)),{...n,pageIndex:a}})},e.resetPageIndex=t=>{var n,a;e.setPageIndex(t?0:null!=(n=null==(a=e.initialState)||null==(a=a.pagination)?void 0:a.pageIndex)?n:0)},e.resetPageSize=t=>{var n,a;e.setPageSize(t?10:null!=(n=null==(a=e.initialState)||null==(a=a.pagination)?void 0:a.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{const n=Math.max(1,mi(t,e.pageSize)),a=e.pageSize*e.pageIndex,s=Math.floor(a/n);return{...e,pageIndex:s,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var a;let s=mi(t,null!=(a=e.options.pageCount)?a:-1);return"number"==typeof s&&(s=Math.max(-1,s)),{...n,pageCount:s}}),e.getPageOptions=gi(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map((e,t)=>t)),t},xi(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return-1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:{top:[],bottom:[]},...e}),getDefaultOptions:e=>({onRowPinningChange:pi("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,a,s)=>{const r=a?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],i=s?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],o=new Set([...i,e.id,...r]);t.setRowPinning(e=>{var t,a,s,r,i,l;return"bottom"===n?{top:(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=o&&o.has(e))),bottom:[...(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)]}:"top"===n?{top:[...(null!=(i=null==e?void 0:e.top)?i:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)],bottom:(null!=(l=null==e?void 0:e.bottom)?l:[]).filter(e=>!(null!=o&&o.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=o&&o.has(e))),bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=o&&o.has(e)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:a,enablePinning:s}=t.options;return"function"==typeof a?a(e):null==(n=null!=a?a:s)||n},e.getIsPinned=()=>{const n=[e.id],{top:a,bottom:s}=t.getState().rowPinning,r=n.some(e=>null==a?void 0:a.includes(e)),i=n.some(e=>null==s?void 0:s.includes(e));return r?"top":!!i&&"bottom"},e.getPinnedIndex=()=>{var n,a;const s=e.getIsPinned();if(!s)return-1;const r=null==(n="top"===s?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(a=null==r?void 0:r.indexOf(e.id))?a:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,a;return e.setRowPinning(t?{top:[],bottom:[]}:null!=(n=null==(a=e.initialState)?void 0:a.rowPinning)?n:{top:[],bottom:[]})},e.getIsSomeRowsPinned=t=>{var n;const a=e.getState().rowPinning;var s,r;return t?Boolean(null==(n=a[t])?void 0:n.length):Boolean((null==(s=a.top)?void 0:s.length)||(null==(r=a.bottom)?void 0:r.length))},e._getPinnedRows=(t,n,a)=>{var s;return(null==(s=e.options.keepPinnedRows)||s?(null!=n?n:[]).map(t=>{const n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:a}))},e.getTopRows=gi(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),xi(e.options,"debugRows")),e.getBottomRows=gi(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),xi(e.options,"debugRows")),e.getCenterRows=gi(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{const a=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!a.has(e.id))},xi(e.options,"debugRows"))}},Gi,Ui];function ao(e){var t,n;const a=[...no,...null!=(t=e._features)?t:[]];let s={_features:a};const r=s._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(s)),{});let i={...null!=(n=e.initialState)?n:{}};s._features.forEach(e=>{var t;i=null!=(t=null==e.getInitialState?void 0:e.getInitialState(i))?t:i});const o=[];let l=!1;const c={_features:a,options:{...r,...e},initialState:i,_queue:e=>{o.push(e),l||(l=!0,Promise.resolve().then(()=>{for(;o.length;)o.shift()();l=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{s.setState(s.initialState)},setOptions:e=>{const t=mi(e,s.options);var n;s.options=(n=t,s.options.mergeOptions?s.options.mergeOptions(r,n):{...r,...n})},getState:()=>s.options.state,setState:e=>{null==s.options.onStateChange||s.options.onStateChange(e)},_getRowId:(e,t,n)=>{var a;return null!=(a=null==s.options.getRowId?void 0:s.options.getRowId(e,t,n))?a:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?s.getPrePaginationRowModel():s.getRowModel()).rowsById[e];if(!n&&(n=s.getCoreRowModel().rowsById[e],!n))throw new Error;return n},_getDefaultColumnDef:gi(()=>[s.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...s._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},xi(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:gi(()=>[s._getColumnDefs()],e=>{const t=function(e,n,a){return void 0===a&&(a=0),e.map(e=>{const r=function(e,t,n,a){var s,r;const i={...e._getDefaultColumnDef(),...t},o=i.accessorKey;let l,c=null!=(s=null!=(r=i.id)?r:o?"function"==typeof String.prototype.replaceAll?o.replaceAll(".","_"):o.replace(/\./g,"_"):void 0)?s:"string"==typeof i.header?i.header:void 0;if(i.accessorFn?l=i.accessorFn:o&&(l=o.includes(".")?e=>{let t=e;for(const a of o.split(".")){var n;t=null==(n=t)?void 0:n[a]}return t}:e=>e[i.accessorKey]),!c)throw new Error;let d={id:`${String(c)}`,accessorFn:l,parent:a,depth:n,columnDef:i,columns:[],getFlatColumns:gi(()=>[!0],()=>{var e;return[d,...null==(e=d.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},xi(e.options,"debugColumns")),getLeafColumns:gi(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=d.columns)&&t.length?e(d.columns.flatMap(e=>e.getLeafColumns())):[d]},xi(e.options,"debugColumns"))};for(const u of e._features)null==u.createColumn||u.createColumn(d,e);return d}(s,e,a,n),i=e;return r.columns=i.columns?t(i.columns,r,a+1):[],r})};return t(e)},xi(e,"debugColumns")),getAllFlatColumns:gi(()=>[s.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),xi(e,"debugColumns")),_getAllFlatColumnsById:gi(()=>[s.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),xi(e,"debugColumns")),getAllLeafColumns:gi(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),xi(e,"debugColumns")),getColumn:e=>s._getAllFlatColumnsById()[e]};Object.assign(s,c);for(let d=0;d<s._features.length;d++){const e=s._features[d];null==e||null==e.createTable||e.createTable(s)}return s}function so(e,t,n){return n.options.filterFromLeafRows?function(e,t,n){var a;const s=[],r={},i=null!=(a=n.options.maxLeafRowFilterDepth)?a:100,o=function(e,a){void 0===a&&(a=0);const l=[];for(let d=0;d<e.length;d++){var c;let u=e[d];const h=Si(n,u.id,u.original,u.index,u.depth,0,u.parentId);if(h.columnFilters=u.columnFilters,null!=(c=u.subRows)&&c.length&&a<i){if(h.subRows=o(u.subRows,a+1),u=h,t(u)&&!h.subRows.length){l.push(u),r[u.id]=u,s.push(u);continue}if(t(u)||h.subRows.length){l.push(u),r[u.id]=u,s.push(u);continue}}else u=h,t(u)&&(l.push(u),r[u.id]=u,s.push(u))}return l};return{rows:o(e),flatRows:s,rowsById:r}}(e,t,n):function(e,t,n){var a;const s=[],r={},i=null!=(a=n.options.maxLeafRowFilterDepth)?a:100,o=function(e,a){void 0===a&&(a=0);const l=[];for(let d=0;d<e.length;d++){let u=e[d];if(t(u)){var c;if(null!=(c=u.subRows)&&c.length&&a<i){const e=Si(n,u.id,u.original,u.index,u.depth,0,u.parentId);e.subRows=o(u.subRows,a+1),u=e}l.push(u),s.push(u),r[u.id]=u}}return l};return{rows:o(e),flatRows:s,rowsById:r}}(e,t,n)}function ro(e,t){return e?function(e){return"function"==typeof e&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}(n=e)||"function"==typeof n||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(n)?p.createElement(e,t):e:null;var n}function io(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=io(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function oo(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=io(e))&&(a&&(a+=" "),a+=t);return a}const lo=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,co=oo,uo=(e,t)=>n=>{var a;if(null==(null==t?void 0:t.variants))return co(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:r}=t,i=Object.keys(s).map(e=>{const t=null==n?void 0:n[e],a=null==r?void 0:r[e];if(null===t)return null;const i=lo(t)||lo(a);return s[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,a]=t;return void 0===a||(e[n]=a),e},{}),l=null==t||null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:n,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...r,...o}[t]):{...r,...o}[t]===n})?[...e,n,a]:e},[]);return co(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},ho=e=>{const t=go(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),mo(n,t)||fo(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&a[e]?[...s,...a[e]]:s}}},mo=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),s=a?mo(e.slice(1),a):void 0;if(s)return s;if(0===t.validators.length)return;const r=e.join("-");return t.validators.find(({validator:e})=>e(r))?.classGroupId},po=/^\[(.+)\]$/,fo=e=>{if(po.test(e)){const t=po.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},go=e=>{const{theme:t,prefix:n}=e,a={nextPart:new Map,validators:[]};return bo(Object.entries(e.classGroups),n).forEach(([e,n])=>{xo(n,a,e,t)}),a},xo=(e,t,n,a)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:vo(t,e)).classGroupId=n)}if("function"==typeof e)return yo(e)?void xo(e(a),t,n,a):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,s])=>{xo(s,vo(t,e),n,a)})})},vo=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},yo=e=>e.isThemeGetter,bo=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,wo=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,a=new Map;const s=(s,r)=>{n.set(s,r),t++,t>e&&(t=0,a=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},So=e=>{const{separator:t,experimentalParseClassName:n}=e,a=1===t.length,s=t[0],r=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===s&&(a||e.slice(u,u+r)===t)){n.push(e.slice(l,u)),l=u+r;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:n,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},jo=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Co=/\s+/;function ko(){let e,t,n=0,a="";for(;n<arguments.length;)(e=arguments[n++])&&(t=No(e))&&(a&&(a+=" "),a+=t);return a}const No=e=>{if("string"==typeof e)return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=No(e[a]))&&(n&&(n+=" "),n+=t);return n};function _o(e,...t){let n,a,s,r=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:wo(e.cacheSize),parseClassName:So(e),...ho(e)}))(l),a=n.cache.get,s=n.cache.set,r=i,i(o)};function i(e){const t=a(e);if(t)return t;const r=((e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:s}=t,r=[],i=e.trim().split(Co);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=n(e);let h=Boolean(u),m=a(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=a(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=jo(t).join(":"),f=c?p+"!":p,g=f+m;if(r.includes(g))continue;r.push(g);const x=s(m,h);for(let n=0;n<x.length;++n){const e=x[n];r.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return s(e,r),r}return function(){return r(ko.apply(null,arguments))}}const Eo=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Po=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ao=/^\d+\/\d+$/,Ro=new Set(["px","full","screen"]),To=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Mo=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Do=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Lo=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Io=e=>zo(e)||Ro.has(e)||Ao.test(e),Oo=e=>Zo(e,"length",Jo),zo=e=>Boolean(e)&&!Number.isNaN(Number(e)),Bo=e=>Zo(e,"number",zo),$o=e=>Boolean(e)&&Number.isInteger(Number(e)),Uo=e=>e.endsWith("%")&&zo(e.slice(0,-1)),Vo=e=>Po.test(e),qo=e=>To.test(e),Ho=new Set(["length","size","percentage"]),Go=e=>Zo(e,Ho,el),Ko=e=>Zo(e,"position",el),Wo=new Set(["image","url"]),Qo=e=>Zo(e,Wo,nl),Yo=e=>Zo(e,"",tl),Xo=()=>!0,Zo=(e,t,n)=>{const a=Po.exec(e);return!!a&&(a[1]?"string"==typeof t?a[1]===t:t.has(a[1]):n(a[2]))},Jo=e=>Mo.test(e)&&!Do.test(e),el=()=>!1,tl=e=>Lo.test(e),nl=e=>Fo.test(e),al=_o(()=>{const e=Eo("colors"),t=Eo("spacing"),n=Eo("blur"),a=Eo("brightness"),s=Eo("borderColor"),r=Eo("borderRadius"),i=Eo("borderSpacing"),o=Eo("borderWidth"),l=Eo("contrast"),c=Eo("grayscale"),d=Eo("hueRotate"),u=Eo("invert"),h=Eo("gap"),m=Eo("gradientColorStops"),p=Eo("gradientColorStopPositions"),f=Eo("inset"),g=Eo("margin"),x=Eo("opacity"),v=Eo("padding"),y=Eo("saturate"),b=Eo("scale"),w=Eo("sepia"),S=Eo("skew"),j=Eo("space"),C=Eo("translate"),k=()=>["auto",Vo,t],N=()=>[Vo,t],_=()=>["",Io,Oo],E=()=>["auto",zo,Vo],P=()=>["","0",Vo],A=()=>[zo,Vo];return{cacheSize:500,separator:":",theme:{colors:[Xo],spacing:[Io,Oo],blur:["none","",qo,Vo],brightness:A(),borderColor:[e],borderRadius:["none","","full",qo,Vo],borderSpacing:N(),borderWidth:_(),contrast:A(),grayscale:P(),hueRotate:A(),invert:P(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[Uo,Oo],inset:k(),margin:k(),opacity:A(),padding:N(),saturate:A(),scale:A(),sepia:P(),skew:A(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Vo]}],container:["container"],columns:[{columns:[qo]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Vo]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$o,Vo]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Vo]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",$o,Vo]}],"grid-cols":[{"grid-cols":[Xo]}],"col-start-end":[{col:["auto",{span:["full",$o,Vo]},Vo]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[Xo]}],"row-start-end":[{row:["auto",{span:[$o,Vo]},Vo]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Vo]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Vo]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Vo,t]}],"min-w":[{"min-w":[Vo,t,"min","max","fit"]}],"max-w":[{"max-w":[Vo,t,"none","full","min","max","fit","prose",{screen:[qo]},qo]}],h:[{h:[Vo,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Vo,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Vo,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Vo,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qo,Oo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Bo]}],"font-family":[{font:[Xo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Vo]}],"line-clamp":[{"line-clamp":["none",zo,Bo]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Io,Vo]}],"list-image":[{"list-image":["none",Vo]}],"list-style-type":[{list:["none","disc","decimal",Vo]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Io,Oo]}],"underline-offset":[{"underline-offset":["auto",Io,Vo]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vo]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vo]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ko]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Go]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Qo]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Io,Vo]}],"outline-w":[{outline:[Io,Oo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Io,Oo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qo,Yo]}],"shadow-color":[{shadow:[Xo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",qo,Vo]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Vo]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",Vo]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",Vo]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[$o,Vo]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Vo]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vo]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vo]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Io,Oo,Bo]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function sl(...e){return al(oo(e))}const rl=uo("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),il=p.forwardRef(({className:e,variant:t,...n},a)=>c.jsx("div",{ref:a,role:"alert",className:sl(rl({variant:t}),e),...n}));il.displayName="Alert";p.forwardRef(({className:e,...t},n)=>c.jsx("h5",{ref:n,className:sl("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const ol=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("text-sm [&_p]:leading-relaxed",e),...t}));function ll(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function cl(...e){return t=>{let n=!1;const a=e.map(e=>{const a=ll(e,t);return n||"function"!=typeof a||(n=!0),a});if(n)return()=>{for(let t=0;t<a.length;t++){const n=a[t];"function"==typeof n?n():ll(e[t],null)}}}}function dl(...e){return p.useCallback(cl(...e),e)}ol.displayName="AlertDescription";var ul=Symbol.for("react.lazy"),hl=g[" use ".trim().toString()];function ml(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===ul&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function pl(e){const t=gl(e),n=p.forwardRef((e,n)=>{let{children:a,...s}=e;ml(a)&&"function"==typeof hl&&(a=hl(a._payload));const r=p.Children.toArray(a),i=r.find(vl);if(i){const e=i.props.children,a=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...s,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,a):null})}return c.jsx(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}var fl=pl("Slot");function gl(e){const t=p.forwardRef((e,t)=>{let{children:n,...a}=e;if(ml(n)&&"function"==typeof hl&&(n=hl(n._payload)),p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const a in t){const s=e[a],r=t[a];/^on[A-Z]/.test(a)?s&&r?n[a]=(...e)=>{const t=r(...e);return s(...e),t}:s&&(n[a]=s):"style"===a?n[a]={...s,...r}:"className"===a&&(n[a]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==p.Fragment&&(s.ref=t?cl(t,e):e),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xl=Symbol("radix.slottable");function vl(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===xl}const yl=uo("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),bl=p.forwardRef(({className:e,variant:t,size:n,asChild:a=!1,...s},r)=>{const i=function(){let e=null;try{const t=require("@truths/utils");t&&t.useDensityStyles&&(e=t.useDensityStyles())}catch{}return e}(),o=a?fl:"button";let l="";return i&&("default"===n||void 0===n?l=i.buttonHeight:"sm"===n?l=i.buttonHeightSmall:"icon"===n&&(l=i.buttonHeight)),c.jsx(o,{className:sl(yl({variant:t,size:n}),l&&"[&]:h-auto",l,e),ref:r,...s})});function wl(){let e=null;try{const t=require("@truths/utils");t&&"function"==typeof t.useDensityStyles&&(e=t.useDensityStyles())}catch{}return e}bl.displayName="Button";const Sl=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("rounded-lg border bg-card text-card-foreground shadow-sm transition-shadow",e),...t}));Sl.displayName="Card";const jl=p.forwardRef(({className:e,...t},n)=>{const a=wl(),s=a?.paddingCardHeader||"p-6";return c.jsx("div",{ref:n,className:sl("flex flex-col space-y-1.5",s,e),...t})});jl.displayName="CardHeader";const Cl=p.forwardRef(({className:e,...t},n)=>{const a=wl(),s=a?.textSizeCardTitle||"text-2xl";return c.jsx("h3",{ref:n,className:sl("font-semibold leading-none tracking-tight",s,e),...t})});Cl.displayName="CardTitle";const kl=p.forwardRef(({className:e,...t},n)=>{const a=wl(),s=a?.textSizeCardDescription||"text-sm";return c.jsx("p",{ref:n,className:sl("text-muted-foreground",s,e),...t})});kl.displayName="CardDescription";const Nl=p.forwardRef(({className:e,...t},n)=>{const a=wl(),s=a?.paddingCardContent||"p-6 pt-0";return c.jsx("div",{ref:n,className:sl(s,e),...t})});Nl.displayName="CardContent";p.forwardRef(({className:e,...t},n)=>{const a=wl(),s=a?.paddingCardFooter||"p-6 pt-0";return c.jsx("div",{ref:n,className:sl("flex items-center",s,e),...t})}).displayName="CardFooter";const _l=p.forwardRef(({className:e,type:t,...n},a)=>{const s=function(){let e=null;try{const t=require("@truths/utils");t&&t.useDensityStyles&&(e=t.useDensityStyles())}catch{}return e}(),r=s?.inputHeight||"h-10",i=s?.textSize||"text-sm";return c.jsx("input",{type:t,className:sl("flex w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:font-medium placeholder:text-muted-foreground placeholder:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",r,i,"file:text-sm",e),ref:a,...n})});_l.displayName="Input";p.forwardRef(({className:e,children:t,orientation:n,...a},s)=>{const r="vertical"===n||p.Children.toArray(t).some(e=>{if(p.isValidElement(e)){const t=e.type;return"InputGroupTextarea"===("object"==typeof t&&null!==t?t?.displayName:null)||e.props?.children&&p.isValidElement(e.props.children)&&"textarea"===e.props.children.type}return!1});return c.jsx("div",{ref:s,className:sl("flex border rounded-md overflow-hidden",r?"flex-col":"items-center",e),...a,children:t})}).displayName="InputGroup";p.forwardRef(({className:e,...t},n)=>c.jsx("input",{ref:n,className:sl("flex h-10 flex-1 border-0 bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),...t})).displayName="InputGroupInput";p.forwardRef(({className:e,align:t="start",...n},a)=>{const s="block-end"===t,r="end"===t||"inline-end"===t;return c.jsx("div",{ref:a,className:sl("flex items-center px-3 py-2 text-sm text-muted-foreground bg-muted/50",s?"border-t w-full":r?"border-l":"border-r",e),...n})}).displayName="InputGroupAddon";p.forwardRef(({className:e,...t},n)=>c.jsx("span",{ref:n,className:sl("text-sm text-muted-foreground",e),...t})).displayName="InputGroupText";p.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{ref:n,className:sl("flex min-h-[80px] w-full flex-1 border-0 bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 resize-none",e),...t})).displayName="InputGroupTextarea";var El=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=pl(`Primitive.${t}`),a=p.forwardRef((e,a)=>{const{asChild:s,...r}=e,i=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),Pl=p.forwardRef((e,t)=>c.jsx(El.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Pl.displayName="Label";var Al=Pl;const Rl=p.forwardRef(({className:e,"data-invalid":t,...n},a)=>c.jsx("div",{ref:a,"data-invalid":t,className:sl("space-y-2",e),...n}));Rl.displayName="Field";p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("space-y-4",e),...t})).displayName="FieldGroup";const Tl=p.forwardRef(({className:e,...t},n)=>c.jsx(Al,{ref:n,className:sl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));Tl.displayName="FieldLabel";p.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:sl("text-sm text-muted-foreground",e),...t})).displayName="FieldDescription";const Ml=p.forwardRef(({className:e,errors:t,children:n,...a},s)=>{if(!t&&!n)return null;const r=t?t.map(e=>"string"==typeof e?e:e?.message||""):[];return 0!==r.length||n?c.jsx("p",{ref:s,className:sl("text-sm font-medium text-destructive",e),...a,children:n||r.join(", ")}):null});Ml.displayName="FieldError";const Dl=p.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{className:sl("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Dl.displayName="Textarea";const Ll=uo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Fl=p.forwardRef(({className:e,...t},n)=>c.jsx(Al,{ref:n,className:sl(Ll(),e),...t}));Fl.displayName=Al.displayName;const Il=({onSubmit:e,children:t,...n})=>c.jsx("form",{onSubmit:e,...n,children:t}),Ol=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("space-y-2",e),...t}));Ol.displayName="FormItem";const zl=p.forwardRef(({className:e,...t},n)=>c.jsx(Al,{ref:n,className:sl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));zl.displayName="FormLabel";const Bl=p.forwardRef(({...e},t)=>c.jsx("div",{ref:t,...e}));Bl.displayName="FormControl";const $l=p.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:sl("text-sm text-muted-foreground",e),...t}));$l.displayName="FormDescription";const Ul=p.forwardRef(({className:e,children:t,...n},a)=>t?c.jsx("p",{ref:a,className:sl("text-sm font-medium text-destructive",e),...n,children:t}):null);function Vl(e,[t,n]){return Math.min(n,Math.max(t,e))}function ql(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),!1===n||!a.defaultPrevented)return t?.(a)}}function Hl(e,t=[]){let n=[];const a=()=>{const t=n.map(e=>p.createContext(e));return function(n){const a=n?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...n,[e]:a}}),[n,a])}};return a.scopeName=e,[function(t,a){const s=p.createContext(a),r=n.length;n=[...n,a];const i=t=>{const{scope:n,children:a,...i}=t,o=n?.[e]?.[r]||s,l=p.useMemo(()=>i,Object.values(i));return c.jsx(o.Provider,{value:l,children:a})};return i.displayName=t+"Provider",[i,function(n,i){const o=i?.[e]?.[r]||s,l=p.useContext(o);if(l)return l;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Gl(a,...t)]}function Gl(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const a=n.reduce((t,{useScope:n,scopeName:a})=>({...t,...n(e)[`__scope${a}`]}),{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Kl(e){const t=Wl(e),n=p.forwardRef((e,n)=>{const{children:a,...s}=e,r=p.Children.toArray(a),i=r.find(Yl);if(i){const e=i.props.children,a=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...s,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,a):null})}return c.jsx(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}function Wl(e){const t=p.forwardRef((e,t)=>{const{children:n,...a}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const a in t){const s=e[a],r=t[a];/^on[A-Z]/.test(a)?s&&r?n[a]=(...e)=>{const t=r(...e);return s(...e),t}:s&&(n[a]=s):"style"===a?n[a]={...s,...r}:"className"===a&&(n[a]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==p.Fragment&&(s.ref=t?cl(t,e):e),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Ul.displayName="FormMessage";var Ql=Symbol("radix.slottable");function Yl(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Ql}function Xl(e){const t=e+"CollectionProvider",[n,a]=Hl(t),[s,r]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:n}=e,a=f.useRef(null),r=f.useRef(new Map).current;return c.jsx(s,{scope:t,itemMap:r,collectionRef:a,children:n})};i.displayName=t;const o=e+"CollectionSlot",l=Kl(o),d=f.forwardRef((e,t)=>{const{scope:n,children:a}=e,s=dl(t,r(o,n).collectionRef);return c.jsx(l,{ref:s,children:a})});d.displayName=o;const u=e+"CollectionItemSlot",h="data-radix-collection-item",m=Kl(u),p=f.forwardRef((e,t)=>{const{scope:n,children:a,...s}=e,i=f.useRef(null),o=dl(t,i),l=r(u,n);return f.useEffect(()=>(l.itemMap.set(i,{ref:i,...s}),()=>{l.itemMap.delete(i)})),c.jsx(m,{[h]:"",ref:o,children:a})});return p.displayName=u,[{Provider:i,Slot:d,ItemSlot:p},function(t){const n=r(e+"CollectionConsumer",t);return f.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},a]}var Zl=p.createContext(void 0);function Jl(e){const t=p.useContext(Zl);return e||t||"ltr"}function ec(e){const t=tc(e),n=p.forwardRef((e,n)=>{const{children:a,...s}=e,r=p.Children.toArray(a),i=r.find(ac);if(i){const e=i.props.children,a=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...s,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,a):null})}return c.jsx(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}function tc(e){const t=p.forwardRef((e,t)=>{const{children:n,...a}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const a in t){const s=e[a],r=t[a];/^on[A-Z]/.test(a)?s&&r?n[a]=(...e)=>{const t=r(...e);return s(...e),t}:s&&(n[a]=s):"style"===a?n[a]={...s,...r}:"className"===a&&(n[a]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==p.Fragment&&(s.ref=t?cl(t,e):e),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nc=Symbol("radix.slottable");function ac(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===nc}var sc=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=ec(`Primitive.${t}`),a=p.forwardRef((e,a)=>{const{asChild:s,...r}=e,i=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function rc(e,t){e&&Zt.flushSync(()=>e.dispatchEvent(t))}function ic(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...e)=>t.current?.(...e),[])}var oc,lc="dismissableLayer.update",cc="dismissableLayer.pointerDownOutside",dc="dismissableLayer.focusOutside",uc=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:i,onDismiss:o,...l}=e,d=p.useContext(uc),[u,h]=p.useState(null),m=u?.ownerDocument??globalThis?.document,[,f]=p.useState({}),g=dl(t,e=>h(e)),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),b=u?x.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,j=function(e,t=globalThis?.document){const n=ic(e),a=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const e=e=>{if(e.target&&!a.current){let a=function(){fc(cc,n,r,{discrete:!0})};const r={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=a,t.addEventListener("click",s.current,{once:!0})):a()}else t.removeEventListener("click",s.current);a.current=!1},r=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}(e=>{const t=e.target,n=[...d.branches].some(e=>e.contains(t));S&&!n&&(s?.(e),i?.(e),e.defaultPrevented||o?.())},m),C=function(e,t=globalThis?.document){const n=ic(e),a=p.useRef(!1);return p.useEffect(()=>{const e=e=>{if(e.target&&!a.current){fc(dc,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(r?.(e),i?.(e),e.defaultPrevented||o?.())},m);return function(e,t=globalThis?.document){const n=ic(e);p.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{b===d.layers.size-1&&(a?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},m),p.useEffect(()=>{if(u)return n&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(oc=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),pc(),()=>{n&&1===d.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=oc)}},[u,m,n,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),pc())},[u,d]),p.useEffect(()=>{const e=()=>f({});return document.addEventListener(lc,e),()=>document.removeEventListener(lc,e)},[]),c.jsx(sc.div,{...l,ref:g,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:ql(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ql(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ql(e.onPointerDownCapture,j.onPointerDownCapture)})});hc.displayName="DismissableLayer";var mc=p.forwardRef((e,t)=>{const n=p.useContext(uc),a=p.useRef(null),s=dl(t,a);return p.useEffect(()=>{const e=a.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),c.jsx(sc.div,{...e,ref:s})});function pc(){const e=new CustomEvent(lc);document.dispatchEvent(e)}function fc(e,t,n,{discrete:a}){const s=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?rc(s,r):s.dispatchEvent(r)}mc.displayName="DismissableLayerBranch";var gc=hc,xc=mc,vc=0;function yc(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??bc()),document.body.insertAdjacentElement("beforeend",e[1]??bc()),vc++,()=>{1===vc&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),vc--}},[])}function bc(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var wc="focusScope.autoFocusOnMount",Sc="focusScope.autoFocusOnUnmount",jc={bubbles:!1,cancelable:!0},Cc=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...i}=e,[o,l]=p.useState(null),d=ic(s),u=ic(r),h=p.useRef(null),m=dl(t,e=>l(e)),f=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(a){let e=function(e){if(f.paused||!o)return;const t=e.target;o.contains(t)?h.current=t:Ec(h.current,{select:!0})},t=function(e){if(f.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||Ec(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Ec(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const a=new MutationObserver(n);return o&&a.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),a.disconnect()}}},[a,o,f.paused]),p.useEffect(()=>{if(o){Pc.add(f);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(wc,jc);o.addEventListener(wc,d),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const a of e)if(Ec(a,{select:t}),document.activeElement!==n)return}((e=kc(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Ec(o))}return()=>{o.removeEventListener(wc,d),setTimeout(()=>{const e=new CustomEvent(Sc,jc);o.addEventListener(Sc,u),o.dispatchEvent(e),e.defaultPrevented||Ec(t??document.body,{select:!0}),o.removeEventListener(Sc,u),Pc.remove(f)},0)}}var e},[o,d,u,f]);const g=p.useCallback(e=>{if(!n&&!a)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[a,r]=function(e){const t=kc(e),n=Nc(t,e),a=Nc(t.reverse(),e);return[n,a]}(t);a&&r?e.shiftKey||s!==r?e.shiftKey&&s===a&&(e.preventDefault(),n&&Ec(r,{select:!0})):(e.preventDefault(),n&&Ec(a,{select:!0})):s===t&&e.preventDefault()}},[n,a,f.paused]);return c.jsx(sc.div,{tabIndex:-1,...i,ref:m,onKeyDown:g})});function kc(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Nc(e,t){for(const n of e)if(!_c(n,{upTo:t}))return n}function _c(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Ec(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Cc.displayName="FocusScope";var Pc=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=Ac(e,t),e.unshift(t)},remove(t){e=Ac(e,t),e[0]?.resume()}}}();function Ac(e,t){const n=[...e],a=n.indexOf(t);return-1!==a&&n.splice(a,1),n}var Rc=globalThis?.document?p.useLayoutEffect:()=>{},Tc=g[" useId ".trim().toString()]||(()=>{}),Mc=0;function Dc(e){const[t,n]=p.useState(Tc());return Rc(()=>{n(e=>e??String(Mc++))},[e]),t?`radix-${t}`:""}const Lc=["top","right","bottom","left"],Fc=Math.min,Ic=Math.max,Oc=Math.round,zc=Math.floor,Bc=e=>({x:e,y:e}),$c={left:"right",right:"left",bottom:"top",top:"bottom"},Uc={start:"end",end:"start"};function Vc(e,t,n){return Ic(e,Fc(t,n))}function qc(e,t){return"function"==typeof e?e(t):e}function Hc(e){return e.split("-")[0]}function Gc(e){return e.split("-")[1]}function Kc(e){return"x"===e?"y":"x"}function Wc(e){return"y"===e?"height":"width"}const Qc=new Set(["top","bottom"]);function Yc(e){return Qc.has(Hc(e))?"y":"x"}function Xc(e){return Kc(Yc(e))}function Zc(e){return e.replace(/start|end/g,e=>Uc[e])}const Jc=["left","right"],ed=["right","left"],td=["top","bottom"],nd=["bottom","top"];function ad(e,t,n,a){const s=Gc(e);let r=function(e,t,n){switch(e){case"top":case"bottom":return n?t?ed:Jc:t?Jc:ed;case"left":case"right":return t?td:nd;default:return[]}}(Hc(e),"start"===n,a);return s&&(r=r.map(e=>e+"-"+s),t&&(r=r.concat(r.map(Zc)))),r}function sd(e){return e.replace(/left|right|bottom|top/g,e=>$c[e])}function rd(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function id(e){const{x:t,y:n,width:a,height:s}=e;return{width:a,height:s,top:n,left:t,right:t+a,bottom:n+s,x:t,y:n}}function od(e,t,n){let{reference:a,floating:s}=e;const r=Yc(t),i=Xc(t),o=Wc(i),l=Hc(t),c="y"===r,d=a.x+a.width/2-s.width/2,u=a.y+a.height/2-s.height/2,h=a[o]/2-s[o]/2;let m;switch(l){case"top":m={x:d,y:a.y-s.height};break;case"bottom":m={x:d,y:a.y+a.height};break;case"right":m={x:a.x+a.width,y:u};break;case"left":m={x:a.x-s.width,y:u};break;default:m={x:a.x,y:a.y}}switch(Gc(t)){case"start":m[i]-=h*(n&&c?-1:1);break;case"end":m[i]+=h*(n&&c?-1:1)}return m}async function ld(e,t){var n;void 0===t&&(t={});const{x:a,y:s,platform:r,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=qc(t,e),p=rd(m),f=o[h?"floating"===u?"reference":"floating":u],g=id(await r.getClippingRect({element:null==(n=await(null==r.isElement?void 0:r.isElement(f)))||n?f:f.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:a,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(o.floating)),y=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},b=id(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-b.top+p.top)/y.y,bottom:(b.bottom-g.bottom+p.bottom)/y.y,left:(g.left-b.left+p.left)/y.x,right:(b.right-g.right+p.right)/y.x}}function cd(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function dd(e){return Lc.some(t=>e[t]>=0)}const ud=new Set(["left","top"]);function hd(){return"undefined"!=typeof window}function md(e){return gd(e)?(e.nodeName||"").toLowerCase():"#document"}function pd(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function fd(e){var t;return null==(t=(gd(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function gd(e){return!!hd()&&(e instanceof Node||e instanceof pd(e).Node)}function xd(e){return!!hd()&&(e instanceof Element||e instanceof pd(e).Element)}function vd(e){return!!hd()&&(e instanceof HTMLElement||e instanceof pd(e).HTMLElement)}function yd(e){return!(!hd()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof pd(e).ShadowRoot)}const bd=new Set(["inline","contents"]);function wd(e){const{overflow:t,overflowX:n,overflowY:a,display:s}=Md(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!bd.has(s)}const Sd=new Set(["table","td","th"]);function jd(e){return Sd.has(md(e))}const Cd=[":popover-open",":modal"];function kd(e){return Cd.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const Nd=["transform","translate","scale","rotate","perspective"],_d=["transform","translate","scale","rotate","perspective","filter"],Ed=["paint","layout","strict","content"];function Pd(e){const t=Ad(),n=xd(e)?Md(e):e;return Nd.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||_d.some(e=>(n.willChange||"").includes(e))||Ed.some(e=>(n.contain||"").includes(e))}function Ad(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Rd=new Set(["html","body","#document"]);function Td(e){return Rd.has(md(e))}function Md(e){return pd(e).getComputedStyle(e)}function Dd(e){return xd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ld(e){if("html"===md(e))return e;const t=e.assignedSlot||e.parentNode||yd(e)&&e.host||fd(e);return yd(t)?t.host:t}function Fd(e){const t=Ld(e);return Td(t)?e.ownerDocument?e.ownerDocument.body:e.body:vd(t)&&wd(t)?t:Fd(t)}function Id(e,t,n){var a;void 0===t&&(t=[]),void 0===n&&(n=!0);const s=Fd(e),r=s===(null==(a=e.ownerDocument)?void 0:a.body),i=pd(s);if(r){const e=Od(i);return t.concat(i,i.visualViewport||[],wd(s)?s:[],e&&n?Id(e):[])}return t.concat(s,Id(s,[],n))}function Od(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zd(e){const t=Md(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=vd(e),r=s?e.offsetWidth:n,i=s?e.offsetHeight:a,o=Oc(n)!==r||Oc(a)!==i;return o&&(n=r,a=i),{width:n,height:a,$:o}}function Bd(e){return xd(e)?e:e.contextElement}function $d(e){const t=Bd(e);if(!vd(t))return Bc(1);const n=t.getBoundingClientRect(),{width:a,height:s,$:r}=zd(t);let i=(r?Oc(n.width):n.width)/a,o=(r?Oc(n.height):n.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const Ud=Bc(0);function Vd(e){const t=pd(e);return Ad()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ud}function qd(e,t,n,a){void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),r=Bd(e);let i=Bc(1);t&&(a?xd(a)&&(i=$d(a)):i=$d(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==pd(e))&&t}(r,n,a)?Vd(r):Bc(0);let l=(s.left+o.x)/i.x,c=(s.top+o.y)/i.y,d=s.width/i.x,u=s.height/i.y;if(r){const e=pd(r),t=a&&xd(a)?pd(a):a;let n=e,s=Od(n);for(;s&&a&&t!==n;){const e=$d(s),t=s.getBoundingClientRect(),a=Md(s),r=t.left+(s.clientLeft+parseFloat(a.paddingLeft))*e.x,i=t.top+(s.clientTop+parseFloat(a.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=r,c+=i,n=pd(s),s=Od(n)}}return id({width:d,height:u,x:l,y:c})}function Hd(e,t){const n=Dd(e).scrollLeft;return t?t.left+n:qd(fd(e)).left+n}function Gd(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Hd(e,n),y:n.top+t.scrollTop}}const Kd=new Set(["absolute","fixed"]);function Wd(e,t,n){let a;if("viewport"===t)a=function(e,t){const n=pd(e),a=fd(e),s=n.visualViewport;let r=a.clientWidth,i=a.clientHeight,o=0,l=0;if(s){r=s.width,i=s.height;const e=Ad();(!e||e&&"fixed"===t)&&(o=s.offsetLeft,l=s.offsetTop)}const c=Hd(a);if(c<=0){const e=a.ownerDocument,t=e.body,n=getComputedStyle(t),s="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,i=Math.abs(a.clientWidth-t.clientWidth-s);i<=25&&(r-=i)}else c<=25&&(r+=c);return{width:r,height:i,x:o,y:l}}(e,n);else if("document"===t)a=function(e){const t=fd(e),n=Dd(e),a=e.ownerDocument.body,s=Ic(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),r=Ic(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let i=-n.scrollLeft+Hd(e);const o=-n.scrollTop;return"rtl"===Md(a).direction&&(i+=Ic(t.clientWidth,a.clientWidth)-s),{width:s,height:r,x:i,y:o}}(fd(e));else if(xd(t))a=function(e,t){const n=qd(e,!0,"fixed"===t),a=n.top+e.clientTop,s=n.left+e.clientLeft,r=vd(e)?$d(e):Bc(1);return{width:e.clientWidth*r.x,height:e.clientHeight*r.y,x:s*r.x,y:a*r.y}}(t,n);else{const n=Vd(e);a={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return id(a)}function Qd(e,t){const n=Ld(e);return!(n===t||!xd(n)||Td(n))&&("fixed"===Md(n).position||Qd(n,t))}function Yd(e,t,n){const a=vd(t),s=fd(t),r="fixed"===n,i=qd(e,!0,r,t);let o={scrollLeft:0,scrollTop:0};const l=Bc(0);function c(){l.x=Hd(s)}if(a||!a&&!r)if(("body"!==md(t)||wd(s))&&(o=Dd(t)),a){const e=qd(t,!0,r,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&c();r&&!a&&s&&c();const d=!s||a||r?Bc(0):Gd(s,o);return{x:i.left+o.scrollLeft-l.x-d.x,y:i.top+o.scrollTop-l.y-d.y,width:i.width,height:i.height}}function Xd(e){return"static"===Md(e).position}function Zd(e,t){if(!vd(e)||"fixed"===Md(e).position)return null;if(t)return t(e);let n=e.offsetParent;return fd(e)===n&&(n=n.ownerDocument.body),n}function Jd(e,t){const n=pd(e);if(kd(e))return n;if(!vd(e)){let t=Ld(e);for(;t&&!Td(t);){if(xd(t)&&!Xd(t))return t;t=Ld(t)}return n}let a=Zd(e,t);for(;a&&jd(a)&&Xd(a);)a=Zd(a,t);return a&&Td(a)&&Xd(a)&&!Pd(a)?n:a||function(e){let t=Ld(e);for(;vd(t)&&!Td(t);){if(Pd(t))return t;if(kd(t))return null;t=Ld(t)}return null}(e)||n}const eu={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:a,strategy:s}=e;const r="fixed"===s,i=fd(a),o=!!t&&kd(t.floating);if(a===i||o&&r)return n;let l={scrollLeft:0,scrollTop:0},c=Bc(1);const d=Bc(0),u=vd(a);if((u||!u&&!r)&&(("body"!==md(a)||wd(i))&&(l=Dd(a)),vd(a))){const e=qd(a);c=$d(a),d.x=e.x+a.clientLeft,d.y=e.y+a.clientTop}const h=!i||u||r?Bc(0):Gd(i,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:fd,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:a,strategy:s}=e;const r=[..."clippingAncestors"===n?kd(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let a=Id(e,[],!1).filter(e=>xd(e)&&"body"!==md(e)),s=null;const r="fixed"===Md(e).position;let i=r?Ld(e):e;for(;xd(i)&&!Td(i);){const t=Md(i),n=Pd(i);n||"fixed"!==t.position||(s=null),(r?!n&&!s:!n&&"static"===t.position&&s&&Kd.has(s.position)||wd(i)&&!n&&Qd(e,i))?a=a.filter(e=>e!==i):s=t,i=Ld(i)}return t.set(e,a),a}(t,this._c):[].concat(n),a],i=r[0],o=r.reduce((e,n)=>{const a=Wd(t,n,s);return e.top=Ic(a.top,e.top),e.right=Fc(a.right,e.right),e.bottom=Fc(a.bottom,e.bottom),e.left=Ic(a.left,e.left),e},Wd(t,i,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Jd,getElementRects:async function(e){const t=this.getOffsetParent||Jd,n=this.getDimensions,a=await n(e.floating);return{reference:Yd(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=zd(e);return{width:t,height:n}},getScale:$d,isElement:xd,isRTL:function(e){return"rtl"===Md(e).direction}};function tu(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function nu(e,t,n,a){void 0===a&&(a={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=a,c=Bd(e),d=s||r?[...c?Id(c):[],...Id(t)]:[];d.forEach(e=>{s&&e.addEventListener("scroll",n,{passive:!0}),r&&e.addEventListener("resize",n)});const u=c&&o?function(e,t){let n,a=null;const s=fd(e);function r(){var e;clearTimeout(n),null==(e=a)||e.disconnect(),a=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),r();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:m}=c;if(o||t(),!h||!m)return;const p={rootMargin:-zc(u)+"px "+-zc(s.clientWidth-(d+h))+"px "+-zc(s.clientHeight-(u+m))+"px "+-zc(d)+"px",threshold:Ic(0,Fc(1,l))||1};let f=!0;function g(t){const a=t[0].intersectionRatio;if(a!==l){if(!f)return i();a?i(!1,a):n=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==a||tu(c,e.getBoundingClientRect())||i(),f=!1}try{a=new IntersectionObserver(g,{...p,root:s.ownerDocument})}catch(x){a=new IntersectionObserver(g,p)}a.observe(e)}(!0),r}(c,n):null;let h,m=-1,p=null;i&&(p=new ResizeObserver(e=>{let[a]=e;a&&a.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let f=l?qd(e):null;return l&&function t(){const a=qd(e);f&&!tu(f,a)&&n();f=a,h=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{s&&e.removeEventListener("scroll",n),r&&e.removeEventListener("resize",n)}),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const au=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,a;const{x:s,y:r,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:a,elements:s}=e,r=await(null==a.isRTL?void 0:a.isRTL(s.floating)),i=Hc(n),o=Gc(n),l="y"===Yc(n),c=ud.has(i)?-1:1,d=r&&l?-1:1,u=qc(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(m="end"===o?-1*p:p),l?{x:m*d,y:h*c}:{x:h*c,y:m*d}}(t,e);return i===(null==(n=o.offset)?void 0:n.placement)&&null!=(a=o.arrow)&&a.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:i}}}}},su=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:s}=t,{mainAxis:r=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=qc(e,t),c={x:n,y:a},d=await ld(t,l),u=Yc(Hc(s)),h=Kc(u);let m=c[h],p=c[u];if(r){const e="y"===h?"bottom":"right";m=Vc(m+d["y"===h?"top":"left"],m,m-d[e])}if(i){const e="y"===u?"bottom":"right";p=Vc(p+d["y"===u?"top":"left"],p,p-d[e])}const f=o.fn({...t,[h]:m,[u]:p});return{...f,data:{x:f.x-n,y:f.y-a,enabled:{[h]:r,[u]:i}}}}}},ru=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:s,middlewareData:r,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...g}=qc(e,t);if(null!=(n=r.arrow)&&n.alignmentOffset)return{};const x=Hc(s),v=Yc(o),y=Hc(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!f?[sd(o)]:function(e){const t=sd(e);return[Zc(e),t,Zc(t)]}(o)),S="none"!==p;!h&&S&&w.push(...ad(o,f,p,b));const j=[o,...w],C=await ld(t,g),k=[];let N=(null==(a=r.flip)?void 0:a.overflows)||[];if(d&&k.push(C[x]),u){const e=function(e,t,n){void 0===n&&(n=!1);const a=Gc(e),s=Xc(e),r=Wc(s);let i="x"===s?a===(n?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=sd(i)),[i,sd(i)]}(s,i,b);k.push(C[e[0]],C[e[1]])}if(N=[...N,{placement:s,overflows:k}],!k.every(e=>e<=0)){var _,E;const e=((null==(_=r.flip)?void 0:_.index)||0)+1,t=j[e];if(t){if(!("alignment"===u&&v!==Yc(t))||N.every(e=>Yc(e.placement)!==v||e.overflows[0]>0))return{data:{index:e,overflows:N},reset:{placement:t}}}let n=null==(E=N.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:E.placement;if(!n)switch(m){case"bestFit":{var P;const e=null==(P=N.filter(e=>{if(S){const t=Yc(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:P[0];e&&(n=e);break}case"initialPlacement":n=o}if(s!==n)return{reset:{placement:n}}}return{}}}},iu=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,a;const{placement:s,rects:r,platform:i,elements:o}=t,{apply:l=()=>{},...c}=qc(e,t),d=await ld(t,c),u=Hc(s),h=Gc(s),m="y"===Yc(s),{width:p,height:f}=r.floating;let g,x;"top"===u||"bottom"===u?(g=u,x=h===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(x=u,g="end"===h?"top":"bottom");const v=f-d.top-d.bottom,y=p-d.left-d.right,b=Fc(f-d[g],v),w=Fc(p-d[x],y),S=!t.middlewareData.shift;let j=b,C=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(C=y),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(j=v),S&&!h){const e=Ic(d.left,0),t=Ic(d.right,0),n=Ic(d.top,0),a=Ic(d.bottom,0);m?C=p-2*(0!==e||0!==t?e+t:Ic(d.left,d.right)):j=f-2*(0!==n||0!==a?n+a:Ic(d.top,d.bottom))}await l({...t,availableWidth:C,availableHeight:j});const k=await i.getDimensions(o.floating);return p!==k.width||f!==k.height?{reset:{rects:!0}}:{}}}},ou=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...s}=qc(e,t);switch(a){case"referenceHidden":{const e=cd(await ld(t,{...s,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:dd(e)}}}case"escaped":{const e=cd(await ld(t,{...s,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:dd(e)}}}default:return{}}}}},lu=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:s,rects:r,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=qc(e,t)||{};if(null==c)return{};const u=rd(d),h={x:n,y:a},m=Xc(s),p=Wc(m),f=await i.getDimensions(c),g="y"===m,x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=r.reference[p]+r.reference[m]-h[m]-r.floating[p],w=h[m]-r.reference[m],S=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let j=S?S[y]:0;j&&await(null==i.isElement?void 0:i.isElement(S))||(j=o.floating[y]||r.floating[p]);const C=b/2-w/2,k=j/2-f[p]/2-1,N=Fc(u[x],k),_=Fc(u[v],k),E=N,P=j-f[p]-_,A=j/2-f[p]/2+C,R=Vc(E,A,P),T=!l.arrow&&null!=Gc(s)&&A!==R&&r.reference[p]/2-(A<E?N:_)-f[p]/2<0,M=T?A<E?A-E:A-P:0;return{[m]:h[m]+M,data:{[m]:R,centerOffset:A-R-M,...T&&{alignmentOffset:M}},reset:T}}}),cu=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:s,rects:r,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=qc(e,t),d={x:n,y:a},u=Yc(s),h=Kc(u);let m=d[h],p=d[u];const f=qc(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const e="y"===h?"height":"width",t=r.reference[h]-r.floating[e]+g.mainAxis,n=r.reference[h]+r.reference[e]-g.mainAxis;m<t?m=t:m>n&&(m=n)}if(c){var x,v;const e="y"===h?"width":"height",t=ud.has(Hc(s)),n=r.reference[u]-r.floating[e]+(t&&(null==(x=i.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),a=r.reference[u]+r.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);p<n?p=n:p>a&&(p=a)}return{[h]:m,[u]:p}}}},du=(e,t,n)=>{const a=new Map,s={platform:eu,...n},r={...s.platform,_c:a};return(async(e,t,n)=>{const{placement:a="bottom",strategy:s="absolute",middleware:r=[],platform:i}=n,o=r.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:u}=od(c,a,l),h=a,m={},p=0;for(let f=0;f<o.length;f++){const{name:n,fn:r}=o[f],{x:g,y:x,data:v,reset:y}=await r({x:d,y:u,initialPlacement:a,placement:h,strategy:s,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,m={...m,[n]:{...m[n],...v}},y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:s}):y.rects),({x:d,y:u}=od(c,h,l))),f=-1)}return{x:d,y:u,placement:h,strategy:s,middlewareData:m}})(e,t,{...s,platform:r})};var uu="undefined"!=typeof document?p.useLayoutEffect:function(){};function hu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,a,s;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;0!==a--;)if(!hu(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;0!==a--;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=n;0!==a--;){const n=s[a];if(("_owner"!==n||!e.$$typeof)&&!hu(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function mu(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function pu(e,t){const n=mu(e);return Math.round(t*n)/n}function fu(e){const t=p.useRef(e);return uu(()=>{t.current=e}),t}const gu=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:a}="function"==typeof e?e(t):e;return n&&(s=n,{}.hasOwnProperty.call(s,"current"))?null!=n.current?lu({element:n.current,padding:a}).fn(t):{}:n?lu({element:n,padding:a}).fn(t):{};var s}}),xu=(e,t)=>({...au(e),options:[e,t]}),vu=(e,t)=>({...su(e),options:[e,t]}),yu=(e,t)=>({...cu(e),options:[e,t]}),bu=(e,t)=>({...ru(e),options:[e,t]}),wu=(e,t)=>({...iu(e),options:[e,t]}),Su=(e,t)=>({...ou(e),options:[e,t]}),ju=(e,t)=>({...gu(e),options:[e,t]});var Cu=p.forwardRef((e,t)=>{const{children:n,width:a=10,height:s=5,...r}=e;return c.jsx(sc.svg,{...r,ref:t,width:a,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});Cu.displayName="Arrow";var ku=Cu;function Nu(e){const[t,n]=p.useState(void 0);return Rc(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const a=t[0];let s,r;if("borderBoxSize"in a){const e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,r=t.blockSize}else s=e.offsetWidth,r=e.offsetHeight;n({width:s,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var _u="Popper",[Eu,Pu]=Hl(_u),[Au,Ru]=Eu(_u),Tu=e=>{const{__scopePopper:t,children:n}=e,[a,s]=p.useState(null);return c.jsx(Au,{scope:t,anchor:a,onAnchorChange:s,children:n})};Tu.displayName=_u;var Mu="PopperAnchor",Du=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:a,...s}=e,r=Ru(Mu,n),i=p.useRef(null),o=dl(t,i),l=p.useRef(null);return p.useEffect(()=>{const e=l.current;l.current=a?.current||i.current,e!==l.current&&r.onAnchorChange(l.current)}),a?null:c.jsx(sc.div,{...s,ref:o})});Du.displayName=Mu;var Lu="PopperContent",[Fu,Iu]=Eu(Lu),Ou=p.forwardRef((e,t)=>{const{__scopePopper:n,side:a="bottom",sideOffset:s=0,align:r="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:g,...x}=e,v=Ru(Lu,n),[y,b]=p.useState(null),w=dl(t,e=>b(e)),[S,j]=p.useState(null),C=Nu(S),k=C?.width??0,N=C?.height??0,_=a+("center"!==r?"-"+r:""),E="number"==typeof u?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(d)?d:[d],A=P.length>0,R={padding:E,boundary:P.filter(Uu),altBoundary:A},{refs:T,floatingStyles:M,placement:D,isPositioned:L,middlewareData:F}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:s,elements:{reference:r,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(a);hu(h,a)||m(a);const[f,g]=p.useState(null),[x,v]=p.useState(null),y=p.useCallback(e=>{e!==j.current&&(j.current=e,g(e))},[]),b=p.useCallback(e=>{e!==C.current&&(C.current=e,v(e))},[]),w=r||f,S=i||x,j=p.useRef(null),C=p.useRef(null),k=p.useRef(d),N=null!=l,_=fu(l),E=fu(s),P=fu(c),A=p.useCallback(()=>{if(!j.current||!C.current)return;const e={placement:t,strategy:n,middleware:h};E.current&&(e.platform=E.current),du(j.current,C.current,e).then(e=>{const t={...e,isPositioned:!1!==P.current};R.current&&!hu(k.current,t)&&(k.current=t,Zt.flushSync(()=>{u(t)}))})},[h,t,n,E,P]);uu(()=>{!1===c&&k.current.isPositioned&&(k.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[c]);const R=p.useRef(!1);uu(()=>(R.current=!0,()=>{R.current=!1}),[]),uu(()=>{if(w&&(j.current=w),S&&(C.current=S),w&&S){if(_.current)return _.current(w,S,A);A()}},[w,S,A,_,N]);const T=p.useMemo(()=>({reference:j,floating:C,setReference:y,setFloating:b}),[y,b]),M=p.useMemo(()=>({reference:w,floating:S}),[w,S]),D=p.useMemo(()=>{const e={position:n,left:0,top:0};if(!M.floating)return e;const t=pu(M.floating,d.x),a=pu(M.floating,d.y);return o?{...e,transform:"translate("+t+"px, "+a+"px)",...mu(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:a}},[n,o,M.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:A,refs:T,elements:M,floatingStyles:D}),[d,A,T,M,D])}({strategy:"fixed",placement:_,whileElementsMounted:(...e)=>nu(...e,{animationFrame:"always"===f}),elements:{reference:v.anchor},middleware:[xu({mainAxis:s+N,alignmentAxis:i}),l&&vu({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?yu():void 0,...R}),l&&bu({...R}),wu({...R,apply:({elements:e,rects:t,availableWidth:n,availableHeight:a})=>{const{width:s,height:r}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${n}px`),i.setProperty("--radix-popper-available-height",`${a}px`),i.setProperty("--radix-popper-anchor-width",`${s}px`),i.setProperty("--radix-popper-anchor-height",`${r}px`)}}),S&&ju({element:S,padding:o}),Vu({arrowWidth:k,arrowHeight:N}),m&&Su({strategy:"referenceHidden",...R})]}),[I,O]=qu(D),z=ic(g);Rc(()=>{L&&z?.()},[L,z]);const B=F.arrow?.x,$=F.arrow?.y,U=0!==F.arrow?.centerOffset,[V,q]=p.useState();return Rc(()=>{y&&q(window.getComputedStyle(y).zIndex)},[y]),c.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:L?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:V,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(Fu,{scope:n,placedSide:I,onArrowChange:j,arrowX:B,arrowY:$,shouldHideArrow:U,children:c.jsx(sc.div,{"data-side":I,"data-align":O,...x,ref:w,style:{...x.style,animation:L?void 0:"none"}})})})});Ou.displayName=Lu;var zu="PopperArrow",Bu={top:"bottom",right:"left",bottom:"top",left:"right"},$u=p.forwardRef(function(e,t){const{__scopePopper:n,...a}=e,s=Iu(zu,n),r=Bu[s.placedSide];return c.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:c.jsx(ku,{...a,ref:t,style:{...a.style,display:"block"}})})});function Uu(e){return null!==e}$u.displayName=zu;var Vu=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:a,middlewareData:s}=t,r=0!==s.arrow?.centerOffset,i=r?0:e.arrowWidth,o=r?0:e.arrowHeight,[l,c]=qu(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(s.arrow?.x??0)+i/2,h=(s.arrow?.y??0)+o/2;let m="",p="";return"bottom"===l?(m=r?d:`${u}px`,p=-o+"px"):"top"===l?(m=r?d:`${u}px`,p=`${a.floating.height+o}px`):"right"===l?(m=-o+"px",p=r?d:`${h}px`):"left"===l&&(m=`${a.floating.width+o}px`,p=r?d:`${h}px`),{data:{x:m,y:p}}}});function qu(e){const[t,n="center"]=e.split("-");return[t,n]}var Hu=Tu,Gu=Du,Ku=Ou,Wu=$u,Qu=p.forwardRef((e,t)=>{const{container:n,...a}=e,[s,r]=p.useState(!1);Rc(()=>r(!0),[]);const i=n||s&&globalThis?.document?.body;return i?Jt.createPortal(c.jsx(sc.div,{...a,ref:t}),i):null});function Yu(e){const t=Xu(e),n=p.forwardRef((e,n)=>{const{children:a,...s}=e,r=p.Children.toArray(a),i=r.find(Ju);if(i){const e=i.props.children,a=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...s,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,a):null})}return c.jsx(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}function Xu(e){const t=p.forwardRef((e,t)=>{const{children:n,...a}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const a in t){const s=e[a],r=t[a];/^on[A-Z]/.test(a)?s&&r?n[a]=(...e)=>{const t=r(...e);return s(...e),t}:s&&(n[a]=s):"style"===a?n[a]={...s,...r}:"className"===a&&(n[a]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==p.Fragment&&(s.ref=t?cl(t,e):e),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Qu.displayName="Portal";var Zu=Symbol("radix.slottable");function Ju(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Zu}var eh=g[" useInsertionEffect ".trim().toString()]||Rc;function th({prop:e,defaultProp:t,onChange:n=()=>{},caller:a}){const[s,r,i]=function({defaultProp:e,onChange:t}){const[n,a]=p.useState(e),s=p.useRef(n),r=p.useRef(t);return eh(()=>{r.current=t},[t]),p.useEffect(()=>{s.current!==n&&(r.current?.(n),s.current=n)},[n,s]),[n,a,r]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:s;{const t=p.useRef(void 0!==e);p.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,a])}const c=p.useCallback(t=>{if(o){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&i.current?.(n)}else r(t)},[o,e,r,i]);return[l,c]}function nh(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ah=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sh=p.forwardRef((e,t)=>c.jsx(sc.span,{...e,ref:t,style:{...ah,...e.style}}));sh.displayName="VisuallyHidden";var rh=sh,ih=new WeakMap,oh=new WeakMap,lh={},ch=0,dh=function(e){return e&&(e.host||dh(e.parentNode))},uh=function(e,t,n,a){var s=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=dh(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);lh[n]||(lh[n]=new WeakMap);var r=lh[n],i=[],o=new Set,l=new Set(s),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};s.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(a),s=null!==t&&"false"!==t,l=(ih.get(e)||0)+1,c=(r.get(e)||0)+1;ih.set(e,l),r.set(e,c),i.push(e),1===l&&s&&oh.set(e,!0),1===c&&e.setAttribute(n,"true"),s||e.setAttribute(a,"true")}catch(u){}})};return d(t),o.clear(),ch++,function(){i.forEach(function(e){var t=ih.get(e)-1,s=r.get(e)-1;ih.set(e,t),r.set(e,s),t||(oh.has(e)||e.removeAttribute(a),oh.delete(e)),s||e.removeAttribute(n)}),--ch||(ih=new WeakMap,ih=new WeakMap,oh=new WeakMap,lh={})}},hh=function(e,t,n){void 0===n&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),s=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live], script"))),uh(a,s,n,"aria-hidden")):function(){return null}},mh=function(){return mh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},mh.apply(this,arguments)};function ph(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n}"function"==typeof SuppressedError&&SuppressedError;var fh="right-scroll-bar-position",gh="width-before-scroll-bar";function xh(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var vh="undefined"!=typeof window?p.useLayoutEffect:p.useEffect,yh=new WeakMap;function bh(e,t){var n,a,s,r=(n=null,a=function(t){return e.forEach(function(e){return xh(e,t)})},(s=p.useState(function(){return{value:n,callback:a,facade:{get current(){return s.value},set current(e){var t=s.value;t!==e&&(s.value=e,s.callback(e,t))}}}})[0]).callback=a,s.facade);return vh(function(){var t=yh.get(r);if(t){var n=new Set(t),a=new Set(e),s=r.current;n.forEach(function(e){a.has(e)||xh(e,null)}),a.forEach(function(e){n.has(e)||xh(e,s)})}yh.set(r,e)},[e]),r}function wh(e){return e}var Sh=function(e){var t=e.sideCar,n=ph(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return p.createElement(a,mh({},n))};Sh.isSideCarExport=!0;var jh=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=wh);var n=[],a=!1;return{read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var s=t(e,a);return n.push(s),function(){n=n.filter(function(e){return e!==s})}},assignSyncMedium:function(e){for(a=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){a=!0;var t=[];if(n.length){var s=n;n=[],s.forEach(e),t=n}var r=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(r)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=mh({async:!0,ssr:!1},e),t}(),Ch=function(){},kh=p.forwardRef(function(e,t){var n=p.useRef(null),a=p.useState({onScrollCapture:Ch,onWheelCapture:Ch,onTouchMoveCapture:Ch}),s=a[0],r=a[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,h=e.sideCar,m=e.noRelative,f=e.noIsolation,g=e.inert,x=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,b=e.gapMode,w=ph(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,j=bh([n,t]),C=mh(mh({},w),s);return p.createElement(p.Fragment,null,d&&p.createElement(S,{sideCar:jh,removeScrollBar:c,shards:u,noRelative:m,noIsolation:f,inert:g,setCallbacks:r,allowPinchZoom:!!x,lockRef:n,gapMode:b}),i?p.cloneElement(p.Children.only(o),mh(mh({},C),{ref:j})):p.createElement(y,mh({},C,{className:l,ref:j}),o))});kh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},kh.classNames={fullWidth:gh,zeroRight:fh};function Nh(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var _h=function(){var e=0,t=null;return{add:function(n){var a,s;0==e&&(t=Nh())&&(s=n,(a=t).styleSheet?a.styleSheet.cssText=s:a.appendChild(document.createTextNode(s)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Eh=function(){var e,t=(e=_h(),function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,a=e.dynamic;return t(n,a),null}},Ph={left:0,top:0,right:0,gap:0},Ah=function(e){return parseInt(e||"",10)||0},Rh=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Ph;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],s=t["padding"===e?"paddingRight":"marginRight"];return[Ah(n),Ah(a),Ah(s)]}(e),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},Th=Eh(),Mh="data-scroll-locked",Dh=function(e,t,n,a){var s=e.left,r=e.top,i=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(o,"px ").concat(a,";\n  }\n  body[").concat(Mh,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===n&&"\n    padding-left: ".concat(s,"px;\n    padding-top: ").concat(r,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(a,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(fh," {\n    right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(gh," {\n    margin-right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(fh," .").concat(fh," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(gh," .").concat(gh," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(Mh,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},Lh=function(){var e=parseInt(document.body.getAttribute(Mh)||"0",10);return isFinite(e)?e:0},Fh=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,s=void 0===a?"margin":a;p.useEffect(function(){return document.body.setAttribute(Mh,(Lh()+1).toString()),function(){var e=Lh()-1;e<=0?document.body.removeAttribute(Mh):document.body.setAttribute(Mh,e.toString())}},[]);var r=p.useMemo(function(){return Rh(s)},[s]);return p.createElement(Th,{styles:Dh(r,!t,s,n?"":"!important")})},Ih=!1;if("undefined"!=typeof window)try{var Oh=Object.defineProperty({},"passive",{get:function(){return Ih=!0,!0}});window.addEventListener("test",Oh,Oh),window.removeEventListener("test",Oh,Oh)}catch(GQ){Ih=!1}var zh=!!Ih&&{passive:!1},Bh=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},$h=function(e,t){var n=t.ownerDocument,a=t;do{if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),Uh(e,a)){var s=Vh(e,a);if(s[1]>s[2])return!0}a=a.parentNode}while(a&&a!==n.body);return!1},Uh=function(e,t){return"v"===e?function(e){return Bh(e,"overflowY")}(t):function(e){return Bh(e,"overflowX")}(t)},Vh=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},qh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Hh=function(e){return[e.deltaX,e.deltaY]},Gh=function(e){return e&&"current"in e?e.current:e},Kh=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Wh=0,Qh=[];function Yh(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Xh=(Zh=function(e){var t=p.useRef([]),n=p.useRef([0,0]),a=p.useRef(),s=p.useState(Wh++)[0],r=p.useState(Eh)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=function(e,t,n){if(n||2===arguments.length)for(var a,s=0,r=t.length;s<r;s++)!a&&s in t||(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Gh),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=p.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var s,r=qh(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-r[0],c="deltaY"in e?e.deltaY:o[1]-r[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=window.getSelection(),m=h&&h.anchorNode;if(m&&(m===d||m.contains(d)))return!1;var p=$h(u,d);if(!p)return!0;if(p?s=u:(s="v"===u?"h":"v",p=$h(u,d)),!p)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=s),!s)return!0;var f=a.current||s;return function(e,t,n,a){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),r=s*a,i=n.target,o=t.contains(i),l=!1,c=r>0,d=0,u=0;do{if(!i)break;var h=Vh(e,i),m=h[0],p=h[1]-h[2]-s*m;(m||p)&&Uh(e,i)&&(d+=p,u+=m);var f=i.parentNode;i=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!o&&i!==document.body||o&&(t.contains(i)||t===i));return(c&&Math.abs(d)<1||!c&&Math.abs(u)<1)&&(l=!0),l}(f,t,e,"h"===f?l:c)},[]),l=p.useCallback(function(e){var n=e;if(Qh.length&&Qh[Qh.length-1]===r){var a="deltaY"in n?Hh(n):qh(n),s=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,s=a,t[0]===s[0]&&t[1]===s[1]);var t,s})[0];if(s&&s.should)n.cancelable&&n.preventDefault();else if(!s){var l=(i.current.shards||[]).map(Gh).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!i.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=p.useCallback(function(e,n,a,s){var r={name:e,delta:n,target:a,should:s,shadowParent:Yh(a)};t.current.push(r),setTimeout(function(){t.current=t.current.filter(function(e){return e!==r})},1)},[]),d=p.useCallback(function(e){n.current=qh(e),a.current=void 0},[]),u=p.useCallback(function(t){c(t.type,Hh(t),t.target,o(t,e.lockRef.current))},[]),h=p.useCallback(function(t){c(t.type,qh(t),t.target,o(t,e.lockRef.current))},[]);p.useEffect(function(){return Qh.push(r),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,zh),document.addEventListener("touchmove",l,zh),document.addEventListener("touchstart",d,zh),function(){Qh=Qh.filter(function(e){return e!==r}),document.removeEventListener("wheel",l,zh),document.removeEventListener("touchmove",l,zh),document.removeEventListener("touchstart",d,zh)}},[]);var m=e.removeScrollBar,f=e.inert;return p.createElement(p.Fragment,null,f?p.createElement(r,{styles:Kh(s)}):null,m?p.createElement(Fh,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},jh.useMedium(Zh),Sh);var Zh,Jh=p.forwardRef(function(e,t){return p.createElement(kh,mh({},e,{ref:t,sideCar:Xh}))});Jh.classNames=kh.classNames;var em=[" ","Enter","ArrowUp","ArrowDown"],tm=[" ","Enter"],nm="Select",[am,sm,rm]=Xl(nm),[im]=Hl(nm,[rm,Pu]),om=Pu(),[lm,cm]=im(nm),[dm,um]=im(nm),hm=e=>{const{__scopeSelect:t,children:n,open:a,defaultOpen:s,onOpenChange:r,value:i,defaultValue:o,onValueChange:l,dir:d,name:u,autoComplete:h,disabled:m,required:f,form:g}=e,x=om(t),[v,y]=p.useState(null),[b,w]=p.useState(null),[S,j]=p.useState(!1),C=Jl(d),[k,N]=th({prop:a,defaultProp:s??!1,onChange:r,caller:nm}),[_,E]=th({prop:i,defaultProp:o,onChange:l,caller:nm}),P=p.useRef(null),A=!v||(g||!!v.closest("form")),[R,T]=p.useState(new Set),M=Array.from(R).map(e=>e.props.value).join(";");return c.jsx(Hu,{...x,children:c.jsxs(lm,{required:f,scope:t,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Dc(),value:_,onValueChange:E,open:k,onOpenChange:N,dir:C,triggerPointerDownPosRef:P,disabled:m,children:[c.jsx(am.Provider,{scope:t,children:c.jsx(dm,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:p.useCallback(e=>{T(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),A?c.jsxs(Zm,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:_,onChange:e=>E(e.target.value),disabled:m,form:g,children:[void 0===_?c.jsx("option",{value:""}):null,Array.from(R)]},M):null]})})};hm.displayName=nm;var mm="SelectTrigger",pm=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:a=!1,...s}=e,r=om(n),i=cm(mm,n),o=i.disabled||a,l=dl(t,i.onTriggerChange),d=sm(n),u=p.useRef("touch"),[h,m,f]=ep(e=>{const t=d().filter(e=>!e.disabled),n=t.find(e=>e.value===i.value),a=tp(t,e,n);void 0!==a&&i.onValueChange(a.value)}),g=e=>{o||(i.onOpenChange(!0),f()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return c.jsx(Gu,{asChild:!0,...r,children:c.jsx(sc.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Jm(i.value)?"":void 0,...s,ref:l,onClick:ql(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&g(e)}),onPointerDown:ql(s.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:ql(s.onKeyDown,e=>{const t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||em.includes(e.key)&&(g(),e.preventDefault())})})})});pm.displayName=mm;var fm="SelectValue",gm=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:a,style:s,children:r,placeholder:i="",...o}=e,l=cm(fm,n),{onValueNodeHasChildrenChange:d}=l,u=void 0!==r,h=dl(t,l.onValueNodeChange);return Rc(()=>{d(u)},[d,u]),c.jsx(sc.span,{...o,ref:h,style:{pointerEvents:"none"},children:Jm(l.value)?c.jsx(c.Fragment,{children:i}):r})});gm.displayName=fm;var xm=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:a,...s}=e;return c.jsx(sc.span,{"aria-hidden":!0,...s,ref:t,children:a||""})});xm.displayName="SelectIcon";var vm=e=>c.jsx(Qu,{asChild:!0,...e});vm.displayName="SelectPortal";var ym="SelectContent",bm=p.forwardRef((e,t)=>{const n=cm(ym,e.__scopeSelect),[a,s]=p.useState();if(Rc(()=>{s(new DocumentFragment)},[]),!n.open){const t=a;return t?Zt.createPortal(c.jsx(Sm,{scope:e.__scopeSelect,children:c.jsx(am.Slot,{scope:e.__scopeSelect,children:c.jsx("div",{children:e.children})})}),t):null}return c.jsx(km,{...e,ref:t})});bm.displayName=ym;var wm=10,[Sm,jm]=im(ym),Cm=Yu("SelectContent.RemoveScroll"),km=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:r,onPointerDownOutside:i,side:o,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v,...y}=e,b=cm(ym,n),[w,S]=p.useState(null),[j,C]=p.useState(null),k=dl(t,e=>S(e)),[N,_]=p.useState(null),[E,P]=p.useState(null),A=sm(n),[R,T]=p.useState(!1),M=p.useRef(!1);p.useEffect(()=>{if(w)return hh(w)},[w]),yc();const D=p.useCallback(e=>{const[t,...n]=A().map(e=>e.ref.current),[a]=n.slice(-1),s=document.activeElement;for(const r of e){if(r===s)return;if(r?.scrollIntoView({block:"nearest"}),r===t&&j&&(j.scrollTop=0),r===a&&j&&(j.scrollTop=j.scrollHeight),r?.focus(),document.activeElement!==s)return}},[A,j]),L=p.useCallback(()=>D([N,w]),[D,N,w]);p.useEffect(()=>{R&&L()},[R,L]);const{onOpenChange:F,triggerPointerDownPosRef:I}=b;p.useEffect(()=>{if(w){let e={x:0,y:0};const t=t=>{e={x:Math.abs(Math.round(t.pageX)-(I.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(I.current?.y??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():w.contains(n.target)||F(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[w,F,I]),p.useEffect(()=>{const e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);const[O,z]=ep(e=>{const t=A().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),a=tp(t,e,n);a&&setTimeout(()=>a.ref.current.focus())}),B=p.useCallback((e,t,n)=>{const a=!M.current&&!n;(void 0!==b.value&&b.value===t||a)&&(_(e),a&&(M.current=!0))},[b.value]),$=p.useCallback(()=>w?.focus(),[w]),U=p.useCallback((e,t,n)=>{const a=!M.current&&!n;(void 0!==b.value&&b.value===t||a)&&P(e)},[b.value]),V="popper"===a?_m:Nm,q=V===_m?{side:o,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v}:{};return c.jsx(Sm,{scope:n,content:w,viewport:j,onViewportChange:C,itemRefCallback:B,selectedItem:N,onItemLeave:$,itemTextRefCallback:U,focusSelectedItem:L,selectedItemText:E,position:a,isPositioned:R,searchRef:O,children:c.jsx(Jh,{as:Cm,allowPinchZoom:!0,children:c.jsx(Cc,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:ql(s,e=>{b.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:c.jsx(hc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:c.jsx(V,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault(),...y,...q,onPlaced:()=>T(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ql(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||z(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=A().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,a=t.indexOf(n);t=t.slice(a+1)}setTimeout(()=>D(t)),e.preventDefault()}})})})})})})});km.displayName="SelectContentImpl";var Nm=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:a,...s}=e,r=cm(ym,n),i=jm(ym,n),[o,l]=p.useState(null),[d,u]=p.useState(null),h=dl(t,e=>u(e)),m=sm(n),f=p.useRef(!1),g=p.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=i,w=p.useCallback(()=>{if(r.trigger&&r.valueNode&&o&&d&&x&&v&&y){const e=r.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),n=r.valueNode.getBoundingClientRect(),s=y.getBoundingClientRect();if("rtl"!==r.dir){const a=s.left-t.left,r=n.left-a,i=e.left-r,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-wm,u=Vl(r,[wm,Math.max(wm,d-c)]);o.style.minWidth=l+"px",o.style.left=u+"px"}else{const a=t.right-s.right,r=window.innerWidth-n.right-a,i=window.innerWidth-e.right-r,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-wm,u=Vl(r,[wm,Math.max(wm,d-c)]);o.style.minWidth=l+"px",o.style.right=u+"px"}const i=m(),l=window.innerHeight-2*wm,c=x.scrollHeight,u=window.getComputedStyle(d),h=parseInt(u.borderTopWidth,10),p=parseInt(u.paddingTop,10),g=parseInt(u.borderBottomWidth,10),b=h+p+c+parseInt(u.paddingBottom,10)+g,w=Math.min(5*v.offsetHeight,b),S=window.getComputedStyle(x),j=parseInt(S.paddingTop,10),C=parseInt(S.paddingBottom,10),k=e.top+e.height/2-wm,N=l-k,_=v.offsetHeight/2,E=h+p+(v.offsetTop+_),P=b-E;if(E<=k){const e=i.length>0&&v===i[i.length-1].ref.current;o.style.bottom="0px";const t=d.clientHeight-x.offsetTop-x.offsetHeight,n=E+Math.max(N,_+(e?C:0)+t+g);o.style.height=n+"px"}else{const e=i.length>0&&v===i[0].ref.current;o.style.top="0px";const t=Math.max(k,h+x.offsetTop+(e?j:0)+_)+P;o.style.height=t+"px",x.scrollTop=E-k+x.offsetTop}o.style.margin=`${wm}px 0`,o.style.minHeight=w+"px",o.style.maxHeight=l+"px",a?.(),requestAnimationFrame(()=>f.current=!0)}},[m,r.trigger,r.valueNode,o,d,x,v,y,r.dir,a]);Rc(()=>w(),[w]);const[S,j]=p.useState();Rc(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const C=p.useCallback(e=>{e&&!0===g.current&&(w(),b?.(),g.current=!1)},[w,b]);return c.jsx(Em,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:c.jsx(sc.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Nm.displayName="SelectItemAlignedPosition";var _m=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:a="start",collisionPadding:s=wm,...r}=e,i=om(n);return c.jsx(Ku,{...i,...r,ref:t,align:a,collisionPadding:s,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_m.displayName="SelectPopperPosition";var[Em,Pm]=im(ym,{}),Am="SelectViewport",Rm=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:a,...s}=e,r=jm(Am,n),i=Pm(Am,n),o=dl(t,r.onViewportChange),l=p.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),c.jsx(am.Slot,{scope:n,children:c.jsx(sc.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ql(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:a}=i;if(a?.current&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const a=window.innerHeight-2*wm,s=parseFloat(n.style.minHeight),r=parseFloat(n.style.height),i=Math.max(s,r);if(i<a){const s=i+e,r=Math.min(a,s),o=s-r;n.style.height=r+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});Rm.displayName=Am;var Tm="SelectGroup",[Mm,Dm]=im(Tm);p.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,s=Dc();return c.jsx(Mm,{scope:n,id:s,children:c.jsx(sc.div,{role:"group","aria-labelledby":s,...a,ref:t})})}).displayName=Tm;var Lm="SelectLabel",Fm=p.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,s=Dm(Lm,n);return c.jsx(sc.div,{id:s.id,...a,ref:t})});Fm.displayName=Lm;var Im="SelectItem",[Om,zm]=im(Im),Bm=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:a,disabled:s=!1,textValue:r,...i}=e,o=cm(Im,n),l=jm(Im,n),d=o.value===a,[u,h]=p.useState(r??""),[m,f]=p.useState(!1),g=dl(t,e=>l.itemRefCallback?.(e,a,s)),x=Dc(),v=p.useRef("touch"),y=()=>{s||(o.onValueChange(a),o.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(Om,{scope:n,value:a,disabled:s,textId:x,isSelected:d,onItemTextChange:p.useCallback(e=>{h(t=>t||(e?.textContent??"").trim())},[]),children:c.jsx(am.ItemSlot,{scope:n,value:a,disabled:s,textValue:u,children:c.jsx(sc.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:g,onFocus:ql(i.onFocus,()=>f(!0)),onBlur:ql(i.onBlur,()=>f(!1)),onClick:ql(i.onClick,()=>{"mouse"!==v.current&&y()}),onPointerUp:ql(i.onPointerUp,()=>{"mouse"===v.current&&y()}),onPointerDown:ql(i.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:ql(i.onPointerMove,e=>{v.current=e.pointerType,s?l.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ql(i.onPointerLeave,e=>{e.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:ql(i.onKeyDown,e=>{""!==l.searchRef?.current&&" "===e.key||(tm.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});Bm.displayName=Im;var $m="SelectItemText",Um=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:a,style:s,...r}=e,i=cm($m,n),o=jm($m,n),l=zm($m,n),d=um($m,n),[u,h]=p.useState(null),m=dl(t,e=>h(e),l.onItemTextChange,e=>o.itemTextRefCallback?.(e,l.value,l.disabled)),f=u?.textContent,g=p.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=d;return Rc(()=>(x(g),()=>v(g)),[x,v,g]),c.jsxs(c.Fragment,{children:[c.jsx(sc.span,{id:l.textId,...r,ref:m}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Zt.createPortal(r.children,i.valueNode):null]})});Um.displayName=$m;var Vm="SelectItemIndicator",qm=p.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e;return zm(Vm,n).isSelected?c.jsx(sc.span,{"aria-hidden":!0,...a,ref:t}):null});qm.displayName=Vm;var Hm="SelectScrollUpButton",Gm=p.forwardRef((e,t)=>{const n=jm(Hm,e.__scopeSelect),a=Pm(Hm,e.__scopeSelect),[s,r]=p.useState(!1),i=dl(t,a.onScrollButtonChange);return Rc(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;r(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?c.jsx(Qm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});Gm.displayName=Hm;var Km="SelectScrollDownButton",Wm=p.forwardRef((e,t)=>{const n=jm(Km,e.__scopeSelect),a=Pm(Km,e.__scopeSelect),[s,r]=p.useState(!1),i=dl(t,a.onScrollButtonChange);return Rc(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;r(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?c.jsx(Qm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Wm.displayName=Km;var Qm=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:a,...s}=e,r=jm("SelectScrollButton",n),i=p.useRef(null),o=sm(n),l=p.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),Rc(()=>{const e=o().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[o]),c.jsx(sc.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ql(s.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(a,50))}),onPointerMove:ql(s.onPointerMove,()=>{r.onItemLeave?.(),null===i.current&&(i.current=window.setInterval(a,50))}),onPointerLeave:ql(s.onPointerLeave,()=>{l()})})}),Ym=p.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e;return c.jsx(sc.div,{"aria-hidden":!0,...a,ref:t})});Ym.displayName="SelectSeparator";var Xm="SelectArrow";p.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,s=om(n),r=cm(Xm,n),i=jm(Xm,n);return r.open&&"popper"===i.position?c.jsx(Wu,{...s,...a,ref:t}):null}).displayName=Xm;var Zm=p.forwardRef(({__scopeSelect:e,value:t,...n},a)=>{const s=p.useRef(null),r=dl(a,s),i=nh(t);return p.useEffect(()=>{const e=s.current;if(!e)return;const n=window.HTMLSelectElement.prototype,a=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&a){const n=new Event("change",{bubbles:!0});a.call(e,t),e.dispatchEvent(n)}},[i,t]),c.jsx(sc.select,{...n,style:{...ah,...n.style},ref:r,defaultValue:t})});function Jm(e){return""===e||void 0===e}function ep(e){const t=ic(e),n=p.useRef(""),a=p.useRef(0),s=p.useCallback(e=>{const s=n.current+e;t(s),function e(t){n.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),r=p.useCallback(()=>{n.current="",window.clearTimeout(a.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(a.current),[]),[n,s,r]}function tp(e,t,n){const a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let r=(i=e,o=Math.max(s,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===a.length&&(r=r.filter(e=>e!==n));const l=r.find(e=>e.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}Zm.displayName="SelectBubbleInput";var np=hm,ap=pm,sp=gm,rp=xm,ip=vm,op=bm,lp=Rm,cp=Fm,dp=Bm,up=Um,hp=qm,mp=Gm,pp=Wm,fp=Ym;const gp=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},xp=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),vp=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var yp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bp=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:s="",children:r,iconNode:i,...o},l)=>p.createElement("svg",{ref:l,...yp,width:t,height:t,stroke:e,strokeWidth:a?24*Number(n)/Number(t):n,className:xp("lucide",s),...!r&&!vp(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>p.createElement(e,t)),...Array.isArray(r)?r:[r]])),wp=(e,t)=>{const n=p.forwardRef(({className:n,...a},s)=>{return p.createElement(bp,{ref:s,iconNode:t,className:xp(`lucide-${r=gp(e),r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...a});var r});return n.displayName=gp(e),n},Sp=wp("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),jp=wp("align-center-horizontal",[["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M10 16v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4",key:"11f1s0"}],["path",{d:"M10 8V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v4",key:"t14dx9"}],["path",{d:"M20 16v1a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-1",key:"1w07xs"}],["path",{d:"M14 8V7c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v1",key:"1apec2"}]]),Cp=wp("align-center-vertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"M8 10H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h4",key:"14d6g8"}],["path",{d:"M16 10h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4",key:"1e2lrw"}],["path",{d:"M8 20H7a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2h1",key:"1fkdwx"}],["path",{d:"M16 14h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-1",key:"1euafb"}]]),kp=wp("align-end-horizontal",[["rect",{width:"6",height:"16",x:"4",y:"2",rx:"2",key:"z5wdxg"}],["rect",{width:"6",height:"9",x:"14",y:"9",rx:"2",key:"um7a8w"}],["path",{d:"M22 22H2",key:"19qnx5"}]]),Np=wp("align-end-vertical",[["rect",{width:"16",height:"6",x:"2",y:"4",rx:"2",key:"10wcwx"}],["rect",{width:"9",height:"6",x:"9",y:"14",rx:"2",key:"4p5bwg"}],["path",{d:"M22 22V2",key:"12ipfv"}]]),_p=wp("align-horizontal-space-between",[["rect",{width:"6",height:"14",x:"3",y:"5",rx:"2",key:"j77dae"}],["rect",{width:"6",height:"10",x:"15",y:"7",rx:"2",key:"bq30hj"}],["path",{d:"M3 2v20",key:"1d2pfg"}],["path",{d:"M21 2v20",key:"p059bm"}]]),Ep=wp("align-start-horizontal",[["rect",{width:"6",height:"16",x:"4",y:"6",rx:"2",key:"1n4dg1"}],["rect",{width:"6",height:"9",x:"14",y:"6",rx:"2",key:"17khns"}],["path",{d:"M22 2H2",key:"fhrpnj"}]]),Pp=wp("align-start-vertical",[["rect",{width:"9",height:"6",x:"6",y:"14",rx:"2",key:"lpm2y7"}],["rect",{width:"16",height:"6",x:"6",y:"4",rx:"2",key:"rdj6ps"}],["path",{d:"M2 2v20",key:"1ivd8o"}]]),Ap=wp("align-vertical-space-between",[["rect",{width:"14",height:"6",x:"5",y:"15",rx:"2",key:"1w91an"}],["rect",{width:"10",height:"6",x:"7",y:"3",rx:"2",key:"17wqzy"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M2 3h20",key:"91anmk"}]]),Rp=wp("armchair",[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]),Tp=wp("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Mp=wp("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Dp=wp("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Lp=wp("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Fp=wp("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ip=wp("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Op=wp("boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]),zp=wp("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Bp=wp("brush-cleaning",[["path",{d:"m16 22-1-4",key:"1ow2iv"}],["path",{d:"M19 14a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2h-3a1 1 0 0 1-1-1V4a2 2 0 0 0-4 0v5a1 1 0 0 1-1 1H6a2 2 0 0 0-2 2v1a1 1 0 0 0 1 1",key:"11gii7"}],["path",{d:"M19 14H5l-1.973 6.767A1 1 0 0 0 4 22h16a1 1 0 0 0 .973-1.233z",key:"bju7h4"}],["path",{d:"m8 22 1-4",key:"s3unb"}]]),$p=wp("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),Up=wp("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),Vp=wp("cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]),qp=wp("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),Hp=wp("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Gp=wp("camera-off",[["path",{d:"M14.564 14.558a3 3 0 1 1-4.122-4.121",key:"1rnrzw"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20 20H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 .819-.175",key:"1x3arw"}],["path",{d:"M9.695 4.024A2 2 0 0 1 10.004 4h3.993a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v7.344",key:"1i84u0"}]]),Kp=wp("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Wp=wp("case-upper",[["path",{d:"M15 11h4.5a1 1 0 0 1 0 5h-4a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h3a1 1 0 0 1 0 5",key:"nxs35"}],["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}]]),Qp=wp("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Yp=wp("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Xp=wp("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Zp=wp("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Jp=wp("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ef=wp("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),tf=wp("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),nf=wp("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),af=wp("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),sf=wp("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),rf=wp("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),of=wp("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),lf=wp("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),cf=wp("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),df=wp("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),uf=wp("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),hf=wp("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),mf=wp("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]),pf=wp("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ff=wp("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),gf=wp("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),xf=wp("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),vf=wp("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),yf=wp("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),bf=wp("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),wf=wp("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Sf=wp("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jf=wp("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Cf=wp("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),kf=wp("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),Nf=wp("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),_f=wp("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),Ef=wp("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Pf=wp("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Af=wp("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Rf=wp("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Tf=wp("hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]),Mf=wp("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Df=wp("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),Lf=wp("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ff=wp("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),If=wp("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),Of=wp("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),zf=wp("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Bf=wp("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),$f=wp("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Uf=wp("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Vf=wp("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),qf=wp("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),Hf=wp("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]),Gf=wp("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),Kf=wp("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Wf=wp("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Qf=wp("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Yf=wp("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),Xf=wp("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Zf=wp("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Jf=wp("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),eg=wp("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),tg=wp("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),ng=wp("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),ag=wp("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),sg=wp("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),rg=wp("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),ig=wp("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),og=wp("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),lg=wp("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]),cg=wp("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),dg=wp("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),ug=wp("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),hg=wp("panel-top",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]]),mg=wp("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),pg=wp("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),fg=wp("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),gg=wp("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),xg=wp("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),vg=wp("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),yg=wp("pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),bg=wp("pin-off",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),wg=wp("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),Sg=wp("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),jg=wp("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Cg=wp("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),kg=wp("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),Ng=wp("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),_g=wp("rectangle-horizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]),Eg=wp("rectangle-vertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]]),Pg=wp("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]),Ag=wp("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Rg=wp("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Tg=wp("rows-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]),Mg=wp("ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Dg=wp("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Lg=wp("scan-barcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]),Fg=wp("scan-search",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]]),Ig=wp("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Og=wp("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),zg=wp("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Bg=wp("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),$g=wp("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ug=wp("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Vg=wp("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]),qg=wp("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Hg=wp("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Gg=wp("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Kg=wp("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Wg=wp("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Qg=wp("star-off",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Yg=wp("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Xg=wp("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]),Zg=wp("stretch-horizontal",[["rect",{width:"20",height:"6",x:"2",y:"4",rx:"2",key:"qdearl"}],["rect",{width:"20",height:"6",x:"2",y:"14",rx:"2",key:"1xrn6j"}]]),Jg=wp("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ex=wp("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),tx=wp("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]),nx=wp("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),ax=wp("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),sx=wp("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),rx=wp("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),ix=wp("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ox=wp("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),lx=wp("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),cx=wp("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),dx=wp("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]),ux=wp("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),hx=wp("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),mx=wp("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),px=wp("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),fx=wp("warehouse",[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]]),gx=wp("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),xx=wp("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vx=wp("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),yx=wp("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);if("undefined"!=typeof window&&!window.__selectA11yFixApplied){window.__selectA11yFixApplied=!0,document.addEventListener("focusin",e=>{const t=e.target;"SELECT"===t.tagName&&"true"===t.getAttribute("aria-hidden")&&(e.preventDefault(),e.stopPropagation(),t.blur())},!0);const e=()=>{document.querySelectorAll('select[aria-hidden="true"]').forEach(e=>{e.tabIndex=-1,"inert"in e&&(e.inert=!0)})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e();new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["aria-hidden"]})}const bx=np,wx=sp,Sx=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(ap,{ref:a,className:sl("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,c.jsx(rp,{asChild:!0,children:c.jsx(Xp,{className:"h-4 w-4 opacity-50"})})]}));Sx.displayName=ap.displayName;const jx=p.forwardRef(({className:e,...t},n)=>c.jsx(mp,{ref:n,className:sl("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(ef,{className:"h-4 w-4"})}));jx.displayName=mp.displayName;const Cx=p.forwardRef(({className:e,...t},n)=>c.jsx(pp,{ref:n,className:sl("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(Xp,{className:"h-4 w-4"})}));Cx.displayName=pp.displayName;const kx=p.forwardRef(({className:e,children:t,position:n="popper",...a},s)=>c.jsx(ip,{children:c.jsxs(op,{ref:s,className:sl("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...a,children:[c.jsx(jx,{}),c.jsx(lp,{className:sl("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),c.jsx(Cx,{})]})}));kx.displayName=op.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(cp,{ref:n,className:sl("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=cp.displayName;const Nx=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(dp,{ref:a,className:sl("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(hp,{children:c.jsx(Yp,{className:"h-4 w-4"})})}),c.jsx(up,{children:t})]}));Nx.displayName=dp.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(fp,{ref:n,className:sl("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=fp.displayName;var _x="Switch",[Ex]=Hl(_x),[Px,Ax]=Ex(_x),Rx=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:a,checked:s,defaultChecked:r,required:i,disabled:o,value:l="on",onCheckedChange:d,form:u,...h}=e,[m,f]=p.useState(null),g=dl(t,e=>f(e)),x=p.useRef(!1),v=!m||(u||!!m.closest("form")),[y,b]=th({prop:s,defaultProp:r??!1,onChange:d,caller:_x});return c.jsxs(Px,{scope:n,checked:y,disabled:o,children:[c.jsx(sc.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Lx(y),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:g,onClick:ql(e.onClick,e=>{b(e=>!e),v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),v&&c.jsx(Dx,{control:m,bubbles:!x.current,name:a,value:l,checked:y,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});Rx.displayName=_x;var Tx="SwitchThumb",Mx=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...a}=e,s=Ax(Tx,n);return c.jsx(sc.span,{"data-state":Lx(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})});Mx.displayName=Tx;var Dx=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:a=!0,...s},r)=>{const i=p.useRef(null),o=dl(i,r),l=nh(n),d=Nu(t);return p.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&s){const t=new Event("click",{bubbles:a});s.call(e,n),e.dispatchEvent(t)}},[l,n,a]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Lx(e){return e?"checked":"unchecked"}Dx.displayName="SwitchBubbleInput";var Fx=Rx,Ix=Mx;const Ox=p.forwardRef(({className:e,...t},n)=>c.jsx(Fx,{className:sl("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:c.jsx(Ix,{className:sl("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ox.displayName=Fx.displayName;var zx=["PageUp","PageDown"],Bx=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$x={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ux="Slider",[Vx,qx,Hx]=Xl(Ux),[Gx]=Hl(Ux,[Hx]),[Kx,Wx]=Gx(Ux),Qx=p.forwardRef((e,t)=>{const{name:n,min:a=0,max:s=100,step:r=1,orientation:i="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:d=[a],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:g,...x}=e,v=p.useRef(new Set),y=p.useRef(0),b="horizontal"===i?Zx:Jx,[w=[],S]=th({prop:u,defaultProp:d,onChange:e=>{const t=[...v.current];t[y.current]?.focus(),h(e)}}),j=p.useRef(w);function C(e,t,{commit:n}={commit:!1}){const i=function(e){return(String(e).split(".")[1]||"").length}(r),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-a)/r)*r+a,i),c=Vl(o,[a,s]);S((e=[])=>{const a=function(e=[],t,n){const a=[...e];return a[n]=t,a.sort((e,t)=>e-t)}(e,c,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(a,l*r)){y.current=a.indexOf(c);const t=String(a)!==String(e);return t&&n&&m(a),t?a:e}return e})}return c.jsx(Kx,{scope:e.__scopeSlider,name:n,disabled:o,min:a,max:s,valueIndexToChangeRef:y,thumbs:v.current,values:w,orientation:i,form:g,children:c.jsx(Vx.Provider,{scope:e.__scopeSlider,children:c.jsx(Vx.Slot,{scope:e.__scopeSlider,children:c.jsx(b,{"aria-disabled":o,"data-disabled":o?"":void 0,...x,ref:t,onPointerDown:ql(x.onPointerDown,()=>{o||(j.current=w)}),min:a,max:s,inverted:f,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),a=Math.min(...n);return n.indexOf(a)}(w,e);C(e,t)},onSlideMove:o?void 0:function(e){C(e,y.current)},onSlideEnd:o?void 0:function(){const e=j.current[y.current];w[y.current]!==e&&m(w)},onHomeKeyDown:()=>!o&&C(a,0,{commit:!0}),onEndKeyDown:()=>!o&&C(s,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const n=zx.includes(e.key)||e.shiftKey&&Bx.includes(e.key)?10:1,a=y.current;C(w[a]+r*n*t,a,{commit:!0})}}})})})})});Qx.displayName=Ux;var[Yx,Xx]=Gx(Ux,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Zx=p.forwardRef((e,t)=>{const{min:n,max:a,dir:s,inverted:r,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:d,...u}=e,[h,m]=p.useState(null),f=dl(t,e=>m(e)),g=p.useRef(void 0),x=Jl(s),v="ltr"===x,y=v&&!r||!v&&r;function b(e){const t=g.current||h.getBoundingClientRect(),s=dv([0,t.width],y?[n,a]:[a,n]);return g.current=t,s(e-t.left)}return c.jsx(Yx,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:c.jsx(ev,{dir:x,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=b(e.clientX);i?.(t)},onSlideMove:e=>{const t=b(e.clientX);o?.(t)},onSlideEnd:()=>{g.current=void 0,l?.()},onStepKeyDown:e=>{const t=$x[y?"from-left":"from-right"].includes(e.key);d?.({event:e,direction:t?-1:1})}})})}),Jx=p.forwardRef((e,t)=>{const{min:n,max:a,inverted:s,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onStepKeyDown:l,...d}=e,u=p.useRef(null),h=dl(t,u),m=p.useRef(void 0),f=!s;function g(e){const t=m.current||u.current.getBoundingClientRect(),s=dv([0,t.height],f?[a,n]:[n,a]);return m.current=t,s(e-t.top)}return c.jsx(Yx,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:c.jsx(ev,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=g(e.clientY);r?.(t)},onSlideMove:e=>{const t=g(e.clientY);i?.(t)},onSlideEnd:()=>{m.current=void 0,o?.()},onStepKeyDown:e=>{const t=$x[f?"from-bottom":"from-top"].includes(e.key);l?.({event:e,direction:t?-1:1})}})})}),ev=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:a,onSlideMove:s,onSlideEnd:r,onHomeKeyDown:i,onEndKeyDown:o,onStepKeyDown:l,...d}=e,u=Wx(Ux,n);return c.jsx(sc.span,{...d,ref:t,onKeyDown:ql(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):zx.concat(Bx).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:ql(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():a(e)}),onPointerMove:ql(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:ql(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(e))})})}),tv="SliderTrack",nv=p.forwardRef((e,t)=>{const{__scopeSlider:n,...a}=e,s=Wx(tv,n);return c.jsx(sc.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...a,ref:t})});nv.displayName=tv;var av="SliderRange",sv=p.forwardRef((e,t)=>{const{__scopeSlider:n,...a}=e,s=Wx(av,n),r=Xx(av,n),i=dl(t,p.useRef(null)),o=s.values.length,l=s.values.map(e=>cv(e,s.min,s.max)),d=o>1?Math.min(...l):0,u=100-Math.max(...l);return c.jsx(sc.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...a,ref:i,style:{...e.style,[r.startEdge]:d+"%",[r.endEdge]:u+"%"}})});sv.displayName=av;var rv="SliderThumb",iv=p.forwardRef((e,t)=>{const n=qx(e.__scopeSlider),[a,s]=p.useState(null),r=dl(t,e=>s(e)),i=p.useMemo(()=>a?n().findIndex(e=>e.ref.current===a):-1,[n,a]);return c.jsx(ov,{...e,ref:r,index:i})}),ov=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:a,name:s,...r}=e,i=Wx(rv,n),o=Xx(rv,n),[l,d]=p.useState(null),u=dl(t,e=>d(e)),h=!l||(i.form||!!l.closest("form")),m=Nu(l),f=i.values[a],g=void 0===f?0:cv(f,i.min,i.max),x=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(a,i.values.length),v=m?.[o.size],y=v?function(e,t,n){const a=e/2,s=dv([0,50],[0,a]);return(a-s(t)*n)*n}(v,g,o.direction):0;return p.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${g}% + ${y}px)`},children:[c.jsx(Vx.ItemSlot,{scope:e.__scopeSlider,children:c.jsx(sc.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":i.min,"aria-valuenow":f,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...r,ref:u,style:void 0===f?{display:"none"}:e.style,onFocus:ql(e.onFocus,()=>{i.valueIndexToChangeRef.current=a})})}),h&&c.jsx(lv,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:f},a)]})});iv.displayName=rv;var lv=p.forwardRef(({__scopeSlider:e,value:t,...n},a)=>{const s=p.useRef(null),r=dl(s,a),i=nh(t);return p.useEffect(()=>{const e=s.current;if(!e)return;const n=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&a){const n=new Event("input",{bubbles:!0});a.call(e,t),e.dispatchEvent(n)}},[i,t]),c.jsx(sc.input,{style:{display:"none"},...n,ref:r,defaultValue:t})});function cv(e,t,n){return Vl(100/(n-t)*(e-t),[0,100])}function dv(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}lv.displayName="RadioBubbleInput";var uv=Qx,hv=nv,mv=sv,pv=iv;function fv(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const a=n.reduce((t,{useScope:n,scopeName:a})=>({...t,...n(e)[`__scope${a}`]}),{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}p.forwardRef(({className:e,...t},n)=>c.jsxs(uv,{ref:n,className:sl("relative flex w-full touch-none select-none items-center",e),...t,children:[c.jsx(hv,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:c.jsx(mv,{className:"absolute h-full bg-primary"})}),c.jsx(pv,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})).displayName=uv.displayName;var gv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=pl(`Primitive.${t}`),a=p.forwardRef((e,a)=>{const{asChild:s,...r}=e,i=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),xv="Progress",[vv]=function(e,t=[]){let n=[];const a=()=>{const t=n.map(e=>p.createContext(e));return function(n){const a=n?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...n,[e]:a}}),[n,a])}};return a.scopeName=e,[function(t,a){const s=p.createContext(a);s.displayName=t+"Context";const r=n.length;n=[...n,a];const i=t=>{const{scope:n,children:a,...i}=t,o=n?.[e]?.[r]||s,l=p.useMemo(()=>i,Object.values(i));return c.jsx(o.Provider,{value:l,children:a})};return i.displayName=t+"Provider",[i,function(n,i){const o=i?.[e]?.[r]||s,l=p.useContext(o);if(l)return l;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},fv(a,...t)]}(xv),[yv,bv]=vv(xv),wv=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:a=null,max:s,getValueLabel:r=Cv,...i}=e;(s||0===s)&&_v(s);const o=_v(s)?s:100;null!==a&&Ev(a,o);const l=Ev(a,o)?a:null,d=Nv(l)?r(l,o):void 0;return c.jsx(yv,{scope:n,value:l,max:o,children:c.jsx(gv.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Nv(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":kv(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});wv.displayName=xv;var Sv="ProgressIndicator",jv=p.forwardRef((e,t)=>{const{__scopeProgress:n,...a}=e,s=bv(Sv,n);return c.jsx(gv.div,{"data-state":kv(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...a,ref:t})});function Cv(e,t){return`${Math.round(e/t*100)}%`}function kv(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Nv(e){return"number"==typeof e}function _v(e){return Nv(e)&&!isNaN(e)&&e>0}function Ev(e,t){return Nv(e)&&!isNaN(e)&&e<=t&&e>=0}jv.displayName=Sv;var Pv=wv,Av=jv;const Rv=p.forwardRef(({className:e,value:t,...n},a)=>c.jsx(Pv,{ref:a,className:sl("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:c.jsx(Av,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function Tv({className:e,...t}){return c.jsx("div",{className:sl("animate-pulse rounded-md bg-muted",e),...t})}Rv.displayName=Pv.displayName;var Mv="rovingFocusGroup.onEntryFocus",Dv={bubbles:!1,cancelable:!0},Lv="RovingFocusGroup",[Fv,Iv,Ov]=Xl(Lv),[zv,Bv]=Hl(Lv,[Ov]),[$v,Uv]=zv(Lv),Vv=p.forwardRef((e,t)=>c.jsx(Fv.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(Fv.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(qv,{...e,ref:t})})}));Vv.displayName=Lv;var qv=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:s=!1,dir:r,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=p.useRef(null),f=dl(t,m),g=Jl(r),[x,v]=th({prop:i,defaultProp:o??null,onChange:l,caller:Lv}),[y,b]=p.useState(!1),w=ic(d),S=Iv(n),j=p.useRef(!1),[C,k]=p.useState(0);return p.useEffect(()=>{const e=m.current;if(e)return e.addEventListener(Mv,w),()=>e.removeEventListener(Mv,w)},[w]),c.jsx($v,{scope:n,orientation:a,dir:g,loop:s,currentTabStopId:x,onItemFocus:p.useCallback(e=>v(e),[v]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:p.useCallback(()=>k(e=>e-1),[]),children:c.jsx(sc.div,{tabIndex:y||0===C?-1:0,"data-orientation":a,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:ql(e.onMouseDown,()=>{j.current=!0}),onFocus:ql(e.onFocus,e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(Mv,Dv);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=S().filter(e=>e.focusable);Wv([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),u)}}j.current=!1}),onBlur:ql(e.onBlur,()=>b(!1))})})}),Hv="RovingFocusGroupItem",Gv=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:s=!1,tabStopId:r,children:i,...o}=e,l=Dc(),d=r||l,u=Uv(Hv,n),h=u.currentTabStopId===d,m=Iv(n),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:x}=u;return p.useEffect(()=>{if(a)return f(),()=>g()},[a,f,g]),c.jsx(Fv.ItemSlot,{scope:n,id:d,focusable:a,active:s,children:c.jsx(sc.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:ql(e.onMouseDown,e=>{a?u.onItemFocus(d):e.preventDefault()}),onFocus:ql(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:ql(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const a=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(a)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)?void 0:Kv[a]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const r=s.indexOf(e.currentTarget);s=u.loop?(a=r+1,(n=s).map((e,t)=>n[(a+t)%n.length])):s.slice(r+1)}setTimeout(()=>Wv(s))}var n,a}),children:"function"==typeof i?i({isCurrentTabStop:h,hasTabStop:null!=x}):i})})});Gv.displayName=Hv;var Kv={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Wv(e,t=!1){const n=document.activeElement;for(const a of e){if(a===n)return;if(a.focus({preventScroll:t}),document.activeElement!==n)return}}var Qv=Vv,Yv=Gv;var Xv=e=>{const{present:t,children:n}=e,a=function(e){const[t,n]=p.useState(),a=p.useRef(null),s=p.useRef(e),r=p.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return p.useReducer((e,n)=>t[e][n]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const e=Zv(a.current);r.current="mounted"===o?e:"none"},[o]),Rc(()=>{const t=a.current,n=s.current;if(n!==e){const a=r.current,i=Zv(t);if(e)l("MOUNT");else if("none"===i||"none"===t?.display)l("UNMOUNT");else{l(n&&a!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),Rc(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=r=>{const i=Zv(a.current).includes(CSS.escape(r.animationName));if(r.target===t&&i&&(l("ANIMATION_END"),!s.current)){const a=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=a)})}},o=e=>{e.target===t&&(r.current=Zv(a.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:p.useCallback(e=>{a.current=e?getComputedStyle(e):null,n(e)},[])}}(t),s="function"==typeof n?n({present:a.isPresent}):p.Children.only(n),r=dl(a.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof n||a.isPresent?p.cloneElement(s,{ref:r}):null};function Zv(e){return e?.animationName||"none"}Xv.displayName="Presence";var Jv="Tabs",[ey]=Hl(Jv,[Bv]),ty=Bv(),[ny,ay]=ey(Jv),sy=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,onValueChange:s,defaultValue:r,orientation:i="horizontal",dir:o,activationMode:l="automatic",...d}=e,u=Jl(o),[h,m]=th({prop:a,onChange:s,defaultProp:r??"",caller:Jv});return c.jsx(ny,{scope:n,baseId:Dc(),value:h,onValueChange:m,orientation:i,dir:u,activationMode:l,children:c.jsx(sc.div,{dir:u,"data-orientation":i,...d,ref:t})})});sy.displayName=Jv;var ry="TabsList",iy=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:a=!0,...s}=e,r=ay(ry,n),i=ty(n);return c.jsx(Qv,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:a,children:c.jsx(sc.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:t})})});iy.displayName=ry;var oy="TabsTrigger",ly=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,disabled:s=!1,...r}=e,i=ay(oy,n),o=ty(n),l=uy(i.baseId,a),d=hy(i.baseId,a),u=a===i.value;return c.jsx(Yv,{asChild:!0,...o,focusable:!s,active:u,children:c.jsx(sc.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...r,ref:t,onMouseDown:ql(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(a)}),onKeyDown:ql(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(a)}),onFocus:ql(e.onFocus,()=>{const e="manual"!==i.activationMode;u||s||!e||i.onValueChange(a)})})})});ly.displayName=oy;var cy="TabsContent",dy=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,forceMount:s,children:r,...i}=e,o=ay(cy,n),l=uy(o.baseId,a),d=hy(o.baseId,a),u=a===o.value,h=p.useRef(u);return p.useEffect(()=>{const e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),c.jsx(Xv,{present:s||u,children:({present:n})=>c.jsx(sc.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:n&&r})})});function uy(e,t){return`${e}-trigger-${t}`}function hy(e,t){return`${e}-content-${t}`}dy.displayName=cy;var my=iy,py=ly,fy=dy;const gy=sy,xy=p.forwardRef(({className:e,...t},n)=>c.jsx(my,{ref:n,className:sl("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));xy.displayName=my.displayName;const vy=p.forwardRef(({className:e,...t},n)=>c.jsx(py,{ref:n,className:sl("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));vy.displayName=py.displayName;const yy=p.forwardRef(({className:e,...t},n)=>c.jsx(fy,{ref:n,className:sl("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));function by(e){const t=wy(e),n=p.forwardRef((e,n)=>{const{children:a,...s}=e,r=p.Children.toArray(a),i=r.find(jy);if(i){const e=i.props.children,a=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...s,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,a):null})}return c.jsx(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}function wy(e){const t=p.forwardRef((e,t)=>{const{children:n,...a}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const a in t){const s=e[a],r=t[a];/^on[A-Z]/.test(a)?s&&r?n[a]=(...e)=>{const t=r(...e);return s(...e),t}:s&&(n[a]=s):"style"===a?n[a]={...s,...r}:"className"===a&&(n[a]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==p.Fragment&&(s.ref=t?cl(t,e):e),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}yy.displayName=fy.displayName;var Sy=Symbol("radix.slottable");function jy(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Sy}var Cy="Dialog",[ky,Ny]=Hl(Cy),[_y,Ey]=ky(Cy),Py=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:s,onOpenChange:r,modal:i=!0}=e,o=p.useRef(null),l=p.useRef(null),[d,u]=th({prop:a,defaultProp:s??!1,onChange:r,caller:Cy});return c.jsx(_y,{scope:t,triggerRef:o,contentRef:l,contentId:Dc(),titleId:Dc(),descriptionId:Dc(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(e=>!e),[u]),modal:i,children:n})};Py.displayName=Cy;var Ay="DialogTrigger",Ry=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,s=Ey(Ay,n),r=dl(t,s.triggerRef);return c.jsx(sc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Xy(s.open),...a,ref:r,onClick:ql(e.onClick,s.onOpenToggle)})});Ry.displayName=Ay;var Ty="DialogPortal",[My,Dy]=ky(Ty,{forceMount:void 0}),Ly=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:s}=e,r=Ey(Ty,t);return c.jsx(My,{scope:t,forceMount:n,children:p.Children.map(a,e=>c.jsx(Xv,{present:n||r.open,children:c.jsx(Qu,{asChild:!0,container:s,children:e})}))})};Ly.displayName=Ty;var Fy="DialogOverlay",Iy=p.forwardRef((e,t)=>{const n=Dy(Fy,e.__scopeDialog),{forceMount:a=n.forceMount,...s}=e,r=Ey(Fy,e.__scopeDialog);return r.modal?c.jsx(Xv,{present:a||r.open,children:c.jsx(zy,{...s,ref:t})}):null});Iy.displayName=Fy;var Oy=by("DialogOverlay.RemoveScroll"),zy=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,s=Ey(Fy,n);return c.jsx(Jh,{as:Oy,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(sc.div,{"data-state":Xy(s.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),By="DialogContent",$y=p.forwardRef((e,t)=>{const n=Dy(By,e.__scopeDialog),{forceMount:a=n.forceMount,...s}=e,r=Ey(By,e.__scopeDialog);return c.jsx(Xv,{present:a||r.open,children:r.modal?c.jsx(Uy,{...s,ref:t}):c.jsx(Vy,{...s,ref:t})})});$y.displayName=By;var Uy=p.forwardRef((e,t)=>{const n=Ey(By,e.__scopeDialog),a=p.useRef(null),s=dl(t,n.contentRef,a);return p.useEffect(()=>{const e=a.current;if(e)return hh(e)},[]),c.jsx(qy,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ql(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:ql(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:ql(e.onFocusOutside,e=>e.preventDefault())})}),Vy=p.forwardRef((e,t)=>{const n=Ey(By,e.__scopeDialog),a=p.useRef(!1),s=p.useRef(!1);return c.jsx(qy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),qy=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:r,...i}=e,o=Ey(By,n),l=p.useRef(null),d=dl(t,l);return yc(),c.jsxs(c.Fragment,{children:[c.jsx(Cc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:r,children:c.jsx(hc,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Xy(o.open),...i,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(tb,{titleId:o.titleId}),c.jsx(nb,{contentRef:l,descriptionId:o.descriptionId})]})]})}),Hy="DialogTitle",Gy=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,s=Ey(Hy,n);return c.jsx(sc.h2,{id:s.titleId,...a,ref:t})});Gy.displayName=Hy;var Ky="DialogDescription",Wy=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,s=Ey(Ky,n);return c.jsx(sc.p,{id:s.descriptionId,...a,ref:t})});Wy.displayName=Ky;var Qy="DialogClose",Yy=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,s=Ey(Qy,n);return c.jsx(sc.button,{type:"button",...a,ref:t,onClick:ql(e.onClick,()=>s.onOpenChange(!1))})});function Xy(e){return e?"open":"closed"}Yy.displayName=Qy;var Zy="DialogTitleWarning",[Jy,eb]=function(e,t){const n=p.createContext(t),a=e=>{const{children:t,...a}=e,s=p.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:s,children:t})};return a.displayName=e+"Provider",[a,function(a){const s=p.useContext(n);if(s)return s;if(void 0!==t)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}]}(Zy,{contentName:By,titleName:Hy,docsSlug:"dialog"}),tb=({titleId:e})=>{const t=eb(Zy),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},nb=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eb("DialogDescriptionWarning").contentName}}.`;return p.useEffect(()=>{const n=e.current?.getAttribute("aria-describedby");if(t&&n){document.getElementById(t)}},[n,e,t]),null},ab=Py,sb=Ry,rb=Ly,ib=Iy,ob=$y,lb=Gy,cb=Wy,db=Yy;const ub=ab,hb=rb,mb=p.forwardRef(({className:e,...t},n)=>c.jsx(ib,{ref:n,className:sl("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));mb.displayName=ib.displayName;const pb=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(hb,{children:[c.jsx(mb,{}),c.jsxs(ob,{ref:a,className:sl("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,c.jsxs(db,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(xx,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pb.displayName=ob.displayName;const fb=({className:e,...t})=>c.jsx("div",{className:sl("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});fb.displayName="DialogHeader";const gb=({className:e,...t})=>c.jsx("div",{className:sl("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});gb.displayName="DialogFooter";const xb=p.forwardRef(({className:e,...t},n)=>c.jsx(lb,{ref:n,className:sl("text-lg font-semibold leading-none tracking-tight",e),...t}));xb.displayName=lb.displayName;const vb=p.forwardRef(({className:e,...t},n)=>c.jsx(cb,{ref:n,className:sl("text-sm text-muted-foreground",e),...t}));vb.displayName=cb.displayName;var yb=Symbol("radix.slottable");function bb(e){const t=({children:e})=>c.jsx(c.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=yb,t}var wb="AlertDialog",[Sb]=Hl(wb,[Ny]),jb=Ny(),Cb=e=>{const{__scopeAlertDialog:t,...n}=e,a=jb(t);return c.jsx(ab,{...a,...n,modal:!0})};Cb.displayName=wb;p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,s=jb(n);return c.jsx(sb,{...s,...a,ref:t})}).displayName="AlertDialogTrigger";var kb=e=>{const{__scopeAlertDialog:t,...n}=e,a=jb(t);return c.jsx(rb,{...a,...n})};kb.displayName="AlertDialogPortal";var Nb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,s=jb(n);return c.jsx(ib,{...s,...a,ref:t})});Nb.displayName="AlertDialogOverlay";var _b="AlertDialogContent",[Eb,Pb]=Sb(_b),Ab=bb("AlertDialogContent"),Rb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:a,...s}=e,r=jb(n),i=p.useRef(null),o=dl(t,i),l=p.useRef(null);return c.jsx(Jy,{contentName:_b,titleName:Tb,docsSlug:"alert-dialog",children:c.jsx(Eb,{scope:n,cancelRef:l,children:c.jsxs(ob,{role:"alertdialog",...r,...s,ref:o,onOpenAutoFocus:ql(s.onOpenAutoFocus,e=>{e.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[c.jsx(Ab,{children:a}),c.jsx(zb,{contentRef:i})]})})})});Rb.displayName=_b;var Tb="AlertDialogTitle",Mb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,s=jb(n);return c.jsx(lb,{...s,...a,ref:t})});Mb.displayName=Tb;var Db="AlertDialogDescription",Lb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,s=jb(n);return c.jsx(cb,{...s,...a,ref:t})});Lb.displayName=Db;var Fb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,s=jb(n);return c.jsx(db,{...s,...a,ref:t})});Fb.displayName="AlertDialogAction";var Ib="AlertDialogCancel",Ob=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,{cancelRef:s}=Pb(Ib,n),r=jb(n),i=dl(t,s);return c.jsx(db,{...r,...a,ref:i})});Ob.displayName=Ib;var zb=({contentRef:e})=>{const t=`\`${_b}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${_b}\` by passing a \`${Db}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${_b}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))},[t,e]),null},Bb=Nb,$b=Rb,Ub=Fb,Vb=Ob,qb=Mb,Hb=Lb;const Gb=Cb,Kb=kb,Wb=p.forwardRef(({className:e,...t},n)=>c.jsx(Bb,{className:sl("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Wb.displayName=Bb.displayName;const Qb=p.forwardRef(({className:e,...t},n)=>c.jsxs(Kb,{children:[c.jsx(Wb,{}),c.jsx($b,{ref:n,className:sl("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Qb.displayName=$b.displayName;const Yb=({className:e,...t})=>c.jsx("div",{className:sl("flex flex-col space-y-2 text-center sm:text-left",e),...t});Yb.displayName="AlertDialogHeader";const Xb=({className:e,...t})=>c.jsx("div",{className:sl("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Xb.displayName="AlertDialogFooter";const Zb=p.forwardRef(({className:e,...t},n)=>c.jsx(qb,{ref:n,className:sl("text-lg font-semibold",e),...t}));Zb.displayName=qb.displayName;const Jb=p.forwardRef(({className:e,children:t,...n},a)=>c.jsx(Hb,{asChild:!0,...n,children:c.jsx("div",{ref:a,className:sl("text-sm text-muted-foreground",e),children:t})}));Jb.displayName=Hb.displayName;const ew=p.forwardRef(({className:e,...t},n)=>c.jsx(Ub,{ref:n,className:sl("",e),...t}));ew.displayName=Ub.displayName;const tw=p.forwardRef(({className:e,...t},n)=>c.jsx(Vb,{ref:n,className:sl("",e),...t}));function nw(e){const t=aw(e),n=p.forwardRef((e,n)=>{const{children:a,...s}=e,r=p.Children.toArray(a),i=r.find(rw);if(i){const e=i.props.children,a=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...s,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,a):null})}return c.jsx(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}function aw(e){const t=p.forwardRef((e,t)=>{const{children:n,...a}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const a in t){const s=e[a],r=t[a];/^on[A-Z]/.test(a)?s&&r?n[a]=(...e)=>{const t=r(...e);return s(...e),t}:s&&(n[a]=s):"style"===a?n[a]={...s,...r}:"className"===a&&(n[a]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==p.Fragment&&(s.ref=t?cl(t,e):e),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}tw.displayName=Vb.displayName;var sw=Symbol("radix.slottable");function rw(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===sw}var iw=["Enter"," "],ow=["ArrowUp","PageDown","End"],lw=["ArrowDown","PageUp","Home",...ow],cw={ltr:[...iw,"ArrowRight"],rtl:[...iw,"ArrowLeft"]},dw={ltr:["ArrowLeft"],rtl:["ArrowRight"]},uw="Menu",[hw,mw,pw]=Xl(uw),[fw,gw]=Hl(uw,[pw,Pu,Bv]),xw=Pu(),vw=Bv(),[yw,bw]=fw(uw),[ww,Sw]=fw(uw),jw=e=>{const{__scopeMenu:t,open:n=!1,children:a,dir:s,onOpenChange:r,modal:i=!0}=e,o=xw(t),[l,d]=p.useState(null),u=p.useRef(!1),h=ic(r),m=Jl(s);return p.useEffect(()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),c.jsx(Hu,{...o,children:c.jsx(yw,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:d,children:c.jsx(ww,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:i,children:a})})})};jw.displayName=uw;var Cw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...a}=e,s=xw(n);return c.jsx(Gu,{...s,...a,ref:t})});Cw.displayName="MenuAnchor";var kw="MenuPortal",[Nw,_w]=fw(kw,{forceMount:void 0}),Ew=e=>{const{__scopeMenu:t,forceMount:n,children:a,container:s}=e,r=bw(kw,t);return c.jsx(Nw,{scope:t,forceMount:n,children:c.jsx(Xv,{present:n||r.open,children:c.jsx(Qu,{asChild:!0,container:s,children:a})})})};Ew.displayName=kw;var Pw="MenuContent",[Aw,Rw]=fw(Pw),Tw=p.forwardRef((e,t)=>{const n=_w(Pw,e.__scopeMenu),{forceMount:a=n.forceMount,...s}=e,r=bw(Pw,e.__scopeMenu),i=Sw(Pw,e.__scopeMenu);return c.jsx(hw.Provider,{scope:e.__scopeMenu,children:c.jsx(Xv,{present:a||r.open,children:c.jsx(hw.Slot,{scope:e.__scopeMenu,children:i.modal?c.jsx(Mw,{...s,ref:t}):c.jsx(Dw,{...s,ref:t})})})})}),Mw=p.forwardRef((e,t)=>{const n=bw(Pw,e.__scopeMenu),a=p.useRef(null),s=dl(t,a);return p.useEffect(()=>{const e=a.current;if(e)return hh(e)},[]),c.jsx(Fw,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ql(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Dw=p.forwardRef((e,t)=>{const n=bw(Pw,e.__scopeMenu);return c.jsx(Fw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Lw=nw("MenuContent.ScrollLock"),Fw=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:a=!1,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:g,...x}=e,v=bw(Pw,n),y=Sw(Pw,n),b=xw(n),w=vw(n),S=mw(n),[j,C]=p.useState(null),k=p.useRef(null),N=dl(t,k,v.onContentChange),_=p.useRef(0),E=p.useRef(""),P=p.useRef(0),A=p.useRef(null),R=p.useRef("right"),T=p.useRef(0),M=g?Jh:p.Fragment,D=g?{as:Lw,allowPinchZoom:!0}:void 0,L=e=>{const t=E.current+e,n=S().filter(e=>!e.disabled),a=document.activeElement,s=n.find(e=>e.ref.current===a)?.textValue,r=function(e,t,n){const a=t.length>1&&Array.from(t).every(e=>e===t[0]),s=a?t[0]:t,r=n?e.indexOf(n):-1;let i=(o=e,l=Math.max(r,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===s.length&&(i=i.filter(e=>e!==n));const c=i.find(e=>e.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}(n.map(e=>e.textValue),t,s),i=n.find(e=>e.textValue===r)?.ref.current;!function e(t){E.current=t,window.clearTimeout(_.current),""!==t&&(_.current=window.setTimeout(()=>e(""),1e3))}(t),i&&setTimeout(()=>i.focus())};p.useEffect(()=>()=>window.clearTimeout(_.current),[]),yc();const F=p.useCallback(e=>R.current===A.current?.side&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:a}=e;let s=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const e=t[r],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>a!=u>a&&n<(d-l)*(a-c)/(u-c)+l&&(s=!s)}return s}(n,t)}(e,A.current?.area),[]);return c.jsx(Aw,{scope:n,searchRef:E,onItemEnter:p.useCallback(e=>{F(e)&&e.preventDefault()},[F]),onItemLeave:p.useCallback(e=>{F(e)||(k.current?.focus(),C(null))},[F]),onTriggerLeave:p.useCallback(e=>{F(e)&&e.preventDefault()},[F]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback(e=>{A.current=e},[]),children:c.jsx(M,{...D,children:c.jsx(Cc,{asChild:!0,trapped:s,onMountAutoFocus:ql(r,e=>{e.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:c.jsx(hc,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:c.jsx(Qv,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:a,currentTabStopId:j,onCurrentTabStopIdChange:C,onEntryFocus:ql(l,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(Ku,{role:"menu","aria-orientation":"vertical","data-state":dS(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...x,ref:N,style:{outline:"none",...x.style},onKeyDown:ql(x.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,a=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&a&&L(e.key));const s=k.current;if(e.target!==s)return;if(!lw.includes(e.key))return;e.preventDefault();const r=S().filter(e=>!e.disabled).map(e=>e.ref.current);ow.includes(e.key)&&r.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(r)}),onBlur:ql(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(_.current),E.current="")}),onPointerMove:ql(e.onPointerMove,mS(e=>{const t=e.target,n=T.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>T.current?"right":"left";R.current=t,T.current=e.clientX}}))})})})})})})});Tw.displayName=Pw;var Iw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...a}=e;return c.jsx(sc.div,{role:"group",...a,ref:t})});Iw.displayName="MenuGroup";var Ow=p.forwardRef((e,t)=>{const{__scopeMenu:n,...a}=e;return c.jsx(sc.div,{...a,ref:t})});Ow.displayName="MenuLabel";var zw="MenuItem",Bw="menu.itemSelect",$w=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:a,...s}=e,r=p.useRef(null),i=Sw(zw,e.__scopeMenu),o=Rw(zw,e.__scopeMenu),l=dl(t,r),d=p.useRef(!1);return c.jsx(Uw,{...s,ref:l,disabled:n,onClick:ql(e.onClick,()=>{const e=r.current;if(!n&&e){const t=new CustomEvent(Bw,{bubbles:!0,cancelable:!0});e.addEventListener(Bw,e=>a?.(e),{once:!0}),rc(e,t),t.defaultPrevented?d.current=!1:i.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),d.current=!0},onPointerUp:ql(e.onPointerUp,e=>{d.current||e.currentTarget?.click()}),onKeyDown:ql(e.onKeyDown,e=>{const t=""!==o.searchRef.current;n||t&&" "===e.key||iw.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});$w.displayName=zw;var Uw=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:a=!1,textValue:s,...r}=e,i=Rw(zw,n),o=vw(n),l=p.useRef(null),d=dl(t,l),[u,h]=p.useState(!1),[m,f]=p.useState("");return p.useEffect(()=>{const e=l.current;e&&f((e.textContent??"").trim())},[r.children]),c.jsx(hw.ItemSlot,{scope:n,disabled:a,textValue:s??m,children:c.jsx(Yv,{asChild:!0,...o,focusable:!a,children:c.jsx(sc.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...r,ref:d,onPointerMove:ql(e.onPointerMove,mS(e=>{if(a)i.onItemLeave(e);else if(i.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:ql(e.onPointerLeave,mS(e=>i.onItemLeave(e))),onFocus:ql(e.onFocus,()=>h(!0)),onBlur:ql(e.onBlur,()=>h(!1))})})})}),Vw=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:a,...s}=e;return c.jsx(Xw,{scope:e.__scopeMenu,checked:n,children:c.jsx($w,{role:"menuitemcheckbox","aria-checked":uS(n)?"mixed":n,...s,ref:t,"data-state":hS(n),onSelect:ql(s.onSelect,()=>a?.(!!uS(n)||!n),{checkForDefaultPrevented:!1})})})});Vw.displayName="MenuCheckboxItem";var qw="MenuRadioGroup",[Hw,Gw]=fw(qw,{value:void 0,onValueChange:()=>{}}),Kw=p.forwardRef((e,t)=>{const{value:n,onValueChange:a,...s}=e,r=ic(a);return c.jsx(Hw,{scope:e.__scopeMenu,value:n,onValueChange:r,children:c.jsx(Iw,{...s,ref:t})})});Kw.displayName=qw;var Ww="MenuRadioItem",Qw=p.forwardRef((e,t)=>{const{value:n,...a}=e,s=Gw(Ww,e.__scopeMenu),r=n===s.value;return c.jsx(Xw,{scope:e.__scopeMenu,checked:r,children:c.jsx($w,{role:"menuitemradio","aria-checked":r,...a,ref:t,"data-state":hS(r),onSelect:ql(a.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Qw.displayName=Ww;var Yw="MenuItemIndicator",[Xw,Zw]=fw(Yw,{checked:!1}),Jw=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:a,...s}=e,r=Zw(Yw,n);return c.jsx(Xv,{present:a||uS(r.checked)||!0===r.checked,children:c.jsx(sc.span,{...s,ref:t,"data-state":hS(r.checked)})})});Jw.displayName=Yw;var eS=p.forwardRef((e,t)=>{const{__scopeMenu:n,...a}=e;return c.jsx(sc.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});eS.displayName="MenuSeparator";var tS=p.forwardRef((e,t)=>{const{__scopeMenu:n,...a}=e,s=xw(n);return c.jsx(Wu,{...s,...a,ref:t})});tS.displayName="MenuArrow";var nS="MenuSub",[aS,sS]=fw(nS),rS=e=>{const{__scopeMenu:t,children:n,open:a=!1,onOpenChange:s}=e,r=bw(nS,t),i=xw(t),[o,l]=p.useState(null),[d,u]=p.useState(null),h=ic(s);return p.useEffect(()=>(!1===r.open&&h(!1),()=>h(!1)),[r.open,h]),c.jsx(Hu,{...i,children:c.jsx(yw,{scope:t,open:a,onOpenChange:h,content:d,onContentChange:u,children:c.jsx(aS,{scope:t,contentId:Dc(),triggerId:Dc(),trigger:o,onTriggerChange:l,children:n})})})};rS.displayName=nS;var iS="MenuSubTrigger",oS=p.forwardRef((e,t)=>{const n=bw(iS,e.__scopeMenu),a=Sw(iS,e.__scopeMenu),s=sS(iS,e.__scopeMenu),r=Rw(iS,e.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=r,d={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),c.jsx(Cw,{asChild:!0,...d,children:c.jsx(Uw,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":dS(n.open),...e,ref:cl(t,s.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ql(e.onPointerMove,mS(t=>{r.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||i.current||(r.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ql(e.onPointerLeave,mS(e=>{u();const t=n.content?.getBoundingClientRect();if(t){const a=n.content?.dataset.side,s="right"===a,i=s?-5:5,l=t[s?"left":"right"],c=t[s?"right":"left"];r.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:l,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:l,y:t.bottom}],side:a}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(e),e.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:ql(e.onKeyDown,t=>{const s=""!==r.searchRef.current;e.disabled||s&&" "===t.key||cw[a.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())})})})});oS.displayName=iS;var lS="MenuSubContent",cS=p.forwardRef((e,t)=>{const n=_w(Pw,e.__scopeMenu),{forceMount:a=n.forceMount,...s}=e,r=bw(Pw,e.__scopeMenu),i=Sw(Pw,e.__scopeMenu),o=sS(lS,e.__scopeMenu),l=p.useRef(null),d=dl(t,l);return c.jsx(hw.Provider,{scope:e.__scopeMenu,children:c.jsx(Xv,{present:a||r.open,children:c.jsx(hw.Slot,{scope:e.__scopeMenu,children:c.jsx(Fw,{id:o.contentId,"aria-labelledby":o.triggerId,...s,ref:d,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{i.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:ql(e.onFocusOutside,e=>{e.target!==o.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:ql(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:ql(e.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),n=dw[i.dir].includes(e.key);t&&n&&(r.onOpenChange(!1),o.trigger?.focus(),e.preventDefault())})})})})})});function dS(e){return e?"open":"closed"}function uS(e){return"indeterminate"===e}function hS(e){return uS(e)?"indeterminate":e?"checked":"unchecked"}function mS(e){return t=>"mouse"===t.pointerType?e(t):void 0}cS.displayName=lS;var pS=jw,fS=Cw,gS=Ew,xS=Tw,vS=Iw,yS=Ow,bS=$w,wS=Vw,SS=Kw,jS=Qw,CS=Jw,kS=eS,NS=tS,_S=rS,ES=oS,PS=cS,AS="DropdownMenu",[RS]=Hl(AS,[gw]),TS=gw(),[MS,DS]=RS(AS),LS=e=>{const{__scopeDropdownMenu:t,children:n,dir:a,open:s,defaultOpen:r,onOpenChange:i,modal:o=!0}=e,l=TS(t),d=p.useRef(null),[u,h]=th({prop:s,defaultProp:r??!1,onChange:i,caller:AS});return c.jsx(MS,{scope:t,triggerId:Dc(),triggerRef:d,contentId:Dc(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(e=>!e),[h]),modal:o,children:c.jsx(pS,{...l,open:u,onOpenChange:h,dir:a,modal:o,children:n})})};LS.displayName=AS;var FS="DropdownMenuTrigger",IS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:a=!1,...s}=e,r=DS(FS,n),i=TS(n);return c.jsx(fS,{asChild:!0,...i,children:c.jsx(sc.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...s,ref:cl(t,r.triggerRef),onPointerDown:ql(e.onPointerDown,e=>{a||0!==e.button||!1!==e.ctrlKey||(r.onOpenToggle(),r.open||e.preventDefault())}),onKeyDown:ql(e.onKeyDown,e=>{a||(["Enter"," "].includes(e.key)&&r.onOpenToggle(),"ArrowDown"===e.key&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});IS.displayName=FS;var OS=e=>{const{__scopeDropdownMenu:t,...n}=e,a=TS(t);return c.jsx(gS,{...a,...n})};OS.displayName="DropdownMenuPortal";var zS="DropdownMenuContent",BS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=DS(zS,n),r=TS(n),i=p.useRef(!1);return c.jsx(xS,{id:s.contentId,"aria-labelledby":s.triggerId,...r,...a,ref:t,onCloseAutoFocus:ql(e.onCloseAutoFocus,e=>{i.current||s.triggerRef.current?.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:ql(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,a=2===t.button||n;s.modal&&!a||(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BS.displayName=zS;p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(vS,{...s,...a,ref:t})}).displayName="DropdownMenuGroup";var $S=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(yS,{...s,...a,ref:t})});$S.displayName="DropdownMenuLabel";var US=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(bS,{...s,...a,ref:t})});US.displayName="DropdownMenuItem";var VS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(wS,{...s,...a,ref:t})});VS.displayName="DropdownMenuCheckboxItem";var qS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(SS,{...s,...a,ref:t})});qS.displayName="DropdownMenuRadioGroup";var HS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(jS,{...s,...a,ref:t})});HS.displayName="DropdownMenuRadioItem";var GS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(CS,{...s,...a,ref:t})});GS.displayName="DropdownMenuItemIndicator";var KS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(kS,{...s,...a,ref:t})});KS.displayName="DropdownMenuSeparator";p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(NS,{...s,...a,ref:t})}).displayName="DropdownMenuArrow";var WS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(ES,{...s,...a,ref:t})});WS.displayName="DropdownMenuSubTrigger";var QS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,s=TS(n);return c.jsx(PS,{...s,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QS.displayName="DropdownMenuSubContent";var YS=OS,XS=BS,ZS=$S,JS=US,ej=VS,tj=HS,nj=GS,aj=KS,sj=WS,rj=QS;const ij=LS,oj=IS,lj=e=>{const{__scopeDropdownMenu:t,children:n,open:a,onOpenChange:s,defaultOpen:r}=e,i=TS(t),[o,l]=th({prop:a,defaultProp:r??!1,onChange:s,caller:"DropdownMenuSub"});return c.jsx(_S,{...i,open:o,onOpenChange:l,children:n})},cj=qS,dj=p.forwardRef(({className:e,inset:t,children:n,...a},s)=>c.jsxs(sj,{ref:s,className:sl("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...a,children:[n,c.jsx(Jp,{className:"ml-auto h-4 w-4"})]}));dj.displayName=sj.displayName;const uj=p.forwardRef(({className:e,...t},n)=>c.jsx(rj,{ref:n,className:sl("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));uj.displayName=rj.displayName;const hj=p.forwardRef(({className:e,sideOffset:t=4,...n},a)=>c.jsx(YS,{children:c.jsx(XS,{ref:a,sideOffset:t,className:sl("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));hj.displayName=XS.displayName;const mj=p.forwardRef(({className:e,inset:t,...n},a)=>c.jsx(JS,{ref:a,className:sl("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));mj.displayName=JS.displayName;const pj=p.forwardRef(({className:e,children:t,checked:n,...a},s)=>c.jsxs(ej,{ref:s,className:sl("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...a,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(nj,{children:c.jsx(Yp,{className:"h-4 w-4"})})}),t]}));pj.displayName=ej.displayName;const fj=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(tj,{ref:a,className:sl("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(nj,{children:c.jsx(df,{className:"h-2 w-2 fill-current"})})}),t]}));fj.displayName=tj.displayName;const gj=p.forwardRef(({className:e,inset:t,...n},a)=>c.jsx(ZS,{ref:a,className:sl("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));gj.displayName=ZS.displayName;const xj=p.forwardRef(({className:e,...t},n)=>c.jsx(aj,{ref:n,className:sl("-mx-1 my-1 h-px bg-muted",e),...t}));xj.displayName=aj.displayName;var vj="ContextMenu",[yj]=Hl(vj,[gw]),bj=gw(),[wj,Sj]=yj(vj),jj=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:a,dir:s,modal:r=!0}=e,[i,o]=p.useState(!1),l=bj(t),d=ic(a),u=p.useCallback(e=>{o(e),d(e)},[d]);return c.jsx(wj,{scope:t,open:i,onOpenChange:u,modal:r,children:c.jsx(pS,{...l,dir:s,open:i,onOpenChange:u,modal:r,children:n})})};jj.displayName=vj;var Cj="ContextMenuTrigger",kj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:a=!1,...s}=e,r=Sj(Cj,n),i=bj(n),o=p.useRef({x:0,y:0}),l=p.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),d=p.useRef(0),u=p.useCallback(()=>window.clearTimeout(d.current),[]),h=e=>{o.current={x:e.clientX,y:e.clientY},r.onOpenChange(!0)};return p.useEffect(()=>u,[u]),p.useEffect(()=>{a&&u()},[a,u]),c.jsxs(c.Fragment,{children:[c.jsx(fS,{...i,virtualRef:l}),c.jsx(sc.span,{"data-state":r.open?"open":"closed","data-disabled":a?"":void 0,...s,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:a?e.onContextMenu:ql(e.onContextMenu,e=>{u(),h(e),e.preventDefault()}),onPointerDown:a?e.onPointerDown:ql(e.onPointerDown,Ij(e=>{u(),d.current=window.setTimeout(()=>h(e),700)})),onPointerMove:a?e.onPointerMove:ql(e.onPointerMove,Ij(u)),onPointerCancel:a?e.onPointerCancel:ql(e.onPointerCancel,Ij(u)),onPointerUp:a?e.onPointerUp:ql(e.onPointerUp,Ij(u))})]})});kj.displayName=Cj;var Nj=e=>{const{__scopeContextMenu:t,...n}=e,a=bj(t);return c.jsx(gS,{...a,...n})};Nj.displayName="ContextMenuPortal";var _j="ContextMenuContent",Ej=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=Sj(_j,n),r=bj(n),i=p.useRef(!1);return c.jsx(xS,{...r,...a,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),!t.defaultPrevented&&i.current&&t.preventDefault(),i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||s.modal||(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ej.displayName=_j;p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(vS,{...s,...a,ref:t})}).displayName="ContextMenuGroup";var Pj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(yS,{...s,...a,ref:t})});Pj.displayName="ContextMenuLabel";var Aj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(bS,{...s,...a,ref:t})});Aj.displayName="ContextMenuItem";var Rj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(wS,{...s,...a,ref:t})});Rj.displayName="ContextMenuCheckboxItem";p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(SS,{...s,...a,ref:t})}).displayName="ContextMenuRadioGroup";var Tj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(jS,{...s,...a,ref:t})});Tj.displayName="ContextMenuRadioItem";var Mj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(CS,{...s,...a,ref:t})});Mj.displayName="ContextMenuItemIndicator";var Dj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(kS,{...s,...a,ref:t})});Dj.displayName="ContextMenuSeparator";p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(NS,{...s,...a,ref:t})}).displayName="ContextMenuArrow";var Lj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(ES,{...s,...a,ref:t})});Lj.displayName="ContextMenuSubTrigger";var Fj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,s=bj(n);return c.jsx(PS,{...s,...a,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});function Ij(e){return t=>"mouse"!==t.pointerType?e(t):void 0}Fj.displayName="ContextMenuSubContent";var Oj=Nj,zj=Ej,Bj=Pj,$j=Aj,Uj=Rj,Vj=Tj,qj=Mj,Hj=Dj,Gj=Lj,Kj=Fj;const Wj=jj,Qj=kj;p.forwardRef(({className:e,inset:t,children:n,...a},s)=>c.jsxs(Gj,{ref:s,className:sl("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...a,children:[n,c.jsx(Jp,{className:"ml-auto h-4 w-4"})]})).displayName=Gj.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(Kj,{ref:n,className:sl("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=Kj.displayName;const Yj=p.forwardRef(({className:e,...t},n)=>c.jsx(Oj,{children:c.jsx(zj,{ref:n,className:sl("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-0.5 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));Yj.displayName=zj.displayName;const Xj=p.forwardRef(({className:e,inset:t,...n},a)=>c.jsx($j,{ref:a,className:sl("relative flex cursor-default select-none items-center rounded-sm px-2 py-1 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Xj.displayName=$j.displayName;p.forwardRef(({className:e,children:t,checked:n,...a},s)=>c.jsxs(Uj,{ref:s,className:sl("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...a,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(qj,{children:c.jsx(Yp,{className:"h-4 w-4"})})}),t]})).displayName=Uj.displayName;p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(Vj,{ref:a,className:sl("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(qj,{children:c.jsx(df,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=Vj.displayName;p.forwardRef(({className:e,inset:t,...n},a)=>c.jsx(Bj,{ref:a,className:sl("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n})).displayName=Bj.displayName;const Zj=p.forwardRef(({className:e,...t},n)=>c.jsx(Hj,{ref:n,className:sl("-mx-1 my-1 h-px bg-border",e),...t}));Zj.displayName=Hj.displayName;var Jj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=pl(`Primitive.${t}`),a=p.forwardRef((e,a)=>{const{asChild:s,...r}=e,i=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),eC="horizontal",tC=["horizontal","vertical"],nC=p.forwardRef((e,t)=>{const{decorative:n,orientation:a=eC,...s}=e,r=function(e){return tC.includes(e)}(a)?a:eC,i=n?{role:"none"}:{"aria-orientation":"vertical"===r?r:void 0,role:"separator"};return c.jsx(Jj.div,{"data-orientation":r,...i,...s,ref:t})});nC.displayName="Separator";var aC=nC;const sC=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...a},s)=>c.jsx(aC,{ref:s,decorative:n,orientation:t,className:sl("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));function rC(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const a=n.reduce((t,{useScope:n,scopeName:a})=>({...t,...n(e)[`__scope${a}`]}),{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}sC.displayName=aC.displayName;var iC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=pl(`Primitive.${t}`),a=p.forwardRef((e,a)=>{const{asChild:s,...r}=e,i=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),oC=Mt();function lC(){return()=>{}}var cC="Avatar",[dC]=function(e,t=[]){let n=[];const a=()=>{const t=n.map(e=>p.createContext(e));return function(n){const a=n?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...n,[e]:a}}),[n,a])}};return a.scopeName=e,[function(t,a){const s=p.createContext(a);s.displayName=t+"Context";const r=n.length;n=[...n,a];const i=t=>{const{scope:n,children:a,...i}=t,o=n?.[e]?.[r]||s,l=p.useMemo(()=>i,Object.values(i));return c.jsx(o.Provider,{value:l,children:a})};return i.displayName=t+"Provider",[i,function(n,i){const o=i?.[e]?.[r]||s,l=p.useContext(o);if(l)return l;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},rC(a,...t)]}(cC),[uC,hC]=dC(cC),mC=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...a}=e,[s,r]=p.useState("idle");return c.jsx(uC,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:r,children:c.jsx(iC.span,{...a,ref:t})})});mC.displayName=cC;var pC="AvatarImage",fC=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:a,onLoadingStatusChange:s=()=>{},...r}=e,i=hC(pC,n),o=function(e,{referrerPolicy:t,crossOrigin:n}){const a=oC.useSyncExternalStore(lC,()=>!0,()=>!1),s=p.useRef(null),r=a?(s.current||(s.current=new window.Image),s.current):null,[i,o]=p.useState(()=>vC(r,e));return Rc(()=>{o(vC(r,e))},[r,e]),Rc(()=>{const e=e=>()=>{o(e)};if(!r)return;const a=e("loaded"),s=e("error");return r.addEventListener("load",a),r.addEventListener("error",s),t&&(r.referrerPolicy=t),"string"==typeof n&&(r.crossOrigin=n),()=>{r.removeEventListener("load",a),r.removeEventListener("error",s)}},[r,n,t]),i}(a,r),l=ic(e=>{s(e),i.onImageLoadingStatusChange(e)});return Rc(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?c.jsx(iC.img,{...r,ref:t,src:a}):null});fC.displayName=pC;var gC="AvatarFallback",xC=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:a,...s}=e,r=hC(gC,n),[i,o]=p.useState(void 0===a);return p.useEffect(()=>{if(void 0!==a){const e=window.setTimeout(()=>o(!0),a);return()=>window.clearTimeout(e)}},[a]),i&&"loaded"!==r.imageLoadingStatus?c.jsx(iC.span,{...s,ref:t}):null});function vC(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}xC.displayName=gC;var yC=mC,bC=fC,wC=xC;const SC=p.forwardRef(({className:e,...t},n)=>c.jsx(yC,{ref:n,className:sl("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));SC.displayName=yC.displayName;const jC=p.forwardRef(({className:e,...t},n)=>c.jsx(bC,{ref:n,className:sl("aspect-square h-full w-full",e),...t}));jC.displayName=bC.displayName;const CC=p.forwardRef(({className:e,...t},n)=>c.jsx(wC,{ref:n,className:sl("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));CC.displayName=wC.displayName;const kC=uo("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function NC({className:e,variant:t,...n}){return c.jsx("div",{className:sl(kC({variant:t}),e),...n})}const _C=p.forwardRef(({className:e,...t},n)=>c.jsx("kbd",{ref:n,className:sl("pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100 shadow-sm",e),...t}));_C.displayName="Kbd";var EC="Checkbox",[PC]=Hl(EC),[AC,RC]=PC(EC);function TC(e){const{__scopeCheckbox:t,checked:n,children:a,defaultChecked:s,disabled:r,form:i,name:o,onCheckedChange:l,required:d,value:u="on",internal_do_not_use_render:h}=e,[m,f]=th({prop:n,defaultProp:s??!1,onChange:l,caller:EC}),[g,x]=p.useState(null),[v,y]=p.useState(null),b=p.useRef(!1),w=!g||(!!i||!!g.closest("form")),S={checked:m,disabled:r,setChecked:f,control:g,setControl:x,name:o,form:i,value:u,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:!$C(s)&&s,isFormControl:w,bubbleInput:v,setBubbleInput:y};return c.jsx(AC,{scope:t,...S,children:BC(h)?h(S):a})}var MC="CheckboxTrigger",DC=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...a},s)=>{const{control:r,value:i,disabled:o,checked:l,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:g}=RC(MC,e),x=dl(s,u),v=p.useRef(l);return p.useEffect(()=>{const e=r?.form;if(e){const t=()=>h(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[r,h]),c.jsx(sc.button,{type:"button",role:"checkbox","aria-checked":$C(l)?"mixed":l,"aria-required":d,"data-state":UC(l),"data-disabled":o?"":void 0,disabled:o,value:i,...a,ref:x,onKeyDown:ql(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:ql(n,e=>{h(e=>!!$C(e)||!e),g&&f&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})})});DC.displayName=MC;var LC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:a,checked:s,defaultChecked:r,required:i,disabled:o,value:l,onCheckedChange:d,form:u,...h}=e;return c.jsx(TC,{__scopeCheckbox:n,checked:s,defaultChecked:r,disabled:o,required:i,onCheckedChange:d,name:a,form:u,value:l,internal_do_not_use_render:({isFormControl:e})=>c.jsxs(c.Fragment,{children:[c.jsx(DC,{...h,ref:t,__scopeCheckbox:n}),e&&c.jsx(zC,{__scopeCheckbox:n})]})})});LC.displayName=EC;var FC="CheckboxIndicator",IC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:a,...s}=e,r=RC(FC,n);return c.jsx(Xv,{present:a||$C(r.checked)||!0===r.checked,children:c.jsx(sc.span,{"data-state":UC(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});IC.displayName=FC;var OC="CheckboxBubbleInput",zC=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:a,hasConsumerStoppedPropagationRef:s,checked:r,defaultChecked:i,required:o,disabled:l,name:d,value:u,form:h,bubbleInput:m,setBubbleInput:f}=RC(OC,e),g=dl(n,f),x=nh(r),v=Nu(a);p.useEffect(()=>{const e=m;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,a=!s.current;if(x!==r&&n){const t=new Event("click",{bubbles:a});e.indeterminate=$C(r),n.call(e,!$C(r)&&r),e.dispatchEvent(t)}},[m,x,r,s]);const y=p.useRef(!$C(r)&&r);return c.jsx(sc.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??y.current,required:o,disabled:l,name:d,value:u,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function BC(e){return"function"==typeof e}function $C(e){return"indeterminate"===e}function UC(e){return $C(e)?"indeterminate":e?"checked":"unchecked"}zC.displayName=OC;const VC=p.forwardRef(({className:e,...t},n)=>c.jsx(LC,{ref:n,className:sl("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:c.jsx(IC,{className:sl("flex items-center justify-center text-current"),children:c.jsx(Yp,{className:"h-4 w-4"})})}));VC.displayName=LC.displayName;var qC="ToastProvider",[HC,GC,KC]=Xl("Toast"),[WC]=Hl("Toast",[KC]),[QC,YC]=WC(qC),XC=e=>{const{__scopeToast:t,label:n="Notification",duration:a=5e3,swipeDirection:s="right",swipeThreshold:r=50,children:i}=e,[o,l]=p.useState(null),[d,u]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return n.trim(),c.jsx(HC.Provider,{scope:t,children:c.jsx(QC,{scope:t,label:n,duration:a,swipeDirection:s,swipeThreshold:r,toastCount:d,viewport:o,onViewportChange:l,onToastAdd:p.useCallback(()=>u(e=>e+1),[]),onToastRemove:p.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:i})})};XC.displayName=qC;var ZC="ToastViewport",JC=["F8"],ek="toast.viewportPause",tk="toast.viewportResume",nk=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:a=JC,label:s="Notifications ({hotkey})",...r}=e,i=YC(ZC,n),o=GC(n),l=p.useRef(null),d=p.useRef(null),u=p.useRef(null),h=p.useRef(null),m=dl(t,h,i.onViewportChange),f=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;p.useEffect(()=>{const e=e=>{0!==a.length&&a.every(t=>e[t]||e.code===t)&&h.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),p.useEffect(()=>{const e=l.current,t=h.current;if(g&&e&&t){const n=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent(ek);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},a=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(tk);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},s=t=>{!e.contains(t.relatedTarget)&&a()},r=()=>{e.contains(document.activeElement)||a()};return e.addEventListener("focusin",n),e.addEventListener("focusout",s),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",r),window.addEventListener("blur",n),window.addEventListener("focus",a),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",r),window.removeEventListener("blur",n),window.removeEventListener("focus",a)}}},[g,i.isClosePausedRef]);const x=p.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,a=[n,...bk(n)];return"forwards"===e?a:a.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return p.useEffect(()=>{const e=h.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,a=t.shiftKey;if(t.target===e&&a)return void d.current?.focus();const s=x({tabbingDirection:a?"backwards":"forwards"}),r=s.findIndex(e=>e===n);wk(s.slice(r+1))?t.preventDefault():a?d.current?.focus():u.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,x]),c.jsxs(xc,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&c.jsx(sk,{ref:d,onFocusFromOutsideViewport:()=>{wk(x({tabbingDirection:"forwards"}))}}),c.jsx(HC.Slot,{scope:n,children:c.jsx(sc.ol,{tabIndex:-1,...r,ref:m})}),g&&c.jsx(sk,{ref:u,onFocusFromOutsideViewport:()=>{wk(x({tabbingDirection:"backwards"}))}})]})});nk.displayName=ZC;var ak="ToastFocusProxy",sk=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:a,...s}=e,r=YC(ak,n);return c.jsx(sh,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:e=>{const t=e.relatedTarget;!r.viewport?.contains(t)&&a()}})});sk.displayName=ak;var rk="Toast",ik=p.forwardRef((e,t)=>{const{forceMount:n,open:a,defaultOpen:s,onOpenChange:r,...i}=e,[o,l]=th({prop:a,defaultProp:s??!0,onChange:r,caller:rk});return c.jsx(Xv,{present:n||o,children:c.jsx(ck,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:ic(e.onPause),onResume:ic(e.onResume),onSwipeStart:ql(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ql(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:ql(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ql(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});ik.displayName=rk;var[ok,lk]=WC(rk,{onClose(){}}),ck=p.forwardRef((e,t)=>{const{__scopeToast:n,type:a="foreground",duration:s,open:r,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...g}=e,x=YC(rk,n),[v,y]=p.useState(null),b=dl(t,e=>y(e)),w=p.useRef(null),S=p.useRef(null),j=s||x.duration,C=p.useRef(0),k=p.useRef(j),N=p.useRef(0),{onToastAdd:_,onToastRemove:E}=x,P=ic(()=>{const e=v?.contains(document.activeElement);e&&x.viewport?.focus(),i()}),A=p.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(N.current),C.current=(new Date).getTime(),N.current=window.setTimeout(P,e))},[P]);p.useEffect(()=>{const e=x.viewport;if(e){const t=()=>{A(k.current),d?.()},n=()=>{const e=(new Date).getTime()-C.current;k.current=k.current-e,window.clearTimeout(N.current),l?.()};return e.addEventListener(ek,n),e.addEventListener(tk,t),()=>{e.removeEventListener(ek,n),e.removeEventListener(tk,t)}}},[x.viewport,j,l,d,A]),p.useEffect(()=>{r&&!x.isClosePausedRef.current&&A(j)},[r,j,x.isClosePausedRef,A]),p.useEffect(()=>(_(),()=>E()),[_,E]);const R=p.useMemo(()=>v?xk(v):null,[v]);return x.viewport?c.jsxs(c.Fragment,{children:[R&&c.jsx(dk,{__scopeToast:n,role:"status","aria-live":"foreground"===a?"assertive":"polite",children:R}),c.jsx(ok,{scope:n,onClose:P,children:Zt.createPortal(c.jsx(HC.ItemSlot,{scope:n,children:c.jsx(gc,{asChild:!0,onEscapeKeyDown:ql(o,()=>{x.isFocusedToastEscapeKeyDownRef.current||P(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(sc.li,{tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":x.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ql(e.onKeyDown,e=>{"Escape"===e.key&&(o?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:ql(e.onPointerDown,e=>{0===e.button&&(w.current={x:e.clientX,y:e.clientY})}),onPointerMove:ql(e.onPointerMove,e=>{if(!w.current)return;const t=e.clientX-w.current.x,n=e.clientY-w.current.y,a=Boolean(S.current),s=["left","right"].includes(x.swipeDirection),r=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,i=s?r(0,t):0,o=s?0:r(0,n),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};a?(S.current=c,vk("toast.swipeMove",h,d,{discrete:!1})):yk(c,x.swipeDirection,l)?(S.current=c,vk("toast.swipeStart",u,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(w.current=null)}),onPointerUp:ql(e.onPointerUp,e=>{const t=S.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),S.current=null,w.current=null,t){const n=e.currentTarget,a={originalEvent:e,delta:t};yk(t,x.swipeDirection,x.swipeThreshold)?vk("toast.swipeEnd",f,a,{discrete:!0}):vk("toast.swipeCancel",m,a,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),dk=e=>{const{__scopeToast:t,children:n,...a}=e,s=YC(rk,t),[r,i]=p.useState(!1),[o,l]=p.useState(!1);return function(e=()=>{}){const t=ic(e);Rc(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>i(!0)),p.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:c.jsx(Qu,{asChild:!0,children:c.jsx(sh,{...a,children:r&&c.jsxs(c.Fragment,{children:[s.label," ",n]})})})},uk=p.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e;return c.jsx(sc.div,{...a,ref:t})});uk.displayName="ToastTitle";var hk=p.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e;return c.jsx(sc.div,{...a,ref:t})});hk.displayName="ToastDescription";var mk=p.forwardRef((e,t)=>{const{altText:n,...a}=e;return n.trim()?c.jsx(gk,{altText:n,asChild:!0,children:c.jsx(fk,{...a,ref:t})}):null});mk.displayName="ToastAction";var pk="ToastClose",fk=p.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e,s=lk(pk,n);return c.jsx(gk,{asChild:!0,children:c.jsx(sc.button,{type:"button",...a,ref:t,onClick:ql(e.onClick,s.onClose)})})});fk.displayName=pk;var gk=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:a,...s}=e;return c.jsx(sc.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...s,ref:t})});function xk(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,a=""===e.dataset.radixToastAnnounceExclude;if(!n)if(a){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...xk(e))}}),t}function vk(e,t,n,{discrete:a}){const s=n.originalEvent.currentTarget,r=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?rc(s,r):s.dispatchEvent(r)}var yk=(e,t,n=0)=>{const a=Math.abs(e.x),s=Math.abs(e.y),r=a>s;return"left"===t||"right"===t?r&&a>n:!r&&s>n};function bk(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wk(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Sk=nk,jk=ik,Ck=uk,kk=hk,Nk=mk,_k=fk;const Ek=XC,Pk=p.forwardRef(({className:e,...t},n)=>c.jsx(Sk,{ref:n,className:sl("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Pk.displayName=Sk.displayName;const Ak=uo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Rk=p.forwardRef(({className:e,variant:t,...n},a)=>c.jsx(jk,{ref:a,className:sl(Ak({variant:t}),e),...n}));Rk.displayName=jk.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(Nk,{ref:n,className:sl("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=Nk.displayName;const Tk=p.forwardRef(({className:e,...t},n)=>c.jsx(_k,{ref:n,className:sl("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:c.jsx(xx,{className:"h-4 w-4"})}));Tk.displayName=_k.displayName;const Mk=p.forwardRef(({className:e,...t},n)=>c.jsx(Ck,{ref:n,className:sl("text-sm font-semibold",e),...t}));Mk.displayName=Ck.displayName;const Dk=p.forwardRef(({className:e,...t},n)=>c.jsx(kk,{ref:n,className:sl("text-sm opacity-90",e),...t}));Dk.displayName=kk.displayName;let Lk=0;const Fk=new Map,Ik=e=>{if(Fk.has(e))return;const t=setTimeout(()=>{Fk.delete(e),$k({type:"REMOVE_TOAST",toastId:e})},1e6);Fk.set(e,t)},Ok=(e,t)=>{switch(t.type){case"ADD_TOAST":return e.toasts.some(e=>{const n=String(e.title||""),a=String(e.description||""),s=String(t.toast.title||""),r=String(t.toast.description||"");return n===s&&a===r&&e.variant===t.toast.variant})?e:{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Ik(n):e.toasts.forEach(e=>{Ik(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},zk=[];let Bk={toasts:[]};function $k(e){Bk=Ok(Bk,e),zk.forEach(e=>{e(Bk)})}function Uk({...e}){const t=(Lk=(Lk+1)%Number.MAX_SAFE_INTEGER,Lk.toString());return $k({type:"ADD_TOAST",toast:{...e,id:t}}),{id:t,dismiss:()=>$k({type:"DISMISS_TOAST",toastId:t}),update:e=>$k({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Vk(){const[e,t]=p.useState(Bk);return p.useEffect(()=>(zk.push(t),()=>{const e=zk.indexOf(t);e>-1&&zk.splice(e,1)}),[]),{...e,toast:Uk,dismiss:e=>$k({type:"DISMISS_TOAST",toastId:e})}}function qk(){const{toasts:e}=Vk();return c.jsxs(Ek,{children:[e.map(function({id:e,title:t,description:n,action:a,...s}){return c.jsxs(Rk,{...s,children:[c.jsxs("div",{className:"grid gap-1",children:[t&&c.jsx(Mk,{children:t}),n&&c.jsx(Dk,{children:n})]}),a,c.jsx(Tk,{})]},e)}),c.jsx(Pk,{})]})}var Hk=.999,Gk=/[\\\/_+.#"@\[\(\{&]/,Kk=/[\\\/_+.#"@\[\(\{&]/g,Wk=/[\s-]/,Qk=/[\s-]/g;function Yk(e,t,n,a,s,r,i){if(r===t.length)return s===e.length?1:.99;var o=`${s},${r}`;if(void 0!==i[o])return i[o];for(var l,c,d,u,h=a.charAt(r),m=n.indexOf(h,s),p=0;m>=0;)(l=Yk(e,t,n,a,m+1,r+1,i))>p&&(m===s?l*=1:Gk.test(e.charAt(m-1))?(l*=.8,(d=e.slice(s,m-1).match(Kk))&&s>0&&(l*=Math.pow(Hk,d.length))):Wk.test(e.charAt(m-1))?(l*=.9,(u=e.slice(s,m-1).match(Qk))&&s>0&&(l*=Math.pow(Hk,u.length))):(l*=.17,s>0&&(l*=Math.pow(Hk,m-s))),e.charAt(m)!==t.charAt(r)&&(l*=.9999)),(l<.1&&n.charAt(m-1)===a.charAt(r+1)||a.charAt(r+1)===a.charAt(r)&&n.charAt(m-1)!==a.charAt(r))&&(.1*(c=Yk(e,t,n,a,m+1,r+2,i))>l&&(l=.1*c)),l>p&&(p=l),m=n.indexOf(h,m+1);return i[o]=p,p}function Xk(e){return e.toLowerCase().replace(Qk," ")}function Zk(e,t,n){return Yk(e=n&&n.length>0?""+(e+" "+n.join(" ")):e,t,Xk(e),Xk(t),0,0,{})}var Jk='[cmdk-group=""]',eN='[cmdk-group-items=""]',tN='[cmdk-item=""]',nN=`${tN}:not([aria-disabled="true"])`,aN="cmdk-item-select",sN="data-value",rN=(e,t,n)=>Zk(e,t,n),iN=p.createContext(void 0),oN=()=>p.useContext(iN),lN=p.createContext(void 0),cN=()=>p.useContext(lN),dN=p.createContext(void 0),uN=p.forwardRef((e,t)=>{let n=kN(()=>{var t,n;return{search:"",value:null!=(n=null!=(t=e.value)?t:e.defaultValue)?n:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=kN(()=>new Set),s=kN(()=>new Map),r=kN(()=>new Map),i=kN(()=>new Set),o=jN(e),{label:l,children:c,value:d,onValueChange:u,filter:h,shouldFilter:m,loop:f,disablePointerSelection:g=!1,vimBindings:x=!0,...v}=e,y=Dc(),b=Dc(),w=Dc(),S=p.useRef(null),j=EN();CN(()=>{if(void 0!==d){let e=d.trim();n.current.value=e,C.emit()}},[d]),CN(()=>{j(6,A)},[]);let C=p.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>n.current,setState:(e,t,a)=>{var s,r,i,l;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)P(),_(),j(1,E);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(w);e?e.focus():null==(s=document.getElementById(y))||s.focus()}if(j(7,()=>{var e;n.current.selectedItemId=null==(e=R())?void 0:e.id,C.emit()}),a||j(5,A),void 0!==(null==(r=o.current)?void 0:r.value)){let e=null!=t?t:"";return void(null==(l=(i=o.current).onValueChange)||l.call(i,e))}}C.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),k=p.useMemo(()=>({value:(e,t,a)=>{var s;t!==(null==(s=r.current.get(e))?void 0:s.value)&&(r.current.set(e,{value:t,keywords:a}),n.current.filtered.items.set(e,N(t,a)),j(2,()=>{_(),C.emit()}))},item:(e,t)=>(a.current.add(e),t&&(s.current.has(t)?s.current.get(t).add(e):s.current.set(t,new Set([e]))),j(3,()=>{P(),_(),n.current.value||E(),C.emit()}),()=>{r.current.delete(e),a.current.delete(e),n.current.filtered.items.delete(e);let t=R();j(4,()=>{P(),(null==t?void 0:t.getAttribute("id"))===e&&E(),C.emit()})}),group:e=>(s.current.has(e)||s.current.set(e,new Set),()=>{r.current.delete(e),s.current.delete(e)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:y,inputId:w,labelId:b,listInnerRef:S}),[]);function N(e,t){var a,s;let r=null!=(s=null==(a=o.current)?void 0:a.filter)?s:rN;return e?r(e,n.current.search,t):0}function _(){if(!n.current.search||!1===o.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let a=s.current.get(n),r=0;a.forEach(t=>{let n=e.get(t);r=Math.max(n,r)}),t.push([n,r])});let a=S.current;T().sort((t,n)=>{var a,s;let r=t.getAttribute("id"),i=n.getAttribute("id");return(null!=(a=e.get(i))?a:0)-(null!=(s=e.get(r))?s:0)}).forEach(e=>{let t=e.closest(eN);t?t.appendChild(e.parentElement===t?e:e.closest(`${eN} > *`)):a.appendChild(e.parentElement===a?e:e.closest(`${eN} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let n=null==(t=S.current)?void 0:t.querySelector(`${Jk}[${sN}="${encodeURIComponent(e[0])}"]`);null==n||n.parentElement.appendChild(n)})}function E(){let e=T().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(sN);C.setState("value",t||void 0)}function P(){var e,t,i,l;if(!n.current.search||!1===o.current.shouldFilter)return void(n.current.filtered.count=a.current.size);n.current.filtered.groups=new Set;let c=0;for(let s of a.current){let a=N(null!=(t=null==(e=r.current.get(s))?void 0:e.value)?t:"",null!=(l=null==(i=r.current.get(s))?void 0:i.keywords)?l:[]);n.current.filtered.items.set(s,a),a>0&&c++}for(let[a,r]of s.current)for(let e of r)if(n.current.filtered.items.get(e)>0){n.current.filtered.groups.add(a);break}n.current.filtered.count=c}function A(){var e,t,n;let a=R();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(n=null==(t=a.closest(Jk))?void 0:t.querySelector('[cmdk-group-heading=""]'))||n.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function R(){var e;return null==(e=S.current)?void 0:e.querySelector(`${tN}[aria-selected="true"]`)}function T(){var e;return Array.from((null==(e=S.current)?void 0:e.querySelectorAll(nN))||[])}function M(e){let t=T()[e];t&&C.setState("value",t.getAttribute(sN))}function D(e){var t;let n=R(),a=T(),s=a.findIndex(e=>e===n),r=a[s+e];null!=(t=o.current)&&t.loop&&(r=s+e<0?a[a.length-1]:s+e===a.length?a[0]:a[s+e]),r&&C.setState("value",r.getAttribute(sN))}function L(e){let t,n=R(),a=null==n?void 0:n.closest(Jk);for(;a&&!t;)a=e>0?wN(a,Jk):SN(a,Jk),t=null==a?void 0:a.querySelector(nN);t?C.setState("value",t.getAttribute(sN)):D(e)}let F=()=>M(T().length-1),I=e=>{e.preventDefault(),e.metaKey?F():e.altKey?L(1):D(1)},O=e=>{e.preventDefault(),e.metaKey?M(0):e.altKey?L(-1):D(-1)};return p.createElement(sc.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=v.onKeyDown)||t.call(v,e);let n=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!n)switch(e.key){case"n":case"j":x&&e.ctrlKey&&I(e);break;case"ArrowDown":I(e);break;case"p":case"k":x&&e.ctrlKey&&O(e);break;case"ArrowUp":O(e);break;case"Home":e.preventDefault(),M(0);break;case"End":e.preventDefault(),F();break;case"Enter":{e.preventDefault();let t=R();if(t){let e=new Event(aN);t.dispatchEvent(e)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:AN},l),PN(e,e=>p.createElement(lN.Provider,{value:C},p.createElement(iN.Provider,{value:k},e))))}),hN=p.forwardRef((e,t)=>{var n,a;let s=Dc(),r=p.useRef(null),i=p.useContext(dN),o=oN(),l=jN(e),c=null!=(a=null==(n=l.current)?void 0:n.forceMount)?a:null==i?void 0:i.forceMount;CN(()=>{if(!c)return o.item(s,null==i?void 0:i.id)},[c]);let d=_N(s,r,[e.value,e.children,r],e.keywords),u=cN(),h=NN(e=>e.value&&e.value===d.current),m=NN(e=>!(!c&&!1!==o.filter())||(!e.search||e.filtered.items.get(s)>0));function f(){var e,t;g(),null==(t=(e=l.current).onSelect)||t.call(e,d.current)}function g(){u.setState("value",d.current,!0)}if(p.useEffect(()=>{let t=r.current;if(t&&!e.disabled)return t.addEventListener(aN,f),()=>t.removeEventListener(aN,f)},[m,e.onSelect,e.disabled]),!m)return null;let{disabled:x,value:v,onSelect:y,forceMount:b,keywords:w,...S}=e;return p.createElement(sc.div,{ref:cl(r,t),...S,id:s,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||o.getDisablePointerSelection()?void 0:g,onClick:x?void 0:f},e.children)}),mN=p.forwardRef((e,t)=>{let{heading:n,children:a,forceMount:s,...r}=e,i=Dc(),o=p.useRef(null),l=p.useRef(null),c=Dc(),d=oN(),u=NN(e=>!(!s&&!1!==d.filter())||(!e.search||e.filtered.groups.has(i)));CN(()=>d.group(i),[]),_N(i,o,[e.value,e.heading,l]);let h=p.useMemo(()=>({id:i,forceMount:s}),[s]);return p.createElement(sc.div,{ref:cl(o,t),...r,"cmdk-group":"",role:"presentation",hidden:!u||void 0},n&&p.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),PN(e,e=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},p.createElement(dN.Provider,{value:h},e))))}),pN=p.forwardRef((e,t)=>{let{alwaysRender:n,...a}=e,s=p.useRef(null),r=NN(e=>!e.search);return n||r?p.createElement(sc.div,{ref:cl(s,t),...a,"cmdk-separator":"",role:"separator"}):null}),fN=p.forwardRef((e,t)=>{let{onValueChange:n,...a}=e,s=null!=e.value,r=cN(),i=NN(e=>e.search),o=NN(e=>e.selectedItemId),l=oN();return p.useEffect(()=>{null!=e.value&&r.setState("search",e.value)},[e.value]),p.createElement(sc.input,{ref:t,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:s?e.value:i,onChange:e=>{s||r.setState("search",e.target.value),null==n||n(e.target.value)}})}),gN=p.forwardRef((e,t)=>{let{children:n,label:a="Suggestions",...s}=e,r=p.useRef(null),i=p.useRef(null),o=NN(e=>e.selectedItemId),l=oN();return p.useEffect(()=>{if(i.current&&r.current){let e,t=i.current,n=r.current,a=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;n.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return a.observe(t),()=>{cancelAnimationFrame(e),a.unobserve(t)}}},[]),p.createElement(sc.div,{ref:cl(r,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":a,id:l.listId},PN(e,e=>p.createElement("div",{ref:cl(i,l.listInnerRef),"cmdk-list-sizer":""},e)))}),xN=p.forwardRef((e,t)=>{let{open:n,onOpenChange:a,overlayClassName:s,contentClassName:r,container:i,...o}=e;return p.createElement(ab,{open:n,onOpenChange:a},p.createElement(rb,{container:i},p.createElement(ib,{"cmdk-overlay":"",className:s}),p.createElement(ob,{"aria-label":e.label,"cmdk-dialog":"",className:r},p.createElement(uN,{ref:t,...o}))))}),vN=p.forwardRef((e,t)=>NN(e=>0===e.filtered.count)?p.createElement(sc.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),yN=p.forwardRef((e,t)=>{let{progress:n,children:a,label:s="Loading...",...r}=e;return p.createElement(sc.div,{ref:t,...r,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},PN(e,e=>p.createElement("div",{"aria-hidden":!0},e)))}),bN=Object.assign(uN,{List:gN,Item:hN,Input:fN,Group:mN,Separator:pN,Dialog:xN,Empty:vN,Loading:yN});function wN(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function SN(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function jN(e){let t=p.useRef(e);return CN(()=>{t.current=e}),t}var CN="undefined"==typeof window?p.useEffect:p.useLayoutEffect;function kN(e){let t=p.useRef();return void 0===t.current&&(t.current=e()),t}function NN(e){let t=cN(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function _N(e,t,n,a=[]){let s=p.useRef(),r=oN();return CN(()=>{var i;let o=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():s.current}})(),l=a.map(e=>e.trim());r.value(e,o,l),null==(i=t.current)||i.setAttribute(sN,o),s.current=o}),s}var EN=()=>{let[e,t]=p.useState(),n=kN(()=>new Map);return CN(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,a)=>{n.current.set(e,a),t({})}};function PN({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},n(t.props.children)):n(t)}var AN={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const RN=p.forwardRef(({className:e,...t},n)=>c.jsx(bN,{ref:n,className:sl("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));RN.displayName=bN.displayName;const TN=({children:e,...t})=>c.jsx(ub,{...t,children:c.jsxs(pb,{className:"overflow-hidden p-0 shadow-lg",children:[c.jsx(xb,{className:"sr-only",children:"Command Palette"}),c.jsx(vb,{className:"sr-only",children:"Search and execute commands, navigate to pages, or perform quick actions."}),c.jsx(RN,{shouldFilter:!1,className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:e})]})}),MN=p.forwardRef(({className:e,...t},n)=>{const[a,s]=p.useState(!0);return p.useEffect(()=>{const e=setTimeout(()=>s(!1),100);return()=>clearTimeout(e)},[]),c.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[c.jsx(Ig,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),c.jsx(bN.Input,{ref:n,name:`search-${Math.random().toString(36).substring(7)}`,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,"data-1p-ignore":!0,"data-lpignore":"true","data-form-type":"other",readOnly:a,onFocus:e=>{s(!1),t.onFocus?.(e)},className:sl("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})});MN.displayName=bN.Input.displayName;const DN=p.forwardRef(({className:e,...t},n)=>c.jsx(bN.List,{ref:n,className:sl("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));DN.displayName=bN.List.displayName;const LN=p.forwardRef((e,t)=>c.jsx(bN.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));LN.displayName=bN.Empty.displayName;const FN=p.forwardRef(({className:e,...t},n)=>c.jsx(bN.Group,{ref:n,className:sl("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));FN.displayName=bN.Group.displayName;const IN=p.forwardRef(({className:e,...t},n)=>c.jsx(bN.Separator,{ref:n,className:sl("-mx-1 h-px bg-border",e),...t}));IN.displayName=bN.Separator.displayName;const ON=p.forwardRef(({className:e,...t},n)=>c.jsx(bN.Item,{ref:n,className:sl("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",e),...t}));ON.displayName=bN.Item.displayName;const zN=({className:e,...t})=>c.jsx("span",{className:sl("ml-auto text-xs tracking-widest text-muted-foreground",e),...t});zN.displayName="CommandShortcut";var BN="NavigationMenu",[$N,UN,VN]=Xl(BN),[qN,HN,GN]=Xl(BN),[KN]=Hl(BN,[VN,GN]),[WN,QN]=KN(BN),[YN,XN]=KN(BN),ZN=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:a,onValueChange:s,defaultValue:r,delayDuration:i=200,skipDelayDuration:o=300,orientation:l="horizontal",dir:d,...u}=e,[h,m]=p.useState(null),f=dl(t,e=>m(e)),g=Jl(d),x=p.useRef(0),v=p.useRef(0),y=p.useRef(0),[b,w]=p.useState(!0),[S,j]=th({prop:a,onChange:e=>{const t=o>0;""!==e?(window.clearTimeout(y.current),t&&w(!1)):(window.clearTimeout(y.current),y.current=window.setTimeout(()=>w(!0),o)),s?.(e)},defaultProp:r??"",caller:BN}),C=p.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>j(""),150)},[j]),k=p.useCallback(e=>{window.clearTimeout(v.current),j(e)},[j]),N=p.useCallback(e=>{S===e?window.clearTimeout(v.current):x.current=window.setTimeout(()=>{window.clearTimeout(v.current),j(e)},i)},[S,j,i]);return p.useEffect(()=>()=>{window.clearTimeout(x.current),window.clearTimeout(v.current),window.clearTimeout(y.current)},[]),c.jsx(e_,{scope:n,isRootMenu:!0,value:S,dir:g,orientation:l,rootNavigationMenu:h,onTriggerEnter:e=>{window.clearTimeout(x.current),b?N(e):k(e)},onTriggerLeave:()=>{window.clearTimeout(x.current),C()},onContentEnter:()=>window.clearTimeout(v.current),onContentLeave:C,onItemSelect:e=>{j(t=>t===e?"":e)},onItemDismiss:()=>j(""),children:c.jsx(sc.nav,{"aria-label":"Main","data-orientation":l,dir:g,...u,ref:f})})});ZN.displayName=BN;var JN="NavigationMenuSub";p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:a,onValueChange:s,defaultValue:r,orientation:i="horizontal",...o}=e,l=QN(JN,n),[d,u]=th({prop:a,onChange:s,defaultProp:r??"",caller:JN});return c.jsx(e_,{scope:n,isRootMenu:!1,value:d,dir:l.dir,orientation:i,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:e=>u(e),onItemSelect:e=>u(e),onItemDismiss:()=>u(""),children:c.jsx(sc.div,{"data-orientation":i,...o,ref:t})})}).displayName=JN;var e_=e=>{const{scope:t,isRootMenu:n,rootNavigationMenu:a,dir:s,orientation:r,children:i,value:o,onItemSelect:l,onItemDismiss:d,onTriggerEnter:u,onTriggerLeave:h,onContentEnter:m,onContentLeave:f}=e,[g,x]=p.useState(null),[v,y]=p.useState(new Map),[b,w]=p.useState(null);return c.jsx(WN,{scope:t,isRootMenu:n,rootNavigationMenu:a,value:o,previousValue:nh(o),baseId:Dc(),dir:s,orientation:r,viewport:g,onViewportChange:x,indicatorTrack:b,onIndicatorTrackChange:w,onTriggerEnter:ic(u),onTriggerLeave:ic(h),onContentEnter:ic(m),onContentLeave:ic(f),onItemSelect:ic(l),onItemDismiss:ic(d),onViewportContentChange:p.useCallback((e,t)=>{y(n=>(n.set(e,t),new Map(n)))},[]),onViewportContentRemove:p.useCallback(e=>{y(t=>t.has(e)?(t.delete(e),new Map(t)):t)},[]),children:c.jsx($N.Provider,{scope:t,children:c.jsx(YN,{scope:t,items:v,children:i})})})},t_="NavigationMenuList",n_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...a}=e,s=QN(t_,n),r=c.jsx(sc.ul,{"data-orientation":s.orientation,...a,ref:t});return c.jsx(sc.div,{style:{position:"relative"},ref:s.onIndicatorTrackChange,children:c.jsx($N.Slot,{scope:n,children:s.isRootMenu?c.jsx(S_,{asChild:!0,children:r}):r})})});n_.displayName=t_;var a_="NavigationMenuItem",[s_,r_]=KN(a_),i_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:a,...s}=e,r=Dc(),i=a||r||"LEGACY_REACT_AUTO_VALUE",o=p.useRef(null),l=p.useRef(null),d=p.useRef(null),u=p.useRef(()=>{}),h=p.useRef(!1),m=p.useCallback((e="start")=>{if(o.current){u.current();const t=k_(o.current);t.length&&N_("start"===e?t:t.reverse())}},[]),f=p.useCallback(()=>{if(o.current){const e=k_(o.current);e.length&&(u.current=function(e){return e.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}),()=>{e.forEach(e=>{const t=e.dataset.tabindex;e.setAttribute("tabindex",t)})}}(e))}},[]);return c.jsx(s_,{scope:n,value:i,triggerRef:l,contentRef:o,focusProxyRef:d,wasEscapeCloseRef:h,onEntryKeyDown:m,onFocusProxyEnter:m,onRootContentClose:f,onContentFocusOutside:f,children:c.jsx(sc.li,{...s,ref:t})})});i_.displayName=a_;var o_="NavigationMenuTrigger",l_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,disabled:a,...s}=e,r=QN(o_,e.__scopeNavigationMenu),i=r_(o_,e.__scopeNavigationMenu),o=p.useRef(null),l=dl(o,i.triggerRef,t),d=P_(r.baseId,i.value),u=A_(r.baseId,i.value),h=p.useRef(!1),m=p.useRef(!1),f=i.value===r.value;return c.jsxs(c.Fragment,{children:[c.jsx($N.ItemSlot,{scope:n,value:i.value,children:c.jsx(C_,{asChild:!0,children:c.jsx(sc.button,{id:d,disabled:a,"data-disabled":a?"":void 0,"data-state":E_(f),"aria-expanded":f,"aria-controls":u,...s,ref:l,onPointerEnter:ql(e.onPointerEnter,()=>{m.current=!1,i.wasEscapeCloseRef.current=!1}),onPointerMove:ql(e.onPointerMove,R_(()=>{a||m.current||i.wasEscapeCloseRef.current||h.current||(r.onTriggerEnter(i.value),h.current=!0)})),onPointerLeave:ql(e.onPointerLeave,R_(()=>{a||(r.onTriggerLeave(),h.current=!1)})),onClick:ql(e.onClick,()=>{r.onItemSelect(i.value),m.current=f}),onKeyDown:ql(e.onKeyDown,e=>{const t={horizontal:"ArrowDown",vertical:"rtl"===r.dir?"ArrowLeft":"ArrowRight"}[r.orientation];f&&e.key===t&&(i.onEntryKeyDown(),e.preventDefault())})})})}),f&&c.jsxs(c.Fragment,{children:[c.jsx(rh,{"aria-hidden":!0,tabIndex:0,ref:i.focusProxyRef,onFocus:e=>{const t=i.contentRef.current,n=e.relatedTarget,a=n===o.current,s=t?.contains(n);!a&&s||i.onFocusProxyEnter(a?"start":"end")}}),r.viewport&&c.jsx("span",{"aria-owns":u})]})]})});l_.displayName=o_;var c_="navigationMenu.linkSelect",d_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,active:a,onSelect:s,...r}=e;return c.jsx(C_,{asChild:!0,children:c.jsx(sc.a,{"data-active":a?"":void 0,"aria-current":a?"page":void 0,...r,ref:t,onClick:ql(e.onClick,e=>{const t=e.target,n=new CustomEvent(c_,{bubbles:!0,cancelable:!0});if(t.addEventListener(c_,e=>s?.(e),{once:!0}),rc(t,n),!n.defaultPrevented&&!e.metaKey){rc(t,new CustomEvent(x_,{bubbles:!0,cancelable:!0}))}},{checkForDefaultPrevented:!1})})})});d_.displayName="NavigationMenuLink";var u_="NavigationMenuIndicator",h_=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=QN(u_,e.__scopeNavigationMenu),r=Boolean(s.value);return s.indicatorTrack?Jt.createPortal(c.jsx(Xv,{present:n||r,children:c.jsx(m_,{...a,ref:t})}),s.indicatorTrack):null});h_.displayName=u_;var m_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...a}=e,s=QN(u_,n),r=UN(n),[i,o]=p.useState(null),[l,d]=p.useState(null),u="horizontal"===s.orientation,h=Boolean(s.value);p.useEffect(()=>{const e=r(),t=e.find(e=>e.value===s.value)?.ref.current;t&&o(t)},[r,s.value]);const m=()=>{i&&d({size:u?i.offsetWidth:i.offsetHeight,offset:u?i.offsetLeft:i.offsetTop})};return __(i,m),__(s.indicatorTrack,m),l?c.jsx(sc.div,{"aria-hidden":!0,"data-state":h?"visible":"hidden","data-orientation":s.orientation,...a,ref:t,style:{position:"absolute",...u?{left:0,width:l.size+"px",transform:`translateX(${l.offset}px)`}:{top:0,height:l.size+"px",transform:`translateY(${l.offset}px)`},...a.style}}):null}),p_="NavigationMenuContent",f_=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=QN(p_,e.__scopeNavigationMenu),r=r_(p_,e.__scopeNavigationMenu),i=dl(r.contentRef,t),o=r.value===s.value,l={value:r.value,triggerRef:r.triggerRef,focusProxyRef:r.focusProxyRef,wasEscapeCloseRef:r.wasEscapeCloseRef,onContentFocusOutside:r.onContentFocusOutside,onRootContentClose:r.onRootContentClose,...a};return s.viewport?c.jsx(g_,{forceMount:n,...l,ref:i}):c.jsx(Xv,{present:n||o,children:c.jsx(v_,{"data-state":E_(o),...l,ref:i,onPointerEnter:ql(e.onPointerEnter,s.onContentEnter),onPointerLeave:ql(e.onPointerLeave,R_(s.onContentLeave)),style:{pointerEvents:!o&&s.isRootMenu?"none":void 0,...l.style}})})});f_.displayName=p_;var g_=p.forwardRef((e,t)=>{const n=QN(p_,e.__scopeNavigationMenu),{onViewportContentChange:a,onViewportContentRemove:s}=n;return Rc(()=>{a(e.value,{ref:t,...e})},[e,t,a]),Rc(()=>()=>s(e.value),[e.value,s]),null}),x_="navigationMenu.rootContentDismiss",v_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:a,triggerRef:s,focusProxyRef:r,wasEscapeCloseRef:i,onRootContentClose:o,onContentFocusOutside:l,...d}=e,u=QN(p_,n),h=p.useRef(null),m=dl(h,t),f=P_(u.baseId,a),g=A_(u.baseId,a),x=UN(n),v=p.useRef(null),{onItemDismiss:y}=u;p.useEffect(()=>{const e=h.current;if(u.isRootMenu&&e){const t=()=>{y(),o(),e.contains(document.activeElement)&&s.current?.focus()};return e.addEventListener(x_,t),()=>e.removeEventListener(x_,t)}},[u.isRootMenu,e.value,s,y,o]);const b=p.useMemo(()=>{const e=x().map(e=>e.value);"rtl"===u.dir&&e.reverse();const t=e.indexOf(u.value),n=e.indexOf(u.previousValue),s=a===u.value,r=n===e.indexOf(a);if(!s&&!r)return v.current;const i=(()=>{if(t!==n){if(s&&-1!==n)return t>n?"from-end":"from-start";if(r&&-1!==t)return t>n?"to-start":"to-end"}return null})();return v.current=i,i},[u.previousValue,u.value,u.dir,x,a]);return c.jsx(S_,{asChild:!0,children:c.jsx(hc,{id:g,"aria-labelledby":f,"data-motion":b,"data-orientation":u.orientation,...d,ref:m,disableOutsidePointerEvents:!1,onDismiss:()=>{const e=new Event(x_,{bubbles:!0,cancelable:!0});h.current?.dispatchEvent(e)},onFocusOutside:ql(e.onFocusOutside,e=>{l();const t=e.target;u.rootNavigationMenu?.contains(t)&&e.preventDefault()}),onPointerDownOutside:ql(e.onPointerDownOutside,e=>{const t=e.target,n=x().some(e=>e.ref.current?.contains(t)),a=u.isRootMenu&&u.viewport?.contains(t);(n||a||!u.isRootMenu)&&e.preventDefault()}),onKeyDown:ql(e.onKeyDown,e=>{const t=e.altKey||e.ctrlKey||e.metaKey;if("Tab"===e.key&&!t){const t=k_(e.currentTarget),n=document.activeElement,a=t.findIndex(e=>e===n);N_(e.shiftKey?t.slice(0,a).reverse():t.slice(a+1,t.length))?e.preventDefault():r.current?.focus()}}),onEscapeKeyDown:ql(e.onEscapeKeyDown,e=>{i.current=!0})})})}),y_="NavigationMenuViewport",b_=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=QN(y_,e.__scopeNavigationMenu),r=Boolean(s.value);return c.jsx(Xv,{present:n||r,children:c.jsx(w_,{...a,ref:t})})});b_.displayName=y_;var w_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,children:a,...s}=e,r=QN(y_,n),i=dl(t,r.onViewportChange),o=XN(p_,e.__scopeNavigationMenu),[l,d]=p.useState(null),[u,h]=p.useState(null),m=l?l?.width+"px":void 0,f=l?l?.height+"px":void 0,g=Boolean(r.value),x=g?r.value:r.previousValue;return __(u,()=>{u&&d({width:u.offsetWidth,height:u.offsetHeight})}),c.jsx(sc.div,{"data-state":E_(g),"data-orientation":r.orientation,...s,ref:i,style:{pointerEvents:!g&&r.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":m,"--radix-navigation-menu-viewport-height":f,...s.style},onPointerEnter:ql(e.onPointerEnter,r.onContentEnter),onPointerLeave:ql(e.onPointerLeave,R_(r.onContentLeave)),children:Array.from(o.items).map(([e,{ref:t,forceMount:n,...a}])=>{const s=x===e;return c.jsx(Xv,{present:n||s,children:c.jsx(v_,{...a,ref:cl(t,e=>{s&&e&&h(e)})})},e)})})}),S_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...a}=e,s=QN("FocusGroup",n);return c.jsx(qN.Provider,{scope:n,children:c.jsx(qN.Slot,{scope:n,children:c.jsx(sc.div,{dir:s.dir,...a,ref:t})})})}),j_=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],C_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...a}=e,s=HN(n),r=QN("FocusGroupItem",n);return c.jsx(qN.ItemSlot,{scope:n,children:c.jsx(sc.button,{...a,ref:t,onKeyDown:ql(e.onKeyDown,e=>{if(["Home","End",...j_].includes(e.key)){let t=s().map(e=>e.ref.current);if(["rtl"===r.dir?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(e.key)&&t.reverse(),j_.includes(e.key)){const n=t.indexOf(e.currentTarget);t=t.slice(n+1)}setTimeout(()=>N_(t)),e.preventDefault()}})})})});function k_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function N_(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}function __(e,t){const n=ic(t);Rc(()=>{let t=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,n])}function E_(e){return e?"open":"closed"}function P_(e,t){return`${e}-trigger-${t}`}function A_(e,t){return`${e}-content-${t}`}function R_(e){return t=>"mouse"===t.pointerType?e(t):void 0}var T_=ZN,M_=n_,D_=i_,L_=l_,F_=d_,I_=h_,O_=f_,z_=b_;const B_=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(T_,{ref:a,className:sl("relative z-10 flex max-w-max flex-1 items-center justify-center",e),...n,children:[t,c.jsx(K_,{})]}));B_.displayName=T_.displayName;const $_=p.forwardRef(({className:e,...t},n)=>c.jsx(M_,{ref:n,className:sl("group flex flex-1 list-none items-center justify-center space-x-1",e),...t}));$_.displayName=M_.displayName;const U_=D_,V_=uo("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),q_=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(L_,{ref:a,className:sl(V_(),"group",e),...n,children:[t," ",c.jsx(Xp,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));q_.displayName=L_.displayName;const H_=p.forwardRef(({className:e,...t},n)=>c.jsx(O_,{ref:n,className:sl("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",e),...t}));H_.displayName=O_.displayName;const G_=F_,K_=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{className:sl("absolute left-0 top-full flex justify-center"),children:c.jsx(z_,{className:sl("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",e),ref:n,...t})}));K_.displayName=z_.displayName;function W_(e){const t=Q_(e),n=p.forwardRef((e,n)=>{const{children:a,...s}=e,r=p.Children.toArray(a),i=r.find(X_);if(i){const e=i.props.children,a=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...s,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,a):null})}return c.jsx(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}function Q_(e){const t=p.forwardRef((e,t)=>{const{children:n,...a}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const a in t){const s=e[a],r=t[a];/^on[A-Z]/.test(a)?s&&r?n[a]=(...e)=>{const t=r(...e);return s(...e),t}:s&&(n[a]=s):"style"===a?n[a]={...s,...r}:"className"===a&&(n[a]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==p.Fragment&&(s.ref=t?cl(t,e):e),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}p.forwardRef(({className:e,...t},n)=>c.jsx(I_,{ref:n,className:sl("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",e),...t,children:c.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})})).displayName=I_.displayName;var Y_=Symbol("radix.slottable");function X_(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Y_}var Z_="Popover",[J_]=Hl(Z_,[Pu]),eE=Pu(),[tE,nE]=J_(Z_),aE=e=>{const{__scopePopover:t,children:n,open:a,defaultOpen:s,onOpenChange:r,modal:i=!1}=e,o=eE(t),l=p.useRef(null),[d,u]=p.useState(!1),[h,m]=th({prop:a,defaultProp:s??!1,onChange:r,caller:Z_});return c.jsx(Hu,{...o,children:c.jsx(tE,{scope:t,contentId:Dc(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:i,children:n})})};aE.displayName=Z_;var sE="PopoverAnchor";p.forwardRef((e,t)=>{const{__scopePopover:n,...a}=e,s=nE(sE,n),r=eE(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=s;return p.useEffect(()=>(i(),()=>o()),[i,o]),c.jsx(Gu,{...r,...a,ref:t})}).displayName=sE;var rE="PopoverTrigger",iE=p.forwardRef((e,t)=>{const{__scopePopover:n,...a}=e,s=nE(rE,n),r=eE(n),i=dl(t,s.triggerRef),o=c.jsx(sc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":vE(s.open),...a,ref:i,onClick:ql(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:c.jsx(Gu,{asChild:!0,...r,children:o})});iE.displayName=rE;var oE="PopoverPortal",[lE,cE]=J_(oE,{forceMount:void 0}),dE=e=>{const{__scopePopover:t,forceMount:n,children:a,container:s}=e,r=nE(oE,t);return c.jsx(lE,{scope:t,forceMount:n,children:c.jsx(Xv,{present:n||r.open,children:c.jsx(Qu,{asChild:!0,container:s,children:a})})})};dE.displayName=oE;var uE="PopoverContent",hE=p.forwardRef((e,t)=>{const n=cE(uE,e.__scopePopover),{forceMount:a=n.forceMount,...s}=e,r=nE(uE,e.__scopePopover);return c.jsx(Xv,{present:a||r.open,children:r.modal?c.jsx(pE,{...s,ref:t}):c.jsx(fE,{...s,ref:t})})});hE.displayName=uE;var mE=W_("PopoverContent.RemoveScroll"),pE=p.forwardRef((e,t)=>{const n=nE(uE,e.__scopePopover),a=p.useRef(null),s=dl(t,a),r=p.useRef(!1);return p.useEffect(()=>{const e=a.current;if(e)return hh(e)},[]),c.jsx(Jh,{as:mE,allowPinchZoom:!0,children:c.jsx(gE,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ql(e.onCloseAutoFocus,e=>{e.preventDefault(),r.current||n.triggerRef.current?.focus()}),onPointerDownOutside:ql(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,a=2===t.button||n;r.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:ql(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),fE=p.forwardRef((e,t)=>{const n=nE(uE,e.__scopePopover),a=p.useRef(!1),s=p.useRef(!1);return c.jsx(gE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),gE=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:r,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...h}=e,m=nE(uE,n),p=eE(n);return yc(),c.jsx(Cc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:r,children:c.jsx(hc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:c.jsx(Ku,{"data-state":vE(m.open),role:"dialog",id:m.contentId,...p,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),xE="PopoverClose";p.forwardRef((e,t)=>{const{__scopePopover:n,...a}=e,s=nE(xE,n);return c.jsx(sc.button,{type:"button",...a,ref:t,onClick:ql(e.onClick,()=>s.onOpenChange(!1))})}).displayName=xE;function vE(e){return e?"open":"closed"}p.forwardRef((e,t)=>{const{__scopePopover:n,...a}=e,s=eE(n);return c.jsx(Wu,{...s,...a,ref:t})}).displayName="PopoverArrow";var yE=dE,bE=hE;const wE=aE,SE=iE,jE=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...a},s)=>c.jsx(yE,{children:c.jsx(bE,{ref:s,align:t,sideOffset:n,className:sl("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));jE.displayName=bE.displayName;const CE=ab,kE=db,NE=rb,_E=p.forwardRef(({className:e,...t},n)=>c.jsx(ib,{ref:n,className:sl("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));_E.displayName=ib.displayName;const EE=p.forwardRef(({side:e="right",className:t,children:n,...a},s)=>c.jsxs(NE,{children:[c.jsx(_E,{}),c.jsxs(ob,{ref:s,className:sl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out","top"===e&&"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top","bottom"===e&&"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","left"===e&&"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm","right"===e&&"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm",t),...a,children:[n,c.jsxs(kE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(xx,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));EE.displayName=ob.displayName;const PE=({className:e,...t})=>c.jsx("div",{className:sl("flex flex-col space-y-2 text-center sm:text-left",e),...t});PE.displayName="SheetHeader";const AE=({className:e,...t})=>c.jsx("div",{className:sl("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});AE.displayName="SheetFooter";const RE=p.forwardRef(({className:e,...t},n)=>c.jsx(lb,{ref:n,className:sl("text-lg font-semibold text-foreground",e),...t}));RE.displayName=lb.displayName;const TE=p.forwardRef(({className:e,...t},n)=>c.jsx(cb,{ref:n,className:sl("text-sm text-muted-foreground",e),...t}));TE.displayName=cb.displayName;var ME="ScrollArea",[DE]=Hl(ME),[LE,FE]=DE(ME),IE=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:a="hover",dir:s,scrollHideDelay:r=600,...i}=e,[o,l]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),[f,g]=p.useState(null),[x,v]=p.useState(null),[y,b]=p.useState(0),[w,S]=p.useState(0),[j,C]=p.useState(!1),[k,N]=p.useState(!1),_=dl(t,e=>l(e)),E=Jl(s);return c.jsx(LE,{scope:n,type:a,dir:E,scrollHideDelay:r,scrollArea:o,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:j,onScrollbarXEnabledChange:C,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:N,onCornerWidthChange:b,onCornerHeightChange:S,children:c.jsx(sc.div,{dir:E,...i,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});IE.displayName=ME;var OE="ScrollAreaViewport",zE=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:a,nonce:s,...r}=e,i=FE(OE,n),o=dl(t,p.useRef(null),i.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(sc.div,{"data-radix-scroll-area-viewport":"",...r,ref:o,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:c.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});zE.displayName=OE;var BE="ScrollAreaScrollbar",$E=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=FE(BE,e.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:i}=s,o="horizontal"===e.orientation;return p.useEffect(()=>(o?r(!0):i(!0),()=>{o?r(!1):i(!1)}),[o,r,i]),"hover"===s.type?c.jsx(UE,{...a,ref:t,forceMount:n}):"scroll"===s.type?c.jsx(VE,{...a,ref:t,forceMount:n}):"auto"===s.type?c.jsx(qE,{...a,ref:t,forceMount:n}):"always"===s.type?c.jsx(HE,{...a,ref:t}):null});$E.displayName=BE;var UE=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=FE(BE,e.__scopeScrollArea),[r,i]=p.useState(!1);return p.useEffect(()=>{const e=s.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),i(!0)},a=()=>{t=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",a)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(Xv,{present:n||r,children:c.jsx(qE,{"data-state":r?"visible":"hidden",...a,ref:t})})}),VE=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=FE(BE,e.__scopeScrollArea),r="horizontal"===e.orientation,i=dP(()=>l("SCROLL_END"),100),[o,l]=(d="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},p.useReducer((e,t)=>u[e][t]??e,d));var d,u;return p.useEffect(()=>{if("idle"===o){const e=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[o,s.scrollHideDelay,l]),p.useEffect(()=>{const e=s.viewport,t=r?"scrollLeft":"scrollTop";if(e){let n=e[t];const a=()=>{const a=e[t];n!==a&&(l("SCROLL"),i()),n=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[s.viewport,r,l,i]),c.jsx(Xv,{present:n||"hidden"!==o,children:c.jsx(HE,{"data-state":"hidden"===o?"hidden":"visible",...a,ref:t,onPointerEnter:ql(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ql(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),qE=p.forwardRef((e,t)=>{const n=FE(BE,e.__scopeScrollArea),{forceMount:a,...s}=e,[r,i]=p.useState(!1),o="horizontal"===e.orientation,l=dP(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;i(o?e:t)}},10);return uP(n.viewport,l),uP(n.content,l),c.jsx(Xv,{present:a||r,children:c.jsx(HE,{"data-state":r?"visible":"hidden",...s,ref:t})})}),HE=p.forwardRef((e,t)=>{const{orientation:n="vertical",...a}=e,s=FE(BE,e.__scopeScrollArea),r=p.useRef(null),i=p.useRef(0),[o,l]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=sP(o.viewport,o.content),u={...a,sizes:o,onSizesChange:l,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>r.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function h(e,t){return function(e,t,n,a="ltr"){const s=rP(n),r=s/2,i=t||r,o=s-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,u="ltr"===a?[0,d]:[-1*d,0];return oP([l,c],u)(e)}(e,i.current,o,t)}return"horizontal"===n?c.jsx(GE,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&r.current){const e=iP(s.viewport.scrollLeft,o,s.dir);r.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=h(e,s.dir))}}):"vertical"===n?c.jsx(KE,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&r.current){const e=iP(s.viewport.scrollTop,o);r.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=h(e))}}):null}),GE=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:a,...s}=e,r=FE(BE,e.__scopeScrollArea),[i,o]=p.useState(),l=p.useRef(null),d=dl(t,l,r.onScrollbarXChange);return p.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(YE,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:"rtl"===r.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===r.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":rP(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(r.viewport){const a=r.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),lP(a,n)&&t.preventDefault()}},onResize:()=>{l.current&&r.viewport&&i&&a({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:aP(i.paddingLeft),paddingEnd:aP(i.paddingRight)}})}})}),KE=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:a,...s}=e,r=FE(BE,e.__scopeScrollArea),[i,o]=p.useState(),l=p.useRef(null),d=dl(t,l,r.onScrollbarYChange);return p.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(YE,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:"ltr"===r.dir?0:void 0,left:"rtl"===r.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":rP(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(r.viewport){const a=r.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),lP(a,n)&&t.preventDefault()}},onResize:()=>{l.current&&r.viewport&&i&&a({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:aP(i.paddingTop),paddingEnd:aP(i.paddingBottom)}})}})}),[WE,QE]=DE(BE),YE=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:s,onThumbChange:r,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=e,f=FE(BE,n),[g,x]=p.useState(null),v=dl(t,e=>x(e)),y=p.useRef(null),b=p.useRef(""),w=f.viewport,S=a.content-a.viewport,j=ic(u),C=ic(l),k=dP(h,10);function N(e){if(y.current){const t=e.clientX-y.current.left,n=e.clientY-y.current.top;d({x:t,y:n})}}return p.useEffect(()=>{const e=e=>{const t=e.target,n=g?.contains(t);n&&j(e,S)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[w,g,S,j]),p.useEffect(C,[a,C]),uP(g,k),uP(f.content,k),c.jsx(WE,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:ic(r),onThumbPointerUp:ic(i),onThumbPositionChange:C,onThumbPointerDown:ic(o),children:c.jsx(sc.div,{...m,ref:v,style:{position:"absolute",...m.style},onPointerDown:ql(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),y.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),N(e)}}),onPointerMove:ql(e.onPointerMove,N),onPointerUp:ql(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,f.viewport&&(f.viewport.style.scrollBehavior=""),y.current=null})})})}),XE="ScrollAreaThumb",ZE=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=QE(XE,e.__scopeScrollArea);return c.jsx(Xv,{present:n||s.hasThumb,children:c.jsx(JE,{ref:t,...a})})}),JE=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:a,...s}=e,r=FE(XE,n),i=QE(XE,n),{onThumbPositionChange:o}=i,l=dl(t,e=>i.onThumbChange(e)),d=p.useRef(void 0),u=dP(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const e=r.viewport;if(e){const t=()=>{if(u(),!d.current){const t=cP(e,o);d.current=t,o()}};return o(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[r.viewport,u,o]),c.jsx(sc.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:ql(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;i.onThumbPointerDown({x:n,y:a})}),onPointerUp:ql(e.onPointerUp,i.onThumbPointerUp)})});ZE.displayName=XE;var eP="ScrollAreaCorner",tP=p.forwardRef((e,t)=>{const n=FE(eP,e.__scopeScrollArea),a=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&a?c.jsx(nP,{...e,ref:t}):null});tP.displayName=eP;var nP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...a}=e,s=FE(eP,n),[r,i]=p.useState(0),[o,l]=p.useState(0),d=Boolean(r&&o);return uP(s.scrollbarX,()=>{const e=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(e),l(e)}),uP(s.scrollbarY,()=>{const e=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(e),i(e)}),d?c.jsx(sc.div,{...a,ref:t,style:{width:r,height:o,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0,...e.style}}):null});function aP(e){return e?parseInt(e,10):0}function sP(e,t){const n=e/t;return isNaN(n)?0:n}function rP(e){const t=sP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-n)*t;return Math.max(a,18)}function iP(e,t,n="ltr"){const a=rP(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=t.scrollbar.size-s,i=t.content-t.viewport,o=r-a,l=Vl(e,"ltr"===n?[0,i]:[-1*i,0]);return oP([0,i],[0,o])(l)}function oP(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}function lP(e,t){return e>0&&e<t}var cP=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},a=0;return function s(){const r={left:e.scrollLeft,top:e.scrollTop},i=n.left!==r.left,o=n.top!==r.top;(i||o)&&t(),n=r,a=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(a)};function dP(e,t){const n=ic(e),a=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(a.current),[]),p.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,t)},[n,t])}function uP(e,t){const n=ic(t);Rc(()=>{let t=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,n])}var hP=IE,mP=zE,pP=tP;const fP=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(hP,{ref:a,className:sl("relative overflow-hidden",e),...n,children:[c.jsx(mP,{className:"h-full w-full rounded-[inherit]",children:t}),c.jsx(gP,{}),c.jsx(pP,{})]}));fP.displayName=hP.displayName;const gP=p.forwardRef(({className:e,orientation:t="vertical",...n},a)=>c.jsx($E,{ref:a,orientation:t,className:sl("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:c.jsx(ZE,{className:"relative flex-1 rounded-full bg-border"})}));gP.displayName=$E.displayName;const xP=p.forwardRef(({className:e,onClick:t,...n},a)=>c.jsx("div",{ref:a,className:sl("flex items-center gap-4 p-4 rounded-lg border bg-card transition-colors",t&&"cursor-pointer hover:bg-accent/50",e),onClick:t,...n}));xP.displayName="Item";const vP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("flex-shrink-0",e),...t}));vP.displayName="ItemMedia";const yP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("flex-1 min-w-0",e),...t}));yP.displayName="ItemContent";const bP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("text-sm font-medium text-foreground",e),...t}));bP.displayName="ItemTitle";const wP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("text-sm text-muted-foreground mt-1",e),...t}));wP.displayName="ItemDescription";const SP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:sl("flex items-center gap-2 flex-shrink-0",e),...t}));function jP({items:e,selectedItems:t,searchQuery:n,onSearchQueryChange:a,onToggleItem:s,onClear:r,label:i="Filters",searchPlaceholder:o="Search filters...",emptyText:l="No results found.",clearLabel:d="Clear filters",buttonClassName:u,popoverContentClassName:h,maxLabelLength:m=8,badgeCount:p,children:f,align:g="start"}){const x=!!f,v=p??t?.size??0,y=x||0===v?i:1===v?(()=>{const e=Array.from(t??[])[0]??"";return m>0?e.slice(0,m):e})():`${v}`;return c.jsxs(wE,{children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",className:sl("h-8 gap-2 px-4 shadow-sm border-dashed",u),children:[c.jsx(Hf,{className:"h-4 w-4"}),y,v>0&&c.jsx("div",{className:"bg-primary text-primary-foreground text-[10px] rounded-full h-4 w-4 grid place-items-center ml-1 font-bold",children:v})]})}),c.jsx(jE,{className:sl(x?"p-0":"w-[250px] p-0",h),align:g,children:x?f:c.jsxs(RN,{children:[c.jsx(MN,{placeholder:o,value:n??"",onValueChange:a??(()=>{})}),c.jsxs(DN,{children:[c.jsx(LN,{children:l}),c.jsx(FN,{children:(e??[]).map(e=>{const n=t?.has(e)??!1;return c.jsxs(ON,{onSelect:()=>s?.(e),children:[c.jsx("div",{className:sl("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",n?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:c.jsx(Yp,{className:"h-3 w-3"})}),c.jsx("span",{children:e})]},e)})}),v>0&&r&&c.jsxs(c.Fragment,{children:[c.jsx(sC,{}),c.jsx(FN,{children:c.jsx(ON,{onSelect:r,className:"justify-center text-center",children:d})})]})]})]})})]})}function CP({column:e,title:t,options:n,onFilterChange:a}){const s=e?.getFacetedUniqueValues(),r=new Set(e?.getFilterValue());return c.jsxs(wE,{children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",size:"sm",className:sl("h-8 px-2 text-xs","whitespace-nowrap border-dashed"),children:[c.jsx(lf,{className:sl("h-3 w-3","mr-1")}),t,r?.size>0&&c.jsxs(c.Fragment,{children:[c.jsx(sC,{orientation:"vertical",className:"mx-2 h-4"}),c.jsx(NC,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:r.size}),c.jsx("div",{className:"hidden space-x-1 lg:flex",children:r.size>2?c.jsxs(NC,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[r.size," selected"]}):n.filter(e=>r.has(e.value)).map(e=>c.jsx(NC,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:e.label},e.value))})]})]})}),c.jsx(jE,{className:"w-[200px] p-0",align:"start",children:c.jsxs(RN,{children:[c.jsx(MN,{placeholder:t}),c.jsxs(DN,{children:[c.jsx(LN,{children:"No results found."}),c.jsx(FN,{children:n.map(t=>{const n=r.has(t.value);return c.jsxs(ON,{onSelect:()=>{n?r.delete(t.value):r.add(t.value);const s=Array.from(r),i=s.length?s:void 0;e?.setFilterValue(i),a&&a(i)},children:[c.jsx("div",{className:sl("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",n?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:c.jsx(Yp,{})}),t.icon&&c.jsx(t.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),c.jsx("span",{children:t.label}),s?.get(t.value)&&c.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:s.get(t.value)})]},t.value)})}),r.size>0&&c.jsxs(c.Fragment,{children:[c.jsx(IN,{}),c.jsx(FN,{children:c.jsx(ON,{onSelect:()=>{e?.setFilterValue(void 0),a&&a(void 0)},className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function kP({table:e,density:t,onDensityChange:n}){return c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsxs(bl,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex items-center gap-2",children:[c.jsx(zg,{className:"h-3.5 w-3.5"}),"View"]})}),c.jsxs(hj,{align:"end",className:"w-[180px]",children:[c.jsx(gj,{children:"View Options"}),c.jsx(xj,{}),c.jsxs(lj,{children:[c.jsxs(dj,{children:[c.jsx(Tg,{className:"mr-2 h-3.5 w-3.5"}),"Density"]}),c.jsx(uj,{children:c.jsxs(cj,{value:t,onValueChange:n,children:[c.jsxs(fj,{value:"compact",children:[c.jsx(tx,{className:"mr-2 h-3.5 w-3.5"}),"Compact"]}),c.jsxs(fj,{value:"comfortable",children:[c.jsx(Zg,{className:"mr-2 h-3.5 w-3.5"}),"Comfortable"]}),c.jsxs(fj,{value:"spacious",children:[c.jsx(Gf,{className:"mr-2 h-3.5 w-3.5"}),"Spacious"]})]})})]}),c.jsxs(lj,{children:[c.jsxs(dj,{children:[c.jsx(mf,{className:"mr-2 h-3.5 w-3.5"}),"Columns"]}),c.jsxs(uj,{className:"w-[200px]",children:[c.jsx(gj,{children:"Toggle columns"}),c.jsx(xj,{}),e.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()).map(e=>c.jsx(pj,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:t=>e.toggleVisibility(!!t),children:e.columnDef.header||e.id},e.id))]})]})]})]})}SP.displayName="ItemActions";const NP=p.forwardRef(function({table:e,globalFilter:t,onGlobalFilterChange:n,onCreate:a,onExport:s,onFilterClick:r,hasActiveFilters:i=!1,onResetFilters:o,loading:l=!1,customActions:d,filterDefs:u=[],density:h,onDensityChange:m},f){const g=p.useRef(null);p.useImperativeHandle(f,()=>({focusSearch:()=>{g.current?.focus(),g.current?.select()}}));const x=""!==t.trim()||i||e.getState().columnFilters.length>0;return c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-1.5 overflow-hidden min-w-0",children:[c.jsxs("div",{className:"relative flex-shrink-0",style:{width:"240px"},children:[l?c.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 z-10",children:c.jsx(Kf,{className:"h-3 w-3 text-muted-foreground animate-spin"})}):c.jsx(Ig,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground"}),c.jsx(_l,{ref:g,type:"search",placeholder:"Search all columns...",value:t??"",onChange:e=>n(e.target.value),className:sl("h-8 pl-8 pr-2 text-xs","w-full focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none")})]}),c.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[r&&c.jsxs(bl,{variant:"outline",size:"sm",className:sl("h-8 px-2 text-xs","whitespace-nowrap"),onClick:r,children:[c.jsx(Ef,{className:sl("h-3 w-3","mr-1",i&&"fill-current")}),"Filters"]}),u.map(t=>{const n=e.getColumn(t.columnId);return n?c.jsx(CP,{column:n,title:t.title,options:t.options},t.columnId):null}),x&&c.jsxs(bl,{variant:"outline",size:"sm",className:sl("h-8 px-2 text-xs","whitespace-nowrap"),onClick:()=>{n(""),e.resetColumnFilters(),o?.()},title:"Reset all filters",children:[c.jsx(xx,{className:sl("h-3 w-3","mr-1")}),"Reset"]})]})]}),c.jsxs("div",{className:sl("flex items-center gap-1.5 flex-shrink-0"),children:[d,a&&c.jsxs(bl,{variant:"default",size:"sm",className:sl("h-8 px-2 text-xs"),onClick:a,children:[c.jsx(jg,{className:sl("h-3 w-3","mr-1")}),"New"]}),c.jsxs(bl,{variant:"outline",size:"sm",onClick:()=>{s?s():function(e,t="enterprise-data.csv"){const n=e.map(e=>Object.values(e).join(",")).join("\n"),a=new Blob([n],{type:"text/csv"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=t,r.click()}(e.getFilteredRowModel().rows.map(e=>e.original))},className:sl("h-8 px-2 text-xs"),children:[c.jsx(vf,{className:sl("h-3 w-3","mr-1")}),"Export"]}),c.jsx(kP,{table:e,density:h,onDensityChange:m})]})]})});NP.displayName="TableToolbar";const _P=p.forwardRef(function({title:e,description:t,table:n,globalFilter:a,onGlobalFilterChange:s,onCreate:r,onExport:i,onFilterClick:o,hasActiveFilters:l=!1,onResetFilters:d,onStatusFilterChange:u,manualFiltering:h=!1,loading:m=!1,compact:p=!0,customActions:f,filterDefs:g,density:x="comfortable",onDensityChange:v=()=>{}},y){const b=Us(),w=b.textSizeCardTitle,S=b.textSizeCardDescription;return c.jsxs("div",{className:sl("flex flex-col mt-4",b.gapCard),children:[c.jsxs("div",{className:sl("flex items-center",b.gapCard),children:[c.jsx(Cl,{className:sl(w,"font-semibold"),children:e}),t&&c.jsx(kl,{className:sl(S,"text-muted-foreground"),children:t})]}),c.jsx(NP,{ref:y,table:n,globalFilter:a,onGlobalFilterChange:s,onCreate:r,onExport:i,onFilterClick:o,hasActiveFilters:l,onResetFilters:d,manualFiltering:h,loading:m,customActions:f,filterDefs:g,density:x,onDensityChange:v})]})});function EP({table:e,enableRowSelection:t=!1,enableColumnResizing:n=!0,compact:a=!0}){const[s,r]=p.useState(null),i=Us(),o=a?"py-1":"py-2",l=a?"px-2.5":"px-3.5",d=i.textSize;return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:sl("w-full border-collapse",d,!n&&"table-auto"),style:{width:"100%"},children:[c.jsx("colgroup",{children:e.getAllColumns().map(e=>{const t=e.columnDef,a=e.getSize();return"actions"===e.id||"action"===e.id||"actions"===t.id||"action"===t.id?c.jsx("col",{style:{width:"1%",minWidth:"50px",maxWidth:"100px"}},e.id):c.jsx("col",{style:{minWidth:n?`${a}px`:t.minSize?`${t.minSize}px`:void 0,width:n?void 0:t.size?`${t.size}px`:void 0,maxWidth:t.maxSize?`${t.maxSize}px`:void 0}},e.id)})}),c.jsx("thead",{className:"bg-muted/40 sticky top-0 z-10 border-b border-border",children:e.getHeaderGroups().map(a=>c.jsx("tr",{children:a.headers.map((i,d)=>{const u=0===d;a.headers.length;const h=s===i.id,m="actions"===i.column.id||"action"===i.column.id||"actions"===i.column.columnDef.id||"action"===i.column.columnDef.id;return c.jsx("th",{className:sl(l,o,"text-left font-semibold text-muted-foreground bg-muted/10","relative leading-tight","antialiased",h&&"bg-muted/60",m&&"sticky right-0 bg-muted/40 z-20",m&&"opacity-0",n&&i.column.getCanResize()&&h&&"cursor-col-resize"),style:{width:n&&!m?i.getSize():void 0,position:m?"sticky":void 0},children:i.isPlaceholder?null:c.jsxs("div",{className:"flex items-center gap-1.5 relative",children:[t&&u&&c.jsx(VC,{checked:e.getIsSomeRowsSelected()?"indeterminate":e.getIsAllRowsSelected(),onCheckedChange:t=>{e.toggleAllRowsSelected("indeterminate"!==t&&!!t)},className:"h-3.5 w-3.5","aria-label":"Select all rows"}),c.jsxs("div",{className:sl("flex items-center gap-1.5 flex-1 min-w-0",i.column.getCanSort()&&"cursor-pointer select-none hover:text-foreground",!i.column.getCanSort()&&"cursor-default"),onClick:i.column.getToggleSortingHandler(),children:[c.jsx("span",{className:"truncate",children:ro(i.column.columnDef.header,i.getContext())}),i.column.getCanSort()&&i.column.getIsSorted()&&c.jsx("span",{className:"flex-shrink-0",children:{asc:c.jsx(ef,{className:"h-3 w-3 text-primary"}),desc:c.jsx(Xp,{className:"h-3 w-3 text-primary"})}[i.column.getIsSorted()]})]}),n&&i.column.getCanResize()&&c.jsx("div",{onMouseDown:i.getResizeHandler(),onTouchStart:i.getResizeHandler(),onMouseEnter:()=>r(i.id),onMouseLeave:()=>r(null),className:sl("absolute right-0 top-0 h-full w-1 cursor-col-resize touch-none select-none","hover:bg-primary/50 transition-colors z-30",h&&"bg-primary"),style:{cursor:"col-resize",width:"6px",marginRight:"-3px",pointerEvents:"auto"}})]})},i.id)})},a.id))}),c.jsx("tbody",{children:0===e.getRowModel().rows.length?c.jsx("tr",{children:c.jsx("td",{colSpan:e.getAllColumns().length,className:sl(l,o,"text-center text-muted-foreground","leading-relaxed","antialiased"),children:"No data available"})}):e.getRowModel().rows.map((e,n)=>{const a=e.getIsSelected(),s=e.getVisibleCells()[e.getVisibleCells().length-1];return"actions"===s?.column.id||"action"===s?.column.id||"actions"===s?.column.columnDef.id||s?.column.columnDef.id,c.jsx("tr",{className:sl("border-b border-border/10 transition-colors group","hover:bg-muted/30",a&&"bg-primary/5 hover:bg-primary/10",n%2==0?"bg-background":"bg-muted/10"),children:e.getVisibleCells().map((s,r)=>{const i=0===r;e.getVisibleCells().length;const u="actions"===s.column.id||"action"===s.column.id||"actions"===s.column.columnDef.id||"action"===s.column.columnDef.id;return c.jsx("td",{className:sl(l,o,d,"text-foreground","leading-normal","font-normal","antialiased",u&&sl("sticky right-0 z-10 transition-opacity",n%2==0?"bg-background":"bg-muted/10"),u&&sl("opacity-0 group-hover:opacity-100")),style:{position:u?"sticky":void 0},children:t&&i?c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(VC,{checked:a,onCheckedChange:t=>{e.toggleSelected(!!t)},className:"h-3.5 w-3.5","aria-label":`Select row ${n+1}`,onClick:e=>e.stopPropagation()}),c.jsx("span",{className:"flex-1 min-w-0 leading-normal",children:ro(s.column.columnDef.cell,s.getContext())})]}):c.jsx("div",{className:"truncate leading-normal",children:ro(s.column.columnDef.cell,s.getContext())})},s.id)})},e.id)})})]})})}function PP({table:e,totalCount:t,manualPagination:n,onPageSizeChange:a}){const s="text-xs",r="h-6 w-6",i="h-3 w-3";return c.jsxs("div",{className:sl("flex items-center justify-between border-t border-border bg-muted/10","px-3 py-1.5"),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:sl(s,"text-muted-foreground leading-none"),children:["Page ",e.getState().pagination.pageIndex+1," of"," ",e.getPageCount()," "," ","number"==typeof t?t:e.getFilteredRowModel().rows.length," ","number"==typeof t&&1===t?"row":"rows"]}),c.jsx("select",{value:e.getState().pagination.pageSize,onChange:t=>{const s=Number(t.target.value);e.setPageSize(s),n&&a&&(e.setPageIndex(0),a(s))},className:sl(s,"h-6 border border-border rounded-md px-2 bg-background leading-none","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-1"),"aria-label":"Rows per page",children:[10,20,50,100,200].map(e=>c.jsxs("option",{value:e,children:[e," per page"]},e))})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(bl,{variant:"outline",size:"sm",onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),className:sl(r,"p-0 flex items-center justify-center"),"aria-label":"First page",children:c.jsx(tf,{className:i})}),c.jsx(bl,{variant:"outline",size:"sm",onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),className:sl(r,"p-0 flex items-center justify-center"),"aria-label":"Previous page",children:c.jsx(Zp,{className:i})}),c.jsx(bl,{variant:"outline",size:"sm",onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),className:sl(r,"p-0 flex items-center justify-center"),"aria-label":"Next page",children:c.jsx(Jp,{className:i})}),c.jsx(bl,{variant:"outline",size:"sm",onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),className:sl(r,"p-0 flex items-center justify-center"),"aria-label":"Last page",children:c.jsx(nf,{className:i})})]})]})}function AP({table:e,selectedCount:t,customActions:n}){const a=Us();return c.jsxs("div",{className:sl("flex items-center justify-between",a.paddingCell,a.paddingRow,"bg-primary/5 border-b border-border",a.textSize),children:[c.jsxs("div",{className:sl("flex items-center",a.gapButtonGroup),children:[c.jsxs("span",{className:"font-medium text-foreground",children:[t," ",1===t?"row":"rows"," selected"]}),n&&c.jsx("div",{className:sl("flex items-center",a.gapButtonGroup),children:n})]}),c.jsxs(bl,{variant:"ghost",size:"sm",onClick:()=>{e.toggleAllRowsSelected(!1)},className:sl(a.buttonHeightSmall,a.textSizeSmall),"aria-label":"Clear selection",children:[c.jsx(xx,{className:sl(a.iconSize,"mr-1")}),"Clear"]})]})}function RP({children:e,align:t="left",className:n}){const a=Us();return c.jsx("div",{className:sl({left:"text-left",right:"text-right w-full",center:"text-center"}[t],a.textSizeLabel,n),children:e})}function TP(e){const{accessorKey:t,header:n,size:a=150,cellClassName:s="text-foreground truncate block",headerAlign:r="left",cell:i,fallback:o="-",additionalOptions:l={}}=e,d="string"==typeof n?c.jsx(RP,{align:r,children:n}):c.jsx(RP,{align:r,children:n()});return{accessorKey:t,header:()=>d,cell:i||(e=>{const t=e.getValue();return c.jsx("span",{className:s,children:null!=t&&""!==t?t:o})}),size:a,...l}}function MP(e){const{accessorKey:t,header:n,size:a=180,cellClassName:s="",headerAlign:r="left",cell:i,fallback:o="-",formatOptions:l={dateStyle:"short",timeStyle:"short"},additionalOptions:d={}}=e,u="string"==typeof n?c.jsx(RP,{align:r,children:n}):c.jsx(RP,{align:r,children:n()});return{accessorKey:t,header:()=>u,cell:i||(e=>{const t=e.getValue();if(null==t||""===t)return c.jsx("span",{className:s,children:o});try{const e=t instanceof Date?t:new Date(t);if(isNaN(e.getTime()))return c.jsx("span",{className:s,children:o});const n=e.toLocaleString(void 0,l);return c.jsx("span",{className:s,children:n})}catch{return c.jsx("span",{className:s,children:o})}}),size:a,...d}}function DP(e){const{accessorKey:t,header:n,size:a=100,cellClassName:s="font-medium truncate block",headerAlign:r="left",cell:i,additionalOptions:o={}}=e,l="string"==typeof n?c.jsx(RP,{align:r,children:n}):c.jsx(RP,{align:r,children:n()});return{accessorKey:t,header:()=>l,cell:i||(e=>c.jsx("span",{className:s,children:e.getValue()})),size:a,...o}}function LP(e){const{getDisplayName:t,getAvatar:n,getInitials:a,header:s,size:r,showAvatar:i=!0,onClick:o,renderIndicators:l,headerAlign:d="left",additionalOptions:u={}}=e,h="string"==typeof s?c.jsx(RP,{align:d,children:s}):c.jsx(RP,{align:d,children:s()}),m=i?250:200,p=({displayName:e,avatarUrl:t,initials:n,showAvatar:a,onClick:s,renderIndicators:r,row:i})=>{const o=Us();return a?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(SC,{className:"h-6 w-6 flex-shrink-0",children:t?c.jsx("img",{src:t,alt:e,className:"h-full w-full object-cover"}):c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted text-[10px] font-medium",children:n})}),c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx("button",{type:"button",className:"text-left hover:underline flex-1 min-w-0",onClick:s,children:c.jsx("div",{className:"min-w-0 flex-1",children:c.jsx("div",{className:sl("font-medium truncate hover:underline text-primary hover:text-primary",o.textSize),children:e})})}),r&&c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:r(i)})]})]}):c.jsxs("button",{type:"button",className:sl("group font-medium truncate hover:underline text-left transition-colors group-hover:text-primary flex items-center gap-2 w-full",o.textSize),onClick:s,children:[c.jsx("span",{className:"flex-1 min-w-0 truncate",children:e}),r&&c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:r(i)})]})};return{id:"string"==typeof s?s.toLowerCase().replace(/\s+/g,"-"):"identified",accessorFn:e=>t(e),header:()=>h,cell:e=>{const s=e.row.original,r=t(s),d=n?.(s),u=a?a(s):(e=>{const t=e.trim().split(/\s+/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():t[0].length>=2?t[0].slice(0,2).toUpperCase():t[0][0]?.toUpperCase()||"?"})(r);return c.jsx(p,{displayName:r,avatarUrl:d,initials:u,showAvatar:i,onClick:e=>{e.stopPropagation(),o?.(s,e)},renderIndicators:l,row:s})},size:r??m,...u}}function FP(e={}){const{header:t="Actions",size:n=180,actions:a=[],customActions:s,additionalOptions:r={}}=e,i="string"==typeof t?c.jsx(RP,{align:"right",children:t}):c.jsx(RP,{align:"right",children:t()});return{id:"actions",header:()=>i,cell:e=>{const t=e.row.original;if(s)return c.jsx("div",{className:"flex items-center justify-end gap-0.5",children:s(t)});const n=a.filter(e=>!e.showWhen||e.showWhen(t));return c.jsx("div",{className:"flex items-center justify-end gap-0.5",children:n.map((e,n)=>{const a=e.icon,s=!!e.disabledWhen&&e.disabledWhen(t),r="function"==typeof e.title?e.title(t):e.title||"",i=e.variant||"ghost",o=e.size||"sm",l="destructive"===i?"h-7 w-7 p-0 text-destructive hover:text-destructive hover:bg-destructive/10 transition-colors":"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors";return c.jsx(bl,{variant:i,size:o,onClick:n=>{n.stopPropagation(),e.onClick(t,n)},disabled:s,className:e.className||l,title:r,children:c.jsx(a,{className:"h-3 w-3"})},n)})})},size:n,...r}}_P.displayName="TableHeader";const IP=[DP({accessorKey:"id",header:"ID",size:80,cellClassName:"font-mono"}),TP({accessorKey:"name",header:"Name",size:150,cellClassName:"font-medium truncate block"}),TP({accessorKey:"email",header:"Email",size:200}),TP({accessorKey:"department",header:"Department",size:120,cellClassName:"truncate block"}),TP({accessorKey:"status",header:"Status",size:100,cell:e=>{const t=e.getValue();return c.jsx(NC,{variant:{active:"default",inactive:"secondary",pending:"outline"}[t],className:"text-xs",children:t})},additionalOptions:{filterFn:(e,t,n)=>n.includes(e.getValue(t))}}),TP({accessorKey:"revenue",header:"Revenue",size:120,cell:e=>c.jsxs("span",{className:"font-mono",children:["$",e.getValue().toLocaleString()]})}),TP({accessorKey:"createdAt",header:"Created",size:100,cell:e=>c.jsx("span",{children:new Date(e.getValue()).toLocaleDateString()})}),TP({accessorKey:"lastLogin",header:"Last Login",size:100,cell:e=>c.jsx("span",{children:new Date(e.getValue()).toLocaleDateString()})})];function OP({data:e=[],columns:t,title:n="Data Table",description:a="High-density data display with advanced features",useDefaultColumns:s=!0,onCreate:r,onFilterClick:i,hasActiveFilters:o=!1,onResetFilters:l,onSearch:d,onStatusFilterChange:u,manualFiltering:h=!1,loading:m=!1,serverPagination:f,onPageChange:g,manualPagination:x=!1,onPageSizeChange:v,enableRowSelection:y=!1,enableColumnResizing:b=!0,compact:w,onRowSelectionChange:S,bulkActions:j,emptyState:C,customActions:k,viewId:N,filterDefs:_}){const[E,P]=p.useState(""),A=p.useRef(null),R=p.useRef(d),T=p.useRef(null),M=p.useRef(null),D=(e,t)=>{const[n,a]=p.useState(()=>{if(!N)return t;try{const n=localStorage.getItem(`datatable-view-${N}-${e}`);return n?JSON.parse(n):t}catch(n){return t}});return p.useEffect(()=>{if(N)try{localStorage.setItem(`datatable-view-${N}-${e}`,JSON.stringify(n))}catch(t){}},[N,e,n]),[n,a]},[L,F]=D("visibility",{}),[I,O]=D("sorting",[]),z=Vs(),[B,$]=D("density",z?"compact":"comfortable"),U=void 0!==w?w:"compact"===B,[V,q]=p.useState({}),[H,G]=p.useState({});p.useEffect(()=>{R.current=d},[d]),p.useEffect(()=>{if(R.current&&h)return A.current&&clearTimeout(A.current),""===E?void R.current(E):(A.current=setTimeout(()=>{R.current?.(E)},500),()=>{A.current&&clearTimeout(A.current)})},[E,h]);const K=e=>{P(e),d&&!h&&d(e)},W=function(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=p.useState(()=>({current:ao(t)})),[a,s]=p.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...a,...e.state},onStateChange:t=>{s(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:e,columns:t||(s?IP:[]),state:{globalFilter:E,columnVisibility:L,rowSelection:V,columnSizing:H,sorting:I,...x&&f?{pagination:{pageIndex:Math.max(0,(f.page||1)-1),pageSize:f.pageSize??50}}:{}},onGlobalFilterChange:K,onColumnVisibilityChange:F,onRowSelectionChange:q,onColumnSizingChange:G,onSortingChange:O,enableRowSelection:y,enableColumnResizing:b,columnResizeMode:"onChange",...x&&(g||v)?{onPaginationChange:e=>{const t=x&&f?{pageIndex:Math.max(0,f.page-1),pageSize:f.pageSize}:{pageIndex:0,pageSize:50},n="function"==typeof e?e(t):e,a=n.pageIndex??0,s=n.pageSize??t.pageSize;g&&a!==t.pageIndex&&g(Math.max(1,a+1)),v&&s!==t.pageSize&&v(s)}}:{},getCoreRowModel:e=>gi(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},a=function(t,s,r){void 0===s&&(s=0);const i=[];for(let l=0;l<t.length;l++){const c=Si(e,e._getRowId(t[l],l,r),t[l],l,s,0,null==r?void 0:r.id);var o;n.flatRows.push(c),n.rowsById[c.id]=c,i.push(c),e.options.getSubRows&&(c.originalSubRows=e.options.getSubRows(t[l],l),null!=(o=c.originalSubRows)&&o.length&&(c.subRows=a(c.originalSubRows,s+1,c)))}return i};return n.rows=a(t),n},xi(e.options,"debugTable",0,()=>e._autoResetPageIndex())),...x?{}:{getPaginationRowModel:e=>gi(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{if(!n.rows.length)return n;const{pageSize:a,pageIndex:s}=t;let{rows:r,flatRows:i,rowsById:o}=n;const l=a*s,c=l+a;let d;r=r.slice(l,c),d=e.options.paginateExpandedRows?{rows:r,flatRows:i,rowsById:o}:function(e){const t=[],n=e=>{var a;t.push(e),null!=(a=e.subRows)&&a.length&&e.getIsExpanded()&&e.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}({rows:r,flatRows:i,rowsById:o}),d.flatRows=[];const u=e=>{d.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return d.rows.forEach(u),d},xi(e.options,"debugTable"))},getSortedRowModel:e=>gi(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||null==t||!t.length)return n;const a=e.getState().sorting,s=[],r=a.filter(t=>{var n;return null==(n=e.getColumn(t.id))?void 0:n.getCanSort()}),i={};r.forEach(t=>{const n=e.getColumn(t.id);n&&(i[t.id]={sortUndefined:n.columnDef.sortUndefined,invertSorting:n.columnDef.invertSorting,sortingFn:n.getSortingFn()})});const o=e=>{const t=e.map(e=>({...e}));return t.sort((e,t)=>{for(let a=0;a<r.length;a+=1){var n;const s=r[a],o=i[s.id],l=o.sortUndefined,c=null!=(n=null==s?void 0:s.desc)&&n;let d=0;if(l){const n=void 0===e.getValue(s.id),a=void 0===t.getValue(s.id);if(n||a){if("first"===l)return n?-1:1;if("last"===l)return n?1:-1;d=n&&a?0:n?l:-l}}if(0===d&&(d=o.sortingFn(e,t,s.id)),0!==d)return c&&(d*=-1),o.invertSorting&&(d*=-1),d}return e.index-t.index}),t.forEach(e=>{var t;s.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=o(e.subRows))}),t};return{rows:o(n.rows),flatRows:s,rowsById:n.rowsById}},xi(e.options,"debugTable",0,()=>e._autoResetPageIndex())),...h?{}:{getFilteredRowModel:e=>gi(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,a)=>{if(!t.rows.length||(null==n||!n.length)&&!a){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}const s=[],r=[];(null!=n?n:[]).forEach(t=>{var n;const a=e.getColumn(t.id);if(!a)return;const r=a.getFilterFn();r&&s.push({id:t.id,filterFn:r,resolvedValue:null!=(n=null==r.resolveFilterValue?void 0:r.resolveFilterValue(t.value))?n:t.value})});const i=(null!=n?n:[]).map(e=>e.id),o=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());let c,d;a&&o&&l.length&&(i.push("__global__"),l.forEach(e=>{var t;r.push({id:e.id,filterFn:o,resolvedValue:null!=(t=null==o.resolveFilterValue?void 0:o.resolveFilterValue(a))?t:a})}));for(let e=0;e<t.flatRows.length;e++){const n=t.flatRows[e];if(n.columnFilters={},s.length)for(let e=0;e<s.length;e++){c=s[e];const t=c.id;n.columnFilters[t]=c.filterFn(n,t,c.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(r.length){for(let e=0;e<r.length;e++){d=r[e];const t=d.id;if(d.filterFn(n,t,d.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return so(t.rows,e=>{for(let t=0;t<i.length;t++)if(!1===e.columnFilters[i[t]])return!1;return!0},e)},xi(e.options,"debugTable",0,()=>e._autoResetPageIndex())),getFacetedRowModel:(e,t)=>gi(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,a,s)=>{if(!n.rows.length||(null==a||!a.length)&&!s)return n;const r=[...a.map(e=>e.id).filter(e=>e!==t),s?"__global__":void 0].filter(Boolean);return so(n.rows,e=>{for(let t=0;t<r.length;t++)if(!1===e.columnFilters[r[t]])return!1;return!0},e)},xi(e.options,"debugTable")),getFacetedUniqueValues:(e,t)=>gi(()=>{var n;return[null==(n=e.getColumn(t))?void 0:n.getFacetedRowModel()]},e=>{if(!e)return new Map;let n=new Map;for(let s=0;s<e.flatRows.length;s++){const r=e.flatRows[s].getUniqueValues(t);for(let e=0;e<r.length;e++){const t=r[e];var a;n.has(t)?n.set(t,(null!=(a=n.get(t))?a:0)+1):n.set(t,1)}}return n},xi(e.options,"debugTable"))},manualFiltering:h,manualPagination:x,...x&&f?.totalPages?{pageCount:Math.max(1,f.totalPages)}:{},initialState:{pagination:{pageSize:f?.pageSize??50}}});p.useEffect(()=>{if(S&&y){const e=W.getSelectedRowModel().rows.map(e=>e.original);S(e)}},[V,S,y]),p.useEffect(()=>{const e=e=>{const t=document.activeElement,n=T.current&&t&&T.current.contains(t),a=t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("[role='dialog']")||t.closest("[role='combobox']")||t.closest("[role='listbox']"));!n||a||!M.current||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||"Enter"===e.key||" "===e.key||"Tab"===e.key||"Escape"===e.key||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].includes(e.key)||M.current.focusSearch()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);const Q=y?W.getSelectedRowModel().rows.length:0,Y=p.useMemo(()=>{const e=[..._||[]];return u&&!e.find(e=>"status"===e.columnId)&&e.push({columnId:"status",title:"Status",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Pending",value:"pending"}]}),e},[_,u]);p.useEffect(()=>{if(h&&u){const e=W.getState().columnFilters.find(e=>"status"===e.id),t=e?.value;Array.isArray(t)&&t.length>0&&t[0]}},[W.getState().columnFilters,h,u]);const X=p.useRef(void 0),Z=W.getState().columnFilters;return p.useEffect(()=>{if(!h||!u)return;const e=Z.find(e=>"status"===e.id),t=e?.value,n=Array.isArray(t)&&t.length>0?t[0]:void 0;n!==X.current&&(X.current=n,u(n))},[Z,h,u]),c.jsxs(Sl,{ref:T,className:"w-full px-4 py-4",children:[c.jsx(_P,{ref:M,title:n,description:a,table:W,globalFilter:E,onGlobalFilterChange:K,onCreate:r,onFilterClick:i,hasActiveFilters:o,onResetFilters:l,manualFiltering:h,loading:m,customActions:k,filterDefs:Y,density:B,onDensityChange:$}),y&&Q>0&&c.jsx(AP,{table:W,selectedCount:Q,customActions:j}),c.jsxs(Nl,{children:[c.jsx(EP,{table:W,enableRowSelection:y,enableColumnResizing:b,compact:U}),0===W.getRowModel().rows.length&&!m&&C&&c.jsx("div",{className:"py-8",children:C})]}),c.jsx(PP,{table:W,totalCount:f?.total,manualPagination:x,onPageSizeChange:v,compact:U})]})}function zP({items:e,gridColsClass:t,renderItem:n,showActions:a,customActions:s,onEdit:r,onDelete:i,onItemClick:o,badges:l=[],stats:d=[]}){const u=Us();return c.jsx("div",{className:t,children:e.map(e=>{if(n)return c.jsx(f.Fragment,{children:n(e)},e.id);const t=a&&(s||r||i);return c.jsx("div",{className:sl("group flex flex-col rounded-lg border bg-card transition-colors hover:bg-accent/50",u.paddingCard,o&&"cursor-pointer"),onClick:()=>o?.(e),children:c.jsxs("div",{className:sl("flex-1",u.spacingCard),children:[c.jsxs("div",{className:sl("flex items-start justify-between",u.gapCard),children:[c.jsxs("div",{className:sl("flex-1 min-w-0",u.spacingFormItem),children:[c.jsx("h4",{className:sl("font-medium text-foreground",u.textSize),children:e.name}),e.description&&c.jsx("p",{className:sl("text-muted-foreground line-clamp-2",u.textSize),children:e.description})]}),l.some(t=>t.condition(e))&&c.jsx("div",{className:sl("flex items-center flex-wrap flex-shrink-0",u.gapFormItem),children:l.filter(t=>t.condition(e)).map(e=>c.jsx(NC,{variant:e.variant||"secondary",className:"text-xs",children:e.label},e.key))})]}),(d.length>0||t)&&c.jsxs("div",{className:sl("flex flex-wrap items-center justify-between pt-2 border-t border-border/40",u.gapCard),children:[d.length>0&&c.jsx("div",{className:sl("flex flex-wrap items-center text-muted-foreground",u.gapCard,u.textSizeSmall),children:d.filter(e=>!1!==e.show).map((t,n)=>{const a=(e=>{const t=e.toLowerCase();return t.includes("user")||t.includes("member")?c.jsx(px,{className:"h-3 w-3 text-muted-foreground"}):t.includes("permission")||t.includes("access")?c.jsx(jf,{className:"h-3 w-3 text-muted-foreground"}):t.includes("role")||t.includes("group")?c.jsx(gf,{className:"h-3 w-3 text-muted-foreground"}):null})(t.key);return c.jsxs("div",{className:sl("flex items-center",u.gapFormItem),children:[a&&c.jsx("span",{className:"flex-shrink-0",children:a}),c.jsx("span",{className:sl("font-semibold text-foreground",u.textSize),children:t.value(e)}),c.jsx("span",{className:sl("text-muted-foreground font-normal",u.textSizeSmall),children:t.label}),n<d.filter(e=>!1!==e.show).length-1&&c.jsx("span",{className:"w-px h-3 bg-border/60 mx-0.5"})]},t.key)})}),t&&c.jsx("div",{className:"flex items-center gap-1 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:s?s(e):c.jsxs(c.Fragment,{children:[r&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>r(e),className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Kg,{className:"h-3.5 w-3.5"})}),i&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>i(e),className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(ax,{className:"h-3.5 w-3.5"})})]})})]})]})},e.id)})})}function BP({items:e,renderItem:t,showActions:n,customActions:a,onEdit:s,onDelete:r,onItemClick:i,badges:o=[],stats:l=[]}){const d=Us();return c.jsx("div",{className:d.spacingCard,children:e.map(e=>{if(t)return c.jsx(f.Fragment,{children:t(e)},e.id);const u=n&&(a||s||r);return c.jsx("div",{className:sl("group rounded-lg border bg-card transition-colors hover:bg-accent/50",d.paddingCard,i&&"cursor-pointer"),onClick:()=>i?.(e),children:c.jsx("div",{className:sl("flex items-start justify-between",d.gapForm),children:c.jsxs("div",{className:sl("flex-1 min-w-0",d.spacingFormItem),children:[c.jsxs("div",{className:sl("flex items-start justify-between mb-1",d.gapCard),children:[c.jsx("h4",{className:sl("font-medium text-foreground",d.textSize),children:e.name}),o.some(t=>t.condition(e))&&c.jsx("div",{className:sl("flex items-center flex-wrap flex-shrink-0",d.gapFormItem),children:o.filter(t=>t.condition(e)).map(e=>c.jsx(NC,{variant:e.variant||"secondary",className:"text-xs",children:e.label},e.key))})]}),e.description&&c.jsx("p",{className:sl("text-muted-foreground mb-2",d.textSize),children:e.description}),c.jsxs("div",{className:sl("flex flex-wrap items-center justify-between pt-2 border-t border-border/40",d.gapCard),children:[l.length>0&&c.jsx("div",{className:sl("flex flex-wrap items-center text-muted-foreground",d.gapCard,d.textSizeSmall),children:l.filter(e=>!1!==e.show).map(t=>c.jsxs("div",{className:sl("flex items-center",d.gapFormItem),children:[c.jsx("span",{className:sl("font-semibold text-foreground",d.textSize),children:t.value(e)}),c.jsx("span",{className:sl("text-muted-foreground font-normal",d.textSizeSmall),children:t.label})]},t.key))}),u&&c.jsx("div",{className:"flex items-center gap-1 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:a?a(e):c.jsxs(c.Fragment,{children:[s&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>s(e),className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Kg,{className:"h-3.5 w-3.5"})}),r&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>r(e),className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(ax,{className:"h-3.5 w-3.5"})})]})})]})]})})},e.id)})})}function $P({className:e,items:t=[],loading:n=!1,error:a=null,searchable:s=!0,searchPlaceholder:r="Search...",title:i,description:o,stats:l=[],badges:d=[],showActions:u=!0,showCreateButton:h=!1,createButtonLabel:m="Create",onCreate:f,onItemClick:g,onEdit:x,onDelete:v,onSearch:y,customActions:b,renderItem:w,loadingMessage:S="Loading...",emptyMessage:j="No items found",errorMessage:C,gridCols:k={default:1,md:2,lg:3},viewMode:N,defaultViewMode:_="card",onViewModeChange:E,showViewToggle:P=!0,renderCalendarView:A}){const[R,T]=p.useState(""),M=p.useMemo(()=>(i||e||"default").toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),[i,e]),D=p.useMemo(()=>{if(N)return N;return zs.getDataListView(M)||_},[M,_,N]),[L,F]=p.useState(D),I=N??L;p.useEffect(()=>{!N&&L&&"calendar"!==L&&zs.setDataListView(M,L)},[L,N,M]);const O=e=>{N||(F(e),"calendar"!==e&&zs.setDataListView(M,e)),E?.(e)},z=c.jsxs("div",{className:"flex items-center border border-border/60 rounded-md p-0.5 bg-muted/30",children:[c.jsx(bl,{variant:"card"===I?"default":"ghost",size:"sm",onClick:()=>O("card"),className:"h-8 px-2.5",title:"Card view",children:c.jsx(Vf,{className:"h-3.5 w-3.5"})}),c.jsx(bl,{variant:"calendar"===I?"default":"ghost",size:"sm",onClick:()=>O("calendar"),className:"h-8 px-2.5",title:"Calendar view",children:c.jsx(Hp,{className:"h-3.5 w-3.5"})})]}),B=R?t.filter(e=>e.name.toLowerCase().includes(R.toLowerCase())||e.description?.toLowerCase().includes(R.toLowerCase())):t,$=sl("grid gap-4",k.default&&{1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5",6:"grid-cols-6"}[k.default],k.md&&{1:"md:grid-cols-1",2:"md:grid-cols-2",3:"md:grid-cols-3",4:"md:grid-cols-4",5:"md:grid-cols-5",6:"md:grid-cols-6"}[k.md],k.lg&&{1:"lg:grid-cols-1",2:"lg:grid-cols-2",3:"lg:grid-cols-3",4:"lg:grid-cols-4",5:"lg:grid-cols-5",6:"lg:grid-cols-6"}[k.lg]);return c.jsxs("div",{children:[(i||o)&&c.jsxs("div",{className:"space-y-1",children:[i&&c.jsx("h3",{className:"text-base font-semibold text-foreground",children:i}),o&&c.jsx("p",{className:"text-xs text-muted-foreground",children:o})]}),c.jsxs("div",{className:"flex items-center gap-2.5",children:[s&&c.jsx(_l,{placeholder:r,value:R,onChange:e=>{return t=e.target.value,T(t),void y?.(t);var t},className:"h-9 text-sm flex-1 max-w-sm"}),P&&z,h&&f&&c.jsx(bl,{size:"sm",onClick:f,className:"h-9",children:"string"==typeof m?m:m||"Create"})]}),a&&c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:C||a.message}),n&&c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),c.jsx("span",{className:"text-muted-foreground",children:S})]})}),!n&&!a&&0===B.length&&c.jsx("div",{className:"py-12 text-center text-muted-foreground",children:j}),!n&&B.length>0&&c.jsx(c.Fragment,{children:"calendar"===I&&A?A():"card"===I?c.jsx(zP,{items:B,gridColsClass:$,renderItem:w,showActions:u,customActions:b,onEdit:x,onDelete:v,onItemClick:g,badges:d,stats:l}):c.jsx(BP,{items:B,renderItem:w,showActions:u,customActions:b,onEdit:x,onDelete:v,onItemClick:g,badges:d,stats:l})})]})}function UP(e){return{id:e.id,...void 0!==e.tenant_id&&{tenant_id:e.tenant_id},name:e.name,address_type:e.address_type,street:e.street??null,city:e.city??null,state:e.state??null,postal_code:e.postal_code??null,country:e.country??null,is_default:e.is_default,notes:e.notes??null,created_at:e.created_at,updated_at:e.updated_at}}class VP{config;constructor(e){this.config=e}getEndpoint(){return this.config.endpoints?.["company-addresses"]||"/api/v1/company-addresses"}async fetchCompanyAddresses(e){const{apiClient:t}=this.config,n=this.getEndpoint(),a=new URLSearchParams;void 0!==e?.skip&&a.append("skip",e.skip.toString()),void 0!==e?.limit&&a.append("limit",e.limit.toString()),e?.address_type&&a.append("address_type",e.address_type);const s=a.toString()?`${n}?${a.toString()}`:n,r=await t.get(s,{requiresAuth:!0});return{data:(r.items??[]).map(UP),pagination:{page:Math.floor((e?.skip||0)/(e?.limit||50))+1,pageSize:e?.limit??50,total:r.items?.length??0,totalPages:r.has_next?Math.ceil((r.items?.length??0)/(e?.limit||50))+1:Math.ceil((r.items?.length??0)/(e?.limit||50))}}}async fetchCompanyAddress(e){const{apiClient:t}=this.config,n=this.getEndpoint();return UP(await t.get(`${n}/${e}`,{requiresAuth:!0}))}async createCompanyAddress(e){const{apiClient:t}=this.config,n=this.getEndpoint();return UP(await t.post(n,e,{requiresAuth:!0}))}async updateCompanyAddress(e,t){const{apiClient:n}=this.config,a=this.getEndpoint();return UP(await n.put(`${a}/${e}`,t,{requiresAuth:!0}))}async deleteCompanyAddress(e){const{apiClient:t}=this.config,n=this.getEndpoint();await t.delete(`${n}/${e}`,{requiresAuth:!0})}}const qP="/api/v1/upload/",HP=()=>"undefined"!=typeof window&&Gs.get(gs)||"",GP={async uploadFile(e){const t=HP();if(!t)throw new Error("Authentication required. Please log in to upload files.");const n=new FormData;n.append("file",e);const a=await fetch(`${qP}`,{method:"POST",body:n,headers:{Authorization:`Bearer ${t}`}});if(!a.ok){const e=await a.text();if(401===a.status)throw new Error("Authentication failed. Please log in again.");throw new Error(`Upload failed: ${e||a.statusText}`)}const s=await a.json();return s.url&&(s.url=(e=>{if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.startsWith("/"))return`${"".replace(/\/$/,"")}${e}`;return e})(s.url)),s},async uploadImage(e){if(!e.type.startsWith("image/"))throw new Error("File must be an image");return this.uploadFile(e)},async deleteFile(e){const t=HP();if(!t)throw new Error("Authentication required. Please log in to delete files.");const n=await fetch(`${qP}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!n.ok){const e=await n.text();if(401===n.status)throw new Error("Authentication failed. Please log in again.");throw new Error(`Delete failed: ${e||n.statusText}`)}}};class KP{config;apiClient;constructor(e){this.config=e,this.apiClient=e.apiClient}getEndpoint(e="attachments"){return this.config.endpoints?.[e]||{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}[e]}async getAttachmentsForEntity(e,t,n){const a=new URLSearchParams;n&&a.append("attachment_type",n);const s=`${this.getEndpoint("entityAttachments")}/${e}/${t}${a.toString()?`?${a.toString()}`:""}`;return await this.apiClient.get(s,{requiresAuth:!0})}async linkAttachment(e,t,n){await this.apiClient.post(`${this.getEndpoint("entityAttachments")}/${e}/${t}`,n,{requiresAuth:!0})}async unlinkAttachment(e,t,n){await this.apiClient.delete(`${this.getEndpoint("entityAttachments")}/${e}/${t}/${n}`,{requiresAuth:!0})}async setAttachments(e,t,n){return await this.apiClient.put(`${this.getEndpoint("entityAttachments")}/${e}/${t}`,n,{requiresAuth:!0})}async getProfilePhoto(e,t){return await this.apiClient.get(`${this.getEndpoint("profilePhoto")}/${e}/${t}/profile-photo`,{requiresAuth:!0})}async setProfilePhoto(e,t,n){return await this.apiClient.put(`${this.getEndpoint("profilePhoto")}/${e}/${t}/profile-photo`,n,{requiresAuth:!0})}async removeProfilePhoto(e,t){await this.apiClient.delete(`${this.getEndpoint("profilePhoto")}/${e}/${t}/profile-photo`,{requiresAuth:!0})}}class WP{static async getAnalytics(e){const t=new URLSearchParams;e?.start_date&&t.append("start_date",e.start_date),e?.end_date&&t.append("end_date",e.end_date);const n=t.toString(),a="/api/v1/dashboard/analytics"+(n?`?${n}`:"");return await Fs.get(a)}static async getEventAnalytics(e,t){const n=new URLSearchParams;t?.start_date&&n.append("start_date",t.start_date),t?.end_date&&n.append("end_date",t.end_date);const a=n.toString(),s=`/api/v1/dashboard/analytics/events/${e}${a?`?${a}`:""}`;return await Fs.get(s)}static async getRevenueAnalytics(e){const t=new URLSearchParams;e?.start_date&&t.append("start_date",e.start_date),e?.end_date&&t.append("end_date",e.end_date),e?.group_by&&t.append("group_by",e.group_by);const n=t.toString(),a="/api/v1/dashboard/analytics/revenue"+(n?`?${n}`:"");return await Fs.get(a)}static formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}static formatPercentage(e){return`${e>=0?"+":""}${e.toFixed(1)}%`}static formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}static getStatusColor(e){switch(e.toLowerCase()){case"active":case"published":case"confirmed":case"completed":return"default";case"draft":case"pending":return"outline";case"cancelled":case"failed":return"destructive";default:return"secondary"}}}const QP="/api/v1/shared/tags";class YP{config;constructor(e){this.config=e}async getOrCreateTags(e,t){const n={tag_names:e.filter(e=>e&&e.trim()),entity_type:t};return(await this.config.apiClient.post(`${QP}/get-or-create`,n,{requiresAuth:!0})).tag_ids}async searchTags(e){const t=new URLSearchParams;e.entity_type&&t.append("entity_type",e.entity_type),e.search&&t.append("search",e.search),void 0!==e.is_active&&t.append("is_active",String(e.is_active)),void 0!==e.skip&&t.append("skip",String(e.skip)),void 0!==e.limit&&t.append("limit",String(e.limit));const n=`${QP}${t.toString()?`?${t.toString()}`:""}`;return this.config.apiClient.get(n,{requiresAuth:!0})}async getEntityTags(e,t){return this.config.apiClient.get(`${QP}/entity/${e}/${t}`,{requiresAuth:!0})}async setEntityTags(e,t,n){const a={tag_ids:n};return this.config.apiClient.post(`${QP}/entity/${e}/${t}/tags`,a,{requiresAuth:!0})}async createTag(e){return this.config.apiClient.post(QP,e,{requiresAuth:!0})}async getTagById(e){return this.config.apiClient.get(`${QP}/${e}`,{requiresAuth:!0})}async updateTag(e,t){return this.config.apiClient.put(`${QP}/${e}`,t,{requiresAuth:!0})}async deleteTag(e){return this.config.apiClient.delete(`${QP}/${e}`,{requiresAuth:!0})}async getAvailableTagsForEntity(e,t,n,a){const s=new URLSearchParams;n&&s.append("search",n),a&&s.append("limit",String(a));const r=`${QP}/entity/${e}/${t}/available${s.toString()?`?${s.toString()}`:""}`;return this.config.apiClient.get(r,{requiresAuth:!0})}async manageEntityTags(e,t,n){const a={tag_names:n.filter(e=>e&&e.trim())};return this.config.apiClient.post(`${QP}/entity/${e}/${t}/manage`,a,{requiresAuth:!0})}}class XP{apiClient;baseUrl;constructor(e){this.apiClient=e.apiClient,this.baseUrl=e.baseUrl||"/api/v1"}async getAuditLogs(e){const t=new URLSearchParams;t.set("entity_type",e.entity_type),t.set("entity_id",e.entity_id),e.limit&&t.set("limit",e.limit.toString()),e.skip&&t.set("skip",e.skip.toString()),e.event_types?.length&&t.set("event_types",e.event_types.join(",")),e.severities?.length&&t.set("severities",e.severities.join(",")),e.user_email&&t.set("user_email",e.user_email),e.date_from&&t.set("start_date",e.date_from),e.date_to&&t.set("end_date",e.date_to),e.search&&t.set("search",e.search),e.sort_by&&t.set("sort_by",e.sort_by),e.sort_order&&t.set("sort_order",e.sort_order);const n=`${this.baseUrl}/audit/user-activity?${t.toString()}`;return await this.apiClient.get(n,{requiresAuth:!0})}async getEntityAuditLogs(e,t,n={}){const a=this.filtersToParams(e,t,n.filters||{},n.limit||50,n.skip||0,n.sortBy,n.sortOrder);return this.getAuditLogs(a)}filtersToParams(e,t,n,a=50,s=0,r,i){const o={entity_type:e,entity_id:t,limit:a,skip:s};return void 0!==n.eventTypes&&(o.event_types=n.eventTypes),void 0!==n.severities&&(o.severities=n.severities),void 0!==n.userEmail&&(o.user_email=n.userEmail),void 0!==n.dateFrom&&(o.date_from=n.dateFrom),void 0!==n.dateTo&&(o.date_to=n.dateTo),void 0!==n.search&&(o.search=n.search),void 0!==r&&(o.sort_by=r),void 0!==i&&(o.sort_order=i),o}}const ZP=p.createContext(null);function JP({children:e,config:t}){const n=p.useMemo(()=>new XP(t),[t.apiClient,t.baseUrl]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(ZP.Provider,{value:a,children:e})}function eA(e,t,n={},a={}){const{autoLoad:s=!0,limit:r=50}=a,i=function(){const e=p.useContext(ZP);if(!e)throw new Error("useAuditService must be used within AuditProvider");return e.service}(),o=p.useRef(a.sortBy),l=p.useRef(a.sortOrder),c=p.useRef(e),d=p.useRef(t),u=p.useRef(r),h=p.useRef(n);o.current=a.sortBy,l.current=a.sortOrder,c.current=e,d.current=t,u.current=r,h.current=n;const[m,f]=p.useState([]),[g,x]=p.useState(!1),[v,y]=p.useState(null),[b,w]=p.useState(!1),[S,j]=p.useState(0),C=p.useRef(0),k=p.useRef(!1),N=p.useRef(!1),_=p.useCallback(async(e=h.current,t=!1)=>{if(!N.current)try{N.current=!0,x(!0),y(null);const n=t?0:C.current,a={limit:u.current,skip:n,filters:e};void 0!==o.current&&(a.sortBy=o.current),void 0!==l.current&&(a.sortOrder=l.current);const s=await i.getEntityAuditLogs(c.current,d.current,a);f(e=>t?s.items:[...e,...s.items]),w(s.has_next),j(s.total),C.current=n+s.items.length}catch(GQ){const t=GQ instanceof Error?GQ.message:"Failed to load audit logs";y(t)}finally{N.current=!1,x(!1)}},[i]),E=p.useCallback(()=>{!N.current&&b&&_(h.current,!1)},[b,_]),P=p.useCallback(()=>{C.current=0,_(h.current,!0)},[_]);return p.useEffect(()=>{s&&!k.current&&(k.current=!0,_(h.current,!0))},[s,_]),{logs:m,loading:g,error:v,hasMore:b,total:S,loadLogs:_,loadMore:E,refresh:P}}function tA(e){const t=new URLSearchParams;for(const[n,a]of Object.entries(e))if(null!=a)if(Array.isArray(a)){const e=JSON.stringify(a);t.append(n,e)}else"object"==typeof a?t.append(n,JSON.stringify(a)):t.append(n,String(a));return t.toString().length}function nA(e,t={}){const{maxQueryStringSize:n=1500,alwaysPostForArrays:a=!1,sensitiveKeys:s=["password","token","secret","key","auth","credential"]}=t;if(0===Object.keys(e).length)return!1;if(Object.keys(e).some(e=>s.some(t=>e.toLowerCase().includes(t))))return!0;if(function(e){return Object.values(e).some(e=>Array.isArray(e)?e.length>5:"object"==typeof e&&null!==e)}(e)){if(a)return!0;return tA(e)>n}return tA(e)>n}const aA={create:{label:"Created",icon:jg,variant:"default",description:"Entity was created"},update:{label:"Updated",icon:fg,variant:"secondary",description:"Entity was modified"},delete:{label:"Deleted",icon:ax,variant:"destructive",description:"Entity was deleted"},read:{label:"Viewed",icon:Sf,variant:"outline",description:"Entity was accessed"},login:{label:"Login",icon:hx,variant:"default",description:"User logged in"},logout:{label:"Logout",icon:hx,variant:"outline",description:"User logged out"}},sA={low:{label:"Low",variant:"outline",icon:Ff},medium:{label:"Medium",variant:"secondary",icon:Qp},high:{label:"High",variant:"destructive",icon:ix},critical:{label:"Critical",variant:"destructive",icon:sf}};function rA({entityType:e,entityId:t,title:n="Audit Logs",description:a="Activity history for this entity",limit:s=50,showLoadMore:r=!0,className:i,loading:o=!1,error:l,onLoadMore:d,hasMore:u=!1,showFilters:h=!0,showRefresh:m=!0,onRefresh:g,filters:x,onFiltersChange:v,showSorting:y=!0,sorting:b,onSortingChange:w,logs:S}){const[j,C]=p.useState(new Set),[k,N]=p.useState(!1),[_,E]=p.useState(x||{}),[P,A]=p.useState(x||{}),[R,T]=p.useState(b||{field:"event_timestamp",direction:"desc"}),{logs:M,loading:D,hasMore:L,loadMore:F,refresh:I,loadLogs:O}=eA(e,t,_,{autoLoad:!S,limit:s,sortBy:R.field,sortOrder:R.direction}),z=void 0!==o?o:D,B=void 0!==u?u:L,$=S||M||[],U=p.useCallback(e=>{C(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),V=p.useCallback(()=>{g?g():S||I()},[g,S,I]),q=p.useCallback(e=>{A(t=>({...t,...e}))},[]),H=p.useCallback(()=>{E(P),N(!1),v&&v(P),!S&&O&&O(P,!0)},[P,v,S,O]),G=f.useRef(R);f.useEffect(()=>{const e=G.current.field!==R.field||G.current.direction!==R.direction;!S&&e&&(G.current=R,I())},[R,S,I]);const K=p.useCallback(()=>{const e={};A(e),E(e),N(!1),v&&v(e),!S&&O&&O(e,!0)},[v,S,O]),W=Object.values(_).some(e=>Array.isArray(e)?e.length>0:Boolean(e));return c.jsxs(Sl,{className:sl("w-full",i),children:[c.jsx(jl,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Qp,{className:"h-5 w-5"}),c.jsxs("div",{children:[c.jsx(Cl,{className:"text-lg",children:n}),c.jsx(kl,{children:a})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[h&&c.jsxs(wE,{open:k,onOpenChange:e=>{N(e),e&&A(_)},children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",size:"sm",className:"h-8",children:[c.jsx(Ef,{className:"h-4 w-4 mr-1"}),"Filters",W&&c.jsx(NC,{variant:"secondary",className:"ml-1 h-4 w-4 p-0 text-xs",children:"!"})]})}),c.jsx(jE,{className:"w-80",align:"end",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"font-medium",children:"Filter Audit Logs"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(bl,{variant:"ghost",size:"sm",onClick:K,className:"h-7 px-2 text-xs",children:"Clear"}),c.jsx(bl,{variant:"default",size:"sm",onClick:H,className:"h-7 px-3 text-xs",children:"Apply"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Event Types"}),c.jsxs(bx,{value:P.eventTypes&&P.eventTypes.length>0?P.eventTypes.join(","):"all-types",onValueChange:e=>{e&&""!==e&&q({eventTypes:"all-types"===e?[]:e.split(",")})},children:[c.jsx(Sx,{children:c.jsx(wx,{placeholder:"All event types"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"all-types",children:"All event types"}),c.jsx(Nx,{value:"create",children:"Created"}),c.jsx(Nx,{value:"update",children:"Updated"}),c.jsx(Nx,{value:"delete",children:"Deleted"}),c.jsx(Nx,{value:"read",children:"Viewed"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Severity"}),c.jsxs(bx,{value:P.severities&&P.severities.length>0?P.severities.join(","):"all-severities",onValueChange:e=>{e&&""!==e&&q({severities:"all-severities"===e?[]:e.split(",")})},children:[c.jsx(Sx,{children:c.jsx(wx,{placeholder:"All severities"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"all-severities",children:"All severities"}),c.jsx(Nx,{value:"low",children:"Low"}),c.jsx(Nx,{value:"medium",children:"Medium"}),c.jsx(Nx,{value:"high",children:"High"}),c.jsx(Nx,{value:"critical",children:"Critical"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"User Email"}),c.jsx(_l,{placeholder:"Filter by user email...",value:P.userEmail||"",onChange:e=>q({userEmail:e.target.value}),className:"h-8"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"From Date"}),c.jsx(_l,{type:"date",value:P.dateFrom||"",onChange:e=>q({dateFrom:e.target.value}),className:"h-8"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"To Date"}),c.jsx(_l,{type:"date",value:P.dateTo||"",onChange:e=>q({dateTo:e.target.value}),className:"h-8"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Search Description"}),c.jsx(_l,{placeholder:"Search in descriptions...",value:P.search||"",onChange:e=>q({search:e.target.value}),className:"h-8"})]})]})})]}),y&&c.jsxs(bx,{value:`${R.field}-${R.direction}`,onValueChange:e=>{const[t,n]=e.split("-"),a={field:t,direction:n};T(a),w&&w(a)},children:[c.jsx(Sx,{className:"w-48 h-8",children:c.jsx(wx,{placeholder:"Sort by..."})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"event_timestamp-desc",children:"Event Time (Newest)"}),c.jsx(Nx,{value:"event_timestamp-asc",children:"Event Time (Oldest)"}),c.jsx(Nx,{value:"event_type-asc",children:"Event Type (A-Z)"}),c.jsx(Nx,{value:"event_type-desc",children:"Event Type (Z-A)"}),c.jsx(Nx,{value:"severity-desc",children:"Severity (High-Low)"}),c.jsx(Nx,{value:"severity-asc",children:"Severity (Low-High)"}),c.jsx(Nx,{value:"user_email-asc",children:"User (A-Z)"}),c.jsx(Nx,{value:"user_email-desc",children:"User (Z-A)"}),c.jsx(Nx,{value:"description-asc",children:"Description (A-Z)"}),c.jsx(Nx,{value:"description-desc",children:"Description (Z-A)"})]})]}),m&&c.jsx(bl,{variant:"outline",size:"sm",onClick:V,disabled:o,className:"h-8",children:c.jsx(Ag,{className:sl("h-4 w-4",o&&"animate-spin")})})]})]})}),c.jsxs(Nl,{children:[l&&c.jsxs("div",{className:"flex items-center gap-2 p-4 text-sm text-destructive bg-destructive/10 rounded-md",children:[c.jsx(sf,{className:"h-4 w-4"}),l]}),c.jsx(iA,{logs:$,loading:z,expandedRows:j,onToggleRowExpansion:U}),r&&B&&!z&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx(bl,{variant:"outline",onClick:()=>{d?d():S||F()},children:"Load More"})})]})]})}function iA({logs:e,loading:t,expandedRows:n,onToggleRowExpansion:a}){const s=e||[];return t?c.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>c.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[c.jsx(Tv,{className:"h-8 w-8 rounded"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(Tv,{className:"h-4 w-3/4"}),c.jsx(Tv,{className:"h-3 w-1/2"})]}),c.jsx(Tv,{className:"h-6 w-16"})]},t))}):0===s.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx(Qp,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Audit Logs"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"There are no audit logs available for this entity yet. Activity will appear here as actions are performed."})]}):c.jsx("div",{className:"h-[600px] overflow-y-auto",children:c.jsx("div",{className:"space-y-2",children:s.map(e=>c.jsx(oA,{log:e,expanded:n.has(e.event_id),onToggleExpansion:()=>a(e.event_id)},e.event_id))})})}function oA({log:e,expanded:t,onToggleExpansion:n}){const a=aA[e.event_type]||{label:e.event_type,variant:"outline"},s=sA[e.severity]||{label:e.severity,variant:"outline"},r=a.icon,i=s.icon,o=e.old_values||e.new_values||e.changed_fields||e.metadata;return c.jsxs("div",{className:"border rounded-lg bg-card",children:[c.jsxs("div",{className:"flex items-center gap-4 p-4 cursor-pointer hover:bg-muted/50 transition-colors",onClick:o?n:void 0,children:[c.jsx("div",{className:"flex-shrink-0",children:r&&c.jsx("div",{className:"p-2 bg-muted rounded-md",children:c.jsx(r,{className:"h-4 w-4"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx("p",{className:"text-sm font-medium",children:e.description}),c.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[c.jsx(NC,{variant:a.variant,className:"text-xs",children:a.label}),c.jsxs(NC,{variant:s.variant,className:"text-xs",children:[i&&c.jsx(i,{className:"h-3 w-3 mr-1"}),s.label]})]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(hf,{className:"h-3 w-3"}),e.event_timestamp?(e=>{try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(","," at")}catch{return e}})(e.event_timestamp):"Unknown time"]}),e.ip_address&&c.jsxs("span",{className:"truncate",children:["IP: ",e.ip_address]})]}),e.user_email&&c.jsxs("span",{className:"truncate",children:["by ",e.user_email]})]})]}),o&&c.jsx(bl,{variant:"ghost",size:"sm",className:"flex-shrink-0 p-1",children:t?c.jsx(Xp,{className:"h-4 w-4"}):c.jsx(Jp,{className:"h-4 w-4"})})]}),t&&o&&c.jsxs("div",{className:"px-4 pb-4 border-t bg-muted/20",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.old_values&&Object.keys(e.old_values).length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-2 text-destructive",children:"Before"}),c.jsx("pre",{className:"text-xs bg-destructive/10 p-2 rounded border overflow-x-auto",children:JSON.stringify(e.old_values,null,2)})]}),e.new_values&&Object.keys(e.new_values).length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-2 text-green-700",children:"After"}),c.jsx("pre",{className:"text-xs bg-green-50 p-2 rounded border overflow-x-auto",children:JSON.stringify(e.new_values,null,2)})]})]}),e.changed_fields&&e.changed_fields.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Changed Fields"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:e.changed_fields.map(e=>c.jsx(NC,{variant:"outline",className:"text-xs",children:e},e))})]}),e.metadata&&Object.keys(e.metadata).length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Additional Details"}),c.jsx("pre",{className:"text-xs bg-muted p-2 rounded border overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]})]})}function lA({title:e,value:t,change:n,changeType:a="neutral",icon:s,description:r,className:i=""}){const o=Us();return c.jsxs(Sl,{className:i,children:[c.jsxs(jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(Cl,{className:sl("font-medium",o.textSizeCardDescription),children:e}),s]}),c.jsxs(Nl,{children:[c.jsx("div",{className:sl("font-bold",o.textSizeCardTitle),children:t}),void 0!==n&&c.jsxs("div",{className:sl("flex items-center",o.textSizeSmall,(()=>{switch(a){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-muted-foreground"}})()),children:[(()=>{switch(a){case"positive":return c.jsx(rx,{className:"h-4 w-4"});case"negative":return c.jsx(sx,{className:"h-4 w-4"});default:return null}})(),c.jsxs("span",{className:"ml-1",children:[n>0?"+":"",n,"% from last month"]})]}),r&&c.jsx("p",{className:sl("text-muted-foreground mt-1",o.textSizeSmall),children:r})]})]})}function cA({title:e="Recent Activity",activities:t,maxItems:n=10,className:a=""}){const s=Us(),r=e=>{switch(e){case"success":return c.jsx(rf,{className:"h-4 w-4 text-green-600"});case"warning":return c.jsx(sf,{className:"h-4 w-4 text-yellow-600"});case"error":return c.jsx(sf,{className:"h-4 w-4 text-red-600"});default:return c.jsx(Sp,{className:"h-4 w-4 text-blue-600"})}},i=t.slice(0,n);return c.jsxs(Sl,{className:a,children:[c.jsx(jl,{children:c.jsx(Cl,{className:sl("font-medium",s.textSizeCardDescription),children:e})}),c.jsx(Nl,{children:c.jsx("div",{className:s.spacingFormSection,children:i.map(e=>c.jsxs("div",{className:sl("flex items-start",s.gapCard),children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r(e.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:sl("font-medium",s.textSize),children:e.title}),c.jsx("p",{className:sl("text-muted-foreground",s.textSizeSmall),children:e.description}),c.jsxs("div",{className:sl("flex items-center mt-1",s.gapCard),children:[c.jsx("span",{className:sl("text-muted-foreground",s.textSizeSmall),children:e.timestamp}),e.user&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:sl("text-muted-foreground",s.textSizeSmall),children:""}),c.jsx("span",{className:sl("text-muted-foreground",s.textSizeSmall),children:e.user})]})]})]})]},e.id))})})]})}class dA extends p.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?c.jsx(TN,{open:!0,onOpenChange:()=>{},children:c.jsxs("div",{className:"p-6 text-center",children:[c.jsx(sf,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Something went wrong"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"The command palette encountered an error. Please try refreshing the page."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}}function uA({dataType:e,scope:t,onSelect:n,dataQueries:a}){const s=Yt();return 0!==e.data.length||e.isLoading||e.isError?c.jsx(FN,{heading:`${e.name} ${t===e.scope?"(scoped)":""}`,children:e.isError?c.jsxs(ON,{disabled:!0,className:"flex flex-col items-start gap-2 p-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-4 rounded-full bg-red-100 flex items-center justify-center",children:c.jsx("span",{className:"text-red-600 text-xs",children:"!"})}),c.jsxs("span",{className:"text-sm text-red-600 font-medium",children:["Failed to load ",e.name.toLowerCase()]})]}),c.jsx("div",{className:"text-xs text-muted-foreground ml-6",children:e.error instanceof Error?e.error.message:"Network error or server unavailable"}),c.jsx("button",{onClick:t=>{t.stopPropagation();const n=a[e.key];n?.refetch&&n.refetch()},className:"ml-6 text-xs text-blue-600 hover:text-blue-800 underline",children:"Try again"})]}):e.isLoading?c.jsxs(ON,{disabled:!0,children:[c.jsx(Kf,{className:"mr-2 h-4 w-4 animate-spin"}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Searching ",e.name.toLowerCase(),"..."]})]}):e.data.map(t=>e.renderItem(t,()=>n(()=>{if(e.navigateTo){const n=String(t?.id??"");let a=e.navigateTo;a.includes("$id")||a.includes(":id")?a=a.replace(/\$id|:id/g,n):n&&(a=a.endsWith("/")?`${a}${n}`:`${a}/${n}`),s({to:a})}})))},e.key):null}function hA({search:e,onValueChange:t,scope:n,autocomplete:a,isOnline:s}){return c.jsxs("div",{className:"relative",children:[c.jsx(MN,{placeholder:"all"===n?"Type a command or search... (try: users:, employees:, bookings:, nav:)":`Searching in ${n}...`,value:e,onValueChange:t,className:"w-full pr-20"}),c.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 right-0 flex items-center gap-2 pointer-events-none z-10",children:[!s&&c.jsxs(NC,{variant:"destructive",className:"text-[10px] px-3 py-1.5 leading-none bg-red-100 text-red-700 shadow-sm font-medium rounded-lg ring-1 ring-red-100/20",children:[c.jsx(gx,{className:"h-3 w-3 mr-1"}),"Offline"]}),a&&a!==e&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-3 py-1.5 shadow-sm rounded-md border border-gray-200/60",children:[c.jsx("span",{className:"text-xs text-gray-700 font-medium",children:a}),c.jsx("kbd",{className:"text-[9px] text-gray-700 bg-gray-50 ml-1 border border-gray-200 rounded-sm px-2 py-0.5 font-mono font-medium shadow-sm",children:"Tab"})]})}),"all"!==n&&!(a&&a!==e)&&s&&c.jsx(NC,{variant:"secondary",className:"text-[10px] px-3 py-1.5 leading-none bg-gradient-to-r from-violet-100 to-purple-100 text-violet-700 shadow-sm font-medium rounded-lg ring-1 ring-violet-100/20 hover:scale-105 transition-transform duration-200",children:n})]})]})}function mA({isOnline:e,dataTypes:t}){return c.jsx(LN,{children:c.jsx("div",{className:"py-6 text-center text-sm",children:e?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-muted-foreground",children:"No results found."}),c.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Try using scope modifiers like"," ",c.jsx("code",{className:"text-primary",children:"nav:"}),","," ",c.jsx("code",{className:"text-primary",children:"action:"}),","," ",t.slice(0,3).map((e,n)=>c.jsxs(p.Fragment,{children:[c.jsxs("code",{className:"text-primary",children:[e.key,":"]}),n<Math.min(2,t.length-1)&&", "]},e.key)),t.length>3&&", or more..."]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[c.jsx(gx,{className:"h-5 w-5 text-red-500"}),c.jsx("p",{className:"text-red-600 font-medium",children:"You're offline"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Check your internet connection to search for data"})]})})})}function pA({search:e,scope:t,isOnline:n,recentSearches:a,suggestions:s,filteredNavigation:r,filteredActions:i,filteredDataTypes:o,dataTypes:l,dataQueries:d,onRecentSelect:u,onClearRecentSearches:h,onSearchChange:m,onSelect:f}){const g=Yt();return c.jsxs(DN,{children:[c.jsx(mA,{isOnline:n,dataTypes:l}),!e&&a.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs(FN,{heading:"Recent Searches",children:[c.jsxs("div",{className:"flex items-center justify-between px-2 mb-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Your recent searches"}),c.jsx("button",{onClick:h,className:"text-xs text-muted-foreground hover:text-foreground",children:"Clear"})]}),a.map((e,t)=>c.jsxs(ON,{value:e.query,onSelect:()=>u(e),children:[c.jsx(Mf,{className:"mr-2 h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm",children:e.query}),e.scope&&"all"!==e.scope&&c.jsx(NC,{variant:"outline",className:"ml-2 text-[10px]",children:e.scope})]},`recent-${t}`))]}),c.jsx(IN,{})]}),!e&&s.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(FN,{heading:"Suggestions",children:s.map((e,t)=>c.jsxs(ON,{value:e.text,onSelect:()=>m(e.text),children:[c.jsx(Ig,{className:"mr-2 h-4 w-4 text-muted-foreground"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-mono",children:e.text}),c.jsx("span",{className:"text-xs text-muted-foreground",children:e.description})]})]},`suggestion-${t}`))}),c.jsx(IN,{})]}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(FN,{heading:"Navigation",children:r.map(e=>{const t=e.icon,n=[e.parentLabel,e.description].filter(Boolean).join("  ");return c.jsxs(ON,{value:e.value,onSelect:()=>f(()=>g({to:e.path})),className:"flex items-center gap-3",children:[c.jsx(t,{className:"h-4 w-4 flex-shrink-0"}),c.jsxs("div",{className:"flex flex-1 flex-col",children:[c.jsx("span",{className:"text-sm font-medium text-foreground",children:e.label}),n?c.jsx("span",{className:"text-xs text-muted-foreground",children:n}):null]}),e.shortcut?c.jsx(zN,{children:e.shortcut}):null]},e.value)})}),(i.length>0||o.some(e=>e.data.length>0))&&c.jsx(IN,{})]}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(FN,{heading:"Actions "+("actions"===t?"(scoped)":""),children:i.map(e=>{const t=e.icon;return c.jsxs(ON,{value:e.value,onSelect:()=>f(e.action),children:[c.jsx(t,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:e.label})]},e.value)})}),o.some(e=>e.data.length>0)&&c.jsx(IN,{})]}),o.map(e=>c.jsx(uA,{dataType:e,scope:t,onSelect:f,dataQueries:d},e.key)),!e&&c.jsx("div",{className:"border-t p-3 bg-muted/50",children:c.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.jsx("span",{className:"font-medium",children:"Pro tip:"})," Use scope modifiers like ",c.jsx("code",{className:"text-primary",children:"nav:"}),","," ",c.jsx("code",{className:"text-primary",children:"action:"}),","," ",l.slice(0,3).map((e,t)=>c.jsxs(p.Fragment,{children:[c.jsxs("code",{className:"text-primary",children:[e.key,":"]}),t<Math.min(2,l.length-1)&&", "]},e.key)),l.length>3&&", or more..."," to filter results"]})})]})}function fA(){return"undefined"!=typeof navigator&&/Mac|iPhone|iPad|iPod/.test(navigator.userAgent)?"":"Ctrl"}function gA({open:e,onOpenChange:t,dataTypes:n,userId:a,navigationItems:s,quickActions:r}){const i=Yt(),o=function(){const[e,t]=p.useState("undefined"==typeof navigator||navigator.onLine);return p.useEffect(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e}(),[l,d]=p.useState(""),[u,h]=p.useState("all"),[m,f]=p.useState([]),[g,x]=p.useState(""),[v,y]=p.useState(""),b=p.useCallback(()=>a?`command-palette-recent-${a}`:"command-palette-recent",[a]);p.useEffect(()=>{const e=setTimeout(()=>{y(l)},300);return()=>clearTimeout(e)},[l]),p.useEffect(()=>{const e=l.toLowerCase().trim();n.some(t=>e===`${t.key}:`)&&v!==l&&y(l)},[l,n,v]),p.useEffect(()=>{if(e){const e=b(),t=Gs.get(e)||[];f(t)}},[e,b]),p.useEffect(()=>{const e=l.toLowerCase();if(e.startsWith("nav:"))h("navigation");else if(e.startsWith("action:"))h("actions");else{const t=n.find(t=>e.startsWith(`${t.key}:`));h(t?t.scope:"all")}},[l,n]);const w=p.useMemo(()=>{const e=l.toLowerCase(),t=["nav:","action:"];for(const n of t)if(e.startsWith(n))return l.slice(n.length).trim();for(const a of n){const t=`${a.key}:`;if(e.startsWith(t))return l.slice(t.length).trim()}return l.trim()},[l,n]),S=p.useCallback((e,t)=>{if(!e.trim())return;const n=[{query:e,timestamp:Date.now(),scope:t},...m.filter(t=>t.query!==e)].slice(0,5);f(n);const a=b();Gs.set(a,n)},[m,b]),j=p.useMemo(()=>{const e=v.toLowerCase(),t=["nav:","action:"];for(const n of t)if(e.startsWith(n))return v.slice(n.length).trim();for(const a of n){const t=`${a.key}:`;if(e.startsWith(t))return v.slice(t.length).trim()}return v.trim()},[v,n]),[C,k]=p.useState({});p.useEffect(()=>{(async()=>{const e={};for(const a of n)a.fetcher&&u===a.scope&&o?e[a.key]={data:[],isLoading:!0,error:null,isError:!1}:a.fetcher&&(e[a.key]={data:[],isLoading:!1,error:null,isError:!1});k(e);for(const a of n)if(a.fetcher&&u===a.scope&&o){const e=j.trim();if(!e){k(e=>({...e,[a.key]:{data:[],isLoading:!1,error:null,isError:!1}}));continue}try{const t=await a.fetcher(e);k(e=>({...e,[a.key]:{data:t.slice(0,10),isLoading:!1,error:null,isError:!1}}))}catch(t){k(e=>({...e,[a.key]:{data:[],isLoading:!1,error:t,isError:!0}}))}}})()},[n,j,u,o]);const N=p.useMemo(()=>s??function(){const e=fA();return[{icon:Df,label:"Home",value:"nav-home",path:"/",shortcut:`${e}H`},{icon:Uf,label:"Dashboard",value:"nav-dashboard",path:"/dashboard",shortcut:`${e}D`},{icon:px,label:"Users",value:"nav-users",path:"/users",shortcut:`${e}U`},{icon:Og,label:"Settings",value:"nav-settings",path:"/settings",shortcut:`${e},`}]}(),[s]),_=p.useMemo(()=>r??function(e){return[{icon:hx,label:"Add New User",value:"action-add-user",action:()=>{e&&e({to:"/users?action=create"})}},{icon:jf,label:"View Reports",value:"action-reports",action:()=>{}}]}(i),[r,i]),E=p.useMemo(()=>n.map(e=>{const t=C[e.key],n=t?.data||[],a=t?.isLoading||!1,s=t?.error,r=t?.isError||!1;return{...e,data:u===e.scope||"all"===u&&!w?n.slice(0,10):[],isLoading:(u===e.scope||"all"===u&&!w)&&a,error:u===e.scope||"all"===u&&!w?s:null,isError:(u===e.scope||"all"===u&&!w)&&r}}),[n,C,u,w]),P=p.useMemo(()=>{if("all"!==u&&"navigation"!==u)return[];if("navigation"===u&&!w)return N;if(!w)return N;const e=w.toLowerCase();return N.filter(t=>{if([t.label,t.description,t.parentLabel,t.path,t.value,...t.keywords||[]].filter(Boolean).join(" ").toLowerCase().includes(e))return!0;if(t.keywords){if(t.keywords.some(t=>t.toLowerCase().includes(e)||e.includes(t.toLowerCase())))return!0}return!1})},[w,u,N]),A=p.useMemo(()=>{if("all"!==u&&"actions"!==u)return[];if("actions"===u&&!w)return _;if(!w&&"all"===u)return _;const e=w.toLowerCase();return _.filter(t=>{if(t.label.toLowerCase().includes(e))return!0;if(t.keywords){if(t.keywords.some(t=>t.toLowerCase().includes(e)||e.includes(t.toLowerCase())))return!0}return!!t.value.toLowerCase().includes(e)})},[w,u,_]);p.useEffect(()=>{if(!l)return void x("");const e=l.toLowerCase(),t=[{prefix:"nav:",full:"nav:"},{prefix:"action:",full:"action:"},...n.map(e=>({prefix:`${e.key}:`,full:`${e.key}:`}))];for(const{prefix:n,full:s}of t)if(n.startsWith(e)&&e.length<n.length)return void x(s);if(!u||"all"===u||"navigation"===u)for(const n of N){if(n.label.toLowerCase().startsWith(e)&&e.length>=2)return void x(n.label)}const a=n.find(e=>e.scope===u);if(a&&C[a.key]&&j.length>=2){const e=(C[a.key].data||[]).filter(e=>a.getSearchValue(e).toLowerCase().startsWith(j.toLowerCase()));if(1===e.length){const t=e[0],n=a.getSearchValue(t),s=l.slice(0,l.length-j.length);return void x(s+n)}}x("")},[l,j,u,N,n,C]),p.useEffect(()=>{const t=e=>{"Tab"===e.key&&g&&g!==l&&(e.preventDefault(),d(g),y(g))};if(e)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,g,l]);const R=p.useMemo(()=>l.length>0?[]:[{text:"nav:dashboard",description:"Navigate to dashboard"},{text:"action:add",description:"Show add actions"},...n.slice(0,4).map(e=>({text:`${e.key}:example`,description:`Search ${e.name.toLowerCase()} for 'example'`}))],[l,n]);return c.jsx(dA,{children:c.jsxs(TN,{open:e,onOpenChange:t,children:[c.jsx(hA,{search:l,onValueChange:d,scope:u,autocomplete:g,isOnline:o}),c.jsx(pA,{search:l,scope:u,isOnline:o,recentSearches:m,suggestions:R,filteredNavigation:P,filteredActions:A,filteredDataTypes:E,dataTypes:n,dataQueries:C,onRecentSelect:e=>{d(e.query)},onClearRecentSearches:()=>{f([]);const e=b();Gs.remove(e)},onSearchChange:d,onSelect:e=>{S(l,u),d(""),t(!1),e()}})]})})}function xA({children:e}){return c.jsx(_C,{children:e})}function vA({shortcut:e}){const t="undefined"!=typeof window&&/Mac|iPhone|iPod|iPad/i.test(navigator.platform),n=Us();return c.jsxs("div",{className:sl("flex items-center gap-1.5 text-muted-foreground flex-shrink-0",n.textSizeSmall),children:[c.jsxs("span",{className:"text-muted-foreground whitespace-nowrap",children:[e.label,":"]}),c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.metaOrCtrl&&c.jsx(xA,{children:t?"":"Ctrl"}),e.shift&&c.jsx(xA,{children:"Shift"}),e.keys.map((e,t)=>c.jsx(xA,{children:"Enter"===e?"":"Delete"===e||"Backspace"===e?"":"Escape"===e?"Esc":e},t))]})]})}function yA({open:e,onClose:t,title:n,children:a,footer:s,maxWidth:r="800px",showClearButton:i=!0,showCancelButton:o=!0,showSubmitButton:l=!0,loading:d=!1,onSubmit:u,onClear:h,onCancel:m,className:g,contentClassName:x,shortcuts:v=[],showShortcutsHint:y=!0,formSelector:b,autoSubmitShortcut:w=!0,autoClearShortcut:S=!0,onEscape:j,preventEscClose:C=!1}){const k=Us(),N=Vs(),_=p.useRef(null),E=Array.isArray(s),P=E?s:null,A=E?null:s,R=p.useCallback(()=>{if(u)return void u();let e=null;b?"object"==typeof b&&"current"in b?e=b.current:"string"==typeof b&&(e=document.querySelector(b)):_.current&&(e=_.current.querySelector("form")),e&&e.requestSubmit()},[u,b]),T=C?[]:[{label:"Close",keys:["Escape"]}],M=[];(w||u)&&M.push({label:"Submit",keys:["Enter"],metaOrCtrl:!0}),S&&h&&M.push({label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0});const D=[...T,...M,...v||[]];return p.useEffect(()=>{if(!e)return;const n=e=>{if("Escape"===e.key)return C?(e.preventDefault(),void e.stopPropagation()):j?(j(e),e.preventDefault(),void e.stopPropagation()):(e.preventDefault(),void(d||t()));if((w||u)&&("Enter"===e.key||"Enter"===e.code)&&(e.metaKey||e.ctrlKey)&&!e.shiftKey)return e.preventDefault(),void(d||R());if(S&&h&&(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(d||h())}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,d,t,w,S,h,R,j,C]),e?Zt.createPortal(c.jsx("div",{className:"fixed !top-0 !left-0 !right-0 !bottom-0 z-50 bg-background/80 backdrop-blur-sm !m-0 !p-0",style:{margin:0,padding:0,top:0,left:0,right:0,bottom:0},children:c.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 z-50 h-screen w-screen bg-background",style:{margin:0,padding:0,top:0,left:0,right:0,bottom:0},children:c.jsxs("div",{className:`flex flex-col h-full ${g||""}`,children:[c.jsx("div",{className:"flex-shrink-0 border-b bg-background w-full",children:c.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-2",children:[c.jsx("h2",{className:"text-lg font-semibold text-foreground truncate",children:n}),c.jsxs(bl,{variant:"ghost",size:"sm",onClick:t,className:"h-6 w-6 p-0 hover:bg-accent flex-shrink-0",disabled:d,title:"Close (Esc)",children:[c.jsx(xx,{className:"h-3 w-3"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})}),c.jsx(fP,{className:"flex-1 min-h-0 bg-muted/30",children:c.jsx("div",{ref:_,className:`mx-auto w-full h-full ${x||""}`,style:{maxWidth:r,marginTop:"8px"},children:a})}),A||(P||i||o||l)&&c.jsx("div",{className:"flex-shrink-0 border-t bg-background",children:c.jsx("div",{className:sl(N?"px-4":"px-6","py-3"),children:c.jsxs("div",{className:sl("flex items-center justify-between max-w-4xl mx-auto",k.gapButtonGroup),children:[y&&D.length>0&&c.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded-md bg-muted/50 border border-border/50",children:[c.jsx(zf,{className:sl("text-muted-foreground flex-shrink-0",k.iconSizeSmall)}),c.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:D.map((e,t)=>c.jsxs(f.Fragment,{children:[c.jsx(vA,{shortcut:e}),t<D.length-1&&c.jsx("span",{className:sl("text-muted-foreground/50 flex-shrink-0 mx-0.5",k.textSizeSmall),children:""})]},t))})]}),c.jsx("div",{className:sl("flex",k.gapButtonGroup),children:P?P.map((e,t)=>c.jsx(bl,{type:e.type||"button",variant:e.variant||"default",onClick:e.onClick,disabled:e.disabled??d,className:sl(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted",e.className),children:e.label},t)):c.jsxs(c.Fragment,{children:[i&&h&&c.jsx(bl,{type:"button",variant:"outline",onClick:h,disabled:d,className:sl(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted"),children:"Clear"}),o&&m&&c.jsx(bl,{type:"button",variant:"outline",onClick:m,disabled:d,className:sl(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted"),children:"Cancel"}),l&&u&&c.jsx(bl,{type:"submit",variant:"default",onClick:e=>{e?.preventDefault(),u()},disabled:d,className:sl(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted",d&&"cursor-not-allowed"),children:"Submit"})]})})]})})})]})})}),document.body):null}function bA({open:e,onOpenChange:t,title:n,description:a,confirmAction:s,cancelAction:r,footer:i,className:o,headerClassName:l,footerClassName:d,confirmText:u,confirmTextLabel:h="Type to confirm",confirmTextPlaceholder:m}){const[f,g]=p.useState(""),x=p.useId();p.useEffect(()=>{e||g("")},[e]);const v=()=>{if(r?.onClick){const e=r.onClick();e instanceof Promise?e.finally(()=>{r.disabled||t(!1)}):r.disabled||t(!1)}else t(!1)},y=()=>{if(s?.onClick){s.onClick()instanceof Promise||s.disabled||t(!1)}else t(!1)},b={label:"Cancel",variant:"outline",onClick:v,...r},w=!u||f.toLowerCase()===u.toLowerCase(),S={label:"Confirm",variant:"default",onClick:y,...s},j=S.disabled||S.loading||!!u&&!w,C=p.useRef(null),k=p.useRef(null),{isCompact:N}=$s(),_={...Us(),paddingCell:N?"px-2 py-1.5":"px-3 py-2"};return p.useEffect(()=>{if(!e)return;const t=e=>{if(!("Enter"!==e.key||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)){const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;const n=document.activeElement;if((n===C.current||C.current?.contains(n)||"BUTTON"===n.tagName&&n.hasAttribute("data-cancel-button")||n.closest('[role="alertdialog"]')&&n.closest("[data-cancel-button]"))&&b){if(!(b.disabled||b.loading||S?.loading))return e.preventDefault(),e.stopPropagation(),void v()}if(S?.disabled||S?.loading)return;e.preventDefault(),e.stopPropagation(),y()}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,S,b]),c.jsx(Gb,{open:e,onOpenChange:t,children:c.jsxs(Qb,{className:sl(_.paddingContainer,o),children:[c.jsxs(Yb,{className:sl(_.spacingFormItem,l),children:[c.jsx(Zb,{className:sl(N?"text-base":"text-lg","font-semibold"),children:n}),a&&c.jsx(Jb,{className:sl(_.textSizeSmall,"[&>p]:mb-0"),children:a})]}),u&&c.jsxs("div",{className:sl(_.spacingFormItem,"px-6"),children:[c.jsx(Fl,{htmlFor:x,className:sl(_.textSizeSmall),children:h}),c.jsx(_l,{id:x,type:"text",value:f,onChange:e=>g(e.target.value),placeholder:m||`Type "${u}" to confirm`,className:sl(_.inputHeight,"mt-1.5"),autoFocus:!0})]}),void 0!==i?c.jsx(Xb,{className:sl(_.gapButtonGroup,d),children:i}):c.jsxs(Xb,{className:sl(_.gapButtonGroup,d),children:[b&&c.jsx(tw,{asChild:!0,children:c.jsx(bl,{ref:C,"data-cancel-button":"true",variant:b.variant||"outline",disabled:b.disabled||b.loading||S?.loading,onClick:v,className:sl(_.buttonHeightSmall,_.paddingCell,_.textSizeSmall,"font-medium",b.className),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[b?.loading?c.jsx(Kf,{className:sl(_.iconSizeSmall,"animate-spin")}):c.jsx(xx,{className:_.iconSizeSmall}),c.jsx("span",{children:b.loading?"Loading...":b.label})]})})}),S&&c.jsx(ew,{asChild:!0,children:c.jsx(bl,{ref:k,variant:S.variant||"default",disabled:j,onClick:y,className:sl(_.buttonHeightSmall,_.paddingCell,_.textSizeSmall,"font-medium",S.className),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[S?.loading?c.jsx(Kf,{className:sl(_.iconSizeSmall,"animate-spin")}):"delete"===S?.type||"destructive"===S?.variant?c.jsx(ax,{className:_.iconSizeSmall}):c.jsx(Yp,{className:_.iconSizeSmall}),c.jsx("span",{children:S.loading?"Loading...":S.label})]})})})]})]})})}const wA=f.forwardRef(({className:e,...t},n)=>{const a=Us();return c.jsx(bl,{ref:n,className:sl(a.buttonHeightSmall,a.paddingCell,a.textSizeSmall,"font-medium",e),...t})});function SA({open:e,onOpenChange:t,title:n="Session Expired",description:a="Your session has timed out. Please log in again to continue your work.",initialUsername:s="",onBeforeLogin:r,onLogin:i,onAfterLogin:o}){const l=p.useRef(null),[d,u]=p.useState(!1),[h,m]=p.useState({username:"",password:""}),[f,g]=p.useState({}),{isCompact:x}=$s(),v=Us();p.useEffect(()=>{if(e&&(m({username:s||"",password:""}),g({}),s)){const e=setTimeout(()=>l.current?.focus(),100);return()=>clearTimeout(e)}},[e,s]);return c.jsx(ub,{open:e,onOpenChange:t,modal:!0,children:c.jsxs(pb,{className:sl("sm:max-w-md",v.paddingContainer),style:{zIndex:9999},onEscapeKeyDown:e=>e.preventDefault(),onPointerDownOutside:e=>e.preventDefault(),children:[c.jsxs(fb,{className:v.spacingFormItem,children:[c.jsxs("div",{className:sl("flex items-center gap-3 mb-2",v.gapFormItem),children:[c.jsx("div",{className:sl("rounded-full bg-destructive/10 flex items-center justify-center",x?"h-10 w-10":"h-12 w-12"),children:c.jsx(sf,{className:sl("text-destructive",x?"h-5 w-5":"h-6 w-6")})}),c.jsx(xb,{className:sl(x?"text-lg":"text-xl","font-semibold"),children:n})]}),c.jsx(vb,{className:v.textSizeSmall,children:a})]}),c.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g({});const n={};if(h.username.trim()||(n.username="Username or email is required"),h.password||(n.password="Password is required"),Object.keys(n).length>0)g(n);else{u(!0);try{r&&await r(),await i(h),o&&await o(),Uk({title:"Welcome back!",description:"You have been successfully logged in."}),m({username:"",password:""}),t(!1)}catch(a){const e=a instanceof Error?a.message:"Login failed";g({general:e}),Uk({title:"Login Failed",description:e,variant:"destructive"})}finally{u(!1)}}},className:sl("mt-4",v.spacingFormSection),children:[f.general&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 text-destructive",v.paddingCell,v.textSizeSmall),children:f.general}),c.jsxs("div",{className:v.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"session-username",className:v.textSizeLabel,children:"Username or Email"}),c.jsx(_l,{id:"session-username",type:"text",placeholder:"Enter your username or email",value:h.username,onChange:e=>m(t=>({...t,username:e.target.value})),disabled:d,className:sl(f.username?"border-destructive":"",v.inputHeight,v.textSize),autoComplete:"username"}),f.username&&c.jsx("p",{className:sl("text-destructive",v.textSizeSmall),children:f.username})]}),c.jsxs("div",{className:v.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"session-password",className:v.textSizeLabel,children:"Password"}),c.jsx(_l,{ref:l,id:"session-password",type:"password",placeholder:"Enter your password",value:h.password,onChange:e=>m(t=>({...t,password:e.target.value})),disabled:d,className:sl(f.password?"border-destructive":"",v.inputHeight,v.textSize),autoComplete:"current-password"}),f.password&&c.jsx("p",{className:sl("text-destructive",v.textSizeSmall),children:f.password})]}),c.jsxs("div",{className:sl("flex flex-col-reverse sm:flex-row sm:justify-end pt-2",v.gapButtonGroup),children:[c.jsx(bl,{type:"button",variant:"outline",onClick:()=>{m({username:"",password:""}),g({}),t(!1)},disabled:d,className:sl(v.buttonHeightSmall,v.paddingCell,v.textSizeSmall),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(xx,{className:v.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx(bl,{type:"submit",disabled:d,className:sl(v.buttonHeightSmall,v.paddingCell,v.textSizeSmall),children:c.jsx("span",{className:"flex items-center gap-1.5",children:d?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:sl(v.iconSizeSmall,"animate-spin")}),c.jsx("span",{children:"Logging in..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Yf,{className:v.iconSizeSmall}),c.jsx("span",{children:"Log In"})]})})})]})]})]})})}wA.displayName="DialogAction";const jA=p.forwardRef(({className:e,leftIcon:t,error:n=!1,capsLockMessage:a="Caps Lock is on",onKeyDown:s,onKeyUp:r,...i},o)=>{const[l,d]=p.useState(!1),[u,h]=p.useState(!1),m=p.useCallback(e=>{h(e.getModifierState("CapsLock"))},[]),f=p.useCallback(e=>{m(e),s?.(e)},[m,s]),g=p.useCallback(e=>{m(e),r?.(e)},[m,r]);return c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"relative",children:[t||u?c.jsx("div",{className:sl("absolute left-3 top-1/2 -translate-y-1/2",u?"text-destructive":"text-muted-foreground"),...u?{title:a,role:"status","aria-live":"polite","aria-label":a}:{},children:u?c.jsx(Wp,{className:"h-4 w-4 animate-pulse"}):t}):null,c.jsx(_l,{ref:o,type:l?"text":"password",className:sl(t||u?"pl-10":void 0,"pr-10",n?"border-destructive":void 0,e),onKeyDown:f,onKeyUp:g,...i}),c.jsx("button",{type:"button",onClick:()=>d(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",tabIndex:-1,children:l?c.jsx(wf,{className:"h-4 w-4"}):c.jsx(Sf,{className:"h-4 w-4"})})]})})});function CA({label:e,htmlFor:t,error:n,helperText:a,required:s=!1,children:r,className:i}){return c.jsxs("div",{className:sl("space-y-2",i),children:[e&&c.jsxs(Fl,{htmlFor:t,children:[e,s&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),r,a&&!n&&c.jsx("p",{className:"text-xs text-muted-foreground",children:a}),n&&c.jsx("p",{className:"text-sm text-destructive",children:n})]})}jA.displayName="PasswordInput";const kA=p.forwardRef(({className:e,leftIcon:t,error:n=!1,...a},s)=>c.jsxs("div",{className:"relative",children:[t&&c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",children:t}),c.jsx(_l,{ref:s,className:sl(t?"pl-10":void 0,n?"border-destructive":void 0,e),...a})]}));function NA({placeholder:e="Search...",className:t,...n}){return c.jsxs("div",{className:"relative",children:[c.jsx(Ig,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(_l,{type:"text",placeholder:e,className:sl("pl-10",t),...n})]})}kA.displayName="InputWithIcon";var _A=e=>"checkbox"===e.type,EA=e=>e instanceof Date,PA=e=>null==e;const AA=e=>"object"==typeof e;var RA=e=>!PA(e)&&!Array.isArray(e)&&AA(e)&&!EA(e),TA=e=>RA(e)&&e.target?_A(e.target)?e.target.checked:e.target.value:e,MA=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),DA="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function LA(e){if(e instanceof Date)return new Date(e);const t="undefined"!=typeof FileList&&e instanceof FileList;if(DA&&(e instanceof Blob||t))return e;const n=Array.isArray(e);if(!(n||RA(e)&&(e=>{const t=e.constructor&&e.constructor.prototype;return RA(t)&&t.hasOwnProperty("isPrototypeOf")})(e)))return e;const a=n?[]:Object.create(Object.getPrototypeOf(e));for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=LA(e[s]));return a}var FA=e=>/^\w*$/.test(e),IA=e=>void 0===e,OA=e=>Array.isArray(e)?e.filter(Boolean):[],zA=e=>OA(e.replace(/["|']|\]/g,"").split(/\.|\[/)),BA=(e,t,n)=>{if(!t||!RA(e))return n;const a=(FA(t)?[t]:zA(t)).reduce((e,t)=>PA(e)?e:e[t],e);return IA(a)||a===e?IA(e[t])?n:e[t]:a},$A=e=>"boolean"==typeof e,UA=e=>"function"==typeof e,VA=(e,t,n)=>{let a=-1;const s=FA(t)?[t]:zA(t),r=s.length,i=r-1;for(;++a<r;){const t=s[a];let r=n;if(a!==i){const n=e[t];r=RA(n)||Array.isArray(n)?n:isNaN(+s[a+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=r,e=e[t]}};const qA="blur",HA="focusout",GA="change",KA="onBlur",WA="onChange",QA="onSubmit",YA="onTouched",XA="all",ZA="max",JA="min",eR="maxLength",tR="minLength",nR="pattern",aR="required",sR="validate",rR=f.createContext(null);rR.displayName="HookFormContext";const iR=()=>f.useContext(rR),oR=e=>{const{children:t,...n}=e;return f.createElement(rR.Provider,{value:n},t)};var lR=(e,t,n,a=!0)=>{const s={defaultValues:t._defaultValues};for(const r in e)Object.defineProperty(s,r,{get:()=>{const s=r;return t._proxyFormState[s]!==XA&&(t._proxyFormState[s]=!a||XA),n&&(n[s]=!0),e[s]}});return s};const cR="undefined"!=typeof window?f.useLayoutEffect:f.useEffect;var dR=e=>"string"==typeof e,uR=(e,t,n,a,s)=>dR(e)?(a&&t.watch.add(e),BA(n,e,s)):Array.isArray(e)?e.map(e=>(a&&t.watch.add(e),BA(n,e))):(a&&(t.watchAll=!0),n),hR=e=>PA(e)||!AA(e);function mR(e,t,n=new WeakSet){if(hR(e)||hR(t))return Object.is(e,t);if(EA(e)&&EA(t))return Object.is(e.getTime(),t.getTime());const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const r of a){const a=e[r];if(!s.includes(r))return!1;if("ref"!==r){const e=t[r];if(EA(a)&&EA(e)||RA(a)&&RA(e)||Array.isArray(a)&&Array.isArray(e)?!mR(a,e,n):!Object.is(a,e))return!1}}return!0}function pR(e){const t=iR(),{name:n,disabled:a,control:s=t.control,shouldUnregister:r,defaultValue:i,exact:o=!0}=e,l=MA(s._names.array,n),c=f.useMemo(()=>BA(s._formValues,n,BA(s._defaultValues,n,i)),[s,n,i]),d=function(e){const t=iR(),{control:n=t.control,name:a,defaultValue:s,disabled:r,exact:i,compute:o}=e||{},l=f.useRef(s),c=f.useRef(o),d=f.useRef(void 0),u=f.useRef(n),h=f.useRef(a);c.current=o;const[m,p]=f.useState(()=>{const e=n._getWatch(a,l.current);return c.current?c.current(e):e}),g=f.useCallback(e=>{const t=uR(a,n._names,e||n._formValues,!1,l.current);return c.current?c.current(t):t},[n._formValues,n._names,a]),x=f.useCallback(e=>{if(!r){const t=uR(a,n._names,e||n._formValues,!1,l.current);if(c.current){const e=c.current(t);mR(e,d.current)||(p(e),d.current=e)}else p(t)}},[n._formValues,n._names,r,a]);cR(()=>(u.current===n&&mR(h.current,a)||(u.current=n,h.current=a,x()),n._subscribe({name:a,formState:{values:!0},exact:i,callback:e=>{x(e.values)}})),[n,i,a,x]),f.useEffect(()=>n._removeUnmounted());const v=u.current!==n,y=h.current,b=f.useMemo(()=>{if(r)return null;const e=!v&&!mR(y,a);return v||e?g():null},[r,v,a,y,g]);return null!==b?b:m}({control:s,name:n,defaultValue:c,exact:o}),u=function(e){const t=iR(),{control:n=t.control,disabled:a,name:s,exact:r}=e||{},[i,o]=f.useState(n._formState),l=f.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return cR(()=>n._subscribe({name:s,formState:l.current,exact:r,callback:e=>{!a&&o({...n._formState,...e})}}),[s,a,r]),f.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),f.useMemo(()=>lR(i,n,l.current,!1),[i,n])}({control:s,name:n,exact:o}),h=f.useRef(e),m=f.useRef(void 0),p=f.useRef(s.register(n,{...e.rules,value:d,...$A(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const g=f.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!BA(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!BA(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!BA(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!BA(u.validatingFields,n)},error:{enumerable:!0,get:()=>BA(u.errors,n)}}),[u,n]),x=f.useCallback(e=>p.current.onChange({target:{value:TA(e),name:n},type:GA}),[n]),v=f.useCallback(()=>p.current.onBlur({target:{value:BA(s._formValues,n),name:n},type:qA}),[n,s._formValues]),y=f.useCallback(e=>{const t=BA(s._fields,n);t&&t._f&&e&&(t._f.ref={focus:()=>UA(e.focus)&&e.focus(),select:()=>UA(e.select)&&e.select(),setCustomValidity:t=>UA(e.setCustomValidity)&&e.setCustomValidity(t),reportValidity:()=>UA(e.reportValidity)&&e.reportValidity()})},[s._fields,n]),b=f.useMemo(()=>({name:n,value:d,...$A(a)||u.disabled?{disabled:u.disabled||a}:{},onChange:x,onBlur:v,ref:y}),[n,a,u.disabled,x,v,y,d]);return f.useEffect(()=>{const e=s._options.shouldUnregister||r,t=m.current;t&&t!==n&&!l&&s.unregister(t),s.register(n,{...h.current.rules,...$A(h.current.disabled)?{disabled:h.current.disabled}:{}});const a=(e,t)=>{const n=BA(s._fields,e);n&&n._f&&(n._f.mount=t)};if(a(n,!0),e){const e=LA(BA(s._options.defaultValues,n,h.current.defaultValue));VA(s._defaultValues,n,e),IA(BA(s._formValues,n))&&VA(s._formValues,n,e)}return!l&&s.register(n),m.current=n,()=>{(l?e&&!s._state.action:e)?s.unregister(n):a(n,!1)}},[n,s,l,r]),f.useEffect(()=>{s._setDisabledField({disabled:a,name:n})},[a,n,s]),f.useMemo(()=>({field:b,formState:u,fieldState:g}),[b,u,g])}const fR=e=>e.render(pR(e));var gR=(e,t,n,a,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[a]:s||!0}}:{},xR=e=>Array.isArray(e)?e:[e],vR=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function yR(e,t){const n={};for(const a in e)if(e.hasOwnProperty(a)){const s=e[a],r=t[a];if(s&&RA(s)&&r){const e=yR(s,r);RA(e)&&(n[a]=e)}else e[a]&&(n[a]=r)}return n}var bR=e=>RA(e)&&!Object.keys(e).length,wR=e=>"file"===e.type,SR=e=>{if(!DA)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},jR=e=>"select-multiple"===e.type,CR=e=>"radio"===e.type,kR=e=>SR(e)&&e.isConnected;function NR(e,t){const n=Array.isArray(t)?t:FA(t)?[t]:zA(t),a=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let a=0;for(;a<n;)e=IA(e)?a++:e[t[a++]];return e}(e,n),s=n.length-1,r=n[s];return a&&delete a[r],0!==s&&(RA(a)&&bR(a)||Array.isArray(a)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!IA(e[t]))return!1;return!0}(a))&&NR(e,n.slice(0,-1)),e}function _R(e){return Array.isArray(e)||RA(e)&&!(e=>{for(const t in e)if(UA(e[t]))return!0;return!1})(e)}function ER(e,t={}){for(const n in e){const a=e[n];_R(a)?(t[n]=Array.isArray(a)?[]:{},ER(a,t[n])):IA(a)||(t[n]=!0)}return t}function PR(e,t,n){n||(n=ER(t));for(const a in e){const s=e[a];if(_R(s))IA(t)||hR(n[a])?n[a]=ER(s,Array.isArray(s)?[]:{}):PR(s,PA(t)?{}:t[a],n[a]);else{const e=t[a];n[a]=!mR(s,e)}}return n}const AR={value:!1,isValid:!1},RR={value:!0,isValid:!0};var TR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!IA(e[0].attributes.value)?IA(e[0].value)||""===e[0].value?RR:{value:e[0].value,isValid:!0}:RR:AR}return AR},MR=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:a})=>IA(e)?e:t?""===e?NaN:e?+e:e:n&&dR(e)?new Date(e):a?a(e):e;const DR={isValid:!1,value:null};var LR=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,DR):DR;function FR(e){const t=e.ref;return wR(t)?t.files:CR(t)?LR(e.refs).value:jR(t)?[...t.selectedOptions].map(({value:e})=>e):_A(t)?TR(e.refs).value:MR(IA(t.value)?e.ref.value:t.value,e)}var IR=e=>e instanceof RegExp,OR=e=>IA(e)?e:IR(e)?e.source:RA(e)?IR(e.value)?e.value.source:e.value:e,zR=e=>({isOnSubmit:!e||e===QA,isOnBlur:e===KA,isOnChange:e===WA,isOnAll:e===XA,isOnTouch:e===YA});const BR="AsyncFunction";var $R=e=>!!e&&!!e.validate&&!!(UA(e.validate)&&e.validate.constructor.name===BR||RA(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===BR)),UR=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const VR=(e,t,n,a)=>{for(const s of n||Object.keys(e)){const n=BA(e,s);if(n){const{_f:e,...r}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!a)return!0;if(e.ref&&t(e.ref,e.name)&&!a)return!0;if(VR(r,t))break}else if(RA(r)&&VR(r,t))break}}};function qR(e,t,n){const a=BA(e,n);if(a||FA(n))return{error:a,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),r=BA(t,a),i=BA(e,a);if(r&&!Array.isArray(r)&&n!==a)return{name:n};if(i&&i.type)return{name:a,error:i};if(i&&i.root&&i.root.type)return{name:`${a}.root`,error:i.root};s.pop()}return{name:n}}var HR=(e,t,n)=>{const a=xR(BA(e,n));return VA(a,"root",t[n]),VA(e,n,a),e};function GR(e,t,n="validate"){if(dR(e)||Array.isArray(e)&&e.every(dR)||$A(e)&&!e)return{type:n,message:dR(e)?e:"",ref:t}}var KR=e=>RA(e)&&!IR(e)?e:{value:e,message:""},WR=async(e,t,n,a,s,r)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:m,validate:p,name:f,valueAsNumber:g,mount:x}=e._f,v=BA(n,f);if(!x||t.has(f))return{};const y=o?o[0]:i,b=e=>{s&&y.reportValidity&&(y.setCustomValidity($A(e)?"":e||""),y.reportValidity())},w={},S=CR(i),j=_A(i),C=S||j,k=(g||wR(i))&&IA(i.value)&&IA(v)||SR(i)&&""===i.value||""===v||Array.isArray(v)&&!v.length,N=gR.bind(null,f,a,w),_=(e,t,n,a=eR,s=tR)=>{const r=e?t:n;w[f]={type:e?a:s,message:r,ref:i,...N(e?a:s,r)}};if(r?!Array.isArray(v)||!v.length:l&&(!C&&(k||PA(v))||$A(v)&&!v||j&&!TR(o).isValid||S&&!LR(o).isValid)){const{value:e,message:t}=dR(l)?{value:!!l,message:l}:KR(l);if(e&&(w[f]={type:aR,message:t,ref:y,...N(aR,t)},!a))return b(t),w}if(!(k||PA(u)&&PA(h))){let e,t;const n=KR(h),s=KR(u);if(PA(v)||isNaN(v)){const a=i.valueAsDate||new Date(v),r=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;dR(n.value)&&v&&(e=o?r(v)>r(n.value):l?v>n.value:a>new Date(n.value)),dR(s.value)&&v&&(t=o?r(v)<r(s.value):l?v<s.value:a<new Date(s.value))}else{const a=i.valueAsNumber||(v?+v:v);PA(n.value)||(e=a>n.value),PA(s.value)||(t=a<s.value)}if((e||t)&&(_(!!e,n.message,s.message,ZA,JA),!a))return b(w[f].message),w}if((c||d)&&!k&&(dR(v)||r&&Array.isArray(v))){const e=KR(c),t=KR(d),n=!PA(e.value)&&v.length>+e.value,s=!PA(t.value)&&v.length<+t.value;if((n||s)&&(_(n,e.message,t.message),!a))return b(w[f].message),w}if(m&&!k&&dR(v)){const{value:e,message:t}=KR(m);if(IR(e)&&!v.match(e)&&(w[f]={type:nR,message:t,ref:i,...N(nR,t)},!a))return b(t),w}if(p)if(UA(p)){const e=GR(await p(v,n),y);if(e&&(w[f]={...e,...N(sR,e.message)},!a))return b(e.message),w}else if(RA(p)){let e={};for(const t in p){if(!bR(e)&&!a)break;const s=GR(await p[t](v,n),y,t);s&&(e={...s,...N(t,s.message)},b(s.message),a&&(w[f]=e))}if(!bR(e)&&(w[f]={ref:y,...e},!a))return w}return b(!0),w};const QR={mode:QA,reValidateMode:WA,shouldFocusError:!0};function YR(e={}){let t,n={...QR,...e},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:UA(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},s={},r=(RA(n.defaultValues)||RA(n.values))&&LA(n.defaultValues||n.values)||{},i=n.shouldUnregister?{}:LA(r),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={...d};let h={...u};const m={array:vR(),state:vR()},p=n.criteriaMode===XA,f=async e=>{if(!o.keepIsValid&&!n.disabled&&(u.isValid||h.isValid||e)){let e;n.resolver?(e=bR((await b()).errors),g()):e=await w(s,!0),e!==a.isValid&&m.state.next({isValid:e})}},g=(e,t)=>{!n.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?VA(a.validatingFields,e,t):NR(a.validatingFields,e))}),m.state.next({validatingFields:a.validatingFields,isValidating:!bR(a.validatingFields)}))},x=(e,t,n,a)=>{const l=BA(s,e);if(l){const s=BA(i,e,IA(n)?BA(r,e):n);IA(s)||a&&a.defaultChecked||t?VA(i,e,t?s:FR(l._f)):C(e,s),o.mount&&!o.action&&f()}},v=(e,t,s,i,o)=>{let l=!1,c=!1;const d={name:e};if(!n.disabled){if(!s||i){(u.isDirty||h.isDirty)&&(c=a.isDirty,a.isDirty=d.isDirty=S(),l=c!==d.isDirty);const n=mR(BA(r,e),t);c=!!BA(a.dirtyFields,e),n?NR(a.dirtyFields,e):VA(a.dirtyFields,e,!0),d.dirtyFields=a.dirtyFields,l=l||(u.dirtyFields||h.dirtyFields)&&c!==!n}if(s){const t=BA(a.touchedFields,e);t||(VA(a.touchedFields,e,s),d.touchedFields=a.touchedFields,l=l||(u.touchedFields||h.touchedFields)&&t!==s)}l&&o&&m.state.next(d)}return l?d:{}},y=(e,s,r,i)=>{const o=BA(a.errors,e),l=(u.isValid||h.isValid)&&$A(s)&&a.isValid!==s;var d;if(n.delayError&&r?(d=()=>((e,t)=>{VA(a.errors,e,t),m.state.next({errors:a.errors})})(e,r),t=e=>{clearTimeout(c),c=setTimeout(d,e)},t(n.delayError)):(clearTimeout(c),t=null,r?VA(a.errors,e,r):NR(a.errors,e)),(r?!mR(o,r):o)||!bR(i)||l){const t={...i,...l&&$A(s)?{isValid:s}:{},errors:a.errors,name:e};a={...a,...t},m.state.next(t)}},b=async e=>{g(e,!0);const t=await n.resolver(i,n.context,((e,t,n,a)=>{const s={};for(const r of e){const e=BA(t,r);e&&VA(s,r,e._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:a}})(e||l.mount,s,n.criteriaMode,n.shouldUseNativeValidation));return t},w=async(t,s,r={valid:!0})=>{for(const o in t){const c=t[o];if(c){const{_f:t,...o}=c;if(t){const o=l.array.has(t.name),d=c._f&&$R(c._f);d&&u.validatingFields&&g([t.name],!0);const h=await WR(c,l.disabled,i,p,n.shouldUseNativeValidation&&!s,o);if(d&&u.validatingFields&&g([t.name]),h[t.name]&&(r.valid=!1,s||e.shouldUseNativeValidation))break;!s&&(BA(h,t.name)?o?HR(a.errors,h,t.name):VA(a.errors,t.name,h[t.name]):NR(a.errors,t.name))}!bR(o)&&await w(o,s,r)}}return r.valid},S=(e,t)=>!n.disabled&&(e&&t&&VA(i,e,t),!mR(A(),r)),j=(e,t,n)=>uR(e,l,{...o.mount?i:IA(t)?r:dR(e)?{[e]:t}:t},n,t),C=(e,t,n={})=>{const a=BA(s,e);let r=t;if(a){const n=a._f;n&&(!n.disabled&&VA(i,e,MR(t,n)),r=SR(n.ref)&&PA(t)?"":t,jR(n.ref)?[...n.ref.options].forEach(e=>e.selected=r.includes(e.value)):n.refs?_A(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(r)?e.checked=!!r.find(t=>t===e.value):e.checked=r===e.value||!!r)}):n.refs.forEach(e=>e.checked=e.value===r):wR(n.ref)?n.ref.value="":(n.ref.value=r,n.ref.type||m.state.next({name:e,values:LA(i)})))}(n.shouldDirty||n.shouldTouch)&&v(e,r,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&P(e)},k=(e,t,n)=>{for(const a in t){if(!t.hasOwnProperty(a))return;const r=t[a],i=e+"."+a,o=BA(s,i);(l.array.has(e)||RA(r)||o&&!o._f)&&!EA(r)?k(i,r,n):C(i,r,n)}},N=(e,t,n={})=>{const c=BA(s,e),d=l.array.has(e),p=LA(t);VA(i,e,p),d?(m.array.next({name:e,values:LA(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&n.shouldDirty&&m.state.next({name:e,dirtyFields:PR(r,i),isDirty:S(e,p)})):!c||c._f||PA(p)?C(e,p,n):k(e,p,n),UR(e,l)?m.state.next({...a,name:e,values:LA(i)}):m.state.next({name:o.mount?e:void 0,values:LA(i)})},_=async e=>{o.mount=!0;const r=e.target;let c=r.name,d=!0;const x=BA(s,c),S=e=>{d=Number.isNaN(e)||EA(e)&&isNaN(e.getTime())||mR(e,BA(i,c,e))},j=zR(n.mode),C=zR(n.reValidateMode);if(x){let o,k;const N=r.type?FR(x._f):TA(e),_=e.type===qA||e.type===HA,E=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(x._f)&&!n.resolver&&!BA(a.errors,c)&&!x._f.deps||((e,t,n,a,s)=>!s.isOnAll&&(!n&&s.isOnTouch?!(t||e):(n?a.isOnBlur:s.isOnBlur)?!e:!(n?a.isOnChange:s.isOnChange)||e))(_,BA(a.touchedFields,c),a.isSubmitted,C,j),A=UR(c,l,_);VA(i,c,N),_?r&&r.readOnly||(x._f.onBlur&&x._f.onBlur(e),t&&t(0)):x._f.onChange&&x._f.onChange(e);const R=v(c,N,_),T=!bR(R)||A;if(!_&&m.state.next({name:c,type:e.type,values:LA(i)}),E)return(u.isValid||h.isValid)&&("onBlur"===n.mode?_&&f():_||f()),T&&m.state.next({name:c,...A?{}:R});if(!_&&A&&m.state.next({...a}),n.resolver){const{errors:e}=await b([c]);if(g([c]),S(N),d){const t=qR(a.errors,s,c),n=qR(e,s,t.name||c);o=n.error,c=n.name,k=bR(e)}}else g([c],!0),o=(await WR(x,l.disabled,i,p,n.shouldUseNativeValidation))[c],g([c]),S(N),d&&(o?k=!1:(u.isValid||h.isValid)&&(k=await w(s,!0)));d&&(x._f.deps&&(!Array.isArray(x._f.deps)||x._f.deps.length>0)&&P(x._f.deps),y(c,k,o,R))}},E=(e,t)=>{if(BA(a.errors,t)&&e.focus)return e.focus(),1},P=async(e,t={})=>{let r,i;const o=xR(e);if(n.resolver){const t=await(async e=>{const{errors:t}=await b(e);if(g(e),e)for(const n of e){const e=BA(t,n);e?VA(a.errors,n,e):NR(a.errors,n)}else a.errors=t;return t})(IA(e)?e:o);r=bR(t),i=e?!o.some(e=>BA(t,e)):r}else e?(i=(await Promise.all(o.map(async e=>{const t=BA(s,e);return await w(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||a.isValid)&&f()):i=r=await w(s);return m.state.next({...!dR(e)||(u.isValid||h.isValid)&&r!==a.isValid?{}:{name:e},...n.resolver||!e?{isValid:r}:{},errors:a.errors}),t.shouldFocus&&!i&&VR(s,E,e?o:l.mount),i},A=(e,t)=>{let n={...o.mount?i:r};return t&&(n=yR(t.dirtyFields?a.dirtyFields:a.touchedFields,n)),IA(e)?n:dR(e)?BA(n,e):e.map(e=>BA(n,e))},R=(e,t)=>({invalid:!!BA((t||a).errors,e),isDirty:!!BA((t||a).dirtyFields,e),error:BA((t||a).errors,e),isValidating:!!BA(a.validatingFields,e),isTouched:!!BA((t||a).touchedFields,e)}),T=(e,t,n)=>{const r=(BA(s,e,{_f:{}})._f||{}).ref,i=BA(a.errors,e)||{},{ref:o,message:l,type:c,...d}=i;VA(a.errors,e,{...d,...t,ref:r}),m.state.next({name:e,errors:a.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()},M=e=>m.state.subscribe({next:t=>{var n,s,o;n=e.name,s=t.name,o=e.exact,n&&s&&n!==s&&!xR(n).some(e=>e&&(o?e===s:e.startsWith(s)||s.startsWith(e)))||!((e,t,n,a)=>{n(e);const{name:s,...r}=e;return bR(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find(e=>t[e]===(!a||XA))})(t,e.formState||u,$,e.reRenderRoot)||e.callback({values:{...i},...a,...t,defaultValues:r})}}).unsubscribe,D=(e,t={})=>{for(const o of e?xR(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(NR(s,o),NR(i,o)),!t.keepError&&NR(a.errors,o),!t.keepDirty&&NR(a.dirtyFields,o),!t.keepTouched&&NR(a.touchedFields,o),!t.keepIsValidating&&NR(a.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&NR(r,o);m.state.next({values:LA(i)}),m.state.next({...a,...t.keepDirty?{isDirty:S()}:{}}),!t.keepIsValid&&f()},L=({disabled:e,name:t})=>{($A(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},F=(e,t={})=>{let a=BA(s,e);const i=$A(t.disabled)||$A(n.disabled);return VA(s,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),a?L({disabled:$A(t.disabled)?t.disabled:n.disabled,name:e}):x(e,!0,t.value),{...i?{disabled:t.disabled||n.disabled}:{},...n.progressive?{required:!!t.required,min:OR(t.min),max:OR(t.max),minLength:OR(t.minLength),maxLength:OR(t.maxLength),pattern:OR(t.pattern)}:{},name:e,onChange:_,onBlur:_,ref:i=>{if(i){F(e,t),a=BA(s,e);const n=IA(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>CR(e)||_A(e))(n),l=a._f.refs||[];if(o?l.find(e=>e===n):n===a._f.ref)return;VA(s,e,{_f:{...a._f,...o?{refs:[...l.filter(kR),n,...Array.isArray(BA(r,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),x(e,!1,void 0,n)}else a=BA(s,e,{}),a._f&&(a._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!MA(l.array,e)||!o.action)&&l.unMount.add(e)}}},I=()=>n.shouldFocusError&&VR(s,E,l.mount),O=(e,t)=>async r=>{let o;r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let c=LA(i);if(m.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await b();g(),a.errors=e,c=LA(t)}else await w(s);if(l.disabled.size)for(const e of l.disabled)NR(c,e);if(NR(a.errors,"root"),bR(a.errors)){m.state.next({errors:{}});try{await e(c,r)}catch(d){o=d}}else t&&await t({...a.errors},r),I(),setTimeout(I);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bR(a.errors)&&!o,submitCount:a.submitCount+1,errors:a.errors}),o)throw o},z=(e,t={})=>{const c=e?LA(e):r,d=LA(c),h=bR(e),p=h?r:d;if(t.keepDefaultValues||(r=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(PR(r,i))]);for(const t of Array.from(e)){const e=BA(a.dirtyFields,t),n=BA(i,t),s=BA(p,t);e&&!IA(n)?VA(p,t,n):e||IA(s)||N(t,s)}}else{if(DA&&IA(e))for(const e of l.mount){const t=BA(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(SR(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)N(e,BA(p,e));else s={}}i=n.shouldUnregister?t.keepDefaultValues?LA(r):{}:LA(p),m.array.next({values:{...p}}),m.state.next({values:{...p}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!n.shouldUnregister&&!bR(p),o.watch=!!n.shouldUnregister,o.keepIsValid=!!t.keepIsValid,o.action=!1,t.keepErrors||(a.errors={}),m.state.next({submitCount:t.keepSubmitCount?a.submitCount:0,isDirty:!h&&(t.keepDirty?a.isDirty:!(!t.keepDefaultValues||mR(e,r))),isSubmitted:!!t.keepIsSubmitted&&a.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&i?PR(r,i):a.dirtyFields:t.keepDefaultValues&&e?PR(r,e):t.keepDirty?a.dirtyFields:{},touchedFields:t.keepTouched?a.touchedFields:{},errors:t.keepErrors?a.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&a.isSubmitSuccessful,isSubmitting:!1,defaultValues:r})},B=(e,t)=>z(UA(e)?e(i):e,{...n.resetOptions,...t}),$=e=>{a={...a,...e}},U={control:{register:F,unregister:D,getFieldState:R,handleSubmit:O,setError:T,_subscribe:M,_runSchema:b,_updateIsValidating:g,_focusError:I,_getWatch:j,_getDirty:S,_setValid:f,_setFieldArray:(e,t=[],l,c,d=!0,p=!0)=>{if(c&&l&&!n.disabled){if(o.action=!0,p&&Array.isArray(BA(s,e))){const t=l(BA(s,e),c.argA,c.argB);d&&VA(s,e,t)}if(p&&Array.isArray(BA(a.errors,e))){const t=l(BA(a.errors,e),c.argA,c.argB);d&&VA(a.errors,e,t),((e,t)=>{!OA(BA(e,t)).length&&NR(e,t)})(a.errors,e)}if((u.touchedFields||h.touchedFields)&&p&&Array.isArray(BA(a.touchedFields,e))){const t=l(BA(a.touchedFields,e),c.argA,c.argB);d&&VA(a.touchedFields,e,t)}(u.dirtyFields||h.dirtyFields)&&(a.dirtyFields=PR(r,i)),m.state.next({name:e,isDirty:S(e,t),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else VA(i,e,t)},_setDisabledField:L,_setErrors:e=>{a.errors=e,m.state.next({errors:a.errors,isValid:!1})},_getFieldArray:e=>OA(BA(o.mount?i:r,e,n.shouldUnregister?BA(r,e,[]):[])),_reset:z,_resetDefaultValues:()=>UA(n.defaultValues)&&n.defaultValues().then(e=>{B(e,n.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=BA(s,e);t&&(t._f.refs?t._f.refs.every(e=>!kR(e)):!kR(t._f.ref))&&D(e)}l.unMount=new Set},_disableForm:e=>{$A(e)&&(m.state.next({disabled:e}),VR(s,(t,n)=>{const a=BA(s,n);a&&(t.disabled=a._f.disabled||e,Array.isArray(a._f.refs)&&a._f.refs.forEach(t=>{t.disabled=a._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return r},get _names(){return l},set _names(e){l=e},get _formState(){return a},get _options(){return n},set _options(e){n={...n,...e}}},subscribe:e=>(o.mount=!0,h={...h,...e.formState},M({...e,formState:{...d,...e.formState}})),trigger:P,register:F,handleSubmit:O,watch:(e,t)=>UA(e)?m.state.subscribe({next:n=>"values"in n&&e(j(void 0,t),n)}):j(e,t,!0),setValue:N,getValues:A,reset:B,resetField:(e,t={})=>{BA(s,e)&&(IA(t.defaultValue)?N(e,LA(BA(r,e))):(N(e,t.defaultValue),VA(r,e,LA(t.defaultValue))),t.keepTouched||NR(a.touchedFields,e),t.keepDirty||(NR(a.dirtyFields,e),a.isDirty=t.defaultValue?S(e,LA(BA(r,e))):S()),t.keepError||(NR(a.errors,e),u.isValid&&f()),m.state.next({...a}))},clearErrors:e=>{e&&xR(e).forEach(e=>NR(a.errors,e)),m.state.next({errors:e?a.errors:{}})},unregister:D,setError:T,setFocus:(e,t={})=>{const n=BA(s,e),a=n&&n._f;if(a){const e=a.refs?a.refs[0]:a.ref;e.focus&&setTimeout(()=>{e.focus(),t.shouldSelect&&UA(e.select)&&e.select()})}},getFieldState:R};return{...U,formControl:U}}var XR=()=>{if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(16*Math.random()+e)%16|0;return("x"==t?n:3&n|8).toString(16)})},ZR=(e,t,n={})=>n.shouldFocus||IA(n.shouldFocus)?n.focusName||`${e}.${IA(n.focusIndex)?t:n.focusIndex}.`:"",JR=(e,t)=>[...e,...xR(t)],eT=e=>Array.isArray(e)?e.map(()=>{}):void 0;function tT(e,t,n){return[...e.slice(0,t),...xR(n),...e.slice(t)]}var nT=(e,t,n)=>Array.isArray(e)?(IA(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],aT=(e,t)=>[...xR(t),...xR(e)];var sT=(e,t)=>IA(t)?[]:function(e,t){let n=0;const a=[...e];for(const s of t)a.splice(s-n,1),n++;return OA(a).length?a:[]}(e,xR(t).sort((e,t)=>e-t)),rT=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]},iT=(e,t,n)=>(e[t]=n,e);function oT(e){const t=iR(),{control:n=t.control,name:a,keyName:s="id",shouldUnregister:r,rules:i}=e,[o,l]=f.useState(n._getFieldArray(a)),c=f.useRef(n._getFieldArray(a).map(XR)),d=f.useRef(!1);n._names.array.add(a),f.useMemo(()=>i&&o.length>=0&&n.register(a,i),[n,a,o.length,i]),cR(()=>n._subjects.array.subscribe({next:({values:e,name:t})=>{if(t===a||!t){const t=BA(e,a);Array.isArray(t)&&(l(t),c.current=t.map(XR))}}}).unsubscribe,[n,a]);const u=f.useCallback(e=>{d.current=!0,n._setFieldArray(a,e)},[n,a]);return f.useEffect(()=>{if(n._state.action=!1,UR(a,n._names)&&n._subjects.state.next({...n._formState}),d.current&&(!zR(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!zR(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([a]).then(e=>{n._updateIsValidating([a]);const t=BA(e.errors,a),s=BA(n._formState.errors,a);(s?!t&&s.type||t&&(s.type!==t.type||s.message!==t.message):t&&t.type)&&(t?VA(n._formState.errors,a,t):NR(n._formState.errors,a),n._subjects.state.next({errors:n._formState.errors}))});else{const e=BA(n._fields,a);!e||!e._f||zR(n._options.reValidateMode).isOnSubmit&&zR(n._options.mode).isOnSubmit||WR(e,n._names.disabled,n._formValues,n._options.criteriaMode===XA,n._options.shouldUseNativeValidation,!0).then(e=>!bR(e)&&n._subjects.state.next({errors:HR(n._formState.errors,e,a)}))}n._subjects.state.next({name:a,values:LA(n._formValues)}),n._names.focus&&VR(n._fields,(e,t)=>{if(n._names.focus&&t.startsWith(n._names.focus)&&e.focus)return e.focus(),1}),n._names.focus="",n._setValid(),d.current=!1},[o,a,n]),f.useEffect(()=>(!BA(n._formValues,a)&&n._setFieldArray(a),()=>{n._options.shouldUnregister||r?n.unregister(a):((e,t)=>{const a=BA(n._fields,e);a&&a._f&&(a._f.mount=t)})(a,!1)}),[a,n,s,r]),{swap:f.useCallback((e,t)=>{const s=n._getFieldArray(a);rT(s,e,t),rT(c.current,e,t),u(s),l(s),n._setFieldArray(a,s,rT,{argA:e,argB:t},!1)},[u,a,n]),move:f.useCallback((e,t)=>{const s=n._getFieldArray(a);nT(s,e,t),nT(c.current,e,t),u(s),l(s),n._setFieldArray(a,s,nT,{argA:e,argB:t},!1)},[u,a,n]),prepend:f.useCallback((e,t)=>{const s=xR(LA(e)),r=aT(n._getFieldArray(a),s);n._names.focus=ZR(a,0,t),c.current=aT(c.current,s.map(XR)),u(r),l(r),n._setFieldArray(a,r,aT,{argA:eT(e)})},[u,a,n]),append:f.useCallback((e,t)=>{const s=xR(LA(e)),r=JR(n._getFieldArray(a),s);n._names.focus=ZR(a,r.length-1,t),c.current=JR(c.current,s.map(XR)),u(r),l(r),n._setFieldArray(a,r,JR,{argA:eT(e)})},[u,a,n]),remove:f.useCallback(e=>{const t=sT(n._getFieldArray(a),e);c.current=sT(c.current,e),u(t),l(t),!Array.isArray(BA(n._fields,a))&&VA(n._fields,a,void 0),n._setFieldArray(a,t,sT,{argA:e})},[u,a,n]),insert:f.useCallback((e,t,s)=>{const r=xR(LA(t)),i=tT(n._getFieldArray(a),e,r);n._names.focus=ZR(a,e,s),c.current=tT(c.current,e,r.map(XR)),u(i),l(i),n._setFieldArray(a,i,tT,{argA:e,argB:eT(t)})},[u,a,n]),update:f.useCallback((e,t)=>{const s=LA(t),r=iT(n._getFieldArray(a),e,s);c.current=[...r].map((t,n)=>t&&n!==e?c.current[n]:XR()),u(r),l([...r]),n._setFieldArray(a,r,iT,{argA:e,argB:s},!0,!1)},[u,a,n]),replace:f.useCallback(e=>{const t=xR(LA(e));c.current=t.map(XR),u([...t]),l([...t]),n._setFieldArray(a,[...t],e=>e,{},!0,!1)},[u,a,n]),fields:f.useMemo(()=>o.map((e,t)=>({...e,[s]:c.current[t]||XR()})),[o,s])}}function lT(e={}){const t=f.useRef(void 0),n=f.useRef(void 0),[a,s]=f.useState({isDirty:!1,isValidating:!1,isLoading:UA(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:UA(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!UA(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:n,...s}=YR(e);t.current={...s,formState:a}}const r=t.current.control;return r._options=e,cR(()=>{const e=r._subscribe({formState:r._proxyFormState,callback:()=>s({...r._formState}),reRenderRoot:!0});return s(e=>({...e,isReady:!0})),r._formState.isReady=!0,e},[r]),f.useEffect(()=>r._disableForm(e.disabled),[r,e.disabled]),f.useEffect(()=>{e.mode&&(r._options.mode=e.mode),e.reValidateMode&&(r._options.reValidateMode=e.reValidateMode)},[r,e.mode,e.reValidateMode]),f.useEffect(()=>{e.errors&&(r._setErrors(e.errors),r._focusError())},[r,e.errors]),f.useEffect(()=>{e.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,e.shouldUnregister]),f.useEffect(()=>{if(r._proxyFormState.isDirty){const e=r._getDirty();e!==a.isDirty&&r._subjects.state.next({isDirty:e})}},[r,a.isDirty]),f.useEffect(()=>{var t;e.values&&!mR(e.values,n.current)?(r._reset(e.values,{keepFieldsRef:!0,...r._options.resetOptions}),(null===(t=r._options.resetOptions)||void 0===t?void 0:t.keepIsValid)||r._setValid(),n.current=e.values,s(e=>({...e}))):r._resetDefaultValues()},[r,e.values]),f.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),t.current.formState=lR(a,r),t.current}function cT({name:e,label:t,placeholder:n,type:a="text",required:s=!1,disabled:r=!1,readOnly:i=!1,helperText:o,autoComplete:l,maxLength:d,minLength:u,pattern:h,className:m,errorMessage:p,control:f}){let g,x={};if(f)g=f;else{const e=iR();g=e.control,x=e.formState.errors}const v=x[e],y=!!v,b=p||v?.message;return c.jsxs(Rl,{"data-invalid":y,children:[t&&c.jsxs(Tl,{htmlFor:e,children:[t,s&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(fR,{name:e,control:g,render:({field:t})=>c.jsx(_l,{...t,id:e,type:a,placeholder:n,disabled:r,readOnly:i,autoComplete:l,maxLength:d,minLength:u,pattern:h,className:sl(y&&"border-destructive",i&&"cursor-not-allowed bg-muted text-muted-foreground",m),"aria-invalid":y,"aria-describedby":b||o?`${e}-${b?"error":"helper"}`:void 0})}),o&&!b&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:o}),b&&c.jsx(Ml,{id:`${e}-error`,children:b})]})}function dT({name:e,label:t,placeholder:n,required:a=!1,disabled:s=!1,readOnly:r=!1,min:i,max:o,step:l,helperText:d,className:u,errorMessage:h,allowDecimals:m=!0,control:p}){let f,g={};if(p)f=p;else{const e=iR();f=e.control,g=e.formState.errors}const x=g[e],v=!!x,y=h||x?.message;return c.jsxs(Rl,{"data-invalid":v,children:[t&&c.jsxs(Tl,{htmlFor:e,children:[t,a&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(fR,{name:e,control:f,render:({field:t})=>c.jsx(_l,{...t,id:e,type:"number",placeholder:n,disabled:s,readOnly:r,min:i,max:o,step:l||(m?"any":1),className:sl(v&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",u),"aria-invalid":v,"aria-describedby":y||d?`${e}-${y?"error":"helper"}`:void 0,onChange:e=>{const n=e.target.value;""!==n&&isNaN(Number(n))||t.onChange(""===n?void 0:Number(n))},value:t.value??""})}),d&&!y&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:d}),y&&c.jsx(Ml,{id:`${e}-error`,children:y})]})}function uT({name:e,label:t,placeholder:n,required:a=!1,disabled:s=!1,readOnly:r=!1,min:i,max:o,helperText:l,className:d,errorMessage:u,control:h}){let m,p={};if(h)m=h;else{const e=iR();m=e.control,p=e.formState.errors}const f=p[e],g=!!f,x=u||f?.message;return c.jsxs(Rl,{"data-invalid":g,children:[t&&c.jsxs(Tl,{htmlFor:e,children:[t,a&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(fR,{name:e,control:m,render:({field:t})=>c.jsx(_l,{...t,id:e,type:"date",placeholder:n,disabled:s,readOnly:r,min:i,max:o,className:sl("date-input",g&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",d),"aria-invalid":g,"aria-describedby":x||l?`${e}-${x?"error":"helper"}`:void 0,value:t.value||""})}),l&&!x&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:l}),x&&c.jsx(Ml,{id:`${e}-error`,children:x})]})}function hT({name:e,label:t,placeholder:n,required:a=!1,disabled:s=!1,readOnly:r=!1,min:i,max:o,step:l=60,helperText:d,className:u,errorMessage:h,control:m}){let p,f={};if(m)p=m;else{const e=iR();p=e.control,f=e.formState.errors}const g=f[e],x=!!g,v=h||g?.message;return c.jsxs(Rl,{"data-invalid":x,children:[t&&c.jsxs(Tl,{htmlFor:e,children:[t,a&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(fR,{name:e,control:p,render:({field:t})=>c.jsx(_l,{...t,id:e,type:"datetime-local",placeholder:n,disabled:s,readOnly:r,min:i,max:o,step:l,className:sl(x&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",u),"aria-invalid":x,"aria-describedby":v||d?`${e}-${v?"error":"helper"}`:void 0,value:t.value||""})}),d&&!v&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:d}),v&&c.jsx(Ml,{id:`${e}-error`,children:v})]})}function mT({name:e,label:t,placeholder:n="Select an option",options:a,required:s=!1,disabled:r=!1,helperText:i,className:o,errorMessage:l,allowClear:d=!1,clearLabel:u="None",control:h}){let m,p={};if(h)m=h;else{const e=iR();m=e.control,p=e.formState.errors}const f=p[e],g=!!f,x=l||f?.message;return c.jsxs(Rl,{"data-invalid":g,children:[t&&c.jsxs(Tl,{htmlFor:e,children:[t,s&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(fR,{name:e,control:m,render:({field:t})=>c.jsxs(bx,{value:t.value||"",onValueChange:e=>{d&&"__clear__"===e?t.onChange(void 0):t.onChange(e)},disabled:r,children:[c.jsx(Sx,{id:e,className:sl(g&&"border-destructive",o),"aria-invalid":g,"aria-describedby":x||i?`${e}-${x?"error":"helper"}`:void 0,children:c.jsx(wx,{placeholder:n})}),c.jsxs(kx,{children:[d&&c.jsx(Nx,{value:"__clear__",children:u}),a.map(e=>c.jsx(Nx,{value:e.value,disabled:e.disabled,children:e.label},e.value))]})]})}),i&&!x&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:i}),x&&c.jsx(Ml,{id:`${e}-error`,children:x})]})}const pT="/api/v1/ai";function fT(){const[e,t]=p.useState(!1),[n,a]=p.useState(null);return{improve:p.useCallback(async(e,n="default")=>{if(!e?.trim())return null;a(null),t(!0);try{return(await async function(e){return Fs.post(`${pT}/improve-text`,e,{requiresAuth:!0})}({text:e.trim(),mode:n})).improvedText??null}catch(s){const e=s&&"object"==typeof s&&"message"in s?String(s.message):"Failed to improve text";return a(e),null}finally{t(!1)}},[]),loading:e,error:n}}function gT({value:e,onImproved:t,mode:n="default",disabled:a=!1,className:s,label:r="Improve with AI",size:i="sm"}){const{improve:o,loading:l,error:d}=fT(),u="icon"===i;return c.jsxs("div",{className:sl("flex flex-col gap-1",u&&"w-fit items-end",s),children:[c.jsxs(bl,{type:"button",variant:"outline",size:u?"icon":"sm",disabled:a||l||!e?.trim(),onClick:async()=>{const a=await o(e,n);null!=a&&t(a)},className:sl("group transition-all duration-200 ease-out","hover:border-primary/50 hover:bg-primary/5 hover:shadow-sm","active:scale-[0.99] focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",u?"size-8 shrink-0 rounded-full hover:scale-105 active:scale-95 disabled:hover:scale-100":"gap-2"),"aria-label":u?"Improve with AI":void 0,children:[l?c.jsx(Kf,{className:"h-4 w-4 animate-spin text-primary"}):c.jsx(Hg,{className:"h-4 w-4 text-primary transition-transform duration-200 ease-out group-hover:rotate-12 group-hover:scale-110"}),!u&&(l?"Improving":r)]}),d&&c.jsx("p",{className:"text-xs text-destructive animate-in fade-in-0 slide-in-from-top-1 duration-200",role:"alert",children:d})]})}function xT({formType:e,currentValues:t,fieldHints:n}){const[a,s]=p.useState(!1),[r,i]=p.useState(null),o=p.useCallback(()=>i(null),[]);return{suggest:p.useCallback(async a=>{i(null),s(!0);try{return(await async function(e){return Fs.post(`${pT}/form-suggest`,e,{requiresAuth:!0})}({formType:e,currentValues:t??{},fieldHints:n,userPrompt:a?.trim()||void 0})).suggestedValues??{}}catch(r){return i(function(e){if(e instanceof Error&&e.message)return e.message;if(e&&"object"==typeof e&&"message"in e&&e.message){const t=e.message;if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e=>"string"==typeof e?e:String(e)).join(" ")}const t=e,n=t?.response?.data??t?.data;if(n&&"object"==typeof n){const e=n;if("string"==typeof e.detail)return e.detail;if(Array.isArray(e.detail))return e.detail.map(e=>String(e&&"object"==typeof e&&"msg"in e?e.msg:e)).filter(Boolean).join(" ")||"Validation error";if("string"==typeof e.message)return e.message}return"Failed to get suggestions"}(r)),{}}finally{s(!1)}},[e,t,n]),loading:a,error:r,clearError:o}}function vT({formType:e,currentValues:t,fieldHints:n,onSuggest:a,disabled:s=!1,className:r,label:i="Suggest with AI"}){const[o,l]=p.useState(!1),[d,u]=p.useState(""),h=p.useRef(null),{suggest:m,loading:f,error:g,clearError:x}=xT({formType:e,currentValues:t,fieldHints:n}),v=async()=>{const e=await m(d);Object.keys(e).length>0&&(a(e),l(!1),u(""))},y=()=>{const e=h.current;e&&(e.style.height="auto",e.style.height=`${Math.min(Math.max(e.scrollHeight,80),280)}px`)};return p.useEffect(()=>{o&&y()},[o,d]),c.jsx("div",{className:sl("flex flex-col gap-1",r),children:c.jsxs(ub,{open:o,onOpenChange:e=>{f||(l(e),e||(u(""),x()))},children:[c.jsxs(bl,{type:"button",variant:"outline",size:"sm",disabled:s,onClick:()=>l(!0),className:sl("group w-full gap-2 transition-all duration-200 ease-out","hover:border-primary/50 hover:bg-primary/5 hover:shadow-sm","active:scale-[0.99] focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[c.jsx(Hg,{className:"h-4 w-4 transition-transform duration-200 ease-out group-hover:rotate-12 group-hover:scale-110"}),i]}),c.jsxs(pb,{className:"sm:max-w-xl duration-300",onPointerDownOutside:e=>f&&e.preventDefault(),onEscapeKeyDown:e=>f&&e.preventDefault(),children:[c.jsxs(fb,{className:"space-y-1.5",children:[c.jsx(xb,{className:"tracking-tight",children:i}),c.jsx(vb,{className:"text-muted-foreground/90",children:"Add optional instructions to guide the suggestions (e.g. tone, focus, or style). Leave blank for general suggestions."})]}),c.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[g&&c.jsx("p",{className:"text-sm text-destructive rounded-md bg-destructive/10 border border-destructive/20 px-3 py-2",role:"alert",children:g}),c.jsxs("div",{className:sl("flex flex-col rounded-xl border border-input bg-muted/30 p-4","focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:bg-background","transition-all duration-200 ease-out"),children:[c.jsx(Dl,{ref:h,id:"suggest-ai-prompt",placeholder:"Describe what you want... (e.g. 'Keep it professional, focus on accessibility')",className:sl("min-h-[80px] max-h-[280px] w-full resize-none overflow-y-auto rounded-lg border-0 bg-transparent py-0 pl-0 pr-0","text-base text-foreground placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50","transition-[height] duration-150 ease-out"),value:d,onChange:e=>{u(e.target.value),requestAnimationFrame(y)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},disabled:f}),c.jsx("div",{className:"flex justify-end pt-3",children:c.jsx(bl,{type:"button",size:"icon",className:sl("group size-8 rounded-full bg-primary text-primary-foreground shrink-0","transition-all duration-200 ease-out","hover:bg-primary/90 hover:scale-105 hover:shadow-md","active:scale-95 disabled:opacity-50 disabled:hover:scale-100"),onClick:v,disabled:f||!d.trim(),children:f?c.jsx(Kf,{className:"size-4 animate-spin"}):c.jsx(Dp,{className:"size-4 transition-transform duration-200 group-hover:-translate-y-0.5"})})})]})]})]})]})})}function yT({name:e,label:t,placeholder:n,required:a=!1,disabled:s=!1,readOnly:r=!1,rows:i=4,maxLength:o,minLength:l,helperText:d,className:u,errorMessage:h,showImproveButton:m=!1,control:p}){let f,g={};if(p)f=p;else{const e=iR();f=e.control,g=e.formState.errors}const x=g[e],v=!!x,y=h||x?.message;return c.jsxs(Rl,{"data-invalid":v,children:[(t||m&&!r)&&c.jsxs("div",{className:"flex items-center gap-2",children:[t&&c.jsxs(Tl,{htmlFor:e,children:[t,a&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),m&&!r&&c.jsx(fR,{name:e,control:f,render:({field:e})=>c.jsx(gT,{value:e.value??"",onImproved:e.onChange,disabled:s,size:"icon",className:"shrink-0"})})]}),c.jsx(fR,{name:e,control:f,render:({field:t})=>c.jsx(Dl,{...t,id:e,placeholder:n,disabled:s,readOnly:r,rows:i,maxLength:o,minLength:l,className:sl("flex-1 min-w-0 w-full",v&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",u),"aria-invalid":v,"aria-describedby":y||d?`${e}-${y?"error":"helper"}`:void 0})}),d&&!y&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:d}),y&&c.jsx(Ml,{id:`${e}-error`,children:y})]})}function bT({name:e,label:t,required:n=!1,disabled:a=!1,helperText:s,className:r,errorMessage:i,description:o,control:l}){let d,u={};if(l)d=l;else{const e=iR();d=e.control,u=e.formState.errors}const h=u[e],m=!!h,p=i||h?.message;return c.jsxs(Rl,{"data-invalid":m,className:sl("space-y-2",r),children:[c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(fR,{name:e,control:d,render:({field:t})=>c.jsx(VC,{id:e,checked:t.value||!1,onCheckedChange:e=>{t.onChange(!0===e)},disabled:a,"aria-invalid":m,"aria-describedby":p||s||o?`${e}-${p?"error":s?"helper":"description"}`:void 0,className:sl(m&&"border-destructive")})}),c.jsxs("div",{className:"space-y-1 leading-none",children:[t&&c.jsxs(Tl,{htmlFor:e,className:"cursor-pointer font-normal",children:[t,n&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),o&&c.jsx("p",{id:`${e}-description`,className:"text-sm text-muted-foreground",children:o})]})]}),s&&!p&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:s}),p&&c.jsx(Ml,{id:`${e}-error`,children:p})]})}function wT({title:e,description:t,actions:n,className:a}){return c.jsxs("div",{className:sl("flex justify-between items-start mb-6",a),children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:e}),t&&c.jsx("p",{className:"text-muted-foreground mt-2",children:t})]}),n&&c.jsx("div",{className:"flex gap-2",children:n})]})}function ST({actions:e,maxVisibleActions:t=2,customActions:n,className:a,size:s="sm"}){const r=[],i=[];return e.forEach(e=>{"button"===e.display?r.push(e):"dropdown-item"===e.display?i.push(e):r.length<t?r.push(e):i.push(e)}),0!==e.length||n?c.jsxs("div",{className:sl("flex items-center gap-3",a),children:[(r.length>0||n)&&c.jsxs("div",{className:"flex items-center gap-2",children:[r.map(e=>c.jsxs(bl,{variant:e.variant||"outline",size:s,className:"h-8 px-2 text-xs",onClick:e.onClick,disabled:e.disabled,children:[e.icon&&c.jsx("span",{className:"mr-1 flex items-center [&_svg]:h-3 [&_svg]:w-3",children:e.icon}),e.label]},e.id)),n]}),i.length>0&&c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs","aria-label":"More actions",children:c.jsx(yf,{className:"h-3 w-3"})})}),c.jsx(hj,{align:"end",className:"w-56",children:i.map(e=>c.jsxs(mj,{onClick:e.onClick,disabled:e.disabled,children:[e.icon&&c.jsx("span",{className:"mr-2 flex items-center [&_svg]:h-3.5 [&_svg]:w-3.5",children:e.icon}),e.label]},e.id))})]})]}):null}function jT({item:e,customActions:t,actions:n=[],className:a,size:s="sm",showOnHover:r=!0}){const i=t,o=n.filter(e=>!1!==e.show);if(!i&&0===o.length)return null;const l="sm"===s?"h-7 w-7":"h-8 w-8",d="sm"===s?"h-3.5 w-3.5":"h-4 w-4";return c.jsx("div",{className:sl("flex items-center gap-1",r&&"opacity-0 group-hover:opacity-100 transition-opacity",a),onClick:e=>e.stopPropagation(),children:t?t(e):o.map(t=>c.jsx("button",{onClick:n=>{n.stopPropagation(),t.onClick(e)},className:sl(`${l} p-0 rounded-md hover:bg-primary/10 hover:text-primary transition-colors flex items-center justify-center`,t.className),title:t.title,children:c.jsx("span",{className:`flex items-center [&_svg]:${d}`,children:t.icon})},t.id))})}function CT({message:e,className:t}){return c.jsxs("div",{className:sl("flex items-center gap-2 p-3 text-sm text-destructive bg-destructive/10 rounded-md",t),children:[c.jsx(sf,{className:"h-4 w-4 flex-shrink-0"}),c.jsx("span",{children:e})]})}const kT=(e,t,n)=>{if(e&&"reportValidity"in e){const a=BA(n,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},NT=(e,t)=>{for(const n in t.fields){const a=t.fields[n];a&&a.ref&&"reportValidity"in a.ref?kT(a.ref,n,e):a&&a.refs&&a.refs.forEach(t=>kT(t,n,e))}},_T=(e,t)=>{t.shouldUseNativeValidation&&NT(e,t);const n={};for(const a in e){const s=BA(t.fields,a),r=Object.assign(e[a]||{},{ref:s&&s.ref});if(ET(t.names||Object.keys(e),a)){const e=Object.assign({},BA(n,a));VA(e,"root",r),VA(n,a,e)}else VA(n,a,r)}return n},ET=(e,t)=>{const n=PT(t);return e.some(e=>PT(e).match(`^${n}\\.\\d+`))};function PT(e){return e.replace(/\]|\[/g,"")}function AT(e,t,n){function a(n,a){var s;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(s=n._zod).traits??(s.traits=new Set),n._zod.traits.add(e),t(n,a);for(const e in i.prototype)e in n||Object.defineProperty(n,e,{value:i.prototype[e].bind(n)});n._zod.constr=i,n._zod.def=a}const s=n?.Parent??Object;class r extends s{}function i(e){var t;const s=n?.Parent?new r:this;a(s,e),(t=s._zod).deferred??(t.deferred=[]);for(const n of s._zod.deferred)n();return s}return Object.defineProperty(r,"name",{value:e}),Object.defineProperty(i,"init",{value:a}),Object.defineProperty(i,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class RT extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const TT={};function MT(e){return TT}function DT(e,t){return"bigint"==typeof t?t.toString():t}const LT=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function FT(e){return"string"==typeof e?e:e?.message}function IT(e,t,n){const a={...e,path:e.path??[]};if(!e.message){const s=FT(e.inst?._zod.def?.error?.(e))??FT(t?.error?.(e))??FT(n.customError?.(e))??FT(n.localeError?.(e))??"Invalid input";a.message=s}return delete a.inst,delete a.continue,t?.reportInput||delete a.input,a}const OT=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,DT,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},zT=AT("$ZodError",OT),BT=AT("$ZodError",OT,{Parent:Error}),$T=(e=>(t,n,a,s)=>{const r=a?Object.assign(a,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new RT;if(i.issues.length){const t=new(s?.Err??e)(i.issues.map(e=>IT(e,r,MT())));throw LT(t,s?.callee),t}return i.value})(BT),UT=(e=>async(t,n,a,s)=>{const r=a?Object.assign(a,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},r);if(i instanceof Promise&&(i=await i),i.issues.length){const t=new(s?.Err??e)(i.issues.map(e=>IT(e,r,MT())));throw LT(t,s?.callee),t}return i.value})(BT);function VT(e,t){try{var n=e()}catch(a){return t(a)}return n&&n.then?n.then(void 0,t):n}function qT(e,t){for(var n={};e.length;){var a=e[0],s=a.code,r=a.message,i=a.path.join(".");if(!n[i])if("unionErrors"in a){var o=a.unionErrors[0].errors[0];n[i]={message:o.message,type:o.code}}else n[i]={message:r,type:s};if("unionErrors"in a&&a.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[a.code];n[i]=gR(i,t,n,s,c?[].concat(c,a.message):a.message)}e.shift()}return n}function HT(e,t){for(var n={};e.length;){var a=e[0],s=a.code,r=a.message,i=a.path.join(".");if(!n[i])if("invalid_union"===a.code&&a.errors.length>0){var o=a.errors[0][0];n[i]={message:o.message,type:o.code}}else n[i]={message:r,type:s};if("invalid_union"===a.code&&a.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[a.code];n[i]=gR(i,t,n,s,c?[].concat(c,a.message):a.message)}e.shift()}return n}function GT(e,t,n){if(void 0===n&&(n={}),"_def"in(a=e)&&"object"==typeof a._def&&"typeName"in a._def)return function(s,r,i){try{return Promise.resolve(VT(function(){return Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](s,t)).then(function(e){return i.shouldUseNativeValidation&&NT({},i),{errors:{},values:n.raw?Object.assign({},s):e}})},function(e){if(t=e,Array.isArray(null==t?void 0:t.issues))return{values:{},errors:_T(qT(e.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};var t;throw e}))}catch(a){return Promise.reject(a)}};var a;if(function(e){return"_zod"in e&&"object"==typeof e._zod}(e))return function(s,r,i){try{return Promise.resolve(VT(function(){return Promise.resolve(("sync"===n.mode?$T:UT)(e,s,t)).then(function(e){return i.shouldUseNativeValidation&&NT({},i),{errors:{},values:n.raw?Object.assign({},s):e}})},function(e){if(e instanceof zT)return{values:{},errors:_T(HT(e.issues,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};throw e}))}catch(a){return Promise.reject(a)}};throw new Error("Invalid input: not a Zod schema")}var KT,WT,QT;(WT=KT||(KT={})).assertEqual=e=>{},WT.assertIs=function(e){},WT.assertNever=function(e){throw new Error},WT.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},WT.getValidEnumValues=e=>{const t=WT.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const a of t)n[a]=e[a];return WT.objectValues(n)},WT.objectValues=e=>WT.objectKeys(e).map(function(t){return e[t]}),WT.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},WT.find=(e,t)=>{for(const n of e)if(t(n))return n},WT.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,WT.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},WT.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(QT||(QT={})).mergeShapes=(e,t)=>({...e,...t});const YT=KT.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),XT=e=>{switch(typeof e){case"undefined":return YT.undefined;case"string":return YT.string;case"number":return Number.isNaN(e)?YT.nan:YT.number;case"boolean":return YT.boolean;case"function":return YT.function;case"bigint":return YT.bigint;case"symbol":return YT.symbol;case"object":return Array.isArray(e)?YT.array:null===e?YT.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?YT.promise:"undefined"!=typeof Map&&e instanceof Map?YT.map:"undefined"!=typeof Set&&e instanceof Set?YT.set:"undefined"!=typeof Date&&e instanceof Date?YT.date:YT.object;default:return YT.unknown}},ZT=KT.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class JT extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},a=e=>{for(const s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(a);else if("invalid_return_type"===s.code)a(s.returnTypeError);else if("invalid_arguments"===s.code)a(s.argumentsError);else if(0===s.path.length)n._errors.push(t(s));else{let e=n,a=0;for(;a<s.path.length;){const n=s.path[a];a===s.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(s))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(this),n}static assert(e){if(!(e instanceof JT))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,KT.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const a of this.issues)if(a.path.length>0){const n=a.path[0];t[n]=t[n]||[],t[n].push(e(a))}else n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}JT.create=e=>new JT(e);const eM=(e,t)=>{let n;switch(e.code){case ZT.invalid_type:n=e.received===YT.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ZT.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,KT.jsonStringifyReplacer)}`;break;case ZT.unrecognized_keys:n=`Unrecognized key(s) in object: ${KT.joinValues(e.keys,", ")}`;break;case ZT.invalid_union:n="Invalid input";break;case ZT.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${KT.joinValues(e.options)}`;break;case ZT.invalid_enum_value:n=`Invalid enum value. Expected ${KT.joinValues(e.options)}, received '${e.received}'`;break;case ZT.invalid_arguments:n="Invalid function arguments";break;case ZT.invalid_return_type:n="Invalid function return type";break;case ZT.invalid_date:n="Invalid date";break;case ZT.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:KT.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ZT.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ZT.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ZT.custom:n="Invalid input";break;case ZT.invalid_intersection_types:n="Intersection results could not be merged";break;case ZT.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case ZT.not_finite:n="Number must be finite";break;default:n=t.defaultError,KT.assertNever(e)}return{message:n}};let tM=eM;function nM(e,t){const n=tM,a=(e=>{const{data:t,path:n,errorMaps:a,issueData:s}=e,r=[...n,...s.path||[]],i={...s,path:r};if(void 0!==s.message)return{...s,path:r,message:s.message};let o="";const l=a.filter(e=>!!e).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return{...s,path:r,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===eM?void 0:eM].filter(e=>!!e)});e.common.issues.push(a)}class aM{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if("aborted"===a.status)return sM;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const e=await a.key,t=await a.value;n.push({key:e,value:t})}return aM.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:t,value:s}=a;if("aborted"===t.status)return sM;if("aborted"===s.status)return sM;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===t.value||void 0===s.value&&!a.alwaysSet||(n[t.value]=s.value)}return{status:e.value,value:n}}}const sM=Object.freeze({status:"aborted"}),rM=e=>({status:"dirty",value:e}),iM=e=>({status:"valid",value:e}),oM=e=>"aborted"===e.status,lM=e=>"dirty"===e.status,cM=e=>"valid"===e.status,dM=e=>"undefined"!=typeof Promise&&e instanceof Promise;var uM,hM;(hM=uM||(uM={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},hM.toString=e=>"string"==typeof e?e:e?.message;class mM{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pM=(e,t)=>{if(cM(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new JT(e.common.issues);return this._error=t,this._error}}};function fM(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:s}=e;if(t&&(n||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:s};return{errorMap:(t,s)=>{const{message:r}=e;return"invalid_enum_value"===t.code?{message:r??s.defaultError}:void 0===s.data?{message:r??a??s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:r??n??s.defaultError}},description:s}}class gM{get description(){return this._def.description}_getType(e){return XT(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:XT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new aM,ctx:{common:e.parent.common,data:e.data,parsedType:XT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(dM(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:XT(e)},a=this._parseSync({data:e,path:n.path,parent:n});return pM(n,a)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:XT(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return cM(n)?{value:n.value}:{issues:t.common.issues}}catch(GQ){GQ?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>cM(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:XT(e)},a=this._parse({data:e,path:n.path,parent:n}),s=await(dM(a)?a:Promise.resolve(a));return pM(n,s)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{const s=e(t),r=()=>a.addIssue({code:ZT.custom,...n(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(e=>!!e||(r(),!1)):!!s||(r(),!1)})}refinement(e,t){return this._refinement((n,a)=>!!e(n)||(a.addIssue("function"==typeof t?t(n,a):t),!1))}_refinement(e){return new pD({schema:this,typeName:jD.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return fD.create(this,this._def)}nullable(){return gD.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return JM.create(this)}promise(){return mD.create(this,this._def)}or(e){return nD.create([this,e],this._def)}and(e){return sD.create(this,e,this._def)}transform(e){return new pD({...fM(this._def),schema:this,typeName:jD.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new xD({...fM(this._def),innerType:this,defaultValue:t,typeName:jD.ZodDefault})}brand(){return new bD({typeName:jD.ZodBranded,type:this,...fM(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new vD({...fM(this._def),innerType:this,catchValue:t,typeName:jD.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return wD.create(this,e)}readonly(){return SD.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xM=/^c[^\s-]{8,}$/i,vM=/^[0-9a-z]+$/,yM=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wM=/^[a-z0-9_-]{21}$/i,SM=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jM=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CM=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let kM;const NM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_M=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,EM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,PM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,AM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,RM=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,TM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MM=new RegExp(`^${TM}$`);function DM(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function LM(e){return new RegExp(`^${DM(e)}$`)}function FM(e){let t=`${TM}T${DM(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function IM(e,t){return!("v4"!==t&&t||!NM.test(e))||!("v6"!==t&&t||!EM.test(e))}function OM(e,t){if(!SM.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(a));return"object"==typeof s&&null!==s&&((!("typ"in s)||"JWT"===s?.typ)&&(!!s.alg&&(!t||s.alg===t)))}catch{return!1}}function zM(e,t){return!("v4"!==t&&t||!_M.test(e))||!("v6"!==t&&t||!PM.test(e))}class BM extends gM{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==YT.string){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.string,received:t.parsedType}),sM}const t=new aM;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const s=e.data.length>a.value,r=e.data.length<a.value;(s||r)&&(n=this._getOrReturnCtx(e,n),s?nM(n,{code:ZT.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):r&&nM(n,{code:ZT.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)CM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"email",code:ZT.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)kM||(kM=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),kM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"emoji",code:ZT.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)bM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"uuid",code:ZT.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)wM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"nanoid",code:ZT.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)xM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"cuid",code:ZT.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)vM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"cuid2",code:ZT.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)yM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"ulid",code:ZT.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),nM(n,{validation:"url",code:ZT.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"regex",code:ZT.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){FM(a).test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){MM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){LM(a).test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?jM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"duration",code:ZT.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?IM(e.data,a.version)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"ip",code:ZT.invalid_string,message:a.message}),t.dirty()):"jwt"===a.kind?OM(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"jwt",code:ZT.invalid_string,message:a.message}),t.dirty()):"cidr"===a.kind?zM(e.data,a.version)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"cidr",code:ZT.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?AM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"base64",code:ZT.invalid_string,message:a.message}),t.dirty()):"base64url"===a.kind?RM.test(e.data)||(n=this._getOrReturnCtx(e,n),nM(n,{validation:"base64url",code:ZT.invalid_string,message:a.message}),t.dirty()):KT.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:ZT.invalid_string,...uM.errToObj(n)})}_addCheck(e){return new BM({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...uM.errToObj(e)})}url(e){return this._addCheck({kind:"url",...uM.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...uM.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...uM.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...uM.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...uM.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...uM.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...uM.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...uM.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...uM.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...uM.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...uM.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...uM.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...uM.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...uM.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...uM.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...uM.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...uM.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...uM.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...uM.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...uM.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...uM.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...uM.errToObj(t)})}nonempty(e){return this.min(1,uM.errToObj(e))}trim(){return new BM({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new BM({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new BM({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function $M(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,s=n>a?n:a;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}BM.create=e=>new BM({checks:[],typeName:jD.ZodString,coerce:e?.coerce??!1,...fM(e)});class UM extends gM{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==YT.number){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.number,received:t.parsedType}),sM}let t;const n=new aM;for(const a of this._def.checks)if("int"===a.kind)KT.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==$M(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.not_finite,message:a.message}),n.dirty()):KT.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,uM.toString(t))}gt(e,t){return this.setLimit("min",e,!1,uM.toString(t))}lte(e,t){return this.setLimit("max",e,!0,uM.toString(t))}lt(e,t){return this.setLimit("max",e,!1,uM.toString(t))}setLimit(e,t,n,a){return new UM({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:uM.toString(a)}]})}_addCheck(e){return new UM({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:uM.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:uM.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:uM.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:uM.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:uM.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:uM.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:uM.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:uM.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:uM.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&KT.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}UM.create=e=>new UM({checks:[],typeName:jD.ZodNumber,coerce:e?.coerce||!1,...fM(e)});class VM extends gM{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==YT.bigint)return this._getInvalidInput(e);let t;const n=new aM;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:ZT.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):KT.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.bigint,received:t.parsedType}),sM}gte(e,t){return this.setLimit("min",e,!0,uM.toString(t))}gt(e,t){return this.setLimit("min",e,!1,uM.toString(t))}lte(e,t){return this.setLimit("max",e,!0,uM.toString(t))}lt(e,t){return this.setLimit("max",e,!1,uM.toString(t))}setLimit(e,t,n,a){return new VM({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:uM.toString(a)}]})}_addCheck(e){return new VM({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:uM.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:uM.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:uM.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:uM.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:uM.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}VM.create=e=>new VM({checks:[],typeName:jD.ZodBigInt,coerce:e?.coerce??!1,...fM(e)});class qM extends gM{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==YT.boolean){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.boolean,received:t.parsedType}),sM}return iM(e.data)}}qM.create=e=>new qM({typeName:jD.ZodBoolean,coerce:e?.coerce||!1,...fM(e)});class HM extends gM{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==YT.date){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.date,received:t.parsedType}),sM}if(Number.isNaN(e.data.getTime())){return nM(this._getOrReturnCtx(e),{code:ZT.invalid_date}),sM}const t=new aM;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),nM(n,{code:ZT.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):KT.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new HM({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:uM.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:uM.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}HM.create=e=>new HM({checks:[],coerce:e?.coerce||!1,typeName:jD.ZodDate,...fM(e)});class GM extends gM{_parse(e){if(this._getType(e)!==YT.symbol){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.symbol,received:t.parsedType}),sM}return iM(e.data)}}GM.create=e=>new GM({typeName:jD.ZodSymbol,...fM(e)});class KM extends gM{_parse(e){if(this._getType(e)!==YT.undefined){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.undefined,received:t.parsedType}),sM}return iM(e.data)}}KM.create=e=>new KM({typeName:jD.ZodUndefined,...fM(e)});class WM extends gM{_parse(e){if(this._getType(e)!==YT.null){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.null,received:t.parsedType}),sM}return iM(e.data)}}WM.create=e=>new WM({typeName:jD.ZodNull,...fM(e)});class QM extends gM{constructor(){super(...arguments),this._any=!0}_parse(e){return iM(e.data)}}QM.create=e=>new QM({typeName:jD.ZodAny,...fM(e)});class YM extends gM{constructor(){super(...arguments),this._unknown=!0}_parse(e){return iM(e.data)}}YM.create=e=>new YM({typeName:jD.ZodUnknown,...fM(e)});class XM extends gM{_parse(e){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.never,received:t.parsedType}),sM}}XM.create=e=>new XM({typeName:jD.ZodNever,...fM(e)});class ZM extends gM{_parse(e){if(this._getType(e)!==YT.undefined){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.void,received:t.parsedType}),sM}return iM(e.data)}}ZM.create=e=>new ZM({typeName:jD.ZodVoid,...fM(e)});class JM extends gM{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==YT.array)return nM(t,{code:ZT.invalid_type,expected:YT.array,received:t.parsedType}),sM;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,s=t.data.length<a.exactLength.value;(e||s)&&(nM(t,{code:e?ZT.too_big:ZT.too_small,minimum:s?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(nM(t,{code:ZT.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(nM(t,{code:ZT.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>a.type._parseAsync(new mM(t,e,t.path,n)))).then(e=>aM.mergeArray(n,e));const s=[...t.data].map((e,n)=>a.type._parseSync(new mM(t,e,t.path,n)));return aM.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new JM({...this._def,minLength:{value:e,message:uM.toString(t)}})}max(e,t){return new JM({...this._def,maxLength:{value:e,message:uM.toString(t)}})}length(e,t){return new JM({...this._def,exactLength:{value:e,message:uM.toString(t)}})}nonempty(e){return this.min(1,e)}}function eD(e){if(e instanceof tD){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=fD.create(eD(a))}return new tD({...e._def,shape:()=>t})}return e instanceof JM?new JM({...e._def,type:eD(e.element)}):e instanceof fD?fD.create(eD(e.unwrap())):e instanceof gD?gD.create(eD(e.unwrap())):e instanceof rD?rD.create(e.items.map(e=>eD(e))):e}JM.create=(e,t)=>new JM({type:e,minLength:null,maxLength:null,exactLength:null,typeName:jD.ZodArray,...fM(t)});class tD extends gM{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=KT.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==YT.object){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.object,received:t.parsedType}),sM}const{status:t,ctx:n}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),r=[];if(!(this._def.catchall instanceof XM&&"strip"===this._def.unknownKeys))for(const o in n.data)s.includes(o)||r.push(o);const i=[];for(const o of s){const e=a[o],t=n.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new mM(n,t,n.path,o)),alwaysSet:o in n.data})}if(this._def.catchall instanceof XM){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of r)i.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)r.length>0&&(nM(n,{code:ZT.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const a=n.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new mM(n,a,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const n=await t.key,a=await t.value;e.push({key:n,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>aM.mergeObjectSync(t,e)):aM.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return uM.errToObj,new tD({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{const a=this._def.errorMap?.(t,n).message??n.defaultError;return"unrecognized_keys"===t.code?{message:uM.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new tD({...this._def,unknownKeys:"strip"})}passthrough(){return new tD({...this._def,unknownKeys:"passthrough"})}extend(e){return new tD({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tD({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:jD.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new tD({...this._def,catchall:e})}pick(e){const t={};for(const n of KT.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new tD({...this._def,shape:()=>t})}omit(e){const t={};for(const n of KT.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new tD({...this._def,shape:()=>t})}deepPartial(){return eD(this)}partial(e){const t={};for(const n of KT.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}return new tD({...this._def,shape:()=>t})}required(e){const t={};for(const n of KT.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof fD;)e=e._def.innerType;t[n]=e}return new tD({...this._def,shape:()=>t})}keyof(){return dD(KT.objectKeys(this.shape))}}tD.create=(e,t)=>new tD({shape:()=>e,unknownKeys:"strip",catchall:XM.create(),typeName:jD.ZodObject,...fM(t)}),tD.strictCreate=(e,t)=>new tD({shape:()=>e,unknownKeys:"strict",catchall:XM.create(),typeName:jD.ZodObject,...fM(t)}),tD.lazycreate=(e,t)=>new tD({shape:e,unknownKeys:"strip",catchall:XM.create(),typeName:jD.ZodObject,...fM(t)});class nD extends gM{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;const n=e.map(e=>new JT(e.ctx.common.issues));return nM(t,{code:ZT.invalid_union,unionErrors:n}),sM});{let e;const a=[];for(const r of n){const n={...t,common:{...t.common,issues:[]},parent:null},s=r._parseSync({data:t.data,path:t.path,parent:n});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:n}),n.common.issues.length&&a.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=a.map(e=>new JT(e));return nM(t,{code:ZT.invalid_union,unionErrors:s}),sM}}get options(){return this._def.options}}function aD(e,t){const n=XT(e),a=XT(t);if(e===t)return{valid:!0,data:e};if(n===YT.object&&a===YT.object){const n=KT.objectKeys(t),a=KT.objectKeys(e).filter(e=>-1!==n.indexOf(e)),s={...e,...t};for(const r of a){const n=aD(e[r],t[r]);if(!n.valid)return{valid:!1};s[r]=n.data}return{valid:!0,data:s}}if(n===YT.array&&a===YT.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let a=0;a<e.length;a++){const s=aD(e[a],t[a]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===YT.date&&a===YT.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}nD.create=(e,t)=>new nD({options:e,typeName:jD.ZodUnion,...fM(t)});class sD extends gM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(e,a)=>{if(oM(e)||oM(a))return sM;const s=aD(e.value,a.value);return s.valid?((lM(e)||lM(a))&&t.dirty(),{status:t.value,value:s.data}):(nM(n,{code:ZT.invalid_intersection_types}),sM)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}sD.create=(e,t,n)=>new sD({left:e,right:t,typeName:jD.ZodIntersection,...fM(n)});class rD extends gM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==YT.array)return nM(n,{code:ZT.invalid_type,expected:YT.array,received:n.parsedType}),sM;if(n.data.length<this._def.items.length)return nM(n,{code:ZT.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),sM;!this._def.rest&&n.data.length>this._def.items.length&&(nM(n,{code:ZT.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new mM(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(a).then(e=>aM.mergeArray(t,e)):aM.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new rD({...this._def,rest:e})}}rD.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new rD({items:e,typeName:jD.ZodTuple,rest:null,...fM(t)})};class iD extends gM{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==YT.map)return nM(n,{code:ZT.invalid_type,expected:YT.map,received:n.parsedType}),sM;const a=this._def.keyType,s=this._def.valueType,r=[...n.data.entries()].map(([e,t],r)=>({key:a._parse(new mM(n,e,n.path,[r,"key"])),value:s._parse(new mM(n,t,n.path,[r,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of r){const a=await n.key,s=await n.value;if("aborted"===a.status||"aborted"===s.status)return sM;"dirty"!==a.status&&"dirty"!==s.status||t.dirty(),e.set(a.value,s.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of r){const a=n.key,s=n.value;if("aborted"===a.status||"aborted"===s.status)return sM;"dirty"!==a.status&&"dirty"!==s.status||t.dirty(),e.set(a.value,s.value)}return{status:t.value,value:e}}}}iD.create=(e,t,n)=>new iD({valueType:t,keyType:e,typeName:jD.ZodMap,...fM(n)});class oD extends gM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==YT.set)return nM(n,{code:ZT.invalid_type,expected:YT.set,received:n.parsedType}),sM;const a=this._def;null!==a.minSize&&n.data.size<a.minSize.value&&(nM(n,{code:ZT.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&n.data.size>a.maxSize.value&&(nM(n,{code:ZT.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const s=this._def.valueType;function r(e){const n=new Set;for(const a of e){if("aborted"===a.status)return sM;"dirty"===a.status&&t.dirty(),n.add(a.value)}return{status:t.value,value:n}}const i=[...n.data.values()].map((e,t)=>s._parse(new mM(n,e,n.path,t)));return n.common.async?Promise.all(i).then(e=>r(e)):r(i)}min(e,t){return new oD({...this._def,minSize:{value:e,message:uM.toString(t)}})}max(e,t){return new oD({...this._def,maxSize:{value:e,message:uM.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}oD.create=(e,t)=>new oD({valueType:e,minSize:null,maxSize:null,typeName:jD.ZodSet,...fM(t)});class lD extends gM{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}lD.create=(e,t)=>new lD({getter:e,typeName:jD.ZodLazy,...fM(t)});class cD extends gM{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return nM(t,{received:t.data,code:ZT.invalid_literal,expected:this._def.value}),sM}return{status:"valid",value:e.data}}get value(){return this._def.value}}function dD(e,t){return new uD({values:e,typeName:jD.ZodEnum,...fM(t)})}cD.create=(e,t)=>new cD({value:e,typeName:jD.ZodLiteral,...fM(t)});class uD extends gM{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return nM(t,{expected:KT.joinValues(n),received:t.parsedType,code:ZT.invalid_type}),sM}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return nM(t,{received:t.data,code:ZT.invalid_enum_value,options:n}),sM}return iM(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return uD.create(e,{...this._def,...t})}exclude(e,t=this._def){return uD.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}uD.create=dD;class hD extends gM{_parse(e){const t=KT.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==YT.string&&n.parsedType!==YT.number){const e=KT.objectValues(t);return nM(n,{expected:KT.joinValues(e),received:n.parsedType,code:ZT.invalid_type}),sM}if(this._cache||(this._cache=new Set(KT.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=KT.objectValues(t);return nM(n,{received:n.data,code:ZT.invalid_enum_value,options:e}),sM}return iM(e.data)}get enum(){return this._def.values}}hD.create=(e,t)=>new hD({values:e,typeName:jD.ZodNativeEnum,...fM(t)});class mD extends gM{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==YT.promise&&!1===t.common.async)return nM(t,{code:ZT.invalid_type,expected:YT.promise,received:t.parsedType}),sM;const n=t.parsedType===YT.promise?t.data:Promise.resolve(t.data);return iM(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}mD.create=(e,t)=>new mD({type:e,typeName:jD.ZodPromise,...fM(t)});class pD extends gM{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===jD.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,s={addIssue:e=>{nM(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===a.type){const e=a.transform(n.data,s);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return sM;const a=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===a.status?sM:"dirty"===a.status||"dirty"===t.value?rM(a.value):a});{if("aborted"===t.value)return sM;const a=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===a.status?sM:"dirty"===a.status||"dirty"===t.value?rM(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,s);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===a.status?sM:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?sM:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!cM(e))return sM;const r=a.transform(e.value,s);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>cM(e)?Promise.resolve(a.transform(e.value,s)).then(e=>({status:t.value,value:e})):sM)}KT.assertNever(a)}}pD.create=(e,t,n)=>new pD({schema:e,typeName:jD.ZodEffects,effect:t,...fM(n)}),pD.createWithPreprocess=(e,t,n)=>new pD({schema:t,effect:{type:"preprocess",transform:e},typeName:jD.ZodEffects,...fM(n)});class fD extends gM{_parse(e){return this._getType(e)===YT.undefined?iM(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fD.create=(e,t)=>new fD({innerType:e,typeName:jD.ZodOptional,...fM(t)});class gD extends gM{_parse(e){return this._getType(e)===YT.null?iM(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gD.create=(e,t)=>new gD({innerType:e,typeName:jD.ZodNullable,...fM(t)});class xD extends gM{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===YT.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}xD.create=(e,t)=>new xD({innerType:e,typeName:jD.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...fM(t)});class vD extends gM{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return dM(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new JT(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new JT(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}vD.create=(e,t)=>new vD({innerType:e,typeName:jD.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...fM(t)});class yD extends gM{_parse(e){if(this._getType(e)!==YT.nan){const t=this._getOrReturnCtx(e);return nM(t,{code:ZT.invalid_type,expected:YT.nan,received:t.parsedType}),sM}return{status:"valid",value:e.data}}}yD.create=e=>new yD({typeName:jD.ZodNaN,...fM(e)});class bD extends gM{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class wD extends gM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?sM:"dirty"===e.status?(t.dirty(),rM(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?sM:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new wD({in:e,out:t,typeName:jD.ZodPipeline})}}class SD extends gM{_parse(e){const t=this._def.innerType._parse(e),n=e=>(cM(e)&&(e.value=Object.freeze(e.value)),e);return dM(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}var jD,CD;SD.create=(e,t)=>new SD({innerType:e,typeName:jD.ZodReadonly,...fM(t)}),(CD=jD||(jD={})).ZodString="ZodString",CD.ZodNumber="ZodNumber",CD.ZodNaN="ZodNaN",CD.ZodBigInt="ZodBigInt",CD.ZodBoolean="ZodBoolean",CD.ZodDate="ZodDate",CD.ZodSymbol="ZodSymbol",CD.ZodUndefined="ZodUndefined",CD.ZodNull="ZodNull",CD.ZodAny="ZodAny",CD.ZodUnknown="ZodUnknown",CD.ZodNever="ZodNever",CD.ZodVoid="ZodVoid",CD.ZodArray="ZodArray",CD.ZodObject="ZodObject",CD.ZodUnion="ZodUnion",CD.ZodDiscriminatedUnion="ZodDiscriminatedUnion",CD.ZodIntersection="ZodIntersection",CD.ZodTuple="ZodTuple",CD.ZodRecord="ZodRecord",CD.ZodMap="ZodMap",CD.ZodSet="ZodSet",CD.ZodFunction="ZodFunction",CD.ZodLazy="ZodLazy",CD.ZodLiteral="ZodLiteral",CD.ZodEnum="ZodEnum",CD.ZodEffects="ZodEffects",CD.ZodNativeEnum="ZodNativeEnum",CD.ZodOptional="ZodOptional",CD.ZodNullable="ZodNullable",CD.ZodDefault="ZodDefault",CD.ZodCatch="ZodCatch",CD.ZodPromise="ZodPromise",CD.ZodBranded="ZodBranded",CD.ZodPipeline="ZodPipeline",CD.ZodReadonly="ZodReadonly";const kD=BM.create,ND=UM.create;VM.create;const _D=qM.create;HM.create,XM.create,JM.create;const ED=tD.create;nD.create,sD.create,rD.create;const PD=cD.create;uD.create;const AD=hD.create;mD.create,fD.create,gD.create;const RD=e=>UM.create({...e,coerce:!0}),TD=["United States","United Kingdom","Canada","Australia","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Portugal","Greece","Ireland","Japan","China","India","South Korea","Singapore","Malaysia","Thailand","Indonesia","Philippines","Vietnam","Brazil","Mexico","Argentina","Chile","Colombia","Peru","South Africa","Egypt","Nigeria","Kenya","United Arab Emirates","Saudi Arabia","Israel","Turkey","Russia","Ukraine","Czech Republic","Hungary","Romania","Bulgaria","New Zealand","Other"],MD=ED({name:kD().optional(),street:kD().optional(),city:kD().optional(),state:kD().optional(),postal_code:kD().optional(),country:kD().optional(),address_type:kD().optional(),is_default:_D(),notes:kD().optional()});function DD({onSubmit:e,defaultValues:t,defaultAddressType:n,addressTypes:a,addressTypeLabels:s,onCancel:r}){const i=!!t,{register:o,handleSubmit:l,control:d,watch:u,formState:{errors:h,isSubmitting:m}}=lT({resolver:GT(MD),defaultValues:{name:t?.name??"",street:t?.street??"",city:t?.city??"",state:t?.state??"",postal_code:t?.postal_code??"",country:t?.country??"",address_type:t?.address_type||n||a[0],is_default:t?.is_default??!1,notes:t?.notes??""}}),p=u("address_type"),f=e=>s?.[e]||e.charAt(0).toUpperCase()+e.slice(1);return c.jsxs("form",{onSubmit:l(async t=>{if(!i&&!t.address_type)return;const n={name:t.name?.trim()||void 0,street:t.street?.trim()||void 0,city:t.city?.trim()||void 0,state:t.state?.trim()||void 0,postal_code:t.postal_code?.trim()||void 0,country:t.country?.trim()||void 0,address_type:t.address_type,is_default:t.is_default,notes:t.notes?.trim()||void 0};await e(n)}),className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs(Rl,{"data-invalid":!!h.name,children:[c.jsx(Tl,{htmlFor:"name",children:"Address Name"}),c.jsx(_l,{id:"name",...o("name"),placeholder:"e.g., Main Office, Warehouse, Headquarters",disabled:m,className:sl(h.name&&"border-destructive")}),h.name?c.jsx(Ml,{children:h.name.message}):c.jsx(Ml,{className:"text-xs text-muted-foreground",children:"Optional: A descriptive name to identify this address"})]}),!i&&c.jsxs(Rl,{"data-invalid":!!h.address_type,children:[c.jsx(Tl,{htmlFor:"address_type",children:"Address Type"}),c.jsx(fR,{name:"address_type",control:d,render:({field:e})=>c.jsxs(bx,{value:e.value,onValueChange:e.onChange,disabled:m,children:[c.jsx(Sx,{id:"address_type",className:sl(h.address_type&&"border-destructive"),children:c.jsx(wx,{})}),c.jsx(kx,{children:a.map(e=>c.jsx(Nx,{value:e,children:f(e)},e))})]})}),h.address_type&&c.jsx(Ml,{children:h.address_type.message})]}),c.jsxs(Rl,{className:"md:col-span-2","data-invalid":!!h.street,children:[c.jsx(Tl,{htmlFor:"street",children:"Street Address"}),c.jsx(_l,{id:"street",...o("street"),placeholder:"Enter street address",disabled:m,className:sl(h.street&&"border-destructive")}),h.street&&c.jsx(Ml,{children:h.street.message})]}),c.jsxs(Rl,{"data-invalid":!!h.city,children:[c.jsx(Tl,{htmlFor:"city",children:"City"}),c.jsx(_l,{id:"city",...o("city"),placeholder:"Enter city",disabled:m,className:sl(h.city&&"border-destructive")}),h.city&&c.jsx(Ml,{children:h.city.message})]}),c.jsxs(Rl,{"data-invalid":!!h.state,children:[c.jsx(Tl,{htmlFor:"state",children:"State/Province"}),c.jsx(_l,{id:"state",...o("state"),placeholder:"Enter state or province",disabled:m,className:sl(h.state&&"border-destructive")}),h.state&&c.jsx(Ml,{children:h.state.message})]}),c.jsxs(Rl,{"data-invalid":!!h.postal_code,children:[c.jsx(Tl,{htmlFor:"postal_code",children:"Postal Code"}),c.jsx(_l,{id:"postal_code",...o("postal_code"),placeholder:"Enter postal code",disabled:m,className:sl(h.postal_code&&"border-destructive")}),h.postal_code&&c.jsx(Ml,{children:h.postal_code.message})]}),c.jsxs(Rl,{"data-invalid":!!h.country,children:[c.jsx(Tl,{htmlFor:"country",children:"Country"}),c.jsx(fR,{name:"country",control:d,render:({field:e})=>c.jsxs(bx,{value:e.value||void 0,onValueChange:t=>e.onChange(t||""),disabled:m,children:[c.jsx(Sx,{id:"country",className:sl(h.country&&"border-destructive"),children:c.jsx(wx,{placeholder:"Select country"})}),c.jsx(kx,{children:TD.map(e=>c.jsx(Nx,{value:e,children:e},e))})]})}),h.country&&c.jsx(Ml,{children:h.country.message})]}),c.jsx(Rl,{children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(fR,{name:"is_default",control:d,render:({field:e})=>c.jsx(VC,{id:"is_default",checked:e.value,onCheckedChange:t=>e.onChange("indeterminate"!==t&&t),disabled:m})}),c.jsxs(Tl,{htmlFor:"is_default",className:"cursor-pointer",children:["Set as default"," ",p?f(p):""," address"]})]})})]}),c.jsxs(Rl,{"data-invalid":!!h.notes,children:[c.jsx(Tl,{htmlFor:"notes",children:"Notes"}),c.jsx(Dl,{id:"notes",...o("notes"),placeholder:"Additional notes (optional)",rows:3,disabled:m,className:sl(h.notes&&"border-destructive")}),h.notes&&c.jsx(Ml,{children:h.notes.message})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx(bl,{type:"button",variant:"outline",onClick:r,disabled:m,children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:m,children:m?"Saving...":i?"Update Address":"Add Address"})]})]})}function LD(e){const t=[];return e.street&&t.push(e.street),e.city&&t.push(e.city),e.state&&t.push(e.state),e.postal_code&&t.push(e.postal_code),e.country&&t.push(e.country),t.length>0?t.join(", "):"No address details"}function FD({address:e,formatAddressTypeLabel:t,onEdit:n,onDelete:a,onSetDefault:s}){return c.jsx(Sl,{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(NC,{variant:e.is_default?"default":"secondary",children:(r=e.address_type,t?t(r):r.charAt(0).toUpperCase()+r.slice(1))}),e.is_default&&c.jsxs(NC,{variant:"outline",className:"flex items-center gap-1",children:[c.jsx(Yg,{className:"h-3 w-3"}),"Default"]})]}),e.name&&c.jsx("p",{className:"text-sm font-semibold mb-1",children:e.name}),c.jsx("p",{className:"text-sm",children:LD(e)}),e.notes&&c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e.notes})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!e.is_default&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:s,title:"Set as default",children:c.jsx(Qg,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"ghost",size:"sm",onClick:n,title:"Edit",children:c.jsx(Kg,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"ghost",size:"sm",onClick:a,disabled:e.is_default,title:e.is_default?"Cannot delete default address":"Delete",children:c.jsx(ax,{className:"h-4 w-4"})})]})]})});var r}function ID({entityId:e,service:t,config:n,onAddressesChanged:a,addDialogOpen:s,onAddDialogOpenChange:r}){const[i,o]=p.useState([]),[l,d]=p.useState(!1),[u,h]=p.useState(!1),m=s??u,f=r??h,[g,x]=p.useState(!1),[v,y]=p.useState(!1),[b,w]=p.useState(null),[S,j]=p.useState(null),{toast:C}=Vk(),k=e=>n.getAddressId?n.getAddressId(e):e.id,N=e=>n.formatAddressTypeLabel?n.formatAddressTypeLabel(e):n.addressTypeLabels?.[e]||e.charAt(0).toUpperCase()+e.slice(1),_=async()=>{d(!0);try{const n=await t.listAddresses(e);o(n)}catch(n){C({title:"Error",description:n instanceof Error?n.message:"Failed to load addresses",variant:"destructive"})}finally{d(!1)}};p.useEffect(()=>{e&&_()},[e]);const E=n.addressTypes.reduce((e,t)=>(e[t]=i.filter(e=>e.address_type===t),e),{}),P=n.defaultAddressType||n.addressTypes[0],A=n.entityLabel||"entity";return c.jsxs("div",{className:"space-y-6",children:[c.jsx(ub,{open:m,onOpenChange:f,children:c.jsxs(pb,{className:"max-w-2xl",children:[c.jsx(fb,{children:c.jsxs(xb,{children:["Add ",N(P)," Address"]})}),c.jsx(DD,{onSubmit:async n=>{try{if(!("address_type"in n)||!n.address_type)throw new Error("Address type is required");await t.createAddress(e,n),C({title:"Success",description:"Address added successfully"}),f(!1),await _(),a?.()}catch(s){throw C({title:"Error",description:s instanceof Error?s.message:"Failed to add address",variant:"destructive"}),s}},defaultAddressType:P,addressTypes:n.addressTypes,addressTypeLabels:n.addressTypeLabels,onCancel:()=>f(!1)})]})}),l?c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading addresses..."}):0===i.length?c.jsx(Sl,{className:"p-6",children:c.jsxs("div",{className:"text-center text-muted-foreground",children:["No addresses found. Add a"," ",N(P).toLowerCase()," address to get started."]})}):c.jsx("div",{className:"space-y-6",children:n.addressTypes.map(n=>{const s=E[n];return 0===s.length?null:c.jsxs("div",{children:[c.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:[N(n)," Addresses"]}),c.jsx("div",{className:"space-y-3",children:s.map(n=>c.jsx(FD,{address:n,formatAddressTypeLabel:N,onEdit:()=>{j(n),x(!0)},onDelete:()=>{var e;(e=n).is_default?C({title:"Cannot Delete",description:"Default addresses cannot be deleted. Please set another address as default first, or edit this address instead.",variant:"destructive"}):(w(e),y(!0))},onSetDefault:()=>(async n=>{try{await t.setDefaultAddress(e,n),C({title:"Success",description:"Default address updated successfully"}),await _(),a?.()}catch(s){C({title:"Error",description:s instanceof Error?s.message:"Failed to set default address",variant:"destructive"})}})(k(n))},k(n)))})]},n)})}),S&&c.jsx(ub,{open:g,onOpenChange:e=>{x(e),e||j(null)},children:c.jsxs(pb,{className:"max-w-2xl",children:[c.jsx(fb,{children:c.jsx(xb,{children:"Edit Address"})}),c.jsx(DD,{onSubmit:n=>(async(n,s)=>{try{await t.updateAddress(e,n,s),C({title:"Success",description:"Address updated successfully"}),x(!1),j(null),await _(),a?.()}catch(r){throw C({title:"Error",description:r instanceof Error?r.message:"Failed to update address",variant:"destructive"}),r}})(k(S),n),defaultValues:{name:S.name,street:S.street,city:S.city,state:S.state,postal_code:S.postal_code,country:S.country,address_type:S.address_type,is_default:S.is_default,notes:S.notes||void 0},addressTypes:n.addressTypes,addressTypeLabels:n.addressTypeLabels,onCancel:()=>{x(!1),j(null)}})]})}),c.jsx(bA,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:"Delete Address",description:b?c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{children:"Are you sure you want to delete this address?"}),b.name&&c.jsx("p",{className:"text-sm font-semibold",children:b.name}),c.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:LD(b)}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:["This action cannot be undone. The address will be removed from this ",A,"."]})]}):void 0,confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(b)try{await t.deleteAddress(e,k(b)),C({title:"Success",description:"Address deleted successfully"}),y(!1),w(null),await _(),a?.()}catch(n){C({title:"Error",description:n instanceof Error?n.message:"Failed to delete address",variant:"destructive"})}}},cancelAction:{label:"Cancel",onClick:()=>{y(!1),w(null)}}})]})}const OD=p.forwardRef(({className:e,variant:t="default",children:n,...a},s)=>c.jsx(xy,{ref:s,className:sl("underline"===t?"inline-flex h-auto items-center gap-4 border-b border-border mb-4 bg-transparent p-0":"inline-flex h-auto gap-1 bg-muted/30 p-1 mb-2 rounded-lg border",e),...a,children:n}));OD.displayName="CustomTabsList";const zD=p.forwardRef(({className:e,variant:t="default",icon:n,children:a,...s},r)=>{const i=c.jsxs("span",{className:"flex items-center gap-2",children:[n&&c.jsx(n,{className:"h-4 w-4"}),a]});return"underline"===t?c.jsx(vy,{ref:r,className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","border-transparent text-muted-foreground hover:text-foreground","data-[state=active]:border-primary data-[state=active]:text-primary","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",e),...s,children:i}):c.jsx(vy,{ref:r,className:sl("h-7 px-3 text-xs font-medium rounded-md bg-transparent text-muted-foreground transition-all","hover:text-foreground hover:bg-muted/50","data-[state=active]:bg-muted data-[state=active]:text-foreground data-[state=active]:shadow-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",e),...s,children:i})});zD.displayName="CustomTabsTrigger";const BD=p.forwardRef(({className:e,children:t,...n},a)=>c.jsx(yy,{ref:a,className:sl("mt-0 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n,children:t}));function $D({defaultValue:e,value:t,onValueChange:n,items:a,variant:s="default",className:r,listClassName:i,triggerClassName:o,contentClassName:l,children:d}){const u=void 0!==t?{value:t,onValueChange:n,className:r}:{defaultValue:e,onValueChange:n,className:r};return c.jsx(gy,{...u,children:a?c.jsxs(c.Fragment,{children:[c.jsx(OD,{variant:s,className:i,children:a.map(e=>c.jsx(zD,{value:e.value,variant:s,icon:e.icon,disabled:e.disabled,className:o,children:e.label},e.value))}),a.map(e=>c.jsx(BD,{value:e.value,className:l,children:e.content},e.value))]}):d})}function UD({tabs:e,defaultValue:t,value:n,onValueChange:a,className:s,tabClassName:r,contentClassName:i,children:o}){const[l,d]=p.useState(n||t||e[0]?.value||""),u=void 0!==n?n:l;return p.useEffect(()=>{void 0!==n&&n!==l&&d(n)},[n,l]),c.jsxs("div",{className:sl("",s),children:[c.jsx("div",{className:"border-b mb-4",children:c.jsx("div",{className:"flex gap-4",children:e.map(e=>{const t=e.icon,s=u===e.value;return c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors",s?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground",e.disabled&&"pointer-events-none opacity-50",r),onClick:()=>{return!e.disabled&&(t=e.value,void 0===n&&d(t),void a?.(t));var t},disabled:e.disabled,children:c.jsxs("span",{className:"flex items-center gap-2",children:[t&&c.jsx(t,{className:"h-4 w-4"}),e.label]})},e.value)})})}),c.jsx("div",{className:sl("mt-0",i),children:o?.(u)})]})}function VD(e,t){let n=e.tabs.find(e=>e.path===t||e.path===t+"/");return n||(n=e.tabs.find(e=>{if(!e.path.includes("$"))return!1;const n=e.path.replace(/\$[^/]+/g,"[^/]+");return new RegExp(`^${n}$`).test(t)}),n||null)}function qD({title:e,className:t,children:n,showBorder:a=!1}){return c.jsxs("div",{className:sl(a&&"pt-2 border-t",t),children:[e&&c.jsx("h4",{className:"text-sm font-medium mb-3",children:e}),n]})}function HD({label:e,value:t,render:n,preserveWhitespace:a=!1,linkType:s="none",dataType:r="auto",className:i,labelClassName:o,valueClassName:l,icon:d,span:u,hideIfEmpty:h=!0}){if(h&&null==t)return null;if(h&&"string"==typeof t&&""===t.trim())return null;const m=f.isValidElement(t);let p;p=n?n(t):m?t:function(e,t="auto"){if(null==e)return"N/A";if(e instanceof Date)return e.toLocaleString();if("string"===t||"email"===t||"phone"===t||"url"===t)return String(e||"");if("date"===t){if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}return String(e)}if("string"==typeof e){const n=e.trim();if(!n)return"N/A";if("auto"===t&&function(e){if(!e||e.length<6)return!1;if(/[\s\-\+\(\)]/.test(e))return!1;if(e.includes("@"))return!1;if(e.includes("://")||e.includes("www."))return!1;if(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?)?$/.test(e))return!0;if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{4}$/.test(e))return!0;if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{4}$/.test(e))return!0;if(/^\d{1,2}:\d{2}(:\d{2})?$/.test(e))return!0;const t=e.toLowerCase();return!!["january","february","march","april","may","june","july","august","september","october","november","december","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].some(e=>t.includes(e))}(n)){const e=new Date(n);if(!Number.isNaN(e.getTime()))return e.toLocaleString()}return n}if("number"==typeof e||"boolean"==typeof e)return String(e);try{return JSON.stringify(e)}catch{return String(e)}}(t,r);const g="none"!==s&&!m&&"string"==typeof t&&""!==t.trim(),x="email"===s?`mailto:${t}`:"tel"===s?`tel:${t}`:"external"===s?t:void 0,v="external"===s?{target:"_blank",rel:"noopener noreferrer"}:{};return c.jsxs("div",{className:u,children:[e&&c.jsxs("dt",{className:sl("text-sm font-medium flex items-center gap-1",o),children:[d&&c.jsx(d,{className:"h-3 w-3"}),e]}),c.jsx("dd",{className:sl("mt-1 text-sm",!m&&!g&&"text-muted-foreground",a&&"whitespace-pre-wrap",l,i),children:g?c.jsx("a",{href:x,...v,className:"text-primary hover:underline",children:p}):p})]})}function GD({title:e,icon:t,columns:n=3,className:a,gridClassName:s,children:r,conditional:i=!0}){const o=f.Children.toArray(r).filter(e=>null!=e);if(i&&0===o.length)return null;const l={1:"grid gap-4 md:grid-cols-1",2:"grid gap-4 md:grid-cols-2",3:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",4:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"}[n];return c.jsxs("div",{className:a,children:[e&&c.jsxs("h3",{className:sl("mb-4 text-sm font-medium text-muted-foreground uppercase tracking-wider",t&&"flex items-center gap-2"),children:[t&&c.jsx(t,{className:"h-4 w-4"}),e]}),c.jsx("div",{className:sl(l,s),children:r})]})}function KD({value:e,onChange:t,onSave:n,isSaving:a=!1,disabled:s=!1,editable:r=!0,maxLength:i=2e3,label:o="Notes",description:l,placeholder:d="Enter notes...",rows:u=10,className:h}){const[m,f]=p.useState(!1);return c.jsxs(Sl,{className:sl("p-4",h),children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx(Fl,{className:"text-sm font-medium",children:o}),l&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l})]}),r&&c.jsx(bl,{type:"button",size:"sm",onClick:()=>f(!0),disabled:a||s,children:a?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Note"})]}),c.jsxs("div",{children:[c.jsx(Dl,{value:e,onChange:e=>t(e.target.value),placeholder:d,rows:u,maxLength:i,disabled:a||s||!r,className:"resize-none"}),c.jsxs("div",{className:"text-xs text-muted-foreground text-right mt-1",children:[e.length,"/",i," characters"]})]})]}),c.jsx(bA,{open:m,onOpenChange:f,title:"Save Note",description:"Are you sure you want to save changes to the note?",confirmAction:{label:"Save",onClick:()=>{n(),f(!1)}},cancelAction:{label:"Cancel",onClick:()=>f(!1)}})]})}function WD(){return WD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},WD.apply(null,arguments)}function QD(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.includes(a))continue;n[a]=e[a]}return n}function YD(e){var t=p.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(e){n[e]=function(){var n;return(n=t.fn[e]).call.apply(n,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function XD(e){return p.useReducer(function(e,t){return WD({},e,"function"==typeof t?t(e):t)},e)}BD.displayName="CustomTabsContent";var ZD=p.createContext(void 0),JD="cubic-bezier(0.25, 0.8, 0.25, 1)",eL=20,tL="undefined"!=typeof window&&"ontouchstart"in window,nL=function(e,t,n){return Math.max(Math.min(e,n),t)},aL=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),nL(e,1*(1-n),Math.max(6,t)*(1+n))},sL="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?p.useEffect:p.useLayoutEffect;function rL(e,t,n){var a=p.useRef(t);a.current=t,p.useEffect(function(){function t(e){a.current(e)}return e&&window.addEventListener(e,t,n),function(){e&&window.removeEventListener(e,t)}},[e])}var iL=["container"];function oL(e){var t=e.container,n=void 0===t?document.body:t,a=QD(e,iL);return Zt.createPortal(f.createElement("div",WD({},a)),n)}function lL(e){return f.createElement("svg",WD({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function cL(e){return f.createElement("svg",WD({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function dL(e){return f.createElement("svg",WD({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function uL(){return p.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function hL(e){var t=e.touches[0],n=t.clientX,a=t.clientY;if(e.touches.length>=2){var s=e.touches[1],r=s.clientX,i=s.clientY;return[(n+r)/2,(a+i)/2,Math.sqrt(Math.pow(r-n,2)+Math.pow(i-a,2))]}return[n,a,0]}var mL=function(e,t,n,a){var s,r=n*t,i=(r-a)/2,o=e;return r<=a?(s=1,o=0):e>0&&i-e<=0?(s=2,o=i):e<0&&i+e<=0&&(s=3,o=-i),[s,o]};function pL(e,t,n,a,s,r,i,o,l,c){void 0===i&&(i=innerWidth/2),void 0===o&&(o=innerHeight/2),void 0===l&&(l=0),void 0===c&&(c=0);var d=mL(e,r,n,innerWidth)[0],u=mL(t,r,a,innerHeight),h=innerWidth/2,m=innerHeight/2;return{x:i-r/s*(i-(h+e))-h+(a/n>=3&&n*r===innerWidth?0:d?l/2:l),y:o-r/s*(o-(m+t))-m+(u[0]?c/2:c),lastCX:i,lastCY:o}}function fL(e,t,n){var a=e%180!=0;return a?[n,t,a]:[t,n,a]}function gL(e,t,n){var a=fL(n,innerWidth,innerHeight),s=a[0],r=a[1],i=0,o=s,l=r,c=e/t*r,d=t/e*s;return e<s&&t<r?(o=e,l=t):e<s&&t>=r?o=c:e>=s&&t<r||e/t>s/r?l=d:t/e>=3&&!a[2]?i=((l=d)-r)/2:o=c,{width:o,height:l,x:0,y:i,pause:!0}}function xL(e,t){var n=t.leading,a=void 0!==n&&n,s=t.maxWait,r=t.wait,i=void 0===r?s||0:r,o=p.useRef(e);o.current=e;var l=p.useRef(0),c=p.useRef(),d=function(){return c.current&&clearTimeout(c.current)},u=p.useCallback(function(){var e=[].slice.call(arguments),t=Date.now();function n(){l.current=t,d(),o.current.apply(null,e)}var r=l.current,u=t-r;if(0===r&&(a&&n(),l.current=t),void 0!==s){if(u>s)return void n()}else u<i&&(l.current=t);d(),c.current=setTimeout(function(){n(),l.current=0},i)},[i,s,a]);return u.cancel=d,u}var vL=function(e,t,n){return bL(e,t,n,100,function(e){return e},function(){return bL(t,e,n)})},yL=function(e){return 1-Math.pow(1-e,4)};function bL(e,t,n,a,s,r){void 0===a&&(a=400),void 0===s&&(s=yL);var i=t-e;if(0!==i){var o=Date.now(),l=0,c=function(){var t=Math.min(1,(Date.now()-o)/a);n(e+s(t)*i)&&t<1?d():(cancelAnimationFrame(l),t>=1&&r&&r())};d()}function d(){l=requestAnimationFrame(c)}}var wL={T:0,L:0,W:0,H:0,FIT:void 0},SL=function(){var e=p.useRef(!1);return p.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},jL=["className"];function CL(e){var t=e.className,n=void 0===t?"":t,a=QD(e,jL);return f.createElement("div",WD({className:"PhotoView__Spinner "+n},a),f.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},f.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),f.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var kL=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function NL(e){var t=e.src,n=e.loaded,a=e.broken,s=e.className,r=e.onPhotoLoad,i=e.loadingElement,o=e.brokenElement,l=QD(e,kL),c=SL();return t&&!a?f.createElement(f.Fragment,null,f.createElement("img",WD({className:"PhotoView__Photo"+(s?" "+s:""),src:t,onLoad:function(e){var t=e.target;c.current&&r({loaded:!0,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight})},onError:function(){c.current&&r({broken:!0})},draggable:!1,alt:""},l)),!n&&(i?f.createElement("span",{className:"PhotoView__icon"},i):f.createElement(CL,{className:"PhotoView__icon"}))):o?f.createElement("span",{className:"PhotoView__icon"},"function"==typeof o?o({src:t}):o):null}var _L={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function EL(e){var t=e.item,n=t.src,a=t.render,s=t.width,r=void 0===s?0:s,i=t.height,o=void 0===i?0:i,l=t.originRef,c=e.visible,d=e.speed,u=e.easing,h=e.wrapClassName,m=e.className,g=e.style,x=e.loadingElement,v=e.brokenElement,y=e.onPhotoTap,b=e.onMaskTap,w=e.onReachMove,S=e.onReachUp,j=e.onPhotoResize,C=e.isActive,k=e.expose,N=XD(_L),_=N[0],E=N[1],P=p.useRef(0),A=SL(),R=_.naturalWidth,T=void 0===R?r:R,M=_.naturalHeight,D=void 0===M?o:M,L=_.width,F=void 0===L?r:L,I=_.height,O=void 0===I?o:I,z=_.loaded,B=void 0===z?!n:z,$=_.broken,U=_.x,V=_.y,q=_.touched,H=_.stopRaf,G=_.maskTouched,K=_.rotate,W=_.scale,Q=_.CX,Y=_.CY,X=_.lastX,Z=_.lastY,J=_.lastCX,ee=_.lastCY,te=_.lastScale,ne=_.touchTime,ae=_.touchLength,se=_.pause,re=_.reach,ie=YD({onScale:function(e){return oe(aL(e))},onRotate:function(e){K!==e&&(k({rotate:e}),E(WD({rotate:e},gL(T,D,e))))}});function oe(e,t,n){W!==e&&(k({scale:e}),E(WD({scale:e},pL(U,V,F,O,W,e,t,n),e<=1&&{x:0,y:0})))}var le=xL(function(e,t,n){if(void 0===n&&(n=0),(q||G)&&C){var a=fL(K,F,O),s=a[0],r=a[1];if(0===n&&0===P.current){var i=Math.abs(e-Q)<=20,o=Math.abs(t-Y)<=20;if(i&&o)return void E({lastCX:e,lastCY:t});P.current=i?t>Y?3:2:1}var l,c=e-J,d=t-ee;if(0===n){var u=mL(c+X,W,s,innerWidth)[0],h=mL(d+Z,W,r,innerHeight);p=P.current,f=u,g=h[0],x=re,void 0!==(l=f&&1===p||"x"===x?"x":g&&p>1||"y"===x?"y":void 0)&&w(l,e,t,W)}if("x"===l||G)return void E({reach:"x"});var m=aL(W+(n-ae)/100/2*W,T/F,.2);k({scale:m}),E(WD({touchLength:n,reach:l,scale:m},pL(U,V,F,O,W,m,e,t,c,d)))}var p,f,g,x},{maxWait:8});function ce(e){return!H&&!q&&(A.current&&E(WD({},e,{pause:c})),A.current)}var de,ue,he,me,pe,fe,ge,xe,ve=(pe=function(e){return ce({x:e})},fe=function(e){return ce({y:e})},ge=function(e){return A.current&&(k({scale:e}),E({scale:e})),!q&&A.current},xe=YD({X:function(e){return pe(e)},Y:function(e){return fe(e)},S:function(e){return ge(e)}}),function(e,t,n,a,s,r,i,o,l,c,d){var u=fL(c,s,r),h=u[0],m=u[1],p=mL(e,o,h,innerWidth),f=p[0],g=p[1],x=mL(t,o,m,innerHeight),v=x[0],y=x[1],b=Date.now()-d;if(b>=200||o!==i||Math.abs(l-i)>1){var w=pL(e,t,s,r,i,o),S=w.x,j=w.y,C=f?g:S!==e?S:null,k=v?y:j!==t?j:null;return null!==C&&bL(e,C,xe.X),null!==k&&bL(t,k,xe.Y),void(o!==i&&bL(i,o,xe.S))}var N=(e-n)/b,_=(t-a)/b,E=Math.sqrt(Math.pow(N,2)+Math.pow(_,2)),P=!1,A=!1;!function(n){var a,s=n,r=0,o=0,l=function(o){a||(a=o);var l=o-a,u=Math.sign(n),p=-.001*u,g=Math.sign(-s)*Math.pow(s,2)*2e-4,x=s*l+(p+g)*Math.pow(l,2)/2;r+=x,a=o,u*(s+=(p+g)*l)<=0?d():function(n){var a=e+n*(N/E),s=t+n*(_/E),r=mL(a,i,h,innerWidth),o=r[0],l=r[1],c=mL(s,i,m,innerHeight),d=c[0],u=c[1];if(o&&!P&&(P=!0,f?bL(a,l,xe.X):vL(l,a+(a-l),xe.X)),d&&!A&&(A=!0,v?bL(s,u,xe.Y):vL(u,s+(s-u),xe.Y)),P&&A)return!1;var p=P||xe.X(l),g=A||xe.Y(u);return p&&g}(r)?c():d()};function c(){o=requestAnimationFrame(l)}function d(){cancelAnimationFrame(o)}c()}(E)}),ye=(de=y,ue=function(e,t){re||oe(1!==W?1:Math.max(2,T/F),e,t)},he=p.useRef(0),me=xL(function(){he.current=0,de.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var e=[].slice.call(arguments);he.current+=1,me.apply(void 0,e),he.current>=2&&(me.cancel(),he.current=0,ue.apply(void 0,e))});function be(e,t){if(P.current=0,(q||G)&&C){E({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var n=aL(W,T/F);if(ve(U,V,X,Z,F,O,W,n,te,K,ne),S(e,t),Q===e&&Y===t){if(q)return void ye(e,t);G&&b(e,t)}}}function we(e,t,n){void 0===n&&(n=0),E({touched:!0,CX:e,CY:t,lastCX:e,lastCY:t,lastX:U,lastY:V,lastScale:W,touchLength:n,touchTime:Date.now()})}function Se(e){E({maskTouched:!0,CX:e.clientX,CY:e.clientY,lastX:U,lastY:V})}rL(tL?void 0:"mousemove",function(e){e.preventDefault(),le(e.clientX,e.clientY)}),rL(tL?void 0:"mouseup",function(e){be(e.clientX,e.clientY)}),rL(tL?"touchmove":void 0,function(e){e.preventDefault();var t=hL(e);le.apply(void 0,t)},{passive:!1}),rL(tL?"touchend":void 0,function(e){var t=e.changedTouches[0];be(t.clientX,t.clientY)},{passive:!1}),rL("resize",xL(function(){B&&!q&&(E(gL(T,D,K)),j())},{maxWait:8})),sL(function(){C&&k(WD({scale:W,rotate:K},ie))},[C]);var je,Ce,ke,Ne,_e,Ee,Pe,Ae,Re,Te,Me,De,Le,Fe,Ie,Oe,ze,Be,$e,Ue,Ve,qe,He,Ge,Ke,We,Qe,Ye,Xe,Ze,Je,et,tt,nt,at=(je=c,Ce=l,ke=B,Ne=U,_e=V,Te=function(e){return E({pause:e})},Me=Ee=F,De=Pe=O,Le=Ae=W,Fe=Re=d,Ie=Te,Oe=p.useRef(!1),ze=XD({lead:!0,scale:Le}),Be=ze[0],$e=Be.lead,Ue=Be.scale,Ve=ze[1],qe=xL(function(e){try{return Ie(!0),Ve({lead:!1,scale:e}),Promise.resolve()}catch(t){return Promise.reject(t)}},{wait:Fe}),sL(function(){Oe.current?(Ie(!1),Ve({lead:!0}),qe(Le)):Oe.current=!0},[Le]),Ge=(He=$e?[Me*Ue,De*Ue,Le/Ue]:[Me*Le,De*Le,1])[0],Ke=He[1],We=He[2],Qe=function(e,t,n,a,s){var r=p.useState(wL),i=r[0],o=r[1],l=p.useState(0),c=l[0],d=l[1],u=p.useRef(),h=YD({OK:function(){return e&&d(4)}});function m(e){s(!1),d(e)}return p.useEffect(function(){if(u.current||(u.current=Date.now()),n){if(function(e,t){var n=e&&e.current;if(n&&1===n.nodeType){var a=n.getBoundingClientRect();t({T:a.top,L:a.left,W:a.width,H:a.height,FIT:"IMG"===n.tagName?getComputedStyle(n).objectFit:void 0})}}(t,o),e)return Date.now()-u.current<250?(d(1),requestAnimationFrame(function(){d(2),requestAnimationFrame(function(){return m(3)})}),void setTimeout(h.OK,a)):void d(4);m(5)}},[e,n]),[c,i]}(je,Ce,ke,Re,Te),Ye=Qe[0],Xe=Qe[1],Ze=Xe.W,Je=Xe.FIT,et=innerWidth/2,tt=innerHeight/2,[(nt=Ye<3||Ye>4)?Ze?Xe.L:et:Ne+(et-Ee*Ae/2),nt?Ze?Xe.T:tt:_e+(tt-Pe*Ae/2),Ge,nt&&Je?Ge*(Xe.H/Ze):Ke,0===Ye?We:nt?Ze/(Ee*Ae)||.01:We,nt?Je?1:0:1,Ye,Je]),st=at[4],rt=at[6],it="transform "+d+"ms "+u,ot={className:m,onMouseDown:tL?void 0:function(e){e.stopPropagation(),0===e.button&&we(e.clientX,e.clientY,0)},onTouchStart:tL?function(e){e.stopPropagation(),we.apply(void 0,hL(e))}:void 0,onWheel:function(e){if(!re){var t=aL(W-e.deltaY/100/2,T/F);E({stopRaf:!0}),oe(t,e.clientX,e.clientY)}},style:{width:at[2]+"px",height:at[3]+"px",opacity:at[5],objectFit:4===rt?void 0:at[7],transform:K?"rotate("+K+"deg)":void 0,transition:rt>2?it+", opacity "+d+"ms ease, height "+(rt<4?d/2:rt>4?d:0)+"ms "+u:void 0}};return f.createElement("div",{className:"PhotoView__PhotoWrap"+(h?" "+h:""),style:g,onMouseDown:!tL&&C?Se:void 0,onTouchStart:tL&&C?function(e){return Se(e.touches[0])}:void 0},f.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+st+", 0, 0, "+st+", "+at[0]+", "+at[1]+")",transition:q||se?void 0:it,willChange:C?"transform":void 0}},n?f.createElement(NL,WD({src:n,loaded:B,broken:$},ot,{onPhotoLoad:function(e){E(WD({},e,e.loaded&&gL(e.naturalWidth||0,e.naturalHeight||0,K)))},loadingElement:x,brokenElement:v})):a&&a({attrs:ot,scale:st,rotate:K})))}var PL={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function AL(e){var t,n,a,s,r,i,o=e.loop,l=void 0===o?3:o,c=e.speed,d=e.easing,u=e.photoClosable,h=e.maskClosable,m=void 0===h||h,g=e.maskOpacity,x=void 0===g?1:g,v=e.pullClosable,y=void 0===v||v,b=e.bannerVisible,w=void 0===b||b,S=e.overlayRender,j=e.toolbarRender,C=e.className,k=e.maskClassName,N=e.photoClassName,_=e.photoWrapClassName,E=e.loadingElement,P=e.brokenElement,A=e.images,R=e.index,T=void 0===R?0:R,M=e.onIndexChange,D=e.visible,L=e.onClose,F=e.afterClose,I=e.portalContainer,O=XD(PL),z=O[0],B=O[1],$=p.useState(0),U=$[0],V=$[1],q=z.x,H=z.touched,G=z.pause,K=z.lastCX,W=z.lastCY,Q=z.bg,Y=void 0===Q?x:Q,X=z.lastBg,Z=z.overlay,J=z.minimal,ee=z.scale,te=z.rotate,ne=z.onScale,ae=z.onRotate,se=e.hasOwnProperty("index"),re=se?T:U,ie=se?M:V,oe=p.useRef(re),le=A.length,ce=A[re],de="boolean"==typeof l?l:le>l,ue=(t=D,n=F,a=p.useReducer(function(e){return!e},!1)[1],s=p.useRef(0),r=function(e){var n=p.useRef(e);function a(e){n.current=e}return p.useMemo(function(){var e;e=a,t?(e(t),s.current=1):s.current=2},[e]),[n.current,a]}(t),i=r[1],[r[0],s.current,function(){a(),2===s.current&&(i(!1),n&&n()),s.current=0}]),he=ue[0],me=ue[1],pe=ue[2];sL(function(){if(he)return B({pause:!0,x:re*-(innerWidth+eL)}),void(oe.current=re);B(PL)},[he]);var fe=YD({close:function(e){ae&&ae(0),B({overlay:!0,lastBg:Y}),L(e)},changeIndex:function(e,t){void 0===t&&(t=!1);var n=de?oe.current+(e-re):e,a=le-1,s=nL(n,0,a),r=de?n:s,i=innerWidth+eL;B({touched:!1,lastCX:void 0,lastCY:void 0,x:-i*r,pause:t}),oe.current=r,ie&&ie(de?e<0?a:e>a?0:e:s)}}),ge=fe.close,xe=fe.changeIndex;function ve(e){return e?ge():B({overlay:!Z})}function ye(){B({x:-(innerWidth+eL)*re,lastCX:void 0,lastCY:void 0,pause:!0}),oe.current=re}function be(e,t,n,a){"x"===e?function(e){if(void 0!==K){var t=e-K,n=t;!de&&(0===re&&t>0||re===le-1&&t<0)&&(n=t/2),B({touched:!0,lastCX:K,x:-(innerWidth+eL)*oe.current+n,pause:!1})}else B({touched:!0,lastCX:e,x:q,pause:!1})}(t):"y"===e&&function(e,t){if(void 0!==W){var n=null===x?null:nL(x,.01,x-Math.abs(e-W)/100/4);B({touched:!0,lastCY:W,bg:1===t?n:x,minimal:1===t})}else B({touched:!0,lastCY:e,bg:Y,minimal:!0})}(n,a)}function we(e,t){var n=e-(null!=K?K:e),a=t-(null!=W?W:t),s=!1;if(n<-40)xe(re+1);else if(n>40)xe(re-1);else{var r=-(innerWidth+eL)*oe.current;Math.abs(a)>100&&J&&y&&(s=!0,ge()),B({touched:!1,x:r,lastCX:void 0,lastCY:void 0,bg:x,overlay:!!s||Z})}}rL("keydown",function(e){if(D)switch(e.key){case"ArrowLeft":xe(re-1,!0);break;case"ArrowRight":xe(re+1,!0);break;case"Escape":ge()}});var Se=function(e,t,n){return p.useMemo(function(){var a=e.length;return n?e.concat(e).concat(e).slice(a+t-1,a+t+2):e.slice(Math.max(t-1,0),Math.min(t+2,a+1))},[e,t,n])}(A,re,de);if(!he)return null;var je=Z&&!me,Ce=D?Y:X,ke=ne&&ae&&{images:A,index:re,visible:D,onClose:ge,onIndexChange:xe,overlayVisible:je,overlay:ce&&ce.overlay,scale:ee,rotate:te,onScale:ne,onRotate:ae},Ne=c?c(me):400,_e=d?d(me):JD,Ee=c?c(3):600,Pe=d?d(3):JD;return f.createElement(oL,{className:"PhotoView-Portal"+(je?"":" PhotoView-Slider__clean")+(D?"":" PhotoView-Slider__willClose")+(C?" "+C:""),role:"dialog",onClick:function(e){return e.stopPropagation()},container:I},D&&f.createElement(uL,null),f.createElement("div",{className:"PhotoView-Slider__Backdrop"+(k?" "+k:"")+(1===me?" PhotoView-Slider__fadeIn":2===me?" PhotoView-Slider__fadeOut":""),style:{background:Ce?"rgba(0, 0, 0, "+Ce+")":void 0,transitionTimingFunction:_e,transitionDuration:(H?0:Ne)+"ms",animationDuration:Ne+"ms"},onAnimationEnd:pe}),w&&f.createElement("div",{className:"PhotoView-Slider__BannerWrap"},f.createElement("div",{className:"PhotoView-Slider__Counter"},re+1," / ",le),f.createElement("div",{className:"PhotoView-Slider__BannerRight"},j&&ke&&j(ke),f.createElement(lL,{className:"PhotoView-Slider__toolbarIcon",onClick:ge}))),Se.map(function(e,t){var n=de||0!==re?oe.current-1+t:re+t;return f.createElement(EL,{key:de?e.key+"/"+e.src+"/"+n:e.key,item:e,speed:Ne,easing:_e,visible:D,onReachMove:be,onReachUp:we,onPhotoTap:function(){return ve(u)},onMaskTap:function(){return ve(m)},wrapClassName:_,className:N,style:{left:(innerWidth+eL)*n+"px",transform:"translate3d("+q+"px, 0px, 0)",transition:H||G?void 0:"transform "+Ee+"ms "+Pe},loadingElement:E,brokenElement:P,onPhotoResize:ye,isActive:oe.current===n,expose:B})}),!tL&&w&&f.createElement(f.Fragment,null,(de||0!==re)&&f.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return xe(re-1,!0)}},f.createElement(cL,null)),(de||re+1<le)&&f.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return xe(re+1,!0)}},f.createElement(dL,null))),S&&ke&&f.createElement("div",{className:"PhotoView-Slider__Overlay"},S(ke)))}var RL=["children","onIndexChange","onVisibleChange"],TL={images:[],visible:!1,index:0};function ML(e){var t=e.children,n=e.onIndexChange,a=e.onVisibleChange,s=QD(e,RL),r=XD(TL),i=r[0],o=r[1],l=p.useRef(0),c=i.images,d=i.visible,u=i.index,h=YD({nextId:function(){return l.current+=1},update:function(e){var t=c.findIndex(function(t){return t.key===e.key});if(t>-1){var n=c.slice();return n.splice(t,1,e),void o({images:n})}o(function(t){return{images:t.images.concat(e)}})},remove:function(e){o(function(t){var n=t.images.filter(function(t){return t.key!==e});return{images:n,index:Math.min(n.length-1,u)}})},show:function(e){var t=c.findIndex(function(t){return t.key===e});o({visible:!0,index:t}),a&&a(!0,t,i)}}),m=YD({close:function(){o({visible:!1}),a&&a(!1,u,i)},changeIndex:function(e){o({index:e}),n&&n(e,i)}}),g=p.useMemo(function(){return WD({},i,h)},[i,h]);return f.createElement(ZD.Provider,{value:g},t,f.createElement(AL,WD({images:c,visible:d,index:u,onIndexChange:m.changeIndex,onClose:m.close},s)))}var DL=function(e){var t,n,a=e.src,s=e.render,r=e.overlay,i=e.width,o=e.height,l=e.triggers,c=void 0===l?["onClick"]:l,d=e.children,u=p.useContext(ZD),h=(t=function(){return u.nextId()},(n=p.useRef({sign:!1,fn:void 0}).current).sign||(n.sign=!0,n.fn=t()),n.fn),m=p.useRef(null);p.useImperativeHandle(null==d?void 0:d.ref,function(){return m.current}),p.useEffect(function(){return function(){u.remove(h)}},[]);var f=YD({render:function(e){return s&&s(e)},show:function(e,t){u.show(h),function(e,t){if(d){var n=d.props[e];n&&n(t)}}(e,t)}}),g=p.useMemo(function(){var e={};return c.forEach(function(t){e[t]=f.show.bind(null,t)}),e},[]);return p.useEffect(function(){u.update({key:h,src:a,originRef:m,render:f.render,overlay:r,width:i,height:o})},[a]),d?p.Children.only(p.cloneElement(d,WD({},g,{ref:m}))):null};function LL({images:e,isLoading:t=!1,isUploading:n=!1,onUpload:a,onDelete:s,onToggleBanner:r,readOnly:i=!1,renderOverlay:o,className:l}){const[d,u]=p.useState(null);return c.jsxs("div",{className:sl("space-y-2",l),children:[!i&&c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("input",{id:"gallery-image-upload-input",type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden",disabled:n||t,"aria-label":"Upload images"})}),t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading images..."})}):0===e.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(Lf,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No images uploaded yet"}),!i&&c.jsxs(Fl,{htmlFor:"gallery-image-upload-input-empty",className:"cursor-pointer",children:[c.jsx(bl,{type:"button",variant:"outline",size:"sm",disabled:n,asChild:!0,children:c.jsx("span",{children:n?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(lx,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})}),c.jsx("input",{id:"gallery-image-upload-input-empty",type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden",disabled:n,"aria-label":"Upload images"})]})]}):c.jsx(ML,{children:c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.map(e=>c.jsx(Sl,{className:"overflow-hidden flex flex-col aspect-square w-full h-full",onMouseEnter:()=>u(e.id),onMouseLeave:()=>u(null),children:c.jsxs("div",{className:"relative w-full h-full bg-muted group",children:[e.url?c.jsx(DL,{src:e.url,children:c.jsx("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover cursor-pointer"})}):c.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-none",children:c.jsx(Lf,{className:"w-4 h-4 text-muted-foreground"})}),o?o(e,d===e.id):c.jsxs(c.Fragment,{children:[e.isBanner&&c.jsxs("div",{className:"absolute top-0.5 left-0.5 bg-primary text-primary-foreground px-1 py-0.5 rounded text-[10px] font-bold flex items-center gap-0.5 shadow-lg z-30 border border-primary/20 pointer-events-none",children:[c.jsx(Yg,{className:"h-2 w-2 fill-current"}),c.jsx("span",{className:"hidden sm:inline",children:"Banner"})]}),!i&&c.jsxs("div",{className:sl("absolute bottom-0 right-0 flex items-center justify-end gap-0.5 p-0.5 transition-opacity duration-200",d===e.id?"opacity-100":"opacity-0 pointer-events-none"),children:[r&&c.jsx(bl,{type:"button",variant:"secondary",size:"sm",onClick:t=>{t.stopPropagation(),r(e)},className:"h-5 w-5 p-0 bg-background hover:bg-background border border-border shadow-md pointer-events-auto",title:e.isBanner?"Unset Banner":"Set as Banner",children:c.jsx(Yg,{className:sl("h-2.5 w-2.5",e.isBanner&&"fill-current")})}),s&&c.jsx(bl,{type:"button",variant:"destructive",size:"sm",onClick:t=>{t.stopPropagation(),s(e)},className:"h-5 w-5 p-0 bg-destructive hover:bg-destructive text-destructive-foreground opacity-100 hover:opacity-100 shadow-md pointer-events-auto",title:"Delete Image",children:c.jsx(ax,{className:"h-2.5 w-2.5"})})]})]})]})},e.id)),!i&&c.jsxs(Fl,{htmlFor:"gallery-image-upload-input-grid",className:"cursor-pointer",children:[c.jsx(Sl,{className:"flex flex-col items-center justify-center aspect-square w-full h-full bg-muted/50 hover:bg-muted transition-colors border-dashed",children:n?c.jsx(Kf,{className:"h-6 w-6 text-muted-foreground animate-spin"}):c.jsx(lx,{className:"h-6 w-6 text-muted-foreground"})}),c.jsx("input",{id:"gallery-image-upload-input-grid",type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden",disabled:n,"aria-label":"Upload images"})]})]})})]})}function FL({data:e,title:t,height:n=200,className:a=""}){const s=e.length>0?Math.max(...e.map(e=>e.value)):0,r=n-40;return 0===e.length?c.jsxs(Sl,{className:a,children:[t&&c.jsx(jl,{children:c.jsx(Cl,{className:"text-lg",children:t})}),c.jsx(Nl,{children:c.jsx("div",{style:{height:n},className:"w-full flex items-center justify-center text-muted-foreground",children:"No data available"})})]}):c.jsxs(Sl,{className:a,children:[t&&c.jsx(jl,{children:c.jsx(Cl,{className:"text-lg",children:t})}),c.jsx(Nl,{children:c.jsx("div",{style:{height:n},className:"w-full",children:c.jsx("svg",{width:"100%",height:r,className:"overflow-visible",children:e.map((t,n)=>{const a=s>0?t.value/s*(r-20):0,i=Math.max(20,100/e.length-2),o=100*n/e.length,l=r-a-20;return c.jsxs("g",{children:[c.jsx("rect",{x:`${o}%`,y:l,width:`${i}%`,height:a,fill:t.color||`hsl(${360*n/e.length}, 70%, 50%)`,className:"transition-all hover:opacity-80"}),c.jsx("text",{x:`${o+i/2}%`,y:l-5,textAnchor:"middle",className:"text-xs fill-muted-foreground",children:t.value}),c.jsx("text",{x:`${o+i/2}%`,y:r,textAnchor:"middle",className:"text-xs fill-muted-foreground",transform:`rotate(45, ${o+i/2}%, ${r})`,children:t.label.length>10?`${t.label.slice(0,10)}...`:t.label})]},t.label)})})})})]})}function IL({data:e,title:t,height:n=200,color:a="#3b82f6",className:s=""}){const r=e.map(e=>e.value),i=r.length>0?Math.max(...r):0,o=r.length>0?Math.min(...r):0,l=n-40;if(0===e.length)return c.jsxs(Sl,{className:s,children:[t&&c.jsx(jl,{children:c.jsx(Cl,{className:"text-lg",children:t})}),c.jsx(Nl,{children:c.jsx("div",{style:{height:n},className:"w-full flex items-center justify-center text-muted-foreground",children:"No data available"})})]});const d=i-o,u=0===d?1:d,h=e.length>1?e.map((t,n)=>{const a=n/(e.length-1)*100,s=0===d?.5:(t.value-o)/u;return`${0===n?"M":"L"} ${a} ${l-s*(l-20)-10}`}).join(" "):`M 0 ${l/2} L 100 ${l/2}`;return c.jsxs(Sl,{className:s,children:[t&&c.jsx(jl,{children:c.jsx(Cl,{className:"text-lg",children:t})}),c.jsx(Nl,{children:c.jsx("div",{style:{height:n},className:"w-full",children:c.jsxs("svg",{width:"100%",height:l,className:"overflow-visible",children:[[0,.25,.5,.75,1].map(e=>{const t=l-e*(l-30)-10;return c.jsxs("g",{children:[c.jsx("line",{x1:"0",y1:t,x2:"100%",y2:t,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"2,2"}),c.jsx("text",{x:"-5",y:t+3,textAnchor:"end",className:"text-xs fill-muted-foreground",children:Math.round(o+u*e)})]},e)}),e.length>0&&c.jsx("path",{d:h,fill:"none",stroke:a,strokeWidth:"2",className:"transition-all"}),e.map((t,n)=>{const s=e.length>1?n/(e.length-1)*100:50,r=0===d?.5:(t.value-o)/u,i=l-r*(l-20)-10;return c.jsx("circle",{cx:s,cy:i,r:"4",fill:a,className:"hover:r-6 transition-all cursor-pointer",children:c.jsxs("title",{children:[t.label,": ",t.value]})},n)}),e.filter((t,n)=>n%Math.ceil(Math.max(1,e.length/5))===0).map((t,n)=>{const a=e.indexOf(t),s=e.length>1?a/(e.length-1)*100:50;return c.jsx("text",{x:s,y:l+10,textAnchor:"middle",className:"text-xs fill-muted-foreground",children:t.label.length>8?`${t.label.slice(0,8)}...`:t.label},n)})]})})})]})}function OL({data:e,title:t,height:n=200,className:a=""}){const s=e.reduce((e,t)=>e+t.value,0),r=Math.min(n/2-20,80),i=n/2,o=n/2;let l=-90;return c.jsxs(Sl,{className:a,children:[t&&c.jsx(jl,{children:c.jsx(Cl,{className:"text-lg",children:t})}),c.jsx(Nl,{children:c.jsxs("div",{style:{height:n},className:"w-full flex items-center justify-center",children:[c.jsxs("svg",{width:n,height:n,children:[e.map((t,n)=>{const a=360*(t.value/s),d=l+a,u=l*Math.PI/180,h=d*Math.PI/180,m=i+r*Math.cos(u),p=o+r*Math.sin(u),f=i+r*Math.cos(h),g=o+r*Math.sin(h),x=[`M ${i} ${o}`,`L ${m} ${p}`,`A ${r} ${r} 0 ${a>180?1:0} 1 ${f} ${g}`,"Z"].join(" ");l=d;const v=t.color||`hsl(${360*n/e.length}, 70%, 50%)`;return c.jsx("path",{d:x,fill:v,className:"hover:opacity-80 transition-all cursor-pointer"},t.label)}),c.jsx("text",{x:i,y:o-5,textAnchor:"middle",className:"text-sm font-semibold",children:"Total"}),c.jsx("text",{x:i,y:o+15,textAnchor:"middle",className:"text-lg font-bold",children:s})]}),c.jsx("div",{className:"ml-6 space-y-2",children:e.map((t,n)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color||`hsl(${360*n/e.length}, 70%, 50%)`}}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.label,": ",t.value," (",(t.value/s*100).toFixed(1),"%)"]})]},t.label))})]})})]})}function zL({open:e,onOpenChange:t,entityId:n,entityName:a,entityType:s,initialTags:r=[],tagService:i,onSave:o,loading:l=!1}){const[d,u]=p.useState(r),[h,m]=p.useState([]),[g,x]=p.useState(""),[v,y]=p.useState(!1),[b,w]=p.useState(!1),S=f.useRef(null),[j,C]=p.useState(void 0);p.useEffect(()=>{e&&n&&N()},[e,n]);const k=JSON.stringify(r||[]);p.useEffect(()=>{e&&(u(JSON.parse(k)),x(""),y(!1))},[e,k]),p.useEffect(()=>{v&&S.current&&C(S.current.offsetWidth)},[v]);const N=p.useCallback(async()=>{if(n){w(!0);try{const e=await i.getAvailableTagsForEntity(s,n,g||void 0,200);m(e.items)}catch(e){}finally{w(!1)}}},[n,s,i,g]);p.useEffect(()=>{if(v){const e=setTimeout(()=>{N()},300);return()=>clearTimeout(e)}},[g,v,N]);const _=p.useCallback(e=>{d.includes(e)||u([...d,e]),x(""),y(!1)},[d]),E=p.useCallback(e=>{u(d.filter(t=>t!==e))},[d]),P=p.useCallback(()=>{const e=g.trim();e&&!d.includes(e)&&(u([...d,e]),x(""),y(!1))},[g,d]),A=p.useCallback(async()=>{await o(d),t(!1)},[d,o,t]),R=p.useMemo(()=>{const e=r||[];return d.length!==e.length||d.some(t=>!e.includes(t))},[d,r]),T=p.useMemo(()=>{if(!g.trim())return h;const e=g.toLowerCase();return h.filter(t=>t.name.toLowerCase().includes(e)&&!d.includes(t.name))},[h,g,d]),M=p.useMemo(()=>{if(!g.trim())return!1;const e=g.trim().toLowerCase();return!h.some(t=>t.name.toLowerCase()===e)},[g,h]),{attachedTags:D,unattachedTags:L}=p.useMemo(()=>{const e=[],t=[];return T.forEach(n=>{n.is_attached?e.push(n):t.push(n)}),{attachedTags:e,unattachedTags:t}},[T]);return c.jsx(ub,{open:e,onOpenChange:t,children:c.jsxs(pb,{className:"sm:max-w-[650px]",children:[c.jsxs(fb,{children:[c.jsxs(xb,{className:"flex items-center gap-2",children:[c.jsx(ex,{className:"h-5 w-5"}),"Manage Tags"]}),c.jsxs(vb,{children:["Add or remove tags for ",c.jsx("span",{className:"font-medium",children:a}),". Select existing tags or create new ones by typing."]})]}),c.jsxs("div",{className:"space-y-6 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Add Tags"}),c.jsx("div",{ref:S,className:"w-full",children:c.jsxs(wE,{open:v,onOpenChange:y,children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",role:"combobox","aria-expanded":v,className:"w-full justify-between h-11",disabled:l||b,children:[c.jsx("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:b?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:"h-4 w-4 animate-spin text-muted-foreground"}),c.jsx("span",{className:"text-muted-foreground",children:"Loading tags..."})]}):d.length>0?c.jsxs(c.Fragment,{children:[c.jsx(ex,{className:"h-4 w-4 text-muted-foreground shrink-0"}),c.jsxs("span",{className:"text-sm font-medium",children:[d.length," ",1===d.length?"tag":"tags"," selected"]})]}):c.jsx("span",{className:"text-muted-foreground",children:g||"Search or create tags..."})}),c.jsx(af,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),c.jsx(jE,{className:"p-0",align:"start",style:j?{width:`${j}px`}:void 0,children:c.jsxs(RN,{shouldFilter:!1,children:[c.jsx(MN,{placeholder:"Search tags or type to create new...",value:g,onValueChange:x}),c.jsx(DN,{children:b?c.jsxs("div",{className:"py-6 text-center",children:[c.jsx(Kf,{className:"h-5 w-5 animate-spin mx-auto text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading tags..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(LN,{children:M&&g.trim()?c.jsx("div",{className:"py-2 px-4",children:c.jsxs(bl,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:P,children:[c.jsx(jg,{className:"mr-2 h-4 w-4"}),'Create "',g.trim(),'"']})}):c.jsxs("div",{className:"py-6 text-center text-sm text-muted-foreground",children:[c.jsx(ex,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No tags found."}),c.jsx("p",{className:"text-xs mt-1",children:"Type to create a new tag"})]})}),D.length>0&&c.jsx(FN,{heading:"Currently Attached",children:D.map(e=>c.jsxs(ON,{value:e.name,onSelect:()=>_(e.name),className:sl("cursor-pointer",d.includes(e.name)&&"opacity-50"),children:[c.jsx(Yp,{className:sl("mr-2 h-4 w-4",d.includes(e.name)?"opacity-100":"opacity-0")}),c.jsx("span",{className:"flex-1",children:e.name}),c.jsx(NC,{variant:"secondary",className:"ml-2 text-xs",children:"Current"})]},e.id))}),L.length>0&&c.jsxs(c.Fragment,{children:[D.length>0&&c.jsx(sC,{}),c.jsx(FN,{heading:"Available Tags",children:L.map(e=>c.jsxs(ON,{value:e.name,onSelect:()=>_(e.name),className:sl("cursor-pointer",d.includes(e.name)&&"opacity-50"),children:[c.jsx(Yp,{className:sl("mr-2 h-4 w-4",d.includes(e.name)?"opacity-100":"opacity-0")}),c.jsx("span",{className:"flex-1",children:e.name})]},e.id))})]}),M&&g.trim()&&c.jsxs(c.Fragment,{children:[(D.length>0||L.length>0)&&c.jsx(sC,{}),c.jsx(FN,{children:c.jsxs(ON,{value:g.trim(),onSelect:P,className:"cursor-pointer font-medium",children:[c.jsx(jg,{className:"mr-2 h-4 w-4 text-primary"}),'Create "',g.trim(),'"']})})]})]})})]})})]})}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Type to search existing tags or create a new one"})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"text-sm font-medium",children:["Selected Tags ",d.length>0&&`(${d.length})`]}),d.length>0&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>u([]),disabled:l,className:"h-7 text-xs",children:"Clear All"})]}),d.length>0?c.jsx("div",{className:"flex flex-wrap gap-2 min-h-[100px] p-4 border rounded-lg bg-muted/30",children:d.map(e=>{const t=h.find(t=>t.name===e&&t.is_attached);return c.jsxs(NC,{variant:t?"default":"secondary",className:sl("text-xs flex items-center gap-1.5 pr-1.5 py-1.5 px-2.5",t&&"bg-primary/10 text-primary border-primary/20"),children:[c.jsx(ex,{className:"h-3 w-3"}),c.jsx("span",{children:e}),c.jsx("button",{type:"button",onClick:()=>E(e),disabled:l,className:"ml-1 rounded-full hover:bg-background/80 p-0.5 transition-colors focus:outline-none focus:ring-2 focus:ring-ring","aria-label":`Remove ${e} tag`,children:c.jsx(xx,{className:"h-3 w-3"})})]},e)})}):c.jsxs("div",{className:"min-h-[100px] p-6 border-2 border-dashed rounded-lg bg-muted/20 flex flex-col items-center justify-center text-center",children:[c.jsx(ex,{className:"h-8 w-8 text-muted-foreground/50 mb-2"}),c.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"No tags selected"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the search box above to add tags"})]})]})]}),c.jsxs(gb,{className:"gap-2",children:[c.jsx(bl,{variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),c.jsx(bl,{onClick:A,disabled:l||!R,className:"min-w-[100px]",children:l?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})}function BL({open:e,onOpenChange:t,entityId:n,entityName:a,entityType:s,attachmentService:r,onSave:i,loading:o=!1}){const[l,d]=p.useState([]),[u,h]=p.useState(!1),[m,g]=p.useState(null),[x,v]=p.useState(!1),[y,b]=p.useState(null),w=f.useRef(null);p.useEffect(()=>{e&&n&&S()},[e,n]);const S=p.useCallback(async()=>{try{const e=await r.getAttachmentsForEntity(s,n,"document");d(e.items)}catch(e){}},[n,s,r]),j=p.useCallback(async e=>{const t=Array.from(e.target.files||[]);if(0===t.length)return;h(!0);const a=[],i=[];for(const l of t){const e=l.name;try{const e=await GP.uploadFile(l);await r.linkAttachment(s,n,{file_upload_id:e.id,attachment_type:"document"}),a.push({id:e.id,filename:e.filename,original_name:e.originalName,mime_type:e.mimeType,size:e.size,url:e.url,uploaded_at:e.uploadedAt,uploaded_by:null})}catch(o){i.push(e)}}if(a.length>0&&await S(),i.length>0){const e=a.length,t=e>0?`Successfully uploaded ${e} file(s). ${i.length} file(s) failed to upload.`:`Failed to upload ${i.length} file(s). Please try again.`;alert(t)}h(!1),w.current&&(w.current.value="")},[n,s,r,S]),C=p.useCallback(e=>{b(e),v(!0)},[]),k=p.useCallback(async()=>{if(y){g(y.id);try{await r.unlinkAttachment(s,n,y.id),await S(),i?.(l.filter(e=>e.id!==y.id)),v(!1),b(null)}catch(e){alert(e instanceof Error?e.message:"Failed to remove attachment. Please try again.")}finally{g(null)}}},[n,s,r,l,S,i,y]);return c.jsxs(ub,{open:e,onOpenChange:t,children:[c.jsxs(pb,{className:"w-[90vw] max-w-[1200px] max-h-[90vh] !grid !grid-rows-[auto_1fr_auto] gap-0 p-6 overflow-hidden",style:{maxHeight:"90vh"},children:[c.jsxs(fb,{className:"flex-shrink-0 pb-4",children:[c.jsxs(xb,{className:"flex items-center gap-2",children:[c.jsx(Cf,{className:"h-5 w-5"}),"Manage Documents"]}),c.jsxs(vb,{children:["Upload and manage document attachments for"," ",c.jsx("span",{className:"font-medium",children:a}),". Supported formats: Images, PDF, Word, Excel, and text files."]})]}),c.jsxs("div",{className:"overflow-y-auto min-h-0 space-y-4",children:[c.jsxs("div",{className:"space-y-2 flex-shrink-0 pt-2",children:[c.jsx("label",{htmlFor:`attachments-${n}`,className:"text-sm font-medium",children:"Upload Documents"}),c.jsx("input",{ref:w,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt,.csv",onChange:j,disabled:o||u,className:"hidden",id:`attachments-${n}`}),c.jsx(bl,{variant:"outline",onClick:()=>w.current?.click(),disabled:o||u,className:"w-full",children:u?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(lx,{className:"mr-2 h-4 w-4"}),"Select Files to Upload"]})}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum file size: 20MB for documents, 5MB for images"})]}),c.jsx(sC,{className:"flex-shrink-0"}),c.jsxs("div",{className:"space-y-2 w-full flex flex-col pb-4",children:[c.jsx("div",{className:"flex items-center justify-between flex-shrink-0",children:c.jsxs("label",{className:"text-sm font-medium",children:["Attached Documents (",l.length,")"]})}),l.length>0?c.jsx("div",{className:"overflow-y-auto overflow-x-hidden w-full space-y-2 pr-2",style:{maxHeight:"calc(90vh - 350px)"},children:l.map(e=>{return c.jsxs(xP,{className:"w-full min-w-0 gap-4 p-3",children:[c.jsx(vP,{className:"text-muted-foreground",children:(n=e.mime_type,n.startsWith("image/")?c.jsx(Lf,{className:"h-5 w-5"}):c.jsx(Cf,{className:"h-5 w-5"}))}),c.jsxs(yP,{className:"overflow-hidden",children:[c.jsx(bP,{className:"truncate",children:e.original_name}),c.jsxs(wP,{className:"truncate text-xs",children:[(t=e.size,t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`)," "," ",e.mime_type]})]}),c.jsxs(SP,{className:"gap-2 ml-2",children:[c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>window.open(e.url,"_blank"),disabled:o,className:"h-8 px-2 text-xs",children:"View"}),c.jsx(bl,{variant:"ghost",size:"icon",onClick:()=>C(e),disabled:o||m===e.id,className:"h-8 w-8",children:m===e.id?c.jsx(Kf,{className:"h-4 w-4 animate-spin"}):c.jsx(xx,{className:"h-4 w-4"})})]})]},e.id);var t,n})}):c.jsxs("div",{className:"min-h-[100px] p-6 border-2 border-dashed rounded-lg bg-muted/20 flex flex-col items-center justify-center text-center flex-shrink-0",children:[c.jsx(Cf,{className:"h-8 w-8 text-muted-foreground/50 mb-2"}),c.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"No documents attached"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the upload button above to add documents"})]})]})]}),c.jsx(gb,{className:"flex-shrink-0 pt-4 border-t",children:c.jsx(bl,{variant:"outline",onClick:()=>t(!1),disabled:o||u,children:"Close"})})]}),c.jsx(bA,{open:x,onOpenChange:e=>{v(e),e||b(null)},title:"Remove Document",description:y?`Are you sure you want to remove "${y.original_name}"? This action cannot be undone.`:"Are you sure you want to remove this document?",confirmAction:{label:"Remove",variant:"destructive",onClick:k,loading:null!==m,disabled:null!==m},cancelAction:{label:"Cancel",variant:"outline",disabled:null!==m}})]})}function $L({documents:e,isLoading:t=!1,onManageAttachments:n,className:a,loading:s=!1}){return c.jsx("div",{className:sl("space-y-6",a),children:t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(Kf,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===e.length?c.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[c.jsx(jf,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{className:"text-sm font-medium mb-1",children:"No documents"}),c.jsx("p",{className:"text-xs",children:n?"Click 'Manage Documents' to upload files":"No documents have been uploaded"})]}):c.jsx("div",{className:"space-y-2 w-full",children:c.jsx(ML,{children:c.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto overflow-x-hidden w-full",children:e.map(e=>{const t=e.mime_type.startsWith("image/");return c.jsxs(xP,{className:"w-full min-w-0 gap-2 p-3",children:[c.jsx(vP,{className:"text-muted-foreground",children:t?c.jsx(DL,{src:e.url,children:c.jsx("img",{src:e.url,alt:e.original_name,className:"h-10 w-10 object-cover rounded cursor-pointer border border-border"})}):(a=e.mime_type,a.startsWith("image/")?c.jsx(Lf,{className:"h-5 w-5"}):c.jsx(Cf,{className:"h-5 w-5"}))}),c.jsxs(yP,{className:"overflow-hidden",children:[c.jsx(bP,{className:"truncate",children:t?c.jsx(DL,{src:e.url,children:c.jsx("span",{className:"cursor-pointer hover:text-primary",children:e.original_name})}):e.original_name}),c.jsxs(wP,{className:"truncate text-xs",children:[(n=e.size,n<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(1)} KB`:`${(n/1048576).toFixed(1)} MB`)," "," ",e.mime_type]})]}),c.jsxs(SP,{className:"gap-1",children:[c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>window.open(e.url,"_blank"),disabled:s,className:"h-8 px-2 text-xs",children:c.jsx(Sf,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"ghost",size:"icon",onClick:()=>(e=>{const t=document.createElement("a");t.href=e.url,t.download=e.original_name,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)})(e),disabled:s,className:"h-8 w-8",title:"Download",children:c.jsx(vf,{className:"h-4 w-4"})})]})]},e.id);var n,a})})})})})}function UL({value:e,className:t,iconClassName:n,onClick:a,title:s="Copy to clipboard",copyMessage:r="Copied!",...i}){const[o,l]=p.useState(!1);return c.jsx(bl,{variant:"ghost",size:"icon",className:t,onClick:async t=>{a&&a(t);try{await navigator.clipboard.writeText(e),l(!0),setTimeout(()=>l(!1),2e3)}catch(GQ){}},title:s,...i,children:o?c.jsx(of,{className:sl("h-3 w-3 text-green-600",n)}):c.jsx(pf,{className:sl("h-3 w-3",n)})})}const VL=({tags:e,className:t})=>e&&0!==e.length?c.jsx("div",{className:`flex flex-wrap gap-2 ${t||""}`,children:e.map((e,t)=>c.jsx(qL,{tag:e},`tag-${t}-${e}`))}):null,qL=({tag:e,className:t})=>c.jsxs(NC,{variant:"secondary",className:`text-xs flex items-center gap-1.5 pr-2 py-1.5 px-2.5 bg-primary/10 text-primary border-primary/20 ${t||""}`,children:[c.jsx(ex,{className:"h-3 w-3"}),c.jsx("span",{children:e})]}),HL={sm:"h-16 w-16",md:"h-20 w-20",lg:"h-32 w-32"},GL={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-10 w-10"};function KL({entityId:e,entityType:t,defaultImageUrl:n,altText:a,FallbackIcon:s,attachmentService:r,currentPhoto:i,onPhotoChange:o,disabled:l=!1,size:d="md"}){const[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(i?.url||n||null),v=p.useRef(null);p.useEffect(()=>{if(i?.url)return void x(i.url);if(n)return void x(n);let a=!0;return(async()=>{try{const n=await r.getProfilePhoto(t,e);a&&n?.url&&(x(n.url),o&&o(n))}catch(n){}})(),()=>{a=!1}},[i,n,e,t]);const y=p.useCallback(async n=>{const a=n.target.files?.[0];if(a)if(a.type.startsWith("image/"))if(a.size>5242880)alert("Image size must be less than 5MB");else{h(!0);try{const n=await GP.uploadFile(a),s=await r.setProfilePhoto(t,e,{file_upload_id:n.id});x(s.url),o?.(s),v.current&&(v.current.value="")}catch(s){alert(s instanceof Error?s.message:`Failed to upload ${t} photo. Please try again.`)}finally{h(!1)}}else alert("Please select an image file")},[e,t,r,o]),b=!!g;return c.jsxs("div",{className:"relative",children:[c.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:y,disabled:l||u,className:"hidden",id:`${t}-photo-${e}`}),c.jsxs("div",{className:sl("relative group transition-all",HL[d]),onMouseEnter:()=>!l&&!u&&f(!0),onMouseLeave:()=>f(!1),children:[c.jsx(ML,{children:b&&g?c.jsx(DL,{src:g,children:c.jsx(SC,{className:sl(HL[d],"border-2 border-border",!l&&!u&&"cursor-pointer"),children:c.jsx(jC,{src:g,alt:a})})}):c.jsx(SC,{className:sl(HL[d],"border-2 border-border"),children:c.jsx(CC,{className:"bg-muted text-muted-foreground",children:c.jsx(s,{className:sl(GL[d],"text-muted-foreground/50")})})})}),u&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full",children:c.jsx(Kf,{className:sl(GL[d],"animate-spin text-primary")})}),!u&&m&&!l&&!b&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 rounded-full transition-opacity",children:c.jsx(bl,{variant:"ghost",size:"icon",className:"h-7 w-7 bg-white/20 hover:bg-white/30 text-white border-0 rounded-full",onClick:e=>{e.stopPropagation(),v.current?.click()},title:"Add photo",children:c.jsx(Kp,{className:"h-3.5 w-3.5"})})}),b&&!u&&!l&&c.jsx(bl,{variant:"ghost",size:"icon",className:sl("absolute bottom-0 right-0 h-6 w-6 bg-primary text-primary-foreground border-2 border-background rounded-full shadow-md hover:bg-primary/90 transition-all",m?"opacity-100 scale-100":"opacity-80 scale-95"),onClick:e=>{e.stopPropagation(),v.current?.click()},title:"Edit photo",children:c.jsx(xg,{className:"h-3 w-3"})})]})]})}function WL({open:e,onOpenChange:t,title:n,description:a}){const s=Va(),r=Gs.get("last_username")||"";return c.jsx(SA,{open:e,onOpenChange:t,title:n,description:a,initialUsername:r,onBeforeLogin:async()=>{s.clear(),s.removeQueries(),Gs&&"function"==typeof Gs.remove&&(Gs.remove("REACT_QUERY_OFFLINE_CACHE"),Gs.remove("app_tabs"),Gs.remove("scroll_positions"),Gs.removeMatching?Gs.removeMatching("^command-palette-recent"):Gs.remove("command-palette-recent"))},onLogin:async e=>{await di.login(e),Ns()},onAfterLogin:async()=>{await s.invalidateQueries()}})}function QL({open:e,onOpenChange:t,timeUntilExpiration:n,onRefresh:a}){const s=(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/60),a=t%60;return n>0?`${n} minute${1!==n?"s":""} ${a} second${1!==a?"s":""}`:`${a} second${1!==a?"s":""}`})(n),r=Math.min(100,Math.max(0,n/18e5*100));p.useEffect(()=>{if(e&&n<6e4){const e=setTimeout(()=>{a().catch(e=>{})},1e3);return()=>clearTimeout(e)}},[e,n,a]);return c.jsx(ub,{open:e,onOpenChange:t,modal:!0,children:c.jsxs(pb,{className:"sm:max-w-md",style:{zIndex:9998},onEscapeKeyDown:e=>{},children:[c.jsxs(fb,{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"h-12 w-12 rounded-full bg-orange-500/10 flex items-center justify-center",children:c.jsx(ix,{className:"h-6 w-6 text-orange-500"})}),c.jsx(xb,{className:"text-xl",children:"Session Expiring Soon"})]}),c.jsxs(vb,{className:"text-base",children:["Your session will expire in ",c.jsx("strong",{children:s}),". Refresh your session to continue working without interruption."]})]}),c.jsxs("div",{className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Time remaining"}),c.jsx("span",{className:"font-medium",children:s})]}),c.jsx(Rv,{value:r,className:"h-2"})]}),c.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-md bg-orange-500/10 text-orange-700 dark:text-orange-400 text-sm",children:[c.jsx(hf,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"What happens next?"}),c.jsx("p",{className:"mt-1",children:"Your session will be automatically refreshed. You can also refresh manually to ensure you don't lose any unsaved work."})]})]}),c.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 pt-2",children:[c.jsx(bl,{type:"button",variant:"outline",onClick:()=>{t(!1)},children:"Dismiss"}),c.jsx(bl,{type:"button",onClick:async()=>{try{await a(),t(!1)}catch(e){}},children:"Refresh Session Now"})]})]})]})})}const YL=p.createContext(void 0),XL=36e5;class ZL{config;callbacks;expirationCheckInterval=null;keepaliveInterval=null;lastActivityTime=Date.now();activityListeners=[];isTabVisible=!0;visibilityListener=null;isRefreshing=!1;lastWarningTime=0;lastUserActivityTime=Date.now();sessionConfig=null;sessionConfigCacheTimestamp=0;constructor(e={},t={}){this.config={warningThresholdSeconds:e.warningThresholdSeconds??300,keepaliveIntervalSeconds:e.keepaliveIntervalSeconds??600,minActivityBeforeKeepaliveSeconds:e.minActivityBeforeKeepaliveSeconds??30,checkIntervalSeconds:e.checkIntervalSeconds??30,enableKeepalive:e.enableKeepalive??!0,enableVisibilityCheck:e.enableVisibilityCheck??!0,idleTimeoutMinutes:e.idleTimeoutMinutes??30},this.callbacks=t}start(){this.stop(),this.fetchSessionConfig(),this.startExpirationMonitoring(),this.config.enableKeepalive&&(this.startActivityTracking(),this.startKeepalive()),this.config.enableVisibilityCheck&&"undefined"!=typeof document&&this.startVisibilityTracking()}loadSessionConfigFromCache(){try{const e=Gs.get(ys);if(!e||!e.config||!e.timestamp)return null;const t=Date.now();return t-e.timestamp>XL?(Gs.remove(ys),null):e.config}catch(e){return Gs.remove(ys),null}}saveSessionConfigToCache(e){try{const t={config:e,timestamp:Date.now()};Gs.set(ys,t)}catch(t){}}clearSessionConfigCache(){this.sessionConfig=null,this.sessionConfigCacheTimestamp=0,Gs.remove(ys)}async fetchSessionConfig(){const e=Date.now(),t=e-this.sessionConfigCacheTimestamp;if(this.sessionConfig&&t<XL)return;const n=this.loadSessionConfigFromCache();if(n)return this.sessionConfig=n,void(this.sessionConfigCacheTimestamp=e);if(Gs.get(gs))try{const t=await Fs.get("/api/v1/sessions/config",{requiresAuth:!0});this.sessionConfig=t,this.sessionConfigCacheTimestamp=e,this.saveSessionConfigToCache(t)}catch(a){const t=a?.status;if(404===t||401===t)return;const n=this.loadSessionConfigFromCache();n&&(this.sessionConfig=n,this.sessionConfigCacheTimestamp=e)}}stop(){this.expirationCheckInterval&&(clearInterval(this.expirationCheckInterval),this.expirationCheckInterval=null),this.keepaliveInterval&&(clearInterval(this.keepaliveInterval),this.keepaliveInterval=null),this.stopActivityTracking(),this.stopVisibilityTracking()}async refreshSession(){if(this.isRefreshing)return!1;if(!Gs.get(xs))return!1;try{return this.isRefreshing=!0,await di.refreshToken(),this.lastWarningTime=0,this.callbacks.onRefreshed&&this.callbacks.onRefreshed(),!0}catch(e){return!1}finally{this.isRefreshing=!1}}recordActivity(){this.lastActivityTime=Date.now(),this.lastUserActivityTime=Date.now()}getExpirationInfo(){const e=Gs.get(gs);if(!e)return{expiration:null,timeUntilExpiration:null,isExpired:!0};return{expiration:ns(e),timeUntilExpiration:ss(e),isExpired:as(e)}}startExpirationMonitoring(){this.checkExpiration(),this.expirationCheckInterval=setInterval(()=>{this.checkExpiration()},1e3*this.config.checkIntervalSeconds)}checkExpiration(){const e=Gs.get(gs);if(!e)return;const t=!!Gs.get(xs);if(as(e))return t?void(this.isRefreshing||this.refreshSession().then(e=>{e||this.callbacks.onExpired&&this.callbacks.onExpired()}).catch(()=>{this.callbacks.onExpired&&this.callbacks.onExpired()})):void(this.callbacks.onExpired&&this.callbacks.onExpired());const n=ss(e);if(null!==n){const e=1e3*this.config.warningThresholdSeconds,a=60*(this.sessionConfig?.idle_timeout_minutes??this.config.idleTimeoutMinutes)*1e3,s=Date.now()-this.lastUserActivityTime>a;t&&n<=e&&n>0&&s&&Date.now()-this.lastWarningTime>6e4&&(this.lastWarningTime=Date.now(),this.callbacks.onWarning&&this.callbacks.onWarning(n));t&&n<=3e5&&n>0&&!this.isRefreshing&&!s&&this.refreshSession().catch(e=>{})}}startActivityTracking(){if("undefined"==typeof window)return;const e=()=>{this.recordActivity()};let t=0;const n=()=>{const n=Date.now();n-t>5e3&&(t=n,e())};["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(e=>{window.addEventListener(e,n,{passive:!0}),this.activityListeners.push(()=>{window.removeEventListener(e,n)})})}stopActivityTracking(){this.activityListeners.forEach(e=>e()),this.activityListeners=[]}startKeepalive(){this.keepaliveInterval=setInterval(()=>{this.sendKeepalive()},1e3*this.config.keepaliveIntervalSeconds)}async sendKeepalive(){if(!Gs.get(gs)||this.isRefreshing)return;const e=Date.now()-this.lastActivityTime,t=1e3*this.config.minActivityBeforeKeepaliveSeconds;if(this.isTabVisible&&!(e>t))try{await Fs.get("/api/v1/auth/me",{requiresAuth:!0})}catch(n){}}startVisibilityTracking(){if("undefined"==typeof document)return;const e=()=>{const e=this.isTabVisible;this.isTabVisible=!document.hidden,!e&&this.isTabVisible&&setTimeout(()=>{this.checkExpiration()},100)};document.addEventListener("visibilitychange",e),this.visibilityListener=()=>{document.removeEventListener("visibilitychange",e)}}stopVisibilityTracking(){this.visibilityListener&&(this.visibilityListener(),this.visibilityListener=null)}}let JL=null;function eF(e,t){return JL&&JL.stop(),JL=new ZL(e,t),JL}function tF(){return JL}const nF=Object.freeze(Object.defineProperty({__proto__:null,SessionMonitor:ZL,createSessionMonitor:eF,getSessionMonitor:tF},Symbol.toStringTag,{value:"Module"}));function aF({children:e}){const[t,n]=p.useState(!1),[a,s]=p.useState(!1),[r,i]=p.useState(0),o=p.useRef(null),l=p.useCallback(()=>{Gs.get("last_username")?n(!0):window.location.href="/login"},[]),d=p.useCallback(()=>{n(!1)},[]);p.useEffect(()=>(Ps(l),As(e=>{Uk({title:"Access Denied",description:e||"You don't have permission to perform this action.",variant:"destructive"})}),()=>{Ps(null),As(null)}),[l]),p.useEffect(()=>{const e=()=>{const e=di.isAuthenticated();if(e){if(e&&!o.current){zs.initialize().catch(e=>{});const e=eF({warningThresholdSeconds:300,keepaliveIntervalSeconds:600,minActivityBeforeKeepaliveSeconds:30,checkIntervalSeconds:30,enableKeepalive:!0,enableVisibilityCheck:!0},{onWarning:e=>{i(e),s(!0)},onExpired:()=>{s(!1),l()},onRefreshed:()=>{s(!1)}});o.current=e,e.start()}}else o.current&&(o.current.stop(),o.current=null)};e();const t=setInterval(e,5e3);return()=>{o.current&&(o.current.stop(),o.current=null),clearInterval(t)}},[l]);const u=p.useCallback(async()=>{const e=tF();e&&await e.refreshSession()},[]);return c.jsxs(YL.Provider,{value:{showSessionExpiredDialog:l,hideSessionExpiredDialog:d,isSessionDialogOpen:t},children:[e,c.jsx(WL,{open:t,onOpenChange:n}),c.jsx(QL,{open:a,onOpenChange:s,timeUntilExpiration:r,onRefresh:u})]})}var sF=["added","removed","updated"];function rF(e){return sF.includes(e)}async function iF({queryClient:e,persister:t,buster:n="",dehydrateOptions:a}){const s={buster:n,timestamp:Date.now(),clientState:pa(e,a)};await t.persistClient(s)}var oF=({children:e,persistOptions:t,onSuccess:n,onError:a,...s})=>{const[r,i]=p.useState(!0),o=p.useRef({persistOptions:t,onSuccess:n,onError:a}),l=p.useRef(!1);return p.useEffect(()=>{o.current={persistOptions:t,onSuccess:n,onError:a}}),p.useEffect(()=>{const e={...o.current.persistOptions,queryClient:s.client};return l.current||(l.current=!0,async function({queryClient:e,persister:t,maxAge:n=864e5,buster:a="",hydrateOptions:s}){try{const r=await t.restoreClient();if(r){if(!r.timestamp)return t.removeClient();{const i=Date.now()-r.timestamp>n,o=r.buster!==a;if(i||o)return t.removeClient();fa(e,r.clientState,s)}}}catch(GQ){throw await t.removeClient(),GQ}}(e).then(()=>o.current.onSuccess?.()).catch(()=>o.current.onError?.()).finally(()=>{i(!1)})),r?void 0:function(e){const t=e.queryClient.getQueryCache().subscribe(t=>{rF(t.type)&&iF(e)}),n=e.queryClient.getMutationCache().subscribe(t=>{rF(t.type)&&iF(e)});return()=>{t(),n()}}(e)},[s.client,r]),c.jsx(qa,{...s,children:c.jsx(Ga,{value:r,children:e})})};const lF={persistClient:async e=>{try{localStorage.setItem("REACT_QUERY_OFFLINE_CACHE",JSON.stringify(e))}catch(t){}},restoreClient:async()=>{try{const e=localStorage.getItem("REACT_QUERY_OFFLINE_CACHE");return e?JSON.parse(e):void 0}catch(e){return}},removeClient:async()=>{try{localStorage.removeItem("REACT_QUERY_OFFLINE_CACHE")}catch(e){}}};async function cF(){await lF.removeClient()}function dF({children:e}){const t=function(){try{const e=localStorage.getItem("cache:user:preferences");if(!e)return!0;const t=JSON.parse(e),n=t?.value;return!n||!n.cache||!1!==n.cache.reactQueryCacheEnabled}catch{return!0}}(),n=t?864e5:0,a=t?3e5:0,[s]=p.useState(()=>new $a({...fs,defaultOptions:{...fs.defaultOptions,queries:{...fs.defaultOptions.queries,gcTime:n,staleTime:a,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:(e,t)=>"CancelledError"!==t?.name&&e<3}},logger:{log:(...e)=>{const t=e[0];"string"!=typeof t||t.includes("dehydrated as pending ended up rejecting")},warn:(...e)=>{const t=e[0];"string"!=typeof t||t.includes("dehydrated as pending ended up rejecting")},error:console.error}}));return p.useEffect(()=>(os.setQueryClient(s),hs(),os.connect(),()=>{os.disconnect()}),[s]),c.jsx(oF,{client:s,persistOptions:{persister:lF,maxAge:864e5,dehydrateOptions:{shouldDehydrateQuery:e=>"pending"!==e.state.status&&(("error"!==e.state.status||"CancelledError"!==e.state.error?.name)&&("error"!==e.state.status||!(e.state.error instanceof TypeError||e.state.error?.message?.includes("Failed to fetch")||e.state.error?.message?.includes("NetworkError"))))}},children:e})}class uF extends Error{constructor(e,t){super(e),this.originalError=t,this.name="HealthCheckError"}}async function hF(){const e=`${ms.BASE_URL}/health/`,t=new AbortController,n=setTimeout(()=>t.abort(),5e3);try{const a=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},signal:t.signal});if(clearTimeout(n),!a.ok)throw new uF(`Backend returned status ${a.status}`);return await a.json()}catch(a){if(clearTimeout(n),a instanceof Error&&"AbortError"===a.name)throw new uF("Backend health check timed out. The server is not responding.",a);if(a instanceof uF)throw a;const e=function(e){if(e instanceof Error){const t=e.message.toLowerCase(),n=e.name.toLowerCase();return"typeerror"!==n&&"domexception"!==n||!(t.includes("failed to fetch")||t.includes("networkerror")||t.includes("network request failed")||t.includes("load failed")||""===t||""===e.message)?t.includes("failed to fetch")||t.includes("networkerror")||t.includes("connection refused")||t.includes("err_connection_refused")||t.includes("connection reset")||t.includes("connection closed")?"Connection refused. The backend server may be down or unreachable.":t.includes("network request failed")?"Network request failed. Please check your internet connection.":t.includes("timeout")||t.includes("aborted")?"Request timed out. The backend server is not responding.":t.includes("cors")?"CORS error. The backend server may not be configured correctly.":e.message||"Failed to connect to backend server.":"Connection refused. The backend server may be down or unreachable."}return"Unknown error occurred while checking backend health."}(a);throw new uF(e,a instanceof Error?a:void 0)}}function mF(e){const t=new Date(e);return`${t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})} at ${t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0})}`}function pF({error:e,isLoading:t=!1,downtimeStart:n,onRetry:a}){const[s,r]=p.useState("");return p.useEffect(()=>{if(!n)return void r("");const e=()=>{const e=Date.now()-n;r(function(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),a=Math.floor(n/60),s=Math.floor(a/24);return s>0?`${s}d ${a%24}h ${n%60}m ${t%60}s`:a>0?`${a}h ${n%60}m ${t%60}s`:n>0?`${n}m ${t%60}s`:`${t}s`}(e))};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[n]),c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-background/80 backdrop-blur-sm",children:c.jsx("div",{className:"mx-4 max-w-md rounded-lg border border-destructive/50 bg-card p-6 shadow-lg",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[c.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:c.jsx(sf,{className:"h-6 w-6 text-destructive"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Backend Unavailable"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Unable to connect to the backend server. Please check your connection and try again."}),n&&c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-md bg-muted/50 px-3 py-2",children:[c.jsx(hf,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Downtime: ",c.jsx("span",{className:"font-mono",children:s||"0s"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-md bg-muted/50 px-3 py-2",children:[c.jsx(Hp,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["Detected: ",mF(n)]})]})]}),e&&c.jsxs("div",{className:"mt-3 rounded-md bg-destructive/10 p-3",children:[c.jsx("p",{className:"text-sm font-medium text-destructive",children:"Error Details:"}),c.jsx("p",{className:"mt-1 text-xs text-destructive/80",children:e})]})]}),a&&c.jsx(bl,{onClick:a,disabled:t,variant:"default",className:"mt-2",children:t?c.jsxs(c.Fragment,{children:[c.jsx(Ag,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Ag,{className:"mr-2 h-4 w-4"}),"Retry Connection"]})})]})})})}function fF({children:e,checkInterval:t=3e4,enabled:n=!0}){const{isHealthy:a,isLoading:s,error:r,downtimeStart:i,checkHealth:o}=function(e={}){const{interval:t=3e4,immediate:n=!0,enabled:a=!0}=e,[s,r]=p.useState(!0),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),f=p.useRef(null),g=p.useRef(!0),x=p.useCallback(async()=>{if(a){o(!0),u(null);try{const e=await hF();g.current&&(r(!0),c(e),u(null),m(null))}catch(GQ){g.current&&(r(!1),u(GQ instanceof Error?GQ:new Error("Unknown error")),m(e=>e??Date.now()))}finally{g.current&&o(!1)}}},[a]);return p.useEffect(()=>(g.current=!0,a&&(n&&x(),f.current=setInterval(()=>{x()},t)),()=>{g.current=!1,f.current&&(clearInterval(f.current),f.current=null)}),[a,n,t,x]),{isHealthy:s,isLoading:i,healthData:l,error:d,downtimeStart:h,checkHealth:x}}({interval:t,immediate:!0,enabled:n});return c.jsxs(c.Fragment,{children:[e,!a&&c.jsx(pF,{error:r?.message,isLoading:s,downtimeStart:i,onRetry:o})]})}const gF={};function xF(e,t){gF[e],gF[e]=t}function vF({open:e,onOpenChange:t,filter:n={},onApply:a,onReset:s,roleService:r}){const[i,o]=p.useState(n),[l,d]=p.useState([]),[u,h]=p.useState(!1),[m,f]=p.useState(""),[g,x]=p.useState(!1);p.useEffect(()=>{o(n)},[n]),p.useEffect(()=>{e&&r?v():(d([]),f(""))},[e,r]);const v=async()=>{if(r){h(!0);try{const e=await r.fetchRoles(!0);d(e)}catch(GQ){}finally{h(!1)}}},y=p.useMemo(()=>{if(!m.trim())return l;const e=m.toLowerCase();return l.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[l,m]),b=p.useMemo(()=>i.role?l.find(e=>e.name===i.role||e.id===i.role):null,[i.role,l]),w=(e,t)=>{o(n=>({...n,[e]:t}))},S=()=>{w("role",void 0),f("")},j=Object.values(i).some(e=>void 0!==e&&""!==e);return c.jsx(CE,{open:e,onOpenChange:t,children:c.jsxs(EE,{side:"right",className:"w-[700px] sm:w-[800px] flex flex-col p-0 h-full",children:[c.jsxs(PE,{className:"px-4 pt-4 pb-3 flex-shrink-0",children:[c.jsx(RE,{className:"text-base",children:"Advanced Filters"}),c.jsx(TE,{className:"text-xs",children:"Add multiple criteria to filter users. All filters are combined with AND logic."})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 min-h-0",children:c.jsxs("div",{className:"space-y-4 pb-4",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Fl,{htmlFor:"role",className:"text-xs",children:"Role"}),r?c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Ig,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),c.jsx(_l,{id:"role",type:"text",placeholder:"Search roles...",value:m,onChange:e=>{f(e.target.value),x(!0)},onFocus:()=>x(!0),className:"pl-8 h-8 text-xs pr-8"}),b&&c.jsx("button",{type:"button",onClick:S,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear selection",children:c.jsx("span",{className:"text-xs",children:""})})]}),g&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>x(!1)}),c.jsx("div",{className:"absolute z-50 mt-1 w-full bg-popover border rounded-md shadow-md max-h-[300px] overflow-y-auto",children:u?c.jsx("div",{className:"flex items-center justify-center py-4",children:c.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):0===y.length?c.jsx("div",{className:"px-3 py-4 text-xs text-muted-foreground text-center",children:m?"No roles found":"No roles available"}):c.jsxs(c.Fragment,{children:[!m&&c.jsxs("button",{type:"button",onClick:()=>{S(),x(!1)},className:"w-full px-3 py-2 text-left text-xs hover:bg-accent flex items-center gap-2 "+(i.role?"":"bg-accent"),children:[!i.role&&c.jsx(Yp,{className:"h-3 w-3"}),c.jsx("span",{className:i.role?"":"font-medium",children:"All roles"})]}),y.map(e=>c.jsx("button",{type:"button",onClick:()=>{return t=e.name,w("role",t),x(!1),void f("");var t},className:"w-full px-3 py-2 text-left text-xs hover:bg-accent flex items-start gap-2 "+(i.role===e.name?"bg-accent":""),children:c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[i.role===e.name&&c.jsx(Yp,{className:"h-3 w-3 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"truncate "+(i.role===e.name?"font-medium":""),children:[e.name,e.isSystem&&c.jsx("span",{className:"ml-1 text-muted-foreground",children:"(System)"})]}),e.description&&c.jsx("div",{className:"text-muted-foreground truncate mt-0.5",children:e.description})]})]})},e.id))]})})]}),b&&!g&&c.jsxs("div",{className:"mt-1.5 px-2 py-1.5 bg-muted rounded text-xs",children:[c.jsx("div",{className:"font-medium",children:b.name}),b.description&&c.jsx("div",{className:"text-muted-foreground truncate mt-0.5",children:b.description})]})]}):c.jsxs(bx,{value:i.role||"all",onValueChange:e=>{w("role","all"===e?void 0:e)},children:[c.jsx(Sx,{id:"role",className:"h-8 text-xs",children:c.jsx(wx,{placeholder:"All roles"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"all",children:"All roles"}),c.jsx(Nx,{value:"Admin",children:"Admin"}),c.jsx(Nx,{value:"User",children:"User"}),c.jsx(Nx,{value:"Manager",children:"Manager"}),c.jsx(Nx,{value:"Editor",children:"Editor"})]})]})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Fl,{htmlFor:"status",className:"text-xs",children:"Status"}),c.jsxs(bx,{value:i.status||"all",onValueChange:e=>{w("status","all"===e?void 0:e)},children:[c.jsx(Sx,{id:"status",className:"h-8 text-xs",children:c.jsx(wx,{placeholder:"All statuses"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"all",children:"All statuses"}),c.jsx(Nx,{value:"active",children:"Active"}),c.jsx(Nx,{value:"inactive",children:"Inactive"}),c.jsx(Nx,{value:"suspended",children:"Suspended"}),c.jsx(Nx,{value:"pending",children:"Pending"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Fl,{className:"text-xs",children:"Created Date Range"}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Fl,{htmlFor:"createdAfter",className:"text-xs text-muted-foreground",children:"Created After"}),c.jsx(_l,{id:"createdAfter",type:"date",className:"h-8 text-xs",value:i.createdAfter?new Date(i.createdAfter).toISOString().split("T")[0]:"",onChange:e=>w("createdAfter",e.target.value?new Date(e.target.value):void 0)})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Fl,{htmlFor:"createdBefore",className:"text-xs text-muted-foreground",children:"Created Before"}),c.jsx(_l,{id:"createdBefore",type:"date",className:"h-8 text-xs",value:i.createdBefore?new Date(i.createdBefore).toISOString().split("T")[0]:"",onChange:e=>w("createdBefore",e.target.value?new Date(e.target.value):void 0)})]})]})]})}),c.jsx(AE,{className:"px-4 py-3 border-t bg-background flex-shrink-0",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{variant:"outline",size:"sm",onClick:()=>{o(n),f(""),t(!1)},className:"flex-1 h-8 text-xs",children:"Cancel"}),j&&c.jsx(bl,{variant:"outline",size:"sm",onClick:()=>{const e={};o(e),f(""),s?s():a(e),t(!1)},className:"flex-1 h-8 text-xs",children:"Reset"}),c.jsx(bl,{size:"sm",onClick:()=>{a(i),t(!1)},className:"flex-1 h-8 text-xs",children:"Apply"})]})})]})})}function yF({className:e,users:t=[],loading:n=!1,error:a=null,searchable:s=!0,searchPlaceholder:r="Search users...",showAvatar:i=!0,showRole:o=!0,showStatus:l=!0,showActions:d=!0,pagination:u,filter:h,onUserClick:m,onEdit:f,onDelete:g,onCreate:x,onSearch:v,onFilter:y,onStatusFilterChange:b,onPageChange:w,onPageSizeChange:S,customActions:j,onLock:C,onUnlock:k,onActivate:N,onDeactivate:_}){const E=Us(),[P,A]=p.useState(!1),[R,T]=p.useState(h||{}),[M,D]=p.useState(!1),[L,F]=p.useState(!1),[I,O]=p.useState(!1),[z,B]=p.useState(!1),[$,U]=p.useState(null),V=()=>{const e={};T(e),y?.(e)},q=Object.values(R).some(e=>void 0!==e&&""!==e),H=({status:e,lockedUntil:t})=>{const n=Us(),a=t&&new Date(t)>new Date;return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:sl("capitalize",{active:"text-muted-foreground",inactive:"text-muted-foreground",suspended:"text-muted-foreground",pending:"text-muted-foreground"}[e],n.textSize),children:e}),a&&c.jsx(Qf,{className:sl("text-red-500",n.iconSize)})]})},G=[LP({getDisplayName:e=>{const t=e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:(e=>e.firstName||e.lastName?`${e.firstName||""} ${e.lastName||""}`.trim():e.username||e.email)(e);return t},getAvatar:e=>e.avatar,getInitials:e=>(e=>{const t=(e.firstName||"").trim(),n=(e.lastName||"").trim();if(t||n)return`${t?t[0]:""}${(n?n[0]:"")||(t.length>1?t[1]:"")}`.toUpperCase();const a=(e.username||e.email||"").trim(),s=a.replace(/[^a-zA-Z]/g,"");return s.length>=2?s.slice(0,2).toUpperCase():a.length>=2?a.slice(0,2).toUpperCase():1===a.length?a[0].toUpperCase():"?"})(e),header:i?"User":"Name",showAvatar:i,onClick:m?e=>{m(e)}:void 0,size:i?250:200,additionalOptions:{id:i?"user":"name"}}),TP({accessorKey:"username",header:"Username",size:150}),TP({accessorKey:"email",header:"Email",size:250}),...o?[TP({accessorKey:"role",header:"Role",size:120,cell:e=>{const t=e.row.original,n=t.role||t.baseRole||"User";return c.jsx(NC,{variant:"outline",className:"text-[10px]",children:n})},additionalOptions:{id:"role",accessorFn:e=>e.role||e.baseRole||"User"}})]:[],...l?[TP({accessorKey:"status",header:"Status",size:110,cell:e=>{const t=e.row.original;return c.jsx(H,{status:e.getValue(),lockedUntil:t.lockedUntil})}})]:[],TP({accessorKey:"lastLogin",header:"Last Login",size:130,cell:e=>{return c.jsx("span",{className:sl("text-muted-foreground",E.textSize),children:(t=e.getValue(),t?new Date(t).toLocaleDateString():"Never")});var t},additionalOptions:{id:"lastLogin",accessorFn:e=>e.lastLogin}}),...d?[FP({customActions:j,actions:[...k?[{icon:Wf,onClick:e=>{U(e),F(!0)},showWhen:e=>Boolean(e.lockedUntil&&new Date(e.lockedUntil)>new Date),disabledWhen:e=>"active"!==e.status,title:e=>"active"!==e.status?"Cannot unlock inactive user":"Unlock",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[],...C?[{icon:Qf,onClick:e=>{U(e),D(!0)},showWhen:e=>!Boolean(e.lockedUntil&&new Date(e.lockedUntil)>new Date),disabledWhen:e=>"active"!==e.status,title:e=>"active"!==e.status?"Cannot lock inactive user":"Lock",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[],..._?[{icon:cf,onClick:e=>{U(e),B(!0)},showWhen:e=>"active"===e.status,title:"Deactivate",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[],...N?[{icon:rf,onClick:e=>{U(e),O(!0)},showWhen:e=>"active"!==e.status,title:"Activate",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[]]})]:[]];return c.jsxs("div",{className:sl("w-full",e),children:[c.jsx(OP,{data:t,columns:G,useDefaultColumns:!1,title:"Users",description:"Manage and view user accounts",onCreate:x,onFilterClick:()=>{A(!0)},hasActiveFilters:q,onResetFilters:()=>{V()},onSearch:v,viewId:"user-list",filterDefs:[{columnId:"status",title:"Status",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Pending",value:"pending"},{label:"Suspended",value:"suspended"}]}],onStatusFilterChange:e=>b?.(e),manualFiltering:!0,loading:n,manualPagination:Boolean(u&&w),serverPagination:u?{page:u.page,pageSize:u.pageSize,total:u.total,totalPages:u.totalPages}:void 0,onPageChange:w,onPageSizeChange:S}),c.jsx(vF,{open:P,onOpenChange:A,filter:R,onApply:e=>{T(e),y?.(e)},onReset:V}),c.jsx(bA,{open:M,onOpenChange:D,title:"Lock Account",description:$?`Are you sure you want to lock ${$.firstName||$.email}'s account? The account will be locked for 60 minutes, preventing login access.`:void 0,confirmAction:{label:"Lock Account",variant:"destructive",onClick:async()=>{$&&C&&(await C($),D(!1))}}}),c.jsx(bA,{open:L,onOpenChange:F,title:"Unlock Account",description:$?`Are you sure you want to unlock ${$.firstName||$.email}'s account? This will immediately restore their login access.`:void 0,confirmAction:{label:"Unlock Account",variant:"default",onClick:async()=>{$&&k&&(await k($),F(!1))}}}),c.jsx(bA,{open:I,onOpenChange:O,title:"Activate User",description:$?`Are you sure you want to activate ${$.firstName||$.email}? This will restore their access to the system.`:void 0,confirmAction:{label:"Activate",variant:"default",onClick:async()=>{$&&N&&(await N($),O(!1))}}}),c.jsx(bA,{open:z,onOpenChange:B,title:"Deactivate User",description:$?`Are you sure you want to deactivate ${$.firstName||$.email}? This will prevent them from accessing the system.`:void 0,confirmAction:{label:"Deactivate",variant:"destructive",onClick:async()=>{$&&_&&(await _($),B(!1))}}})]})}function bF({open:e,onOpenChange:t,user:n,roleService:a,onSubmit:s,loading:r=!1}){const[i,o]=p.useState([]),[l,d]=p.useState([]),[u,h]=p.useState([]),[m,f]=p.useState(!1),[g,x]=p.useState(""),[v,y]=p.useState(!1),b=p.useRef(null),{toast:w}=Vk();$s();const S=Us();p.useEffect(()=>{e&&n?C():(h([]),d([]),x(""))},[e,n]);const j=p.useMemo(()=>{if(!g.trim())return i;const e=g.toLowerCase();return i.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[i,g]),C=async()=>{if(n){f(!0);try{const e=(await a.fetchRoles(!0)).filter(e=>!e.isSystem);o(e);const t=await a.getUserDirectRoles(n.id);d(t),h(t.map(e=>e.id))}catch(GQ){}finally{f(!1)}}},k=(e,t="")=>e instanceof Ts?0===e.status?`${t}Network error: Unable to connect to the server. Please check your connection or contact support if the problem persists.`:`${t}${e.message}`:e instanceof TypeError&&e.message.includes("Failed to fetch")?`${t}Network error: Unable to connect to the server. This could be due to CORS configuration or server connectivity issues.`:e instanceof Error?`${t}${e.message}`:`${t}An unexpected error occurred. Please try again.`,N=e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},_=i.length>0&&i.every(e=>u.includes(e.id));if(!n)return null;const E=()=>{t(!1)},P=l.map(e=>e.id),A=u.filter(e=>!P.includes(e)),R=P.filter(e=>!u.includes(e)),T=A.map(e=>i.find(t=>t.id===e)?.name).filter(Boolean),M=R.map(e=>l.find(t=>t.id===e)?.name).filter(Boolean);return c.jsxs(yA,{open:e,onClose:E,title:`Assign Roles to ${n.firstName||n.username||n.email}`,showCancelButton:!0,onCancel:E,showSubmitButton:!0,onSubmit:()=>{b.current&&b.current.requestSubmit()},onEscape:E,autoSubmitShortcut:!0,autoClearShortcut:!0,onClear:()=>{x(""),h(l.map(e=>e.id)),b.current&&b.current.reset()},maxWidth:"800px",loading:r,children:[c.jsx("form",{ref:b,onSubmit:async e=>{e.preventDefault(),n&&y(!0)},id:"assign-roles-form",className:"space-y-6 w-full",children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",S.paddingContainer),children:c.jsxs("div",{className:sl("space-y-6",S.spacingFormSection),children:[c.jsxs(Ol,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(zl,{className:sl(S.textSizeLabel,"font-medium"),children:"Assign Roles"}),c.jsx(bl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=i.map(e=>e.id),t=e.length>0&&e.every(e=>u.includes(e));h(t?[]:e)},disabled:r||0===i.length,className:sl(S.buttonHeightSmall,S.paddingCell,S.textSizeSmall,"font-medium"),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[_?c.jsx(Gg,{className:S.iconSizeSmall}):c.jsx(Wg,{className:S.iconSizeSmall}),c.jsx("span",{children:_?"Deselect All":"Select All"})]})})]}),c.jsx(Bl,{children:m?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex gap-2 mb-3",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ig,{className:sl("absolute left-2.5 top-1/2 transform -translate-y-1/2 text-muted-foreground",S.iconSizeSmall)}),c.jsx(_l,{type:"text",placeholder:"Search roles...",value:g,onChange:e=>x(e.target.value),disabled:r,className:sl("pl-8",S.inputHeight,S.textSize)})]})}),c.jsx("div",{className:sl("space-y-2 rounded-md border max-h-[500px] overflow-y-auto",S.paddingForm),children:0===i.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No custom roles available. Create a role first."}):0===j.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:g?"No roles match your search":"No roles available"}):c.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:j.map(e=>c.jsxs("label",{className:"flex items-start gap-3 rounded-md border p-3 pl-4 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>N(e.id),disabled:r,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",title:e.description,children:e.description}),e.permissions.length>0&&c.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[e.permissions.length," permission",1!==e.permissions.length?"s":""]})]})]},e.id))})})]})}),c.jsx($l,{className:S.textSizeSmall,children:"Select custom roles for this user. System roles are assigned via the user's base role."})]}),u.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[u.length," ",1===u.length?"role":"roles"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:u.map(e=>{const t=i.find(t=>t.id===e);return t?c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),N(e)},disabled:r,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(xx,{className:"h-3 w-3 text-destructive"})})]},e):null})})]})]})})}),c.jsx(bA,{open:v,onOpenChange:e=>{y(e)},title:"Confirm Role Assignment",description:c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"mb-3 text-xs",children:["Are you sure you want to update the roles for"," ",c.jsx("span",{className:"font-semibold",children:n.firstName||n.username||n.email}),"?"]}),(T.length>0||M.length>0)&&c.jsxs("div",{className:"space-y-1.5",children:[T.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Adding ",T.length," role",1!==T.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:T.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]}),M.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Removing ",M.length," role",1!==M.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:M.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]})]}),0===T.length&&0===M.length&&c.jsx("p",{className:"text-xs text-muted-foreground",children:"No changes to apply."})]}),confirmAction:{label:r?"Saving...":"Confirm & Save",onClick:async()=>{if(n)try{const e=l.map(e=>e.id),r=u,i=r.filter(t=>!e.includes(t)),o=e.filter(e=>!r.includes(e));for(const t of o)try{await a.removeRoleFromUser(n.id,t)}catch(GQ){const t=k(GQ,"Failed to remove role. ");return y(!1),void w({title:"Failed to Remove Role",description:t,variant:"destructive"})}for(const t of i)try{await a.assignRoleToUser(n.id,t)}catch(GQ){const t=k(GQ,"Failed to assign role. ");return y(!1),void w({title:"Failed to Assign Role",description:t,variant:"destructive"})}await s(n.id,u),y(!1),w({title:"Roles Updated",description:"User roles have been successfully updated"}),t(!1)}catch(GQ){const t=k(GQ,"Failed to update roles. ");y(!1),w({title:"Failed to Update Roles",description:t,variant:"destructive"})}},loading:r,disabled:r||m},cancelAction:{label:"Cancel",variant:"outline",disabled:r}})]})}function wF({open:e,onOpenChange:t,user:n,groupService:a,onSubmit:s,loading:r=!1}){const i=p.useRef(null),[o,l]=p.useState([]),[d,u]=p.useState([]),[h,m]=p.useState([]),[f,g]=p.useState(!1),[x,v]=p.useState(""),[y,b]=p.useState(!1),{toast:w}=Vk();$s();const S=Us();p.useEffect(()=>{e&&n?C():(m([]),u([]),v(""))},[e,n]);const j=p.useMemo(()=>{if(!x.trim())return o;const e=x.toLowerCase();return o.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[o,x]),C=async()=>{if(n){g(!0);try{const e=await a.fetchGroups(!0);l(e);const t=await a.getUserGroups(n.id);u(t),m(t.map(e=>e.id))}catch(GQ){}finally{g(!1)}}},k=async()=>{if(n)try{const e=d.map(e=>e.id),r=h,i=r.filter(t=>!e.includes(t)),o=e.filter(e=>!r.includes(e));for(const t of o)try{await a.removeUserFromGroup(n.id,t)}catch(GQ){const t=N(GQ,"Failed to remove user from group. ");return b(!1),void w({title:"Failed to Remove User from Group",description:t,variant:"destructive"})}for(const t of i)try{await a.addUserToGroup(n.id,t)}catch(GQ){const t=N(GQ,"Failed to add user to group. ");return b(!1),void w({title:"Failed to Add User to Group",description:t,variant:"destructive"})}await s(n.id,h),b(!1),w({title:"Groups Updated",description:"User groups have been successfully updated"}),t(!1)}catch(GQ){const t=N(GQ,"Failed to update groups. ");b(!1),w({title:"Failed to Update Groups",description:t,variant:"destructive"})}},N=(e,t="")=>e instanceof Ts?0===e.status?`${t}Network error: Unable to connect to the server. Please check your connection or contact support if the problem persists.`:`${t}${e.message}`:e instanceof TypeError&&e.message.includes("Failed to fetch")?`${t}Network error: Unable to connect to the server. This could be due to CORS configuration or server connectivity issues.`:e instanceof Error?`${t}${e.message}`:`${t}An unexpected error occurred. Please try again.`,_=e=>{m(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},E=o.length>0&&o.every(e=>h.includes(e.id));if(!n)return null;const P=()=>{t(!1)},A=d.map(e=>e.id),R=h.filter(e=>!A.includes(e)),T=A.filter(e=>!h.includes(e)),M=R.map(e=>o.find(t=>t.id===e)?.name).filter(Boolean),D=T.map(e=>d.find(t=>t.id===e)?.name).filter(Boolean);return c.jsxs(yA,{open:e,onClose:P,title:`Assign Groups to ${n.firstName||n.username||n.email}`,showCancelButton:!0,onCancel:P,showSubmitButton:!0,onSubmit:()=>{i.current&&i.current.requestSubmit()},maxWidth:"800px",loading:r,onEscape:y?k:P,autoSubmitShortcut:!0,autoClearShortcut:!0,onClear:()=>{i.current&&i.current.reset()},children:[c.jsx("form",{ref:i,onSubmit:async e=>{e.preventDefault(),n&&b(!0)},id:"assign-groups-form",className:"space-y-6 w-full",children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",S.paddingContainer),children:c.jsxs("div",{className:sl("space-y-6",S.spacingFormSection),children:[c.jsxs(Ol,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(zl,{className:sl(S.textSizeLabel,"font-medium"),children:"Assign Groups"}),c.jsx(bl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=o.map(e=>e.id),t=e.length>0&&e.every(e=>h.includes(e));m(t?[]:e)},disabled:r||0===o.length,className:sl(S.buttonHeightSmall,S.paddingCell,S.textSizeSmall,"font-medium"),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[E?c.jsx(Gg,{className:S.iconSizeSmall}):c.jsx(Wg,{className:S.iconSizeSmall}),c.jsx("span",{children:E?"Deselect All":"Select All"})]})})]}),c.jsx(Bl,{children:f?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex gap-2 mb-3",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ig,{className:sl("absolute left-2.5 top-1/2 transform -translate-y-1/2 text-muted-foreground",S.iconSizeSmall)}),c.jsx(_l,{type:"text",placeholder:"Search groups...",value:x,onChange:e=>v(e.target.value),disabled:r,className:sl("pl-8",S.inputHeight,S.textSize)})]})}),c.jsx("div",{className:sl("space-y-2 rounded-md border max-h-[500px] overflow-y-auto",S.paddingForm),children:0===o.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No groups available. Create a group first."}):0===j.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:x?"No groups match your search":"No groups available"}):c.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:j.map(e=>c.jsxs("label",{className:"flex items-start gap-3 rounded-md border p-3 pl-4 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:h.includes(e.id),onChange:()=>_(e.id),disabled:r||!e.isActive,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),!e.isActive&&c.jsx(NC,{variant:"secondary",className:"text-xs",children:"Inactive"})]}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",title:e.description,children:e.description}),c.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[void 0!==e.memberCount&&c.jsxs("span",{children:[e.memberCount," member",1!==e.memberCount?"s":""]}),void 0!==e.memberCount&&void 0!==e.roleCount&&"  ",void 0!==e.roleCount&&c.jsxs("span",{children:[e.roleCount," role",1!==e.roleCount?"s":""]})]})]})]},e.id))})})]})}),c.jsx($l,{className:S.textSizeSmall,children:"Select groups for this user. The user will inherit all roles from these groups."})]}),h.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[h.length," ",1===h.length?"group":"groups"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:h.map(e=>{const t=o.find(t=>t.id===e);return t?c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),_(e)},disabled:r,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(xx,{className:"h-3 w-3 text-destructive"})})]},e):null})})]})]})})}),c.jsx(bA,{open:y,onOpenChange:e=>{b(e)},title:"Confirm Group Assignment",description:c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"mb-3 text-xs",children:["Are you sure you want to update the groups for"," ",c.jsx("span",{className:"font-semibold",children:n.firstName||n.username||n.email}),"? The user will inherit all roles from the assigned groups."]}),(M.length>0||D.length>0)&&c.jsxs("div",{className:"space-y-1.5",children:[M.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Adding ",M.length," group",1!==M.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:M.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]}),D.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Removing ",D.length," group",1!==D.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:D.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]})]}),0===M.length&&0===D.length&&c.jsx("p",{className:"text-xs text-muted-foreground",children:"No changes to apply."})]}),confirmAction:{label:r?"Saving...":"Confirm & Save",onClick:k,loading:r,disabled:r||f},cancelAction:{label:"Cancel",variant:"outline",disabled:r}})]})}function SF({open:e,onOpenChange:t,user:n,roleService:a,groupService:s}){const[r,i]=p.useState(!1),[o,l]=p.useState([]),[d,u]=p.useState([]),[h,m]=p.useState(null),[f,g]=p.useState("");p.useEffect(()=>{e&&n?x():(l([]),u([]),m(null),g(""))},[e,n]);const x=async()=>{if(n){i(!0),m(null);try{const[e,t]=await Promise.all([s.getUserGroups(n.id),a.getUserAllRoles(n.id)]);l(e),u(t)}catch(GQ){m("Failed to load permissions data")}finally{i(!1)}}},v=p.useMemo(()=>{const e=new Map;return d.forEach(t=>{t.permissions?.forEach(t=>{e.has(t.id)||e.set(t.id,t)})}),Array.from(e.values())},[d]),y=p.useMemo(()=>{if(!f.trim())return v;const e=f.toLowerCase();return v.filter(t=>t.name.toLowerCase().includes(e)||t.resource?.toLowerCase().includes(e)||t.action?.toLowerCase().includes(e))},[v,f]);return n?c.jsx(CE,{open:e,onOpenChange:t,children:c.jsxs(EE,{side:"right",className:"overflow-y-auto",style:{width:"700px",maxWidth:"1000px"},children:[c.jsxs(PE,{children:[c.jsxs(RE,{className:"flex items-center gap-2",children:[c.jsx($g,{className:"h-5 w-5"}),"Permissions & Access"]}),c.jsxs(TE,{children:["View all groups, roles, and permissions for"," ",n.firstName||n.username||n.email]})]}),c.jsxs("div",{className:"mt-6 space-y-6",children:[r&&c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}),h&&c.jsx("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-4 text-sm text-destructive",children:h}),!r&&!h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[c.jsx(mx,{className:"h-4 w-4"}),"Groups (",o.length,")"]}),0===o.length?c.jsx("div",{className:"rounded-md border p-4 text-center text-sm text-muted-foreground",children:"User is not assigned to any groups"}):c.jsx("div",{className:"space-y-2",children:o.map(e=>c.jsx("div",{className:"rounded-md border p-3 hover:bg-muted/50",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm",children:e.name}),!e.isActive&&c.jsx(NC,{variant:"secondary",className:"text-xs",children:"Inactive"})]}),e.description&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),void 0!==e.roleCount&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.roleCount," role",1!==e.roleCount?"s":""," assigned"]})]})})},e.id))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[c.jsx($g,{className:"h-4 w-4"}),"Roles (",d.length,")"]}),0===d.length?c.jsx("div",{className:"rounded-md border p-4 text-center text-sm text-muted-foreground",children:"User has no assigned roles"}):c.jsx("div",{className:"space-y-2",children:d.map(e=>c.jsx("div",{className:"rounded-md border p-3 hover:bg-muted/50",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm",children:e.name}),e.isSystem&&c.jsx(NC,{variant:"secondary",className:"text-xs",children:"System"})]}),e.description&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),e.permissions&&e.permissions.length>0&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.permissions.length," permission",1!==e.permissions.length?"s":""]})]})})},e.id))})]}),v.length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[c.jsx(Of,{className:"h-4 w-4"}),"Access Rights (",y.length,f&&y.length!==v.length?` of ${v.length}`:"",")"]})}),c.jsx("div",{className:"mb-4",children:c.jsx(NA,{placeholder:"Search permissions by name, resource, or action...",value:f,onChange:e=>g(e.target.value)})}),0===y.length?c.jsxs("div",{className:"rounded-md border p-4 text-center text-sm text-muted-foreground",children:['No permissions found matching "',f,'"']}):c.jsx("div",{className:"rounded-md border overflow-hidden max-h-[500px] overflow-y-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-muted/50 sticky top-0 z-10 border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left font-medium text-xs uppercase text-muted-foreground",children:"Resource"}),c.jsx("th",{className:"px-4 py-2 text-left font-medium text-xs uppercase text-muted-foreground",children:"Permission"}),y.some(e=>e.action)&&c.jsx("th",{className:"px-4 py-2 text-left font-medium text-xs uppercase text-muted-foreground",children:"Action"})]})}),c.jsx("tbody",{children:y.map((e,t)=>c.jsxs("tr",{className:"border-b hover:bg-muted/30 "+(t%2==0?"bg-background":"bg-muted/10"),children:[c.jsx("td",{className:"px-4 py-2 text-xs font-medium",children:e.resource||"other"}),c.jsx("td",{className:"px-4 py-2 text-xs",children:e.name}),y.some(e=>e.action)&&c.jsx("td",{className:"px-4 py-2 text-xs text-muted-foreground",children:e.action||"-"})]},e.id))})]})})]})]})]})]})}):null}function jF(e){return{id:e.id,name:e.name,description:e.description,permissions:e.permissions.map(e=>({id:e,name:e,resource:e.split(":")[0]||e,action:e.split(":")[1]||"read"})),isSystem:e.is_system_role,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}function CF(e){const t={};return void 0!==e.name&&(t.name=e.name),void 0!==e.description&&(t.description=e.description),void 0!==e.permissions&&(t.permissions=e.permissions),t}class kF{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchRoles(e=!0){try{const t=new URLSearchParams;t.append("include_system_roles",e.toString());return((await this.apiClient.get(`${this.endpoints.roles}?${t.toString()}`,{requiresAuth:!0})).roles||[]).map(jF)}catch(t){throw t}}async fetchRole(e){try{const t=this.endpoints.roles.replace(/\/$/,"");return jF(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createRole(e){try{const t=CF(e);return jF(await this.apiClient.post(this.endpoints.roles,t,{requiresAuth:!0}))}catch(t){throw t}}async updateRole(e,t){try{const n=CF(t),a=this.endpoints.roles.replace(/\/$/,"");return jF(await this.apiClient.patch(`${a}/${e}`,n,{requiresAuth:!0}))}catch(n){throw n}}async deleteRole(e){try{const t=this.endpoints.roles.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async assignRoleToUser(e,t){try{await this.apiClient.post(`${this.endpoints.roles}/assign`,{user_id:e,role_id:t},{requiresAuth:!0})}catch(n){throw n}}async removeRoleFromUser(e,t){try{const n=this.endpoints.roles.replace(/\/$/,"");await this.apiClient.delete(`${n}/assign/${e}/${t}`,{requiresAuth:!0})}catch(n){throw n}}async getUserDirectRoles(e){try{const t=this.endpoints.roles.replace(/\/$/,"");return((await this.apiClient.get(`${t}/users/${e}/direct`,{requiresAuth:!0})).roles||[]).map(jF)}catch(t){throw t}}async getUserAllRoles(e){try{return((await this.apiClient.get(`/api/v1/users/${e}/roles/all`,{requiresAuth:!0})).roles||[]).map(jF)}catch(t){throw t}}}function NF(e){return{id:e.id,tenantId:e.tenant_id,name:e.name,description:e.description,isActive:e.is_active,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),memberCount:e.members_count,roleCount:e.roles_count}}function _F(e){const t={};return void 0!==e.name&&(t.name=e.name),void 0!==e.description&&(t.description=e.description),void 0!==e.is_active&&(t.is_active=e.is_active),t}class EF{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchGroups(e=!1){try{const t=new URLSearchParams;t.append("include_inactive",e.toString());return((await this.apiClient.get(`${this.endpoints.groups}?${t.toString()}`,{requiresAuth:!0})).groups||[]).map(NF)}catch(t){throw t}}async fetchGroup(e){try{const t=this.endpoints.groups.replace(/\/$/,"");return NF(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createGroup(e){try{const t=_F(e);return NF(await this.apiClient.post(this.endpoints.groups,t,{requiresAuth:!0}))}catch(t){throw t}}async updateGroup(e,t){try{const n=_F({...t,is_active:t.is_active}),a=this.endpoints.groups.replace(/\/$/,"");return NF(await this.apiClient.patch(`${a}/${e}`,n,{requiresAuth:!0}))}catch(n){throw n}}async deleteGroup(e){try{const t=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async addUserToGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.post(`${n}/${t}/users`,{user_id:e},{requiresAuth:!0})}catch(n){throw n}}async removeUserFromGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.delete(`${n}/${t}/users/${e}`,{requiresAuth:!0})}catch(n){throw n}}async getGroupMembers(e){try{const t=this.endpoints.groups.replace(/\/$/,"");return await this.apiClient.get(`${t}/${e}/users`,{requiresAuth:!0})||[]}catch(t){throw t}}async addRoleToGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.post(`${n}/${e}/roles`,{role_id:t},{requiresAuth:!0})}catch(n){throw n}}async removeRoleFromGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.delete(`${n}/${e}/roles/${t}`,{requiresAuth:!0})}catch(n){throw n}}async getGroupRoles(e){try{const t=this.endpoints.groups.replace(/\/$/,"");return(await this.apiClient.get(`${t}/${e}/roles`,{requiresAuth:!0})||[]).map(e=>({id:e.id,name:e.name,description:e.description,permissions:e.permissions.map(e=>({id:e,name:e,resource:e.split(":")[0]||e,action:e.split(":")[1]||"read"})),isSystem:e.is_system_role,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}))}catch(t){throw t}}async getUserGroups(e){try{return((await this.apiClient.get(`/api/v1/users/${e}/groups`,{requiresAuth:!0})).groups||[]).map(NF)}catch(t){throw t}}}function PF({className:e,user:t,loading:n=!1,error:a=null,activities:s=[],showActivity:r=!0,showMetadata:i=!1,editable:o=!0,onEdit:l,onPasswordReset:d,onActivate:u,onDeactivate:h,onLock:m,onUnlock:f,customActions:g,onBack:x}){const[v,y]=p.useState("profile"),[b,w]=p.useState(!1),[S,j]=p.useState(!1),[C,k]=p.useState(""),[N,_]=p.useState(!1),[E,P]=p.useState(!1),[A,R]=p.useState(!1),[T,M]=p.useState(!1),[D,L]=p.useState(!1),[F,I]=p.useState(!1),[O,z]=p.useState(!1),[B,$]=p.useState(!1),[U,V]=p.useState(!1),{toast:q}=Vk(),H=Us(),G=p.useMemo(()=>new kF({apiClient:Fs,endpoints:{roles:ms.ENDPOINTS.ROLES}}),[]),K=p.useMemo(()=>new EF({apiClient:Fs,endpoints:{groups:ms.ENDPOINTS.GROUPS}}),[]);if(n)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(a||!t)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:a?.message||"User not found"})});const W=()=>t.firstName||t.lastName?`${t.firstName||""} ${t.lastName||""}`.trim():t.username||t.email,Q=e=>{if(!e)return"N/A";try{const t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch(t){return"Invalid date"}},Y="active"===t.status,X=t.lockedUntil&&new Date(t.lockedUntil)>new Date;return c.jsxs(Sl,{className:sl("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(SC,{className:"h-20 w-20",children:t.avatar?c.jsx("img",{src:t.avatar,alt:W()}):c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-primary/10 text-2xl font-medium",children:W().charAt(0).toUpperCase()})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:W()}),t.username&&c.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.username]}),X&&c.jsxs("p",{className:"text-sm font-medium text-destructive mt-1 flex items-center gap-1.5",children:[c.jsx(Qf,{className:"h-3.5 w-3.5"}),"Account locked until ",Q(t.lockedUntil)]}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(NC,{variant:{active:"default",inactive:"secondary",suspended:"destructive",pending:"outline"}[t.status],children:t.status}),c.jsx(NC,{variant:"outline",children:t.role||t.baseRole||"User"})]})]})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:g?.(t)}),c.jsx("div",{children:c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"ghost",size:"sm",className:sl("h-8 px-2 text-xs"),"aria-label":"Actions",children:c.jsx(yf,{className:"h-3 w-3"})})}),c.jsxs(hj,{align:"end",className:"w-56",children:[o&&l&&c.jsxs(mj,{onClick:()=>l(t),children:[c.jsx(Kg,{className:"mr-2 h-3.5 w-3.5"})," Edit user"]}),d&&c.jsxs(mj,{onClick:()=>{w(!0)},children:[c.jsx(Of,{className:"mr-2 h-3.5 w-3.5"})," Reset password"]}),c.jsxs(mj,{onClick:()=>z(!0),children:[c.jsx(px,{className:"mr-2 h-3.5 w-3.5"})," Assign roles"]}),c.jsxs(mj,{onClick:()=>$(!0),children:[c.jsx(mx,{className:"mr-2 h-3.5 w-3.5"})," Assign groups"]}),(o&&l||d)&&(u||h||m||f)&&c.jsx(xj,{}),(u||h)&&c.jsx(mj,{onClick:()=>{t&&(Y&&h?M(!0):!Y&&u&&R(!0))},disabled:Y&&!h||!Y&&!u,children:Y?c.jsxs(c.Fragment,{children:[c.jsx(cf,{className:"mr-2 h-3.5 w-3.5"})," Deactivate user"]}):c.jsxs(c.Fragment,{children:[c.jsx(rf,{className:"mr-2 h-3.5 w-3.5"})," Activate user"]})}),(m||f)&&c.jsx(mj,{onClick:()=>{t&&(X&&f&&Y?I(!0):!X&&m&&Y&&L(!0))},disabled:!Y||X&&!f||!X&&(!m||!Y),children:X?c.jsxs(c.Fragment,{children:[c.jsx(Wf,{className:"mr-2 h-3.5 w-3.5"})," Unlock account"]}):c.jsxs(c.Fragment,{children:[c.jsx(Qf,{className:"mr-2 h-3.5 w-3.5"})," Lock account"]})})]})]})})]}),c.jsxs(gy,{value:v,onValueChange:e=>y(e),children:[c.jsx("div",{className:"border-b mb-4",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","profile"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("profile"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(hx,{className:"h-4 w-4"}),"Profile"]})}),c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","login"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("login"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx($g,{className:"h-4 w-4"}),"Login & Security"]})}),r&&c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","activity"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("activity"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Mf,{className:"h-4 w-4"}),"Activity"]})}),i&&t.metadata&&c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","metadata"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("metadata"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(gf,{className:"h-4 w-4"}),"Metadata"]})})]})}),c.jsxs("div",{className:"mt-0",children:["profile"===v&&c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Contact Information"}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Email"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.email})]}),t.username&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Username"}),c.jsxs("dd",{className:"mt-1 text-sm text-muted-foreground",children:["@",t.username]})]}),t.firstName||t.lastName?c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Full Name"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:W()})]}):null]})]}),(t.tenantId||t.permissions&&t.permissions.length>0)&&c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Account Details"}),c.jsxs("dl",{className:"space-y-3",children:[t.tenantId&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Tenant ID"}),c.jsx("dd",{className:"mt-1 text-xs text-muted-foreground font-mono",children:t.tenantId})]}),t.permissions&&t.permissions.length>0&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Permissions"}),c.jsx("dd",{className:"mt-1",children:c.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.permissions.slice(0,3).map(e=>c.jsx(NC,{variant:"outline",className:"text-xs",children:e},e)),t.permissions.length>3&&c.jsxs(NC,{variant:"outline",className:"text-xs",children:["+",t.permissions.length-3," more"]})]})})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Timeline"}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Member Since"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:Q(t.createdAt)})]}),t.updatedAt&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Updated"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:Q(t.updatedAt)})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"User ID"}),c.jsx("dd",{className:"mt-1 text-xs text-muted-foreground font-mono",children:t.id})]})]})]})]})}),"login"===v&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"mb-4 text-sm font-medium text-muted-foreground flex items-center gap-2",children:[c.jsx($g,{className:"h-4 w-4"}),"Authentication Status"]}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Email Verified"}),c.jsx("dd",{className:"mt-1",children:c.jsx(NC,{variant:t.isVerified?"default":"secondary",children:t.isVerified?"Verified":"Not Verified"})})]}),void 0!==t.isVerified&&!t.isVerified&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Verification Status"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:"This user has not verified their email address"})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Password Change Required"}),c.jsx("dd",{className:"mt-1",children:t.mustChangePassword?c.jsx(NC,{variant:"destructive",children:"Yes - Required on next login"}):c.jsx(NC,{variant:"outline",children:"No"})})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"mb-4 text-sm font-medium text-muted-foreground flex items-center gap-2",children:[c.jsx(hf,{className:"h-4 w-4"}),"Login History"]}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Login"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.lastLogin?c.jsx("span",{className:"flex items-center gap-2",children:c.jsx("span",{children:Q(t.lastLogin)})}):c.jsx("span",{className:"text-muted-foreground italic",children:"Never logged in"})})]}),t.lastPasswordChange&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Password Change"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:Q(t.lastPasswordChange)})]}),void 0!==t.failedLoginAttempts&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Failed Login Attempts"}),c.jsx("dd",{className:"mt-1",children:t.failedLoginAttempts>0?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(NC,{variant:t.failedLoginAttempts>=5?"destructive":"secondary",children:[t.failedLoginAttempts," ",1===t.failedLoginAttempts?"attempt":"attempts"]}),t.failedLoginAttempts>=5&&c.jsx("span",{className:"text-xs text-destructive",children:"Warning: High number of failed attempts"})]}):c.jsx(NC,{variant:"outline",children:"None"})})]})]})]})]}),c.jsx("div",{className:"mt-6",children:c.jsxs(bl,{variant:"outline",onClick:()=>V(!0),className:"w-full sm:w-auto",children:[c.jsx($g,{className:"mr-2 h-4 w-4"}),"View All Groups, Roles & Permissions"]})}),(t.mustChangePassword||void 0!==t.failedLoginAttempts&&t.failedLoginAttempts>0||t.lockedUntil||!1===t.isVerified)&&c.jsxs("div",{className:"mt-6 rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-950",children:[c.jsx("h4",{className:"mb-2 text-sm font-medium text-amber-900 dark:text-amber-100",children:"Security Recommendations"}),c.jsxs("ul",{className:"space-y-1 text-sm text-amber-800 dark:text-amber-200",children:[!1===t.isVerified&&c.jsx("li",{children:" Email verification is pending - user should verify their email"}),t.mustChangePassword&&c.jsx("li",{children:" User must change password on next login"}),void 0!==t.failedLoginAttempts&&t.failedLoginAttempts>=3&&c.jsx("li",{children:" Multiple failed login attempts detected - consider reviewing account security"}),t.lockedUntil&&c.jsx("li",{children:" Account is currently locked - will unlock automatically"})]})]})]}),"activity"===v&&c.jsx("div",{className:"space-y-4",children:0===s.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx(Mf,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No activity found"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Recent user activity will appear here"})]}):c.jsx("div",{className:"space-y-2",children:s.map(e=>c.jsxs("div",{className:"flex items-start gap-3 rounded-lg border bg-card p-4 transition-colors hover:bg-accent/50",children:[c.jsx("div",{className:"mt-0.5 flex-shrink-0",children:(()=>{const t=e.eventType?.toLowerCase()||"";return t.includes("login")?c.jsx($g,{className:"h-4 w-4 text-green-600"}):t.includes("logout")?c.jsx($g,{className:"h-4 w-4 text-gray-600"}):t.includes("password")?c.jsx(Of,{className:"h-4 w-4 text-orange-600"}):t.includes("lock")?c.jsx(Qf,{className:"h-4 w-4 text-red-600"}):t.includes("unlock")?c.jsx(Wf,{className:"h-4 w-4 text-blue-600"}):t.includes("activate")?c.jsx(rf,{className:"h-4 w-4 text-green-600"}):t.includes("deactivate")?c.jsx(cf,{className:"h-4 w-4 text-red-600"}):t.includes("create")?c.jsx(rf,{className:"h-4 w-4 text-blue-600"}):t.includes("update")?c.jsx(Kg,{className:"h-4 w-4 text-yellow-600"}):t.includes("delete")?c.jsx(cf,{className:"h-4 w-4 text-red-600"}):c.jsx(hf,{className:"h-4 w-4 text-muted-foreground"})})()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsx("p",{className:"text-sm font-medium",children:e.action}),(()=>{const t=e.severity?.toLowerCase();if(!t)return null;return c.jsx(NC,{variant:{critical:"destructive",high:"destructive",medium:"default",low:"secondary"}[t]||"outline",className:"text-xs",children:t})})()]}),e.details&&c.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.details}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(hf,{className:"h-3 w-3"}),e.timestamp?Q(e.timestamp):"N/A"]}),e.resource&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(gf,{className:"h-3 w-3"}),e.resource,e.resourceId&&c.jsxs("span",{className:"font-mono",children:["#",e.resourceId.slice(0,8)]})]}),e.ipAddress&&c.jsx("span",{className:"font-mono",children:e.ipAddress})]})]})]},e.id))})}),"metadata"===v&&t.metadata&&c.jsx("div",{className:"space-y-2",children:c.jsx("pre",{className:"rounded-lg bg-muted p-4 text-sm",children:JSON.stringify(t.metadata,null,2)})})]})]})]}),c.jsx(ub,{open:S,onOpenChange:j,children:c.jsxs(pb,{className:"sm:max-w-md",children:[c.jsxs(fb,{children:[c.jsx(xb,{children:"Reset Password"}),c.jsxs(vb,{children:["A temporary password has been generated for ",W(),". Make sure to copy it before closing this dialog."]})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Temporary Password"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(_l,{type:"text",value:C,readOnly:!0,className:"font-mono text-sm"}),c.jsx(bl,{type:"button",variant:"outline",size:"icon",onClick:async()=>{try{await navigator.clipboard.writeText(C),_(!0),setTimeout(()=>_(!1),2e3)}catch(GQ){}},title:"Copy password",children:N?c.jsx(rf,{className:"h-4 w-4 text-green-600"}):c.jsx(pf,{className:"h-4 w-4"})})]}),N&&c.jsx("p",{className:"text-xs text-green-600",children:"Password copied to clipboard!"})]}),c.jsxs("div",{className:"rounded-lg bg-amber-50 p-3 text-sm text-amber-900 dark:bg-amber-950 dark:text-amber-100",children:[c.jsx("p",{className:"font-medium mb-1",children:"Important:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"This password will be set for the user"}),c.jsx("li",{children:"The user must change it on next login"}),c.jsx("li",{children:"Save this password securely - it cannot be retrieved again"})]})]})]}),c.jsxs(gb,{children:[c.jsx(bl,{variant:"outline",onClick:()=>j(!1),disabled:E,children:"Cancel"}),c.jsx(bl,{onClick:async()=>{if(t&&d){P(!0);try{await d(t,C),j(!1)}catch(e){}finally{P(!1)}}},disabled:E||!C,children:E?"Resetting...":"Confirm Reset"})]})]})}),c.jsx(Gb,{open:b,onOpenChange:w,children:c.jsxs(Qb,{children:[c.jsxs(Yb,{children:[c.jsx(Zb,{children:"Reset Password"}),c.jsxs(Jb,{children:["Are you sure you want to reset the password for"," ",W(),"? A new temporary password will be generated that they must use on their next login."]})]}),c.jsxs(Xb,{children:[c.jsx(tw,{asChild:!0,children:c.jsxs(bl,{variant:"outline",className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(xx,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx(ew,{asChild:!0,children:c.jsxs(bl,{onClick:()=>{w(!1);const e=(()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*",t=crypto.getRandomValues(new Uint8Array(16));return Array.from(t).map(t=>e[t%70]).join("")})();k(e),j(!0),_(!1)},className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(Ag,{className:H.iconSizeSmall}),c.jsx("span",{children:"Generate New Password"})]})})]})]})}),c.jsx(Gb,{open:A,onOpenChange:R,children:c.jsxs(Qb,{children:[c.jsxs(Yb,{children:[c.jsx(Zb,{children:"Activate User"}),c.jsxs(Jb,{children:["Are you sure you want to activate ",W(),"? This will restore their access to the system."]})]}),c.jsxs(Xb,{children:[c.jsx(tw,{asChild:!0,children:c.jsxs(bl,{variant:"outline",className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(xx,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx(ew,{asChild:!0,children:c.jsxs(bl,{onClick:async()=>{t&&u&&(await u(t),R(!1))},className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(kg,{className:H.iconSizeSmall}),c.jsx("span",{children:"Activate"})]})})]})]})}),c.jsx(Gb,{open:T,onOpenChange:M,children:c.jsxs(Qb,{children:[c.jsxs(Yb,{children:[c.jsx(Zb,{children:"Deactivate User"}),c.jsxs(Jb,{children:["Are you sure you want to deactivate ",W(),"? This will prevent them from accessing the system."]})]}),c.jsxs(Xb,{children:[c.jsx(tw,{asChild:!0,children:c.jsxs(bl,{variant:"outline",className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(xx,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx(ew,{asChild:!0,children:c.jsxs(bl,{variant:"destructive",onClick:async()=>{t&&h&&(await h(t),M(!1))},className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(Cg,{className:H.iconSizeSmall}),c.jsx("span",{children:"Deactivate"})]})})]})]})}),c.jsx(Gb,{open:D,onOpenChange:L,children:c.jsxs(Qb,{children:[c.jsxs(Yb,{children:[c.jsx(Zb,{children:"Lock Account"}),c.jsxs(Jb,{children:["Are you sure you want to lock ",W(),"'s account? The account will be locked for 60 minutes, preventing login access."]})]}),c.jsxs(Xb,{children:[c.jsx(tw,{asChild:!0,children:c.jsxs(bl,{variant:"outline",className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(xx,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx(ew,{asChild:!0,children:c.jsxs(bl,{variant:"destructive",onClick:async()=>{t&&m&&(await m(t),L(!1))},className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(Fp,{className:H.iconSizeSmall}),c.jsx("span",{children:"Lock Account"})]})})]})]})}),c.jsx(Gb,{open:F,onOpenChange:I,children:c.jsxs(Qb,{children:[c.jsxs(Yb,{children:[c.jsx(Zb,{children:"Unlock Account"}),c.jsxs(Jb,{children:["Are you sure you want to unlock ",W(),"'s account? This will immediately restore their login access."]})]}),c.jsxs(Xb,{children:[c.jsx(tw,{asChild:!0,children:c.jsxs(bl,{variant:"outline",className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(xx,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx(ew,{asChild:!0,children:c.jsxs(bl,{onClick:async()=>{t&&f&&(await f(t),I(!1))},className:sl("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(Wf,{className:H.iconSizeSmall}),c.jsx("span",{children:"Unlock Account"})]})})]})]})}),c.jsx(bF,{open:O,onOpenChange:z,user:t,roleService:G,onSubmit:async(e,t)=>{q({title:"Success",description:"Roles assigned successfully"})}}),c.jsx(wF,{open:B,onOpenChange:$,user:t,groupService:K,onSubmit:async(e,t)=>{q({title:"Success",description:"Groups assigned successfully"})}}),c.jsx(SF,{open:U,onOpenChange:V,user:t,roleService:G,groupService:K})]})}const AF={email:"",password:"",confirmPassword:"",firstName:"",lastName:"",username:"",role:"user"},RF=[{value:"user",label:"User"},{value:"admin",label:"Admin"},{value:"guest",label:"Guest"}];function TF({open:e,onOpenChange:t,onSubmit:n,loading:a=!1,error:s=null}){const r=Us(),[i,o]=p.useState(AF),[l,d]=p.useState({}),[u,h]=p.useState(!1),[m,f]=p.useState(0),[g,x]=p.useState(null),v=p.useRef(null),y=p.useRef(null);p.useEffect(()=>{x(s)},[s]);const b=async e=>{e?.preventDefault(),(()=>{const e={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(e.email="Please enter a valid email address"):e.email="Email is required",i.password?i.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",i.confirmPassword?i.password!==i.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",i.firstName.trim()||(e.firstName="First name is required"),i.lastName.trim()||(e.lastName="Last name is required"),d(e),0===Object.keys(e).length})()&&h(!0)},w=p.useCallback(e=>{const t={};let n="Failed to create user. Please check the form and try again.";if(e instanceof Ts){n=e.message||n;const s={email:"email",password:"password",first_name:"firstName",lastName:"lastName",last_name:"lastName",firstName:"firstName",username:"username",role:"role",confirmPassword:"confirmPassword"};if(422===e.status||400===e.status)try{let n=null;try{n=JSON.parse(e.message)}catch{const t=e.toString();if(t.includes('"detail"')||t.includes("'detail'"))try{const e=t.match(/\{[\s\S]*\}/);e&&(n=JSON.parse(e[0]))}catch{}}n&&(n.detail&&Array.isArray(n.detail)?n.detail.forEach(e=>{if(e.loc&&Array.isArray(e.loc)&&e.loc.length>0){const n=e.loc[e.loc.length-1],a=s[n];if(a&&e.msg){let n=e.msg;e.type&&e.type.includes("value_error")&&(n=`Invalid value: ${e.msg}`),t[a]=n}}}):n.details&&"object"==typeof n.details&&Object.keys(n.details).forEach(e=>{const a=s[e];if(a){const s=n.details[e];t[a]="string"==typeof s?s:JSON.stringify(s)}}))}catch(a){}const r=n.toLowerCase();n.includes("Invalid email format")||n.includes("invalid email")?(t.email="The email address format is invalid. Please check and try again.",n="Invalid email format. Please correct the email address."):r.includes("email")&&!t.email&&(r.includes("already exists")||r.includes("duplicate")?(t.email="This email address is already in use. Please use a different email.",n="Email address already exists."):t.email=n),r.includes("password")&&!t.password&&(r.includes("too short")||r.includes("minimum")?t.password="Password must be at least 8 characters long.":r.includes("weak")||r.includes("strength")?t.password="Password does not meet security requirements.":t.password=n),r.includes("username")&&!t.username&&(r.includes("already exists")||r.includes("duplicate")?(t.username="This username is already taken. Please choose a different username.",n="Username already exists."):t.username=n)}else e instanceof Error&&(n=e.message||n);return{message:n,fieldErrors:t}},[]),S=(e,t)=>{o(n=>({...n,[e]:t})),l[e]&&d(t=>({...t,[e]:void 0})),g&&x(null)},j=()=>{o(AF),d({}),t(!1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{v.current?.focus()})},[e,m]);const C=p.useCallback(e=>{u&&(e.preventDefault(),e.stopPropagation(),h(!1))},[u]);return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:j,title:"Create User",maxWidth:"500px",loading:a,showClearButton:!0,onClear:()=>{o({...AF}),d({}),x(null),f(e=>e+1)},formSelector:y,onSubmit:b,onEscape:u?C:void 0,autoClearShortcut:!0,showCancelButton:!0,onCancel:j,showSubmitButton:!0,children:c.jsxs("form",{ref:y,onSubmit:b,className:sl(r.spacingFormSection,"w-full"),children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsxs("div",{className:sl("grid grid-cols-1",r.gapForm),children:[c.jsxs(Ol,{className:r.spacingFormItem,children:[c.jsx(zl,{htmlFor:"firstName",className:sl(r.textSizeLabel,"font-medium"),children:"First Name *"}),c.jsx(Bl,{children:c.jsx(_l,{id:"firstName",ref:v,value:i.firstName,onChange:e=>S("firstName",e.target.value),className:sl(r.inputHeight,r.textSize,l.firstName&&"border-destructive"),disabled:a,placeholder:"First name"})}),c.jsx(Ul,{className:r.textSizeSmall,children:l.firstName})]}),c.jsxs(Ol,{className:r.spacingFormItem,children:[c.jsx(zl,{htmlFor:"lastName",className:sl(r.textSizeLabel,"font-medium"),children:"Last Name *"}),c.jsx(Bl,{children:c.jsx(_l,{id:"lastName",value:i.lastName,onChange:e=>S("lastName",e.target.value),className:sl(r.inputHeight,r.textSize,l.lastName&&"border-destructive"),disabled:a,placeholder:"Last name"})}),c.jsx(Ul,{className:r.textSizeSmall,children:l.lastName})]}),c.jsxs(Ol,{className:r.spacingFormItem,children:[c.jsx(zl,{htmlFor:"email",className:sl(r.textSizeLabel,"font-medium"),children:"Email Address *"}),c.jsx(Bl,{children:c.jsx(_l,{id:"email",type:"email",value:i.email,onChange:e=>S("email",e.target.value),className:sl(r.inputHeight,r.textSize,l.email&&"border-destructive"),disabled:a,placeholder:"email@example.com"})}),c.jsx(Ul,{className:r.textSizeSmall,children:l.email})]}),c.jsxs(Ol,{className:r.spacingFormItem,children:[c.jsx(zl,{htmlFor:"username",className:sl(r.textSizeLabel,"font-medium"),children:"Username (Optional)"}),c.jsx(Bl,{children:c.jsx(_l,{id:"username",value:i.username,onChange:e=>S("username",e.target.value),className:sl(r.inputHeight,r.textSize,l.username&&"border-destructive"),disabled:a,placeholder:"username"})}),c.jsx(Ul,{className:r.textSizeSmall,children:l.username})]}),c.jsxs(Ol,{className:r.spacingFormItem,children:[c.jsx(zl,{htmlFor:"role",className:sl(r.textSizeLabel,"font-medium"),children:"Role *"}),c.jsx(Bl,{children:c.jsxs(bx,{value:i.role,onValueChange:e=>S("role",e),disabled:a,children:[c.jsx(Sx,{className:sl(r.inputHeight,r.textSize),children:c.jsx(wx,{placeholder:"Select role"})}),c.jsx(kx,{className:r.textSize,children:RF.map(e=>c.jsx(Nx,{value:e.value,className:r.textSize,children:e.label},e.value))})]})})]}),c.jsxs(Ol,{className:r.spacingFormItem,children:[c.jsx(zl,{htmlFor:"password",className:sl(r.textSizeLabel,"font-medium"),children:"Password *"}),c.jsx(Bl,{children:c.jsx(_l,{id:"password",type:"password",value:i.password,onChange:e=>S("password",e.target.value),className:sl(r.inputHeight,r.textSize,l.password&&"border-destructive"),disabled:a,placeholder:"Password",autoComplete:"new-password"})}),c.jsx(Ul,{className:r.textSizeSmall,children:l.password})]}),c.jsxs(Ol,{className:r.spacingFormItem,children:[c.jsx(zl,{htmlFor:"confirmPassword",className:sl(r.textSizeLabel,"font-medium"),children:"Confirm Password *"}),c.jsx(Bl,{children:c.jsx(_l,{id:"confirmPassword",type:"password",value:i.confirmPassword,onChange:e=>S("confirmPassword",e.target.value),className:sl(r.inputHeight,r.textSize,l.confirmPassword&&"border-destructive"),disabled:a,placeholder:"Confirm password",autoComplete:"new-password"})}),c.jsx(Ul,{className:r.textSizeSmall,children:l.confirmPassword})]})]})}),g&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",r.paddingContainer,r.textSizeSmall,"text-destructive mt-4"),children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive mt-1.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold",children:"Error:"}),c.jsx("span",{children:g.message||"Failed to create user"})]}),g.message&&c.jsx("div",{className:"text-xs text-destructive/80 mt-1",children:"Please review the fields highlighted in red and correct any errors before trying again."})]})]})})]},m)}),c.jsx(bA,{open:u,onOpenChange:e=>{h(e),e||setTimeout(()=>{v.current?.focus()},0)},title:"Confirm User Creation",description:c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"mb-3 text-xs",children:"Are you sure you want to create a new user with the following information?"}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"font-medium text-muted-foreground",children:"Name:"}),c.jsxs("span",{className:"text-foreground",children:[i.firstName," ",i.lastName]})]}),c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"font-medium text-muted-foreground",children:"Email:"}),c.jsx("span",{className:"text-foreground",children:i.email})]}),c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"font-medium text-muted-foreground",children:"Role:"}),c.jsx("span",{className:"text-foreground capitalize",children:i.role})]})]})]}),confirmAction:{label:a?"Creating...":"Confirm & Create",onClick:async()=>{try{const e={email:i.email,password:i.password,firstName:i.firstName.trim(),lastName:i.lastName.trim(),username:i.username.trim()||void 0,role:i.role};await n(e),o(AF),d({}),x(null),h(!1),f(e=>e+1)}catch(e){const{message:t,fieldErrors:n}=w(e);Object.keys(n).length>0&&d(n),x(new Error(t)),h(!1)}},loading:a,disabled:a},cancelAction:{label:"Cancel",variant:"outline",disabled:a}})]})}function MF({open:e,onOpenChange:t,user:n,onSubmit:a,loading:s=!1}){const r=Us(),[i,o]=p.useState({firstName:n.firstName||"",lastName:n.lastName||"",baseRole:n.baseRole||n.role}),[l,d]=p.useState({}),[u,h]=p.useState(!1);f.useEffect(()=>{o({firstName:n.firstName||"",lastName:n.lastName||"",baseRole:n.baseRole||n.role}),d({})},[n]);const m=(e,t)=>{o(n=>({...n,[e]:t})),l[e]&&d(t=>({...t,[e]:void 0}))};return c.jsx(ub,{open:e,onOpenChange:e=>{e||u||(o({firstName:n.firstName||"",lastName:n.lastName||"",baseRole:n.baseRole||n.role}),d({})),t(e)},children:c.jsxs(pb,{className:sl("sm:max-w-[600px]",r.paddingContainer,r.gapButtonGroup),children:[c.jsxs(fb,{className:r.spacingFormItem,children:[c.jsx(xb,{className:sl(r.textSizeLabel,"font-semibold"),children:"Edit User"}),c.jsx(vb,{className:sl(r.textSizeSmall,"text-muted-foreground"),children:"Update user information. Click save when you're done."})]}),c.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d({}),h(!0);try{await a(n.id,i),t(!1)}catch(s){d({firstName:"Failed to update user. Please try again."})}finally{h(!1)}},children:[c.jsxs("div",{className:sl("space-y-4 py-4"),children:[c.jsxs("div",{className:sl("grid gap-4 md:grid-cols-2",r.gapForm),children:[c.jsxs("div",{className:r.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"firstName",className:sl(r.textSizeLabel,"font-medium"),children:"First Name"}),c.jsx(_l,{id:"firstName",value:i.firstName,onChange:e=>m("firstName",e.target.value),placeholder:"John",disabled:u||s,className:sl(r.inputHeight,r.textSize)})]}),c.jsxs("div",{className:r.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"lastName",className:sl(r.textSizeLabel,"font-medium"),children:"Last Name"}),c.jsx(_l,{id:"lastName",value:i.lastName,onChange:e=>m("lastName",e.target.value),placeholder:"Doe",disabled:u||s,className:sl(r.inputHeight,r.textSize)})]})]}),c.jsxs("div",{className:r.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"baseRole",className:sl(r.textSizeLabel,"font-medium"),children:"Base role (system)"}),c.jsxs(bx,{value:i.baseRole,onValueChange:e=>m("baseRole",e),disabled:u||s,children:[c.jsx(Sx,{className:sl(r.inputHeight,r.textSize),children:c.jsx(wx,{placeholder:"Select a base role"})}),c.jsxs(kx,{className:r.textSize,children:[c.jsx(Nx,{value:"admin",className:r.textSize,children:"Admin"}),c.jsx(Nx,{value:"manager",className:r.textSize,children:"Manager"}),c.jsx(Nx,{value:"user",className:r.textSize,children:"User"}),c.jsx(Nx,{value:"guest",className:r.textSize,children:"Guest"})]})]})]})]}),c.jsxs(gb,{className:r.gapButtonGroup,children:[c.jsx(bl,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:u||s,className:sl(r.buttonHeightSmall,"px-3",r.textSizeSmall,"font-medium"),children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:u||s,className:sl(r.buttonHeightSmall,"px-3",r.textSizeSmall,"font-medium"),children:u||s?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:sl("mr-2",r.iconSize,"animate-spin rounded-full border-2 border-background border-t-transparent")}),"Saving..."]}):"Save Changes"})]})]})]})})}function DF(e){const t=e=>{if(e)try{const t=new Date(e);return isNaN(t.getTime())?void 0:t}catch{return}};let n;e.last_login&&(n=t(e.last_login));const a=e.base_role||e.role||"user";return{id:e.id,email:e.email,firstName:e.first_name||"",lastName:e.last_name||"",username:e.username||e.email.split("@")[0],status:!1!==e.is_active?"active":"inactive",role:a,baseRole:a,lastLogin:n,createdAt:e.created_at?new Date(e.created_at):new Date,updatedAt:e.updated_at?new Date(e.updated_at):void 0,tenantId:e.tenant_id,isVerified:e.is_verified,mustChangePassword:e.must_change_password,lastPasswordChange:t(e.last_password_change),failedLoginAttempts:e.failed_login_attempts,lockedUntil:t(e.locked_until)}}function LF(e){const t={};return"email"in e&&e.email&&(t.email=e.email),"password"in e&&e.password&&(t.password=e.password),"username"in e&&e.username&&(t.username=e.username),"firstName"in e&&void 0!==e.firstName&&(t.first_name=e.firstName),"lastName"in e&&void 0!==e.lastName&&(t.last_name=e.lastName),"role"in e&&e.role&&(t.role=e.role),"status"in e&&void 0!==e.status&&(t.is_active="active"===e.status),t}class FF{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchUsers(e){try{const t={};e?.search&&(t.search=e.search),e?.role&&(t.role=e.role),void 0!==e?.status&&(t.is_active="active"===e.status),e?.createdAfter&&(t.created_after=e.createdAfter.toISOString()),e?.createdBefore&&(t.created_before=e.createdBefore.toISOString()),e?.userIds&&(t.userIds=e.userIds),e?.tags&&(t.tags=e.tags);if(nA(t)){const n={filter:t,pagination:{skip:e?.skip??0,limit:e?.limit??100}},a=this.endpoints.users.replace(/\/$/,""),s=await this.apiClient.post(`${a}/search`,n,{requiresAuth:!0}),r={page:s.page,pageSize:s.limit,total:s.total,totalPages:s.total_pages};return{data:(s.items||[]).map(DF),pagination:r}}{const t=new URLSearchParams;if(void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),e?.search&&t.append("search",e.search),e?.role&&t.append("role",e.role),void 0!==e?.status){const n="active"===e.status;t.append("is_active",n.toString())}e?.createdAfter&&t.append("created_after",e.createdAfter.toISOString()),e?.createdBefore&&t.append("created_before",e.createdBefore.toISOString());const n=t.toString()?`${this.endpoints.users}/?${t.toString()}`:this.endpoints.users,a=await this.apiClient.get(n,{requiresAuth:!0}),s={page:a.page,pageSize:a.limit,total:a.total,totalPages:a.total_pages};return{data:(a.items||[]).map(DF),pagination:s}}}catch(t){throw t}}async searchUsers(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("q",n),t&&a.append("limit",Math.min(t,1e3).toString());const s=`${this.endpoints.users.replace(/\/$/,"")}/search?${a.toString()}`;return(await this.apiClient.get(s,{requiresAuth:!0})).map(DF)}catch(n){throw n}}async fetchUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return DF(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createUser(e){try{const t=LF(e);return DF(await this.apiClient.post(this.endpoints.users,t,{requiresAuth:!0}))}catch(t){throw t}}async updateUser(e,t){try{const n=LF(t),a=this.endpoints.users.replace(/\/$/,"");return DF(await this.apiClient.put(`${a}/${e}`,n,{requiresAuth:!0}))}catch(n){throw n}}async deleteUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async activateUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return DF(await this.apiClient.post(`${t}/${e}/activate`,{},{requiresAuth:!0}))}catch(t){throw t}}async deactivateUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return DF(await this.apiClient.post(`${t}/${e}/deactivate`,{},{requiresAuth:!0}))}catch(t){throw t}}async lockUser(e,t=60){try{const n=this.endpoints.users.replace(/\/$/,"");return DF(await this.apiClient.post(`${n}/${e}/lock?lockout_minutes=${t}`,{},{requiresAuth:!0}))}catch(n){throw n}}async unlockUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return DF(await this.apiClient.post(`${t}/${e}/unlock`,{},{requiresAuth:!0}))}catch(t){throw t}}async resetPassword(e,t){try{const n=this.endpoints.users.replace(/\/$/,"");return DF(await this.apiClient.post(`${n}/${e}/reset-password`,{new_password:t},{requiresAuth:!0}))}catch(n){throw n}}async fetchUserActivity(e,t=100,n){try{const a=new URLSearchParams;a.append("entity_id",e),a.append("entity_type","user"),a.append("limit",t.toString()),n&&a.append("hours",n.toString());return(await this.apiClient.get(`/api/v1/audit/user-activity?${a.toString()}`,{requiresAuth:!0})).map(t=>{let n;try{"string"!=typeof t.event_timestamp&&t.event_timestamp;const e="string"==typeof t.event_timestamp?t.event_timestamp:t.event_timestamp?.toString()||"";n=new Date(e),isNaN(n.getTime())&&(n=new Date)}catch(a){n=new Date}return{id:t.event_id,userId:t.user_id||e,action:this.formatEventType(t.event_type),resource:t.entity_type,resourceId:t.entity_id,details:t.description,ipAddress:t.ip_address||void 0,userAgent:t.user_agent||void 0,timestamp:n,eventType:t.event_type,severity:t.severity}})}catch(a){throw a}}formatEventType(e){return{login:"Logged in",logout:"Logged out",password_change:"Changed password",account_lock:"Account locked",account_unlock:"Account unlocked",account_activate:"Account activated",account_deactivate:"Account deactivated",create:"Created",update:"Updated",delete:"Deleted",read:"Viewed"}[e]||e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}}const IF=p.createContext(void 0);function OF({children:e,config:t}){const n=p.useMemo(()=>new FF(t),[t.apiClient,t.endpoints?.users]);return c.jsx(IF.Provider,{value:{userService:n},children:e})}function zF(){const e=p.useContext(IF);if(!e)throw new Error("useUserService must be used within a UserProvider");return e.userService}function BF({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToCreate:n,onNavigateToUser:a}){const s=zF(),{toast:r}=Vk(),[i,o]=p.useState(!1),[l,d]=p.useState({}),[u,h]=p.useState({page:1,pageSize:50}),[m,f]=p.useState(""),{data:g,isLoading:x,error:v}=function(e,t){const{filter:n,pagination:a}=t||{};return Ya({queryKey:["users",n?.search,n?.role,n?.status,n?.createdAfter?.toISOString(),n?.createdBefore?.toISOString(),a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchUsers({skip:t,limit:s,search:n?.search,role:n?.role,status:n?.status,createdAfter:n?.createdAfter,createdBefore:n?.createdBefore})},staleTime:3e5})}(s,{filter:{...l,search:m||l.search},pagination:u}),y=g?.data||[],b=g?.pagination;p.useEffect(()=>{void 0===b?.total&&void 0===b?.totalPages||h(e=>({...e,total:b?.total,totalPages:b?.totalPages}))},[b?.total,b?.totalPages]);const w=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteUser(t),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}})}(s),S=function(e){const t=Va();return Xa({mutationFn:t=>e.createUser(t),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}})}(s),j=function(e){const t=Va();return Xa({mutationFn:t=>e.lockUser(t,60),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(s),C=function(e){const t=Va();return Xa({mutationFn:t=>e.unlockUser(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(s),k=function(e){const t=Va();return Xa({mutationFn:t=>e.activateUser(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(s),N=function(e){const t=Va();return Xa({mutationFn:t=>e.deactivateUser(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(s),_=p.useCallback(async e=>{if(window.confirm(`Are you sure you want to delete ${e.email}?`))try{await w.mutateAsync(e.id),r({title:"Success",description:"User deleted successfully"})}catch(t){r({title:"Error",description:"Failed to delete user",variant:"destructive"})}},[w,r]),E=p.useCallback(e=>{},[]),P=p.useCallback(async e=>{try{await j.mutateAsync(e.id),r({title:"User Locked",description:`User ${e.email} has been locked for 60 minutes`})}catch(t){r({title:"Error",description:"Failed to lock user",variant:"destructive"})}},[j,r]),A=p.useCallback(async e=>{try{await C.mutateAsync(e.id),r({title:"User Unlocked",description:`User ${e.email} has been unlocked`})}catch(t){r({title:"Error",description:"Failed to unlock user",variant:"destructive"})}},[C,r]),R=p.useCallback(async e=>{try{await k.mutateAsync(e.id),r({title:"User Activated",description:`User ${e.email} has been activated`})}catch(t){r({title:"Error",description:"Failed to activate user",variant:"destructive"})}},[k,r]),T=p.useCallback(async e=>{try{await N.mutateAsync(e.id),r({title:"User Deactivated",description:`User ${e.email} has been deactivated`})}catch(t){r({title:"Error",description:"Failed to deactivate user",variant:"destructive"})}},[N,r]),M=p.useCallback(()=>{if(n)n();else try{const e=new URL(window.location.href);e.searchParams.set("action","create");const t=`${e.pathname}?${e.searchParams.toString()}`;window.history.pushState({},"",t)}catch{}o(!0)},[n]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const D=p.useCallback(async e=>{try{await S.mutateAsync(e),r({title:"Success",description:"User created successfully"})}catch(t){throw r({title:"Error",description:"Failed to create user",variant:"destructive"}),t}},[S,r]),L=p.useCallback(e=>{try{if(a)return void a(e.id);const t=`${new URL(window.location.href).origin}`,n=`/users/${e.id}`;window.history.pushState({},"",`${t}${n}`)}catch{window.location.href=`/users/${e.id}`}},[a]),F=p.useCallback(e=>{f(e),h(e=>({...e,page:1}))},[]),I=p.useCallback(e=>{d(e),h(e=>({...e,page:1}))},[]),O=p.useCallback(e=>{h(t=>({...t,page:e}))},[]),z=p.useCallback(e=>{d(t=>({...t,status:e})),h(e=>({...e,page:1}))},[]),B=p.useCallback(e=>{h(t=>({...t,pageSize:e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(yF,{users:y,loading:x,error:v,onEdit:E,onDelete:_,onCreate:M,onUserClick:L,onSearch:F,onFilter:I,onStatusFilterChange:z,filter:l,pagination:u,onPageChange:O,onPageSizeChange:B,onLock:P,onUnlock:A,onActivate:R,onDeactivate:T,searchable:!0,showAvatar:!0,showRole:!0,showStatus:!0,showActions:!0}),c.jsx(TF,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:D,loading:S.isPending,error:S.error})]})}function $F(e,t){let n=`Failed to ${t}`,a="Error";try{const s=JSON.parse(e.message).detail||e.message;s.includes("Permission")&&s.includes("required")?(a="Permission Denied",n=`You don't have permission to ${t.toLowerCase()}. Please contact your administrator.`):s&&(n=s)}catch{e.message.includes("Permission")&&e.message.includes("required")?(a="Permission Denied",n=`You don't have permission to ${t.toLowerCase()}. Please contact your administrator.`):e.message&&(n=e.message)}return{title:a,message:n}}function UF({userId:e,onBack:t,onUpdateTabTitle:n}){const a=zF(),s=Va(),{toast:r}=Vk(),[i,o]=p.useState(!1),{data:l,isLoading:d,error:u}=Ya({queryKey:["user",e],queryFn:()=>a.fetchUser(e),enabled:"string"==typeof e&&e.length>0,retry:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:3e4});p.useEffect(()=>{if(!e||!l||!n)return;const t=[l.firstName,l.lastName].filter(Boolean),a=t.length>0?t.join(" "):l.username||l.email||"User";n(a,"User")},[e,l,n]);const h=p.useCallback(()=>{t&&t()},[t]),m=p.useCallback(e=>{o(!0)},[]),f=Xa({mutationFn:({userId:e,data:t})=>a.updateUser(e,t),onSuccess:()=>{s.invalidateQueries({queryKey:["user",e]}),s.invalidateQueries({queryKey:["users"]}),s.invalidateQueries({queryKey:["user-activity",e]}),r({title:"User Updated",description:"User information has been successfully updated"})},onError:e=>{const{title:t,message:n}=$F(e,"update user");r({title:t,description:n,variant:"destructive"})}}),g=p.useCallback(async(e,t)=>{await f.mutateAsync({userId:e,data:t})},[f]),x=Xa({mutationFn:({userId:e,newPassword:t})=>a.resetPassword(e,t),onSuccess:()=>{s.invalidateQueries({queryKey:["user",e]}),s.invalidateQueries({queryKey:["user-activity",e]}),r({title:"Password Reset",description:"User password has been successfully reset"})},onError:e=>{const{title:t,message:n}=$F(e,"reset password");r({title:t,description:n,variant:"destructive"})}}),v=p.useCallback(async(e,t)=>{await x.mutateAsync({userId:e.id,newPassword:t})},[x]),y=Xa({mutationFn:e=>a.activateUser(e),onSuccess:()=>{s.invalidateQueries({queryKey:["user",e]}),s.invalidateQueries({queryKey:["user-activity",e]}),r({title:"User Activated",description:"User has been successfully activated"})},onError:e=>{const{title:t,message:n}=$F(e,"activate user");r({title:t,description:n,variant:"destructive"})}}),b=Xa({mutationFn:e=>a.deactivateUser(e),onSuccess:()=>{s.invalidateQueries({queryKey:["user",e]}),s.invalidateQueries({queryKey:["user-activity",e]}),r({title:"User Deactivated",description:"User has been successfully deactivated"})},onError:e=>{const{title:t,message:n}=$F(e,"deactivate user");r({title:t,description:n,variant:"destructive"})}}),w=Xa({mutationFn:e=>a.lockUser(e,60),onSuccess:()=>{s.invalidateQueries({queryKey:["user",e]}),s.invalidateQueries({queryKey:["user-activity",e]}),r({title:"Account Locked",description:"User account has been locked for 60 minutes"})},onError:e=>{const{title:t,message:n}=$F(e,"lock user account");r({title:t,description:n,variant:"destructive"})}}),S=Xa({mutationFn:e=>a.unlockUser(e),onSuccess:()=>{s.invalidateQueries({queryKey:["user",e]}),s.invalidateQueries({queryKey:["user-activity",e]}),r({title:"Account Unlocked",description:"User account has been unlocked"})},onError:e=>{const{title:t,message:n}=$F(e,"unlock user account");r({title:t,description:n,variant:"destructive"})}}),j=p.useCallback(async e=>{await y.mutateAsync(e.id)},[y]),C=p.useCallback(async e=>{await b.mutateAsync(e.id)},[b]),k=p.useCallback(async e=>{await w.mutateAsync(e.id)},[w]),N=p.useCallback(async e=>{await S.mutateAsync(e.id)},[S]),{data:_=[]}=Ya({queryKey:["user-activity",e],queryFn:()=>a.fetchUserActivity(e,100,24),enabled:"string"==typeof e&&e.length>0,retry:!1,refetchOnWindowFocus:!0,staleTime:3e4,refetchOnReconnect:!0});return"string"!=typeof e||0===e.length?null:c.jsxs("div",{className:"space-y-4",children:[c.jsx(PF,{user:l,loading:d,error:u,activities:_,showActivity:!0,showMetadata:!1,editable:!0,onEdit:m,onPasswordReset:v,onActivate:j,onDeactivate:C,onLock:k,onUnlock:N,onBack:h}),l&&c.jsx(MF,{open:i,onOpenChange:o,user:l,onSubmit:g,loading:f.isPending})]})}function VF({className:e,roles:t=[],loading:n=!1,error:a=null,searchable:s=!0,searchPlaceholder:r="Search roles...",showUserCount:i=!0,showPermissions:o=!0,showActions:l=!0,showCreateButton:d=!1,onCreate:u,onRoleClick:h,onEdit:m,onDelete:p,onSearch:f,customActions:g}){const x=[];i&&x.push({key:"users",label:"users",value:e=>e.userCount||0}),o&&x.push({key:"permissions",label:"permissions",value:e=>e.permissions?.length||0});return c.jsx($P,{className:e,items:t,loading:n,error:a,searchable:s,searchPlaceholder:r,title:"Roles",description:"Manage roles and permissions",stats:x,badges:[{key:"system",label:"System",condition:e=>!!e.isSystem,variant:"secondary"}],showActions:l,showCreateButton:d,createButtonLabel:c.jsxs(c.Fragment,{children:[c.jsx(jg,{className:"h-4 w-4 mr-2"}),"New"]}),onCreate:u,onItemClick:h,onEdit:l?m:void 0,onDelete:l?p:void 0,onSearch:f,customActions:l?e=>g?g(e):c.jsxs(c.Fragment,{children:[m&&!e.isSystem&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>m(e),className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Kg,{className:"h-3.5 w-3.5"})}),p&&!e.isSystem&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>p(e),className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(ax,{className:"h-3.5 w-3.5"})})]}):void 0,loadingMessage:"Loading roles...",emptyMessage:"No roles found",gridCols:{default:1,md:2,lg:3}})}function qF({className:e,role:t,users:n=[],loading:a=!1,error:s=null,showUsers:r=!0,editable:i=!0,onEdit:o,onDelete:l,onUserClick:d,customActions:u}){const[h,m]=p.useState("permissions");return Us(),a?c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}):s||!t?c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:s?.message||"Role not found"})}):c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-2xl font-bold",children:t.name}),t.isSystem&&c.jsx(NC,{variant:"secondary",children:"System Role"})]}),t.description&&c.jsx("p",{className:"mt-2 text-muted-foreground",children:t.description}),c.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-muted-foreground",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:t.userCount||n.length})," ","users"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:t.permissions?.length||0})," ","permissions"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[u?.(t),i&&o&&!t.isSystem&&c.jsxs(bl,{onClick:()=>o(t),size:"sm",variant:"outline",className:sl("h-8 px-2 text-xs"),children:[c.jsx(Kg,{className:"h-3 w-3 mr-1"}),"Edit Role"]})]})]}),c.jsxs(gy,{value:h,onValueChange:e=>m(e),children:[c.jsx("div",{className:"border-b",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","permissions"===h?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>m("permissions"),children:"Permissions"}),r&&c.jsxs("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","users"===h?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>m("users"),children:["Users (",t.userCount||n.length,")"]})]})}),c.jsxs("div",{className:"mt-6",children:["permissions"===h&&c.jsx("div",{className:"space-y-4",children:t.permissions&&0!==t.permissions.length?c.jsx("div",{className:"grid gap-3",children:t.permissions.map(e=>c.jsx(Sl,{className:"p-4",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"font-medium",children:e.name}),c.jsx(NC,{variant:"outline",className:"text-xs",children:e.action}),e.scope&&c.jsx(NC,{variant:"secondary",className:"text-xs",children:e.scope})]}),e.description&&c.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description}),c.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Resource: ",e.resource]})]})})},e.id))}):c.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"No permissions assigned"})}),"users"===h&&c.jsx("div",{className:"space-y-3",children:0===n.length?c.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"No users with this role"}):c.jsx("div",{className:"space-y-2",children:n.map(e=>c.jsx(Sl,{className:sl("p-3 transition-colors",d&&"cursor-pointer hover:bg-muted/50"),onClick:()=>d?.(e),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:e.firstName||e.lastName?`${e.firstName||""} ${e.lastName||""}`.trim():e.username||e.email}),c.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]}),c.jsx(NC,{variant:"active"===e.status?"default":"secondary",children:e.status})]})},e.id))})})]})]}),i&&!t.isSystem&&c.jsx("div",{className:"flex items-center gap-2 border-t pt-4",children:l&&c.jsx(bl,{variant:"destructive",onClick:()=>l(t),children:"Delete Role"})})]})})}const HF={name:"",description:"",selectedPermissions:[]},GF=[{value:"users:read",label:"Read Users",description:"View user information"},{value:"users:create",label:"Create Users",description:"Create new users"},{value:"users:update",label:"Update Users",description:"Modify user information"},{value:"users:delete",label:"Delete Users",description:"Remove users"},{value:"roles:read",label:"Read Roles",description:"View role information"},{value:"roles:create",label:"Create Roles",description:"Create new roles"},{value:"roles:update",label:"Update Roles",description:"Modify roles"},{value:"roles:delete",label:"Delete Roles",description:"Remove roles"},{value:"roles:assign",label:"Assign Roles",description:"Assign roles to users"},{value:"groups:read",label:"Read Groups",description:"View group information"},{value:"groups:create",label:"Create Groups",description:"Create new groups"},{value:"groups:update",label:"Update Groups",description:"Modify groups"},{value:"groups:delete",label:"Delete Groups",description:"Remove groups"},{value:"products:read",label:"Read Products",description:"View products"},{value:"products:create",label:"Create Products",description:"Create products"},{value:"products:update",label:"Update Products",description:"Modify products"},{value:"products:delete",label:"Delete Products",description:"Remove products"},{value:"orders:read",label:"Read Orders",description:"View orders"},{value:"orders:create",label:"Create Orders",description:"Create orders"},{value:"orders:update",label:"Update Orders",description:"Modify orders"},{value:"orders:delete",label:"Delete Orders",description:"Remove orders"}];function KF({open:e,onOpenChange:t,onSubmit:n,loading:a=!1,error:s=null,availablePermissions:r=GF}){const i=Us(),[o,l]=p.useState(HF),[d,u]=p.useState({}),[h,m]=p.useState(0),[f,g]=p.useState(null),[x,v]=p.useState(""),[y,b]=p.useState("resource"),[w,S]=p.useState(!1),j=p.useRef(null),C=p.useRef(null);p.useEffect(()=>{g(s)},[s]);const k=()=>{const e={};return o.name.trim()?o.name.length>100&&(e.name="Role name cannot exceed 100 characters"):e.name="Role name is required",o.description&&o.description.length>500&&(e.description="Description cannot exceed 500 characters"),u(e),0===Object.keys(e).length},N=e=>{e.preventDefault(),k()&&S(!0)},_=()=>{l({...HF}),u({}),g(null),m(e=>e+1)},E=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),f&&g(null)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{j.current?.focus()})},[e,h]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),!a&&k()&&N(e)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||_())}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,a,o]);const P=e=>{l(t=>({...t,selectedPermissions:t.selectedPermissions.includes(e)?t.selectedPermissions.filter(t=>t!==e):[...t.selectedPermissions,e]})),f&&g(null)},A=p.useMemo(()=>{let e=r;if(x.trim()){const t=x.toLowerCase();e=r.filter(e=>e.label.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===y)return e.label.localeCompare(t.label);if("resource"===y){const n=e.value.split(":")[0]||"other",a=t.value.split(":")[0]||"other";return n!==a?n.localeCompare(a):e.label.localeCompare(t.label)}if("selected"===y){const n=o.selectedPermissions.includes(e.value);return n!==o.selectedPermissions.includes(t.value)?n?-1:1:e.label.localeCompare(t.label)}return 0})},[r,x,y,o.selectedPermissions]),R=p.useMemo(()=>A.reduce((e,t)=>{const n=t.value.split(":")[0]||"other";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[A]),T=r.length>0&&r.every(e=>o.selectedPermissions.includes(e.value));return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:()=>{l(HF),u({}),g(null),t(!1)},title:"Create Custom Role",maxWidth:"800px",loading:a,showClearButton:!0,onClear:_,formSelector:C,onSubmit:()=>{C.current&&C.current.requestSubmit()},autoSubmitShortcut:!0,autoClearShortcut:!0,children:c.jsx("form",{ref:C,onSubmit:async e=>{N(e)},className:sl(i.spacingFormSection,"w-full"),children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:i.spacingFormSection,children:[f&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsx("span",{className:"font-semibold",children:"ERROR:"}),c.jsx("span",{children:f.message||"Failed to create role"})]})}),c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsx(zl,{className:sl(i.textSizeLabel,"font-medium"),children:"Role Name *"}),c.jsx(Bl,{children:c.jsx(_l,{ref:j,placeholder:"e.g., Sales Representative",value:o.name,onChange:e=>E("name",e.target.value),className:sl(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:a})}),d.name&&c.jsx(Ul,{className:i.textSizeSmall,children:d.name}),c.jsx($l,{className:i.textSizeSmall,children:"A unique name for this role (max 100 characters)"})]}),c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsx(zl,{className:sl(i.textSizeLabel,"font-medium"),children:"Description"}),c.jsx(Bl,{children:c.jsx(Dl,{placeholder:"Describe the role's purpose and responsibilities...",value:o.description,onChange:e=>E("description",e.target.value),disabled:a,rows:3,className:sl(i.textSize,d.description&&"border-destructive")})}),d.description&&c.jsx(Ul,{className:i.textSizeSmall,children:d.description}),c.jsx($l,{className:i.textSizeSmall,children:"Optional description (max 500 characters)"})]}),c.jsxs(Ol,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(zl,{className:sl(i.textSizeLabel,"font-medium"),children:"Permissions"}),c.jsx(bl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=r.map(e=>e.value),t=e.length>0&&e.every(e=>o.selectedPermissions.includes(e));l(n=>({...n,selectedPermissions:t?[]:e})),f&&g(null)},disabled:a,className:sl(i.buttonHeightSmall,"px-2",i.textSizeSmall,"font-medium"),children:T?"Deselect All":"Select All"})]}),c.jsxs(Bl,{children:[c.jsxs("div",{className:sl("flex mb-3",i.gapButtonGroup),children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ig,{className:sl("absolute left-2.5 top-1/2 transform -translate-y-1/2",i.iconSize,"text-muted-foreground")}),c.jsx(_l,{type:"text",placeholder:"Search permissions...",value:x,onChange:e=>v(e.target.value),disabled:a,className:sl("pl-8",i.inputHeight,i.textSize)})]}),c.jsxs(bx,{value:y,onValueChange:e=>b(e),disabled:a,children:[c.jsx(Sx,{className:"w-[140px] h-8 text-sm",children:c.jsx(wx,{placeholder:"Sort by..."})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"resource",children:"Sort by Resource"}),c.jsx(Nx,{value:"name",children:"Sort by Name"}),c.jsx(Nx,{value:"selected",children:"Selected First"})]})]})]}),c.jsx("div",{className:"space-y-4 rounded-md border p-4 max-h-[500px] overflow-y-auto",children:0===Object.keys(R).length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:x?"No permissions match your search":"No permissions available"}):Object.entries(R).map(([e,t])=>{const n=(e=>{const t=R[e]||[];return t.length>0&&t.every(e=>o.selectedPermissions.includes(e.value))})(e);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-semibold capitalize",children:e}),c.jsx(bl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(R[e]||[]).map(e=>e.value),n=t.length>0&&t.every(e=>o.selectedPermissions.includes(e));l(e=>({...e,selectedPermissions:n?e.selectedPermissions.filter(e=>!t.includes(e)):[...e.selectedPermissions.filter(e=>!t.includes(e)),...t]})),f&&g(null)})(e),disabled:a,className:"h-6 px-2 text-xs font-medium",children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:t.map(e=>c.jsxs("label",{className:"flex items-start gap-4 rounded-md border p-3 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:o.selectedPermissions.includes(e.value),onChange:()=>P(e.value),disabled:a,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium",children:e.label}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.description})]})]},e.value))})]},e)})})]}),c.jsx($l,{children:"Select the permissions this role should have. Users with this role will be able to perform all selected actions."})]}),o.selectedPermissions.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[o.selectedPermissions.length," ",1===o.selectedPermissions.length?"permission":"permissions"," ","selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:o.selectedPermissions.map(e=>{const t=r.find(t=>t.value===e);return c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t?.label||e,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t?.label||e}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),P(e)},disabled:a,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t?.label||e}`,title:`Remove ${t?.label||e}`,children:c.jsx(xx,{className:"h-3 w-3 text-destructive"})})]},e)})})]})]})})},h)}),c.jsx(Gb,{open:w,onOpenChange:S,children:c.jsxs(Qb,{children:[c.jsxs(Yb,{children:[c.jsx(Zb,{children:"Create Role"}),c.jsxs(Jb,{children:['Are you sure you want to create the role "',o.name.trim(),'"? This will create a new role with'," ",o.selectedPermissions.length," permission",1!==o.selectedPermissions.length?"s":""," that can be assigned to users."]})]}),c.jsxs(Xb,{children:[c.jsx(tw,{asChild:!0,children:c.jsx(bl,{variant:"outline",disabled:a,children:"Cancel"})}),c.jsx(ew,{asChild:!0,children:c.jsx(bl,{onClick:async()=>{S(!1);try{await n({name:o.name.trim(),description:o.description.trim()||void 0,permissions:o.selectedPermissions}),l(HF),u({}),m(e=>e+1),t(!1)}catch(GQ){}},disabled:a,children:a?"Creating...":"Create Role"})})]})]})})]})}const WF=[{value:"users:read",label:"Read Users",description:"View user information"},{value:"users:create",label:"Create Users",description:"Create new users"},{value:"users:update",label:"Update Users",description:"Modify user information"},{value:"users:delete",label:"Delete Users",description:"Remove users"},{value:"roles:read",label:"Read Roles",description:"View role information"},{value:"roles:create",label:"Create Roles",description:"Create new roles"},{value:"roles:update",label:"Update Roles",description:"Modify roles"},{value:"roles:delete",label:"Delete Roles",description:"Remove roles"},{value:"roles:assign",label:"Assign Roles",description:"Assign roles to users"},{value:"groups:read",label:"Read Groups",description:"View group information"},{value:"groups:create",label:"Create Groups",description:"Create new groups"},{value:"groups:update",label:"Update Groups",description:"Modify groups"},{value:"groups:delete",label:"Delete Groups",description:"Remove groups"},{value:"products:read",label:"Read Products",description:"View products"},{value:"products:create",label:"Create Products",description:"Create products"},{value:"products:update",label:"Update Products",description:"Modify products"},{value:"products:delete",label:"Delete Products",description:"Remove products"},{value:"orders:read",label:"Read Orders",description:"View orders"},{value:"orders:create",label:"Create Orders",description:"Create orders"},{value:"orders:update",label:"Update Orders",description:"Modify orders"},{value:"orders:delete",label:"Delete Orders",description:"Remove orders"}];function QF({open:e,onOpenChange:t,role:n,onSubmit:a,loading:s=!1,error:r=null,availablePermissions:i=WF}){const[o,l]=p.useState({name:"",description:"",selectedPermissions:[]}),[d,u]=p.useState({}),[h,m]=p.useState(0),[f,g]=p.useState(null),[x,v]=p.useState(""),[y,b]=p.useState("resource"),[w,S]=p.useState(!1),j=p.useRef(null),C=p.useRef(null),k=Us();p.useEffect(()=>{g(r)},[r]),p.useEffect(()=>{n&&(l({name:n.name||"",description:n.description||"",selectedPermissions:n.permissions?.map(e=>e.name)||[]}),u({}),m(e=>e+1))},[n,e]),p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{j.current?.focus()})},[e,n,h]);const N=()=>{const e={};return o.name.trim()?o.name.length>100&&(e.name="Role name cannot exceed 100 characters"):e.name="Role name is required",o.description&&o.description.length>500&&(e.description="Description cannot exceed 500 characters"),u(e),0===Object.keys(e).length},_=e=>{e.preventDefault(),N()&&n&&S(!0)},E=()=>{n&&l({name:n.name||"",description:n.description||"",selectedPermissions:n.permissions?.map(e=>e.name)||[]}),u({}),g(null),t(!1)},P=()=>{n&&l({name:n.name||"",description:n.description||"",selectedPermissions:n.permissions?.map(e=>e.name)||[]}),u({}),g(null),m(e=>e+1)},A=e=>{l(t=>({...t,selectedPermissions:t.selectedPermissions.includes(e)?t.selectedPermissions.filter(t=>t!==e):[...t.selectedPermissions,e]})),f&&g(null)},R=p.useMemo(()=>{let e=i;if(x.trim()){const t=x.toLowerCase();e=i.filter(e=>e.label.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===y)return e.label.localeCompare(t.label);if("resource"===y){const n=e.value.split(":")[0]||"other",a=t.value.split(":")[0]||"other";return n!==a?n.localeCompare(a):e.label.localeCompare(t.label)}if("selected"===y){const n=o.selectedPermissions.includes(e.value);return n!==o.selectedPermissions.includes(t.value)?n?-1:1:e.label.localeCompare(t.label)}return 0})},[i,x,y,o.selectedPermissions]),T=p.useMemo(()=>R.reduce((e,t)=>{const n=t.value.split(":")[0]||"other";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[R]),M=i.length>0&&i.every(e=>o.selectedPermissions.includes(e.value));return p.useEffect(()=>{if(!e||!n)return;const t=e=>{if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),!s&&N()&&n&&_(e)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||P())}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s,o,n]),n?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:E,title:"Edit Custom Role",maxWidth:"800px",loading:s,showClearButton:!0,onClear:P,formSelector:C,onSubmit:()=>{C.current&&C.current.requestSubmit()},autoSubmitShortcut:!0,autoClearShortcut:!0,showCancelButton:!0,onCancel:E,showSubmitButton:!0,children:c.jsx("form",{ref:C,onSubmit:async e=>{_(e)},className:sl(k.spacingFormSection,"w-full"),children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",k.paddingForm),children:c.jsxs("div",{className:k.spacingFormSection,children:[n.isSystem&&c.jsx("div",{className:sl("rounded-md bg-yellow-500/15 p-4 text-sm text-yellow-700 dark:text-yellow-400",k.paddingForm),children:"This is a system role. Only name and description can be modified."}),c.jsxs(Ol,{children:[c.jsx(zl,{className:"text-sm font-medium",children:"Description"}),c.jsx(Bl,{children:c.jsx(Dl,{placeholder:"Describe the role's purpose and responsibilities...",value:o.description,onChange:e=>{return t="description",n=e.target.value,l(e=>({...e,[t]:n})),d[t]&&u(e=>({...e,[t]:void 0})),void(f&&g(null));var t,n},disabled:s,rows:3,className:sl(d.description&&"border-destructive")})}),d.description&&c.jsx(Ul,{children:d.description}),c.jsx($l,{children:"Optional description (max 500 characters)"})]}),!n.isSystem&&c.jsxs(Ol,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(zl,{className:"text-sm font-medium",children:"Permissions"}),c.jsx(bl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=i.map(e=>e.value),t=e.length>0&&e.every(e=>o.selectedPermissions.includes(e));l(n=>({...n,selectedPermissions:t?[]:e})),f&&g(null)},disabled:s,className:"h-7 px-2 text-xs font-medium",children:M?"Deselect All":"Select All"})]}),c.jsxs(Bl,{children:[c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ig,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(_l,{type:"text",placeholder:"Search permissions...",value:x,onChange:e=>v(e.target.value),disabled:s,className:"pl-8 h-8 text-sm"})]}),c.jsxs(bx,{value:y,onValueChange:e=>b(e),disabled:s,children:[c.jsx(Sx,{className:"w-[140px] h-8 text-sm",children:c.jsx(wx,{placeholder:"Sort by..."})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"resource",children:"Sort by Resource"}),c.jsx(Nx,{value:"name",children:"Sort by Name"}),c.jsx(Nx,{value:"selected",children:"Selected First"})]})]})]}),c.jsx("div",{className:"space-y-4 rounded-md border p-4 max-h-[500px] overflow-y-auto",children:0===Object.keys(T).length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:x?"No permissions match your search":"No permissions available"}):Object.entries(T).map(([e,t])=>{const n=(e=>{const t=T[e]||[];return t.length>0&&t.every(e=>o.selectedPermissions.includes(e.value))})(e);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-semibold capitalize",children:e}),c.jsx(bl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(T[e]||[]).map(e=>e.value),n=t.length>0&&t.every(e=>o.selectedPermissions.includes(e));l(e=>({...e,selectedPermissions:n?e.selectedPermissions.filter(e=>!t.includes(e)):[...e.selectedPermissions.filter(e=>!t.includes(e)),...t]})),f&&g(null)})(e),disabled:s,className:"h-6 px-2 text-xs font-medium",children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:t.map(e=>c.jsxs("label",{className:"flex items-start gap-4 rounded-md border p-3 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:o.selectedPermissions.includes(e.value),onChange:()=>A(e.value),disabled:s,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium",children:e.label}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.description})]})]},e.value))})]},e)})})]}),c.jsx($l,{children:"Select the permissions this role should have. Users with this role will be able to perform all selected actions."})]}),o.selectedPermissions.length>0&&!n.isSystem&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[o.selectedPermissions.length," ",1===o.selectedPermissions.length?"permission":"permissions"," ","selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:o.selectedPermissions.map(e=>{const t=i.find(t=>t.value===e);return c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t?.label||e,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t?.label||e}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),A(e)},disabled:s,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t?.label||e}`,title:`Remove ${t?.label||e}`,children:c.jsx(xx,{className:"h-3 w-3 text-destructive"})})]},e)})})]})]})})},h)}),c.jsx(Gb,{open:w,onOpenChange:S,children:c.jsxs(Qb,{children:[c.jsxs(Yb,{children:[c.jsx(Zb,{children:"Save Changes"}),c.jsxs(Jb,{children:['Are you sure you want to save changes to the role "',n.name,'"? This will update the role with'," ",o.selectedPermissions.length," permission",1!==o.selectedPermissions.length?"s":""," and affect all users with this role."]})]}),c.jsxs(Xb,{children:[c.jsx(tw,{asChild:!0,children:c.jsx(bl,{variant:"outline",disabled:s,children:"Cancel"})}),c.jsx(ew,{asChild:!0,children:c.jsx(bl,{onClick:async()=>{if(n){S(!1);try{await a(n.id,{name:o.name.trim(),description:o.description.trim()||void 0,permissions:o.selectedPermissions}),u({}),g(null),m(e=>e+1),t(!1)}catch(GQ){}}},disabled:s,children:s?"Saving...":"Save Changes"})})]})]})})]}):null}function YF({service:e,className:t,onRoleClick:n,showCreateButton:a=!0}){const[s,r]=p.useState([]),[i,o]=p.useState(!0),[l,d]=p.useState(null),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),[v,y]=p.useState(null),[b,w]=p.useState(!1),[S,j]=p.useState(null),[C]=p.useState(!0),[k,N]=p.useState(!1),[_,E]=p.useState(null),P=async()=>{o(!0),d(null);try{const t=await e.fetchRoles(C);r(t)}catch(GQ){d(GQ)}finally{o(!1)}};p.useEffect(()=>{P()},[C]);const A=e=>{x(e),f(!0)},R=e=>{E(e),N(!0)};return v?c.jsxs("div",{className:t,children:[c.jsx(bl,{variant:"ghost",onClick:()=>y(null),className:"mb-4",children:" Back to Roles"}),c.jsx(qF,{role:v,onEdit:A,onDelete:R,onUserClick:e=>{}})]}):c.jsxs("div",{className:t,children:[c.jsx(VF,{roles:s,loading:i,error:l,onRoleClick:e=>{n?n(e):y(e)},onEdit:A,onDelete:R,showActions:!0,showCreateButton:a,onCreate:()=>h(!0)}),c.jsx(KF,{open:u,onOpenChange:h,onSubmit:async t=>{w(!0),j(null);try{await e.createRole(t),await P(),h(!1)}catch(GQ){throw j(GQ),GQ}finally{w(!1)}},loading:b,error:S}),g&&c.jsx(QF,{open:m,onOpenChange:f,role:g,onSubmit:async(t,n)=>{w(!0),j(null);try{await e.updateRole(t,n),await P(),f(!1),x(null)}catch(GQ){throw j(GQ),GQ}finally{w(!1)}},loading:b,error:S}),c.jsx(bA,{open:k,onOpenChange:N,title:"Delete Role",description:_?`Are you sure you want to delete the role "${_.name}"? This action cannot be undone and will remove the role from all users who have it assigned.`:void 0,confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(_)try{await e.deleteRole(_.id),await P(),v?.id===_.id&&y(null),N(!1),E(null)}catch(GQ){alert(GQ instanceof Error?GQ.message:"Failed to delete role")}}}})]})}function XF({className:e,groups:t=[],loading:n=!1,error:a=null,searchable:s=!0,searchPlaceholder:r="Search groups...",showMemberCount:i=!0,showRoleCount:o=!0,showActions:l=!0,showCreateButton:d=!1,onCreate:u,onGroupClick:h,onEdit:m,onDelete:p,onSearch:f,customActions:g}){const x=[];i&&x.push({key:"members",label:"members",value:e=>e.memberCount||0}),o&&x.push({key:"roles",label:"roles",value:e=>e.roleCount||0});return c.jsx($P,{className:e,items:t,loading:n,error:a,searchable:s,searchPlaceholder:r,title:"Groups",description:"Manage groups and assign roles",stats:x,badges:[{key:"inactive",label:"Inactive",condition:e=>!e.isActive,variant:"secondary"}],showActions:l,showCreateButton:d,createButtonLabel:c.jsxs(c.Fragment,{children:[c.jsx(jg,{className:"h-4 w-4 mr-2"}),"New"]}),onCreate:u,onItemClick:h,onEdit:l?m:void 0,onDelete:l?p:void 0,onSearch:f,customActions:l?g:void 0,loadingMessage:"Loading groups...",emptyMessage:"No groups found",gridCols:{default:1,md:2,lg:3}})}const ZF={name:"",description:""};function JF({open:e,onOpenChange:t,onSubmit:n,roleService:a,loading:s=!1,error:r=null}){const i=Us(),[o,l]=p.useState(ZF),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState([]),[x,v]=p.useState([]),[y,b]=p.useState(!1),[w,S]=p.useState(0),[j,C]=p.useState(null),[k,N]=p.useState(""),[_,E]=p.useState("name"),P=p.useRef(null);p.useEffect(()=>{C(r)},[r]),p.useEffect(()=>{e&&a?A():e||(v([]),g([]),N(""))},[e,a]);const A=async()=>{if(a){b(!0);try{const e=await a.fetchRoles(!0);g(e)}catch(GQ){}finally{b(!1)}}},R=e=>{v(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),j&&C(null)},T=p.useMemo(()=>{let e=f;if(k.trim()){const t=k.toLowerCase();e=f.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===_)return e.name.localeCompare(t.name);if("system"===_)return e.isSystem!==t.isSystem?e.isSystem?1:-1:e.name.localeCompare(t.name);if("selected"===_){const n=x.includes(e.id);return n!==x.includes(t.id)?n?-1:1:e.name.localeCompare(t.name)}return 0})},[f,k,_,x]),M=p.useMemo(()=>T.reduce((e,t)=>{const n=t.isSystem?"system":"custom";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[T]),D=f.length>0&&f.every(e=>x.includes(e.id)),L=()=>{const e={};return o.name.trim()?o.name.length>100&&(e.name="Group name cannot exceed 100 characters"):e.name="Group name is required",o.description&&o.description.length>500&&(e.description="Description cannot exceed 500 characters"),u(e),0===Object.keys(e).length},F=e=>{e.preventDefault(),L()&&m(!0)},I=()=>{l(ZF),u({}),v([]),C(null),t(!1)},O=()=>{l({...ZF}),u({}),v([]),C(null),S(e=>e+1)},z=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),j&&C(null)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{P.current?.focus()})},[e,w]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),!s&&L()&&F(e)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||O())}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s,o]);return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:I,title:"Create Group",maxWidth:"800px",loading:s,showClearButton:!0,onClear:O,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:c.jsxs(c.Fragment,{children:[c.jsx(bl,{type:"button",variant:"outline",onClick:I,disabled:s,className:sl(i.buttonHeightSmall,"px-3",i.textSizeSmall,"font-medium border-border hover:bg-muted"),children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:s,className:sl(i.buttonHeightSmall,"px-3",i.textSizeSmall,"font-medium"),onClick:F,children:s?"Creating...":"Create Group"})]}),children:c.jsx(Il,{onSubmit:async e=>{F(e)},className:sl(i.spacingFormSection,"w-full"),children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:i.spacingFormSection,children:[j&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsx("span",{className:"font-semibold",children:"ERROR:"}),c.jsx("span",{children:j.message||"Failed to create group"})]})}),c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsx(zl,{className:sl(i.textSizeLabel,"font-medium"),children:"Group Name *"}),c.jsx(Bl,{children:c.jsx(_l,{ref:P,placeholder:"e.g., Sales Team",value:o.name,onChange:e=>z("name",e.target.value),className:sl(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:s})}),d.name&&c.jsx(Ul,{className:i.textSizeSmall,children:d.name}),c.jsx($l,{className:i.textSizeSmall,children:"A unique name for this group (max 100 characters)"})]}),c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsx(zl,{className:sl(i.textSizeLabel,"font-medium"),children:"Description"}),c.jsx(Bl,{children:c.jsx(Dl,{placeholder:"Describe the group's purpose...",value:o.description,onChange:e=>z("description",e.target.value),disabled:s,rows:3,className:sl(i.textSize,d.description&&"border-destructive")})}),d.description&&c.jsx(Ul,{className:i.textSizeSmall,children:d.description}),c.jsx($l,{className:i.textSizeSmall,children:"Optional description (max 500 characters)"})]}),a&&c.jsxs(Ol,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(zl,{className:"text-sm font-medium",children:"Assign Roles"}),c.jsx(bl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=f.map(e=>e.id),t=e.length>0&&e.every(e=>x.includes(e));v(t?[]:e),j&&C(null)},disabled:s||0===f.length,className:sl(i.buttonHeightSmall,"px-2",i.textSizeSmall,"font-medium"),children:D?"Deselect All":"Select All"})]}),c.jsx(Bl,{children:y?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:sl(i.iconSize,"animate-spin rounded-full border-2 border-primary border-t-transparent")})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:sl("flex mb-3",i.gapButtonGroup),children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ig,{className:sl("absolute left-2.5 top-1/2 transform -translate-y-1/2",i.iconSize,"text-muted-foreground")}),c.jsx(_l,{type:"text",placeholder:"Search roles...",value:k,onChange:e=>N(e.target.value),disabled:s,className:sl("pl-8",i.inputHeight,i.textSize)})]}),c.jsxs(bx,{value:_,onValueChange:e=>E(e),disabled:s,children:[c.jsx(Sx,{className:sl("w-[140px]",i.inputHeight,i.textSize),children:c.jsx(wx,{placeholder:"Sort by..."})}),c.jsxs(kx,{className:i.textSize,children:[c.jsx(Nx,{value:"name",className:i.textSize,children:"Sort by Name"}),c.jsx(Nx,{value:"system",className:i.textSize,children:"System First"}),c.jsx(Nx,{value:"selected",className:i.textSize,children:"Selected First"})]})]})]}),c.jsx("div",{className:sl(i.spacingFormSection,"rounded-md border",i.paddingContainer,"max-h-[500px] overflow-y-auto"),children:0===Object.keys(M).length?c.jsx("div",{className:sl("text-center py-8",i.textSize,"text-muted-foreground"),children:k?"No roles match your search":"No roles available"}):Object.entries(M).map(([e,t])=>{const n=(e=>{const t=M[e]||[];return t.length>0&&t.every(e=>x.includes(e.id))})(e);return c.jsxs("div",{className:i.spacingFormItem,children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:sl(i.textSize,"font-semibold capitalize"),children:"system"===e?"System Roles":"Custom Roles"}),c.jsx(bl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(M[e]||[]).map(e=>e.id),n=t.length>0&&t.every(e=>x.includes(e));v(e=>n?e.filter(e=>!t.includes(e)):[...e.filter(e=>!t.includes(e)),...t]),j&&C(null)})(e),disabled:s,className:sl(i.buttonHeightSmall,"px-2",i.textSizeSmall,"font-medium"),children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:sl("grid grid-cols-1 md:grid-cols-2",i.gapButtonGroup),children:t.map(e=>c.jsxs("label",{className:sl("flex items-start rounded-md border hover:bg-muted/50 cursor-pointer",i.gapForm,i.paddingContainer),children:[c.jsx("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>R(e.id),disabled:s,className:sl("mt-0.5 shrink-0",i.iconSize)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:sl("flex items-center",i.gapButtonGroup),children:[c.jsx("div",{className:sl(i.textSize,"font-medium"),children:e.name}),e.isSystem&&c.jsx(NC,{variant:"secondary",className:i.textSizeSmall,children:"System"})]}),e.description&&c.jsx("div",{className:sl(i.textSizeSmall,"text-muted-foreground mt-0.5"),children:e.description}),e.permissions&&e.permissions.length>0&&c.jsxs("div",{className:sl(i.textSizeSmall,"text-muted-foreground mt-0.5"),children:[e.permissions.length," ","permission",1!==e.permissions.length?"s":""]})]})]},e.id))})]},e)})})]})}),c.jsx($l,{className:i.textSizeSmall,children:"Select roles to assign to this group. Users in this group will inherit all selected roles."})]}),x.length>0&&c.jsxs("div",{className:sl("rounded-md bg-muted/50 border border-border",i.paddingContainer),children:[c.jsx("div",{className:sl("flex items-center justify-between mb-3"),children:c.jsxs("div",{className:sl(i.textSize,"font-semibold"),children:[x.length," ",1===x.length?"role":"roles"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:x.map(e=>{const t=f.find(t=>t.id===e);return t?c.jsxs("span",{className:sl("group flex items-center justify-between rounded-md bg-primary/10 font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",i.gapButtonGroup,"px-2.5 py-1.5",i.textSizeSmall),title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),R(e)},disabled:s,className:sl("opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 rounded hover:bg-destructive/20 flex items-center justify-center",i.iconSize),"aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(xx,{className:sl(i.iconSize,"text-destructive")})})]},e):null})})]})]})})},w)}),c.jsx(bA,{open:h,onOpenChange:m,title:"Create Group",description:x.length>0?`Are you sure you want to create the group "${o.name.trim()}" with ${x.length} role(s)? This will create a new group and assign the selected roles.`:`Are you sure you want to create the group "${o.name.trim()}"? This will create a new group that you can use to organize users and assign roles.`,confirmAction:{label:"Create Group",onClick:async()=>{m(!1);try{await n({name:o.name.trim(),description:o.description.trim()||void 0},x),l(ZF),u({}),v([]),C(null),S(e=>e+1),t(!1)}catch(GQ){}},loading:s}})]})}function eI({open:e,onOpenChange:t,group:n,onSubmit:a,roleService:s,groupService:r,loading:i=!1,error:o=null}){const l=Us(),[d,u]=p.useState({name:"",description:"",isActive:!0}),[h,m]=p.useState({}),[f,g]=p.useState(!1),[x,v]=p.useState([]),[y,b]=p.useState([]),[w,S]=p.useState([]),[j,C]=p.useState(!1),[k,N]=p.useState(0),[_,E]=p.useState(null),[P,A]=p.useState(""),[R,T]=p.useState("name"),M=p.useRef(null);p.useEffect(()=>{E(o)},[o]),p.useEffect(()=>{n&&e?(u({name:n.name||"",description:n.description||"",isActive:n.isActive}),m({}),N(e=>e+1),s&&r&&D()):e||(S([]),v([]),b([]),A(""))},[n,e,s,r]);const D=async()=>{if(s&&r&&n){C(!0);try{const e=await s.fetchRoles(!0);v(e);const t=await r.getGroupRoles(n.id);b(t),S(t.map(e=>e.id))}catch(GQ){}finally{C(!1)}}},L=e=>{S(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),_&&E(null)},F=p.useMemo(()=>{let e=x;if(P.trim()){const t=P.toLowerCase();e=x.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===R)return e.name.localeCompare(t.name);if("system"===R)return e.isSystem!==t.isSystem?e.isSystem?1:-1:e.name.localeCompare(t.name);if("selected"===R){const n=w.includes(e.id);return n!==w.includes(t.id)?n?-1:1:e.name.localeCompare(t.name)}return 0})},[x,P,R,w]),I=p.useMemo(()=>F.reduce((e,t)=>{const n=t.isSystem?"system":"custom";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[F]),O=x.length>0&&x.every(e=>w.includes(e.id)),z=()=>{const e={};return d.name.trim()?d.name.length>100&&(e.name="Group name cannot exceed 100 characters"):e.name="Group name is required",d.description&&d.description.length>500&&(e.description="Description cannot exceed 500 characters"),m(e),0===Object.keys(e).length},B=e=>{e.preventDefault(),z()&&n&&g(!0)},$=()=>{n&&(u({name:n.name||"",description:n.description||"",isActive:n.isActive}),S(y.map(e=>e.id))),m({}),E(null),t(!1)},U=()=>{n&&(u({name:n.name||"",description:n.description||"",isActive:n.isActive}),S(y.map(e=>e.id))),m({}),E(null),A(""),N(e=>e+1)},V=(e,t)=>{u(n=>({...n,[e]:t})),h[e]&&m(t=>({...t,[e]:void 0})),_&&E(null)};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{M.current?.focus()})},[e,n,k]),p.useEffect(()=>{if(!e)return;const t=e=>{"Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||e.shiftKey||(e.preventDefault(),!i&&z()&&n&&B(e)),"Delete"!==e.key&&"Backspace"!==e.key||!e.metaKey&&!e.ctrlKey||!e.shiftKey||(e.preventDefault(),!i&&n&&U())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,i,d,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:$,title:"Edit Group",maxWidth:"800px",loading:i,showClearButton:!0,onClear:U,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:c.jsxs(c.Fragment,{children:[c.jsx(bl,{type:"button",variant:"outline",onClick:$,disabled:i,className:sl(l.buttonHeightSmall,"px-3",l.textSizeSmall,"font-medium border-border hover:bg-muted"),children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:i,className:sl(l.buttonHeightSmall,"px-3",l.textSizeSmall,"font-medium"),onClick:B,children:i?"Saving...":"Save Changes"})]}),children:c.jsx(Il,{onSubmit:async e=>{B(e)},className:sl(l.spacingFormSection,"w-full"),children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",l.paddingForm),children:c.jsxs("div",{className:l.spacingFormSection,children:[_&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",l.paddingContainer,l.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsx("span",{className:"font-semibold",children:"ERROR:"}),c.jsx("span",{children:_.message||"Failed to update group"})]})}),c.jsxs(Ol,{className:l.spacingFormItem,children:[c.jsx(zl,{className:sl(l.textSizeLabel,"font-medium"),children:"Group Name *"}),c.jsx(Bl,{children:c.jsx(_l,{ref:M,placeholder:"e.g., Sales Team",value:d.name,onChange:e=>V("name",e.target.value),className:sl(l.inputHeight,l.textSize,h.name&&"border-destructive"),disabled:i})}),h.name&&c.jsx(Ul,{className:l.textSizeSmall,children:h.name}),c.jsx($l,{className:l.textSizeSmall,children:"A unique name for this group (max 100 characters)"})]}),c.jsxs(Ol,{className:l.spacingFormItem,children:[c.jsx(zl,{className:sl(l.textSizeLabel,"font-medium"),children:"Description"}),c.jsx(Bl,{children:c.jsx(Dl,{placeholder:"Describe the group's purpose...",value:d.description,onChange:e=>V("description",e.target.value),disabled:i,rows:3,className:sl(l.textSize,h.description&&"border-destructive")})}),h.description&&c.jsx(Ul,{className:l.textSizeSmall,children:h.description}),c.jsx($l,{className:l.textSizeSmall,children:"Optional description (max 500 characters)"})]}),c.jsxs(Ol,{className:sl("flex items-center justify-between rounded-lg border",l.paddingContainer),children:[c.jsxs("div",{className:l.spacingFormItem,children:[c.jsx(zl,{className:sl(l.textSizeLabel,"font-medium"),children:"Active"}),c.jsx($l,{className:l.textSizeSmall,children:"Inactive groups won't grant roles to their members"})]}),c.jsx(Bl,{children:c.jsx(Ox,{checked:d.isActive,onCheckedChange:e=>V("isActive",e),disabled:i})})]}),s&&r&&c.jsxs(Ol,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(zl,{className:sl(l.textSizeLabel,"font-medium"),children:"Assign Roles"}),c.jsx(bl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=x.map(e=>e.id),t=e.length>0&&e.every(e=>w.includes(e));S(t?[]:e),_&&E(null)},disabled:i||0===x.length,className:sl(l.buttonHeightSmall,"px-2",l.textSizeSmall,"font-medium"),children:O?"Deselect All":"Select All"})]}),c.jsx(Bl,{children:j?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ig,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(_l,{type:"text",placeholder:"Search roles...",value:P,onChange:e=>A(e.target.value),disabled:i,className:"pl-8 h-8 text-sm"})]}),c.jsxs(bx,{value:R,onValueChange:e=>T(e),disabled:i,children:[c.jsx(Sx,{className:"w-[140px] h-8 text-sm",children:c.jsx(wx,{placeholder:"Sort by..."})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"name",children:"Sort by Name"}),c.jsx(Nx,{value:"system",children:"System First"}),c.jsx(Nx,{value:"selected",children:"Selected First"})]})]})]}),c.jsx("div",{className:"space-y-4 rounded-md border p-4 max-h-[500px] overflow-y-auto",children:0===Object.keys(I).length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:P?"No roles match your search":"No roles available"}):Object.entries(I).map(([e,t])=>{const n=(e=>{const t=I[e]||[];return t.length>0&&t.every(e=>w.includes(e.id))})(e);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-semibold capitalize",children:"system"===e?"System Roles":"Custom Roles"}),c.jsx(bl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(I[e]||[]).map(e=>e.id),n=t.length>0&&t.every(e=>w.includes(e));S(e=>n?e.filter(e=>!t.includes(e)):[...e.filter(e=>!t.includes(e)),...t]),_&&E(null)})(e),disabled:i,className:"h-6 px-2 text-xs font-medium",children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:t.map(e=>c.jsxs("label",{className:"flex items-start gap-4 rounded-md border p-3 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>L(e.id),disabled:i,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm font-medium",children:e.name}),e.isSystem&&c.jsx(NC,{variant:"secondary",className:"text-xs",children:"System"})]}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.description}),e.permissions&&e.permissions.length>0&&c.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[e.permissions.length," ","permission",1!==e.permissions.length?"s":""]})]})]},e.id))})]},e)})})]})}),c.jsx($l,{children:"Select roles to assign to this group. Users in this group will inherit all selected roles."})]}),w.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[w.length," ",1===w.length?"role":"roles"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:w.map(e=>{const t=x.find(t=>t.id===e);return t?c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),L(e)},disabled:i,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(xx,{className:"h-3 w-3 text-destructive"})})]},e):null})})]})]})})},k)}),n&&c.jsx(bA,{open:f,onOpenChange:g,title:"Save Changes",description:(()=>{const e=y.map(e=>e.id),t=w.filter(t=>!e.includes(t)),a=e.filter(e=>!w.includes(e));if(0===t.length&&0===a.length)return`Are you sure you want to save changes to the group "${n.name}"? This will update the group information and affect all members of this group.`;const s=[];return t.length>0&&s.push(`add ${t.length} role(s)`),a.length>0&&s.push(`remove ${a.length} role(s)`),`Are you sure you want to save changes to the group "${n.name}"? This will update the group information and ${s.join(" and ")}. This will affect all members of this group.`})(),confirmAction:{label:"Save Changes",onClick:async()=>{if(n){g(!1);try{await a(n.id,{name:d.name.trim(),description:d.description.trim()||void 0,isActive:d.isActive},w),m({}),E(null),N(e=>e+1),t(!1)}catch(GQ){}}},loading:i}})]}):null}function tI({service:e,roleService:t,className:n,onGroupClick:a,showCreateButton:s=!0}){const[r,i]=p.useState([]),[o,l]=p.useState(!0),[d,u]=p.useState(null),[h,m]=p.useState(!1),[f,g]=p.useState(!1),[x,v]=p.useState(null),[y,b]=p.useState(!1),[w,S]=p.useState(null),[j,C]=p.useState(!1),[k,N]=p.useState(null),_=async()=>{l(!0),u(null);try{const t=await e.fetchGroups();i(t)}catch(GQ){u(GQ)}finally{l(!1)}};p.useEffect(()=>{_()},[]);return c.jsxs("div",{className:n,children:[c.jsx(XF,{groups:r,loading:o,error:d,onGroupClick:a,onEdit:e=>{v(e),g(!0)},onDelete:e=>{N(e),C(!0)},showActions:!0,showCreateButton:s,onCreate:()=>m(!0)}),c.jsx(JF,{open:h,onOpenChange:m,onSubmit:async(t,n)=>{b(!0),S(null);try{const a=await e.createGroup(t);if(n.length>0)for(const t of n)await e.addRoleToGroup(a.id,t);await _(),m(!1)}catch(GQ){throw S(GQ),GQ}finally{b(!1)}},roleService:t,loading:y,error:w}),x&&c.jsx(eI,{open:f,onOpenChange:g,group:x,onSubmit:async(n,a,s)=>{b(!0),S(null);try{if(await e.updateGroup(n,a),t){const t=(await e.getGroupRoles(n)).map(e=>e.id),a=s.filter(e=>!t.includes(e)),r=t.filter(e=>!s.includes(e));for(const s of r)await e.removeRoleFromGroup(n,s);for(const s of a)await e.addRoleToGroup(n,s)}await _(),g(!1),v(null)}catch(GQ){throw S(GQ),GQ}finally{b(!1)}},roleService:t,groupService:e,loading:y,error:w}),c.jsx(bA,{open:j,onOpenChange:C,title:"Delete Group",description:k?`Are you sure you want to delete the group "${k.name}"? This action cannot be undone and will remove all members from the group.`:void 0,confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(k)try{await e.deleteGroup(k.id),await _(),C(!1),N(null)}catch(GQ){alert(GQ instanceof Error?GQ.message:"Failed to delete group")}}}})]})}function nI({className:e,defaultTab:t="users",onCreateDialogClose:n,onUserClick:a,onRoleClick:s,autoOpenCreate:r,onGroupClick:i}){const[o,l]=p.useState(t),d=p.useMemo(()=>new kF({apiClient:Fs,endpoints:{roles:ms.ENDPOINTS.ROLES}}),[]),u=p.useMemo(()=>new EF({apiClient:Fs,endpoints:{groups:ms.ENDPOINTS.GROUPS}}),[]);return c.jsx("div",{className:e,children:c.jsx($D,{value:o,onValueChange:e=>l(e),variant:"default",items:[{value:"users",label:"Users",content:c.jsx(BF,{autoOpenCreate:r,onCreateDialogClose:n,onNavigateToUser:a})},{value:"roles",label:"Roles",content:c.jsx(YF,{service:d,onRoleClick:s,showCreateButton:!0})},{value:"groups",label:"Groups",content:c.jsx(tI,{service:u,roleService:d,onGroupClick:i,showCreateButton:!0})}]})})}function aI({children:e}){const t=p.useMemo(()=>({apiClient:Fs,endpoints:{users:ms.ENDPOINTS.USERS.FETCH}}),[]);return c.jsx(OF,{config:t,children:e})}function sI({className:e,customers:t=[],loading:n=!1,pagination:a,onCustomerClick:s,onCreate:r,onSearch:i,onPageChange:o,onPageSizeChange:l}){const d=Us(),u=[LP({getDisplayName:e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:s,additionalOptions:{id:"code"}}),TP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("font-medium",d.textSize),children:t??"-"})}}),TP({accessorKey:"email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",d.textSize),children:t??"-"})}}),TP({accessorKey:"phone",header:"Phone",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",d.textSize),children:t??"-"})}}),TP({accessorKey:"business_name",header:"Business Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",d.textSize),children:t??"-"})}}),TP({accessorKey:"city",header:"City",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",d.textSize),children:t??"-"})}})],h=t,m=a?{page:a.page,pageSize:a.pageSize,total:a.total,totalPages:a.totalPages}:void 0;return c.jsx("div",{className:sl("w-full",e),children:c.jsx(OP,{data:h,columns:u,useDefaultColumns:!1,title:"Customers",description:"Manage and view customers",onCreate:r,onSearch:i,manualPagination:Boolean(a&&o),serverPagination:m,onPageChange:o,onPageSizeChange:l,loading:n})})}function rI({customer:e,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s}){return c.jsx(KL,{entityId:e.id,entityType:"customer",defaultImageUrl:null,altText:e.name,FallbackIcon:hx,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s})}function iI({className:e,cus:t,loading:n=!1,error:a=null,showMetadata:s=!1,editable:r=!0,attachmentService:i,onEdit:o,onDelete:l,onActivate:d,onDeactivate:u,onCreateBooking:h,onViewBookings:m,onManageTags:f,onManageAttachments:g,profilePhoto:x,onProfilePhotoChange:v,customActions:y}){const[b,w]=p.useState("overview"),[S,j]=p.useState([]),[C,k]=p.useState(!1),N=p.useMemo(()=>i||new KP({apiClient:Fs,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[i]),_=p.useMemo(()=>t&&(t?.code||t?.id)||"",[t,t?.code]),E=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},P=p.useCallback(async()=>{if(t?.id&&N){k(!0);try{const e=await N.getAttachmentsForEntity("customer",t.id,"document");j(e.items||[])}catch(e){j([])}finally{k(!1)}}},[t?.id,N]);p.useEffect(()=>{"documents"===b&&t?.id&&N&&P()},[b,t?.id,N,P]);const A="active"===t?.status,R=s,T=[{value:"overview",label:"Overview",icon:Ff},{value:"profile",label:"Preferences & Settings",icon:Og},{value:"account",label:"Account",icon:$p},{value:"social",label:"Social & Tags",icon:Bg},{value:"documents",label:"Documents"+(S.length>0?` (${S.length})`:""),icon:jf}];return R&&T.splice(4,0,{value:"metadata",label:"Metadata",icon:gf}),n?c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})}):a?c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",a.message]})})}):t?c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[t?c.jsx("div",{className:"flex-shrink-0",children:c.jsx(rI,{customer:t,attachmentService:N,currentPhoto:x,onPhotoChange:v})}):c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(Ff,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h2",{className:"text-xl font-semibold",children:t.name||_}),c.jsx(NC,{variant:A?"default":"secondary",className:sl(A?"bg-green-500/10 text-green-700 dark:text-green-400":"bg-gray-500/10 text-gray-700 dark:text-gray-400"),children:A?c.jsxs(c.Fragment,{children:[c.jsx(of,{className:"h-3 w-3 mr-1"}),"Active"]}):c.jsxs(c.Fragment,{children:[c.jsx(cf,{className:"h-3 w-3 mr-1"}),"Inactive"]})})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[t.code&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Code:"}),c.jsx("span",{className:"text-sm font-medium",children:t.code}),c.jsx(UL,{value:t.code,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]}),t.email&&c.jsxs("a",{href:`mailto:${t.email}`,className:"text-sm text-primary hover:underline flex items-center gap-1",children:[c.jsx(Zf,{className:"h-3 w-3"}),"Email"]}),t.phone&&c.jsxs("a",{href:`tel:${t.phone}`,className:"text-sm text-primary hover:underline flex items-center gap-1",children:[c.jsx(vg,{className:"h-3 w-3"}),"Call"]})]})]})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsx(ST,{actions:[...t&&h?[{id:"book-now",label:"Book Now",icon:c.jsx(Ug,{className:"h-4 w-4"}),onClick:()=>h(t),variant:"default"}]:[],...r&&t&&o?[{id:"edit",label:"Edit",icon:c.jsx(Kg,{className:"h-4 w-4"}),onClick:()=>o(t),variant:"outline"}]:[],...t&&m?[{id:"view-bookings",label:"View Bookings",icon:c.jsx(ff,{className:"h-4 w-4"}),onClick:()=>m(t),variant:"outline"}]:[],...t&&A&&u?[{id:"deactivate",label:"Deactivate",icon:c.jsx(ux,{className:"h-4 w-4"}),onClick:()=>u(t),display:"dropdown-item"}]:[],...t&&!A&&d?[{id:"activate",label:"Activate",icon:c.jsx(cx,{className:"h-4 w-4"}),onClick:()=>d(t),display:"dropdown-item"}]:[],...t&&r&&f?[{id:"manage-tags",label:"Manage Tags",icon:c.jsx(ex,{className:"h-4 w-4"}),onClick:()=>f(t),display:"dropdown-item"}]:[],...t&&r&&g?[{id:"manage-documents",label:"Manage Documents",icon:c.jsx(jf,{className:"h-4 w-4"}),onClick:()=>g(t),display:"dropdown-item"}]:[],...t&&l?[{id:"delete",label:"Delete",icon:c.jsx(ax,{className:"h-4 w-4"}),onClick:()=>l(t),variant:"destructive",display:"dropdown-item"}]:[]],customActions:y?.(t)})})]}),c.jsx(UD,{tabs:T,value:b,onValueChange:e=>w(e),children:e=>c.jsxs("div",{className:"mt-0",children:["overview"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(GD,{title:"Personal Information",icon:hx,columns:3,children:[c.jsx(HD,{label:"Date of Birth",value:t.date_of_birth,render:e=>E(e)}),c.jsx(HD,{label:"Gender",value:t.gender,valueClassName:"capitalize"}),c.jsx(HD,{label:"Nationality",value:t.nationality}),c.jsx(HD,{label:"ID Type",value:t.id_type}),c.jsx(HD,{label:"ID Number",value:t.id_number})]}),c.jsxs(GD,{title:"Contact Information",icon:Zf,columns:3,children:[c.jsx(HD,{label:"Business Name",value:t.business_name}),c.jsx(HD,{label:"Email",value:t.email,linkType:"email"}),c.jsx(HD,{label:"Phone",value:t.phone,linkType:"tel"}),c.jsx(HD,{label:"Website",value:t.website,linkType:"external"})]}),c.jsxs(GD,{columns:3,title:"Emergency Contact",icon:sf,className:"mt-0 mb-0",children:[c.jsx(HD,{label:"Contact Name",value:t.emergency_contact_name}),c.jsx(HD,{label:"Contact Phone",value:t.emergency_contact_phone,linkType:"tel"}),c.jsx(HD,{label:"Relationship",value:t.emergency_contact_relationship})]}),c.jsxs(GD,{title:"Address Information",icon:Jf,columns:3,children:[c.jsx(HD,{label:"Street Address",value:t.street_address,span:"md:col-span-2 lg:col-span-3"}),c.jsx(HD,{label:"City",value:t.city}),c.jsx(HD,{label:"State/Province",value:t.state_province}),c.jsx(HD,{label:"Postal Code",value:t.postal_code}),c.jsx(HD,{label:"Country",value:t.country})]})]}),"profile"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(GD,{columns:2,children:[c.jsx(HD,{label:"Event Preferences",value:t.event_preferences}),c.jsx(HD,{label:"Seating Preferences",value:t.seating_preferences}),c.jsx(HD,{label:"Accessibility Needs",value:t.accessibility_needs}),c.jsx(HD,{label:"Dietary Restrictions",value:t.dietary_restrictions}),c.jsx(HD,{label:"Preferred Language",value:t.preferred_language})]}),c.jsx(qD,{showBorder:!0,children:c.jsxs("div",{className:"flex flex-wrap gap-4",children:[void 0!==t.marketing_opt_in&&c.jsx(HD,{label:"",value:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:sl("h-2 w-2 rounded-full",t.marketing_opt_in?"bg-green-500":"bg-gray-300")}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Marketing Opt-in:"," ",t.marketing_opt_in?"Yes":"No"]})]}),hideIfEmpty:!1}),void 0!==t.email_marketing&&c.jsx(HD,{label:"",value:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:sl("h-2 w-2 rounded-full",t.email_marketing?"bg-green-500":"bg-gray-300")}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Email Marketing:"," ",t.email_marketing?"Yes":"No"]})]}),hideIfEmpty:!1}),void 0!==t.sms_marketing&&c.jsx(HD,{label:"",value:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:sl("h-2 w-2 rounded-full",t.sms_marketing?"bg-green-500":"bg-gray-300")}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["SMS Marketing:"," ",t.sms_marketing?"Yes":"No"]})]}),hideIfEmpty:!1})]})})]}),"account"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(GD,{title:"Account Management",icon:px,columns:3,children:[c.jsx(HD,{label:"Account Manager",value:t.account_manager_id}),c.jsx(HD,{label:"Sales Representative",value:t.sales_representative_id}),c.jsx(HD,{label:"Customer Since",value:t.customer_since,render:e=>E(e),icon:Hp}),c.jsx(HD,{label:"Last Purchase",value:t.last_purchase_date,render:e=>E(e),icon:Ug}),c.jsx(HD,{label:"Total Purchase Amount",value:t.total_purchase_amount,render:e=>`$${e?.toFixed(2)||"0.00"}`,valueClassName:"font-semibold text-foreground",icon:ff}),c.jsx(HD,{label:"Last Contact",value:t.last_contact_date,render:e=>E(e),icon:vg})]}),c.jsxs(GD,{title:"System Information",icon:gf,columns:3,children:[c.jsx(HD,{label:"Status Reason",value:t.status_reason}),c.jsx(HD,{label:"Created",value:t.createdAt,render:e=>E(e)}),c.jsx(HD,{label:"Last Updated",value:t.updatedAt,render:e=>E(e)}),c.jsx(HD,{label:"Deactivated At",value:t.deactivatedAt,render:e=>E(e)})]})]}),"social"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(GD,{title:"Social & Online",icon:Pf,columns:2,children:[c.jsx(HD,{label:"Facebook",value:t.facebook_url,linkType:"external"}),c.jsx(HD,{label:"Twitter/X",value:t.twitter_handle,render:e=>e.startsWith("@")?e:`@${e}`}),c.jsx(HD,{label:"LinkedIn",value:t.linkedin_url,linkType:"external"}),c.jsx(HD,{label:"Instagram",value:t.instagram_handle,render:e=>e.startsWith("@")?e:`@${e}`})]}),c.jsxs(GD,{title:"Tags & Classification",icon:ex,columns:1,children:[c.jsx(HD,{label:"",value:t.tags&&t.tags.length>0?c.jsx(VL,{tags:t.tags}):c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx(ex,{className:"h-4 w-4 opacity-50"}),c.jsx("span",{children:"No tags assigned"})]}),hideIfEmpty:!1}),c.jsx(HD,{label:"Internal Notes",value:t.notes,valueClassName:"whitespace-pre-wrap"}),c.jsx(HD,{label:"Public Notes",value:t.public_notes,valueClassName:"whitespace-pre-wrap"})]})]}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(Sl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})}),"documents"===e&&c.jsx($L,{documents:S,isLoading:C,onManageAttachments:g?()=>g(t):void 0,loading:n})]})})]})}):c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No customer selected"})})})}xF("user-list",{Component:yF,metadata:{name:"User List",description:"Enterprise-grade user management table with advanced filtering, sorting, pagination, and export capabilities",category:"users",tags:["users","table","list","management","enterprise","data-table"],version:"2.0.0",dependencies:["@truths/ui","@tanstack/react-table"]}}),xF("user-detail",{Component:PF,metadata:{name:"User Detail",description:"Display detailed information about a user",category:"users",tags:["users","detail","profile","view"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("create-user",{Component:function({className:e,onSubmit:t,onCancel:n,onSuccess:a,availableRoles:s=[{value:"user",label:"User"},{value:"admin",label:"Admin"}],requirePassword:r=!0,loading:i=!1}){const[o,l]=p.useState({email:"",password:"",username:"",firstName:"",lastName:"",baseRole:"user"}),[d,u]=p.useState({}),[h,m]=p.useState(!1),f=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0}))};return c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(e.email="Invalid email address"):e.email="Email is required",r&&!o.password?e.password="Password is required":r&&o.password&&o.password.length<8&&(e.password="Password must be at least 8 characters"),u(e),0===Object.keys(e).length})()){m(!0);try{await t(o),a?.("new-user-id")}catch(n){u({email:"Failed to create user. Please try again."})}finally{m(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Create New User"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new user to your organization"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"firstName",children:"First Name"}),c.jsx(_l,{id:"firstName",value:o.firstName,onChange:e=>f("firstName",e.target.value),placeholder:"John",disabled:h||i,autoComplete:"given-name"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"lastName",children:"Last Name"}),c.jsx(_l,{id:"lastName",value:o.lastName,onChange:e=>f("lastName",e.target.value),placeholder:"Doe",disabled:h||i,autoComplete:"family-name"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"username",children:"Username (Optional)"}),c.jsx(_l,{id:"username",value:o.username,onChange:e=>f("username",e.target.value),placeholder:"johndoe",disabled:h||i,autoComplete:"username"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"email",children:["Email ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"email",type:"email",value:o.email,onChange:e=>f("email",e.target.value),placeholder:"john@example.com",disabled:h||i,required:!0,autoComplete:"email"}),d.email&&c.jsx("p",{className:"text-sm text-destructive",children:d.email})]}),r&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"password",children:["Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"password",type:"password",value:o.password,onChange:e=>f("password",e.target.value),placeholder:"",disabled:h||i,required:!0,autoComplete:"new-password"}),d.password&&c.jsx("p",{className:"text-sm text-destructive",children:d.password}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"role",children:"Role"}),c.jsx(bx,{value:o.baseRole,onValueChange:e=>f("baseRole",e),disabled:h||i,children:s.map(e=>c.jsx("option",{value:e.value,children:e.label},e.value))})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[n&&c.jsx(bl,{type:"button",variant:"outline",onClick:n,disabled:h||i,children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:h||i,children:h||i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Creating..."]}):"Create User"})]})]})})},metadata:{name:"Create User",description:"Form to create new users with validation",category:"users",tags:["users","form","create","management"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("edit-user",{Component:function({className:e,user:t,onSubmit:n,onCancel:a,onSuccess:s,availableRoles:r=[{value:"user",label:"User"},{value:"admin",label:"Admin"}],availableStatuses:i=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}],loading:o=!1}){const[l,d]=p.useState({email:t.email,username:t.username||"",firstName:t.firstName||"",lastName:t.lastName||"",baseRole:t.baseRole||t.role,status:t.status}),[u,h]=p.useState({}),[m,f]=p.useState(!1);p.useEffect(()=>{d({email:t.email,username:t.username||"",firstName:t.firstName||"",lastName:t.lastName||"",baseRole:t.baseRole||t.role,status:t.status})},[t]);const g=(e,t)=>{d(n=>({...n,[e]:t})),u[e]&&h(t=>({...t,[e]:void 0}))};return c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(e.email="Invalid email address"):e.email="Email is required",h(e),0===Object.keys(e).length})()){f(!0);try{await n(t.id,l),s?.()}catch(a){h({email:"Failed to update user. Please try again."})}finally{f(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Edit User"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Update user information"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"firstName",children:"First Name"}),c.jsx(_l,{id:"firstName",value:l.firstName,onChange:e=>g("firstName",e.target.value),placeholder:"John",disabled:m||o})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"lastName",children:"Last Name"}),c.jsx(_l,{id:"lastName",value:l.lastName,onChange:e=>g("lastName",e.target.value),placeholder:"Doe",disabled:m||o})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"username",children:"Username"}),c.jsx(_l,{id:"username",value:l.username,onChange:e=>g("username",e.target.value),placeholder:"johndoe",disabled:m||o})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"email",children:["Email ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"email",type:"email",value:l.email,onChange:e=>g("email",e.target.value),placeholder:"john@example.com",disabled:m||o,required:!0}),u.email&&c.jsx("p",{className:"text-sm text-destructive",children:u.email})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"role",children:"Role"}),c.jsxs(bx,{value:l.baseRole,onValueChange:e=>g("baseRole",e),disabled:m||o,children:[c.jsx(Sx,{children:c.jsx(wx,{placeholder:"Select a role"})}),c.jsx(kx,{children:r.map(e=>c.jsx(Nx,{value:e.value,children:e.label},e.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"status",children:"Status"}),c.jsxs(bx,{value:l.status,onValueChange:e=>g("status",e),disabled:m||o,children:[c.jsx(Sx,{children:c.jsx(wx,{placeholder:"Select a status"})}),c.jsx(kx,{children:i.map(e=>c.jsx(Nx,{value:e.value,children:e.label},e.value))})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[a&&c.jsx(bl,{type:"button",variant:"outline",onClick:a,disabled:m||o,children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:m||o,children:m||o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Saving..."]}):"Save Changes"})]})]})})},metadata:{name:"Edit User",description:"Form to edit existing user information",category:"users",tags:["users","form","edit","management"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("edit-user-dialog",{Component:MF,metadata:{name:"Edit User Dialog",description:"Dialog for editing existing user information",category:"users",tags:["users","edit","dialog","form"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("role-list",{Component:VF,metadata:{name:"Role List",description:"Display and manage roles with user counts and permissions",category:"roles",tags:["roles","permissions","list","management"],version:"1.0.0",dependencies:["@truths/ui","@truths/custom-ui"]}}),xF("role-detail",{Component:qF,metadata:{name:"Role Detail",description:"Display detailed information about a role",category:"roles",tags:["roles","permissions","detail","view"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("assign-role",{Component:function({className:e,user:t,roles:n=[],onSubmit:a,onCancel:s,onSuccess:r,loading:i=!1,showExpiration:o=!1}){const[l,d]=p.useState(""),[u,h]=p.useState(""),[m,f]=p.useState(""),[g,x]=p.useState(!1),v=t?n.filter(e=>e.id!==t.role&&e.id!==t.baseRole):n;return c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l)if(t){x(!0),f("");try{const e={userId:t.id,roleId:l};o&&u&&(e.expiresAt=new Date(u)),await a(e),r?.()}catch(GQ){f("Failed to assign role. Please try again.")}finally{x(!1)}}else f("User information is required");else f("Please select a role")},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Assign Role"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:t?`Assign a role to ${t.firstName||t.username||t.email}`:"Select a user to assign a role"})]}),m&&c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:m}),t&&c.jsx("div",{className:"rounded-lg border p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:t.firstName||t.lastName?`${t.firstName||""} ${t.lastName||""}`.trim():t.username||t.email}),c.jsx("p",{className:"text-sm text-muted-foreground",children:t.email})]}),(t.role||t.baseRole)&&c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Current role:"," ",c.jsx("span",{className:"font-medium",children:t.role||t.baseRole})]})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"role",children:["Select Role ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsxs(bx,{value:l,onValueChange:d,disabled:g||i||!t,required:!0,children:[c.jsx("option",{value:"",children:"Choose a role..."}),v.map(e=>c.jsxs("option",{value:e.id,children:[e.name,e.description&&` - ${e.description}`]},e.id))]}),l&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.find(e=>e.id===l)?.permissions?.length||0," ","permissions"]})]}),o&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"expiresAt",children:"Expiration Date (Optional)"}),c.jsx("input",{id:"expiresAt",type:"datetime-local",value:u,onChange:e=>h(e.target.value),disabled:g||i,title:"Role expiration date",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty for permanent role assignment"})]}),l&&c.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[c.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Role Details"}),n.filter(e=>e.id===l).map(e=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-sm",children:e.description}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.jsxs("p",{children:["Permissions: ",e.permissions?.length||0]}),c.jsxs("p",{children:["Users with this role: ",e.userCount||0]})]})]},e.id))]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[s&&c.jsx(bl,{type:"button",variant:"outline",onClick:s,disabled:g||i,children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:g||i||!t||!l,children:g||i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Assigning..."]}):"Assign Role"})]})]})})},metadata:{name:"Assign Role",description:"Form to assign roles to users",category:"roles",tags:["roles","form","assign","management"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("profile-view",{Component:function({className:e,profile:t,loading:n=!1,error:a=null,editable:s=!0,showSocialLinks:r=!0,showPreferences:i=!1,onEdit:o,onPasswordChange:l,customActions:d}){const u=Us();if(n)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(a||!t)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:a?.message||"Profile not found"})});const h=()=>t.firstName||t.lastName?`${t.firstName||""} ${t.lastName||""}`.trim():t.username||t.email;return c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(SC,{className:"h-24 w-24",children:t.avatar?c.jsx("img",{src:t.avatar,alt:h()}):c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-primary/10 text-3xl font-medium",children:h().charAt(0).toUpperCase()})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:h()}),t.username&&c.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.username]}),t.bio&&c.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:t.bio}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(NC,{variant:{active:"default",inactive:"secondary",suspended:"destructive",pending:"outline"}[t.status],children:t.status}),c.jsx(NC,{variant:"outline",children:t.role||t.baseRole||"User"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[d,s&&o&&c.jsxs(bl,{onClick:o,className:sl("flex items-center gap-1.5",u.textSizeSmall),children:[c.jsx(Kg,{className:u.iconSizeSmall}),c.jsx("span",{children:"Edit Profile"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Contact Information"}),c.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Email"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.email})]}),t.phone&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Phone"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.phone})]}),t.location&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Location"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.location})]}),t.website&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Website"}),c.jsx("dd",{className:"mt-1 text-sm",children:c.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:t.website})})]})]})]}),r&&t.socialLinks&&c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Social Links"}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.socialLinks.twitter&&c.jsx("a",{href:`https://twitter.com/${t.socialLinks.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"Twitter"}),t.socialLinks.linkedin&&c.jsx("a",{href:t.socialLinks.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"LinkedIn"}),t.socialLinks.github&&c.jsx("a",{href:`https://github.com/${t.socialLinks.github}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"GitHub"})]})]}),i&&t.preferences&&c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Preferences"}),c.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[t.preferences.theme&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Theme"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground capitalize",children:t.preferences.theme})]}),t.preferences.language&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Language"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.preferences.language})]})]})]}),c.jsx("div",{className:"flex items-center gap-2 border-t pt-4",children:l&&c.jsxs(bl,{variant:"outline",onClick:l,className:sl("flex items-center gap-1.5",u.textSizeSmall),children:[c.jsx(Of,{className:u.iconSizeSmall}),c.jsx("span",{children:"Change Password"})]})})]})})},metadata:{name:"Profile View",description:"Display user profile information",category:"profile",tags:["profile","user","view","display"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("profile-edit",{Component:function({className:e,profile:t,onSubmit:n,onCancel:a,onSuccess:s,loading:r=!1,showSocialLinks:i=!0,showBio:o=!0}){const[l,d]=p.useState({firstName:t.firstName||"",lastName:t.lastName||"",username:t.username||"",phone:t.phone||"",location:t.location||"",website:t.website||"",bio:t.bio||"",socialLinks:{twitter:t.socialLinks?.twitter||"",linkedin:t.socialLinks?.linkedin||"",github:t.socialLinks?.github||""}}),[u,h]=p.useState({}),[m,f]=p.useState(!1);p.useEffect(()=>{d({firstName:t.firstName||"",lastName:t.lastName||"",username:t.username||"",phone:t.phone||"",location:t.location||"",website:t.website||"",bio:t.bio||"",socialLinks:{twitter:t.socialLinks?.twitter||"",linkedin:t.socialLinks?.linkedin||"",github:t.socialLinks?.github||""}})},[t]);const g=(e,t)=>{if(e.startsWith("socialLinks.")){const n=e.split(".")[1];d(e=>({...e,socialLinks:{...e.socialLinks,[n]:t}}))}else d(n=>({...n,[e]:t}));u[e]&&h(t=>({...t,[e]:void 0}))};return c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.website&&!l.website.match(/^https?:\/\/.+/)&&(e.website="Website must be a valid URL"),h(e),0===Object.keys(e).length})()){f(!0);try{await n(l),s?.()}catch(t){h({_general:"Failed to update profile. Please try again."})}finally{f(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Edit Profile"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your profile information"})]}),u._general&&c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:u._general}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Basic Information"}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"firstName",children:"First Name"}),c.jsx(_l,{id:"firstName",value:l.firstName,onChange:e=>g("firstName",e.target.value),placeholder:"John",disabled:m||r})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"lastName",children:"Last Name"}),c.jsx(_l,{id:"lastName",value:l.lastName,onChange:e=>g("lastName",e.target.value),placeholder:"Doe",disabled:m||r})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"username",children:"Username"}),c.jsx(_l,{id:"username",value:l.username,onChange:e=>g("username",e.target.value),placeholder:"johndoe",disabled:m||r})]}),o&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"bio",children:"Bio"}),c.jsx("textarea",{id:"bio",value:l.bio,onChange:e=>g("bio",e.target.value),placeholder:"Tell us about yourself...",rows:3,disabled:m||r,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Contact Information"}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"phone",children:"Phone"}),c.jsx(_l,{id:"phone",type:"tel",value:l.phone,onChange:e=>g("phone",e.target.value),placeholder:"+1 (555) 123-4567",disabled:m||r})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"location",children:"Location"}),c.jsx(_l,{id:"location",value:l.location,onChange:e=>g("location",e.target.value),placeholder:"San Francisco, CA",disabled:m||r})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"website",children:"Website"}),c.jsx(_l,{id:"website",type:"url",value:l.website,onChange:e=>g("website",e.target.value),placeholder:"https://example.com",disabled:m||r}),u.website&&c.jsx("p",{className:"text-sm text-destructive",children:u.website})]})]}),i&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Social Links"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"twitter",children:"Twitter"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"@"}),c.jsx(_l,{id:"twitter",value:l.socialLinks?.twitter,onChange:e=>g("socialLinks.twitter",e.target.value),placeholder:"username",disabled:m||r})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"linkedin",children:"LinkedIn"}),c.jsx(_l,{id:"linkedin",value:l.socialLinks?.linkedin,onChange:e=>g("socialLinks.linkedin",e.target.value),placeholder:"https://linkedin.com/in/username",disabled:m||r})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"github",children:"GitHub"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"@"}),c.jsx(_l,{id:"github",value:l.socialLinks?.github,onChange:e=>g("socialLinks.github",e.target.value),placeholder:"username",disabled:m||r})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[a&&c.jsx(bl,{type:"button",variant:"outline",onClick:a,disabled:m||r,children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:m||r,children:m||r?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Saving..."]}):"Save Changes"})]})]})})},metadata:{name:"Profile Edit",description:"Form to edit user profile information",category:"profile",tags:["profile","user","edit","form"],version:"1.0.0",dependencies:["@truths/ui"]}}),xF("password-change",{Component:function({className:e,onSubmit:t,onCancel:n,onSuccess:a,requireOldPassword:s=!0,loading:r=!1,minPasswordLength:i=8}){const[o,l]=p.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(!1),x=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0}))},v=o.newPassword?(e=>{let t=0;e.length>=i&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^a-zA-Z\d]/.test(e)&&t++;return{strength:t,label:["Very Weak","Weak","Fair","Good","Strong"][t]||"Very Weak",color:["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"][t]||"bg-red-500"}})(o.newPassword):null;return c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return s&&!o.oldPassword&&(e.oldPassword="Current password is required"),o.newPassword?o.newPassword.length<i&&(e.newPassword=`Password must be at least ${i} characters`):e.newPassword="New password is required",o.confirmPassword?o.newPassword!==o.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",s&&o.oldPassword===o.newPassword&&(e.newPassword="New password must be different from current password"),u(e),0===Object.keys(e).length})()){m(!0);try{await t(o),a?.(),l({oldPassword:"",newPassword:"",confirmPassword:""})}catch(n){u({oldPassword:"Failed to change password. Please try again."})}finally{m(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Change Password"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your password to keep your account secure"})]}),s&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"oldPassword",children:["Current Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"oldPassword",type:f?"text":"password",value:o.oldPassword,onChange:e=>x("oldPassword",e.target.value),placeholder:"",disabled:h||r,required:!0,autoComplete:"current-password"}),d.oldPassword&&c.jsx("p",{className:"text-sm text-destructive",children:d.oldPassword})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"newPassword",children:["New Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"newPassword",type:f?"text":"password",value:o.newPassword,onChange:e=>x("newPassword",e.target.value),placeholder:"",disabled:h||r,required:!0,autoComplete:"new-password"}),d.newPassword&&c.jsx("p",{className:"text-sm text-destructive",children:d.newPassword}),v&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((e,t)=>c.jsx("div",{className:sl("h-1 flex-1 rounded-full",t<v.strength?v.color:"bg-muted")},t))}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Password strength:"," ",c.jsx("span",{className:"font-medium",children:v.label})]})]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Password must be at least ",i," characters long"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"confirmPassword",children:["Confirm New Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"confirmPassword",type:f?"text":"password",value:o.confirmPassword,onChange:e=>x("confirmPassword",e.target.value),placeholder:"",disabled:h||r,required:!0,autoComplete:"new-password"}),d.confirmPassword&&c.jsx("p",{className:"text-sm text-destructive",children:d.confirmPassword})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"showPasswords",checked:f,onChange:e=>g(e.target.checked),title:"Show passwords",className:"h-4 w-4 rounded border-gray-300"}),c.jsx(Fl,{htmlFor:"showPasswords",className:"text-sm font-normal",children:"Show passwords"})]}),c.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[n&&c.jsx(bl,{type:"button",variant:"outline",onClick:n,disabled:h||r,children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:h||r,children:h||r?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Changing Password..."]}):"Change Password"})]})]})})},metadata:{name:"Password Change",description:"Form to change user password with validation",category:"profile",tags:["profile","password","security","form"],version:"1.0.0",dependencies:["@truths/ui"]}});const oI=ED({name:kD().min(1,"Name is required"),email:kD().email("Invalid email address").optional().or(PD("")),phone:kD().optional(),business_name:kD().optional(),street_address:kD().optional(),city:kD().optional(),state_province:kD().optional(),postal_code:kD().optional(),country:kD().optional(),date_of_birth:kD().optional(),gender:kD().optional(),nationality:kD().optional(),id_number:kD().optional(),id_type:kD().optional(),event_preferences:kD().optional(),seating_preferences:kD().optional(),accessibility_needs:kD().optional(),dietary_restrictions:kD().optional(),emergency_contact_name:kD().optional(),emergency_contact_phone:kD().optional(),emergency_contact_relationship:kD().optional(),preferred_language:kD().optional(),marketing_opt_in:_D().optional(),email_marketing:_D().optional(),sms_marketing:_D().optional(),facebook_url:kD().url("Invalid URL").optional().or(PD("")),twitter_handle:kD().optional(),linkedin_url:kD().url("Invalid URL").optional().or(PD("")),instagram_handle:kD().optional(),website:kD().url("Invalid URL").optional().or(PD("")),notes:kD().optional(),public_notes:kD().optional()}),lI=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1},a){const{handleSubmit:s,control:r,watch:i,setValue:o,formState:{errors:l,isSubmitted:d}}=lT({resolver:GT(oI),defaultValues:{name:"",email:"",phone:"",business_name:"",marketing_opt_in:!1,email_marketing:!1,sms_marketing:!1,...e}}),u=p.useRef(null);p.useEffect(()=>{if(d&&Object.keys(l).length>0){const e=Object.keys(l)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):u.current&&u.current.scrollIntoView({behavior:"smooth",block:"center"})}},[l,d]);const h={name:i("name")??"",email:i("email")??"",phone:i("phone")??"",business_name:i("business_name")??"",notes:i("notes")??""};return c.jsxs("form",{ref:a,id:"customer-form",onSubmit:s(async e=>{await t(e)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(vT,{formType:"customer",currentValues:h,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&o(e,t)})},disabled:n})}),c.jsxs("div",{ref:u,className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Personal Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(cT,{control:r,name:"name",label:"Name",placeholder:"Full name",required:!0,disabled:n}),c.jsx(cT,{control:r,name:"email",label:"Email",type:"email",placeholder:"email@example.com",disabled:n}),c.jsx(cT,{control:r,name:"phone",label:"Phone",type:"tel",placeholder:"+1 (555) 123-4567",disabled:n}),c.jsx(cT,{control:r,name:"business_name",label:"Business Name",placeholder:"Business name",disabled:n})]})]}),c.jsx(sC,{}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(uT,{control:r,name:"date_of_birth",label:"Date of Birth",disabled:n}),c.jsx(mT,{control:r,name:"gender",label:"Gender",placeholder:"Select gender",options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"},{value:"prefer_not_to_say",label:"Prefer not to say"}],disabled:n}),c.jsx(cT,{control:r,name:"nationality",label:"Nationality",placeholder:"Nationality",disabled:n}),c.jsx(mT,{control:r,name:"id_type",label:"ID Type",placeholder:"Select ID type",options:[{value:"passport",label:"Passport"},{value:"driver_license",label:"Driver's License"},{value:"national_id",label:"National ID"},{value:"other",label:"Other"}],disabled:n}),c.jsx("div",{className:"md:col-span-2",children:c.jsx(cT,{control:r,name:"id_number",label:"ID Number",placeholder:"Government ID number",disabled:n})})]})}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Address Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(cT,{control:r,name:"street_address",label:"Street Address",placeholder:"123 Main Street",disabled:n})}),c.jsx(cT,{control:r,name:"city",label:"City",placeholder:"City",disabled:n}),c.jsx(cT,{control:r,name:"state_province",label:"State/Province",placeholder:"State or Province",disabled:n}),c.jsx(cT,{control:r,name:"postal_code",label:"Postal Code",placeholder:"12345",disabled:n}),c.jsx(cT,{control:r,name:"country",label:"Country",placeholder:"Country",disabled:n})]})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Emergency Contact"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(cT,{control:r,name:"emergency_contact_name",label:"Contact Name",placeholder:"Emergency contact name",disabled:n}),c.jsx(cT,{control:r,name:"emergency_contact_phone",label:"Contact Phone",type:"tel",placeholder:"Emergency contact phone",disabled:n}),c.jsx(cT,{control:r,name:"emergency_contact_relationship",label:"Relationship",placeholder:"Relationship",disabled:n})]})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Preferences & Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(yT,{control:r,name:"event_preferences",label:"Event Preferences",placeholder:"Preferred event types or categories",rows:3,disabled:n}),c.jsx(yT,{control:r,name:"seating_preferences",label:"Seating Preferences",placeholder:"Preferred seating areas",rows:3,disabled:n}),c.jsx(yT,{control:r,name:"accessibility_needs",label:"Accessibility Needs",placeholder:"Special accessibility requirements",rows:3,disabled:n}),c.jsx(yT,{control:r,name:"dietary_restrictions",label:"Dietary Restrictions",placeholder:"Dietary restrictions for events with catering",rows:3,disabled:n}),c.jsx(mT,{control:r,name:"preferred_language",label:"Preferred Language",placeholder:"e.g., English, Spanish",options:[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"it",label:"Italian"},{value:"pt",label:"Portuguese"},{value:"zh",label:"Chinese"},{value:"ja",label:"Japanese"},{value:"other",label:"Other"}],disabled:n})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Marketing Preferences"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(bT,{control:r,name:"marketing_opt_in",label:"Marketing Opt-in",disabled:n}),c.jsx(bT,{control:r,name:"email_marketing",label:"Email Marketing",disabled:n}),c.jsx(bT,{control:r,name:"sms_marketing",label:"SMS Marketing",disabled:n})]})]})]})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Social & Online"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(cT,{control:r,name:"website",label:"Website",placeholder:"https://example.com",disabled:n}),c.jsx(cT,{control:r,name:"facebook_url",label:"Facebook URL",placeholder:"https://facebook.com/...",disabled:n}),c.jsx(cT,{control:r,name:"twitter_handle",label:"Twitter/X Handle",placeholder:"@username",disabled:n}),c.jsx(cT,{control:r,name:"linkedin_url",label:"LinkedIn URL",placeholder:"https://linkedin.com/in/...",disabled:n}),c.jsx(cT,{control:r,name:"instagram_handle",label:"Instagram Handle",placeholder:"@username",disabled:n})]})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Tags & Classification"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(yT,{control:r,name:"notes",label:"Internal Notes",placeholder:"Internal notes (staff only)",rows:4,disabled:n})}),c.jsx("div",{className:"md:col-span-2",children:c.jsx(yT,{control:r,name:"public_notes",label:"Public Notes",placeholder:"Public notes (visible to customer)",rows:4,disabled:n})})]})]})]})});function cI({open:e,onOpenChange:t,onSubmit:n,title:a="Create Customer",maxWidth:s="720px"}){const r=Us(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=p.useMemo(()=>e=>({name:e.name,email:e.email||void 0,phone:e.phone||void 0,business_name:e.business_name||void 0,street_address:e.street_address||void 0,city:e.city||void 0,state_province:e.state_province||void 0,postal_code:e.postal_code||void 0,country:e.country||void 0,date_of_birth:e.date_of_birth||void 0,gender:e.gender||void 0,nationality:e.nationality||void 0,id_number:e.id_number||void 0,id_type:e.id_type||void 0,event_preferences:e.event_preferences||void 0,seating_preferences:e.seating_preferences||void 0,accessibility_needs:e.accessibility_needs||void 0,dietary_restrictions:e.dietary_restrictions||void 0,emergency_contact_name:e.emergency_contact_name||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,emergency_contact_relationship:e.emergency_contact_relationship||void 0,preferred_language:e.preferred_language||void 0,marketing_opt_in:e.marketing_opt_in||!1,email_marketing:e.email_marketing||!1,sms_marketing:e.sms_marketing||!1,facebook_url:e.facebook_url||void 0,twitter_handle:e.twitter_handle||void 0,linkedin_url:e.linkedin_url||void 0,instagram_handle:e.instagram_handle||void 0,website:e.website||void 0,notes:e.notes||void 0,public_notes:e.public_notes||void 0,status:"active"}),[]),v=()=>{m(!1),g(null),t(!1)},y={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=x(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},b={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:v,title:a,maxWidth:s,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:v,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(lI,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create"},o)})}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Customer Creation",description:f?c.jsx("p",{className:sl("mb-3",r.textSizeSmall),children:"Are you sure you want to create this customer?"}):void 0,confirmAction:y,cancelAction:b})]})}function dI({open:e,onOpenChange:t,onSubmit:n,customer:a,title:s="Edit Customer",maxWidth:r="720px"}){const i=Us(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>{if(a)return{name:a.name??"",email:a.email??"",phone:a.phone??"",business_name:a.business_name??"",street_address:a.street_address??"",city:a.city??"",state_province:a.state_province??"",postal_code:a.postal_code??"",country:a.country??"",date_of_birth:a.date_of_birth?"string"==typeof a.date_of_birth?a.date_of_birth.split("T")[0]:new Date(a.date_of_birth).toISOString().split("T")[0]:"",gender:a.gender??"",nationality:a.nationality??"",id_number:a.id_number??"",id_type:a.id_type??"",event_preferences:a.event_preferences??"",seating_preferences:a.seating_preferences??"",accessibility_needs:a.accessibility_needs??"",dietary_restrictions:a.dietary_restrictions??"",emergency_contact_name:a.emergency_contact_name??"",emergency_contact_phone:a.emergency_contact_phone??"",emergency_contact_relationship:a.emergency_contact_relationship??"",preferred_language:a.preferred_language??"",marketing_opt_in:a.marketing_opt_in??!1,email_marketing:a.email_marketing??!1,sms_marketing:a.sms_marketing??!1,facebook_url:a.facebook_url??"",twitter_handle:a.twitter_handle??"",linkedin_url:a.linkedin_url??"",instagram_handle:a.instagram_handle??"",website:a.website??"",notes:a.notes??"",public_notes:a.public_notes??""}},[a]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const y=p.useMemo(()=>e=>{const t=e=>{if(!e)return null;const t=e.trim();return t||null};return{name:e.name||null,email:t(e.email),phone:t(e.phone),business_name:t(e.business_name),street_address:t(e.street_address),city:t(e.city),state_province:t(e.state_province),postal_code:t(e.postal_code),country:t(e.country),date_of_birth:t(e.date_of_birth),gender:t(e.gender),nationality:t(e.nationality),id_number:t(e.id_number),id_type:t(e.id_type),event_preferences:t(e.event_preferences),seating_preferences:t(e.seating_preferences),accessibility_needs:t(e.accessibility_needs),dietary_restrictions:t(e.dietary_restrictions),emergency_contact_name:t(e.emergency_contact_name),emergency_contact_phone:t(e.emergency_contact_phone),emergency_contact_relationship:t(e.emergency_contact_relationship),preferred_language:t(e.preferred_language),marketing_opt_in:e.marketing_opt_in??null,email_marketing:e.email_marketing??null,sms_marketing:e.sms_marketing??null,facebook_url:t(e.facebook_url),twitter_handle:t(e.twitter_handle),linkedin_url:t(e.linkedin_url),instagram_handle:t(e.instagram_handle),website:t(e.website),notes:t(e.notes),public_notes:t(e.public_notes)}},[]),b=()=>{f(!1),x(null),t(!1)},w={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&a){h(!0);try{const e=y(g);await n(a.id,e),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},S={label:"Cancel",variant:"outline",disabled:u};return a?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:b,title:s,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:b,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(lI,{ref:o,defaultValues:v,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit"},`${a.id}-${l}`)})}),c.jsx(bA,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Customer Update",description:g?c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:"Are you sure you want to update this customer?"}):void 0,confirmAction:w,cancelAction:S})]}):null}function uI({open:e,onOpenChange:t,customer:n,tagService:a,onSave:s,loading:r=!1}){return c.jsx(zL,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"customer",initialTags:n.tags,tagService:a,onSave:s,loading:r})}function hI({open:e,onOpenChange:t,customer:n,attachmentService:a,onSave:s,loading:r=!1}){return c.jsx(BL,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"customer",attachmentService:a,onSave:s,loading:r})}function mI(e){return{id:e.id,code:e.code,name:e.name,status:e.is_active?"active":"inactive",email:e.email??void 0,phone:e.phone??void 0,business_name:e.business_name??void 0,street_address:e.street_address??void 0,city:e.city??void 0,state_province:e.state_province??void 0,postal_code:e.postal_code??void 0,country:e.country??void 0,date_of_birth:e.date_of_birth??void 0,gender:e.gender??void 0,nationality:e.nationality??void 0,id_number:e.id_number??void 0,id_type:e.id_type??void 0,account_manager_id:e.account_manager_id??void 0,sales_representative_id:e.sales_representative_id??void 0,customer_since:e.customer_since??void 0,last_purchase_date:e.last_purchase_date??void 0,total_purchase_amount:e.total_purchase_amount??void 0,last_contact_date:e.last_contact_date??void 0,event_preferences:e.event_preferences??void 0,seating_preferences:e.seating_preferences??void 0,accessibility_needs:e.accessibility_needs??void 0,dietary_restrictions:e.dietary_restrictions??void 0,emergency_contact_name:e.emergency_contact_name??void 0,emergency_contact_phone:e.emergency_contact_phone??void 0,emergency_contact_relationship:e.emergency_contact_relationship??void 0,preferred_language:e.preferred_language??void 0,marketing_opt_in:e.marketing_opt_in??void 0,email_marketing:e.email_marketing??void 0,sms_marketing:e.sms_marketing??void 0,facebook_url:e.facebook_url??void 0,twitter_handle:e.twitter_handle??void 0,linkedin_url:e.linkedin_url??void 0,instagram_handle:e.instagram_handle??void 0,website:e.website??void 0,tags:e.tags??void 0,status_reason:e.status_reason??void 0,notes:e.notes??void 0,public_notes:e.public_notes??void 0,createdAt:e.created_at?new Date(e.created_at):new Date,updatedAt:e.updated_at?new Date(e.updated_at):void 0,deactivatedAt:e.deactivated_at?new Date(e.deactivated_at):void 0}}function pI(e){if(!e||"object"!=typeof e)return{};const t={};return"code"in e&&void 0!==e.code&&null!==e.code&&(t.code=e.code),"name"in e&&void 0!==e.name&&null!==e.name&&(t.name=e.name),"status"in e&&void 0!==e.status&&null!==e.status&&(t.status=e.status),"email"in e&&void 0!==e.email&&null!==e.email&&(t.email=e.email),"phone"in e&&void 0!==e.phone&&null!==e.phone&&(t.phone=e.phone),"business_name"in e&&void 0!==e.business_name&&null!==e.business_name&&(t.business_name=e.business_name),"street_address"in e&&void 0!==e.street_address&&null!==e.street_address&&(t.street_address=e.street_address),"city"in e&&void 0!==e.city&&null!==e.city&&(t.city=e.city),"state_province"in e&&void 0!==e.state_province&&null!==e.state_province&&(t.state_province=e.state_province),"postal_code"in e&&void 0!==e.postal_code&&null!==e.postal_code&&(t.postal_code=e.postal_code),"country"in e&&void 0!==e.country&&null!==e.country&&(t.country=e.country),"date_of_birth"in e&&void 0!==e.date_of_birth&&null!==e.date_of_birth&&(t.date_of_birth=e.date_of_birth),"gender"in e&&void 0!==e.gender&&null!==e.gender&&(t.gender=e.gender),"nationality"in e&&void 0!==e.nationality&&null!==e.nationality&&(t.nationality=e.nationality),"id_number"in e&&void 0!==e.id_number&&null!==e.id_number&&(t.id_number=e.id_number),"id_type"in e&&void 0!==e.id_type&&null!==e.id_type&&(t.id_type=e.id_type),"account_manager_id"in e&&void 0!==e.account_manager_id&&null!==e.account_manager_id&&(t.account_manager_id=e.account_manager_id),"sales_representative_id"in e&&void 0!==e.sales_representative_id&&null!==e.sales_representative_id&&(t.sales_representative_id=e.sales_representative_id),"customer_since"in e&&void 0!==e.customer_since&&null!==e.customer_since&&(t.customer_since=e.customer_since),"last_purchase_date"in e&&void 0!==e.last_purchase_date&&null!==e.last_purchase_date&&(t.last_purchase_date=e.last_purchase_date),"total_purchase_amount"in e&&void 0!==e.total_purchase_amount&&null!==e.total_purchase_amount&&(t.total_purchase_amount=e.total_purchase_amount),"last_contact_date"in e&&void 0!==e.last_contact_date&&null!==e.last_contact_date&&(t.last_contact_date=e.last_contact_date),"event_preferences"in e&&(t.event_preferences=e.event_preferences??null),"seating_preferences"in e&&(t.seating_preferences=e.seating_preferences??null),"accessibility_needs"in e&&(t.accessibility_needs=e.accessibility_needs??null),"dietary_restrictions"in e&&(t.dietary_restrictions=e.dietary_restrictions??null),"emergency_contact_name"in e&&(t.emergency_contact_name=e.emergency_contact_name??null),"emergency_contact_phone"in e&&(t.emergency_contact_phone=e.emergency_contact_phone??null),"emergency_contact_relationship"in e&&(t.emergency_contact_relationship=e.emergency_contact_relationship??null),"preferred_language"in e&&(t.preferred_language=e.preferred_language??null),"marketing_opt_in"in e&&(t.marketing_opt_in=e.marketing_opt_in??null),"email_marketing"in e&&(t.email_marketing=e.email_marketing??null),"sms_marketing"in e&&(t.sms_marketing=e.sms_marketing??null),"facebook_url"in e&&(t.facebook_url=e.facebook_url??null),"twitter_handle"in e&&(t.twitter_handle=e.twitter_handle??null),"linkedin_url"in e&&(t.linkedin_url=e.linkedin_url??null),"instagram_handle"in e&&(t.instagram_handle=e.instagram_handle??null),"website"in e&&(t.website=e.website??null),"tag_ids"in e&&void 0!==e.tag_ids&&null!==e.tag_ids&&(t.tag_ids=e.tag_ids),"status_reason"in e&&void 0!==e.status_reason&&null!==e.status_reason&&(t.status_reason=e.status_reason),"notes"in e&&void 0!==e.notes&&null!==e.notes&&(t.notes=e.notes),"public_notes"in e&&void 0!==e.public_notes&&null!==e.public_notes&&(t.public_notes=e.public_notes),t}class fI{config;constructor(e){this.config=e}getEndpoint(){return this.config.endpoints?.customers||ms.ENDPOINTS.SALES.CUSTOMERS}async fetchCustomers(e){const{apiClient:t}=this.config,n=this.getEndpoint(),a=new URLSearchParams;void 0!==e?.skip&&a.append("skip",e.skip.toString()),void 0!==e?.limit&&a.append("limit",e.limit.toString()),e?.search&&a.append("search",e.search);const s=a.toString()?`${n}?${a.toString()}`:n,r=await t.get(s,{requiresAuth:!0});return{data:(r.items??[]).map(mI),pagination:{page:r.page??Math.floor((e?.skip||0)/(e?.limit||50))+1,pageSize:r.page_size??e?.limit??50,total:r.total??0,totalPages:r.total_pages??0}}}async fetchCustomer(e){const{apiClient:t}=this.config,n=this.getEndpoint();return mI(await t.get(`${n}/${e}`,{requiresAuth:!0}))}async createCustomer(e){const{apiClient:t}=this.config,n=this.getEndpoint(),a=pI(e);return mI(await t.post(n,a,{requiresAuth:!0}))}async updateCustomer(e,t){const{apiClient:n}=this.config,a=this.getEndpoint(),s=pI(t);return mI(await n.put(`${a}/${e}`,s,{requiresAuth:!0}))}async deleteCustomer(e){const{apiClient:t}=this.config,n=this.getEndpoint();await t.delete(`${n}/${e}`,{requiresAuth:!0})}}function gI(e,t){const{filter:n,pagination:a}=t||{};return Ya({queryKey:["customers",n?.search,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchCustomers({skip:t,limit:s,search:n?.search})},staleTime:3e5})}function xI(e,t){return Ya({queryKey:["customer",t],queryFn:()=>t?e.fetchCustomer(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function vI(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateCustomer(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["customers"]}),t.invalidateQueries({queryKey:["customer",n.id]})}})}function yI(e){const t=Va();return Xa({mutationFn:t=>e.deleteCustomer(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customers"]})}})}const bI=p.createContext(void 0);function wI({children:e,config:t}){const n=p.useMemo(()=>new fI(t),[t.apiClient,t.endpoints?.customers]),a=p.useMemo(()=>({customerService:n}),[n]);return c.jsx(bI.Provider,{value:a,children:e})}function SI(){const e=p.useContext(bI);if(!e)throw new Error("useCustomerService must be used within a CustomerProvider");return e.customerService}function jI({onNavigateToCustomer:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:a}){const s=SI(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(null),v=f.useRef(!1),[y,b]=p.useState("");f.useEffect(()=>{const e=v.current;n&&!e&&u(!0),v.current=!!n},[n]);const{data:w,isLoading:S,error:j}=gI(s,{filter:r,pagination:o}),C=function(e){const t=Va();return Xa({mutationFn:t=>e.createCustomer(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customers"]})}})}(s),k=vI(s),N=yI(s),_=w?.data??[],E=w?.pagination,P=p.useCallback(()=>{t&&t(),u(!0)},[t]);p.useCallback(e=>{x(e),m(!0)},[]),p.useCallback(async e=>{try{await N.mutateAsync(e.id),Uk({title:"Success",description:"Customer deleted successfully"})}catch(GQ){Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to delete customer",variant:"destructive"})}},[N]);const A=p.useCallback(e=>{b(e??"")},[]);f.useEffect(()=>{const e=setTimeout(()=>{i(e=>({...e,search:y||void 0})),l(e=>({...e,page:1}))},300);return()=>clearTimeout(e)},[y]);const R=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),T=p.useCallback(e=>{l({page:1,pageSize:e})},[]),M=p.useCallback(async e=>{try{await C.mutateAsync(e),Uk({title:"Success",description:"Customer created successfully"}),u(!1),a?.()}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create customer",variant:"destructive"}),GQ}},[C,a]),D=p.useCallback(async(e,t)=>{try{await k.mutateAsync({id:e,input:t}),Uk({title:"Success",description:"Customer updated successfully"}),m(!1),x(null)}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to update customer",variant:"destructive"}),GQ}},[k]),L=p.useCallback(t=>{e?.(t.id)},[e]),F=p.useMemo(()=>{if(E)return{page:o.page,pageSize:o.pageSize,total:E.total,totalPages:E.totalPages}},[o,E]);return c.jsxs(c.Fragment,{children:[c.jsx(sI,{customers:_,loading:S,error:j,onCustomerClick:L,onCreate:P,onSearch:A,pagination:F,onPageChange:R,onPageSizeChange:T}),c.jsx(cI,{open:d,onOpenChange:e=>{u(e),e||a?.()},onSubmit:M}),c.jsx(dI,{open:h&&!!g,onOpenChange:e=>{m(e),e||x(null)},onSubmit:D,customer:g})]})}function CI({data:e=[],loading:t=!1,onCreate:n,onEdit:a,onDelete:s,onSearch:r,className:i}){const{t:o}=fr(),l=[DP({accessorKey:"code",header:()=>o("pages.settings.sales.ct.code","Code"),size:100}),TP({accessorKey:"name",header:()=>o("pages.settings.sales.ct.name","Name"),size:150}),FP({header:()=>o("common.actions","Actions"),size:180,actions:[...a?[{icon:Kg,onClick:e=>a(e),title:"Edit"}]:[],...s?[{icon:ax,onClick:e=>s(e),title:"Delete",className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors"}]:[]]})];return c.jsx("div",{className:i,children:c.jsx(OP,{data:e,columns:l,title:o("pages.settings.sales.ct.title","CustomerTypes"),description:o("pages.settings.sales.ct.list","CustomerType List"),loading:t,onCreate:n,onSearch:r,manualFiltering:!!r,useDefaultColumns:!1})})}function kI(e){return{id:e.id,code:e.code,name:e.name,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class NI{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchCustomerTypes(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.customerTypes.replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(kI),pagination:l}}catch(t){throw t}}async searchCustomerTypes(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.endpoints.customerTypes.replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(kI)}catch(n){throw n}}async fetchCustomerTypeById(e){try{const t=this.endpoints.customerTypes.replace(/\/$/,"");return kI(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createCustomerType(e){try{return kI(await this.apiClient.post(this.endpoints.customerTypes,e,{requiresAuth:!0}))}catch(t){throw t}}async updateCustomerType(e,t){try{const n=this.endpoints.customerTypes.replace(/\/$/,"");return kI(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteCustomerType(e){try{const t=this.endpoints.customerTypes.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const _I=p.createContext(null);function EI({children:e,config:t}){const n=p.useMemo(()=>new NI(t),[t.apiClient,t.endpoints?.customerTypes]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(_I.Provider,{value:a,children:e})}const PI={code:"",name:""};function AI({open:e,onOpenChange:t,onSubmit:n,loading:a=!1,error:s=null}){const{t:r}=fr(),i=Us(),[o,l]=p.useState(PI),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(0),[x,v]=p.useState(null),y=p.useRef(null),b=p.useRef(null);p.useEffect(()=>{v(s)},[s]);const w=()=>{const e={};return o.code||(e.code=r("pages.settings.sales.ct.codeRequired","Code is required")),o.name||(e.name=r("pages.settings.sales.ct.nameRequired","Name is required")),u(e),0===Object.keys(e).length},S=async()=>{try{const e={code:o.code,name:o.name};await n(e),l(PI),u({}),m(!1),g(e=>e+1)}catch(e){m(!1)}},j=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),x&&v(null)},C=()=>{l(PI),u({}),t(!1)},k=()=>{l({...PI}),u({}),v(null),g(e=>e+1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{y.current?.focus()})},[e,f]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&h)return e.preventDefault(),e.stopPropagation(),void m(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h?a||S():!a&&w()&&m(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||k())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,h,a,o]);return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:C,title:r("pages.settings.sales.ct.createTitle","Create CustomerType"),maxWidth:"500px",loading:a,showClearButton:!0,onClear:k,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:r("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>C(),disabled:a},{label:a?r("pages.settings.sales.ct.creating","Creating..."):r("pages.settings.sales.ct.create","Create CustomerType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),b.current&&b.current.requestSubmit()},disabled:a}],children:c.jsxs("form",{ref:b,onSubmit:async e=>{e.preventDefault(),w()&&m(!0)},className:sl(i.spacingFormSection,"w-full"),children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:sl("grid grid-cols-1",i.gapForm),children:[c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"code",className:sl(i.textSizeLabel,"font-medium"),children:[r("pages.settings.sales.ct.code","Code")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"code",ref:y,type:"text",value:o.code,onChange:e=>j("code",e.target.value),className:sl(i.inputHeight,i.textSize,d.code&&"border-destructive"),disabled:a,placeholder:r("pages.settings.sales.ct.codePlaceholder","Enter code")})}),c.jsx(Ul,{className:i.textSizeSmall,children:d.code})]}),c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"name",className:sl(i.textSizeLabel,"font-medium"),children:[r("pages.settings.sales.ct.name","Name")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"name",type:"text",value:o.name,onChange:e=>j("name",e.target.value),className:sl(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:a,placeholder:r("pages.settings.sales.ct.namePlaceholder","Enter name")})}),c.jsx(Ul,{className:i.textSizeSmall,children:d.name})]})]})}),x&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[r("common.error","ERROR"),":"]}),c.jsx("span",{children:x.message||r("pages.settings.sales.ct.createError","Failed to create CustomerType")})]})})]},f)}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||setTimeout(()=>{y.current?.focus()},0)},title:r("pages.settings.sales.ct.confirmCreateTitle","Confirm CustomerType Creation"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:r("pages.settings.sales.ct.confirmCreateDescription","Are you sure you want to create a new customer-type?")})}),confirmAction:{label:a?r("pages.settings.sales.ct.creating","Creating..."):r("pages.settings.sales.ct.confirmCreate","Confirm & Create"),onClick:S,loading:a,disabled:a},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:a,onClick:()=>m(!1)}})]})}function RI({open:e,onOpenChange:t,ct:n,onSubmit:a,loading:s=!1,error:r=null}){const{t:i}=fr(),o=Us(),[l,d]=p.useState({code:"",name:""}),[u,h]=p.useState({code:"",name:""}),[m,f]=p.useState({}),[g,x]=p.useState(!1),[v,y]=p.useState(0),[b,w]=p.useState(null),S=p.useRef(null),j=p.useRef(null);p.useEffect(()=>{w(r)},[r]),p.useEffect(()=>{if(e&&n){const e={code:n.code||"",name:n.name||""};d(e),h(e),f({}),w(null),y(e=>e+1)}},[e,n]);const C=()=>{const e={};return l.code||(e.code=i("pages.settings.sales.ct.codeRequired","Code is required")),l.name||(e.name=i("pages.settings.sales.ct.nameRequired","Name is required")),f(e),0===Object.keys(e).length},k=async()=>{if(n)try{const e={code:l.code,name:l.name};await a(n.id,e),x(!1),t(!1)}catch(e){x(!1)}},N=(e,t)=>{d(n=>({...n,[e]:t})),m[e]&&f(t=>({...t,[e]:void 0})),b&&w(null)},_=()=>{n&&d(u),f({}),t(!1)},E=()=>{n&&(d({...u}),f({}),w(null),y(e=>e+1))};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{S.current?.focus()})},[e,v,n]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&g)return e.preventDefault(),e.stopPropagation(),void x(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),g?s||k():!s&&C()&&x(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||E())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,g,s,l,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:_,title:i("pages.settings.sales.ct.editTitle","Edit CustomerType"),maxWidth:"500px",loading:s,showClearButton:!0,onClear:E,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Reset",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:i("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>_(),disabled:s},{label:s?i("pages.settings.sales.ct.updating","Updating..."):i("pages.settings.sales.ct.update","Update CustomerType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),j.current&&j.current.requestSubmit()},disabled:s}],children:c.jsxs("form",{ref:j,onSubmit:async e=>{e.preventDefault(),C()&&x(!0)},className:sl(o.spacingFormSection,"w-full"),children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",o.paddingForm),children:c.jsxs("div",{className:sl("grid grid-cols-1",o.gapForm),children:[c.jsxs(Ol,{className:o.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"code",className:sl(o.textSizeLabel,"font-medium"),children:[i("pages.settings.sales.ct.code","Code")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"code",ref:S,type:"text",value:l.code,onChange:e=>N("code",e.target.value),className:sl(o.inputHeight,o.textSize,m.code&&"border-destructive"),disabled:s,placeholder:i("pages.settings.sales.ct.codePlaceholder","Enter code")})}),c.jsx(Ul,{className:o.textSizeSmall,children:m.code})]}),c.jsxs(Ol,{className:o.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"name",className:sl(o.textSizeLabel,"font-medium"),children:[i("pages.settings.sales.ct.name","Name")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"name",type:"text",value:l.name,onChange:e=>N("name",e.target.value),className:sl(o.inputHeight,o.textSize,m.name&&"border-destructive"),disabled:s,placeholder:i("pages.settings.sales.ct.namePlaceholder","Enter name")})}),c.jsx(Ul,{className:o.textSizeSmall,children:m.name})]})]})}),b&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",o.paddingContainer,o.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[i("common.error","ERROR"),":"]}),c.jsx("span",{children:b.message||i("pages.settings.sales.ct.updateError","Failed to update CustomerType")})]})})]},v)}),c.jsx(bA,{open:g,onOpenChange:e=>{x(e),e||setTimeout(()=>{S.current?.focus()},0)},title:i("pages.settings.sales.ct.confirmUpdateTitle","Confirm CustomerType Update"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:sl("mb-3",o.textSizeSmall),children:i("pages.settings.sales.ct.confirmUpdateDescription","Are you sure you want to update this customer-type?")})}),confirmAction:{label:s?i("pages.settings.sales.ct.updating","Updating..."):i("pages.settings.sales.ct.confirmUpdate","Confirm & Update"),onClick:k,loading:s,disabled:s},cancelAction:{label:i("common.cancel","Cancel"),variant:"outline",disabled:s,onClick:()=>x(!1)}})]}):null}function TI({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToCustomerType:n}){const a=function(){const e=p.useContext(_I);if(!e)throw new Error("useCustomerTypeService must be used within CustomerTypeProvider");return e.service}(),{toast:s}=Vk(),{t:r}=fr(),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(""),[g,x]=p.useState({page:1,pageSize:50}),[v,y]=p.useState(!1),[b,w]=p.useState(null),{data:S,isLoading:j}=function(e,t){const{search:n,pagination:a,enabled:s=!0}=t||{},r=n?.trim()||void 0;return Ya({queryKey:["ct",r,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,n=a?.pageSize||100;return r?e.searchCustomerTypes(r,n).then(e=>({data:e,pagination:{page:1,pageSize:n,total:e.length,totalPages:1}})):e.fetchCustomerTypes({skip:t,limit:n})},enabled:s,staleTime:3e5})}(a,{search:m||void 0,pagination:g}),C=S?.data||[],k=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteCustomerType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["ct"]})}})}(a),N=function(e){const t=Va();return Xa({mutationFn:t=>e.createCustomerType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["ct"]})}})}(a),_=function(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateCustomerType(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["ct"]}),t.invalidateQueries({queryKey:["ct",n.id]})}})}(a),E=p.useCallback(e=>{w(e),y(!0)},[]),P=p.useCallback(async()=>{if(b)try{await k.mutateAsync(b.id),s({title:r("common.success"),description:r("pages.settings.sales.ct.deleted")}),y(!1),w(null)}catch(e){s({title:r("common.error"),description:r("common.errorOccurred"),variant:"destructive"})}},[b,k,s,r]),A=p.useCallback(e=>{h(e),d(!0)},[]),R=p.useCallback(()=>{o(!0)},[]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const T=p.useCallback(async e=>{try{await N.mutateAsync(e),s({title:r("common.success","Success"),description:r("pages.settings.sales.ct.created","CustomerType created successfully")})}catch(t){throw s({title:r("common.error","Error"),description:r("pages.settings.sales.ct.createError","Failed to create customer-type"),variant:"destructive"}),t}},[N,s,r]),M=p.useCallback(async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),s({title:r("common.success","Success"),description:r("pages.settings.sales.ct.updated","CustomerType updated successfully")})}catch(n){throw s({title:r("common.error","Error"),description:r("pages.settings.sales.ct.updateError","Failed to update customer-type"),variant:"destructive"}),n}},[_,s,r]),D=p.useCallback(e=>{f(e),x(e=>({...e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(CI,{data:C,loading:j,onCreate:R,onEdit:A,onDelete:E,onSearch:D}),c.jsx(AI,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:T,loading:N.isPending,error:N.error}),c.jsx(RI,{open:l,onOpenChange:e=>{d(e),e||h(null)},ct:u,onSubmit:M,loading:_.isPending,error:_.error}),c.jsx(bA,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:r("pages.settings.sales.ct.confirmDeleteTitle","Delete CustomerType"),description:b?r("pages.settings.sales.ct.confirmDelete",{defaultValue:`Are you sure you want to delete "${b.name||b.id}"? This action cannot be undone.`,name:b.name||b.id}):"",confirmText:"delete",confirmTextLabel:r("common.typeToConfirm","Type 'delete' to confirm"),confirmAction:{label:r("common.delete","Delete"),variant:"destructive",onClick:P,loading:k.isPending,disabled:k.isPending},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:k.isPending}})]})}function MI(e){return{...e,created_at:new Date(e.created_at),updated_at:e.updated_at?new Date(e.updated_at):void 0}}class DI{config;constructor(e){this.config=e}async fetchCustomerGroups(e){const{apiClient:t,endpoints:n}=this.config,a=n?.customerGroups||"/api/v1/sales/customer-groups",s=new URLSearchParams;e?.parent_id&&s.append("parent_id",e.parent_id),void 0!==e?.skip&&s.append("skip",e.skip.toString()),void 0!==e?.limit&&s.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&s.append("search",e.search.trim()),void 0!==e?.is_active&&s.append("is_active",e.is_active.toString());const r=a.replace(/\/$/,""),i=s.toString()?`${r}?${s.toString()}`:r,o=await t.get(i,{requiresAuth:!0}),l=o.skip||e?.skip||0,c=o.limit||e?.limit||50,d=o.total||0;return{data:(o.items||[]).map(MI),pagination:{page:Math.floor(l/c)+1,pageSize:c,total:d,totalPages:Math.ceil(d/c)}}}async fetchCustomerGroupTree(){const{apiClient:e,endpoints:t}=this.config,n=`${t?.customerGroups||"/api/v1/sales/customer-groups"}/tree/root`,a=await e.get(n,{requiresAuth:!0});if(!a)return[];if(!Array.isArray(a))return[];const s=e=>{const t=MI(e),n=(e.children||[]).map(s);return{...t,children:n,children_count:e.children_count||n.length,has_children:n.length>0||e.has_children||!1}};return a.map(s)}async fetchCustomerGroup(e){const{apiClient:t,endpoints:n}=this.config,a=n?.customerGroups||"/api/v1/sales/customer-groups";return MI(await t.get(`${a}/${e}`,{requiresAuth:!0}))}async fetchCustomerGroupHierarchy(e){const{apiClient:t,endpoints:n}=this.config,a=n?.customerGroups||"/api/v1/sales/customer-groups",s=await t.get(`${a}/${e}/hierarchy`,{requiresAuth:!0});return{item:MI(s.item||s.category||s.group),ancestors:(s.ancestors||[]).map(MI),descendants:(s.descendants||[]).map(MI)}}async fetchCustomerGroupChildren(e){const{apiClient:t,endpoints:n}=this.config,a=n?.customerGroups||"/api/v1/sales/customer-groups";return(await t.get(`${a}/${e}/children`,{requiresAuth:!0})||[]).map(MI)}async createCustomerGroup(e){const{apiClient:t,endpoints:n}=this.config,a=n?.customerGroups||"/api/v1/sales/customer-groups",s={code:e.code,name:e.name,parent_id:e.parent_id?e.parent_id:null,sort_order:e.sort_order};return MI(await t.post(a,s,{requiresAuth:!0}))}async updateCustomerGroup(e,t){const{apiClient:n,endpoints:a}=this.config,s=a?.customerGroups||"/api/v1/sales/customer-groups",r={};void 0!==t.code&&(r.code=t.code),void 0!==t.name&&(r.name=t.name),void 0!==t.parent_id&&(r.parent_id=t.parent_id||null),void 0!==t.sort_order&&(r.sort_order=t.sort_order);return MI(await n.put(`${s}/${e}`,r,{requiresAuth:!0}))}async deleteCustomerGroup(e){const{apiClient:t,endpoints:n}=this.config,a=n?.customerGroups||"/api/v1/sales/customer-groups";await t.delete(`${a}/${e}`,{requiresAuth:!0})}}function LI({item:e,level:t,expandedIds:n,onToggle:a,onItemClick:s,onAddChild:r,onEdit:i,onDelete:o}){const l=n.has(e.id),d=e.has_children||e.children&&e.children.length>0;return c.jsxs("div",{children:[c.jsx(FI,{item:e,level:t,isExpanded:l,onToggle:()=>a(e.id),onItemClick:s,onAddChild:r,onEdit:i,onDelete:o}),l&&d&&e.children&&e.children.length>0&&c.jsx("div",{children:e.children.map(e=>c.jsx(LI,{item:e,level:t+1,expandedIds:n,onToggle:a,onItemClick:s,onAddChild:r,onEdit:i,onDelete:o},e.id))})]})}function FI({item:e,level:t,isExpanded:n,onToggle:a,onItemClick:s,onAddChild:r,onEdit:i,onDelete:o}){const l=e.has_children||e.children&&e.children.length>0,d=e.is_active??!0;return c.jsx("div",{children:c.jsxs(Wj,{children:[c.jsx(Qj,{asChild:!0,children:c.jsxs("div",{className:sl("flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-accent cursor-pointer group",t>0&&"ml-4"),style:{paddingLeft:16*t+8+"px"},onClick:()=>s?.(e),children:[l?c.jsx("button",{onClick:e=>{e.stopPropagation(),a()},className:"p-0.5 hover:bg-accent rounded",children:n?c.jsx(Xp,{className:"h-4 w-4 text-muted-foreground"}):c.jsx(Jp,{className:"h-4 w-4 text-muted-foreground"})}):c.jsx("div",{className:"w-5"}),c.jsx(_f,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm truncate",children:e.name||e.code}),!d&&c.jsx(NC,{variant:"secondary",className:"h-5 px-1.5 text-[10px]",children:"Inactive"})]}),e.description&&c.jsx("span",{className:"text-xs text-muted-foreground truncate block",children:e.description}),e.children_count>0&&!e.description&&c.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.children_count," child",1!==e.children_count?"ren":""]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-auto flex-shrink-0",onClick:e=>e.stopPropagation(),children:[i&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),i(e)},className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Kg,{className:"h-3.5 w-3.5"})}),r&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),r(e)},className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Add Child",children:c.jsx(jg,{className:"h-3.5 w-3.5"})}),o&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),o(e)},className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(ax,{className:"h-3.5 w-3.5"})})]})]})}),c.jsxs(Yj,{children:[c.jsx(Xj,{onClick:()=>s?.(e),children:"View Details"}),c.jsx(Xj,{onClick:()=>i?.(e),children:"Edit"}),c.jsx(Zj,{}),c.jsx(Xj,{onClick:()=>r?.(e),children:"Add Child"}),c.jsx(Zj,{}),c.jsx(Xj,{onClick:()=>o?.(e),className:"text-destructive focus:text-destructive",children:"Delete"})]})]})})}function II({items:e,onItemClick:t,onAddChild:n,onEdit:a,onDelete:s,expandedIds:r,onToggleExpand:i,className:o}){const[l,d]=p.useState(new Set),u=r??l,h=i?e=>i(e):e=>{d(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return c.jsx("div",{className:sl("space-y-1",o),children:0===e.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No customerGroups found"}):e.map(e=>c.jsx(LI,{item:e,level:0,expandedIds:u,onToggle:h,onItemClick:t,onAddChild:n,onEdit:a,onDelete:s},e.id))})}const OI=ED({code:kD().min(1,"Code is required").max(50),name:kD().max(200).optional(),parent_id:kD().optional()});function zI({open:e,onOpenChange:t,onSubmit:n,parentId:a,parentName:s}){const{register:r,handleSubmit:i,reset:o,setValue:l,formState:{errors:d,isSubmitting:u}}=lT({resolver:GT(OI),defaultValues:{code:"",name:"",parent_id:""}}),{isCompact:h}=$s(),m=h,p={...Us()};f.useEffect(()=>{e&&o({code:"",name:"",parent_id:a||""})},[e,a,o]),f.useEffect(()=>{e&&l("parent_id",a||"")},[a,e,l]);return c.jsx(ub,{open:e,onOpenChange:t,children:c.jsxs(pb,{className:sl("max-w-md max-h-[90vh] overflow-y-auto",p.paddingContainer),children:[c.jsxs(fb,{className:sl(p.spacingFormItem),children:[c.jsx(xb,{className:sl(m?"text-base":"text-lg","font-semibold"),children:"Create CustomerGroup"}),c.jsx(vb,{className:sl(p.textSizeSmall,"text-muted-foreground"),children:s?`Create a new customer-group under: ${s}`:"Create a new root customer-group"})]}),c.jsxs("form",{onSubmit:i(async e=>{try{const a={code:e.code,name:e.name||"",parent_id:e.parent_id&&e.parent_id.trim()?e.parent_id.trim():void 0};await n(a),t(!1)}catch(a){}}),className:sl(p.spacingFormSection),children:[c.jsxs("div",{className:sl("space-y-2",p.spacingFormItem),children:[c.jsx(Fl,{htmlFor:"code",className:sl(p.textSizeLabel,"font-medium"),children:"Code *"}),c.jsx(_l,{id:"code",...r("code"),placeholder:"Enter code",className:sl(p.inputHeight,p.textSizeSmall,d.code?"border-destructive":"")}),d.code&&c.jsx("p",{className:sl(p.textSizeSmall,"text-destructive"),children:d.code.message})]}),c.jsxs("div",{className:sl("space-y-2",p.spacingFormItem),children:[c.jsx(Fl,{htmlFor:"name",className:sl(p.textSizeLabel,"font-medium"),children:"Name"}),c.jsx(_l,{id:"name",...r("name"),placeholder:"Enter name",className:sl(p.inputHeight,p.textSizeSmall,d.name?"border-destructive":"")}),d.name&&c.jsx("p",{className:sl(p.textSizeSmall,"text-destructive"),children:d.name.message})]}),c.jsx("input",{type:"hidden",...r("parent_id")}),a&&c.jsxs("div",{className:sl("space-y-2",p.spacingFormItem),children:[c.jsx(Fl,{htmlFor:"parent_id_display",className:sl(p.textSizeLabel,"font-medium"),children:"Parent"}),c.jsx(_l,{id:"parent_id_display",value:s||a,disabled:!0,className:sl(p.inputHeight,p.textSizeSmall)})]}),c.jsxs(gb,{className:sl(p.gapButtonGroup),children:[c.jsx(wA,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:u,children:"Cancel"}),c.jsx(wA,{type:"submit",disabled:u,children:u?"Creating...":"Create"})]})]})]})})}const BI=ED({code:kD().min(1,"Code is required").max(50),name:kD().max(200).optional()});function $I({open:e,onOpenChange:t,onSubmit:n,item:a}){const{register:s,handleSubmit:r,reset:i,formState:{errors:o,isSubmitting:l}}=lT({resolver:GT(BI),defaultValues:{code:"",name:""}}),{isCompact:d}=$s(),u=d,h={...Us()};f.useEffect(()=>{e&&a&&i({code:a.code||"",name:a.name||""})},[e,a,i]);return a?c.jsx(ub,{open:e,onOpenChange:t,children:c.jsxs(pb,{className:sl("max-w-md max-h-[90vh] overflow-y-auto",h.paddingContainer),children:[c.jsxs(fb,{className:sl(h.spacingFormItem),children:[c.jsx(xb,{className:sl(u?"text-base":"text-lg","font-semibold"),children:"Edit CustomerGroup"}),c.jsxs(vb,{className:sl(h.textSizeSmall,"text-muted-foreground"),children:["Update details for ",a.name||a.code]})]}),c.jsxs("form",{onSubmit:r(async e=>{if(a)try{const s={code:e.code,name:e.name||void 0};await n(a.id,s),t(!1)}catch(s){}}),className:sl(h.spacingFormSection),children:[c.jsxs("div",{className:sl("space-y-2",h.spacingFormItem),children:[c.jsx(Fl,{htmlFor:"code",className:sl(h.textSizeLabel,"font-medium"),children:"Code *"}),c.jsx(_l,{id:"code",...s("code"),className:sl(h.inputHeight,h.textSizeSmall,o.code?"border-destructive":"")}),o.code&&c.jsx("p",{className:sl(h.textSizeSmall,"text-destructive"),children:o.code.message})]}),c.jsxs("div",{className:sl("space-y-2",h.spacingFormItem),children:[c.jsx(Fl,{htmlFor:"name",className:sl(h.textSizeLabel,"font-medium"),children:"Name"}),c.jsx(_l,{id:"name",...s("name"),className:sl(h.inputHeight,h.textSizeSmall,o.name?"border-destructive":"")}),o.name&&c.jsx("p",{className:sl(h.textSizeSmall,"text-destructive"),children:o.name.message})]}),c.jsxs(gb,{className:sl(h.gapButtonGroup),children:[c.jsx(wA,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),c.jsx(wA,{type:"submit",disabled:l,children:l?"Saving...":"Save"})]})]})]})}):null}function UI({className:e,autoOpenCreate:t=!1,onCreateDialogClose:n}){const a=Us(),[s,r]=p.useState(""),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(null),[g,x]=p.useState(null),[v,y]=p.useState(!1),[b,w]=p.useState(null);p.useEffect(()=>{t&&!i&&o(!0)},[t,i]);const{data:S,isLoading:j,error:C}=(k=GI,Ya({queryKey:["customer-groups-tree"],queryFn:()=>k.fetchCustomerGroupTree(),staleTime:3e5}));var k;const N=function(e){const t=Va();return Xa({mutationFn:t=>e.createCustomerGroup(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customer-groups"]}),t.invalidateQueries({queryKey:["customer-groups-tree"]})}})}(GI),_=function(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateCustomerGroup(t,n),onSuccess:e=>{t.invalidateQueries({queryKey:["customer-groups"]}),t.invalidateQueries({queryKey:["customer-groups-tree"]}),t.invalidateQueries({queryKey:["customer-group",e.id]})}})}(GI),E=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteCustomerGroup(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customer-groups"]}),t.invalidateQueries({queryKey:["customer-groups-tree"]})}})}(GI),P=p.useMemo(()=>{if(!S)return[];const e=t=>t.map(t=>{const n=!s||t.code?.toLowerCase().includes(s.toLowerCase())||t.name&&t.name.toLowerCase().includes(s.toLowerCase()),a=e(t.children||[]);return n||a.length>0?{...t,children:a}:null}).filter(e=>null!==e);return e(S)},[S,s]);return c.jsx("div",{className:e,children:c.jsxs("div",{className:sl("space-y-4",a.spacingFormSection),children:[c.jsxs("div",{className:sl("flex items-center justify-between",a.gapCard),children:[c.jsxs("div",{children:[c.jsx("h2",{className:sl("font-bold tracking-tight",a.textSizeCardTitle),children:"CustomerGroups"}),c.jsx("p",{className:sl("text-muted-foreground",a.textSizeCardDescription),children:"Manage customerGroups hierarchically"})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsxs(bl,{onClick:()=>{h(null),o(!0)},size:"sm",className:sl("h-8 px-2 text-xs"),children:[c.jsx(jg,{className:"mr-1 h-3 w-3"}),"Add Customer Group"]})})]}),c.jsxs(Sl,{children:[c.jsxs(jl,{className:a.spacingFormItem,children:[c.jsx("div",{className:sl("flex items-center justify-between",a.gapForm),children:c.jsx("div",{children:c.jsx(kl,{className:a.textSizeCardDescription,children:"Click on items to expand/collapse. Right-click for more options."})})}),c.jsx("div",{className:sl("flex mt-4",a.gapForm),children:c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Ig,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none z-10"}),c.jsx(_l,{placeholder:"Search by code or name...",value:s,onChange:e=>r(e.target.value),className:"pl-10"})]})})]}),c.jsxs(Nl,{children:[j&&c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading customerGroups..."}),C&&c.jsxs("div",{className:"text-center py-8 text-destructive",children:["Error loading customerGroups: ",C.message]}),!j&&!C&&c.jsxs(c.Fragment,{children:[S&&0===S.length&&c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No customerGroups found. Create your first one to get started."}),P.length>0&&c.jsx(II,{items:P,onItemClick:e=>f(e),onAddChild:e=>{h(e),o(!0)},onEdit:e=>{x(e),d(!0)},onDelete:e=>{w(e),y(!0)}}),S&&S.length>0&&0===P.length&&c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No customerGroups match your search criteria."})]})]})]}),c.jsx(zI,{open:i,onOpenChange:e=>{o(e),e||(h(null),n?.())},onSubmit:async e=>{try{await N.mutateAsync(e),Uk({title:"Success",description:"CustomerGroup created successfully"}),o(!1),h(null)}catch(t){Uk({title:"Error",description:t.message||"Failed to create customer-group",variant:"destructive"})}},parentId:u?.id,parentName:u?.name||u?.code||void 0}),c.jsx($I,{open:l,onOpenChange:e=>{d(e),e||x(null)},onSubmit:async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),Uk({title:"Success",description:"CustomerGroup updated successfully"}),d(!1),x(null)}catch(n){throw Uk({title:"Error",description:n.message||"Failed to update customer-group",variant:"destructive"}),n}},item:g}),c.jsx(bA,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:"Delete CustomerGroup",description:b?`Are you sure you want to delete "${b.name||b.code}"? This action cannot be undone.`:"",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(b)try{await E.mutateAsync(b.id),Uk({title:"Success",description:"CustomerGroup deleted successfully"}),y(!1),w(null)}catch(e){Uk({title:"Error",description:e.message||"Failed to delete customer-group",variant:"destructive"})}},loading:E.isPending,disabled:E.isPending},cancelAction:{label:"Cancel",variant:"outline",disabled:E.isPending}})]})})}function VI({autoOpenCreate:e,onCreateDialogClose:t}){return c.jsx(UI,{autoOpenCreate:e,onCreateDialogClose:t})}const qI=p.createContext(null);function HI({children:e,config:t}){const n=p.useMemo(()=>new DI(t),[t.apiClient,t.endpoints?.customerGroups]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(qI.Provider,{value:a,children:e})}const GI=new DI({apiClient:Fs,endpoints:{customerGroups:"/api/v1/sales/customer-groups"}});function KI(e){const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t}function WI(e){if("pending"!==e.status.toLowerCase().trim())return!1;const t=e.payment_status?.toLowerCase().trim();return!t||"pending"===t}function QI(e){const t=e.status.toLowerCase().trim();if("cancelled"===t)return"Booking is already cancelled";if("pending"!==t)return`Only pending bookings can be cancelled. Current status: ${e.status.toUpperCase()}`;const n=e.payment_status?.toLowerCase().trim();return n&&"pending"!==n?`Cannot cancel booking with payments. Payment status: ${e.payment_status?.toUpperCase()}`:"Cancel"}function YI({className:e,bookings:t=[],loading:n=!1,error:a=null,pagination:s,onBookingClick:r,onCancel:i,onPayment:o,onVoidPayment:l,onCreate:d,onSearch:u,onPageChange:h,onPageSizeChange:m,customActions:f}){const g=Us(),[x,v]=p.useState(!1),[y,b]=p.useState(null),[w,S]=p.useState(""),j=e=>e.booking_number||String(e.id),C=[LP({getDisplayName:j,getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.booking_number),header:"Booking Number",showAvatar:!1,onClick:r,additionalOptions:{id:"booking_number"}}),TP({accessorKey:"customer_name",header:"Customer",cell:e=>{const t=e.row.original.customer_name;return c.jsx("span",{className:sl("text-muted-foreground",g.textSize),children:t||"-"})}}),TP({accessorKey:"status",header:"Status",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",g.textSize),children:t??"-"})}}),TP({accessorKey:"total_amount",header:"Total Amount",cell:e=>{const t=e.row.original,n=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",g.textSize),children:null!=n?`${t.currency||"USD"} ${n.toFixed(2)}`:"-"})}}),TP({accessorKey:"payment_status",header:"Payment Status",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",g.textSize),children:t??"-"})}}),MP({accessorKey:"created_at",header:"Created At"}),FP({customActions:f,actions:[...o?[{icon:xf,onClick:e=>o(e),title:e=>"paid"===e.payment_status?"Booking is fully paid":KI(e.status)?"Settle Payment":`Payment not allowed for status: ${e.status.toUpperCase()}`,disabledWhen:e=>!KI(e.status)||"paid"===e.payment_status,className:"h-7 w-7 p-0 hover:bg-green-500/10 hover:text-green-600 transition-colors"}]:[],...l?[{icon:Fp,onClick:e=>l(e),title:e=>function(e){if("cancelled"===e.status.toLowerCase().trim())return"Cannot void payments for cancelled bookings";const t=e.payment_status?.toLowerCase().trim();return t&&"pending"!==t?"refunded"===t?"Payments are already refunded":"Void Payment":"No payments to void"}(e),disabledWhen:e=>!function(e){if("cancelled"===e.status.toLowerCase().trim())return!1;const t=e.payment_status?.toLowerCase().trim();return"processing"===t||"paid"===t}(e),className:"h-7 w-7 p-0 hover:bg-orange-500/10 hover:text-orange-600 transition-colors"}]:[],...i?[{icon:xx,onClick:e=>{b(e),S(""),v(!0)},title:e=>QI(e),disabledWhen:e=>!WI(e),className:"h-7 w-7 p-0 text-destructive hover:bg-destructive/10 hover:text-destructive transition-colors"}]:[]]})],k=t,N=s?{page:s.page,pageSize:s.pageSize,total:s.total,totalPages:s.totalPages}:void 0,_=()=>{v(!1),b(null),S("")};return c.jsxs("div",{className:sl("w-full",e),children:[c.jsx(OP,{data:k,columns:C,useDefaultColumns:!1,title:"Bookings",description:"Manage and view bookings",onCreate:d,onSearch:u,manualPagination:Boolean(s&&h),serverPagination:N,onPageChange:h,onPageSizeChange:m,loading:n}),c.jsx(ub,{open:x,onOpenChange:e=>{v(e),e||(b(null),S(""))},children:c.jsxs(pb,{children:[c.jsxs(fb,{children:[c.jsx(xb,{children:"Cancel Booking"}),c.jsx(vb,{children:y&&!WI(y)?c.jsxs("span",{className:"text-destructive",children:["This booking cannot be cancelled. ",QI(y)]}):y?`Are you sure you want to cancel booking "${j(y)}"? Please provide a reason for cancellation.`:"Are you sure you want to cancel this booking? Please provide a reason for cancellation."})]}),y&&!WI(y)?c.jsx(gb,{children:c.jsx(bl,{variant:"outline",onClick:_,children:"Close"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-4 py-4",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"cancellation-reason",children:["Cancellation Reason ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(Dl,{id:"cancellation-reason",placeholder:"Enter reason for cancellation...",value:w,onChange:e=>S(e.target.value),rows:4,required:!0}),!w.trim()&&c.jsx("p",{className:"text-sm text-destructive",children:"Cancellation reason is required"})]})}),c.jsxs(gb,{children:[c.jsx(bl,{variant:"outline",onClick:_,children:"No, Keep Booking"}),c.jsx(bl,{variant:"destructive",onClick:()=>{w.trim()&&y&&WI(y)&&(i&&i(y,w.trim()),v(!1),b(null),S(""))},disabled:!w.trim(),children:"Yes, Cancel Booking"})]})]})]})})]})}var XI=(e=>(e.DRAFT="draft",e.PUBLISHED="published",e.ON_SALE="on_sale",e.SOLD_OUT="sold_out",e.CANCELLED="cancelled",e.COMPLETED="completed",e))(XI||{}),ZI=(e=>(e.SEAT_SETUP="seat_setup",e.TICKET_IMPORT="ticket_import",e))(ZI||{}),JI=(e=>(e.AVAILABLE="available",e.RESERVED="reserved",e.SOLD="sold",e.HELD="held",e.BLOCKED="blocked",e))(JI||{});function eO(e){return{id:e.id,tenant_id:e.tenant_id,show_id:e.show_id,title:e.title,start_dt:new Date(e.start_dt),duration_minutes:e.duration_minutes,venue_id:e.venue_id,venue_name:e.venue_name||void 0,venue_code:e.venue_code||void 0,layout_id:e.layout_id||void 0,status:e.status,configuration_type:e.configuration_type,is_active:e.is_active,created_at:new Date(e.created_at),updated_at:new Date(e.updated_at)}}function tO(e){return{id:e.id,tenant_id:e.tenant_id,event_id:e.event_id,status:e.status,seat_id:e.seat_id||void 0,section_name:e.section_name||void 0,row_name:e.row_name||void 0,seat_number:e.seat_number||void 0,broker_id:e.broker_id||void 0,attributes:e.attributes||{},created_at:new Date(e.created_at),updated_at:new Date(e.updated_at),ticket_number:e.ticket_number||void 0,ticket_price:e.ticket_price||void 0,ticket_status:e.ticket_status||void 0}}class nO{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}getEndpoint(){return this.endpoints?.events||ms.ENDPOINTS.TICKETING.EVENTS}async fetchEvents(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString()),void 0!==e?.show_id&&t.append("show_id",e.show_id),void 0!==e?.layout_id&&t.append("layout_id",e.layout_id),void 0!==e?.status&&(Array.isArray(e.status)?e.status.forEach(e=>{t.append("status",e)}):t.append("status",e.status));const n=this.getEndpoint().replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(eO),pagination:l}}catch(t){throw t}}async searchEvents(e,t=100,n){try{const a=e.trim();if(!a)return[];const s=new URLSearchParams;s.append("search",a),s.append("limit",Math.min(t,200).toString()),n&&s.append("show_id",n);const r=`${this.getEndpoint().replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(r,{requiresAuth:!0})).items||[]).map(eO)}catch(a){throw a}}async fetchEventById(e){try{const t=this.getEndpoint().replace(/\/$/,"");return eO(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createEvent(e){try{return eO(await this.apiClient.post(this.getEndpoint(),e,{requiresAuth:!0}))}catch(t){throw t}}async updateEvent(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return eO(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteEvent(e){try{const t=this.getEndpoint().replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async fetchEventSeats(e,t){try{const n=new URLSearchParams;void 0!==t?.skip&&n.append("skip",t.skip.toString()),void 0!==t?.limit&&n.append("limit",t.limit.toString());const a=`${this.getEndpoint().replace(/\/$/,"")}/${e}/seats?${n.toString()}`,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip??t?.skip??0,i=s.limit??t?.limit??100,o=s.total??0;return{data:(s.items||[]).map(tO),pagination:{page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)}}}catch(n){throw n}}async initializeEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${n}/${e}/seats/initialize`,{generate_tickets:t.generate_tickets??!1,ticket_price:t.ticket_price??0,pricing_mode:t.pricing_mode??"same",section_pricing:t.section_pricing,seat_pricing:t.seat_pricing,included_section_ids:t.included_section_ids,excluded_section_ids:t.excluded_section_ids},{requiresAuth:!0})||[]).map(tO)}catch(n){throw n}}async importBrokerSeats(e,t,n){try{const a=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${a}/${e}/seats/import`,{broker_id:t,seats:n},{requiresAuth:!0})||[]).map(tO)}catch(a){throw a}}async deleteEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");await this.apiClient.post(`${n}/${e}/seats/delete`,{seat_ids:t},{requiresAuth:!0})}catch(n){throw n}}async createTicketsFromSeats(e,t,n=0){try{const a=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${a}/${e}/seats/create-tickets`,{seat_ids:t,ticket_price:n},{requiresAuth:!0})||[]).map(tO)}catch(a){throw a}}async createEventSeat(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return tO(await this.apiClient.post(`${n}/${e}/seats`,t,{requiresAuth:!0}))}catch(n){throw n}}async holdEventSeats(e,t,n){try{const a=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${a}/${e}/seats/hold`,{seat_ids:t,reason:n},{requiresAuth:!0})||[]).map(tO)}catch(a){throw a}}async unholdEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${n}/${e}/seats/unhold`,{seat_ids:t},{requiresAuth:!0})||[]).map(tO)}catch(n){throw n}}async unblockEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${n}/${e}/seats/unblock`,{seat_ids:t},{requiresAuth:!0})||[]).map(tO)}catch(n){throw n}}async blockEventSeats(e,t,n){try{const a=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${a}/${e}/seats/block`,{seat_ids:t,reason:n},{requiresAuth:!0})||[]).map(tO)}catch(a){throw a}}async fetchEventSeatStatistics(e){try{const t=this.getEndpoint().replace(/\/$/,"");return await this.apiClient.get(`${t}/${e}/seats/statistics`,{requiresAuth:!0})}catch(t){throw t}}}const aO=p.createContext(null);function sO({children:e,config:t}){const n=p.useMemo(()=>new nO(t),[t.apiClient,t.endpoints?.events]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(aO.Provider,{value:a,children:e})}function rO(){const e=p.useContext(aO);if(!e)throw new Error("useEventService must be used within EventProvider");return e.service}function iO(e,t){const{filter:n,pagination:a,enabled:s=!0,disableCache:r=!1}=t||{};return Ya({queryKey:["events",n?.search,n?.is_active,n?.show_id,n?.layout_id,n?.status,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchEvents({skip:t,limit:s,search:n?.search,is_active:n?.is_active,show_id:n?.show_id,layout_id:n?.layout_id,status:n?.status})},enabled:s,staleTime:r?0:3e5})}function oO(e,t){return Ya({queryKey:["events",t],queryFn:()=>t?e.fetchEventById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function lO(e,t){return Ya({queryKey:["events",t,"statistics"],queryFn:()=>t?e.fetchEventSeatStatistics(t):Promise.resolve(null),enabled:!!t,staleTime:12e4})}function cO(e){const t=Va();return Xa({mutationFn:t=>e.createEvent(t),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),t.invalidateQueries({queryKey:["shows"]})}})}function dO(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateEvent(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events"]}),t.invalidateQueries({queryKey:["events",n.id]})}})}function uO(e,t,n){return Ya({queryKey:["events",t,"seats",n?.skip,n?.limit],queryFn:async()=>{if(!t)throw new Error("Event ID is required");return e.fetchEventSeats(t,n)},enabled:!!t,staleTime:3e5,retry:(e,t)=>"CancelledError"!==t?.name&&!t?.message?.includes("CancelledError")&&!t?.message?.includes("cancelled")&&e<3})}const hO=ED({title:kD().min(1,"Title is required").max(200,"Title cannot exceed 200 characters"),start_dt:kD().min(1,"Start datetime is required"),duration_minutes:ND().min(1,"Duration must be at least 1 minute").max(1440,"Duration cannot exceed 1440 minutes (24 hours)"),venue_id:kD().min(1,"Venue is required"),layout_id:kD().optional(),status:AD(XI).default(XI.DRAFT),configuration_type:AD(ZI).default(ZI.SEAT_SETUP)}),mO=p.forwardRef(({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:a="create",venues:s=[],layouts:r=[],onVenueChange:i},o)=>{const l=lT({resolver:GT(hO),defaultValues:{title:"",start_dt:"",duration_minutes:120,venue_id:"",layout_id:void 0,status:XI.DRAFT,configuration_type:ZI.SEAT_SETUP,...e}}),{watch:d,setValue:u,handleSubmit:h,formState:{errors:m,isSubmitted:f}}=l,g=d("venue_id"),x=r.filter(e=>!g||e.venue_id===g);p.useEffect(()=>{i&&i(g||null)},[g,i]);const v=p.useRef(null);p.useEffect(()=>{if(f&&Object.keys(m).length>0){const e=Object.keys(m)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):v.current&&v.current.scrollIntoView({behavior:"smooth",block:"center"})}},[m,f]);Object.values(XI).map(e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}));const y=[{value:ZI.SEAT_SETUP,label:"Seat Setup (Standard)",description:"Define seat layout first, tickets created during booking."},{value:ZI.TICKET_IMPORT,label:"Ticket First (Broker Import)",description:"Add tickets with seat information first (import/scan)."}],b={title:d("title")??"",start_dt:d("start_dt")??"",duration_minutes:String(d("duration_minutes")??""),venue_id:d("venue_id")??"",layout_id:d("layout_id")??"",status:d("status")??"",configuration_type:d("configuration_type")??""};return c.jsx(oR,{...l,children:c.jsxs("form",{ref:o,onSubmit:h(async e=>{await t(e)}),className:sl("space-y-6"),noValidate:!0,children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(vT,{formType:"event",currentValues:b,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&u(e,"duration_minutes"===e?Number(t)||0:t)})},disabled:n})}),c.jsx("div",{ref:v}),c.jsx(cT,{name:"title",label:"Title",placeholder:"Enter event title",required:!0,disabled:n}),c.jsx(hT,{name:"start_dt",label:"Start Date & Time",required:!0,disabled:n,helperText:"When the event begins"}),c.jsx(dT,{name:"duration_minutes",label:"Duration (minutes)",placeholder:"120",required:!0,min:1,max:1440,disabled:n,helperText:"Duration of the event in minutes (1-1440)"}),c.jsx(mT,{name:"venue_id",label:"Venue",placeholder:"Select a venue",required:!0,disabled:n,options:s.map(e=>({value:e.id,label:e.name}))}),g&&x.length>0&&c.jsx(mT,{name:"layout_id",label:"Layout (Optional)",placeholder:"Select a layout",disabled:n,options:x.map(e=>({value:e.id,label:e.name})),helperText:"Select a layout for this event's seating arrangement"}),c.jsx(mT,{name:"configuration_type",label:"Configuration Type",required:!0,disabled:n,options:y,helperText:"Choose how tickets and seats are managed"})]})})});function pO({eventId:e}){const{data:t,isLoading:n}=lO(rO(),e);if(n||!t)return c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(px,{className:"h-3 w-3"}),c.jsx("span",{children:"Loading..."})]});const{available_seats:a,reserved_seats:s,sold_seats:r,held_seats:i,blocked_seats:o}=t;return c.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1",title:"Available seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),c.jsx("span",{className:"text-green-700 font-medium",children:a}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"AVAILABLE"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Reserved seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),c.jsx("span",{className:"text-yellow-700 font-medium",children:s}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"RESERVED"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Sold seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),c.jsx("span",{className:"text-blue-700 font-medium",children:r}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"SOLD"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Held seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),c.jsx("span",{className:"text-purple-700 font-medium",children:i}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"HELD"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Blocked seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),c.jsx("span",{className:"text-red-700 font-medium",children:o}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"BLOCKED"})]})]})}function fO({className:e,events:t=[],loading:n=!1,error:a=null,onEventClick:s,onEdit:r,onDelete:i,onManageInventory:o,onStatusChange:l,onVenueClick:d,onSearch:u,customActions:h,showShowNameInTitle:m=!1,isDeleting:f=!1}){const g=Us(),[x,v]=p.useState(!1),[y,b]=p.useState(null),[w,S]=p.useState(!1),[j,C]=p.useState(null),k=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`},N=e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," "),_=p.useMemo(()=>t.map(e=>{return{id:e.id,name:e.title,description:(t=e.start_dt,new Date(t).toLocaleString()),event:e};var t}),[t]),E=e=>{s&&s(e.event)},P=e=>{r&&r(e.event)},A=e=>{b(e.event),v(!0)},R=Object.values(XI).map(e=>({value:e,label:N(e)})),T=p.useMemo(()=>[{id:"manage-inventory",icon:c.jsx(cg,{className:"h-3.5 w-3.5"}),title:"Manage Inventory",onClick:e=>{o&&o(e.event)},show:!!o},{id:"edit",icon:c.jsx(Kg,{className:"h-3.5 w-3.5"}),title:"Edit",onClick:P,show:!!r},{id:"delete",icon:c.jsx(ax,{className:"h-3.5 w-3.5"}),title:"Delete",onClick:A,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",show:!!i}],[o,r,i,P,A]),M=p.useMemo(()=>e=>{const t=(e=>{switch(e.toLowerCase()){case"draft":default:return"outline";case"published":case"on_sale":return"default";case"sold_out":case"completed":return"secondary";case"cancelled":return"destructive"}})(e.event.status),n=(e=>{const t=new Date(e);return{month:t.toLocaleDateString("en-US",{month:"short"}),day:t.getDate(),fullDate:t}})(e.event.start_dt),a=(e=>{const t=new Date(e);return{dayOfWeek:t.toLocaleDateString("en-US",{weekday:"short"}),time:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),fullTime:t.toLocaleTimeString("en-US",{weekday:"long",hour:"numeric",minute:"2-digit",hour12:!0})}})(e.event.start_dt);return c.jsx("div",{className:"group rounded-lg border bg-card transition-all hover:shadow-md hover:border-primary/20 cursor-pointer overflow-hidden",onClick:()=>E(e),children:c.jsxs("div",{className:sl("flex",g.gapCard,g.paddingCard),children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsxs("div",{className:"flex flex-col items-center justify-center w-16 h-16 rounded bg-muted/50 border border-border/50",children:[c.jsx("span",{className:sl("font-semibold text-muted-foreground uppercase leading-tight tracking-wide",g.textSizeSmall),children:n.month}),c.jsx("span",{className:"text-xl font-bold text-foreground leading-none mt-0.5",children:n.day})]})}),c.jsxs("div",{className:sl("flex-1 min-w-0 flex flex-col",g.gapFormItem),children:[c.jsxs("div",{className:sl("flex items-start justify-between",g.gapCard),children:[c.jsx("h4",{className:sl("font-semibold text-foreground line-clamp-2 leading-snug flex-1",g.textSize),children:m&&e.event.show?`${e.event.show.name} - ${e.name}`:e.name}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx(NC,{variant:t,className:"text-xs flex-shrink-0 flex items-center gap-1",children:N(e.event.status)})})]}),c.jsxs("div",{className:sl("flex items-center text-muted-foreground flex-wrap",g.gapCard,g.textSizeSmall),children:[c.jsxs("div",{className:sl("flex items-center",g.gapFormItem),children:[c.jsx(hf,{className:sl("flex-shrink-0",g.iconSize)}),c.jsx("span",{className:sl("font-medium text-foreground",g.textSizeSmall),children:a.dayOfWeek}),c.jsx("span",{children:a.time})]}),c.jsxs("div",{className:sl("flex items-center",g.gapFormItem),children:[c.jsx(Jf,{className:sl("flex-shrink-0",g.iconSize)}),c.jsx("span",{className:sl("truncate",d&&e.event.venue_name&&"cursor-pointer hover:text-primary hover:underline"),onClick:t=>{d&&e.event.venue_id&&(t.stopPropagation(),d(e.event.venue_id))},children:e.event.venue_name||""})]}),c.jsx("div",{className:sl("flex items-center",g.gapFormItem),children:c.jsx("span",{children:k(e.event.duration_minutes)})})]}),c.jsxs("div",{className:sl("flex items-center justify-between",g.gapCard),children:[c.jsx(pO,{eventId:e.event.id}),c.jsx(jT,{item:e,actions:T,customActions:h?e=>h(e.event):void 0})]})]})]})})},[r,i,o,l,d,h,s,R,g,m]),D={label:"Delete",onClick:()=>{y&&i&&i(y),v(!1),b(null)},variant:"destructive",loading:f,disabled:f},L={label:"Cancel",onClick:()=>{v(!1),b(null)},disabled:f},F={label:"Change Status",onClick:()=>{j&&l&&l(j.event,j.newStatus),S(!1),C(null)},variant:"default"},I={label:"Cancel",onClick:()=>{S(!1),C(null)},variant:"outline"};return c.jsxs("div",{className:e,children:[c.jsx($P,{items:_,loading:n,error:a,title:"",description:"",onSearch:u,searchable:!1,onItemClick:E,renderItem:M,showCreateButton:!1,defaultViewMode:"card",viewMode:"list",showViewToggle:!1,gridCols:{default:1}}),c.jsx(bA,{open:x,onOpenChange:e=>{v(e),e||b(null)},title:"Delete Event",description:y?`Are you sure you want to delete "${y.title}"? This action cannot be undone.`:"Are you sure you want to delete this event? This action cannot be undone.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:D,cancelAction:L}),c.jsx(bA,{open:w,onOpenChange:e=>{S(e),e||C(null)},title:"Change Event Status",description:j?`Are you sure you want to change the status of "${j.event.title}" from ${N(j.event.status)} to ${N(j.newStatus)}?`:"Are you sure you want to change the event status?",confirmAction:F,cancelAction:I})]})}function gO(e){return{id:e.id,code:e.code,name:e.name,description:e.description,image_url:e.image_url,venue_type:e.venue_type,capacity:e.capacity,parking_info:e.parking_info,accessibility:e.accessibility,amenities:e.amenities,opening_hours:e.opening_hours,phone:e.phone,email:e.email,website:e.website,street_address:e.street_address,city:e.city,state_province:e.state_province,postal_code:e.postal_code,country:e.country,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class xO{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}getEndpoint(){return this.endpoints?.venues||ms.ENDPOINTS.TICKETING.VENUES}async fetchVenues(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.getEndpoint().replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(gO),pagination:l}}catch(t){throw t}}async searchVenues(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.getEndpoint().replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(gO)}catch(n){throw n}}async fetchVenueById(e){try{const t=this.getEndpoint().replace(/\/$/,"");return gO(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createVenue(e){try{return gO(await this.apiClient.post(this.getEndpoint(),e,{requiresAuth:!0}))}catch(t){throw t}}async updateVenue(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return gO(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteVenue(e){try{const t=this.getEndpoint().replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const vO=p.createContext(null);function yO({children:e,config:t}){const n=p.useMemo(()=>new xO(t),[t.apiClient,t.endpoints?.venues]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(vO.Provider,{value:a,children:e})}function bO(){const e=p.useContext(vO);if(!e)throw new Error("useVenueService must be used within VenueProvider");return e.service}function wO(e,t){const{filter:n,pagination:a}=t||{};return Ya({queryKey:["venues",n?.search,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchVenues({skip:t,limit:s,search:n?.search})},staleTime:3e5})}function SO(e,t){return Ya({queryKey:["venues",t],queryFn:()=>t?e.fetchVenueById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function jO(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateVenue(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["venues"]}),t.invalidateQueries({queryKey:["venues",n.id]})}})}function CO(e){return{id:e.id,tenant_id:e.tenant_id,venue_id:e.venue_id,name:e.name,description:e.description||void 0,image_url:e.image_url||void 0,file_id:e.file_id||void 0,design_mode:e.design_mode||"seat-level",canvas_background_color:e.canvas_background_color||void 0,marker_fill_transparency:e.marker_fill_transparency??1,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}}class kO{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchLayoutsByVenue(e){try{return((await this.apiClient.get(`${this.endpoints.layouts}/venue/${e}`,{requiresAuth:!0})).items||[]).map(CO)}catch(t){throw t}}async fetchLayoutById(e){try{return CO(await this.apiClient.get(`${this.endpoints.layouts}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createLayout(e){try{return CO(await this.apiClient.post(this.endpoints.layouts,e,{requiresAuth:!0}))}catch(t){throw t}}async updateLayout(e,t){try{return CO(await this.apiClient.put(`${this.endpoints.layouts}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteLayout(e){try{await this.apiClient.delete(`${this.endpoints.layouts}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async cloneLayout(e){try{return CO(await this.apiClient.post(`${this.endpoints.layouts}/${e}/clone`,{},{requiresAuth:!0}))}catch(t){throw t}}async fetchLayoutWithSeats(e){try{const t=await this.apiClient.get(`${this.endpoints.layouts}/${e}/with-seats`,{requiresAuth:!0});return{layout:CO(t.layout),seats:t.seats.map(e=>({id:e.id,tenant_id:e.tenant_id,venue_id:e.venue_id,layout_id:e.layout_id,section_id:e.section_id,section_name:e.section_name,row:e.row,seat_number:e.seat_number,seat_type:e.seat_type,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,shape:e.shape??void 0,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date})),sections:(t.sections||[]).map(e=>({id:e.id,tenant_id:e.tenant_id,layout_id:e.layout_id,name:e.name,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,file_id:e.file_id??void 0,image_url:e.image_url??void 0,canvas_background_color:e.canvas_background_color??void 0,marker_fill_transparency:e.marker_fill_transparency??void 0,shape:e.shape??void 0,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}))}}catch(t){throw t}}async bulkDesignerSave(e,t,n){try{const a=await this.apiClient.post(`${this.endpoints.layouts}/${e}/bulk-save?venue_id=${t}`,{canvas_background_color:n.canvas_background_color,marker_fill_transparency:n.marker_fill_transparency,file_id:n.file_id,sections:n.sections,seats:n.seats},{requiresAuth:!0});return{layout:CO(a.layout),sections:(a.sections||[]).map(e=>({id:e.id,tenant_id:e.tenant_id,layout_id:e.layout_id,name:e.name,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,file_id:e.file_id??void 0,image_url:e.image_url??void 0,canvas_background_color:e.canvas_background_color??void 0,marker_fill_transparency:e.marker_fill_transparency??void 0,shape:e.shape??void 0,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date})),seats:(a.seats||[]).map(e=>({id:e.id,tenant_id:e.tenant_id,venue_id:e.venue_id,layout_id:e.layout_id,section_id:e.section_id,section_name:e.section_name,row:e.row,seat_number:e.seat_number,seat_type:e.seat_type,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,shape:e.shape??void 0,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}))}}catch(a){throw a}}}const NO=p.createContext(null);function _O({children:e,config:t}){const n=p.useMemo(()=>{const e={...{apiClient:Fs,endpoints:{layouts:"/api/v1/ticketing/layouts"}},...t};return new kO(e)},[t]);return c.jsx(NO.Provider,{value:n,children:e})}function EO(){const e=p.useContext(NO);if(!e)throw new Error("useLayoutService must be used within LayoutProvider");return e}function PO(e,t){return Ya({queryKey:["layouts","venue",t],queryFn:()=>e.fetchLayoutsByVenue(t),enabled:!!t})}function AO(e,t){return Ya({queryKey:["layouts",t,"with-seats"],queryFn:()=>e.fetchLayoutWithSeats(t),enabled:!!t,refetchOnMount:!0,refetchOnWindowFocus:!1})}function RO(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateLayout(t,n),onSuccess:e=>{t.invalidateQueries({queryKey:["layouts",e.id]}),t.invalidateQueries({queryKey:["layouts","venue",e.venue_id]})}})}function TO({open:e,onOpenChange:t,onSubmit:n,showId:a,title:s="Create Event",maxWidth:r="720px"}){const i=Us(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),[v,y]=p.useState(null),b=bO(),w=EO(),{data:S}=wO(b,{pagination:{page:1,pageSize:100}}),j=S?.data?.map(e=>({id:e.id,name:e.name}))||[],{data:C}=PO(w,v||null),k=C?.map(e=>({id:e.id,name:e.name,venue_id:e.venue_id}))||[];p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const N=p.useMemo(()=>e=>{const t=new Date(e.start_dt).toISOString();return{show_id:a,title:e.title,start_dt:t,duration_minutes:e.duration_minutes,venue_id:e.venue_id,layout_id:e.layout_id||void 0,status:e.status,configuration_type:e.configuration_type}},[a]),_=()=>{f(!1),x(null),y(null),t(!1)},E={label:u?"Creating...":"Confirm & Create",onClick:async()=>{if(g){h(!0);try{const e=N(g);await n(e),x(null),y(null),f(!1)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},P={label:"Cancel",variant:"outline",disabled:u};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:_,title:s,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{x(null),y(null),d(e=>e+1)},showCancelButton:!0,onCancel:_,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:"space-y-6 mt-12",children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx(mO,{ref:o,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"create",venues:j,layouts:k,onVenueChange:y},l)})})}),c.jsx(bA,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Event Creation",description:g?c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:"Are you sure you want to create this event?"}):void 0,confirmAction:E,cancelAction:P})]})}function MO({open:e,onOpenChange:t,onSubmit:n,event:a,title:s="Edit Event",maxWidth:r="720px"}){const i=Us(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),[v,y]=p.useState(a.venue_id),b=bO(),w=EO(),{data:S}=wO(b,{pagination:{page:1,pageSize:100}}),j=S?.data?.map(e=>({id:e.id,name:e.name}))||[],{data:C}=PO(w,v||null),k=C?.map(e=>({id:e.id,name:e.name,venue_id:e.venue_id}))||[];p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]),p.useEffect(()=>{y(a.venue_id)},[a.venue_id]);const N=p.useMemo(()=>e=>{const t={};e.title!==a.title&&(t.title=e.title);return new Date(e.start_dt).toISOString()!==new Date(a.start_dt).toISOString()&&(t.start_dt=new Date(e.start_dt).toISOString()),e.duration_minutes!==a.duration_minutes&&(t.duration_minutes=e.duration_minutes),e.venue_id!==a.venue_id&&(t.venue_id=e.venue_id),e.layout_id!==(a.layout_id||"")&&(t.layout_id=e.layout_id||void 0),e.status!==a.status&&(t.status=e.status),e.configuration_type!==a.configuration_type&&(t.configuration_type=e.configuration_type),t},[a]),_=()=>{f(!1),x(null),t(!1)},E={title:a.title,start_dt:new Date(a.start_dt).toISOString().slice(0,16),duration_minutes:a.duration_minutes,venue_id:a.venue_id,layout_id:a.layout_id||void 0,status:a.status,configuration_type:a.configuration_type},P={label:u?"Saving...":"Confirm & Save",onClick:async()=>{if(g){h(!0);try{const e=N(g);await n(a.id,e),x(null),f(!1)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},A={label:"Cancel",variant:"outline",disabled:u};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:_,title:s,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{x(null),d(e=>e+1)},showCancelButton:!0,onCancel:_,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:"space-y-6 mt-12",children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx(mO,{ref:o,defaultValues:E,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit",venues:j,layouts:k,onVenueChange:y},l)})})}),c.jsx(bA,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Event Update",description:g?c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:"Are you sure you want to update this event?"}):void 0,confirmAction:P,cancelAction:A})]})}function DO({className:e,shows:t=[],loading:n=!1,pagination:a,onShowClick:s,onDelete:r,onCreate:i,onSearch:o,onPageChange:l,onPageSizeChange:d}){const u=Us(),[h,m]=p.useState(!1),[f,g]=p.useState(null),x=e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},v=[LP({getDisplayName:x,getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:s,additionalOptions:{id:"code"}}),TP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:t??"-"})}}),TP({accessorKey:"organizer_id",header:"Organizer",cell:e=>{const t=e.row.original,n=t.organizer?.name;return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:n??"-"})},additionalOptions:{id:"organizer"}}),TP({accessorKey:"started_date",header:"Show Date From",cell:e=>{const t=e.row.original.started_date;if(!t)return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"});try{const e=new Date(t);return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:e.toLocaleDateString()})}catch{return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"})}}}),TP({accessorKey:"ended_date",header:"Show Date To",cell:e=>{const t=e.row.original.ended_date;if(!t)return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"});try{const e=new Date(t);return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:e.toLocaleDateString()})}catch{return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"})}}})],y=t,b=a?{page:a.page,pageSize:a.pageSize,total:a.total,totalPages:a.totalPages}:void 0,w={label:"Delete",onClick:()=>{f&&r&&r(f),m(!1),g(null)},variant:"destructive"},S={label:"Cancel",onClick:()=>{m(!1),g(null)}};return c.jsxs("div",{className:sl("w-full",e),children:[c.jsx(OP,{data:y,columns:v,useDefaultColumns:!1,title:"Shows",description:"Manage and view shows",onCreate:i,onSearch:o,manualPagination:Boolean(a&&l),serverPagination:b,onPageChange:l,onPageSizeChange:d,loading:n}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||g(null)},title:"Delete Show",description:f?`Are you sure you want to delete "${x(f)}"? This action cannot be undone.`:"Are you sure you want to delete this show?",confirmText:"delete",confirmTextLabel:"Type to confirm",confirmTextPlaceholder:'Type "delete" to confirm',confirmAction:w,cancelAction:S})]})}function LO(e){return{id:e.id,code:e.code||void 0,name:e.name,organizer_id:e.organizer_id||void 0,organizer:e.organizer?{id:e.organizer.id,code:e.organizer.code,name:e.organizer.name}:void 0,started_date:e.started_date||void 0,ended_date:e.ended_date||void 0,note:e.note||void 0,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class FO{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchShows(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.shows.replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(LO),pagination:l}}catch(t){throw t}}async searchShows(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.endpoints.shows.replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(LO)}catch(n){throw n}}async fetchShowById(e){try{const t=this.endpoints.shows.replace(/\/$/,"");return LO(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createShow(e){try{return LO(await this.apiClient.post(this.endpoints.shows,e,{requiresAuth:!0}))}catch(t){throw t}}async updateShow(e,t){try{const n=this.endpoints.shows.replace(/\/$/,"");return LO(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteShow(e){try{const t=this.endpoints.shows.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async fetchShowImages(e){try{const t=this.endpoints.shows.replace(/\/$/,"");return(await this.apiClient.get(`${t}/${e}/images`,{requiresAuth:!0})||[]).map(e=>({...e,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}))}catch(t){throw t}}async createShowImage(e){try{const t=this.endpoints.shows.replace(/\/$/,""),n=await this.apiClient.post(`${t}/${e.show_id}/images`,e,{requiresAuth:!0});return{...n,created_at:n.created_at?new Date(n.created_at):new Date,updated_at:n.updated_at?new Date(n.updated_at):new Date}}catch(t){throw t}}async updateShowImage(e,t,n){try{const a=this.endpoints.shows.replace(/\/$/,""),s=await this.apiClient.put(`${a}/${e}/images/${t}`,n,{requiresAuth:!0});return{...s,created_at:s.created_at?new Date(s.created_at):new Date,updated_at:s.updated_at?new Date(s.updated_at):new Date}}catch(a){throw a}}async deleteShowImage(e,t){try{const n=this.endpoints.shows.replace(/\/$/,"");await this.apiClient.delete(`${n}/${e}/images/${t}`,{requiresAuth:!0})}catch(n){throw n}}}const IO=p.createContext(null);function OO({children:e,config:t}){const n=p.useMemo(()=>new FO(t),[t.apiClient,t.endpoints?.shows]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(IO.Provider,{value:a,children:e})}function zO(){const e=p.useContext(IO);if(!e)throw new Error("useShowService must be used within ShowProvider");return e.service}const BO=ED({name:kD().min(1,"Name is required"),organizer_id:kD().min(1,"Organizer is required"),started_date:kD().optional(),ended_date:kD().optional(),note:kD().optional()}).refine(e=>!e.started_date||!e.ended_date||new Date(e.started_date)<=new Date(e.ended_date),{message:"End date must be after start date",path:["ended_date"]}).transform(e=>e),$O=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:a="create",organizers:s=[]},r){const i=lT({resolver:GT(BO),defaultValues:{name:"",organizer_id:"",started_date:void 0,ended_date:void 0,note:void 0,...e}}),{handleSubmit:o,watch:l,setValue:d,formState:{errors:u,isSubmitted:h}}=i,m=p.useRef(null);p.useEffect(()=>{if(h&&Object.keys(u).length>0){const e=Object.keys(u)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):m.current&&m.current.scrollIntoView({behavior:"smooth",block:"center"})}},[u,h]);const f={name:l("name")??"",organizer_id:l("organizer_id")??"",started_date:l("started_date")??"",ended_date:l("ended_date")??"",note:l("note")??""},g=s.map(e=>({value:e.id,label:e.name}));return c.jsx(oR,{...i,children:c.jsxs("form",{ref:r,id:"show-form",onSubmit:o(async e=>{await t(e)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(vT,{formType:"show",currentValues:f,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{if(null!=t&&""!==t)if("organizer_id"===e){const e=s.find(e=>e.id===t),n=s.find(e=>e.name===t);d("organizer_id",e?e.id:n?n.id:t)}else d(e,t)})},disabled:n})}),c.jsxs("div",{className:sl("grid grid-cols-1 md:grid-cols-2 gap-4"),ref:m,children:[c.jsx(cT,{name:"name",label:"Name",placeholder:"Enter Name",required:!0,disabled:n}),c.jsx(mT,{name:"organizer_id",label:"Organizer",placeholder:"Select an organizer",options:g,required:!0,disabled:n}),c.jsx(uT,{name:"started_date",label:"Start Date",disabled:n}),c.jsx(uT,{name:"ended_date",label:"End Date",disabled:n})]}),c.jsx(yT,{name:"note",label:"Note",placeholder:"Enter notes about the show",rows:4,disabled:n,showImproveButton:!0})]})})});function UO({showId:e,images:t=[],onImagesChange:n,className:a}){const s=zO(),[r,i]=p.useState(t),[o,l]=p.useState(!1),[d,u]=p.useState(new Set),[h,m]=p.useState(null),[f,g]=p.useState(null);p.useEffect(()=>{i(t)},[t]);const x=p.useCallback(async t=>{const a=Array.from(t.target.files||[]);if(0===a.length)return;l(!0);const o=[],c=[];for(const n of a){const t=n.name;u(e=>new Set(e).add(t));try{const t=await GP.uploadImage(n),a={show_id:e,file_id:t.id,name:n.name,description:"",is_banner:!1},r={...await s.createShowImage(a),file_url:t.url};o.push(r)}catch(d){c.push(t)}finally{u(e=>{const n=new Set(e);return n.delete(t),n})}}if(o.length>0){const e=[...r,...o];i(e),n?.(e)}if(c.length>0){const e=o.length,t=e>0?`Successfully uploaded ${e} image(s). ${c.length} image(s) failed to upload.`:`Failed to upload ${c.length} image(s). Please try again.`;alert(t)}l(!1),t.target.value=""},[e,r,s,n]),v=p.useCallback(async t=>{if(confirm("Are you sure you want to delete this image?"))try{await s.deleteShowImage(e,t);const a=r.filter(e=>e.id!==t);i(a),n?.(a)}catch(a){alert("Failed to delete image. Please try again.")}},[e,r,s,n]),y=p.useCallback(e=>{m(e.id),g({name:e.name,description:e.description||"",is_banner:e.is_banner})},[]),b=p.useCallback(async()=>{if(h&&f)try{const t={name:f.name,description:f.description||void 0,is_banner:f.is_banner},a=await s.updateShowImage(e,h,t),o=r.map(e=>e.id===h?a:f.is_banner&&e.is_banner?{...e,is_banner:!1}:e);i(o),n?.(o),m(null),g(null)}catch(t){alert("Failed to update image. Please try again.")}},[h,f,e,r,s,n]),w=p.useCallback(()=>{m(null),g(null)},[]),S=p.useCallback(async(t,a)=>{try{const o=!a,l=await s.updateShowImage(e,t,{is_banner:o}),c=r.map(e=>e.id===t?l:o&&e.is_banner?{...e,is_banner:!1}:e);i(c),n?.(c)}catch(o){alert("Failed to update banner status. Please try again.")}},[e,r,s,n]);return c.jsxs("div",{className:sl("space-y-4",a),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Show Images"}),c.jsxs(Fl,{htmlFor:"image-upload",className:"cursor-pointer",children:[c.jsx(bl,{type:"button",variant:"outline",size:"sm",disabled:o,asChild:!0,children:c.jsx("span",{children:o?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(lx,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})}),c.jsx("input",{id:"image-upload",type:"file",accept:"image/*",multiple:!0,onChange:x,className:"hidden",disabled:o,"aria-label":"Upload show images"})]})]}),d.size>0&&c.jsx("div",{className:"bg-muted p-3 rounded-md",children:c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Uploading ",d.size," file(s):"," ",Array.from(d).join(", ")]})}),0===r.length?c.jsxs(Sl,{className:"p-8 text-center border-dashed",children:[c.jsx(Lf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:'No images uploaded yet. Click "Upload Image" to add images.'})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>c.jsxs(Sl,{className:"overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"relative aspect-video bg-muted",children:[e.file_url?c.jsx("img",{src:e.file_url,alt:e.name,className:"w-full h-full object-cover"}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx(Lf,{className:"h-12 w-12 text-muted-foreground"})}),e.is_banner&&c.jsxs("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs font-semibold flex items-center gap-1",children:[c.jsx(Yg,{className:"h-3 w-3"}),"Banner"]}),c.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:c.jsx(bl,{type:"button",variant:"destructive",size:"sm",onClick:()=>v(e.id),className:"h-6 w-6 p-0",children:c.jsx(xx,{className:"h-3 w-3"})})})]}),c.jsx("div",{className:"p-4 space-y-2 flex flex-col flex-1",children:h===e.id?c.jsxs("div",{className:"space-y-2 flex flex-col flex-1",children:[c.jsxs("div",{children:[c.jsx(Fl,{htmlFor:`name-${e.id}`,className:"text-xs",children:"Name"}),c.jsx(_l,{id:`name-${e.id}`,value:f?.name||"",onChange:e=>g(t=>t?{...t,name:e.target.value}:null),className:"h-8 text-sm"})]}),c.jsxs("div",{children:[c.jsx(Fl,{htmlFor:`desc-${e.id}`,className:"text-xs",children:"Description"}),c.jsx(Dl,{id:`desc-${e.id}`,value:f?.description||"",onChange:e=>g(t=>t?{...t,description:e.target.value}:null),className:"h-16 text-sm",rows:2})]}),c.jsxs("div",{className:"mt-auto pt-2 flex items-center gap-2",children:[c.jsx(VC,{id:`banner-${e.id}`,checked:f?.is_banner||!1,onCheckedChange:e=>g(t=>t?{...t,is_banner:!0===e}:null)}),c.jsx(Fl,{htmlFor:`banner-${e.id}`,className:"text-xs cursor-pointer",children:"Set as banner"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(bl,{type:"button",size:"sm",onClick:b,className:"flex-1",children:"Save"}),c.jsx(bl,{type:"button",size:"sm",variant:"outline",onClick:w,className:"flex-1",children:"Cancel"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),c.jsx(bl,{type:"button",size:"sm",variant:"ghost",onClick:()=>y(e),children:"Edit"})]}),e.description&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx(VC,{id:`banner-check-${e.id}`,checked:e.is_banner,onCheckedChange:()=>S(e.id,e.is_banner)}),c.jsx(Fl,{htmlFor:`banner-check-${e.id}`,className:"text-xs cursor-pointer",children:"Banner"})]})]})})]},e.id))})]})}function VO(e){return{id:e.id,code:e.code,name:e.name,description:e.description,email:e.email,phone:e.phone,website:e.website,address:e.address,city:e.city,country:e.country,logo:e.logo,tags:e.tags||[],created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class qO{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchOrganizers(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.organizers.replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(VO),pagination:l}}catch(t){throw t}}async searchOrganizers(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.endpoints.organizers.replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(VO)}catch(n){throw n}}async fetchOrganizerById(e){try{const t=this.endpoints.organizers.replace(/\/$/,"");return VO(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createOrganizer(e){try{return VO(await this.apiClient.post(this.endpoints.organizers,e,{requiresAuth:!0}))}catch(t){throw t}}async updateOrganizer(e,t){try{const n=this.endpoints.organizers.replace(/\/$/,"");return VO(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteOrganizer(e){try{const t=this.endpoints.organizers.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const HO=p.createContext(null);function GO({children:e,config:t}){const n=p.useMemo(()=>new qO(t),[t.apiClient,t.endpoints?.organizers]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(HO.Provider,{value:a,children:e})}function KO(){const e=p.useContext(HO);if(!e)throw new Error("useOrganizerService must be used within OrganizerProvider");return e.service}function WO(e,t){const{filter:n,pagination:a}=t||{};return Ya({queryKey:["organizers",n?.search,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchOrganizers({skip:t,limit:s,search:n?.search})},staleTime:3e5})}function QO({open:e,onOpenChange:t,onSubmit:n,show:a,title:s="Edit Show",maxWidth:r="720px"}){const i=Us(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=zO(),[y,b]=p.useState([]),w=KO(),{data:S}=WO(w,{pagination:{page:1,pageSize:100}}),j=S?.data?.map(e=>({id:e.id,name:e.name}))||[],C=p.useMemo(()=>{if(a)return{name:a.name??"",organizer_id:a.organizer_id??void 0,started_date:a.started_date??void 0,ended_date:a.ended_date??void 0,note:a.note??void 0}},[a]);p.useEffect(()=>{if(!e||!a)return;(async()=>{try{const e=await v.fetchShowImages(a.id);b(e)}catch(e){}})()},[e,a,v]),p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const k=p.useMemo(()=>(e,t)=>({name:e.name,organizer_id:e.organizer_id||void 0,started_date:e.started_date||void 0,ended_date:e.ended_date||void 0,note:e.note||void 0,images:t.length>0?t:[]}),[]),N=()=>{f(!1),x(null),t(!1)},_={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&a){h(!0);try{const e=y.map(e=>({file_id:e.file_id,name:e.name,description:e.description,is_banner:e.is_banner})),t=k(g,e);await n(a.id,t),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},E={label:"Cancel",variant:"outline",disabled:u};return a?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:N,title:s,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:N,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsxs("div",{className:"space-y-6 mt-12",children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx($O,{ref:o,defaultValues:C,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit",organizers:j},`${a.id}-${l}`)}),a&&c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx(UO,{showId:a.id,images:y,onImagesChange:b})})]})}),c.jsx(bA,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Show Update",description:g?c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:"Are you sure you want to update this show?"}):void 0,confirmAction:_,cancelAction:E})]}):null}function YO(e,t){const{filter:n,pagination:a,enabled:s=!0,disableCache:r=!1}=t||{};return Ya({queryKey:["shows",n?.search,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchShows({skip:t,limit:s,search:n?.search})},enabled:s,staleTime:r?0:3e5})}function XO(e,t){return Ya({queryKey:["shows",t],queryFn:()=>t?e.fetchShowById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function ZO(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateShow(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["shows"]}),t.invalidateQueries({queryKey:["shows",n.id]})}})}function JO({className:e,data:t,loading:n=!1,error:a=null,showMetadata:s=!1,editable:r=!0,onEdit:i,onDelete:o,onAddImage:l,onNavigateToInventory:d,onNavigateToVenue:u,customActions:h}){const[m,f]=p.useState("events"),g=zO(),[x,v]=p.useState([]),[y,b]=p.useState(!1),[w,S]=p.useState(null),[j,C]=p.useState(!1),[k,N]=p.useState(!1),[_,E]=p.useState(!1),[P,A]=p.useState(!1),[R,T]=p.useState(!1),[M,D]=p.useState(!1),[L,F]=p.useState(""),[I,O]=p.useState(!1),z=ZO(g),B=cO(rO());p.useEffect(()=>{void 0!==t?.note&&F(t.note||"")},[t?.note]),p.useEffect(()=>{if(!t?.id)return;(async()=>{b(!0);try{const e=await g.fetchShowImages(t.id);v(e)}catch(e){}finally{b(!1)}})()},[t?.id,g]);const $=p.useCallback(async e=>{t?.id&&S(e)},[]),U=p.useCallback(async()=>{if(t?.id&&w){C(!0);try{await g.deleteShowImage(t.id,w);const e=x.filter(e=>e.id!==w);v(e),S(null)}catch(e){alert("Failed to delete image. Please try again.")}finally{C(!1)}}},[t?.id,w,x,g]),V=p.useCallback(e=>{e||S(null)},[]),q=p.useCallback(async(e,n)=>{if(t?.id)try{const a=!n,s=await g.updateShowImage(t.id,e,{is_banner:a}),r=x.map(t=>t.id===e?s:a&&t.is_banner?{...t,is_banner:!1}:t);v(r)}catch(a){alert("Failed to update banner status. Please try again.")}},[t?.id,x,g]),H=p.useCallback(()=>{i&&t?i(t):t&&A(!0)},[i,t]),G=p.useCallback(()=>{l&&t?l(t):t&&(f("images"),setTimeout(()=>{const e=document.getElementById("show-image-upload-input");e?.click()},100))},[l,t]),K=p.useCallback(()=>{o&&t?o(t):t&&N(!0)},[o,t]),W=p.useCallback(async()=>{if(t?.id){E(!0);try{await g.deleteShow(t.id),N(!1),window.location.href="/ticketing/shows"}catch(e){alert("Failed to delete show. Please try again.")}finally{E(!1)}}},[t?.id,g]),Q=p.useCallback(async(e,t)=>{await z.mutateAsync({id:e,input:t}),A(!1)},[z]),Y=p.useCallback(async e=>{if(!t?.id)return;const n=Array.from(e.target.files||[]);if(0===n.length)return;D(!0);const a=[],s=[];for(const i of n){const e=i.name;try{const e=await GP.uploadImage(i),n={show_id:t.id,file_id:e.id,name:i.name,description:"",is_banner:!1},s={...await g.createShowImage(n),file_url:e.url};a.push(s)}catch(r){s.push(e)}}if(a.length>0){const e=[...x,...a];v(e)}if(s.length>0){const e=a.length,t=e>0?`Successfully uploaded ${e} image(s). ${s.length} image(s) failed to upload.`:`Failed to upload ${s.length} image(s). Please try again.`;alert(t)}D(!1),e.target.value=""},[t?.id,x,g]),X=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()};if(n)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(a)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",a.message]})})});if(!t)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No show selected"})})});const Z=s,J=x.length>0,ee=[{value:"events",label:"Events",icon:Hp},{value:"profile",label:"Overview",icon:Ff},{value:"images",label:"Images"+(J?` (${x.length})`:""),icon:Lf},{value:"note",label:"Notes",icon:jf}];Z&&ee.push({value:"metadata",label:"Metadata",icon:gf}),ee.push({value:"audit",label:"Activity Log",icon:gf});const te=[];return t&&(te.push({id:"add-event",label:"Add Event",icon:c.jsx(jg,{className:"h-3.5 w-3.5"}),onClick:()=>T(!0)}),r&&t&&te.push({id:"edit",label:"Edit",icon:c.jsx(Kg,{className:"h-3.5 w-3.5"}),onClick:H}),te.push({id:"add-image",label:"Add Image",icon:c.jsx(lx,{className:"h-3.5 w-3.5"}),onClick:G})),t&&te.push({id:"delete",label:"Delete",icon:c.jsx(ax,{className:"h-3.5 w-3.5"}),onClick:K}),c.jsxs(Sl,{className:sl("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10 overflow-hidden",children:x.find(e=>e.is_banner)?c.jsx("img",{src:x.find(e=>e.is_banner)?.file_url,alt:"Show Banner",className:"h-full w-full object-cover"}):c.jsx(Ff,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:t.name||"Untitled Show"}),c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code,c.jsx(UL,{value:t.code||"",variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]})]})]}),c.jsx(ST,{actions:te,maxVisibleActions:2,customActions:h?.(t),size:"sm"})]}),c.jsx(UD,{tabs:ee,value:m,onValueChange:e=>f(e),children:e=>c.jsxs("div",{className:"mt-0",children:["events"===e&&t?.id&&c.jsx("div",{className:"space-y-6",children:c.jsx(oz,{showId:t.id,onNavigateToInventory:d,onNavigateToVenue:u})}),"events"===e&&!t?.id&&c.jsx("div",{className:"space-y-6",children:c.jsx(Sl,{children:c.jsx("div",{className:"p-4",children:c.jsx("p",{className:"text-sm text-muted-foreground",children:"Please select a show to view events."})})})}),"profile"===e&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(qD,{showBorder:!0,children:c.jsxs(GD,{columns:2,icon:Ff,title:"General Information",className:"mt-0 mb-0",children:[c.jsx(HD,{label:"Organizer",value:t.organizer?`${t.organizer.name} (${t.organizer.code})`:t.organizer_id,hideIfEmpty:!1}),c.jsx(HD,{label:"Start Date",value:t.started_date,render:e=>X(e),hideIfEmpty:!1}),c.jsx(HD,{label:"End Date",value:t.ended_date,render:e=>X(e),hideIfEmpty:!1})]})}),c.jsx(qD,{showBorder:!0,children:c.jsxs(GD,{columns:2,icon:gf,title:"System Information",className:"mt-0 mb-0",children:[c.jsx(HD,{label:"Created",value:t.created_at,render:e=>X(e),hideIfEmpty:!1}),c.jsx(HD,{label:"Last Updated",value:t.updated_at,render:e=>X(e),hideIfEmpty:!1})]})})]}),"images"===e&&c.jsx(LL,{images:x.map(e=>({id:e.id,url:e.file_url,name:e.name,isBanner:e.is_banner})),isLoading:y,isUploading:M,onUpload:Y,onDelete:e=>$(e.id),onToggleBanner:e=>q(e.id,e.isBanner??!1),readOnly:!r,renderOverlay:(e,t)=>c.jsxs(c.Fragment,{children:[e.isBanner&&c.jsxs("div",{className:"absolute top-1 left-1 bg-primary text-primary-foreground px-2 py-0.5 rounded text-[10px] font-bold flex items-center gap-1 shadow-md z-50 border border-primary/20",children:[c.jsx(Yg,{className:"h-3 w-3 fill-current"}),c.jsx("span",{children:"Banner"})]}),!!r&&c.jsxs("div",{className:sl("absolute bottom-0 right-0 flex items-center justify-end gap-1 p-1 transition-opacity duration-200",t?"opacity-100":"opacity-0 pointer-events-none"),children:[c.jsx(bl,{type:"button",variant:"secondary",size:"sm",onClick:t=>{t.stopPropagation(),q(e.id,e.isBanner??!1)},className:"h-8 w-8 p-0 bg-background hover:bg-background border border-border shadow-md pointer-events-auto",title:e.isBanner?"Unset Banner":"Set as Banner",children:c.jsx(Yg,{className:sl("h-4 w-4",e.isBanner&&"fill-current")})}),c.jsx(bl,{type:"button",variant:"destructive",size:"sm",onClick:t=>{t.stopPropagation(),$(e.id)},className:"h-8 w-8 p-0 bg-destructive hover:bg-destructive text-destructive-foreground opacity-100 hover:opacity-100 shadow-md pointer-events-auto",title:"Delete Image",children:c.jsx(ax,{className:"h-4 w-4"})})]})]})}),"note"===e&&c.jsx("div",{className:"space-y-4",children:c.jsx(KD,{value:L,onChange:F,onSave:async()=>{if(t?.id){O(!0);try{await z.mutateAsync({id:t.id,input:{note:L}})}catch(e){alert("Failed to save note. Please try again."),F(t?.note||"")}finally{O(!1)}}},isSaving:I,disabled:I,editable:r,description:"Add or edit notes about this show",maxLength:2e3})}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(Sl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})}),"audit"===e&&t?.id&&c.jsx("div",{className:"space-y-6",children:c.jsx(rA,{entityType:"show",entityId:t.id,title:"Show Activity",description:"Complete audit trail for this show including all changes, access, and system events"})})]})})]}),c.jsx(bA,{open:!!w,onOpenChange:V,title:"Delete Image",description:"Are you sure you want to delete this image? This action cannot be undone.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:U,loading:j,disabled:j},cancelAction:{label:"Cancel",onClick:()=>{S(null)},disabled:j}}),c.jsx(bA,{open:k,onOpenChange:e=>{N(e)},title:"Delete Show",description:"Are you sure you want to delete this show? This action cannot be undone.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:W,loading:_,disabled:_},cancelAction:{label:"Cancel",onClick:()=>{N(!1)},disabled:_}}),t&&c.jsx(QO,{open:P,onOpenChange:A,onSubmit:Q,show:t,title:"Edit Show"}),t?.id&&c.jsx(TO,{open:R,onOpenChange:T,showId:t.id,onSubmit:async e=>{await B.mutateAsync(e),T(!1)}})]})}function ez({images:e=[],onImagesChange:t,className:n,disabled:a=!1}){const[s,r]=p.useState(e),[i,o]=p.useState(!1),l=p.useCallback(async e=>{const n=Array.from(e.target.files||[]);if(0===n.length)return;o(!0);const a=[];for(const t of n){const e=URL.createObjectURL(t),n={id:`${Date.now()}-${Math.random()}`,file:t,name:t.name,description:"",is_banner:!1,preview:e};a.push(n)}const i=[...s,...a];r(i),t?.(i),o(!1),e.target.value=""},[s,t]),d=p.useCallback(e=>{const n=s.find(t=>t.id===e);n?.preview&&URL.revokeObjectURL(n.preview);const a=s.filter(t=>t.id!==e);r(a),t?.(a)},[s,t]),u=p.useCallback(e=>{const n=s.find(t=>t.id===e);if(!n)return;const a=!n.is_banner,i=s.map(t=>t.id===e?{...t,is_banner:a}:a&&t.is_banner?{...t,is_banner:!1}:t);r(i),t?.(i)},[s,t]);return c.jsxs("div",{className:sl("space-y-4",n),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Show Images"}),c.jsxs(Fl,{htmlFor:"pending-image-upload",className:"cursor-pointer",children:[c.jsx(bl,{type:"button",variant:"outline",size:"sm",disabled:a||i,asChild:!0,children:c.jsx("span",{children:i?c.jsxs(c.Fragment,{children:[c.jsx(Kf,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):c.jsxs(c.Fragment,{children:[c.jsx(lx,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})}),c.jsx("input",{id:"pending-image-upload",type:"file",accept:"image/*",multiple:!0,onChange:l,className:"hidden",disabled:a||i,"aria-label":"Upload show images"})]})]}),0===s.length?c.jsxs(Sl,{className:"p-8 text-center border-dashed",children:[c.jsx(Lf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:'No images selected yet. Click "Upload Images" to add images.'})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>c.jsxs(Sl,{className:"overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"relative aspect-video bg-muted",children:[e.preview?c.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx(Lf,{className:"h-12 w-12 text-muted-foreground"})}),e.is_banner&&c.jsxs("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs font-semibold flex items-center gap-1",children:[c.jsx(Yg,{className:"h-3 w-3"}),"Banner"]}),c.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:c.jsx(bl,{type:"button",variant:"destructive",size:"sm",onClick:()=>d(e.id),className:"h-6 w-6 p-0",disabled:a,children:c.jsx(xx,{className:"h-3 w-3"})})})]}),c.jsxs("div",{className:"p-4 space-y-2 flex flex-col flex-1",children:[c.jsx("div",{className:"flex-1",children:c.jsx("h4",{className:"font-medium text-sm truncate",children:e.name})}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx(VC,{id:`banner-check-${e.id}`,checked:e.is_banner,onCheckedChange:()=>u(e.id),disabled:a}),c.jsx(Fl,{htmlFor:`banner-check-${e.id}`,className:"text-xs cursor-pointer",children:"Banner"})]})]})]},e.id))})]})}function tz({open:e,onOpenChange:t,onSubmit:n,title:a="Create Show",maxWidth:s="720px"}){const r=Us(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null),[x,v]=p.useState([]),[y,b]=p.useState(new Map),w=zO(),S=KO(),{data:j}=WO(S,{pagination:{page:1,pageSize:100}}),C=j?.data?.map(e=>({id:e.id,name:e.name}))||[];p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const k=p.useMemo(()=>(e,t)=>({name:e.name,organizer_id:e.organizer_id||void 0,started_date:e.started_date||void 0,ended_date:e.ended_date||void 0,note:e.note||void 0,images:t.length>0?t:void 0}),[]),N=()=>{m(!1),g(null),x.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),v([]),b(new Map),t(!1)},_={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const t=[];for(const n of x)try{const e=y.get(n.id);if(e)t.push({file_id:e.file_id,name:n.name,description:n.description||void 0,is_banner:n.is_banner});else{const e=await GP.uploadImage(n.file);b(t=>{const a=new Map(t);return a.set(n.id,{file_id:e.id,url:e.url}),a}),t.push({file_id:e.id,name:n.name,description:n.description||void 0,is_banner:n.is_banner})}}catch(e){}const a=k(f,t);await w.createShow(a),x.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),await n(a),g(null),v([]),b(new Map),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},E={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:N,title:a,maxWidth:s,loading:d,formSelector:i,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{g(null),l(e=>e+1)},showCancelButton:!0,onCancel:N,showSubmitButton:!0,onSubmit:()=>{i.current&&i.current.requestSubmit()},children:c.jsxs("div",{className:"space-y-6 mt-12",children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm",r.paddingForm),children:c.jsx($O,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create",organizers:C},o)}),c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm",r.paddingForm),children:c.jsx(ez,{images:x,onImagesChange:v,disabled:d})})]})}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Show Creation",description:f?c.jsx("p",{className:sl("mb-3",r.textSizeSmall),children:"Are you sure you want to create this show?"}):void 0,confirmAction:_,cancelAction:E})]})}function nz({onNavigateToShow:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:a}){const s=zO(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(null),v=f.useRef(!1);f.useEffect(()=>{const e=v.current;n&&!e&&u(!0),v.current=!!n},[n]);const{data:y,isLoading:b,error:w}=YO(s,{filter:r,pagination:o}),S=function(e){const t=Va();return Xa({mutationFn:t=>e.createShow(t),onSuccess:()=>{t.invalidateQueries({queryKey:["shows"]})}})}(s),j=ZO(s),C=y?.data??[],k=y?.pagination,N=p.useCallback(()=>{t&&t(),u(!0)},[t]),_=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),E=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),P=p.useCallback(e=>{l({page:1,pageSize:e})},[]),A=p.useCallback(async e=>{try{await S.mutateAsync(e),Uk({title:"Success",description:"Show created successfully"}),u(!1),a?.()}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create show",variant:"destructive"}),GQ}},[S,a]),R=p.useCallback(async(e,t)=>{try{await j.mutateAsync({id:e,input:t}),Uk({title:"Success",description:"Show updated successfully"}),m(!1),x(null)}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to update show",variant:"destructive"}),GQ}},[j]),T=p.useCallback(t=>{e?.(t.id)},[e]),M=p.useMemo(()=>{if(k)return{page:o.page,pageSize:o.pageSize,total:k.total,totalPages:k.totalPages}},[o,k]);return c.jsxs(c.Fragment,{children:[c.jsx(DO,{shows:C,loading:b,error:w,onShowClick:T,onCreate:N,onSearch:_,pagination:M,onPageChange:E,onPageSizeChange:P}),c.jsx(tz,{open:d,onOpenChange:e=>{u(e),e||a?.()},onSubmit:A}),c.jsx(QO,{open:h&&!!g,onOpenChange:e=>{m(e),e||x(null)},onSubmit:R,show:g})]})}function az({venueId:e,onNavigateToDesigner:t,onEdit:n}){const a=EO(),{data:s,isLoading:r,error:i}=PO(a,e),o=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteLayout(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["layouts"]})}})}(a),l=function(e){const t=Va();return Xa({mutationFn:t=>e.cloneLayout(t.id),onSuccess:e=>{t.invalidateQueries({queryKey:["layouts","venue",e.venue_id]})}})}(a),[d,u]=p.useState(!1),[h,m]=p.useState(null),f=async e=>{m(e),u(!0)},g=e=>{l.mutate(e,{onSuccess:e=>{Uk({title:`Layout "${e.name}" created.`})},onError:e=>{Uk({title:"Failed to clone layout",description:e instanceof Error?e.message:void 0,variant:"destructive"})}})},x=p.useMemo(()=>[{id:"designer",icon:c.jsx(Og,{className:"h-4 w-4"}),title:"Open layout designer",onClick:e=>{t&&t(e.id)},show:!!t},{id:"edit",icon:c.jsx(Kg,{className:"h-4 w-4"}),title:"Edit layout info",onClick:e=>{n&&n(e)},show:!!n},{id:"clone",icon:c.jsx(pf,{className:"h-4 w-4"}),title:"Clone layout",onClick:g,show:!0},{id:"delete",icon:c.jsx(ax,{className:"h-4 w-4"}),title:"Delete layout",onClick:e=>f(e.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",show:!0}],[t,n,f,g]);return r?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx(Kf,{className:"h-6 w-6 animate-spin text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading layouts..."})]})}):i?c.jsx(Sl,{className:"p-6",children:c.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[c.jsx("div",{className:"rounded-full bg-destructive/10 p-3",children:c.jsx(Jf,{className:"h-5 w-5 text-destructive"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-destructive",children:"Error loading layouts"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i instanceof Error?i.message:"Unknown error"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-3",children:s&&0!==s.length?c.jsx("div",{className:"space-y-2",children:s.map(e=>{return c.jsxs(xP,{className:sl("group",!e.is_active&&"opacity-60"),children:[c.jsx(vP,{children:c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(Vf,{className:"h-5 w-5 text-primary"})})}),c.jsx(yP,{className:"min-w-0",children:c.jsx("div",{className:"flex items-start justify-between gap-2",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs(bP,{className:"flex items-center gap-2",children:[c.jsx("span",{className:"truncate",children:e.name}),e.design_mode&&c.jsx(NC,{variant:"secondary",className:"text-xs shrink-0",children:(t=e.design_mode,"seat-level"===t?"Seat Level":"section-level"===t?"Section Level":"Not Set")}),!e.is_active&&c.jsx(NC,{variant:"outline",className:"text-xs shrink-0",children:"Inactive"})]}),e.description&&c.jsx(wP,{className:"line-clamp-2",children:e.description}),!e.description&&c.jsxs(wP,{className:"text-xs",children:["Created"," ",new Date(e.created_at).toLocaleDateString()]})]})})}),c.jsx(jT,{item:e,actions:x})]},e.id);var t})}):c.jsx(Sl,{className:"p-12",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[c.jsx("div",{className:"rounded-full bg-muted p-4",children:c.jsx(Vf,{className:"h-8 w-8 text-muted-foreground"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"No layouts yet"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:'Click "Add Layout" in the header to create your first layout'})]})]})})}),c.jsx(bA,{open:d,onOpenChange:u,title:"Delete Layout",description:"Are you sure you want to delete this layout? This action cannot be undone and will remove all associated seats.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmTextPlaceholder:'Type "delete" to confirm',confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(h)try{await o.mutateAsync(h),u(!1),m(null)}catch(e){}},loading:o.isPending},cancelAction:{label:"Cancel"}})]})}function sz({eventSeats:e,isLoading:t=!1,onRefresh:n,className:a}){const[s,r]=p.useState(""),[i,o]=p.useState(new Set),[l,d]=p.useState(""),[u,h]=p.useState(new Set),[m,f]=p.useState(""),g=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{e.section_name&&t.add(e.section_name)}),Array.from(t).sort()},[e]),x=p.useMemo(()=>{if(!l.trim())return g;const e=l.toLowerCase();return g.filter(t=>t.toLowerCase().includes(e))},[g,l]),v=(e,t)=>"held"===e||"blocked"===e?e:t||e,y=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{const n=v(e.status,e.ticket_status);n&&t.add(String(n))}),Array.from(t).sort((e,t)=>e.localeCompare(t))},[e]),b=p.useMemo(()=>{if(!m.trim())return y;const e=m.toLowerCase();return y.filter(t=>t.toLowerCase().includes(e))},[y,m]),w=p.useMemo(()=>e.filter(e=>{if(i.size>0&&e.section_name&&!i.has(e.section_name))return!1;if(u.size>0){const t=v(e.status,e.ticket_status);if(!t||!u.has(String(t)))return!1}if(!s.trim())return!0;const t=s.toLowerCase();return e.section_name?.toLowerCase().includes(t)||e.row_name?.toLowerCase().includes(t)||e.seat_number?.toLowerCase().includes(t)||e.ticket_number?.toLowerCase().includes(t)||!1}),[e,i,u,s]),S=p.useMemo(()=>{const e=new Map;w.forEach(t=>{const n=t.section_name||"Unknown Section";e.has(n)||e.set(n,[]),e.get(n).push(t)});return Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0]))},[w]),j=e=>{if(e.ticket_status){switch(String(e.ticket_status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"CONFIRMED":return"border-l-4 border-l-blue-500";case"CANCELLED":return"border-l-4 border-l-red-500";case"USED":return"border-l-4 border-l-gray-500";case"TRANSFERRED":return"border-l-4 border-l-purple-500"}}switch(String(e.status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"SOLD":return"border-l-4 border-l-blue-500";case"HELD":return"border-l-4 border-l-purple-500";case"BLOCKED":return"border-l-4 border-l-red-500";default:return"border-l-4 border-l-gray-500"}},C=(e,t)=>{const n=v(e,t),a=String(n).toUpperCase().trim();return c.jsx(NC,{variant:{AVAILABLE:"outline",RESERVED:"outline",SOLD:"default",CONFIRMED:"default",CANCELLED:"destructive",USED:"secondary",TRANSFERRED:"outline",HELD:"outline",BLOCKED:"destructive"}[a]||"outline",className:{AVAILABLE:"bg-green-50 text-green-700 border-green-200",RESERVED:"bg-yellow-50 text-yellow-700 border-yellow-200",SOLD:"bg-blue-50 text-blue-700 border-blue-200",CONFIRMED:"bg-blue-50 text-blue-700 border-blue-200",CANCELLED:"bg-red-50 text-red-700 border-red-200",USED:"bg-gray-50 text-gray-700 border-gray-200",TRANSFERRED:"bg-purple-50 text-purple-700 border-purple-200",HELD:"bg-purple-50 text-purple-700 border-purple-200",BLOCKED:"bg-red-50 text-red-700 border-red-200"}[a]||"bg-gray-50 text-gray-700 border-gray-200",children:n})};return t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading seats..."})}):0===e.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx("p",{className:"text-muted-foreground mb-4",children:"No seats found"}),n&&c.jsxs(bl,{onClick:n,variant:"outline",size:"sm",children:[c.jsx(Ag,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}):c.jsxs("div",{className:sl("space-y-4 min-w-0",a),children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-wrap",children:[c.jsxs("div",{className:"relative flex-1 min-w-0 max-w-xs",children:[c.jsx(Ig,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none z-10"}),c.jsx(_l,{placeholder:"Search seats...",value:s,onChange:e=>r(e.target.value),className:"pl-8 h-8 text-sm min-w-0"})]}),c.jsx(jP,{items:x,selectedItems:i,searchQuery:l,onSearchQueryChange:d,onToggleItem:e=>{const t=new Set(i);t.has(e)?t.delete(e):t.add(e),o(t)},onClear:()=>{o(new Set)},label:"Sections",searchPlaceholder:"Search sections...",emptyText:"No sections found."}),c.jsx(jP,{items:b,selectedItems:u,searchQuery:m,onSearchQueryChange:f,onToggleItem:e=>{const t=new Set(u);t.has(e)?t.delete(e):t.add(e),h(t)},onClear:()=>{h(new Set)},label:"Status",searchPlaceholder:"Search status...",emptyText:"No status found."}),n&&c.jsx(bl,{onClick:n,variant:"outline",size:"sm",className:"flex-shrink-0 h-7 px-2",children:c.jsx(Ag,{className:"h-3 w-3"})})]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",w.length," of ",e.length," seats"]}),c.jsx("div",{className:"space-y-4 min-w-0",children:S.map(([e,t])=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b pb-2 pt-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-semibold text-foreground",children:e}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.length," seat",1!==t.length?"s":""]})]})}),c.jsx("div",{className:"space-y-2 pl-2",children:t.map(e=>{const t=e.row_name&&e.seat_number?`${e.row_name} ${e.seat_number}`:e.seat_id?`Seat ${e.seat_id.slice(0,8)}`:"N/A",n=void 0!==e.ticket_price&&null!==e.ticket_price?`Price: $${e.ticket_price.toFixed(2)}`:null,a=[e.broker_id&&`Broker: ${e.broker_id}`,e.ticket_number&&`Ticket: ${e.ticket_number}`,n].filter(Boolean).join("  ");return c.jsx(xP,{className:sl(j(e),"min-w-0"),children:c.jsx(yP,{className:"min-w-0",children:c.jsx("div",{className:"flex items-start justify-between gap-4 min-w-0",children:c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(bP,{className:"truncate",children:t}),C(e.status,e.ticket_status)]}),a&&c.jsx(wP,{className:"truncate",children:a})]})})})},e.id)})})]},e))})]})}function rz({className:e,data:t,loading:n=!1,error:a=null}){const[s,r]=p.useState("information"),i=zO(),o=EO(),l=rO(),{data:d}=XO(i,t?.show_id||null),{data:u}=(h=o,Ya({queryKey:["layouts",m=t?.layout_id||null],queryFn:()=>h.fetchLayoutById(m),enabled:!!m}));var h,m;const{data:f,isLoading:g,refetch:x}=uO(l,t?.id,{skip:0,limit:1e3}),v=f?.data||[],y=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},b=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`},w=e=>{switch(e){case ZI.SEAT_SETUP:return"Seat Setup";case ZI.TICKET_IMPORT:return"Ticket Import";default:return e}},S=e=>{if(null==e)return"N/A";if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){const t=e.trim();if(!t)return"N/A";const n=new Date(t);return Number.isNaN(n.getTime())?t:n.toLocaleString()}if("number"==typeof e||"boolean"==typeof e)return String(e);try{return JSON.stringify(e)}catch{return String(e)}};if(n)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(a)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",a.message]})})});if(!t)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No event selected"})})});const j=[{value:"information",label:"Information",icon:Ff},{value:"inventory-view",label:"Inventory",icon:Sf}];return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{children:c.jsx(UD,{tabs:j,value:s,onValueChange:e=>r(e),children:e=>c.jsxs("div",{className:"mt-0",children:[c.jsxs("div",{className:sl("space-y-6","information"!==e&&"hidden"),children:[c.jsxs(GD,{title:"Event Information",columns:2,className:"pb-6 border-b",children:[c.jsx(HD,{label:"Start Date & Time",value:y(t.start_dt),icon:Hp}),c.jsx(HD,{label:"Duration",value:b(t.duration_minutes),icon:hf})]}),c.jsxs(GD,{title:"Location & Configuration",columns:2,className:"pb-6 border-b",children:[c.jsx(HD,{label:"Layout",value:u?.name||(t.layout_id?S(t.layout_id):null)}),c.jsx(HD,{label:"Show",value:d?.name||d?.code||S(t.show_id)}),c.jsx(HD,{label:"Configuration Type",value:w(t.configuration_type),icon:Og})]}),c.jsxs(GD,{title:"Timeline",columns:2,className:"pb-6 border-b",children:[c.jsx(HD,{label:"Created",value:t.created_at?y(t.created_at):null}),c.jsx(HD,{label:"Last Updated",value:t.updated_at?y(t.updated_at):null})]}),c.jsx(GD,{title:"System Metadata",icon:gf,columns:2,className:"pt-6 border-t mt-6",children:c.jsx(HD,{label:"Tenant ID",value:S(t.tenant_id),valueClassName:"font-mono"})})]}),c.jsx("div",{className:sl("inventory-view"!==e&&"hidden"),children:c.jsx(sz,{eventSeats:v,isLoading:g,onRefresh:x})})]})})})})}function iz({open:e,onOpenChange:t,data:n,loading:a,error:s}){return c.jsx(CE,{open:e,onOpenChange:t,children:c.jsxs(EE,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0",style:{width:"600px",maxWidth:"740px"},children:[c.jsx(PE,{className:"px-6 py-2 ml-6 border-b",children:c.jsx(RE,{children:n?.title||"Event Details"})}),c.jsx("div",{className:"flex-1 overflow-y-auto pl-6 pr-8",children:c.jsx(rz,{data:n,loading:a,error:s,className:"border-0 shadow-none p-0"})})]})})}function oz({showId:e,className:t,onNavigateToEvent:n,onNavigateToInventory:a,onNavigateToVenue:s}){const r=rO(),[i,o]=p.useState(1),[l,d]=p.useState(50),[u,h]=p.useState(""),[m,f]=p.useState(!1),[g,x]=p.useState(!1),[v,y]=p.useState(null),[b,w]=p.useState(!1),[S,j]=p.useState(null),{data:C,isLoading:k,error:N}=iO(r,{filter:{show_id:e,search:u||void 0},pagination:{page:i,pageSize:l,total:0,totalPages:0}}),_=cO(r),E=dO(r),P=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteEvent(t),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]})}})}(r),A=p.useCallback(()=>{f(!0)},[]),R=p.useCallback(async e=>{await _.mutateAsync(e),f(!1)},[_]),T=p.useCallback(e=>{y(e),x(!0)},[]),M=p.useCallback(async(e,t)=>{await E.mutateAsync({id:e,input:t}),x(!1),y(null)},[E]),D=p.useCallback(async e=>{await P.mutateAsync(e.id)},[P]),L=p.useCallback(async(e,t)=>{await E.mutateAsync({id:e.id,input:{status:t}})},[E]),F=p.useCallback(e=>{j(e.id),w(!0),n&&n(e.id)},[n]),I=p.useCallback(e=>{o(e)},[]),O=p.useCallback(e=>{d(e),o(1)},[]),z=p.useCallback(e=>{h(e),o(1)},[]),B=p.useCallback(()=>{f(!1)},[]),$=p.useCallback(()=>{x(!1),y(null)},[]),U=p.useCallback(()=>{w(!1),j(null)},[]),V=p.useCallback(e=>{a?a(e.id):window.location.href=`/ticketing/events/${e.id}/inventory`},[a]),q=p.useCallback(e=>{s?s(e):window.location.href=`/ticketing/venues/${e}`},[s]),{data:H,isLoading:G,error:K}=oO(r,S);return c.jsxs("div",{className:t,children:[c.jsx(fO,{events:C?.data||[],loading:k,error:N,pagination:C?.pagination,onCreate:A,onEdit:T,onDelete:D,onManageInventory:V,onStatusChange:L,onEventClick:F,onVenueClick:q,onSearch:z,onPageChange:I,onPageSizeChange:O,isDeleting:P.isPending}),c.jsx(TO,{open:m,onOpenChange:B,onSubmit:R,showId:e}),v&&c.jsx(MO,{open:g,onOpenChange:$,onSubmit:M,event:v}),c.jsx(iz,{open:b,onOpenChange:U,data:H||void 0,loading:G,error:K})]})}function lz({open:e,onClose:t,onSubmit:n,layoutSeats:a,sections:s,existingEventSeats:r=[],loading:i=!1,designMode:o="seat-level",selectedSectionId:l}){const[d,u]=p.useState("all"),[h,m]=p.useState(new Set),[f,g]=p.useState(new Set),[x,v]=p.useState(""),[y,b]=p.useState(1),[w,S]=p.useState(new Set),j=50,C="section-level"===o?"per_section":"same",{register:k,handleSubmit:N,watch:_,control:E,getValues:P,setValue:A,formState:{errors:R},reset:T}=lT({defaultValues:{defaultPrice:"0",generateTicketCodes:!1,pricingMode:C,sectionPricing:[],seatPricing:[],sectionSelection:"all",selectedSectionIds:[]}}),{fields:M,append:D,remove:L}=oT({control:E,name:"sectionPricing"}),{fields:F,append:I,remove:O}=oT({control:E,name:"seatPricing"}),z=_("defaultPrice"),B=_("generateTicketCodes"),$=_("pricingMode"),U=p.useMemo(()=>"section-level"===o&&l&&s.some(e=>e.id===l)?s.filter(e=>e.id===l):s,[s,o,l]),V=p.useMemo(()=>{const e=new Map;return U.forEach(t=>{e.set(t.id,t.name)}),e},[U]),q=p.useMemo(()=>{const e=new Set,t=new Set;return r.forEach(n=>{if(n.seat_id&&e.add(n.seat_id),n.section_name&&n.row_name&&n.seat_number){const e=`${n.section_name}|${n.row_name}|${n.seat_number}`;t.add(e)}}),{seatIdSet:e,locationSet:t}},[r]),H=p.useMemo(()=>"section-level"===o&&l&&a.some(e=>e.section_id===l)?a.filter(e=>e.section_id===l):a,[a,o,l]),G=p.useMemo(()=>H.filter(e=>{if(e.id&&q.seatIdSet.has(e.id))return!1;const t=V.get(e.section_id);if(t&&e.row&&e.seat_number){const n=`${t}|${e.row}|${e.seat_number}`;if(q.locationSet.has(n))return!1}return!0}),[H,q,V]),K=p.useMemo(()=>G.filter(e=>{if("include"===d&&h.size>0){if(!h.has(e.section_id))return!1}else if("exclude"===d&&h.size>0&&h.has(e.section_id))return!1;return!0}),[G,d,h]),W=p.useMemo(()=>{const e=new Map;return G.forEach(t=>{const n=e.get(t.section_id);n?n.count+=1:e.set(t.section_id,{id:t.section_id,count:1})}),Array.from(e.entries()).map(([e,t])=>({sectionId:e,sectionName:V.get(e)||"Unknown",count:t.count})).sort((e,t)=>e.sectionName.localeCompare(t.sectionName))},[G,V]),Q=p.useMemo(()=>{const e=new Map;return K.forEach(t=>{const n=e.get(t.section_id);n?n.count+=1:e.set(t.section_id,{id:t.section_id,count:1})}),Array.from(e.entries()).map(([e,t])=>({sectionId:e,sectionName:V.get(e)||"Unknown",count:t.count})).sort((e,t)=>e.sectionName.localeCompare(t.sectionName))},[K,V]),Y=H.length,X=K.length,Z=Y-X,J=X>0,ee=p.useCallback(e=>{if(!x.trim())return e;const t=x.toLowerCase().trim();return e.filter(e=>`${e.row?.toLowerCase()||""} ${e.seat_number?.toLowerCase()||""} ${V.get(e.section_id)?.toLowerCase()||""}`.includes(t))},[x,V]),te=p.useCallback(e=>{const t=(y-1)*j,n=t+j;return e.slice(t,n)},[y,j]),ne=p.useMemo(()=>{const e=new Map;return K.forEach(t=>{const n=e.get(t.section_id)||[];n.push(t),e.set(t.section_id,n)}),e},[K]);p.useEffect(()=>{if(e){const e="section-level"===o?"per_section":"same",t="section-level"===o&&l,n=t?"include":"all",a=t&&l?new Set([l]):new Set;T({defaultPrice:"0",generateTicketCodes:!1,pricingMode:e,sectionPricing:[],seatPricing:[],sectionSelection:n,selectedSectionIds:t&&l?[l]:[]}),u(n),m(a),g(new Set),v(""),b(1),S(new Set)}},[e,o,l]),p.useEffect(()=>{e&&"section-level"===o&&"per_section"===$&&0===M.length&&Q.forEach(e=>{D({section_id:e.sectionId,price:z||"0"})})},[e,o,$,Q]),p.useEffect(()=>{if("exclude"===d&&"per_section"===$&&h.size>0){const e=[];M.forEach((t,n)=>{h.has(t.section_id)&&e.push(n)}),e.reverse().forEach(e=>{L(e)})}},[d,h,$]);const ae=e=>{"per_section"===e&&0===M.length&&Q.forEach(e=>{D({section_id:e.sectionId,price:z||"0"})})},se=e=>{const t=F.find(t=>t.seat_id===e.id);if(t)return t.price;if("per_section"===$){const t=M.find(t=>t.section_id===e.section_id);if(t)return t.price}return z||"0"},re=(e,t)=>{const n=F.findIndex(t=>t.seat_id===e);n>=0?A(`seatPricing.${n}.price`,t,{shouldValidate:!0,shouldDirty:!0}):I({seat_id:e,price:t})},ie=e=>{const t=F.findIndex(t=>t.seat_id===e);t>=0&&O(t)};return c.jsx(yA,{open:e,onClose:t,title:J?`Add ${X} Missing Seats`:"Initialize Event Seats",loading:i,onSubmit:N(async e=>{const t={defaultPrice:parseFloat(e.defaultPrice)||0,generateTicketCodes:e.generateTicketCodes,pricingMode:e.pricingMode,sectionPricing:"per_section"===e.pricingMode?e.sectionPricing.map(e=>({section_id:e.section_id,price:parseFloat(e.price)||0})):void 0,seatPricing:e.seatPricing.length>0?e.seatPricing.map(e=>({seat_id:e.seat_id,price:parseFloat(e.price)||0})):void 0,includedSectionIds:"include"===d&&h.size>0?Array.from(h):void 0,excludedSectionIds:"exclude"===d&&h.size>0?Array.from(h):void 0};await n(t)}),showCancelButton:!0,showSubmitButton:!0,showClearButton:!1,maxWidth:"1200px",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx(Sl,{className:"p-4 bg-blue-50 border-blue-200",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ff,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:J?"Add Seats to Event":"Initialize Seats from Layout"}),c.jsx("p",{className:"text-sm text-blue-800",children:J?c.jsxs(c.Fragment,{children:["There ",1===X?"is":"are"," ",X," seat",1!==X?"s":""," ","in the layout that"," ",1===X?"hasn't":"haven't"," been added to this event yet.",Z>0&&c.jsxs(c.Fragment,{children:[" ",Z," seat",1!==Z?"s are":" is"," already assigned."]})]}):c.jsxs(c.Fragment,{children:["This will create ",Y," event seat",1!==Y?"s":""," from the layout seats. You can set pricing per section and configure ticket generation."]})})]})]})}),c.jsxs(Sl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Seat Summary"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Total Layout Seats:"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(NC,{variant:"outline",className:"text-xs",children:Y})})]}),J&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Already Assigned:"}),c.jsx(NC,{variant:"outline",children:Z})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[c.jsx(jg,{className:"h-4 w-4 text-green-600"}),"Seats to Add:"]}),c.jsx(NC,{className:"bg-green-600 text-white",children:X})]})]}),c.jsxs("div",{className:"border-t pt-2",children:[c.jsx("p",{className:"text-sm font-medium mb-2",children:J?"Missing Seats by Section:":"Seats by Section:"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Q.map(({sectionId:e,sectionName:t,count:n})=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground",children:[t,":"]}),c.jsx("span",{className:"font-medium",children:n})]},e))})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[!("section-level"===o&&l)&&c.jsxs(Sl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-4",children:"Section Selection"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{children:"Select Sections"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"sectionSelection",value:"all",checked:"all"===d,onChange:()=>{u("all"),m(new Set),"per_section"===$&&(M.forEach(()=>{L(0)}),Q.forEach(e=>{D({section_id:e.sectionId,price:z||"0"})}))},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"All Sections"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"sectionSelection",value:"include",checked:"include"===d,onChange:()=>{u("include"),"per_section"===$&&M.forEach(()=>{L(0)})},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Include Specific Sections"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"sectionSelection",value:"exclude",checked:"exclude"===d,onChange:()=>{u("exclude"),"per_section"===$&&h.size>0&&h.forEach(e=>{const t=M.findIndex(t=>t.section_id===e);t>=0&&L(t)})},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Exclude Specific Sections"})]})]})]}),("include"===d||"exclude"===d)&&c.jsx("div",{className:"border rounded-lg p-3 max-h-48 overflow-y-auto",children:W.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:W.map(({sectionId:e,sectionName:t,count:n})=>{const a="exclude"===d&&h.has(e);return c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-muted "+(a?"opacity-50":""),children:[c.jsx("input",{type:"checkbox",checked:h.has(e),onChange:()=>(e=>{const t=new Set(h);if(t.has(e))t.delete(e),"exclude"===d&&"per_section"===$&&Q.find(t=>t.sectionId===e)&&M.findIndex(t=>t.section_id===e)<0&&D({section_id:e,price:z||"0"});else if(t.add(e),"exclude"===d&&"per_section"===$){const t=M.findIndex(t=>t.section_id===e);t>=0&&L(t)}m(t)})(e),className:"h-4 w-4"}),c.jsxs("span",{className:"text-sm",children:[t," (",n," seats)"]})]},e)})}),"exclude"===d&&h.size>0&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[h.size," section",1!==h.size?"s":""," will be excluded from initialization"]}),"include"===d&&h.size>0&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Only ",h.size," selected section",1!==h.size?"s":""," will be included"]})]}):c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"All seats have already been initialized. No sections available for selection."})})]})]}),"section-level"===o&&l&&c.jsx(Sl,{className:"p-4 bg-blue-50 border-blue-200",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ff,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Initializing Seats for Selected Section"}),c.jsx("p",{className:"text-sm text-blue-800",children:"You are initializing seats for the selected section only. Only seats from this section will be added to the event."})]})]})}),c.jsxs(Sl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-4",children:"Pricing Configuration"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{children:"Pricing Mode"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",...k("pricingMode"),value:"same",onChange:e=>{k("pricingMode").onChange(e),ae("same")},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Same Price for All Sections"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",...k("pricingMode"),value:"per_section",onChange:e=>{k("pricingMode").onChange(e),ae("per_section")},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Different Price per Section"})]})]})]}),"same"===$&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"defaultPrice",className:"flex items-center gap-2",children:[c.jsx(xf,{className:"h-4 w-4"}),"Price (per seat)"]}),c.jsx(_l,{id:"defaultPrice",type:"number",step:"0.01",min:"0",placeholder:"0.00",...k("defaultPrice",{required:"Price is required",min:{value:0,message:"Price must be 0 or greater"},valueAsNumber:!1})}),R.defaultPrice&&c.jsx("p",{className:"text-sm text-destructive",children:R.defaultPrice.message})]}),"per_section"===$&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Fl,{children:"Section Prices"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Set prices per section. Expand sections to set individual seat prices."})]}),c.jsx("div",{className:"space-y-2 border rounded-lg p-3",children:Q.map(e=>{const t=M.findIndex(t=>t.section_id===e.sectionId),n=ne.get(e.sectionId)||[],a=f.has(e.sectionId),s=F.some(e=>n.some(t=>t.id===e.seat_id));return c.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:()=>(e=>{const t=new Set(f);t.has(e)?t.delete(e):t.add(e),g(t)})(e.sectionId),className:"flex items-center gap-2 hover:bg-muted p-1 rounded",children:a?c.jsx(Xp,{className:"h-4 w-4"}):c.jsx(Jp,{className:"h-4 w-4"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs(Fl,{className:"text-sm font-medium flex items-center gap-2",children:[e.sectionName,s&&c.jsx(NC,{variant:"outline",className:"text-xs",children:"Custom Prices"})]}),t>=0?c.jsx(_l,{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"mt-1",...k(`sectionPricing.${t}.price`,{required:"Price is required",min:{value:0,message:"Price must be 0 or greater"},valueAsNumber:!1})}):c.jsx(_l,{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"mt-1",value:z||"0",onChange:n=>{t<0&&D({section_id:e.sectionId,price:n.target.value})}})]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.count," seats"]})]}),a&&n.length>0&&c.jsxs("div",{className:"ml-8 space-y-2 border-t pt-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs(Fl,{className:"text-xs text-muted-foreground",children:["Individual Seat Prices (optional overrides)",n.length>50&&c.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",n.length," seats)"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[n.length>50&&c.jsx(bl,{type:"button",variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{const e=n.filter(e=>w.has(e.id));if(0===e.length){const e=ee(n);S(new Set(e.map(e=>e.id)))}else{let n=z||"0";if(t>=0){const e=P(`sectionPricing.${t}.price`);n=e||M[t]?.price||z||"0"}e.forEach(e=>{re(e.id,n)}),S(new Set)}},children:w.size>0?`Apply to ${w.size} Selected`:"Select All Visible"}),c.jsx(bl,{type:"button",variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{let e=z||"0";if(t>=0){const n=P(`sectionPricing.${t}.price`);e=n||M[t]?.price||z||"0"}n.forEach(t=>{re(t.id,e)})},children:"Apply Section Price to All"})]})]}),n.length>50&&c.jsxs("div",{className:"relative mb-2",children:[c.jsx(Ig,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(_l,{type:"text",placeholder:"Search by row, seat number, or section...",value:x,onChange:e=>{v(e.target.value),b(1)},className:"pl-8 h-8 text-xs"})]}),(()=>{const e=ee(n),t=n.length>50?te(e):e,a=Math.ceil(e.length/j);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2 max-h-64 overflow-y-auto",children:t.map(e=>{const t=F.findIndex(t=>t.seat_id===e.id),a=se(e),s=t>=0,r=w.has(e.id);return c.jsxs("div",{className:`flex items-center gap-1.5 p-1.5 rounded border ${s?"bg-blue-50 border-blue-200":""} ${r?"ring-2 ring-blue-500 border-blue-500":""}`,children:[n.length>50&&c.jsx("input",{type:"checkbox",checked:r,onChange:t=>{const n=new Set(w);t.target.checked?n.add(e.id):n.delete(e.id),S(n)},className:"h-3 w-3 flex-shrink-0",onClick:e=>e.stopPropagation(),"aria-label":`Select seat ${e.row}-${e.seat_number}`,title:`Select seat ${e.row}-${e.seat_number}`}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs(Fl,{className:"text-xs text-muted-foreground truncate mb-0.5 block",children:[e.row,"-",e.seat_number]}),c.jsx(_l,{type:"number",step:"0.01",min:"0",placeholder:a,className:"h-7 text-xs py-1 px-2",value:t>=0&&(_(`seatPricing.${t}.price`)||F[t]?.price)||"",onChange:n=>{const a=n.target.value;a&&""!==a?t>=0?A(`seatPricing.${t}.price`,a,{shouldValidate:!0,shouldDirty:!0}):re(e.id,a):t>=0&&ie(e.id)}})]}),s&&c.jsx(bl,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0 flex-shrink-0",onClick:()=>ie(e.id),title:"Remove override (use section price)",children:c.jsx(xx,{className:"h-3 w-3"})})]},e.id)})}),n.length>50&&e.length>j&&c.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t",children:[c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Showing"," ",(y-1)*j+1,"-",Math.min(y*j,e.length)," ","of ",e.length," seats",x&&c.jsxs("span",{className:"ml-1",children:["(filtered from"," ",n.length,")"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(bl,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===y,children:c.jsx(Zp,{className:"h-3 w-3"})}),c.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:["Page ",y," of ",a]}),c.jsx(bl,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>b(e=>Math.min(a,e+1)),disabled:y===a,children:c.jsx(Jp,{className:"h-3 w-3"})})]})]}),x&&0===e.length&&c.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground",children:['No seats found matching "',x,'"']})]})})()]})]},e.sectionId)})}),0===Q.length&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"No sections available. All seats may already be assigned."})]})]})]}),c.jsxs(Sl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-4",children:"Ticket Options"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"generateTicketCodes",...k("generateTicketCodes"),className:"h-4 w-4 rounded border-gray-300"}),c.jsxs(Fl,{htmlFor:"generateTicketCodes",className:"flex items-center gap-2 cursor-pointer",children:[c.jsx(nx,{className:"h-4 w-4"}),"Generate Tickets"]})]}),B&&c.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Tickets will be created for all seats with AVAILABLE status, ready for sale. Ticket numbers will be generated automatically."}),!B&&c.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Seats will be created without tickets. Tickets can be created later from the seat list."})]})]}),c.jsxs(Sl,{className:"p-4 bg-muted/50",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Preview"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{className:"text-muted-foreground",children:["Seats to ",J?"add":"create",":"]}),c.jsx("span",{className:"font-medium",children:X})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Pricing Mode:"}),c.jsx("span",{className:"font-medium",children:"same"===$?"Same Price":"Per Section"})]}),"same"===$&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Price:"}),c.jsxs("span",{className:"font-medium",children:["$",parseFloat(z||"0").toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Generate Tickets:"}),c.jsx("span",{className:"font-medium",children:B?"Yes":"No"})]}),c.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t",children:[c.jsx("span",{children:"Total value:"}),c.jsxs("span",{children:["$",(()=>{let e=0;return K.forEach(t=>{const n=se(t);e+=parseFloat(n||"0")}),e})().toFixed(2)]})]})]})]})]})]})})}function cz({open:e,onOpenChange:t,onSubmit:n,loading:a=!1}){const[s,r]=p.useState({section_name:"",row_name:"",seat_number:"",ticket_price:0,ticket_number:"",broker_id:"",create_ticket:!1}),[i,o]=p.useState({}),l=(e,t)=>{r(n=>({...n,[e]:t})),i[e]&&o(t=>{const n={...t};return delete n[e],n})},d=()=>{a||(r({section_name:"",row_name:"",seat_number:"",ticket_price:0,ticket_number:"",broker_id:"",create_ticket:!1}),o({}),t(!1))};return c.jsx(ub,{open:e,onOpenChange:d,children:c.jsxs(pb,{className:"sm:max-w-[500px]",children:[c.jsx(fb,{children:c.jsx(xb,{children:"Create Event Seat"})}),c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return s.seat_id||s.section_name&&s.row_name&&s.seat_number||s.seat_id||(s.section_name||(e.section_name="Section name is required"),s.row_name||(e.row_name="Row name is required"),s.seat_number||(e.seat_number="Seat number is required")),s.create_ticket&&s.ticket_price<0&&(e.ticket_price="Ticket price cannot be negative"),o(e),0===Object.keys(e).length})())try{const e={...s,seat_id:s.seat_id||void 0,section_name:s.section_name||void 0,row_name:s.row_name||void 0,seat_number:s.seat_number||void 0,ticket_number:s.ticket_number||void 0,broker_id:s.broker_id||void 0,ticket_price:s.ticket_price||0};await n(e),r({section_name:"",row_name:"",seat_number:"",ticket_price:0,ticket_number:"",broker_id:"",create_ticket:!1}),o({})}catch(t){}},children:[c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"seat_id",children:"Seat ID (Optional)"}),c.jsx(_l,{id:"seat_id",value:s.seat_id||"",onChange:e=>l("seat_id",e.target.value),placeholder:"Reference to venue seat",disabled:a}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"If provided, seat location will be taken from the venue seat"})]}),!s.seat_id&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"section_name",children:["Section Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"section_name",value:s.section_name||"",onChange:e=>l("section_name",e.target.value),placeholder:"e.g., Section A",disabled:a,className:sl(i.section_name&&"border-destructive")}),i.section_name&&c.jsx("p",{className:"text-xs text-destructive",children:i.section_name})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"row_name",children:["Row Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"row_name",value:s.row_name||"",onChange:e=>l("row_name",e.target.value),placeholder:"e.g., Row 1",disabled:a,className:sl(i.row_name&&"border-destructive")}),i.row_name&&c.jsx("p",{className:"text-xs text-destructive",children:i.row_name})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"seat_number",children:["Seat Number ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"seat_number",value:s.seat_number||"",onChange:e=>l("seat_number",e.target.value),placeholder:"e.g., 1, 2, 3",disabled:a,className:sl(i.seat_number&&"border-destructive")}),i.seat_number&&c.jsx("p",{className:"text-xs text-destructive",children:i.seat_number})]})]}),s.create_ticket&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"ticket_price",children:"Ticket Price"}),c.jsx(_l,{id:"ticket_price",type:"number",step:"0.01",min:"0",value:s.ticket_price||0,onChange:e=>l("ticket_price",parseFloat(e.target.value)||0),placeholder:"0.00",disabled:a,className:sl(i.ticket_price&&"border-destructive")}),i.ticket_price&&c.jsx("p",{className:"text-xs text-destructive",children:i.ticket_price})]}),s.create_ticket&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"ticket_number",children:"Ticket Number (Optional)"}),c.jsx(_l,{id:"ticket_number",value:s.ticket_number||"",onChange:e=>l("ticket_number",e.target.value),placeholder:"Leave empty to auto-generate",disabled:a})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"broker_id",children:"Broker ID (Optional)"}),c.jsx(_l,{id:"broker_id",value:s.broker_id||"",onChange:e=>l("broker_id",e.target.value),placeholder:"Broker identifier",disabled:a})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(VC,{id:"create_ticket",checked:s.create_ticket,onCheckedChange:e=>l("create_ticket",e),disabled:a}),c.jsx(Fl,{htmlFor:"create_ticket",className:"text-sm font-normal cursor-pointer",children:"Create ticket immediately (mark as sold)"})]})]}),c.jsxs(gb,{children:[c.jsx(bl,{type:"button",variant:"outline",onClick:d,disabled:a,children:"Cancel"}),c.jsx(bl,{type:"submit",disabled:a,children:a?"Creating...":"Create Seat"})]})]})]})})}var dz,uz={exports:{}};var hz,mz=dz?uz.exports:(dz=1,"undefined"!=typeof self&&self,hz=function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,n){return new e(new Uint8ClampedArray(t*n),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height||!this.data[t*this.width+e])},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n?1:0},e.prototype.setRegion=function(e,t,n,a,s){for(var r=t;r<t+a;r++)for(var i=e;i<e+n;i++)this.set(i,r,!!s)},e}();t.BitMatrix=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t.addOrSubtractGF=function(e,t){return e^t};var s=function(){function e(e,t,n){this.primitive=e,this.size=t,this.generatorBase=n,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var s=1,r=0;r<this.size;r++)this.expTable[r]=s,(s*=2)>=this.size&&(s=(s^this.primitive)&this.size-1);for(r=0;r<this.size-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new a.default(this,Uint8ClampedArray.from([0])),this.one=new a.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var n=new Uint8ClampedArray(e+1);return n[0]=t,new a.default(this,n)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var a=1;a<n&&0===t[a];)a++;if(a===n)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(n-a);for(var s=0;s<this.coefficients.length;s++)this.coefficients[s]=t[a+s]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var n;if(this.isZero())return t;if(t.isZero())return this;var s=this.coefficients,r=t.coefficients;s.length>r.length&&(s=(n=[r,s])[0],r=n[1]);for(var i=new Uint8ClampedArray(r.length),o=r.length-s.length,l=0;l<o;l++)i[l]=r[l];for(l=o;l<r.length;l++)i[l]=a.addOrSubtractGF(s[l-o],r[l]);return new e(this.field,i)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var n=this.coefficients.length,a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],t);return new e(this.field,a)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var n=this.coefficients,s=n.length,r=t.coefficients,i=r.length,o=new Uint8ClampedArray(s+i-1),l=0;l<s;l++)for(var c=n[l],d=0;d<i;d++)o[l+d]=a.addOrSubtractGF(o[l+d],this.field.multiply(c,r[d]));return new e(this.field,o)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Error("Invalid degree less than 0");if(0===n)return this.field.zero;for(var a=this.coefficients.length,s=new Uint8ClampedArray(a+t),r=0;r<a;r++)s[r]=this.field.multiply(this.coefficients[r],n);return new e(this.field,s)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var n=this.coefficients.length;if(1===e)return this.coefficients.forEach(function(e){t=a.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var s=1;s<n;s++)t=a.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[s]);return t},e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s=n(5),r=n(11),i=n(12);function o(e){var t=i.locate(e);if(!t)return null;for(var n=0,a=t;n<a.length;n++){var o=a[n],l=r.extract(e,o),c=s.decode(l.matrix);if(c)return{binaryData:c.bytes,data:c.text,chunks:c.chunks,version:c.version,location:{topRightCorner:l.mappingFunction(o.dimension,0),topLeftCorner:l.mappingFunction(0,0),bottomRightCorner:l.mappingFunction(o.dimension,o.dimension),bottomLeftCorner:l.mappingFunction(0,o.dimension),topRightFinderPattern:o.topRight,topLeftFinderPattern:o.topLeft,bottomLeftFinderPattern:o.bottomLeft,bottomRightAlignmentPattern:o.alignmentPattern}}}return null}var l={inversionAttempts:"attemptBoth"};function c(e,t,n,s){void 0===s&&(s={});var r=l;Object.keys(r||{}).forEach(function(e){r[e]=s[e]||r[e]});var i="attemptBoth"===r.inversionAttempts||"invertFirst"===r.inversionAttempts,c="onlyInvert"===r.inversionAttempts||"invertFirst"===r.inversionAttempts,d=a.binarize(e,t,n,i),u=d.binarized,h=d.inverted,m=o(c?h:u);return m||"attemptBoth"!==r.inversionAttempts&&"invertFirst"!==r.inversionAttempts||(m=o(c?u:h)),m}c.default=c,t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);function s(e,t,n){return e<t?t:e>n?n:e}var r=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n},e}();t.binarize=function(e,t,n,i){if(e.length!==t*n*4)throw new Error("Malformed data passed to binarizer.");for(var o=new r(t,n),l=0;l<t;l++)for(var c=0;c<n;c++){var d=e[4*(c*t+l)+0],u=e[4*(c*t+l)+1],h=e[4*(c*t+l)+2];o.set(l,c,.2126*d+.7152*u+.0722*h)}for(var m=Math.ceil(t/8),p=Math.ceil(n/8),f=new r(m,p),g=0;g<p;g++)for(var x=0;x<m;x++){var v=0,y=1/0,b=0;for(c=0;c<8;c++)for(l=0;l<8;l++){var w=o.get(8*x+l,8*g+c);v+=w,y=Math.min(y,w),b=Math.max(b,w)}var S=v/Math.pow(8,2);if(b-y<=24&&(S=y/2,g>0&&x>0)){var j=(f.get(x,g-1)+2*f.get(x-1,g)+f.get(x-1,g-1))/4;y<j&&(S=j)}f.set(x,g,S)}var C=a.BitMatrix.createEmpty(t,n),k=null;for(i&&(k=a.BitMatrix.createEmpty(t,n)),g=0;g<p;g++)for(x=0;x<m;x++){for(var N=s(x,2,m-3),_=s(g,2,p-3),E=(v=0,-2);E<=2;E++)for(var P=-2;P<=2;P++)v+=f.get(N+E,_+P);var A=v/25;for(E=0;E<8;E++)for(P=0;P<8;P++){l=8*x+E,c=8*g+P;var R=o.get(l,c);C.set(l,c,R<=A),i&&k.set(l,c,!(R<=A))}}return i?{binarized:C,inverted:k}:{binarized:C}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),r=n(9),i=n(10);function o(e,t){for(var n=e^t,a=0;n;)a++,n&=n-1;return a}function l(e,t){return t<<1|e}var c=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],d=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function u(e,t,n){for(var s=d[n.dataMask],r=e.height,i=function(e){var t=17+4*e.versionNumber,n=a.BitMatrix.createEmpty(t,t);n.setRegion(0,0,9,9,!0),n.setRegion(t-8,0,8,9,!0),n.setRegion(0,t-8,9,8,!0);for(var s=0,r=e.alignmentPatternCenters;s<r.length;s++)for(var i=r[s],o=0,l=e.alignmentPatternCenters;o<l.length;o++){var c=l[o];6===i&&6===c||6===i&&c===t-7||i===t-7&&6===c||n.setRegion(i-2,c-2,5,5,!0)}return n.setRegion(6,9,1,t-17,!0),n.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(n.setRegion(t-11,0,3,6,!0),n.setRegion(0,t-11,6,3,!0)),n}(t),o=[],c=0,u=0,h=!0,m=r-1;m>0;m-=2){6===m&&m--;for(var p=0;p<r;p++)for(var f=h?r-1-p:p,g=0;g<2;g++){var x=m-g;if(!i.get(x,f)){u++;var v=e.get(x,f);s({y:f,x:x})&&(v=!v),c=l(v,c),8===u&&(o.push(c),u=0,c=0)}}h=!h}return o}function h(e){var t=function(e){var t=e.height,n=Math.floor((t-17)/4);if(n<=6)return i.VERSIONS[n-1];for(var a=0,s=5;s>=0;s--)for(var r=t-9;r>=t-11;r--)a=l(e.get(r,s),a);var c=0;for(r=5;r>=0;r--)for(s=t-9;s>=t-11;s--)c=l(e.get(r,s),c);for(var d,u=1/0,h=0,m=i.VERSIONS;h<m.length;h++){var p=m[h];if(p.infoBits===a||p.infoBits===c)return p;var f=o(a,p.infoBits);f<u&&(d=p,u=f),(f=o(c,p.infoBits))<u&&(d=p,u=f)}return u<=3?d:void 0}(e);if(!t)return null;var n=function(e){for(var t=0,n=0;n<=8;n++)6!==n&&(t=l(e.get(n,8),t));for(var a=7;a>=0;a--)6!==a&&(t=l(e.get(8,a),t));var s=e.height,r=0;for(a=s-1;a>=s-7;a--)r=l(e.get(8,a),r);for(n=s-8;n<s;n++)r=l(e.get(n,8),r);for(var i=1/0,d=null,u=0,h=c;u<h.length;u++){var m=h[u],p=m.bits,f=m.formatInfo;if(p===t||p===r)return f;var g=o(t,p);g<i&&(d=f,i=g),t!==r&&(g=o(r,p))<i&&(d=f,i=g)}return i<=3?d:null}(e);if(!n)return null;var a=function(e,t,n){var a=t.errorCorrectionLevels[n],s=[],r=0;if(a.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)s.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),r+=e.dataCodewordsPerBlock+a.ecCodewordsPerBlock}),e.length<r)return null;e=e.slice(0,r);for(var i=a.ecBlocks[0].dataCodewordsPerBlock,o=0;o<i;o++)for(var l=0,c=s;l<c.length;l++)c[l].codewords.push(e.shift());if(a.ecBlocks.length>1){var d=a.ecBlocks[0].numBlocks,u=a.ecBlocks[1].numBlocks;for(o=0;o<u;o++)s[d+o].codewords.push(e.shift())}for(;e.length>0;)for(var h=0,m=s;h<m.length;h++)m[h].codewords.push(e.shift());return s}(u(e,t,n),t,n.errorCorrectionLevel);if(!a)return null;for(var d=a.reduce(function(e,t){return e+t.numDataCodewords},0),h=new Uint8ClampedArray(d),m=0,p=0,f=a;p<f.length;p++){var g=f[p],x=r.decode(g.codewords,g.codewords.length-g.numDataCodewords);if(!x)return null;for(var v=0;v<g.numDataCodewords;v++)h[m++]=x[v]}try{return s.decode(h,t.versionNumber)}catch(y){return null}}t.decode=function(e){if(null==e)return null;var t=h(e);if(t)return t;for(var n=0;n<e.width;n++)for(var a=n+1;a<e.height;a++)e.get(n,a)!==e.get(a,n)&&(e.set(n,a,!e.get(n,a)),e.set(a,n,!e.get(a,n)));return h(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a,s,r,i,o=n(7),l=n(8);function c(e,t){for(var n=[],a="",s=[10,12,14][t],r=e.readBits(s);r>=3;){if((c=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var i=Math.floor(c/100),o=Math.floor(c/10)%10,l=c%10;n.push(48+i,48+o,48+l),a+=i.toString()+o.toString()+l.toString(),r-=3}if(2===r){if((c=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");i=Math.floor(c/10),o=c%10,n.push(48+i,48+o),a+=i.toString()+o.toString()}else if(1===r){var c;if((c=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");n.push(48+c),a+=c.toString()}return{bytes:n,text:a}}(s=a=t.Mode||(t.Mode={})).Numeric="numeric",s.Alphanumeric="alphanumeric",s.Byte="byte",s.Kanji="kanji",s.ECI="eci",(i=r||(r={}))[i.Terminator=0]="Terminator",i[i.Numeric=1]="Numeric",i[i.Alphanumeric=2]="Alphanumeric",i[i.Byte=4]="Byte",i[i.Kanji=8]="Kanji",i[i.ECI=7]="ECI";var d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function u(e,t){for(var n=[],a="",s=[9,11,13][t],r=e.readBits(s);r>=2;){var i=e.readBits(11),o=Math.floor(i/45),l=i%45;n.push(d[o].charCodeAt(0),d[l].charCodeAt(0)),a+=d[o]+d[l],r-=2}return 1===r&&(o=e.readBits(6),n.push(d[o].charCodeAt(0)),a+=d[o]),{bytes:n,text:a}}function h(e,t){for(var n=[],a="",s=[8,16,16][t],r=e.readBits(s),i=0;i<r;i++){var o=e.readBits(8);n.push(o)}try{a+=decodeURIComponent(n.map(function(e){return"%"+("0"+e.toString(16)).substr(-2)}).join(""))}catch(l){}return{bytes:n,text:a}}function m(e,t){for(var n=[],a="",s=[8,10,12][t],r=e.readBits(s),i=0;i<r;i++){var o=e.readBits(13),c=Math.floor(o/192)<<8|o%192;c+=c<7936?33088:49472,n.push(c>>8,255&c),a+=String.fromCharCode(l.shiftJISTable[c])}return{bytes:n,text:a}}t.decode=function(e,t){for(var n,s,i,l,d=new o.BitStream(e),p=t<=9?0:t<=26?1:2,f={text:"",bytes:[],chunks:[],version:t};d.available()>=4;){var g=d.readBits(4);if(g===r.Terminator)return f;if(g===r.ECI)0===d.readBits(1)?f.chunks.push({type:a.ECI,assignmentNumber:d.readBits(7)}):0===d.readBits(1)?f.chunks.push({type:a.ECI,assignmentNumber:d.readBits(14)}):0===d.readBits(1)?f.chunks.push({type:a.ECI,assignmentNumber:d.readBits(21)}):f.chunks.push({type:a.ECI,assignmentNumber:-1});else if(g===r.Numeric){var x=c(d,p);f.text+=x.text,(n=f.bytes).push.apply(n,x.bytes),f.chunks.push({type:a.Numeric,text:x.text})}else if(g===r.Alphanumeric){var v=u(d,p);f.text+=v.text,(s=f.bytes).push.apply(s,v.bytes),f.chunks.push({type:a.Alphanumeric,text:v.text})}else if(g===r.Byte){var y=h(d,p);f.text+=y.text,(i=f.bytes).push.apply(i,y.bytes),f.chunks.push({type:a.Byte,bytes:y.bytes,text:y.text})}else if(g===r.Kanji){var b=m(d,p);f.text+=b.text,(l=f.bytes).push.apply(l,b.bytes),f.chunks.push({type:a.Kanji,bytes:b.bytes,text:b.text})}}if(0===d.available()||0===d.readBits(d.available()))return f}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var n=8-this.bitOffset,a=e<n?e:n,s=255>>8-a<<(r=n-a);t=(this.bytes[this.byteOffset]&s)>>r,e-=a,this.bitOffset+=a,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var r;e>0&&(s=255>>(r=8-e)<<r,t=t<<e|(this.bytes[this.byteOffset]&s)>>r,this.bitOffset+=e)}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2);t.decode=function(e,t){var n=new Uint8ClampedArray(e.length);n.set(e);for(var r=new a.default(285,256,0),i=new s.default(r,n),o=new Uint8ClampedArray(t),l=!1,c=0;c<t;c++){var d=i.evaluateAt(r.exp(c+r.generatorBase));o[o.length-1-c]=d,0!==d&&(l=!0)}if(!l)return n;var u=new s.default(r,o),h=function(e,t,n,a){var s;t.degree()<n.degree()&&(t=(s=[n,t])[0],n=s[1]);for(var r=t,i=n,o=e.zero,l=e.one;i.degree()>=a/2;){var c=r,d=o;if(o=l,(r=i).isZero())return null;i=c;for(var u=e.zero,h=r.getCoefficient(r.degree()),m=e.inverse(h);i.degree()>=r.degree()&&!i.isZero();){var p=i.degree()-r.degree(),f=e.multiply(i.getCoefficient(i.degree()),m);u=u.addOrSubtract(e.buildMonomial(p,f)),i=i.addOrSubtract(r.multiplyByMonomial(p,f))}if(l=u.multiplyPoly(o).addOrSubtract(d),i.degree()>=r.degree())return null}var g=l.getCoefficient(0);if(0===g)return null;var x=e.inverse(g);return[l.multiply(x),i.multiply(x)]}(r,r.buildMonomial(t,1),u,t);if(null===h)return null;var m=function(e,t){var n=t.degree();if(1===n)return[t.getCoefficient(1)];for(var a=new Array(n),s=0,r=1;r<e.size&&s<n;r++)0===t.evaluateAt(r)&&(a[s]=e.inverse(r),s++);return s!==n?null:a}(r,h[0]);if(null==m)return null;for(var p=function(e,t,n){for(var s=n.length,r=new Array(s),i=0;i<s;i++){for(var o=e.inverse(n[i]),l=1,c=0;c<s;c++)i!==c&&(l=e.multiply(l,a.addOrSubtractGF(1,e.multiply(n[c],o))));r[i]=e.multiply(t.evaluateAt(o),e.inverse(l)),0!==e.generatorBase&&(r[i]=e.multiply(r[i],o))}return r}(r,h[1],m),f=0;f<m.length;f++){var g=n.length-1-r.log(m[f]);if(g<0)return null;n[g]=a.addOrSubtractGF(n[g],p[f])}return n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);function s(e,t,n,a){var s=e.x-t.x+n.x-a.x,r=e.y-t.y+n.y-a.y;if(0===s&&0===r)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:n.x-t.x,a22:n.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var i=t.x-n.x,o=a.x-n.x,l=t.y-n.y,c=a.y-n.y,d=i*c-o*l,u=(s*c-o*r)/d,h=(i*r-s*l)/d;return{a11:t.x-e.x+u*t.x,a12:t.y-e.y+u*t.y,a13:u,a21:a.x-e.x+h*a.x,a22:a.y-e.y+h*a.y,a23:h,a31:e.x,a32:e.y,a33:1}}t.extract=function(e,t){for(var n,r,i=function(e,t,n,a){var r=s(e,t,n,a);return{a11:r.a22*r.a33-r.a23*r.a32,a12:r.a13*r.a32-r.a12*r.a33,a13:r.a12*r.a23-r.a13*r.a22,a21:r.a23*r.a31-r.a21*r.a33,a22:r.a11*r.a33-r.a13*r.a31,a23:r.a13*r.a21-r.a11*r.a23,a31:r.a21*r.a32-r.a22*r.a31,a32:r.a12*r.a31-r.a11*r.a32,a33:r.a11*r.a22-r.a12*r.a21}}({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),o=s(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),l=(r=i,{a11:(n=o).a11*r.a11+n.a21*r.a12+n.a31*r.a13,a12:n.a12*r.a11+n.a22*r.a12+n.a32*r.a13,a13:n.a13*r.a11+n.a23*r.a12+n.a33*r.a13,a21:n.a11*r.a21+n.a21*r.a22+n.a31*r.a23,a22:n.a12*r.a21+n.a22*r.a22+n.a32*r.a23,a23:n.a13*r.a21+n.a23*r.a22+n.a33*r.a23,a31:n.a11*r.a31+n.a21*r.a32+n.a31*r.a33,a32:n.a12*r.a31+n.a22*r.a32+n.a32*r.a33,a33:n.a13*r.a31+n.a23*r.a32+n.a33*r.a33}),c=a.BitMatrix.createEmpty(t.dimension,t.dimension),d=function(e,t){var n=l.a13*e+l.a23*t+l.a33;return{x:(l.a11*e+l.a21*t+l.a31)/n,y:(l.a12*e+l.a22*t+l.a32)/n}},u=0;u<t.dimension;u++)for(var h=0;h<t.dimension;h++){var m=d(h+.5,u+.5);c.set(h,u,e.get(Math.floor(m.x),Math.floor(m.y)))}return{matrix:c,mappingFunction:d}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function s(e){return e.reduce(function(e,t){return e+t})}function r(e,t,n,s){var r,i,o,l,c=[{x:Math.floor(e.x),y:Math.floor(e.y)}],d=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);d?(r=Math.floor(e.y),i=Math.floor(e.x),o=Math.floor(t.y),l=Math.floor(t.x)):(r=Math.floor(e.x),i=Math.floor(e.y),o=Math.floor(t.x),l=Math.floor(t.y));for(var u=Math.abs(o-r),h=Math.abs(l-i),m=Math.floor(-u/2),p=r<o?1:-1,f=i<l?1:-1,g=!0,x=r,v=i;x!==o+p;x+=p){var y=d?v:x,b=d?x:v;if(n.get(y,b)!==g&&(g=!g,c.push({x:y,y:b}),c.length===s+1))break;if((m+=h)>0){if(v===l)break;v+=f,m-=u}}for(var w=[],S=0;S<s;S++)c[S]&&c[S+1]?w.push(a(c[S],c[S+1])):w.push(0);return w}function i(e,t,n,a){var s,i=t.y-e.y,o=t.x-e.x,l=r(e,t,n,Math.ceil(a/2)),c=r(e,{x:e.x-o,y:e.y-i},n,Math.ceil(a/2)),d=l.shift()+c.shift()-1;return(s=c.concat(d)).concat.apply(s,l)}function o(e,t){var n=s(e)/s(t),a=0;return t.forEach(function(t,s){a+=Math.pow(e[s]-t*n,2)}),{averageSize:n,error:a}}function l(e,t,n){try{var a=i(e,{x:-1,y:e.y},n,t.length),s=i(e,{x:e.x,y:-1},n,t.length),r=i(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},n,t.length),l=i(e,{x:Math.min(n.width,e.x+e.y)+1,y:Math.min(n.height,e.y+e.x)+1},n,t.length),c=o(a,t),d=o(s,t),u=o(r,t),h=o(l,t),m=Math.sqrt(c.error*c.error+d.error*d.error+u.error*u.error+h.error*h.error),p=(c.averageSize+d.averageSize+u.averageSize+h.averageSize)/4;return m+(Math.pow(c.averageSize-p,2)+Math.pow(d.averageSize-p,2)+Math.pow(u.averageSize-p,2)+Math.pow(h.averageSize-p,2))/p}catch(f){return 1/0}}function c(e,t){for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n--;for(var a=Math.round(t.x);e.get(a,Math.round(t.y));)a++;for(var s=(n+a)/2,r=Math.round(t.y);e.get(Math.round(s),r);)r--;for(var i=Math.round(t.y);e.get(Math.round(s),i);)i++;return{x:s,y:(r+i)/2}}function d(e,t,n,r,o){var c,d,u;try{c=function(e,t,n,r){var o=(s(i(e,n,r,5))/7+s(i(e,t,r,5))/7+s(i(n,e,r,5))/7+s(i(t,e,r,5))/7)/4;if(o<1)throw new Error("Invalid module size");var l=Math.round(a(e,t)/o),c=Math.round(a(e,n)/o),d=Math.floor((l+c)/2)+7;switch(d%4){case 0:d++;break;case 2:d--}return{dimension:d,moduleSize:o}}(r,n,o,e),d=c.dimension,u=c.moduleSize}catch(v){return null}var h=n.x-r.x+o.x,m=n.y-r.y+o.y,p=(a(r,o)+a(r,n))/2/u,f=1-3/p,g={x:r.x+f*(h-r.x),y:r.y+f*(m-r.y)},x=t.map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(n),Math.floor(r))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1];return s(i),{x:n,y:r,score:l({x:Math.floor(n),y:Math.floor(r)},[1,1,1],e)+a({x:n,y:r},g)}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});return{alignmentPattern:p>=15&&x.length?x[0]:g,dimension:d}}t.locate=function(e){for(var t=[],n=[],r=[],i=[],o=function(a){for(var o=0,l=!1,c=[0,0,0,0,0],d=function(t){var r=e.get(t,a);if(r===l)o++;else{c=[c[1],c[2],c[3],c[4],o],o=1,l=r;var d=s(c)/7,u=Math.abs(c[0]-d)<d&&Math.abs(c[1]-d)<d&&Math.abs(c[2]-3*d)<3*d&&Math.abs(c[3]-d)<d&&Math.abs(c[4]-d)<d&&!r,h=s(c.slice(-3))/3,m=Math.abs(c[2]-h)<h&&Math.abs(c[3]-h)<h&&Math.abs(c[4]-h)<h&&r;if(u){var p=t-c[3]-c[4],f=p-c[2],g={startX:f,endX:p,y:a};(x=n.filter(function(e){return f>=e.bottom.startX&&f<=e.bottom.endX||p>=e.bottom.startX&&f<=e.bottom.endX||f<=e.bottom.startX&&p>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?x[0].bottom=g:n.push({top:g,bottom:g})}if(m){var x,v=t-c[4],y=v-c[3];g={startX:y,y:a,endX:v},(x=i.filter(function(e){return y>=e.bottom.startX&&y<=e.bottom.endX||v>=e.bottom.startX&&y<=e.bottom.endX||y<=e.bottom.startX&&v>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?x[0].bottom=g:i.push({top:g,bottom:g})}}},u=-1;u<=e.width;u++)d(u);t.push.apply(t,n.filter(function(e){return e.bottom.y!==a&&e.bottom.y-e.top.y>=2})),n=n.filter(function(e){return e.bottom.y===a}),r.push.apply(r,i.filter(function(e){return e.bottom.y!==a})),i=i.filter(function(e){return e.bottom.y===a})},u=0;u<=e.height;u++)o(u);t.push.apply(t,n.filter(function(e){return e.bottom.y-e.top.y>=2})),r.push.apply(r,i);var h=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,a=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(n),Math.round(a))){var r=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],i=s(r)/r.length;return{score:l({x:Math.round(n),y:Math.round(a)},[1,1,3,1,1],e),x:n,y:a,size:i}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,n){if(t>4)return null;var a=n.filter(function(e,n){return t!==n}).map(function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(a.length<2)return null;var s=e.score+a[0].score+a[1].score;return{points:[e].concat(a.slice(0,2)),score:s}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(0===h.length)return null;var m=function(e,t,n){var s,r,i,o,l,c,d,u=a(e,t),h=a(t,n),m=a(e,n);return h>=u&&h>=m?(l=(s=[t,e,n])[0],c=s[1],d=s[2]):m>=h&&m>=u?(l=(r=[e,t,n])[0],c=r[1],d=r[2]):(l=(i=[e,n,t])[0],c=i[1],d=i[2]),(d.x-c.x)*(l.y-c.y)-(d.y-c.y)*(l.x-c.x)<0&&(l=(o=[d,l])[0],d=o[1]),{bottomLeft:l,topLeft:c,topRight:d}}(h[0].points[0],h[0].points[1],h[0].points[2]),p=m.topRight,f=m.topLeft,g=m.bottomLeft,x=d(e,r,p,f,g),v=[];x&&v.push({alignmentPattern:{x:x.alignmentPattern.x,y:x.alignmentPattern.y},bottomLeft:{x:g.x,y:g.y},dimension:x.dimension,topLeft:{x:f.x,y:f.y},topRight:{x:p.x,y:p.y}});var y=c(e,p),b=c(e,f),w=c(e,g),S=d(e,r,y,b,w);return S&&v.push({alignmentPattern:{x:S.alignmentPattern.x,y:S.alignmentPattern.y},bottomLeft:{x:w.x,y:w.y},topLeft:{x:b.x,y:b.y},topRight:{x:y.x,y:y.y},dimension:S.dimension}),0===v.length?null:v}}]).default},uz.exports=hz());const pz=n(mz);function fz({eventId:e,onScanSuccess:t,onScanError:n,onClose:a,className:s,autoStart:r=!1}){const i=p.useRef(null),o=p.useRef(null),l=p.useRef(null),[d,u]=p.useState(null),[h,m]=p.useState("idle"),[f,g]=p.useState(null),[x,v]=p.useState(null),y=p.useRef(!1),b=p.useRef(0),w=p.useCallback(()=>{l.current&&(l.current.getTracks().forEach(e=>e.stop()),l.current=null)},[]);p.useEffect(()=>()=>{w(),b.current&&cancelAnimationFrame(b.current)},[w]);const S=p.useCallback(async()=>{u(null),m("starting");try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});l.current=e,i.current&&(i.current.srcObject=e,await i.current.play()),m("scanning")}catch(e){const t=e instanceof Error?e.message:"Could not access camera";u(t),m("error"),n?.(t)}},[n]);p.useEffect(()=>{r&&"idle"===h&&S()},[r,h,S]);const j=p.useCallback(async a=>{if(!y.current){y.current=!0,m("idle");try{const n=await async function(e,t){return Fs.post(`/api/v1/ticketing/events/${e}/tickets/scan`,{code:t},{requiresAuth:!0})}(e,a);g(n),v(null),m("success"),t?.(n),setTimeout(()=>{y.current=!1,m("scanning")},2e3)}catch(s){const e=s&&"object"==typeof s&&"message"in s?String(s.message):"Scan failed";v(e),m("error"),n?.(e),setTimeout(()=>{y.current=!1,m("scanning")},2e3)}}},[e,t,n]);return p.useEffect(()=>{if("scanning"!==h||!i.current||!o.current)return;const e=i.current,t=o.current,n=t.getContext("2d");if(n)return b.current=requestAnimationFrame(function a(){if(y.current||!l.current||e.readyState!==e.HAVE_ENOUGH_DATA)return void(b.current=requestAnimationFrame(a));if(!n)return;t.width=e.videoWidth,t.height=e.videoHeight,n.drawImage(e,0,0);const s=n.getImageData(0,0,t.width,t.height),r=pz(s.data,s.width,s.height);r?.data?j(r.data):b.current=requestAnimationFrame(a)}),()=>{b.current&&cancelAnimationFrame(b.current)}},[h,j]),c.jsxs("div",{className:s,children:[c.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-black aspect-video max-w-lg mx-auto",children:[c.jsx("video",{ref:i,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{display:"scanning"===h||"starting"===h?"block":"none"}}),c.jsx("canvas",{ref:o,className:"hidden"}),"starting"===h&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70",children:c.jsx(Kf,{className:"h-10 w-10 animate-spin text-white"})}),"success"===h&&f&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-white p-4",children:[c.jsx(of,{className:"h-12 w-12 text-green-500 mb-2"}),c.jsx("p",{className:"font-medium",children:"Ticket scanned"}),c.jsx("p",{className:"text-sm text-gray-300",children:[f.section_name,f.row_name,f.seat_number].filter(Boolean).join("  ")||f.ticket_number})]}),"error"===h&&x&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-white p-4",children:[c.jsx(cf,{className:"h-12 w-12 text-red-500 mb-2"}),c.jsx("p",{className:"text-sm text-center",children:x})]}),d&&"error"===h&&!x&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-white p-4",children:[c.jsx(Gp,{className:"h-12 w-12 text-red-500 mb-2"}),c.jsx("p",{className:"text-sm text-center",children:d})]}),"scanning"===h&&c.jsx("div",{className:"absolute inset-0 pointer-events-none border-4 border-primary/50 rounded-lg",style:{boxShadow:"inset 0 0 0 2px rgba(255,255,255,0.2)"}})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:["idle"===h&&c.jsxs(bl,{type:"button",onClick:S,className:"gap-2",children:[c.jsx(Gp,{className:"h-4 w-4"}),"Start camera"]}),("starting"===h||"scanning"===h)&&c.jsx(bl,{type:"button",variant:"outline",onClick:w,children:"Stop camera"}),("success"===h||"error"===h)&&c.jsx(bl,{type:"button",variant:"outline",onClick:()=>{m("scanning"),g(null),v(null)},children:"Scan another"}),a&&c.jsx(bl,{type:"button",variant:"ghost",onClick:a,children:"Close"})]})]})}function gz({zoomLevel:e,panOffset:t,onZoomIn:n,onZoomOut:a,onResetZoom:s}){return c.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-10",children:[c.jsx(bl,{variant:"outline",size:"sm",onClick:n,disabled:e>=3,title:"Zoom In",children:c.jsx(vx,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"outline",size:"sm",onClick:a,disabled:e<=.5,title:"Zoom Out",children:c.jsx(yx,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"outline",size:"sm",onClick:s,disabled:1===e&&0===t.x&&0===t.y,title:"Reset Zoom",children:c.jsx(Rg,{className:"h-4 w-4"})}),c.jsxs("div",{className:"text-xs text-center text-muted-foreground bg-background/80 px-2 py-1 rounded",children:[Math.round(100*e),"%"]})]})}const xz="/api/v1/ticketing/seats",vz={getByVenue:async(e,t=0,n=1e3)=>Fs.get(`${xz}?venue_id=${e}&skip=${t}&limit=${n}`,{requiresAuth:!0}),getByLayout:async(e,t=0,n=1e3)=>Fs.get(`${xz}?layout_id=${e}&skip=${t}&limit=${n}`,{requiresAuth:!0}),getById:async e=>Fs.get(`${xz}/${e}`,{requiresAuth:!0}),create:async e=>Fs.post(xz,e,{requiresAuth:!0}),update:async(e,t)=>Fs.put(`${xz}/${e}`,t,{requiresAuth:!0}),updateCoordinates:async(e,t,n,a)=>Fs.patch(`${xz}/${e}/coordinates`,{x_coordinate:t,y_coordinate:n,shape:a?JSON.stringify(a):void 0},{requiresAuth:!0}),delete:async e=>Fs.delete(`${xz}/${e}`,{requiresAuth:!0}),async bulkOperations(e){const t={seats:e.seats};e.fileId&&(t.file_id=e.fileId);const n=new URLSearchParams({venue_id:e.venueId});return e.layoutId&&n.append("layout_id",e.layoutId),Fs.post(`${xz}/bulk?${n.toString()}`,t,{requiresAuth:!0})},async bulkCreate(e,t,n,a){return this.bulkOperations({venueId:e,seats:t.map(e=>({...e,id:void 0})),fileId:n,layoutId:a})},deleteByVenue:async e=>Fs.delete(`${xz}/venue/${e}`,{requiresAuth:!0})};function yz(e){const t=null===e.shape||void 0===e.shape||""===e.shape?void 0:e.shape;return{id:e.id,tenant_id:e.tenant_id,layout_id:e.layout_id,name:e.name,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,file_id:e.file_id??void 0,image_url:e.image_url??void 0,canvas_background_color:e.canvas_background_color??void 0,marker_fill_transparency:e.marker_fill_transparency??void 0,shape:t,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}}const bz="/api/v1/ticketing/sections",wz={getByLayout:async e=>((await Fs.get(`${bz}/layout/${e}`,{requiresAuth:!0})).items||[]).map(yz),getById:async e=>yz(await Fs.get(`${bz}/${e}`,{requiresAuth:!0})),create:async e=>yz(await Fs.post(bz,e,{requiresAuth:!0})),update:async(e,t)=>yz(await Fs.put(`${bz}/${e}`,t,{requiresAuth:!0})),delete:async e=>Fs.delete(`${bz}/${e}`,{requiresAuth:!0})};function Sz(e){if(e)try{const t=JSON.parse(e);if(t&&"object"==typeof t&&t.type)return{...t,type:t.type}}catch(t){}}function jz(e){if(e)try{const t=JSON.parse(e);if(t&&"object"==typeof t&&t.type)return{...t,type:t.type}}catch(t){}}function Cz({layoutId:e,designMode:t,initialSeats:n,initialSections:a,setSeats:s,setSectionMarkers:r}){const{data:i,isLoading:o,error:l}=Ya({queryKey:["seats",e],queryFn:()=>vz.getByLayout(e),enabled:!!e&&!n,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:c}=Ya({queryKey:["sections","layout",e],queryFn:()=>wz.getByLayout(e),enabled:!!e&&!a,refetchOnMount:!1,refetchOnWindowFocus:!1}),d=a||c,u=p.useRef(),h=p.useRef();return p.useEffect(()=>{if(a&&"section-level"===t){const e=a.map(e=>{const t=e;return{id:e.id,name:e.name,x:e.x_coordinate||50,y:e.y_coordinate||50,imageUrl:e.image_url||void 0,file_id:t.file_id??void 0,canvasBackgroundColor:void 0!==t.canvas_background_color&&null!==t.canvas_background_color?t.canvas_background_color:void 0,markerFillTransparency:void 0!==t.marker_fill_transparency&&null!==t.marker_fill_transparency?t.marker_fill_transparency:void 0,shape:jz(e.shape),isNew:!1}});r(e)}},[a,t,r]),p.useEffect(()=>{if(!a&&void 0!==d&&"section-level"===t){const e=d.map(e=>{const t=e;return{id:e.id,name:e.name,x:e.x_coordinate||50,y:e.y_coordinate||50,imageUrl:e.image_url||void 0,file_id:t.file_id??void 0,canvasBackgroundColor:void 0!==e.canvas_background_color&&null!==e.canvas_background_color?e.canvas_background_color:void 0,markerFillTransparency:void 0!==e.marker_fill_transparency&&null!==e.marker_fill_transparency?e.marker_fill_transparency:void 0,shape:jz(e.shape),isNew:!1}});r(e)}},[d,a,t,r]),p.useEffect(()=>{const e=n!==u.current,t=i!==h.current;if(e||t||void 0===u.current)if(n)if(u.current=n,n.length>0){const e=n.map(e=>({id:e.id,x:e.x_coordinate||0,y:e.y_coordinate||0,seat:{section:e.section_name||e.section_id||"Unknown",sectionId:e.section_id,row:e.row,seatNumber:e.seat_number,seatType:e.seat_type},shape:Sz(e.shape)}));s(e)}else s([]);else if(i)if(h.current=i,i.items&&i.items.length>0){const e=i.items.map(e=>({id:e.id,x:e.x_coordinate||0,y:e.y_coordinate||0,seat:{section:e.section_name||e.section_id||"Unknown",sectionId:e.section_id,row:e.row,seatNumber:e.seat_number,seatType:e.seat_type},shape:Sz(e.shape)}));s(e)}else void 0===u.current&&void 0===h.current&&s([]);else o||l||n||void 0!==u.current||void 0!==h.current||s([])},[i,n,o,l,s]),{isLoading:o,seatsError:l,effectiveSectionsData:d??void 0}}const kz={lockFirstSize:!1,enabled:!0,dimensionDeltaThreshold:0,throttleMs:0,resetLockKey:void 0};function Nz({containerWidth:e,containerHeight:t,contentAspectRatio:n,panOffset:a={x:0,y:0},zoomLevel:s=1}){const r=e>0?e:800,i=t>0?t:600,o=i/r,{displayedWidth:l,displayedHeight:c,imageX:d,imageY:u,centerX:h,centerY:m}=p.useMemo(()=>{let e,t;n>o?(t=i,e=t/n):(e=r,t=e*n);return{displayedWidth:e,displayedHeight:t,imageX:(r-e)/2,imageY:(i-t)/2,centerX:r/2,centerY:i/2}},[r,i,n,o]),f=p.useCallback((e,t)=>({x:d+e/100*l,y:u+t/100*c}),[d,u,l,c]),g=p.useCallback((e,t)=>({x:(e-d)/l*100,y:(t-u)/c*100}),[d,u,l,c]),x=p.useCallback((e,t)=>{const n=(e-h-a.x)/s+h,r=(t-m-a.y)/s+m;return g(n,r)},[h,m,a,s,g]),v=p.useCallback((e,t)=>x(e,t),[x]);return{displayedWidth:l,displayedHeight:c,imageX:d,imageY:u,centerX:h,centerY:m,percentageToStage:f,layerToPercentage:g,stageToPercentage:x,pointerToPercentage:v}}const _z={minZoom:.5,maxZoom:3,step:.25,zoomFactor:void 0,initialZoom:1};function Ez(e={}){const t={..._z,...e},[n,a]=p.useState(t.initialZoom),s=p.useCallback(()=>{void 0!==t.zoomFactor?a(e=>Math.min(e*t.zoomFactor,t.maxZoom)):a(e=>Math.min(e+t.step,t.maxZoom))},[t.step,t.zoomFactor,t.maxZoom]),r=p.useCallback(()=>{void 0!==t.zoomFactor?a(e=>Math.max(e/t.zoomFactor,t.minZoom)):a(e=>Math.max(e-t.step,t.minZoom))},[t.step,t.zoomFactor,t.minZoom]),i=p.useCallback(()=>{a(t.initialZoom)},[t.initialZoom]);return{zoomLevel:n,setZoomLevel:a,handleZoomIn:s,handleZoomOut:r,handleResetZoom:i,minZoom:t.minZoom,maxZoom:t.maxZoom}}function Pz(e={}){const[t,n]=p.useState({x:0,y:0}),[a,s]=p.useState(!1),[r,i]=p.useState(!1),[o,l]=p.useState(null);p.useEffect(()=>{const e=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||!!t.closest("input, textarea, [contenteditable]");"Space"!==e.code||e.repeat||n||(e.preventDefault(),s(!0))},t=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||!!t.closest("input, textarea, [contenteditable]");"Space"!==e.code||n||(e.preventDefault(),s(!1),r&&(i(!1),l(null)))};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[r]);const c=p.useCallback(e=>{n(t=>({x:t.x+e.x,y:t.y+e.y}))},[]),d=p.useCallback(()=>{n({x:0,y:0})},[]),u=p.useCallback(e=>{const t=e.target.getStage();if(!t)return;const n=t.getPointerPosition();n&&a&&(i(!0),l(n))},[a]),h=p.useCallback(e=>{if(r&&a&&o){const t=e.target.getStage();if(!t)return;const a=t.getPointerPosition();if(!a)return;const s={x:a.x-o.x,y:a.y-o.y};l(a),n(e=>({x:e.x+s.x,y:e.y+s.y}))}},[r,a,o]),m=p.useCallback(()=>{r&&(i(!1),l(null))},[r]),f=p.useCallback(()=>{r&&(i(!1),l(null))},[r]);return{panOffset:t,setPanOffset:n,isSpacePressed:a,isPanning:r,panStartPos:o,handleMouseDown:u,handleMouseMove:h,handleMouseUp:m,handleMouseLeave:f,handlePanDelta:c,resetPan:d}}var Az,Rz={exports:{}},Tz={},Mz={},Dz={};function Lz(){return Az||(Az=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const n=Math.PI/180;e.glob=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:t=>e.Konva.angleDeg?t*n:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>e.Konva.DD.isDragging,isTransforming(){var t;return null===(t=e.Konva.Transformer)||void 0===t?void 0:t.isTransforming()},isDragReady:()=>!!e.Konva.DD.node,releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}};e._registerNode=t=>{e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)}(Dz)),Dz}var Fz,Iz={};function Oz(){return Fz||(Fz=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Lz();class n{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),a=this.m[0]*t+this.m[2]*n,s=this.m[1]*t+this.m[3]*n,r=this.m[0]*-n+this.m[2]*t,i=this.m[1]*-n+this.m[3]*t;return this.m[0]=a,this.m[1]=s,this.m[2]=r,this.m[3]=i,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const n=this.m[0]+this.m[2]*t,a=this.m[1]+this.m[3]*t,s=this.m[2]+this.m[0]*e,r=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=a,this.m[2]=s,this.m[3]=r,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],a=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],r=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],i=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=a,this.m[3]=s,this.m[4]=r,this.m[5]=i,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,a=-this.m[2]*e,s=this.m[0]*e,r=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),i=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=a,this.m[3]=s,this.m[4]=r,this.m[5]=i,this}getMatrix(){return this.m}decompose(){const t=this.m[0],n=this.m[1],a=this.m[2],s=this.m[3],r=t*s-n*a,i={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=n){const e=Math.sqrt(t*t+n*n);i.rotation=n>0?Math.acos(t/e):-Math.acos(t/e),i.scaleX=e,i.scaleY=r/e,i.skewX=(t*a+n*s)/r,i.skewY=0}else if(0!=a||0!=s){const e=Math.sqrt(a*a+s*s);i.rotation=Math.PI/2-(s>0?Math.acos(-a/e):-Math.acos(a/e)),i.scaleX=r/e,i.scaleY=e,i.skewX=0,i.skewY=(t*a+n*s)/r}return i.rotation=e.Util._getRotation(i.rotation),i}}e.Transform=n;const a=Math.PI/180,s=180/Math.PI,r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},i=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let o=[];const l="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)};e.Util={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;const t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){o.push(e),1===o.length&&l(function(){const e=o;o=[],e.forEach(function(e){e()})})},createCanvasElement(){const e=document.createElement("canvas");try{e.style=e.style||{}}catch(t){}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(t,n){const a=e.Util.createImageElement();a.onload=function(){n(a)},a.src=t},_rgbToHex:(e,t,n)=>((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){e=e.replace("#","");const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){let e=(16777215*Math.random()|0).toString(16);for(;e.length<6;)e="0"+e;return"#"+e},getRGB(e){let t;return e in r?(t=r[e],{r:t[0],g:t[1],b:t[2]}):"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=i.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)),_namedColorToRBA(e){const t=r[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){const t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){const t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),a=Number(n[0])/360,s=Number(n[1])/100,r=Number(n[2])/100;let i,o,l;if(0===s)return l=255*r,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};i=r<.5?r*(1+s):r+s-r*s;const c=2*r-i,d=[0,0,0];for(let e=0;e<3;e++)o=a+1/3*-(e-1),o<0&&o++,o>1&&o--,l=6*o<1?c+6*(i-c)*o:2*o<1?i:3*o<2?c+(i-c)*(2/3-o)*6:c,d[e]=255*l;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){const t={};for(const n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*a,radToDeg:e=>e*s,_degToRad:t=>(e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)),_radToDeg:t=>(e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)),_getRotation:n=>t.Konva.angleDeg?e.Util.radToDeg(n):n,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error("Konva error: "+e)},error(e){},warn(e){t.Konva.showWarnings},each(e,t){for(const n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,a,s,r){let i,o,l;const c=(e-n)*(e-n)+(t-a)*(t-a);if(0==c)i=e,o=t,l=(s-n)*(s-n)+(r-a)*(r-a);else{const d=((s-e)*(n-e)+(r-t)*(a-t))/c;d<0?(i=e,o=t,l=(e-s)*(e-s)+(t-r)*(t-r)):d>1?(i=n,o=a,l=(n-s)*(n-s)+(a-r)*(a-r)):(i=e+d*(n-e),o=t+d*(a-t),l=(i-s)*(i-s)+(o-r)*(o-r))}return[i,o,l]},_getProjectionToLine(t,n,a){const s=e.Util.cloneObject(t);let r=Number.MAX_VALUE;return n.forEach(function(i,o){if(!a&&o===n.length-1)return;const l=n[(o+1)%n.length],c=e.Util._getProjectionToSegment(i.x,i.y,l.x,l.y,t.x,t.y),d=c[0],u=c[1],h=c[2];h<r&&(s.x=d,s.y=u,r=h)}),s},_prepareArrayForTween(t,n,a){const s=[],r=[];if(t.length>n.length){const e=n;n=t,t=e}for(let e=0;e<t.length;e+=2)s.push({x:t[e],y:t[e+1]});for(let e=0;e<n.length;e+=2)r.push({x:n[e],y:n[e+1]});const i=[];return r.forEach(function(t){const n=e.Util._getProjectionToLine(t,s,a);i.push(n.x),i.push(n.y)}),i},_prepareToStringify(t){let n;t.visitedByCircularReferenceRemoval=!0;for(const a in t)if(t.hasOwnProperty(a)&&t[a]&&"object"==typeof t[a])if(n=Object.getOwnPropertyDescriptor(t,a),t[a].visitedByCircularReferenceRemoval||e.Util._isElement(t[a])){if(!n.configurable)return null;delete t[a]}else if(null===e.Util._prepareToStringify(t[a])){if(!n.configurable)return null;delete t[a]}return delete t.visitedByCircularReferenceRemoval,t},_assign(e,t){for(const n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){t.Konva.releaseCanvasOnDestroy&&e.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(e,t,n,a){let s=0,r=0,i=0,o=0;"number"==typeof a?s=r=i=o=Math.min(a,t/2,n/2):(s=Math.min(a[0]||0,t/2,n/2),r=Math.min(a[1]||0,t/2,n/2),o=Math.min(a[2]||0,t/2,n/2),i=Math.min(a[3]||0,t/2,n/2)),e.moveTo(s,0),e.lineTo(t-r,0),e.arc(t-r,r,r,3*Math.PI/2,0,!1),e.lineTo(t,n-o),e.arc(t-o,n-o,o,0,Math.PI/2,!1),e.lineTo(i,n),e.arc(i,n-i,i,Math.PI/2,Math.PI,!1),e.lineTo(0,s),e.arc(s,s,s,Math.PI,3*Math.PI/2,!1)}}}(Iz)),Iz}var zz,Bz,$z={},Uz={},Vz={};function qz(){if(zz)return Vz;zz=1,Object.defineProperty(Vz,"__esModule",{value:!0}),Vz.HitContext=Vz.SceneContext=Vz.Context=void 0;const e=Oz(),t=Lz();const n=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];let a=class{constructor(e){this.canvas=e,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(t,n){let a,s,r,i,o=this.traceArr,l=o.length,c="";for(a=0;a<l;a++)s=o[a],r=s.method,r?(i=s.args,c+=r,t?c+="()":e.Util._isArray(i[0])?c+="(["+i.join(",")+"])":(n&&(i=i.map(e=>"number"==typeof e?Math.floor(e):e)),c+="("+i.join(",")+")")):(c+=s.property,t||(c+="="+s.val)),c+=";";return c}clearTrace(){this.traceArr=[]}_trace(e){let t,n=this.traceArr;n.push(e),t=n.length,t>=100&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,a,s,r){this._context.arc(e,t,n,a,s,r)}arcTo(e,t,n,a,s){this._context.arcTo(e,t,n,a,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,a,s,r){this._context.bezierCurveTo(e,t,n,a,s,r)}clearRect(e,t,n,a){this._context.clearRect(e,t,n,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,a){return this._context.createLinearGradient(e,t,n,a)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,a,s,r){return this._context.createRadialGradient(e,t,n,a,s,r)}drawImage(e,t,n,a,s,r,i,o,l){const c=arguments,d=this._context;3===c.length?d.drawImage(e,t,n):5===c.length?d.drawImage(e,t,n,a,s):9===c.length&&d.drawImage(e,t,n,a,s,r,i,o,l)}ellipse(e,t,n,a,s,r,i,o){this._context.ellipse(e,t,n,a,s,r,i,o)}isPointInPath(e,t,n,a){return n?this._context.isPointInPath(n,e,t,a):this._context.isPointInPath(e,t,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,a){this._context.fillRect(e,t,n,a)}strokeRect(e,t,n,a){this._context.strokeRect(e,t,n,a)}fillText(e,t,n,a){a?this._context.fillText(e,t,n,a):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,a){return this._context.getImageData(e,t,n,a)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,a){this._context.rect(e,t,n,a)}roundRect(e,t,n,a,s){this._context.roundRect(e,t,n,a,s)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,a){this._context.quadraticCurveTo(e,t,n,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,a,s,r){this._context.setTransform(e,t,n,a,s,r)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,a){this._context.strokeText(e,t,n,a)}transform(e,t,n,a,s,r){this._context.transform(e,t,n,a,s,r)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let t,a,s=this,r=n.length,i=this.setAttr;const o=function(t){let n,r=s[t];s[t]=function(){return a=function(t){const n=[],a=t.length,s=e.Util;for(let e=0;e<a;e++){let a=t[e];s._isNumber(a)?a=Math.round(1e3*a)/1e3:s._isString(a)||(a+=""),n.push(a)}return n}(Array.prototype.slice.call(arguments,0)),n=r.apply(s,arguments),s._trace({method:t,args:a}),n}};for(t=0;t<r;t++)o(n[t]);s.setAttr=function(){i.apply(s,arguments);const e=arguments[0];let t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),s._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||"source-over"===t||this.setAttr("globalCompositeOperation",t)}};Vz.Context=a,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(e){Object.defineProperty(a.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});Vz.SceneContext=class extends a{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&"color"===n)return void this._fillColor(e);const a=e.getFillPatternImage();if(a&&"pattern"===n)return void this._fillPattern(e);const s=e.getFillLinearGradientColorStops();if(s&&"linear-gradient"===n)return void this._fillLinearGradient(e);const r=e.getFillRadialGradientColorStops();r&&"radial-gradient"===n?this._fillRadialGradient(e):t?this._fillColor(e):a?this._fillPattern(e):s?this._fillLinearGradient(e):r&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(t.x,t.y,n.x,n.y);if(a){for(let e=0;e<a.length;e+=2)s.addColorStop(a[e],a[e+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,a;const s=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",r=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,i=null!==(a=e.getShadowOffset())&&void 0!==a?a:{x:0,y:0},o=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=o.x*l,d=o.y*l;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",r*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",i.x*c),this.setAttr("shadowOffsetY",i.y*d)}};return Vz.HitContext=class extends a{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e);const n=e.hitStrokeWidth(),a="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}},Vz}function Hz(){if(Bz)return Uz;Bz=1,Object.defineProperty(Uz,"__esModule",{value:!0}),Uz.HitCanvas=Uz.SceneCanvas=Uz.Canvas=void 0;const e=Oz(),t=qz(),n=Lz();let a;let s=class{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const s=(t||{}).pixelRatio||n.Konva.pixelRatio||function(){if(a)return a;const t=e.Util.createCanvasElement(),s=t.getContext("2d");return a=(n.Konva._global.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),e.Util.releaseCanvas(t),a}();this.pixelRatio=s,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch(a){try{return this._canvas.toDataURL()}catch(GQ){return e.Util.error("Unable to get data URL. "+GQ.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Uz.Canvas=s;Uz.SceneCanvas=class extends s{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new t.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}};return Uz.HitCanvas=class extends s{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(e.width,e.height)}},Uz}var Gz,Kz={};function Wz(){return Gz||(Gz=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Lz(),n=Oz();e.DD={get isDragging(){let t=!1;return e.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&(t=!0)}),t},justDragged:!1,get node(){let t;return e.DD._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const a=[];e.DD._dragElements.forEach((e,s)=>{const{node:r}=e,i=r.getStage();i.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=n.Util._getFirstPointerId(t));const o=i._changedPointerPositions.find(t=>t.id===e.pointerId);if(o){if("dragging"!==e.dragStatus){const n=r.dragDistance();if(Math.max(Math.abs(o.x-e.startPointerPos.x),Math.abs(o.y-e.startPointerPos.y))<n)return;if(r.startDrag({evt:t}),!r.isDragging())return}r._setDragPosition(t,e),a.push(r)}}),a.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)})},_endDragBefore(n){const a=[];e.DD._dragElements.forEach(s=>{const{node:r}=s,i=r.getStage();n&&i.setPointersPositions(n);if(!i._changedPointerPositions.find(e=>e.id===s.pointerId))return;"dragging"!==s.dragStatus&&"stopped"!==s.dragStatus||(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const o=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;o&&-1===a.indexOf(o)&&a.push(o)}),a.forEach(e=>{e.draw()})},_endDragAfter(t){e.DD._dragElements.forEach((n,a)=>{"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))}(Kz)),Kz}var Qz,Yz,Xz,Zz={},Jz={};function eB(){if(Qz)return Jz;Qz=1,Object.defineProperty(Jz,"__esModule",{value:!0}),Jz.RGBComponent=function(e){if(e>255)return 255;if(e<0)return 0;return Math.round(e)},Jz.alphaComponent=function(e){if(e>1)return 1;if(e<1e-4)return 1e-4;return e},Jz.getNumberValidator=function(){if(e.Konva.isUnminified)return function(e,a){return t.Util._isNumber(e)||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a number.'),e}},Jz.getNumberOrArrayOfNumbersValidator=function(a){if(e.Konva.isUnminified)return function(e,s){let r=t.Util._isNumber(e),i=t.Util._isArray(e)&&e.length==a;return r||i||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a number or Array<number>('+a+")"),e}},Jz.getNumberOrAutoValidator=function(){if(e.Konva.isUnminified)return function(e,a){return t.Util._isNumber(e)||"auto"===e||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a number or "auto".'),e}},Jz.getStringValidator=function(){if(e.Konva.isUnminified)return function(e,a){return t.Util._isString(e)||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a string.'),e}},Jz.getStringOrGradientValidator=function(){if(e.Konva.isUnminified)return function(e,a){const s=t.Util._isString(e),r="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return s||r||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a string or a native gradient.'),e}},Jz.getFunctionValidator=function(){if(e.Konva.isUnminified)return function(e,a){return t.Util._isFunction(e)||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a function.'),e}},Jz.getNumberArrayValidator=function(){if(e.Konva.isUnminified)return function(e,a){const s=Int8Array?Object.getPrototypeOf(Int8Array):null;return s&&e instanceof s||(t.Util._isArray(e)?e.forEach(function(e){t.Util._isNumber(e)||t.Util.warn('"'+a+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")}):t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a array of numbers.')),e}},Jz.getBooleanValidator=function(){if(e.Konva.isUnminified)return function(e,a){return!0===e||!1===e||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a boolean.'),e}},Jz.getComponentValidator=function(a){if(e.Konva.isUnminified)return function(e,s){return null==e||t.Util.isObject(e)||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be an object with properties '+a),e}};const e=Lz(),t=Oz();function n(e){return t.Util._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||t.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}return Jz}function tB(){return Yz||(Yz=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Oz(),n=eB(),a="get",s="set";e.Factory={addGetterSetter(t,n,a,s,r){e.Factory.addGetter(t,n,a),e.Factory.addSetter(t,n,s,r),e.Factory.addOverloadedGetterSetter(t,n)},addGetter(e,n,s){const r=a+t.Util._capitalize(n);e.prototype[r]=e.prototype[r]||function(){const e=this.attrs[n];return void 0===e?s:e}},addSetter(n,a,r,i){const o=s+t.Util._capitalize(a);n.prototype[o]||e.Factory.overWriteSetter(n,a,r,i)},overWriteSetter(e,n,a,r){const i=s+t.Util._capitalize(n);e.prototype[i]=function(e){return a&&null!=e&&(e=a.call(this,e,n)),this._setAttr(n,e),r&&r.call(this),this}},addComponentsGetterSetter(r,i,o,l,c){const d=o.length,u=t.Util._capitalize,h=a+u(i),m=s+u(i);r.prototype[h]=function(){const e={};for(let t=0;t<d;t++){const n=o[t];e[n]=this.getAttr(i+u(n))}return e};const p=(0,n.getComponentValidator)(o);r.prototype[m]=function(e){const t=this.attrs[i];l&&(e=l.call(this,e,i)),p&&p.call(this,e,i);for(const n in e)e.hasOwnProperty(n)&&this._setAttr(i+u(n),e[n]);return e||o.forEach(e=>{this._setAttr(i+u(e),void 0)}),this._fireChangeEvent(i,t,e),c&&c.call(this),this},e.Factory.addOverloadedGetterSetter(r,i)},addOverloadedGetterSetter(e,n){const r=t.Util._capitalize(n),i=s+r,o=a+r;e.prototype[n]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(n,s,r,i){t.Util.error("Adding deprecated "+s);const o=a+t.Util._capitalize(s),l=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[o]=function(){t.Util.error(l);const e=this.attrs[s];return void 0===e?r:e},e.Factory.addSetter(n,s,i,function(){t.Util.error(l)}),e.Factory.addOverloadedGetterSetter(n,s)},backCompat(e,n){t.Util.each(n,function(n,r){const i=e.prototype[r],o=a+t.Util._capitalize(n),l=s+t.Util._capitalize(n);function c(){i.apply(this,arguments),t.Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}e.prototype[n]=c,e.prototype[o]=c,e.prototype[l]=c})},afterSetFilter(){this._filterUpToDate=!1}}}(Zz)),Zz}function nB(){if(Xz)return $z;Xz=1,Object.defineProperty($z,"__esModule",{value:!0}),$z.Node=void 0;const e=Hz(),t=Wz(),n=tB(),a=Lz(),s=Oz(),r=eB(),i="absoluteOpacity",o="allEventListeners",l="absoluteTransform",c="absoluteScale",d="canvas",u="listening",h="Shape",m=" ",p="stage",f="transform",g="visible",x=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(m);let v=1;class y{constructor(e){this._id=v++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==f&&e!==l||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){let n=this._cache.get(e);return(void 0===n||(e===f||e===l)&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const n=t.map(e=>e+"Change.konva").join(m);this.on(n,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:e,filter:t,hit:n,buffer:a}=this._cache.get(d);s.Util.releaseCanvas(e,t,n,a),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let a={};void 0!==n.x&&void 0!==n.y&&void 0!==n.width&&void 0!==n.height||(a=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(n.width||a.width),o=Math.ceil(n.height||a.height),l=n.pixelRatio,u=void 0===n.x?Math.floor(a.x):n.x,h=void 0===n.y?Math.floor(a.y):n.y,m=n.offset||0,p=n.drawBorder||!1,f=n.hitCanvasPixelRatio||1;if(!r||!o)return void s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");r+=2*m+(Math.abs(Math.round(a.x)-u)>.5?1:0),o+=2*m+(Math.abs(Math.round(a.y)-h)>.5?1:0),u-=m,h-=m;const g=new e.SceneCanvas({pixelRatio:l,width:r,height:o}),x=new e.SceneCanvas({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),v=new e.HitCanvas({pixelRatio:f,width:r,height:o}),y=g.getContext(),b=v.getContext(),w=new e.SceneCanvas({width:g.width/g.pixelRatio+Math.abs(u),height:g.height/g.pixelRatio+Math.abs(h),pixelRatio:g.pixelRatio}),S=w.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,!1===n.imageSmoothingEnabled&&(g.getContext()._context.imageSmoothingEnabled=!1,x.getContext()._context.imageSmoothingEnabled=!1),y.save(),b.save(),S.save(),y.translate(-u,-h),b.translate(-u,-h),S.translate(-u,-h),w.x=u,w.y=h,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(c),this.drawScene(g,this,w),this.drawHit(v,this),this._isUnderCache=!1,y.restore(),b.restore(),p&&(y.save(),y.beginPath(),y.rect(0,0,r,o),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set(d,{scene:g,filter:x,hit:v,buffer:w,x:u,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let a=1/0,s=1/0,r=-1/0,i=-1/0;const o=this.getAbsoluteTransform(t);return n.forEach(function(e){const t=o.point(e);void 0===a&&(a=r=t.x,s=i=t.y),a=Math.min(a,t.x),s=Math.min(s,t.y),r=Math.max(r,t.x),i=Math.max(i,t.y)}),{x:a,y:s,width:r-a,height:i-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const n=this._getCachedSceneCanvas(),a=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/a,n.height/a),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e,t,n,a,r=this.filters(),i=this._getCanvasCache(),o=i.scene,l=i.filter,c=l.getContext();if(r){if(!this._filterUpToDate){const i=o.pixelRatio;l.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(e=r.length,c.clear(),c.drawImage(o._canvas,0,0,o.getWidth()/i,o.getHeight()/i),t=c.getImageData(0,0,l.getWidth(),l.getHeight()),n=0;n<e;n++)a=r[n],"function"==typeof a?(a.call(this,t),c.putImageData(t,0,0)):s.Util.error("Filter should be type of function, but got "+typeof a+" instead. Please check correct filters")}catch(d){s.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return o}on(e,t){if(this._cache&&this._cache.delete(o),3===arguments.length)return this._delegate.apply(this,arguments);const n=e.split(m);for(let a=0;a<n.length;a++){const e=n[a].split("."),s=e[0],r=e[1]||"";this.eventListeners[s]||(this.eventListeners[s]=[]),this.eventListeners[s].push({name:r,handler:t})}return this}off(e,t){let n,a,s,r,i,l,c=(e||"").split(m),d=c.length;if(this._cache&&this._cache.delete(o),!e)for(a in this.eventListeners)this._off(a);for(n=0;n<d;n++)if(s=c[n],r=s.split("."),i=r[0],l=r[1],i)this.eventListeners[i]&&this._off(i,l,t);else for(a in this.eventListeners)this._off(a,l,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(e){t.call(this,e.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){const a=this;this.on(e,function(e){const r=e.target.findAncestors(t,!0,a);for(let t=0;t<r.length;t++)(e=s.Util.cloneObject(e)).currentTarget=r[t],n.call(r[t],e)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(u)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+s.Util._capitalize(e);return s.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,n;if(!e)return this;for(t in e)"children"!==t&&(n="set"+s.Util._capitalize(t),s.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(u,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(g,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const s=this.getLayer();let r=!1;t.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===s)&&(r=!0)});const i=!n&&!a.Konva.hitOnDragEnabled&&(r||a.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e,t,n,a,s=this.getDepth(),r=this,i=0;const o=this.getStage();return"Stage"!==r.nodeType&&o&&function o(l){for(e=[],t=l.length,n=0;n<t;n++)a=l[n],i++,a.nodeType!==h&&(e=e.concat(a.getChildren().slice())),a._id===r._id&&(n=t);e.length>0&&e[0].getDepth()<=s&&o(e)}(o.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(f),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);const a=this.getAbsoluteTransform(e).getMatrix(),r=new s.Transform,i=this.offset();return r.m=a.slice(),r.translate(i.x,i.y),r.getTranslation()}setAbsolutePosition(e){const{x:t,y:n,...a}=this._clearTransform();this.attrs.x=t,this.attrs.y=n,this._clearCache(f);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(f),this._clearSelfAndDescendantCache(l),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,n=e.y,a=this.x(),s=this.y();return void 0!==t&&(a+=t),void 0!==n&&(s+=n),this.setPosition({x:a,y:s}),this}_eachAncestorReverse(e,t){let n,a,s=[],r=this.getParent();if(!t||t._id!==this._id){for(s.unshift(this);r&&(!t||r._id!==t._id);)s.unshift(r),r=r.parent;for(n=s.length,a=0;a<n;a++)e(s[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&s.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e,t,n,a,r,i=this.getAttrs();const o={attrs:{},className:this.getClassName()};for(e in i)t=i[e],r=s.Util.isObject(t)&&!s.Util._isPlainObject(t)&&!s.Util._isArray(t),r||(n="function"==typeof this[e]&&this[e],delete i[e],a=n?n.call(this):null,i[e]=t,a!==t&&(o.attrs[e]=t));return s.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){const a=[];t&&this._isMatch(e)&&a.push(this);let s=this.parent;for(;s;){if(s===n)return a;s._isMatch(e)&&a.push(s),s=s.parent}return a}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);let t,n,a=e.replace(/ /g,"").split(","),r=a.length;for(t=0;t<r;t++)if(n=a[t],s.Util.isValidSelector(n)||(s.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(p,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new s.Transform,this._eachAncestorReverse(function(e){const n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())},e),t;{t=this._cache.get(l)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const e=this.transformsEnabled();if("all"===e)t.multiply(this.getTransform());else if("position"===e){const e=this.attrs.x||0,n=this.attrs.y||0,a=this.attrs.offsetX||0,s=this.attrs.offsetY||0;t.translate(e-a,n-s)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(f,this._getTransform)}_getTransform(){var e,t;const n=this._cache.get(f)||new s.Transform;n.reset();const r=this.x(),i=this.y(),o=a.Konva.getAngle(this.rotation()),l=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,c=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,d=this.attrs.skewX||0,u=this.attrs.skewY||0,h=this.attrs.offsetX||0,m=this.attrs.offsetY||0;return 0===r&&0===i||n.translate(r,i),0!==o&&n.rotate(o),0===d&&0===u||n.skew(d,u),1===l&&1===c||n.scale(l,c),0===h&&0===m||n.translate(-1*h,-1*m),n.dirty=!1,n}clone(e){let t,n,a,r,i,o=s.Util.cloneObject(this.attrs);for(t in e)o[t]=e[t];const l=new this.constructor(o);for(t in this.eventListeners)for(n=this.eventListeners[t],a=n.length,r=0;r<a;r++)i=n[r],i.name.indexOf("konva")<0&&(l.eventListeners[t]||(l.eventListeners[t]=[]),l.eventListeners[t].push(i));return l}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),a=this.getStage(),s=void 0!==t.x?t.x:Math.floor(n.x),r=void 0!==t.y?t.y:Math.floor(n.y),i=t.pixelRatio||1,o=new e.SceneCanvas({width:t.width||Math.ceil(n.width)||(a?a.width():0),height:t.height||Math.ceil(n.height)||(a?a.height():0),pixelRatio:i}),l=o.getContext(),c=new e.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(s),height:o.height/o.pixelRatio+Math.abs(r),pixelRatio:o.pixelRatio});return!1===t.imageSmoothingEnabled&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(o,void 0,c),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){const t=(e=e||{}).mimeType||null,n=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(a),a}toImage(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,s.Util._urlToImage(this.toDataURL(e),function(e){t(e),null==n||n(e)})}catch(GQ){n(GQ)}})}toBlob(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob(e=>{t(e),null==n||n(e)},null==e?void 0:e.mimeType,null==e?void 0:e.quality)}catch(GQ){n(GQ)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance}_off(e,t,n){let a,s,r,i=this.eventListeners[e];for(a=0;a<i.length;a++)if(s=i[a].name,r=i[a].handler,!("konva"===s&&"konva"!==t||t&&s!==t||n&&n!==r)){if(i.splice(a,1),0===i.length){delete this.eventListeners[e];break}a--}}_fireChangeEvent(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){const t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();if(!t)return!1;return-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){const t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){const n=this["set"+s.Util._capitalize(e)];return s.Util._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(a.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){const n=this.attrs[e];(n!==t||s.Util.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){let a;void 0!==n&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,a,n))}_fireAndBubble(e,t,n){t&&this.nodeType===h&&(t.target=this);const a=["mouseenter","mouseleave","pointerenter","pointerleave","touchenter","touchleave"];if(!(-1!==a.indexOf(e)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(e,t);const s=-1!==a.indexOf(e)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!s&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n,a;const s=null!==(t=this._cache.get(o))&&void 0!==t?t:{};let r=null==s?void 0:s[e];if(void 0===r){r=[];let t=Object.getPrototypeOf(this);for(;t;){const s=null!==(a=null===(n=t.eventListeners)||void 0===n?void 0:n[e])&&void 0!==a?a:[];r.push(...s),t=Object.getPrototypeOf(t)}s[e]=r,this._cache.set(o,s)}return r}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(let s=0;s<n.length;s++)n[s].handler.call(this,t);const a=this.eventListeners[e];if(a)for(let s=0;s<a.length;s++)a[s].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,a=this.getStage(),s=this.getAbsolutePosition();if(!a)return;const r=a._getPointerById(n)||a._changedPointerPositions[0]||s;t.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){t.DD._dragElements.has(this._id)||this._createDragElement(e);t.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(!n)return;let a={x:n.x-t.offset.x,y:n.y-t.offset.y};const r=this.dragBoundFunc();if(void 0!==r){const t=r.call(this,a,e);t?a=t:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===a.x&&this._lastPos.y===a.y||(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}stopDrag(e){const n=t.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),t.DD._endDragBefore(e),t.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=t.DD._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(void 0!==e.evt.button)||a.Konva.dragButtons.indexOf(e.evt.button)>=0))return;if(this.isDragging())return;let n=!1;t.DD._dragElements.forEach(e=>{this.isAncestorOf(e.node)&&(n=!0)}),n||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();if(!this.getStage())return;const e=t.DD._dragElements.get(this._id),n=e&&"dragging"===e.dragStatus,a=e&&"ready"===e.dragStatus;n?this.stopDrag():a&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return s.Util.haveIntersection(n,this.getClientRect())}static create(e,t){return s.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let n,r,i,o=y.prototype.getClassName.call(e),l=e.children;t&&(e.attrs.container=t),a.Konva[o]||(s.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");if(n=new(0,a.Konva[o])(e.attrs),l)for(r=l.length,i=0;i<r;i++)n.add(y._createNode(l[i]));return n}}$z.Node=y,y.prototype.nodeType="Node",y.prototype._attrsAffectingSize=[],y.prototype.eventListeners={},y.prototype.on.call(y.prototype,x,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(f),this._clearSelfAndDescendantCache(l))}),y.prototype.on.call(y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(g)}),y.prototype.on.call(y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(u)}),y.prototype.on.call(y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const b=n.Factory.addGetterSetter;return b(y,"zIndex"),b(y,"absolutePosition"),b(y,"position"),b(y,"x",0,(0,r.getNumberValidator)()),b(y,"y",0,(0,r.getNumberValidator)()),b(y,"globalCompositeOperation","source-over",(0,r.getStringValidator)()),b(y,"opacity",1,(0,r.getNumberValidator)()),b(y,"name","",(0,r.getStringValidator)()),b(y,"id","",(0,r.getStringValidator)()),b(y,"rotation",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"scale",["x","y"]),b(y,"scaleX",1,(0,r.getNumberValidator)()),b(y,"scaleY",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"skew",["x","y"]),b(y,"skewX",0,(0,r.getNumberValidator)()),b(y,"skewY",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"offset",["x","y"]),b(y,"offsetX",0,(0,r.getNumberValidator)()),b(y,"offsetY",0,(0,r.getNumberValidator)()),b(y,"dragDistance",void 0,(0,r.getNumberValidator)()),b(y,"width",0,(0,r.getNumberValidator)()),b(y,"height",0,(0,r.getNumberValidator)()),b(y,"listening",!0,(0,r.getBooleanValidator)()),b(y,"preventDefault",!0,(0,r.getBooleanValidator)()),b(y,"filters",void 0,function(e){return this._filterUpToDate=!1,e}),b(y,"visible",!0,(0,r.getBooleanValidator)()),b(y,"transformsEnabled","all",(0,r.getStringValidator)()),b(y,"size"),b(y,"dragBoundFunc"),b(y,"draggable",!1,(0,r.getBooleanValidator)()),n.Factory.backCompat(y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),$z}var aB,sB={};function rB(){if(aB)return sB;aB=1,Object.defineProperty(sB,"__esModule",{value:!0}),sB.Container=void 0;const e=tB(),t=nB(),n=eB();let a=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(let t=0;t<e.length;t++)this.add(e[t]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const n=[];return this._descendants(a=>{const s=a._isMatch(e);return s&&n.push(a),!(!s||!t)}),n}_descendants(e){let t=!1;const n=this.getChildren();for(const a of n){if(t=e(a),t)return!0;if(a.hasChildren()&&(t=a._descendants(e),t))return!0}return!1}toObject(){const e=t.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const n=t.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(e){n.add(e.clone())}),n}getAllIntersections(e){const t=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&t.push(n)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach(function(t){t._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach(function(e,t){e.index=t}),this._requestDraw()}drawScene(e,t,n){const a=this.getLayer(),s=e||a&&a.getCanvas(),r=s&&s.getContext(),i=this._getCanvasCache(),o=i&&i.scene,l=s&&s.isCache;if(!this.isVisible()&&!l)return this;if(o){r.save();const e=this.getAbsoluteTransform(t).getMatrix();r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",s,t,n);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const n=this.getLayer(),a=e||n&&n.hitCanvas,s=a&&a.getContext(),r=this._getCanvasCache();if(r&&r.hit){s.save();const e=this.getAbsoluteTransform(t).getMatrix();s.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",a,t);return this}_drawChildren(e,t,n,a){var s;const r=t&&t.getContext(),i=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),c="number"==typeof i&&"number"==typeof o||l,d=n===this;if(c){r.save();const e=this.getAbsoluteTransform(n);let t,a=e.getMatrix();if(r.transform(a[0],a[1],a[2],a[3],a[4],a[5]),r.beginPath(),l)t=l.call(this,r,this);else{const e=this.clipX(),t=this.clipY();r.rect(e||0,t||0,i,o)}r.clip.apply(r,t),a=e.copy().invert().getMatrix(),r.transform(a[0],a[1],a[2],a[3],a[4],a[5])}const u=!d&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;u&&(r.save(),r._applyGlobalCompositeOperation(this)),null===(s=this.children)||void 0===s||s.forEach(function(s){s[e](t,n,a)}),u&&r.restore(),c&&r.restore()}getClientRect(e={}){var t;const n=e.skipTransform,a=e.relativeTo;let s,r,i,o,l={x:1/0,y:1/0,width:0,height:0};const c=this;null===(t=this.children)||void 0===t||t.forEach(function(t){if(!t.visible())return;const n=t.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===n.width&&0===n.height||(void 0===s?(s=n.x,r=n.y,i=n.x+n.width,o=n.y+n.height):(s=Math.min(s,n.x),r=Math.min(r,n.y),i=Math.max(i,n.x+n.width),o=Math.max(o,n.y+n.height)))});const d=this.find("Shape");let u=!1;for(let h=0;h<d.length;h++){if(d[h]._isVisible(this)){u=!0;break}}return l=u&&void 0!==s?{x:s,y:r,width:i-s,height:o-r}:{x:0,y:0,width:0,height:0},n?l:this._transformedRect(l,a)}};return sB.Container=a,e.Factory.addComponentsGetterSetter(a,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(a,"clipX",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clipY",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clipWidth",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clipHeight",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clipFunc"),sB}var iB,oB,lB={},cB={};function dB(){if(iB)return cB;iB=1,Object.defineProperty(cB,"__esModule",{value:!0}),cB.getCapturedShape=function(e){return t.get(e)},cB.createEvent=a,cB.hasPointerCapture=function(e,n){return t.get(e)===n},cB.setPointerCapture=function(e,r){s(e);if(!r.getStage())return;t.set(e,r),n&&r._fire("gotpointercapture",a(new PointerEvent("gotpointercapture")))},cB.releaseCapture=s;const e=Lz(),t=new Map,n=void 0!==e.Konva._global.PointerEvent;function a(e){return{evt:e,pointerId:e.pointerId}}function s(e,s){const r=t.get(e);if(!r)return;const i=r.getStage();i&&i.content,t.delete(e),n&&r._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}return cB}var uB,hB,mB={},pB={};function fB(){return uB||(uB=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Lz(),n=Oz(),a=tB(),s=nB(),r=eB(),i=Lz(),o=dB(),l="hasShadow",c="shadowRGBA",d="patternImage",u="linearGradient",h="radialGradient";let m;function p(){return m||(m=n.Util.createCanvasElement().getContext("2d"),m)}e.shapes={};class f extends s.Node{constructor(t){let a;for(super(t);a=n.Util.getRandomColor(),!a||a in e.shapes;);this.colorKey=a,e.shapes[a]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const a=new n.Transform;a.translate(this.fillPatternX(),this.fillPatternY()),a.rotate(t.Konva.getAngle(this.fillPatternRotation())),a.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),a.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=a.getMatrix(),r="undefined"==typeof DOMMatrix?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=p(),n=this.fillLinearGradientStartPoint(),a=this.fillLinearGradientEndPoint(),s=t.createLinearGradient(n.x,n.y,a.x,a.y);for(let r=0;r<e.length;r+=2)s.addColorStop(e[r],e[r+1]);return s}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=p(),n=this.fillRadialGradientStartPoint(),a=this.fillRadialGradientEndPoint(),s=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),a.x,a.y,this.fillRadialGradientEndRadius());for(let r=0;r<e.length;r+=2)s.addColorStop(e[r],e[r+1]);return s}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=n.Util.colorToRGBA(this.shadowColor());return e?"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")":void 0}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const n=t.bufferHitCanvas;n.getContext().clear(),this.drawHit(n,void 0,!0);return n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;const n=e||this.hasFill(),a=this.hasStroke(),s=1!==this.getAbsoluteOpacity();if(n&&a&&s)return!0;const r=this.hasShadow(),i=this.shadowForStrokeEnabled();return!!(n&&a&&r&&i)}setStrokeHitEnabled(e){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,n=this.getParent();for(;n;){if(n.isCached()){t=!0;break}n=n.getParent()}const a=e.skipTransform,s=e.relativeTo||t&&this.getStage()||void 0,r=this.getSelfRect(),i=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+i,l=r.height+i,c=!e.skipShadow&&this.hasShadow(),d=c?this.shadowOffsetX():0,u=c?this.shadowOffsetY():0,h=o+Math.abs(d),m=l+Math.abs(u),p=c&&this.shadowBlur()||0,f={width:h+2*p,height:m+2*p,x:-(i/2+p)+Math.min(d,0)+r.x,y:-(i/2+p)+Math.min(u,0)+r.y};return a?f:this._transformedRect(f,s)}drawScene(e,t,n){const a=this.getLayer(),s=(e||a.getCanvas()).getContext(),r=this._getCanvasCache(),i=this.getSceneFunc(),o=this.hasShadow();let l;const c=t===this;if(!this.isVisible()&&!c)return this;if(r){s.save();const e=this.getAbsoluteTransform(t).getMatrix();return s.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!i)return this;if(s.save(),this._useBufferCanvas()){l=this.getStage();const e=n||l.bufferCanvas,a=e.getContext();a.clear(),a.save(),a._applyLineJoin(this);const r=this.getAbsoluteTransform(t).getMatrix();a.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.call(this,a,this),a.restore();const c=e.pixelRatio;o&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(e._canvas,e.x||0,e.y||0,e.width/c,e.height/c)}else{if(s._applyLineJoin(this),!c){const e=this.getAbsoluteTransform(t).getMatrix();s.transform(e[0],e[1],e[2],e[3],e[4],e[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}o&&s._applyShadow(this),i.call(this,s,this)}return s.restore(),this}drawHit(e,t,a=!1){if(!this.shouldDrawHit(t,a))return this;const s=this.getLayer(),r=e||s.hitCanvas,i=r&&r.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){i.save();const e=this.getAbsoluteTransform(t).getMatrix();return i.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(i),i.restore(),this}if(!o)return this;i.save(),i._applyLineJoin(this);if(!(this===t)){const e=this.getAbsoluteTransform(t).getMatrix();i.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return o.call(this,i,this),i.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),a=this._getCachedSceneCanvas(),s=t.hit,r=s.getContext(),i=s.getWidth(),o=s.getHeight();r.clear(),r.drawImage(a._canvas,0,0,i,o);try{const t=r.getImageData(0,0,i,o),a=t.data,s=a.length,l=n.Util._hexToRgb(this.colorKey);for(let n=0;n<s;n+=4){a[n+3]>e?(a[n]=l.r,a[n+1]=l.g,a[n+2]=l.b,a[n+3]=255):a[n+3]=0}r.putImageData(t,0,0)}catch(l){n.Util.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(e){return o.hasPointerCapture(e,this)}setPointerCapture(e){o.setPointerCapture(e,this)}releaseCapture(e){o.releaseCapture(e,this)}}e.Shape=f,f.prototype._fillFunc=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},f.prototype._strokeFunc=function(e){e.stroke()},f.prototype._fillFuncHit=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},f.prototype._strokeFuncHit=function(e){e.stroke()},f.prototype._centroid=!1,f.prototype.nodeType="Shape",(0,i._registerNode)(f),f.prototype.eventListeners={},f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(l)}),f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(c)}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(d)}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(u)}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(h)}),a.Factory.addGetterSetter(f,"stroke",void 0,(0,r.getStringOrGradientValidator)()),a.Factory.addGetterSetter(f,"strokeWidth",2,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(f,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(f,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),a.Factory.addGetterSetter(f,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),a.Factory.addGetterSetter(f,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),a.Factory.addGetterSetter(f,"lineJoin"),a.Factory.addGetterSetter(f,"lineCap"),a.Factory.addGetterSetter(f,"sceneFunc"),a.Factory.addGetterSetter(f,"hitFunc"),a.Factory.addGetterSetter(f,"dash"),a.Factory.addGetterSetter(f,"dashOffset",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"shadowColor",void 0,(0,r.getStringValidator)()),a.Factory.addGetterSetter(f,"shadowBlur",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"shadowOpacity",1,(0,r.getNumberValidator)()),a.Factory.addComponentsGetterSetter(f,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(f,"shadowOffsetX",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"shadowOffsetY",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"fillPatternImage"),a.Factory.addGetterSetter(f,"fill",void 0,(0,r.getStringOrGradientValidator)()),a.Factory.addGetterSetter(f,"fillPatternX",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"fillPatternY",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(f,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(f,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(f,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(f,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(f,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(f,"fillEnabled",!0),a.Factory.addGetterSetter(f,"strokeEnabled",!0),a.Factory.addGetterSetter(f,"shadowEnabled",!0),a.Factory.addGetterSetter(f,"dashEnabled",!0),a.Factory.addGetterSetter(f,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(f,"fillPriority","color"),a.Factory.addComponentsGetterSetter(f,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(f,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),a.Factory.addComponentsGetterSetter(f,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(f,"fillPatternScaleX",1,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(f,"fillPatternScaleY",1,(0,r.getNumberValidator)()),a.Factory.addComponentsGetterSetter(f,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(f,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(f,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(f,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(f,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(f,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(f,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(f,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(f,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(f,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(f,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(f,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(f,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(f,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(f,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(f,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(f,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(f,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(f,"fillPatternRotation",0),a.Factory.addGetterSetter(f,"fillRule",void 0,(0,r.getStringValidator)()),a.Factory.backCompat(f,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(pB)),pB}function gB(){if(hB)return mB;hB=1,Object.defineProperty(mB,"__esModule",{value:!0}),mB.Layer=void 0;const e=Oz(),t=rB(),n=nB(),a=tB(),s=Hz(),r=eB(),i=fB(),o=Lz(),l=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],c=l.length;class d extends t.Container{constructor(e){super(e),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),t&&t.parentNode&&e.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();"Group"!==n&&"Shape"!==n&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,n=!1;for(;;){for(let a=0;a<c;a++){const s=l[a],r=this._getIntersection({x:e.x+s.x*t,y:e.y+s.y*t}),i=r.shape;if(i)return i;if(n=!!r.antialiased,!r.antialiased)break}if(!n)return null;t+=1}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,a=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,s=a[3];if(255===s){const t=e.Util._rgbToHex(a[0],a[1],a[2]),n=i.shapes["#"+t];return n?{shape:n}:{antialiased:!0}}return s>0?{antialiased:!0}:{}}drawScene(e,n,a){const s=this.getLayer(),r=e||s&&s.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),t.Container.prototype.drawScene.call(this,r,n,a),this._fire("draw",{node:this}),this}drawHit(e,n){const a=this.getLayer(),s=e||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return mB.Layer=d,d.prototype.nodeType="Layer",(0,o._registerNode)(d),a.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),a.Factory.addGetterSetter(d,"clearBeforeDraw",!0),a.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,r.getBooleanValidator)()),mB}var xB,vB={};var yB,bB={};function wB(){if(yB)return bB;yB=1,Object.defineProperty(bB,"__esModule",{value:!0}),bB.Group=void 0;const e=Oz(),t=rB(),n=Lz();class a extends t.Container{_validateAdd(t){const n=t.getType();"Group"!==n&&"Shape"!==n&&e.Util.throw("You may only add groups and shapes to groups.")}}return bB.Group=a,a.prototype.nodeType="Group",(0,n._registerNode)(a),bB}var SB,jB={};function CB(){if(SB)return jB;SB=1,Object.defineProperty(jB,"__esModule",{value:!0}),jB.Animation=void 0;const e=Lz(),t=Oz(),n=e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return(new Date).getTime()};let a=class e{constructor(t,a){this.id=e.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=t,this.setLayers(a)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,n=t.length;for(let a=0;a<n;a++)if(t[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=e.animations,n=t.length;for(let e=0;e<n;e++)if(t[e].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),e._addAnimation(this),this}stop(){return e._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,n=this.animations,a=n.length;for(let s=0;s<a;s++)if(n[s].id===t){this.animations.splice(s,1);break}}static _runFrames(){const e={},t=this.animations;for(let a=0;a<t.length;a++){const s=t[a],r=s.layers,i=s.func;s._updateFrameObject(n());const o=r.length;let l;if(l=!i||!1!==i.call(s,s.frame),l)for(let t=0;t<o;t++){const n=r[t];void 0!==n._id&&(e[n._id]=n)}}for(const n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){const n=e;n.animations.length?(n._runFrames(),t.Util.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return jB.Animation=a,a.animations=[],a.animIdCounter=0,a.animRunning=!1,jB}var kB,NB,_B={};function EB(){return NB||(NB=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Lz(),n=Oz(),a=nB(),s=rB(),r=(oB||(oB=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Oz(),n=tB(),a=rB(),s=Lz(),r=Hz(),i=Wz(),o=Lz(),l=dB(),c="mouseleave",d="mouseover",u="mouseenter",h="mousemove",m="mousedown",p="mouseup",f="pointermove",g="pointerdown",x="pointerup",v="pointercancel",y="pointerout",b="pointerleave",w="pointerover",S="pointerenter",j="contextmenu",C="touchstart",k="touchend",N="touchmove",_="touchcancel",E="wheel",P=[[u,"_pointerenter"],[m,"_pointerdown"],[h,"_pointermove"],[p,"_pointerup"],[c,"_pointerleave"],[C,"_pointerdown"],[N,"_pointermove"],[k,"_pointerup"],[_,"_pointercancel"],[d,"_pointerover"],[E,"_wheel"],[j,"_contextmenu"],[g,"_pointerdown"],[f,"_pointermove"],[x,"_pointerup"],[v,"_pointercancel"],[b,"_pointerleave"],["lostpointercapture","_lostpointercapture"]],A={mouse:{[y]:"mouseout",[b]:c,[w]:d,[S]:u,[f]:h,[g]:m,[x]:p,[v]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[y]:"touchout",[b]:"touchleave",[w]:"touchover",[S]:"touchenter",[f]:N,[g]:C,[x]:k,[v]:_,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[y]:y,[b]:b,[w]:w,[S]:S,[f]:f,[g]:g,[x]:x,[v]:v,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},R=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",T=e=>{const t=R(e);return"pointer"===t?s.Konva.pointerEventsEnabled&&A.pointer:"touch"===t?A.touch:"mouse"===t?A.mouse:void 0};function M(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}e.stages=[];class D extends a.Container{constructor(t){super(M(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{M(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n="Layer"===e.getType(),a="FastLayer"===e.getType();n||a||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){let t;if("."===e.charAt(0)){const t=e.slice(1);e=document.getElementsByClassName(t)[0]}else t="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let n=0;n<t;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),a.Container.prototype.clone.call(this,e)}destroy(){super.destroy();const n=this.content;n&&t.Util._isInDocument(n)&&this.container().removeChild(n);const a=e.stages.indexOf(this);return a>-1&&e.stages.splice(a,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(t.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new r.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,a=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),a.forEach(function(t){if(!t.isVisible())return;const a=t._toKonvaCanvas(e);n.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children;for(let n=t.length-1;n>=0;n--){const a=t[n].getIntersection(e);if(a)return a}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(n=>{n.setSize({width:e,height:t}),n.draw()})}add(e,...n){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}super.add(e);const a=this.children.length;return a>5&&t.Util.warn("The stage has "+a+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),s.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return l.hasPointerCapture(e,this)}setPointerCapture(e){l.setPointerCapture(e,this)}releaseCapture(e){l.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&P.forEach(([e,t])=>{this.content.addEventListener(e,e=>{this[t](e)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=T(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=T(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=T(e.type),n=R(e.type);if(!t)return;this.setPointersPositions(e);const a=this._getTargetShape(n),r=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;a&&r?(a._fireAndBubble(t.pointerout,{evt:e}),a._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=T(e.type),n=R(e.type);if(!t)return;this.setPointersPositions(e);let a=!1;this._changedPointerPositions.forEach(r=>{const o=this.getIntersection(r);if(i.DD.justDragged=!1,s.Konva["_"+n+"ListenClick"]=!0,!o||!o.isListening())return void(this[n+"ClickStartShape"]=void 0);s.Konva.capturePointerEventsEnabled&&o.setPointerCapture(r.id),this[n+"ClickStartShape"]=o,o._fireAndBubble(t.pointerdown,{evt:e,pointerId:r.id}),a=!0;const l=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),a||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=T(e.type),n=R(e.type);if(!t)return;if(s.Konva.isDragging()&&i.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),(s.Konva.isDragging()||s.Konva.isTransforming())&&!s.Konva.hitOnDragEnabled)return;const a={};let r=!1;const o=this._getTargetShape(n);this._changedPointerPositions.forEach(s=>{const i=l.getCapturedShape(s.id)||this.getIntersection(s),c=s.id,d={evt:e,pointerId:c},u=o!==i;if(u&&o&&(o._fireAndBubble(t.pointerout,{...d},i),o._fireAndBubble(t.pointerleave,{...d},i)),i){if(a[i._id])return;a[i._id]=!0}i&&i.isListening()?(r=!0,u&&(i._fireAndBubble(t.pointerover,{...d},o),i._fireAndBubble(t.pointerenter,{...d},o),this[n+"targetShape"]=i),i._fireAndBubble(t.pointermove,{...d})):o&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:c}),this[n+"targetShape"]=null)}),r||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=T(e.type),n=R(e.type);if(!t)return;this.setPointersPositions(e);const a=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"],o={};let c=!1;this._changedPointerPositions.forEach(d=>{const u=l.getCapturedShape(d.id)||this.getIntersection(d);if(u){if(u.releaseCapture(d.id),o[u._id])return;o[u._id]=!0}const h=d.id,m={evt:e,pointerId:h};let p=!1;s.Konva["_"+n+"InDblClickWindow"]?(p=!0,clearTimeout(this[n+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){s.Konva["_"+n+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),u&&u.isListening()?(c=!0,this[n+"ClickEndShape"]=u,u._fireAndBubble(t.pointerup,{...m}),s.Konva["_"+n+"ListenClick"]&&a&&a===u&&(u._fireAndBubble(t.pointerclick,{...m}),p&&r&&r===u&&u._fireAndBubble(t.pointerdblclick,{...m}))):(this[n+"ClickEndShape"]=null,s.Konva["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:h}),p&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:h}))}),c||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&"pointer"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(j,{evt:e}):this._fire(j,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(E,{evt:e}):this._fire(E,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=l.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(x,l.createEvent(e)),l.releaseCapture(e.pointerId)}_lostpointercapture(e){l.releaseCapture(e.pointerId)}setPointersPositions(e){const n=this._getContentPosition();let a=null,s=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-n.left)/n.scaleX,y:(e.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-n.left)/n.scaleX,y:(e.clientY-n.top)/n.scaleY})})):(a=(e.clientX-n.left)/n.scaleX,s=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:a,y:s},this._pointerPositions=[{x:a,y:s,id:t.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:a,y:s,id:t.Util._getFirstPointerId(e)}])}_setPointerPosition(e){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}e.Stage=D,D.prototype.nodeType="Stage",(0,o._registerNode)(D),n.Factory.addGetterSetter(D,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(e=>{e.batchDraw()})})}(lB)),lB),i=gB(),o=function(){if(xB)return vB;xB=1,Object.defineProperty(vB,"__esModule",{value:!0}),vB.FastLayer=void 0;const e=Oz(),t=gB(),n=Lz();let a=class extends t.Layer{constructor(t){super(t),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return vB.FastLayer=a,a.prototype.nodeType="FastLayer",(0,n._registerNode)(a),vB}(),l=wB(),c=Wz(),d=fB(),u=CB(),h=(kB||(kB=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Oz(),n=CB(),a=nB(),s=Lz(),r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=["fill","stroke","shadowColor"];let o=0;class l{constructor(e,t,n,a,s,r,i){this.prop=e,this.propFunc=t,this.begin=a,this._pos=a,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=i,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=s-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class c{constructor(a){const i=this,d=a.node,u=d._id,h=a.easing||e.Easings.Linear,m=!!a.yoyo;let p,f;p=void 0===a.duration?.3:0===a.duration?.001:a.duration,this.node=d,this._id=o++;const g=d.getLayer()||(d instanceof s.Konva.Stage?d.getLayers():null);for(f in g||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){i.tween.onEnterFrame()},g),this.tween=new l(f,function(e){i._tweenFunc(e)},h,0,1,1e3*p,m),this._addListeners(),c.attrs[u]||(c.attrs[u]={}),c.attrs[u][this._id]||(c.attrs[u][this._id]={}),c.tweens[u]||(c.tweens[u]={}),a)void 0===r[f]&&this._addAttr(f,a[f]);this.reset(),this.onFinish=a.onFinish,this.onReset=a.onReset,this.onUpdate=a.onUpdate}_addAttr(e,n){const a=this.node,s=a._id;let r,o,l,d,u;const h=c.tweens[s][e];h&&delete c.attrs[s][h][e];let m=a.getAttr(e);if(t.Util._isArray(n))if(r=[],o=Math.max(n.length,m.length),"points"===e&&n.length!==m.length&&(n.length>m.length?(d=m,m=t.Util._prepareArrayForTween(m,n,a.closed())):(l=n,n=t.Util._prepareArrayForTween(n,m,a.closed()))),0===e.indexOf("fill"))for(let i=0;i<o;i++)if(i%2==0)r.push(n[i]-m[i]);else{const e=t.Util.colorToRGBA(m[i]);u=t.Util.colorToRGBA(n[i]),m[i]=e,r.push({r:u.r-e.r,g:u.g-e.g,b:u.b-e.b,a:u.a-e.a})}else for(let t=0;t<o;t++)r.push(n[t]-m[t]);else-1!==i.indexOf(e)?(m=t.Util.colorToRGBA(m),u=t.Util.colorToRGBA(n),r={r:u.r-m.r,g:u.g-m.g,b:u.b-m.b,a:u.a-m.a}):r=n-m;c.attrs[s][this._id][e]={start:m,diff:r,end:n,trueEnd:l,trueStart:d},c.tweens[s][e]=this._id}_tweenFunc(e){const n=this.node,a=c.attrs[n._id][this._id];let s,r,o,l,d,u,h,m;for(s in a){if(r=a[s],o=r.start,l=r.diff,m=r.end,t.Util._isArray(o))if(d=[],h=Math.max(o.length,m.length),0===s.indexOf("fill"))for(u=0;u<h;u++)u%2==0?d.push((o[u]||0)+l[u]*e):d.push("rgba("+Math.round(o[u].r+l[u].r*e)+","+Math.round(o[u].g+l[u].g*e)+","+Math.round(o[u].b+l[u].b*e)+","+(o[u].a+l[u].a*e)+")");else for(u=0;u<h;u++)d.push((o[u]||0)+l[u]*e);else d=-1!==i.indexOf(s)?"rgba("+Math.round(o.r+l.r*e)+","+Math.round(o.g+l.g*e)+","+Math.round(o.b+l.b*e)+","+(o.a+l.a*e)+")":o+l*e;n.setAttr(s,d)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,n=c.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const a in n)delete c.tweens[e][a];delete c.attrs[e][t],c.tweens[e]&&(0===Object.keys(c.tweens[e]).length&&delete c.tweens[e],0===Object.keys(c.attrs[e]).length&&delete c.attrs[e])}}e.Tween=c,c.attrs={},c.tweens={},a.Node.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new c(e).play()},e.Easings={BackEaseIn(e,t,n,a){const s=1.70158;return n*(e/=a)*e*((s+1)*e-s)+t},BackEaseOut(e,t,n,a){const s=1.70158;return n*((e=e/a-1)*e*((s+1)*e+s)+1)+t},BackEaseInOut(e,t,n,a){let s=1.70158;return(e/=a/2)<1?n/2*(e*e*((1+(s*=1.525))*e-s))+t:n/2*((e-=2)*e*((1+(s*=1.525))*e+s)+2)+t},ElasticEaseIn(e,t,n,a,s,r){let i=0;return 0===e?t:1===(e/=a)?t+n:(r||(r=.3*a),!s||s<Math.abs(n)?(s=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/s),-s*Math.pow(2,10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)+t)},ElasticEaseOut(e,t,n,a,s,r){let i=0;return 0===e?t:1===(e/=a)?t+n:(r||(r=.3*a),!s||s<Math.abs(n)?(s=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*e)*Math.sin((e*a-i)*(2*Math.PI)/r)+n+t)},ElasticEaseInOut(e,t,n,a,s,r){let i=0;return 0===e?t:2==(e/=a/2)?t+n:(r||(r=a*(.3*1.5)),!s||s<Math.abs(n)?(s=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/s),e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)*-.5+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)*.5+n+t)},BounceEaseOut:(e,t,n,a)=>(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(t,n,a,s)=>a-e.Easings.BounceEaseOut(s-t,0,a,s)+n,BounceEaseInOut:(t,n,a,s)=>t<s/2?.5*e.Easings.BounceEaseIn(2*t,0,a,s)+n:.5*e.Easings.BounceEaseOut(2*t-s,0,a,s)+.5*a+n,EaseIn:(e,t,n,a)=>n*(e/=a)*e+t,EaseOut:(e,t,n,a)=>-n*(e/=a)*(e-2)+t,EaseInOut:(e,t,n,a)=>(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,a)=>n*(e/=a)*e*e*e*e+t,StrongEaseOut:(e,t,n,a)=>n*((e=e/a-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,a)=>(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,a)=>n*e/a+t}}(_B)),_B),m=qz(),p=Hz();e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:a.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:c.DD,Shape:d.Shape,shapes:d.shapes,Animation:u.Animation,Tween:h.Tween,Easings:h.Easings,Context:m.Context,Canvas:p.Canvas}),e.default=e.Konva}(Mz)),Mz}var PB,AB={};var RB,TB={},MB={};function DB(){if(RB)return MB;RB=1,Object.defineProperty(MB,"__esModule",{value:!0}),MB.Line=void 0;const e=tB(),t=Lz(),n=fB(),a=eB();function s(e,t,n,a,s,r,i){const o=Math.sqrt(Math.pow(n-e,2)+Math.pow(a-t,2)),l=Math.sqrt(Math.pow(s-n,2)+Math.pow(r-a,2)),c=i*o/(o+l),d=i*l/(o+l);return[n-c*(s-e),a-c*(r-t),n+d*(s-e),a+d*(r-t)]}function r(e,t){const n=e.length,a=[];for(let r=2;r<n-2;r+=2){const n=s(e[r-2],e[r-1],e[r],e[r+1],e[r+2],e[r+3],t);isNaN(n[0])||(a.push(n[0]),a.push(n[1]),a.push(e[r]),a.push(e[r+1]),a.push(n[2]),a.push(n[3]))}return a}class i extends n.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),n=t.length,a=this.tension(),s=this.closed(),r=this.bezier();if(!n)return;let i=0;if(e.beginPath(),e.moveTo(t[0],t[1]),0!==a&&n>4){const a=this.getTensionPoints(),r=a.length;for(i=s?0:4,s||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);i<r-2;)e.bezierCurveTo(a[i++],a[i++],a[i++],a[i++],a[i++],a[i++]);s||e.quadraticCurveTo(a[r-2],a[r-1],t[n-2],t[n-1])}else if(r)for(i=2;i<n;)e.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);else for(i=2;i<n;i+=2)e.lineTo(t[i],t[i+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():r(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,n=this.tension(),a=s(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),i=s(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),o=r(e,n);return[a[2],a[3]].concat(o).concat([i[0],i[1],e[t-2],e[t-1],i[2],i[3],a[0],a[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points();let t,n,a=e[0],s=e[0],r=e[1],i=e[1];for(let o=0;o<e.length/2;o++)t=e[2*o],n=e[2*o+1],a=Math.min(a,t),s=Math.max(s,t),r=Math.min(r,n),i=Math.max(i,n);return{x:a,y:r,width:s-a,height:i-r}}}return MB.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,a.getNumberArrayValidator)()),MB}var LB,FB,IB,OB={},zB={};function BB(){if(FB)return OB;FB=1,Object.defineProperty(OB,"__esModule",{value:!0}),OB.Path=void 0;const e=tB(),t=Lz(),n=fB(),a=(LB||(LB=1,function(e){function t(e,t,a){const s=n(1,a,e),r=n(1,a,t),i=s*s+r*r;return Math.sqrt(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],e.getCubicArcLength=(n,a,s)=>{let r,i;const o=s/2;r=0;for(let l=0;l<20;l++)i=o*e.tValues[20][l]+o,r+=e.cValues[20][l]*t(n,a,i);return o*r},e.getQuadraticArcLength=(e,t,n)=>{void 0===n&&(n=1);const a=e[0]-2*e[1]+e[2],s=t[0]-2*t[1]+t[2],r=2*e[1]-2*e[0],i=2*t[1]-2*t[0],o=4*(a*a+s*s),l=4*(a*r+s*i),c=r*r+i*i;if(0===o)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const d=l/(2*o),u=n+d,h=c/o-d*d,m=u*u+h>0?Math.sqrt(u*u+h):0,p=d*d+h>0?Math.sqrt(d*d+h):0,f=d+Math.sqrt(d*d+h)!==0?h*Math.log(Math.abs((u+m)/(d+p))):0;return Math.sqrt(o)/2*(u*m-d*p+f)};const n=(t,a,s)=>{const r=s.length-1;let i,o;if(0===r)return 0;if(0===t){o=0;for(let t=0;t<=r;t++)o+=e.binomialCoefficients[r][t]*Math.pow(1-a,r-t)*Math.pow(a,t)*s[t];return o}i=new Array(r);for(let e=0;e<r;e++)i[e]=r*(s[e+1]-s[e]);return n(t-1,a,i)};e.t2length=(e,t,n)=>{let a=1,s=e/t,r=(e-n(s))/t,i=0;for(;a>.001;){const o=n(s+r),l=Math.abs(e-o)/t;if(l<a)a=l,s+=r;else{const i=n(s-r),o=Math.abs(e-i)/t;o<a?(a=o,s-=r):r/=2}if(i++,i>500)break}return s}}(zB)),zB);class s extends n.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let n=!1;for(let a=0;a<t.length;a++){const s=t[a].command,r=t[a].points;switch(s){case"L":e.lineTo(r[0],r[1]);break;case"M":e.moveTo(r[0],r[1]);break;case"C":e.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":e.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":const t=r[0],a=r[1],s=r[2],i=r[3],o=r[4],l=r[5],c=r[6],d=r[7],u=s>i?s:i,h=s>i?1:s/i,m=s>i?i/s:1;e.translate(t,a),e.rotate(c),e.scale(h,m),e.arc(0,0,u,o,o+l,1-d),e.scale(1/h,1/m),e.rotate(-c),e.translate(-t,-a);break;case"z":n=!0,e.closePath()}}n||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(t){if("A"===t.command){const n=t.points[4],a=t.points[5],r=t.points[4]+a;let i=Math.PI/180;if(Math.abs(n-r)<i&&(i=Math.abs(n-r)),a<0)for(let o=n-i;o>r;o-=i){const n=s.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],o,0);e.push(n.x,n.y)}else for(let o=n+i;o<r;o+=i){const n=s.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],o,0);e.push(n.x,n.y)}}else if("C"===t.command)for(let n=0;n<=1;n+=.01){const a=s.getPointOnCubicBezier(n,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);e.push(a.x,a.y)}else e=e.concat(t.points)});let t,n,a=e[0],r=e[0],i=e[1],o=e[1];for(let s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],isNaN(t)||(a=Math.min(a,t),r=Math.max(r,t)),isNaN(n)||(i=Math.min(i,n),o=Math.max(o,n));return{x:a,y:i,width:r-a,height:o-i}}getLength(){return this.pathLength}getPointAtLength(e){return s.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,n,a){return Math.sqrt((n-e)*(n-e)+(a-t)*(a-t))}static getPathLength(e){let t=0;for(let n=0;n<e.length;++n)t+=e[n].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let n,r=0,i=t.length;if(!i)return null;for(;r<i&&e>t[r].pathLength;)e-=t[r].pathLength,++r;if(r===i)return n=t[r-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01){return"M"===t[r].command?(n=t[r].points.slice(0,2),{x:n[0],y:n[1]}):{x:t[r].start.x,y:t[r].start.y}}const o=t[r],l=o.points;switch(o.command){case"L":return s.getPointOnLine(e,o.start.x,o.start.y,l[0],l[1]);case"C":return s.getPointOnCubicBezier((0,a.t2length)(e,s.getPathLength(t),e=>(0,a.getCubicArcLength)([o.start.x,l[0],l[2],l[4]],[o.start.y,l[1],l[3],l[5]],e)),o.start.x,o.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return s.getPointOnQuadraticBezier((0,a.t2length)(e,s.getPathLength(t),e=>(0,a.getQuadraticArcLength)([o.start.x,l[0],l[2]],[o.start.y,l[1],l[3]],e)),o.start.x,o.start.y,l[0],l[1],l[2],l[3]);case"A":const n=l[0],r=l[1],i=l[2],c=l[3],d=l[5],u=l[6];let h=l[4];return h+=d*e/o.pathLength,s.getPointOnEllipticalArc(n,r,i,c,h,u)}return null}static getPointOnLine(e,t,n,a,s,r,i){r=null!=r?r:t,i=null!=i?i:n;const o=this.getLineLength(t,n,a,s);if(o<1e-10)return{x:t,y:n};if(a===t)return{x:r,y:i+(s>n?e:-e)};const l=(s-n)/(a-t),c=Math.sqrt(e*e/(1+l*l))*(a<t?-1:1),d=l*c;if(Math.abs(i-n-l*(r-t))<1e-10)return{x:r+c,y:i+d};const u=((r-t)*(a-t)+(i-n)*(s-n))/(o*o),h=t+u*(a-t),m=n+u*(s-n),p=this.getLineLength(r,i,h,m),f=Math.sqrt(e*e-p*p),g=Math.sqrt(f*f/(1+l*l))*(a<t?-1:1);return{x:h+g,y:m+l*g}}static getPointOnCubicBezier(e,t,n,a,s,r,i,o,l){function c(e){return e*e*e}function d(e){return 3*e*e*(1-e)}function u(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}return{x:o*c(e)+r*d(e)+a*u(e)+t*h(e),y:l*c(e)+i*d(e)+s*u(e)+n*h(e)}}static getPointOnQuadraticBezier(e,t,n,a,s,r,i){function o(e){return e*e}function l(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:r*o(e)+a*l(e)+t*c(e),y:i*o(e)+s*l(e)+n*c(e)}}static getPointOnEllipticalArc(e,t,n,a,s,r){const i=Math.cos(r),o=Math.sin(r),l=n*Math.cos(s),c=a*Math.sin(s);return{x:e+(l*i-c*o),y:t+(l*o+c*i)}}static parsePathData(e){if(!e)return[];let t=e;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let d=0;d<n.length;d++)t=t.replace(new RegExp(n[d],"g"),"|"+n[d]);const a=t.split("|"),s=[],r=[];let i=0,o=0;const l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(let d=1;d<a.length;d++){let e=a[d],t=e.charAt(0);for(e=e.slice(1),r.length=0;c=l.exec(e);)r.push(c[0]);const n=[];for(let a=0,s=r.length;a<s;a++){if("00"===r[a]){n.push(0,0);continue}const e=parseFloat(r[a]);isNaN(e)?n.push(0):n.push(e)}for(;n.length>0&&!isNaN(n[0]);){let e="",a=[];const r=i,l=o;let c,d,u,h,m,p,f,g,x,v;switch(t){case"l":i+=n.shift(),o+=n.shift(),e="L",a.push(i,o);break;case"L":i=n.shift(),o=n.shift(),a.push(i,o);break;case"m":const r=n.shift(),l=n.shift();if(i+=r,o+=l,e="M",s.length>2&&"z"===s[s.length-1].command)for(let e=s.length-2;e>=0;e--)if("M"===s[e].command){i=s[e].points[0]+r,o=s[e].points[1]+l;break}a.push(i,o),t="l";break;case"M":i=n.shift(),o=n.shift(),e="M",a.push(i,o),t="L";break;case"h":i+=n.shift(),e="L",a.push(i,o);break;case"H":i=n.shift(),e="L",a.push(i,o);break;case"v":o+=n.shift(),e="L",a.push(i,o);break;case"V":o=n.shift(),e="L",a.push(i,o);break;case"C":a.push(n.shift(),n.shift(),n.shift(),n.shift()),i=n.shift(),o=n.shift(),a.push(i,o);break;case"c":a.push(i+n.shift(),o+n.shift(),i+n.shift(),o+n.shift()),i+=n.shift(),o+=n.shift(),e="C",a.push(i,o);break;case"S":d=i,u=o,c=s[s.length-1],"C"===c.command&&(d=i+(i-c.points[2]),u=o+(o-c.points[3])),a.push(d,u,n.shift(),n.shift()),i=n.shift(),o=n.shift(),e="C",a.push(i,o);break;case"s":d=i,u=o,c=s[s.length-1],"C"===c.command&&(d=i+(i-c.points[2]),u=o+(o-c.points[3])),a.push(d,u,i+n.shift(),o+n.shift()),i+=n.shift(),o+=n.shift(),e="C",a.push(i,o);break;case"Q":a.push(n.shift(),n.shift()),i=n.shift(),o=n.shift(),a.push(i,o);break;case"q":a.push(i+n.shift(),o+n.shift()),i+=n.shift(),o+=n.shift(),e="Q",a.push(i,o);break;case"T":d=i,u=o,c=s[s.length-1],"Q"===c.command&&(d=i+(i-c.points[0]),u=o+(o-c.points[1])),i=n.shift(),o=n.shift(),e="Q",a.push(d,u,i,o);break;case"t":d=i,u=o,c=s[s.length-1],"Q"===c.command&&(d=i+(i-c.points[0]),u=o+(o-c.points[1])),i+=n.shift(),o+=n.shift(),e="Q",a.push(d,u,i,o);break;case"A":h=n.shift(),m=n.shift(),p=n.shift(),f=n.shift(),g=n.shift(),x=i,v=o,i=n.shift(),o=n.shift(),e="A",a=this.convertEndpointToCenterParameterization(x,v,i,o,f,g,h,m,p);break;case"a":h=n.shift(),m=n.shift(),p=n.shift(),f=n.shift(),g=n.shift(),x=i,v=o,i+=n.shift(),o+=n.shift(),e="A",a=this.convertEndpointToCenterParameterization(x,v,i,o,f,g,h,m,p)}s.push({command:e||t,points:a,start:{x:r,y:l},pathLength:this.calcLength(r,l,e||t,a)})}"z"!==t&&"Z"!==t||s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,t,n,r){let i,o,l,c;const d=s;switch(n){case"L":return d.getLineLength(e,t,r[0],r[1]);case"C":return(0,a.getCubicArcLength)([e,r[0],r[2],r[4]],[t,r[1],r[3],r[5]],1);case"Q":return(0,a.getQuadraticArcLength)([e,r[0],r[2]],[t,r[1],r[3]],1);case"A":i=0;const n=r[4],s=r[5],u=r[4]+s;let h=Math.PI/180;if(Math.abs(n-u)<h&&(h=Math.abs(n-u)),o=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],n,0),s<0)for(c=n-h;c>u;c-=h)l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+=d.getLineLength(o.x,o.y,l.x,l.y),o=l;else for(c=n+h;c<u;c+=h)l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+=d.getLineLength(o.x,o.y,l.x,l.y),o=l;return l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),i+=d.getLineLength(o.x,o.y,l.x,l.y),i}return 0}static convertEndpointToCenterParameterization(e,t,n,a,s,r,i,o,l){const c=l*(Math.PI/180),d=Math.cos(c)*(e-n)/2+Math.sin(c)*(t-a)/2,u=-1*Math.sin(c)*(e-n)/2+Math.cos(c)*(t-a)/2,h=d*d/(i*i)+u*u/(o*o);h>1&&(i*=Math.sqrt(h),o*=Math.sqrt(h));let m=Math.sqrt((i*i*(o*o)-i*i*(u*u)-o*o*(d*d))/(i*i*(u*u)+o*o*(d*d)));s===r&&(m*=-1),isNaN(m)&&(m=0);const p=m*i*u/o,f=m*-o*d/i,g=(e+n)/2+Math.cos(c)*p-Math.sin(c)*f,x=(t+a)/2+Math.sin(c)*p+Math.cos(c)*f,v=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},y=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(v(e)*v(t))},b=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(y(e,t))},w=b([1,0],[(d-p)/i,(u-f)/o]),S=[(d-p)/i,(u-f)/o],j=[(-1*d-p)/i,(-1*u-f)/o];let C=b(S,j);return y(S,j)<=-1&&(C=Math.PI),y(S,j)>=1&&(C=0),0===r&&C>0&&(C-=2*Math.PI),1===r&&C<0&&(C+=2*Math.PI),[g,x,i,o,w,C,c,r]}}return OB.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),OB}var $B,UB={};var VB,qB={};var HB,GB={};var KB,WB={};var QB,YB={};function XB(){if(QB)return YB;QB=1,Object.defineProperty(YB,"__esModule",{value:!0}),YB.Rect=void 0;const e=tB(),t=fB(),n=Lz(),a=Oz(),s=eB();class r extends t.Shape{_sceneFunc(e){const t=this.cornerRadius(),n=this.width(),s=this.height();e.beginPath(),t?a.Util.drawRoundedRectPath(e,n,s,t):e.rect(0,0,n,s),e.closePath(),e.fillStrokeShape(this)}}return YB.Rect=r,r.prototype.className="Rect",(0,n._registerNode)(r),e.Factory.addGetterSetter(r,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),YB}var ZB,JB={};var e$,t$={};var n$,a$={};var s$,r$={};var i$,o$={};function l$(){if(i$)return o$;i$=1,Object.defineProperty(o$,"__esModule",{value:!0}),o$.Text=void 0,o$.stringToArray=i;const e=Oz(),t=tB(),n=fB(),a=Lz(),s=eB(),r=Lz();function i(e){return[...e].reduce((e,t,n,a)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const s=a[n+1];s&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(s)?(e.push(t+s),a[n+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(a[n+1]||""))?e.push(t+a[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const o="auto",l="inherit",c="justify",d="left",u="middle",h="normal",m=" ",p="none",f=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],g=f.length;let x;function v(){return x||(x=e.Util.createCanvasElement().getContext("2d"),x)}class y extends n.Shape{constructor(e){super(function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<g;t++)this.on(f[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){const t=this.textArr,n=t.length;if(!this.text())return;let s,r=this.padding(),o=this.fontSize(),h=this.lineHeight()*o,m=this.verticalAlign(),p=this.direction(),f=0,g=this.align(),x=this.getWidth(),v=this.letterSpacing(),y=this.fill(),b=this.textDecoration(),w=-1!==b.indexOf("underline"),S=-1!==b.indexOf("line-through");p=p===l?e.direction:p;let j=h/2,C=u;if(a.Konva._fixTextRendering){const e=this.measureSize("M");C="alphabetic",j=(e.fontBoundingBoxAscent-e.fontBoundingBoxDescent)/2+h/2}for("rtl"===p&&e.setAttr("direction",p),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",C),e.setAttr("textAlign",d),m===u?f=(this.getHeight()-n*h-2*r)/2:"bottom"===m&&(f=this.getHeight()-n*h-2*r),e.translate(r,f+r),s=0;s<n;s++){let l=0,d=0;const u=t[s],m=u.text,f=u.width,b=u.lastInParagraph;if(e.save(),"right"===g?l+=x-f-2*r:"center"===g&&(l+=(x-f-2*r)/2),w){e.save(),e.beginPath();const t=l,n=j+d+(a.Konva._fixTextRendering?Math.round(o/4):Math.round(o/2));e.moveTo(t,n);const s=g!==c||b?f:x-2*r;e.lineTo(t+Math.round(s),n),e.lineWidth=o/15;const i=this._getLinearGradient();e.strokeStyle=i||y,e.stroke(),e.restore()}if(S){e.save(),e.beginPath();const t=a.Konva._fixTextRendering?-Math.round(o/4):0;e.moveTo(l,j+d+t);const n=g!==c||b?f:x-2*r;e.lineTo(l+Math.round(n),j+d+t),e.lineWidth=o/15;const s=this._getLinearGradient();e.strokeStyle=s||y,e.stroke(),e.restore()}if("rtl"===p||0===v&&g!==c)0!==v&&e.setAttr("letterSpacing",`${v}px`),this._partialTextX=l,this._partialTextY=j+d,this._partialText=m,e.fillStrokeShape(this);else{const t=m.split(" ").length-1,n=i(m);for(let a=0;a<n.length;a++){const s=n[a];" "!==s||b||g!==c||(l+=(x-2*r-f)/t),this._partialTextX=l,this._partialTextY=j+d,this._partialText=s,e.fillStrokeShape(this),l+=this.measureSize(s).width+v}}e.restore(),n>1&&(j+=h)}}_hitFunc(e){const t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(t){const n=e.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",n),this}getWidth(){return this.attrs.width===o||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===o||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n,a,s,r,i,o,l,c,d,u;let h,m=v(),p=this.fontSize();m.save(),m.font=this._getContextFont(),h=m.measureText(e),m.restore();const f=p/100;return{actualBoundingBoxAscent:null!==(t=h.actualBoundingBoxAscent)&&void 0!==t?t:71.58203125*f,actualBoundingBoxDescent:null!==(n=h.actualBoundingBoxDescent)&&void 0!==n?n:0,actualBoundingBoxLeft:null!==(a=h.actualBoundingBoxLeft)&&void 0!==a?a:-7.421875*f,actualBoundingBoxRight:null!==(s=h.actualBoundingBoxRight)&&void 0!==s?s:75.732421875*f,alphabeticBaseline:null!==(r=h.alphabeticBaseline)&&void 0!==r?r:0,emHeightAscent:null!==(i=h.emHeightAscent)&&void 0!==i?i:100*f,emHeightDescent:null!==(o=h.emHeightDescent)&&void 0!==o?o:-20*f,fontBoundingBoxAscent:null!==(l=h.fontBoundingBoxAscent)&&void 0!==l?l:91*f,fontBoundingBoxDescent:null!==(c=h.fontBoundingBoxDescent)&&void 0!==c?c:21*f,hangingBaseline:null!==(d=h.hangingBaseline)&&void 0!==d?d:72.80000305175781*f,ideographicBaseline:null!==(u=h.ideographicBaseline)&&void 0!==u?u:-21*f,width:h.width,height:p}}_getContextFont(){return this.fontStyle()+m+this.fontVariant()+m+(this.fontSize()+"px ")+this.fontFamily().split(",").map(e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e}).join(", ")}_addTextLine(e){this.align()===c&&(e=e.trim());const t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),n=e.length;return v().measureText(e).width+t*n}_setTextData(){let e=this.text().split("\n"),t=+this.fontSize(),n=0,a=this.lineHeight()*t,s=this.attrs.width,r=this.attrs.height,l=s!==o&&void 0!==s,c=r!==o&&void 0!==r,d=this.padding(),u=s-2*d,h=r-2*d,f=0,g=this.wrap(),x="char"!==g&&g!==p,y=this.ellipsis();this.textArr=[],v().font=this._getContextFont();const b=y?this._getTextWidth(""):0;for(let o=0,p=e.length;o<p;++o){let t=e[o],s=this._getTextWidth(t);if(l&&s>u)for(;t.length>0;){let e=0,r=i(t).length,o="",l=0;for(;e<r;){const n=e+r>>>1,s=i(t).slice(0,n+1).join(""),d=this._getTextWidth(s);(y&&c&&f+a>h?d+b:d)<=u?(e=n+1,o=s,l=d):r=n}if(!o)break;if(x){const n=i(t),a=i(o),s=n[a.length];let r;if((s===m||"-"===s)&&l<=u)r=a.length;else{const e=a.lastIndexOf(m),t=a.lastIndexOf("-");r=Math.max(e,t)+1}r>0&&(e=r,o=n.slice(0,e).join(""),l=this._getTextWidth(o))}o=o.trimRight(),this._addTextLine(o),n=Math.max(n,l),f+=a;if(this._shouldHandleEllipsis(f)){this._tryToAddEllipsisToLastLine();break}if(t=i(t).slice(e).join("").trimLeft(),t.length>0&&(s=this._getTextWidth(t),s<=u)){this._addTextLine(t),f+=a,n=Math.max(n,s);break}}else this._addTextLine(t),f+=a,n=Math.max(n,s),this._shouldHandleEllipsis(f)&&o<p-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&f+a>h)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){const t=+this.fontSize(),n=this.lineHeight()*t,a=this.attrs.height,s=a!==o&&void 0!==a,r=a-2*this.padding();return!(this.wrap()!==p)||s&&e+n>r}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==o&&void 0!==e,n=e-2*this.padding(),a=this.ellipsis(),s=this.textArr[this.textArr.length-1];if(s&&a){if(t){this._getTextWidth(s.text+"")<n||(s.text=s.text.slice(0,s.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+"")}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas()}}return o$.Text=y,y.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},y.prototype._strokeFunc=function(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},y.prototype.className="Text",y.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,r._registerNode)(y),t.Factory.overWriteSetter(y,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(y,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(y,"direction",l),t.Factory.addGetterSetter(y,"fontFamily","Arial"),t.Factory.addGetterSetter(y,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(y,"fontStyle",h),t.Factory.addGetterSetter(y,"fontVariant",h),t.Factory.addGetterSetter(y,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(y,"align",d),t.Factory.addGetterSetter(y,"verticalAlign","top"),t.Factory.addGetterSetter(y,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(y,"wrap","word"),t.Factory.addGetterSetter(y,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(y,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(y,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(y,"textDecoration",""),o$}var c$,d$={};var u$,h$={};function m$(){if(u$)return h$;u$=1,Object.defineProperty(h$,"__esModule",{value:!0}),h$.Transformer=void 0;const e=Oz(),t=tB(),n=nB(),a=fB(),s=XB(),r=wB(),i=Lz(),o=eB(),l=Lz(),c="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${c}`).join(" "),u="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],m={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in i.Konva._global;const f=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function g(e,t,n){const a=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),s=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:a,y:s}}function x(e,t){const n=function(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}(e);return g(e,t,n)}let v=0;class y extends r.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(t){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return c+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(t=>!t.isAncestorOf(this)||(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));this._nodes=t=n,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(e=>{const t=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};if(e._attrsAffectingSize.length){const n=e._attrsAffectingSize.map(e=>e+"Change."+this._getEventNamespace()).join(" ");e.on(n,t)}e.on(h.map(e=>e+`.${this._getEventNamespace()}`).join(" "),t),e.on(`absoluteTransformChange.${this._getEventNamespace()}`,t),this._proxyDrag(e)}),this._resetTransformCache();return!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,n=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!t)return;const a=e.getAbsolutePosition(),s=a.x-t.x,r=a.y-t.y;this.nodes().forEach(t=>{if(t===e)return;if(t.isDragging())return;const a=t.getAbsolutePosition();t.setAbsolutePosition({x:a.x+s,y:a.y+r}),t.startDrag(n)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(u),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(u,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){const a=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(n),r=e.getAbsolutePosition(n),o=a.x*s.x-e.offsetX()*s.x,l=a.y*s.y-e.offsetY()*s.y,c=(i.Konva.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return g({x:r.x+o*Math.cos(c)+l*Math.sin(-c),y:r.y+l*Math.cos(c)+o*Math.sin(c),width:a.width*s.x,height:a.height*s.y,rotation:c},-i.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(e=>{const n=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],s=e.getAbsoluteTransform();a.forEach(function(e){const n=s.point(e);t.push(n)})});const n=new e.Transform;n.rotate(-i.Konva.getAngle(this.rotation()));let a=1/0,s=1/0,r=-1/0,o=-1/0;t.forEach(function(e){const t=n.point(e);void 0===a&&(a=r=t.x,s=o=t.y),a=Math.min(a,t.x),s=Math.min(s,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y)}),n.invert();const l=n.point({x:a,y:s});return{x:l.x,y:l.y,width:r-a,height:o-s,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),f.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(t){const n=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),a=this;n.on("mousedown touchstart",function(e){a._handleMouseDown(e)}),n.on("dragstart",e=>{n.stopDrag(),e.cancelBubble=!0}),n.on("dragend",e=>{e.cancelBubble=!0}),n.on("mouseenter",()=>{const a=i.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),r=function(t,n,a){if("rotater"===t)return a;n+=e.Util.degToRad(m[t]||0);const s=(e.Util.radToDeg(n)%360+360)%360;return e.Util._inRange(s,337.5,360)||e.Util._inRange(s,0,22.5)?"ns-resize":e.Util._inRange(s,22.5,67.5)?"nesw-resize":e.Util._inRange(s,67.5,112.5)?"ew-resize":e.Util._inRange(s,112.5,157.5)?"nwse-resize":e.Util._inRange(s,157.5,202.5)?"ns-resize":e.Util._inRange(s,202.5,247.5)?"nesw-resize":e.Util._inRange(s,247.5,292.5)?"ew-resize":e.Util._inRange(s,292.5,337.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+s),"pointer")}(t,a,s);n.getStage().content&&(n.getStage().content.style.cursor=r),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new a.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,n){const a=n.getParent(),s=a.padding();t.beginPath(),t.rect(-s,-s,n.width()+2*s,n.height()+2*s),t.moveTo(n.width()/2,-s),a.rotateEnabled()&&a.rotateLineVisible()&&t.lineTo(n.width()/2,-a.rotateAnchorOffset()*e.Util._sign(n.height())-s),t.fillStrokeShape(n)},hitFunc:(e,t)=>{if(!this.shouldOverdrawWholeArea())return;const n=this.padding();e.beginPath(),e.rect(-n,-n,t.width()+2*n,t.height()+2*n),e.fillStrokeShape(t)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),n=t.width,a=t.height,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));this.sin=Math.abs(a/s),this.cos=Math.abs(n/s),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const r=e.target.getAbsolutePosition(),i=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:i.x-r.x,y:i.y-r.y},v++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(t=>{t._fire("transformstart",{evt:e.evt,target:t})})}_handleMouseMove(e){let t,n,a;const s=this.findOne("."+this._movingAnchorName),r=s.getStage();r.setPointersPositions(e);const o=r.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),s.setAbsolutePosition(l);const d=s.getAbsolutePosition();if(c.x===d.x&&c.y===d.y)return;if("rotater"===this._movingAnchorName){const a=this._getNodeRect();t=s.x()-a.width/2,n=-s.y()+a.height/2;let r=Math.atan2(-n,t)+Math.PI/2;a.height<0&&(r-=Math.PI);const o=i.Konva.getAngle(this.rotation())+r,l=i.Konva.getAngle(this.rotationSnapTolerance()),c=function(e,t,n){let a=t;for(let s=0;s<e.length;s++){const r=i.Konva.getAngle(e[s]),o=Math.abs(r-t)%(2*Math.PI);Math.min(o,2*Math.PI-o)<n&&(a=r)}return a}(this.rotationSnaps(),o,l),d=x(a,c-a.rotation);return void this._fitNodesInto(d,e)}const u=this.shiftBehavior();let h;h="inverted"===u?this.keepRatio()&&!e.shiftKey:"none"===u?this.keepRatio():this.keepRatio()||e.shiftKey;let m=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};a=Math.sqrt(Math.pow(e.x-s.x(),2)+Math.pow(e.y-s.y(),2));const r=this.findOne(".top-left").x()>e.x?-1:1,i=this.findOne(".top-left").y()>e.y?-1:1;t=a*this.cos*r,n=a*this.sin*i,this.findOne(".top-left").x(e.x-t),this.findOne(".top-left").y(e.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(s.y());else if("top-right"===this._movingAnchorName){if(h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};a=Math.sqrt(Math.pow(s.x()-e.x,2)+Math.pow(e.y-s.y(),2));const r=this.findOne(".top-right").x()<e.x?-1:1,i=this.findOne(".top-right").y()>e.y?-1:1;t=a*this.cos*r,n=a*this.sin*i,this.findOne(".top-right").x(e.x+t),this.findOne(".top-right").y(e.y-n)}var p=s.position();this.findOne(".top-left").y(p.y),this.findOne(".bottom-right").x(p.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(s.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(s.x());else if("bottom-left"===this._movingAnchorName){if(h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};a=Math.sqrt(Math.pow(e.x-s.x(),2)+Math.pow(s.y()-e.y,2));const r=e.x<s.x()?-1:1,i=s.y()<e.y?-1:1;t=a*this.cos*r,n=a*this.sin*i,s.x(e.x-t),s.y(e.y+n)}p=s.position(),this.findOne(".top-left").x(p.x),this.findOne(".bottom-right").y(p.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(s.y());else if("bottom-right"===this._movingAnchorName&&h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};a=Math.sqrt(Math.pow(s.x()-e.x,2)+Math.pow(s.y()-e.y,2));const r=this.findOne(".bottom-right").x()<e.x?-1:1,i=this.findOne(".bottom-right").y()<e.y?-1:1;t=a*this.cos*r,n=a*this.sin*i,this.findOne(".bottom-right").x(e.x+t),this.findOne(".bottom-right").y(e.y+n)}if(m=this.centeredScaling()||e.altKey,m){const e=this.findOne(".top-left"),t=this.findOne(".bottom-right"),n=e.x(),a=e.y(),s=this.getWidth()-t.x(),r=this.getHeight()-t.y();t.move({x:-n,y:-a}),e.move({x:s,y:r})}const f=this.findOne(".top-left").getAbsolutePosition();t=f.x,n=f.y;const g=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),v=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:g,height:v,rotation:i.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();v--,this._fire("transformend",{evt:e,target:n}),null===(t=this.getLayer())||void 0===t||t.batchDraw(),n&&this._nodes.forEach(t=>{var n;t._fire("transformend",{evt:e,target:t}),null===(n=t.getLayer())||void 0===n||n.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const a=this._getNodeRect();if(e.Util._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(e.Util._inRange(t.height,2*-this.padding()-1,1))return void this.update();const s=new e.Transform;if(s.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=s.point({x:2*-this.padding(),y:0});t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=s.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=s.point({x:0,y:2*-this.padding()});t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=s.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){const n=this.boundBoxFunc()(a,t);n?t=n:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const r=1e7,o=new e.Transform;o.translate(a.x,a.y),o.rotate(a.rotation),o.scale(a.width/r,a.height/r);const l=new e.Transform,c=t.width/r,d=t.height/r;!1===this.flipEnabled()?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(c),Math.abs(d))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(c,d));const u=l.multiply(o.invert());this._nodes.forEach(t=>{var n;const a=t.getParent().getAbsoluteTransform(),s=t.getTransform().copy();s.translate(t.offsetX(),t.offsetY());const r=new e.Transform;r.multiply(a.copy().invert()).multiply(u).multiply(a).multiply(s);const i=r.decompose();t.setAttrs(i),null===(n=t.getLayer())||void 0===n||n.batchDraw()}),this.rotation(e.Util._getRotation(t.rotation)),this._nodes.forEach(e=>{this._fire("transform",{evt:n,target:e}),e._fire("transform",{evt:n,target:e})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var t;const n=this._getNodeRect();this.rotation(e.Util._getRotation(n.rotation));const a=n.width,s=n.height,r=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),l=this.anchorSize(),c=this.find("._anchor");c.forEach(e=>{e.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:i&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:a/2,y:0,offsetY:l/2+o,visible:i&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:a,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:i&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+o,visible:i&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:a,y:s/2,offsetX:l/2-o,visible:i&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+o,offsetY:l/2-o,visible:i&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:a/2,y:s,offsetY:l/2-o,visible:i&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:a,y:s,offsetX:l/2-o,offsetY:l/2-o,visible:i&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:a/2,y:-this.rotateAnchorOffset()*e.Util._sign(s)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:a,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const d=this.anchorStyleFunc();d&&c.forEach(e=>{d(e)}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(e){return n.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}return h$.Transformer=y,y.isTransforming=()=>v>0,y.prototype.className="Transformer",(0,l._registerNode)(y),t.Factory.addGetterSetter(y,"enabledAnchors",f,function(t){return t instanceof Array||e.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===f.indexOf(t)&&e.Util.warn("Unknown anchor name: "+t+". Available names are: "+f.join(", "))}),t||[]}),t.Factory.addGetterSetter(y,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(y,"resizeEnabled",!0),t.Factory.addGetterSetter(y,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"rotateEnabled",!0),t.Factory.addGetterSetter(y,"rotateLineVisible",!0),t.Factory.addGetterSetter(y,"rotationSnaps",[]),t.Factory.addGetterSetter(y,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(y,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"borderEnabled",!0),t.Factory.addGetterSetter(y,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(y,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"anchorFill","white"),t.Factory.addGetterSetter(y,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(y,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"borderDash"),t.Factory.addGetterSetter(y,"keepRatio",!0),t.Factory.addGetterSetter(y,"shiftBehavior","default"),t.Factory.addGetterSetter(y,"centeredScaling",!1),t.Factory.addGetterSetter(y,"ignoreStroke",!1),t.Factory.addGetterSetter(y,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"nodes"),t.Factory.addGetterSetter(y,"node"),t.Factory.addGetterSetter(y,"boundBoxFunc"),t.Factory.addGetterSetter(y,"anchorDragBoundFunc"),t.Factory.addGetterSetter(y,"anchorStyleFunc"),t.Factory.addGetterSetter(y,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(y,"useSingleNodeRotation",!0),t.Factory.backCompat(y,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),h$}var p$,f$={};var g$,x$={};function v$(){if(g$)return x$;g$=1,Object.defineProperty(x$,"__esModule",{value:!0}),x$.Blur=void 0;const e=tB(),t=nB(),n=eB();function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return x$.Blur=function(e){const t=Math.round(this.blurRadius());t>0&&function(e,t){const n=e.data,i=e.width,o=e.height;let l,c,d,u,h,m,p,f,g,x,v,y,b,w,S,j,C,k,N,_;const E=t+t+1,P=i-1,A=o-1,R=t+1,T=R*(R+1)/2,M=new a,D=s[t],L=r[t];let F=null,I=M,O=null,z=null;for(let s=1;s<E;s++)I=I.next=new a,s===R&&(F=I);I.next=M,d=c=0;for(let a=0;a<o;a++){y=b=w=S=u=h=m=p=0,f=R*(j=n[c]),g=R*(C=n[c+1]),x=R*(k=n[c+2]),v=R*(N=n[c+3]),u+=T*j,h+=T*C,m+=T*k,p+=T*N,I=M;for(let e=0;e<R;e++)I.r=j,I.g=C,I.b=k,I.a=N,I=I.next;for(let e=1;e<R;e++)l=c+((P<e?P:e)<<2),u+=(I.r=j=n[l])*(_=R-e),h+=(I.g=C=n[l+1])*_,m+=(I.b=k=n[l+2])*_,p+=(I.a=N=n[l+3])*_,y+=j,b+=C,w+=k,S+=N,I=I.next;O=M,z=F;for(let e=0;e<i;e++)n[c+3]=N=p*D>>L,0!==N?(N=255/N,n[c]=(u*D>>L)*N,n[c+1]=(h*D>>L)*N,n[c+2]=(m*D>>L)*N):n[c]=n[c+1]=n[c+2]=0,u-=f,h-=g,m-=x,p-=v,f-=O.r,g-=O.g,x-=O.b,v-=O.a,l=d+((l=e+t+1)<P?l:P)<<2,y+=O.r=n[l],b+=O.g=n[l+1],w+=O.b=n[l+2],S+=O.a=n[l+3],u+=y,h+=b,m+=w,p+=S,O=O.next,f+=j=z.r,g+=C=z.g,x+=k=z.b,v+=N=z.a,y-=j,b-=C,w-=k,S-=N,z=z.next,c+=4;d+=i}for(let a=0;a<i;a++){b=w=S=y=h=m=p=u=0,c=a<<2,f=R*(j=n[c]),g=R*(C=n[c+1]),x=R*(k=n[c+2]),v=R*(N=n[c+3]),u+=T*j,h+=T*C,m+=T*k,p+=T*N,I=M;for(let t=0;t<R;t++)I.r=j,I.g=C,I.b=k,I.a=N,I=I.next;let e=i;for(let s=1;s<=t;s++)c=e+a<<2,u+=(I.r=j=n[c])*(_=R-s),h+=(I.g=C=n[c+1])*_,m+=(I.b=k=n[c+2])*_,p+=(I.a=N=n[c+3])*_,y+=j,b+=C,w+=k,S+=N,I=I.next,s<A&&(e+=i);c=a,O=M,z=F;for(let t=0;t<o;t++)l=c<<2,n[l+3]=N=p*D>>L,N>0?(N=255/N,n[l]=(u*D>>L)*N,n[l+1]=(h*D>>L)*N,n[l+2]=(m*D>>L)*N):n[l]=n[l+1]=n[l+2]=0,u-=f,h-=g,m-=x,p-=v,f-=O.r,g-=O.g,x-=O.b,v-=O.a,l=a+((l=t+R)<A?l:A)*i<<2,u+=y+=O.r=n[l],h+=b+=O.g=n[l+1],m+=w+=O.b=n[l+2],p+=S+=O.a=n[l+3],O=O.next,f+=j=z.r,g+=C=z.g,x+=k=z.b,v+=N=z.a,y-=j,b-=C,w-=k,S-=N,z=z.next,c+=i}}(e,t)},e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),x$}var y$,b$={};var w$,S$={};var j$,C$={};var k$,N$={};var _$,E$={};var P$,A$={};var R$,T$={};var M$,D$={};var L$,F$={};function I$(){if(L$)return F$;L$=1,Object.defineProperty(F$,"__esModule",{value:!0}),F$.Kaleidoscope=void 0;const e=tB(),t=nB(),n=Oz(),a=eB();return F$.Kaleidoscope=function(e){const t=e.width,a=e.height;let s,r,i,o,l,c,d,u,h,m,p=Math.round(this.kaleidoscopePower());const f=Math.round(this.kaleidoscopeAngle()),g=Math.floor(t*(f%360)/360);if(p<1)return;const x=n.Util.createCanvasElement();x.width=t,x.height=a;const v=x.getContext("2d").getImageData(0,0,t,a);n.Util.releaseCanvas(x),function(e,t,n){const a=e.data,s=t.data,r=e.width,i=e.height,o=n.polarCenterX||r/2,l=n.polarCenterY||i/2;let c=Math.sqrt(o*o+l*l),d=r-o,u=i-l;const h=Math.sqrt(d*d+u*u);c=h>c?h:c;const m=i,p=r,f=360/p*Math.PI/180;for(let g=0;g<p;g+=1){const e=Math.sin(g*f),t=Math.cos(g*f);for(let n=0;n<m;n+=1){d=Math.floor(o+c*n/m*t),u=Math.floor(l+c*n/m*e);let i=4*(u*r+d);const h=a[i+0],p=a[i+1],f=a[i+2],x=a[i+3];i=4*(g+n*r),s[i+0]=h,s[i+1]=p,s[i+2]=f,s[i+3]=x}}}(e,v,{polarCenterX:t/2,polarCenterY:a/2});let y=t/Math.pow(2,p);for(;y<=8;)y*=2,p-=1;y=Math.ceil(y);let b=y,w=0,S=b,j=1;for(g+y>t&&(w=b,S=0,j=-1),r=0;r<a;r+=1)for(s=w;s!==S;s+=j)i=Math.round(s+g)%t,h=4*(t*r+i),l=v.data[h+0],c=v.data[h+1],d=v.data[h+2],u=v.data[h+3],m=4*(t*r+s),v.data[m+0]=l,v.data[m+1]=c,v.data[m+2]=d,v.data[m+3]=u;for(r=0;r<a;r+=1)for(b=Math.floor(y),o=0;o<p;o+=1){for(s=0;s<b+1;s+=1)h=4*(t*r+s),l=v.data[h+0],c=v.data[h+1],d=v.data[h+2],u=v.data[h+3],m=4*(t*r+2*b-s-1),v.data[m+0]=l,v.data[m+1]=c,v.data[m+2]=d,v.data[m+3]=u;b*=2}!function(e,t,n){const a=e.data,s=t.data,r=e.width,i=e.height,o=n.polarCenterX||r/2,l=n.polarCenterY||i/2;let c=Math.sqrt(o*o+l*l),d=r-o,u=i-l;const h=Math.sqrt(d*d+u*u);c=h>c?h:c;const m=i,p=r;let f,g;for(d=0;d<r;d+=1)for(u=0;u<i;u+=1){const e=d-o,t=u-l,n=Math.sqrt(e*e+t*t)*m/c;let i=(180*Math.atan2(t,e)/Math.PI+360+0)%360;i=i*p/360,f=Math.floor(i),g=Math.floor(n);let h=4*(g*r+f);const x=a[h+0],v=a[h+1],y=a[h+2],b=a[h+3];h=4*(u*r+d),s[h+0]=x,s[h+1]=v,s[h+2]=y,s[h+3]=b}}(v,e,{})},e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,a.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,a.getNumberValidator)(),e.Factory.afterSetFilter),F$}var O$,z$={};function B$(){if(O$)return z$;O$=1,Object.defineProperty(z$,"__esModule",{value:!0}),z$.Mask=void 0;const e=tB(),t=nB(),n=eB();function a(e,t,n){let a=4*(n*e.width+t);const s=[];return s.push(e.data[a++],e.data[a++],e.data[a++],e.data[a++]),s}function s(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}return z$.Mask=function(e){let t=function(e,t){const n=a(e,0,0),r=a(e,e.width-1,0),i=a(e,0,e.height-1),o=a(e,e.width-1,e.height-1),l=t||10;if(s(n,r)<l&&s(r,o)<l&&s(o,i)<l&&s(i,n)<l){const t=function(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([r,n,o,i]),a=[];for(let n=0;n<e.width*e.height;n++){const r=s(t,[e.data[4*n],e.data[4*n+1],e.data[4*n+2]]);a[n]=r<l?0:255}return a}}(e,this.threshold());return t&&(t=function(e,t,n){const a=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(a.length)),r=Math.floor(s/2),i=[];for(let o=0;o<n;o++)for(let l=0;l<t;l++){const c=o*t+l;let d=0;for(let i=0;i<s;i++)for(let c=0;c<s;c++){const u=o+i-r,h=l+c-r;if(u>=0&&u<n&&h>=0&&h<t){const n=a[i*s+c];d+=e[u*t+h]*n}}i[c]=2040===d?255:0}return i}(t,e.width,e.height),t=function(e,t,n){const a=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(a.length)),r=Math.floor(s/2),i=[];for(let o=0;o<n;o++)for(let l=0;l<t;l++){const c=o*t+l;let d=0;for(let i=0;i<s;i++)for(let c=0;c<s;c++){const u=o+i-r,h=l+c-r;if(u>=0&&u<n&&h>=0&&h<t){const n=a[i*s+c];d+=e[u*t+h]*n}}i[c]=d>=1020?255:0}return i}(t,e.width,e.height),t=function(e,t,n){const a=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],s=Math.round(Math.sqrt(a.length)),r=Math.floor(s/2),i=[];for(let o=0;o<n;o++)for(let l=0;l<t;l++){const c=o*t+l;let d=0;for(let i=0;i<s;i++)for(let c=0;c<s;c++){const u=o+i-r,h=l+c-r;if(u>=0&&u<n&&h>=0&&h<t){const n=a[i*s+c];d+=e[u*t+h]*n}}i[c]=d}return i}(t,e.width,e.height),function(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}(e,t)),e},e.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),z$}var $$,U$={};var V$,q$={};var H$,G$={};var K$,W$={};var Q$,Y$={};var X$,Z$={};var J$,eU={};var tU,nU,aU={};function sU(){if(nU)return Tz;nU=1,Object.defineProperty(Tz,"__esModule",{value:!0}),Tz.Konva=void 0;const e=EB(),t=function(){if(PB)return AB;PB=1,Object.defineProperty(AB,"__esModule",{value:!0}),AB.Arc=void 0;const e=tB(),t=fB(),n=Lz(),a=eB(),s=Lz();let r=class extends t.Shape{_sceneFunc(e){const t=n.Konva.getAngle(this.angle()),a=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,a),e.arc(0,0,this.innerRadius(),t,0,!a),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),a=this.clockwise(),s=n.Konva.getAngle(a?360-this.angle():this.angle()),r=Math.cos(Math.min(s,Math.PI)),i=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),o=Math.sin(Math.min(s,Math.PI/2)),l=r*(r>0?e:t),c=i*(i>0?e:t),d=o*(o>0?t:e);return{x:l,y:a?-1*d:c,width:1*t-l,height:d-c}}};return AB.Arc=r,r.prototype._centroid=!0,r.prototype.className="Arc",r.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(r),e.Factory.addGetterSetter(r,"innerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(r,"outerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(r,"angle",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(r,"clockwise",!1,(0,a.getBooleanValidator)()),AB}(),n=function(){if(IB)return TB;IB=1,Object.defineProperty(TB,"__esModule",{value:!0}),TB.Arrow=void 0;const e=tB(),t=DB(),n=eB(),a=Lz(),s=BB();let r=class extends t.Line{_sceneFunc(e){super._sceneFunc(e);const t=2*Math.PI,n=this.points();let a=n;const r=0!==this.tension()&&n.length>4;r&&(a=this.getTensionPoints());const i=this.pointerLength(),o=n.length;let l,c;if(r){const e=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],n[o-2],n[o-1]],t=s.Path.calcLength(a[a.length-4],a[a.length-3],"C",e),r=s.Path.getPointOnQuadraticBezier(Math.min(1,1-i/t),e[0],e[1],e[2],e[3],e[4],e[5]);l=n[o-2]-r.x,c=n[o-1]-r.y}else l=n[o-2]-n[o-4],c=n[o-1]-n[o-3];const d=(Math.atan2(c,l)+t)%t,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[o-2],n[o-1]),e.rotate(d),e.moveTo(0,0),e.lineTo(-i,u/2),e.lineTo(-i,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),r?(l=(a[0]+a[2])/2-n[0],c=(a[1]+a[3])/2-n[1]):(l=n[2]-n[0],c=n[3]-n[1]),e.rotate((Math.atan2(-c,-l)+t)%t),e.moveTo(0,0),e.lineTo(-i,u/2),e.lineTo(-i,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+2*t}}};return TB.Arrow=r,r.prototype.className="Arrow",(0,a._registerNode)(r),e.Factory.addGetterSetter(r,"pointerLength",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"pointerWidth",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"pointerAtBeginning",!1),e.Factory.addGetterSetter(r,"pointerAtEnding",!0),TB}(),a=function(){if($B)return UB;$B=1,Object.defineProperty(UB,"__esModule",{value:!0}),UB.Circle=void 0;const e=tB(),t=fB(),n=eB(),a=Lz();class s extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}return UB.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),UB}(),s=function(){if(VB)return qB;VB=1,Object.defineProperty(qB,"__esModule",{value:!0}),qB.Ellipse=void 0;const e=tB(),t=fB(),n=eB(),a=Lz();class s extends t.Shape{_sceneFunc(e){const t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}return qB.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,a._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,n.getNumberValidator)()),qB}(),r=function(){if(HB)return GB;HB=1,Object.defineProperty(GB,"__esModule",{value:!0}),GB.Image=void 0;const e=Oz(),t=tB(),n=fB(),a=Lz(),s=eB();class r extends n.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),a=this.getHeight(),s=this.cornerRadius(),r=this.attrs.image;let i;if(r){const e=this.attrs.cropWidth,t=this.attrs.cropHeight;i=e&&t?[r,this.cropX(),this.cropY(),e,t,0,0,n,a]:[r,0,0,n,a]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?e.Util.drawRoundedRectPath(t,n,a,s):t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)),r&&(s&&t.clip(),t.drawImage.apply(t,i))}_hitFunc(t){const n=this.width(),a=this.height(),s=this.cornerRadius();t.beginPath(),s?e.Util.drawRoundedRectPath(t,n,a,s):t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)}getWidth(){var e,t;return null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width}getHeight(){var e,t;return null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height}static fromURL(t,n,a=null){const s=e.Util.createImageElement();s.onload=function(){const e=new r({image:s});n(e)},s.onerror=a,s.crossOrigin="Anonymous",s.src=t}}return GB.Image=r,r.prototype.className="Image",(0,a._registerNode)(r),t.Factory.addGetterSetter(r,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(r,"image"),t.Factory.addComponentsGetterSetter(r,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(r,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"cropHeight",0,(0,s.getNumberValidator)()),GB}(),i=function(){if(KB)return WB;KB=1,Object.defineProperty(WB,"__esModule",{value:!0}),WB.Tag=WB.Label=void 0;const e=tB(),t=fB(),n=wB(),a=eB(),s=Lz(),r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="up",o="right",l="down",c="left",d=r.length;let u=class extends n.Group{constructor(e){super(e),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t,n=this;const a=function(){n._sync()};for(t=0;t<d;t++)e.on(r[t]+"Change.konva",a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e,t,n,a,s,r,d,u=this.getText(),h=this.getTag();if(u&&h){switch(e=u.width(),t=u.height(),n=h.pointerDirection(),a=h.pointerWidth(),d=h.pointerHeight(),s=0,r=0,n){case i:s=e/2,r=-1*d;break;case o:s=e+a,r=t/2;break;case l:s=e/2,r=t+d;break;case c:s=-1*a,r=t/2}h.setAttrs({x:-1*s,y:-1*r,width:e,height:t}),u.setAttrs({x:-1*s,y:-1*r})}}};WB.Label=u,u.prototype.className="Label",(0,s._registerNode)(u);class h extends t.Shape{_sceneFunc(e){const t=this.width(),n=this.height(),a=this.pointerDirection(),s=this.pointerWidth(),r=this.pointerHeight(),d=this.cornerRadius();let u=0,h=0,m=0,p=0;"number"==typeof d?u=h=m=p=Math.min(d,t/2,n/2):(u=Math.min(d[0]||0,t/2,n/2),h=Math.min(d[1]||0,t/2,n/2),p=Math.min(d[2]||0,t/2,n/2),m=Math.min(d[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(u,0),a===i&&(e.lineTo((t-s)/2,0),e.lineTo(t/2,-1*r),e.lineTo((t+s)/2,0)),e.lineTo(t-h,0),e.arc(t-h,h,h,3*Math.PI/2,0,!1),a===o&&(e.lineTo(t,(n-r)/2),e.lineTo(t+s,n/2),e.lineTo(t,(n+r)/2)),e.lineTo(t,n-p),e.arc(t-p,n-p,p,0,Math.PI/2,!1),a===l&&(e.lineTo((t+s)/2,n),e.lineTo(t/2,n+r),e.lineTo((t-s)/2,n)),e.lineTo(m,n),e.arc(m,n-m,m,Math.PI/2,Math.PI,!1),a===c&&(e.lineTo(0,(n+r)/2),e.lineTo(-1*s,n/2),e.lineTo(0,(n-r)/2)),e.lineTo(0,u),e.arc(u,u,u,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,n=this.pointerWidth(),a=this.pointerHeight(),s=this.pointerDirection(),r=this.width(),d=this.height();return s===i?(t-=a,d+=a):s===l?d+=a:s===c?(e-=1.5*n,r+=n):s===o&&(r+=1.5*n),{x:e,y:t,width:r,height:d}}}return WB.Tag=h,h.prototype.className="Tag",(0,s._registerNode)(h),e.Factory.addGetterSetter(h,"pointerDirection","none"),e.Factory.addGetterSetter(h,"pointerWidth",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(h,"pointerHeight",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(h,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),WB}(),o=DB(),l=BB(),c=XB(),d=function(){if(ZB)return JB;ZB=1,Object.defineProperty(JB,"__esModule",{value:!0}),JB.RegularPolygon=void 0;const e=tB(),t=fB(),n=eB(),a=Lz();let s=class extends t.Shape{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(let a=0;a<e;a++)n.push({x:t*Math.sin(2*a*Math.PI/e),y:-1*t*Math.cos(2*a*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();let t=e[0].x,n=e[0].y,a=e[0].x,s=e[0].y;return e.forEach(e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),a=Math.min(a,e.y),s=Math.max(s,e.y)}),{x:t,y:a,width:n-t,height:s-a}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};return JB.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,n.getNumberValidator)()),JB}(),u=function(){if(e$)return t$;e$=1,Object.defineProperty(t$,"__esModule",{value:!0}),t$.Ring=void 0;const e=tB(),t=fB(),n=eB(),a=Lz(),s=2*Math.PI;let r=class extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,s,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),s,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};return t$.Ring=r,r.prototype.className="Ring",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(r),e.Factory.addGetterSetter(r,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"outerRadius",0,(0,n.getNumberValidator)()),t$}(),h=function(){if(n$)return a$;n$=1,Object.defineProperty(a$,"__esModule",{value:!0}),a$.Sprite=void 0;const e=tB(),t=fB(),n=CB(),a=eB(),s=Lz();let r=class extends t.Shape{constructor(e){super(e),this._updated=!0,this.anim=new n.Animation(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),n=this.frameIndex(),a=4*n,s=this.animations()[t],r=this.frameOffsets(),i=s[a+0],o=s[a+1],l=s[a+2],c=s[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),d)if(r){const a=r[t],s=2*n;e.drawImage(d,i,o,l,c,a[s+0],a[s+1],l,c)}else e.drawImage(d,i,o,l,c,0,0,l,c)}_hitFunc(e){const t=this.animation(),n=this.frameIndex(),a=4*n,s=this.animations()[t],r=this.frameOffsets(),i=s[a+2],o=s[a+3];if(e.beginPath(),r){const a=r[t],s=2*n;e.rect(a[s+0],a[s+1],i,o)}else e.rect(0,0,i,o);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}};return a$.Sprite=r,r.prototype.className="Sprite",(0,s._registerNode)(r),e.Factory.addGetterSetter(r,"animation"),e.Factory.addGetterSetter(r,"animations"),e.Factory.addGetterSetter(r,"frameOffsets"),e.Factory.addGetterSetter(r,"image"),e.Factory.addGetterSetter(r,"frameIndex",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(r,"frameRate",17,(0,a.getNumberValidator)()),e.Factory.backCompat(r,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),a$}(),m=function(){if(s$)return r$;s$=1,Object.defineProperty(r$,"__esModule",{value:!0}),r$.Star=void 0;const e=tB(),t=fB(),n=eB(),a=Lz();let s=class extends t.Shape{_sceneFunc(e){const t=this.innerRadius(),n=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(let s=1;s<2*a;s++){const r=s%2==0?n:t,i=r*Math.sin(s*Math.PI/a),o=-1*r*Math.cos(s*Math.PI/a);e.lineTo(i,o)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};return r$.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),r$}(),p=l$(),f=function(){if(c$)return d$;c$=1,Object.defineProperty(d$,"__esModule",{value:!0}),d$.TextPath=void 0;const e=Oz(),t=tB(),n=fB(),a=BB(),s=l$(),r=eB(),i=Lz(),o="normal";function l(e){e.fillText(this.partialText,0,0)}function c(e){e.strokeText(this.partialText,0,0)}let d=class extends n.Shape{constructor(t){super(t),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return a.Path.getPathLength(this.dataArray)}_getPointAtLength(e){return this.attrs.data?e-1>this.pathLength?null:a.Path.getPointAtLengthOfDataArray(e,this.dataArray):null}_readDataAttribute(){this.dataArray=a.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),n=this.fill(),a=this.fontSize(),s=this.glyphInfo;"underline"===t&&e.beginPath();for(let r=0;r<s.length;r++){e.save();const n=s[r].p0;e.translate(n.x,n.y),e.rotate(s[r].rotation),this.partialText=s[r].text,e.fillStrokeShape(this),"underline"===t&&(0===r&&e.moveTo(0,a/2+1),e.lineTo(a,a/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=n,e.lineWidth=a/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const n=t[0].p0;e.moveTo(n.x,n.y)}for(let n=0;n<t.length;n++){const a=t[n].p1;e.lineTo(a.x,a.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return s.Text.prototype.setText.call(this,e)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(e){const t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();const n=t.measureText(e);return t.restore(),{width:n.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;const n=this.letterSpacing(),r=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);let l=0;"center"===r&&(l=Math.max(0,this.pathLength/2-o/2)),"right"===r&&(l=Math.max(0,this.pathLength-o));const c=(0,s.stringToArray)(this.text());let d=l;for(let s=0;s<c.length;s++){const e=this._getPointAtLength(d);if(!e)return;let t=this._getTextSize(c[s]).width+n;if(" "===c[s]&&"justify"===r){const e=this.text().split(" ").length-1;t+=(this.pathLength-o)/e}const l=this._getPointAtLength(d+t);if(!l)return;const h=a.Path.getLineLength(e.x,e.y,l.x,l.y);let m=0;if(i)try{m=i(c[s-1],c[s])*this.fontSize()}catch(u){m=0}e.x+=m,l.x+=m,this.textWidth+=m;const p=a.Path.getPointOnLine(m+h/2,e.x,e.y,l.x,l.y),f=Math.atan2(l.y-e.y,l.x-e.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:c[s],rotation:f,p0:e,p1:l}),d+=t}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)});let t,n,a=e[0]||0,s=e[0]||0,r=e[1]||0,i=e[1]||0;for(let l=0;l<e.length/2;l++)t=e[2*l],n=e[2*l+1],a=Math.min(a,t),s=Math.max(s,t),r=Math.min(r,n),i=Math.max(i,n);const o=this.fontSize();return{x:a-o/2,y:r-o/2,width:s-a+o,height:i-r+o}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return d$.TextPath=d,d.prototype._fillFunc=l,d.prototype._strokeFunc=c,d.prototype._fillFuncHit=l,d.prototype._strokeFuncHit=c,d.prototype.className="TextPath",d.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(d),t.Factory.addGetterSetter(d,"data"),t.Factory.addGetterSetter(d,"fontFamily","Arial"),t.Factory.addGetterSetter(d,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(d,"fontStyle",o),t.Factory.addGetterSetter(d,"align","left"),t.Factory.addGetterSetter(d,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(d,"textBaseline","middle"),t.Factory.addGetterSetter(d,"fontVariant",o),t.Factory.addGetterSetter(d,"text",""),t.Factory.addGetterSetter(d,"textDecoration",""),t.Factory.addGetterSetter(d,"kerningFunc",void 0),d$}(),g=m$(),x=function(){if(p$)return f$;p$=1,Object.defineProperty(f$,"__esModule",{value:!0}),f$.Wedge=void 0;const e=tB(),t=fB(),n=Lz(),a=eB(),s=Lz();let r=class extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};return f$.Wedge=r,r.prototype.className="Wedge",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(r),e.Factory.addGetterSetter(r,"radius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(r,"angle",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(r,"clockwise",!1),e.Factory.backCompat(r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),f$}(),v=v$(),y=function(){if(y$)return b$;y$=1,Object.defineProperty(b$,"__esModule",{value:!0}),b$.Brighten=void 0;const e=tB(),t=nB(),n=eB();return b$.Brighten=function(e){const t=255*this.brightness(),n=e.data,a=n.length;for(let s=0;s<a;s+=4)n[s]+=t,n[s+1]+=t,n[s+2]+=t},e.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),b$}(),b=function(){if(w$)return S$;w$=1,Object.defineProperty(S$,"__esModule",{value:!0}),S$.Contrast=void 0;const e=tB(),t=nB(),n=eB();return S$.Contrast=function(e){const t=Math.pow((this.contrast()+100)/100,2),n=e.data,a=n.length;let s=150,r=150,i=150;for(let o=0;o<a;o+=4)s=n[o],r=n[o+1],i=n[o+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,i/=255,i-=.5,i*=t,i+=.5,i*=255,s=s<0?0:s>255?255:s,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,n[o]=s,n[o+1]=r,n[o+2]=i},e.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),S$}(),w=function(){if(j$)return C$;j$=1,Object.defineProperty(C$,"__esModule",{value:!0}),C$.Emboss=void 0;const e=tB(),t=nB(),n=Oz(),a=eB();return C$.Emboss=function(e){const t=10*this.embossStrength(),a=255*this.embossWhiteLevel(),s=this.embossDirection(),r=this.embossBlend(),i=e.data,o=e.width,l=e.height,c=4*o;let d=0,u=0,h=l;switch(s){case"top-left":d=-1,u=-1;break;case"top":d=-1,u=0;break;case"top-right":d=-1,u=1;break;case"right":d=0,u=1;break;case"bottom-right":d=1,u=1;break;case"bottom":d=1,u=0;break;case"bottom-left":d=1,u=-1;break;case"left":d=0,u=-1;break;default:n.Util.error("Unknown emboss direction: "+s)}do{const e=(h-1)*c;let n=d;h+n<1&&(n=0),h+n>l&&(n=0);const s=(h-1+n)*o*4;let m=o;do{const n=e+4*(m-1);let l=u;m+l<1&&(l=0),m+l>o&&(l=0);const c=s+4*(m-1+l),d=i[n]-i[c],h=i[n+1]-i[c+1],p=i[n+2]-i[c+2];let f=d;const g=f>0?f:-f;if((h>0?h:-h)>g&&(f=h),(p>0?p:-p)>g&&(f=p),f*=t,r){const e=i[n]+f,t=i[n+1]+f,a=i[n+2]+f;i[n]=e>255?255:e<0?0:e,i[n+1]=t>255?255:t<0?0:t,i[n+2]=a>255?255:a<0?0:a}else{let e=a-f;e<0?e=0:e>255&&(e=255),i[n]=i[n+1]=i[n+2]=e}}while(--m)}while(--h)},e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,a.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,a.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),C$}(),S=function(){if(k$)return N$;k$=1,Object.defineProperty(N$,"__esModule",{value:!0}),N$.Enhance=void 0;const e=tB(),t=nB(),n=eB();function a(e,t,n,a,s){const r=n-t,i=s-a;if(0===r)return a+i/2;if(0===i)return a;let o=(e-t)/r;return o=i*o+a,o}return N$.Enhance=function(e){const t=e.data,n=t.length;let s,r,i,o=t[0],l=o,c=t[1],d=c,u=t[2],h=u;const m=this.enhance();if(0===m)return;for(let a=0;a<n;a+=4)s=t[a+0],s<o?o=s:s>l&&(l=s),r=t[a+1],r<c?c=r:r>d&&(d=r),i=t[a+2],i<u?u=i:i>h&&(h=i);let p,f,g,x,v,y;if(l===o&&(l=255,o=0),d===c&&(d=255,c=0),h===u&&(h=255,u=0),m>0)p=l+m*(255-l),f=o-m*(o-0),g=d+m*(255-d),x=c-m*(c-0),v=h+m*(255-h),y=u-m*(u-0);else{const e=.5*(l+o);p=l+m*(l-e),f=o+m*(o-e);const t=.5*(d+c);g=d+m*(d-t),x=c+m*(c-t);const n=.5*(h+u);v=h+m*(h-n),y=u+m*(u-n)}for(let b=0;b<n;b+=4)t[b+0]=a(t[b+0],o,l,f,p),t[b+1]=a(t[b+1],c,d,x,g),t[b+2]=a(t[b+2],u,h,y,v)},e.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),N$}(),j=(_$||(_$=1,Object.defineProperty(E$,"__esModule",{value:!0}),E$.Grayscale=void 0,E$.Grayscale=function(e){const t=e.data,n=t.length;for(let a=0;a<n;a+=4){const e=.34*t[a]+.5*t[a+1]+.16*t[a+2];t[a]=e,t[a+1]=e,t[a+2]=e}}),E$),C=function(){if(P$)return A$;P$=1,Object.defineProperty(A$,"__esModule",{value:!0}),A$.HSL=void 0;const e=tB(),t=nB(),n=eB();return e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),A$.HSL=function(e){const t=e.data,n=t.length,a=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,r=127*this.luminance(),i=1*a*Math.cos(s*Math.PI/180),o=1*a*Math.sin(s*Math.PI/180),l=.299+.701*i+.167*o,c=.587-.587*i+.33*o,d=.114-.114*i-.497*o,u=.299-.299*i-.328*o,h=.587+.413*i+.035*o,m=.114-.114*i+.293*o,p=.299-.3*i+1.25*o,f=.587-.586*i-1.05*o,g=.114+.886*i-.2*o;let x,v,y,b;for(let w=0;w<n;w+=4)x=t[w+0],v=t[w+1],y=t[w+2],b=t[w+3],t[w+0]=l*x+c*v+d*y+r,t[w+1]=u*x+h*v+m*y+r,t[w+2]=p*x+f*v+g*y+r,t[w+3]=b},A$}(),k=function(){if(R$)return T$;R$=1,Object.defineProperty(T$,"__esModule",{value:!0}),T$.HSV=void 0;const e=tB(),t=nB(),n=eB();return T$.HSV=function(e){const t=e.data,n=t.length,a=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,i=a*s*Math.cos(r*Math.PI/180),o=a*s*Math.sin(r*Math.PI/180),l=.299*a+.701*i+.167*o,c=.587*a-.587*i+.33*o,d=.114*a-.114*i-.497*o,u=.299*a-.299*i-.328*o,h=.587*a+.413*i+.035*o,m=.114*a-.114*i+.293*o,p=.299*a-.3*i+1.25*o,f=.587*a-.586*i-1.05*o,g=.114*a+.886*i-.2*o;for(let x=0;x<n;x+=4){const e=t[x+0],n=t[x+1],a=t[x+2],s=t[x+3];t[x+0]=l*e+c*n+d*a,t[x+1]=u*e+h*n+m*a,t[x+2]=p*e+f*n+g*a,t[x+3]=s}},e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),T$}(),N=(M$||(M$=1,Object.defineProperty(D$,"__esModule",{value:!0}),D$.Invert=void 0,D$.Invert=function(e){const t=e.data,n=t.length;for(let a=0;a<n;a+=4)t[a]=255-t[a],t[a+1]=255-t[a+1],t[a+2]=255-t[a+2]}),D$),_=I$(),E=B$(),P=function(){if($$)return U$;$$=1,Object.defineProperty(U$,"__esModule",{value:!0}),U$.Noise=void 0;const e=tB(),t=nB(),n=eB();return U$.Noise=function(e){const t=255*this.noise(),n=e.data,a=n.length,s=t/2;for(let r=0;r<a;r+=4)n[r+0]+=s-2*s*Math.random(),n[r+1]+=s-2*s*Math.random(),n[r+2]+=s-2*s*Math.random()},e.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),U$}(),A=function(){if(V$)return q$;V$=1,Object.defineProperty(q$,"__esModule",{value:!0}),q$.Pixelate=void 0;const e=tB(),t=Oz(),n=nB(),a=eB();return q$.Pixelate=function(e){let n=Math.ceil(this.pixelSize()),a=e.width,s=e.height,r=Math.ceil(a/n),i=Math.ceil(s/n),o=e.data;if(n<=0)t.Util.error("pixelSize value can not be <= 0");else for(let t=0;t<r;t+=1)for(let e=0;e<i;e+=1){let r=0,i=0,l=0,c=0;const d=t*n,u=d+n,h=e*n,m=h+n;let p=0;for(let e=d;e<u;e+=1)if(!(e>=a))for(let t=h;t<m;t+=1){if(t>=s)continue;const n=4*(a*t+e);r+=o[n+0],i+=o[n+1],l+=o[n+2],c+=o[n+3],p+=1}r/=p,i/=p,l/=p,c/=p;for(let e=d;e<u;e+=1)if(!(e>=a))for(let t=h;t<m;t+=1){if(t>=s)continue;const n=4*(a*t+e);o[n+0]=r,o[n+1]=i,o[n+2]=l,o[n+3]=c}}},e.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,a.getNumberValidator)(),e.Factory.afterSetFilter),q$}(),R=function(){if(H$)return G$;H$=1,Object.defineProperty(G$,"__esModule",{value:!0}),G$.Posterize=void 0;const e=tB(),t=nB(),n=eB();return G$.Posterize=function(e){const t=Math.round(254*this.levels())+1,n=e.data,a=n.length,s=255/t;for(let r=0;r<a;r+=1)n[r]=Math.floor(n[r]/s)*s},e.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),G$}(),T=function(){if(K$)return W$;K$=1,Object.defineProperty(W$,"__esModule",{value:!0}),W$.RGB=void 0;const e=tB(),t=nB(),n=eB();return W$.RGB=function(e){const t=e.data,n=t.length,a=this.red(),s=this.green(),r=this.blue();for(let i=0;i<n;i+=4){const e=(.34*t[i]+.5*t[i+1]+.16*t[i+2])/255;t[i]=e*a,t[i+1]=e*s,t[i+2]=e*r,t[i+3]=t[i+3]}},e.Factory.addGetterSetter(t.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),W$}(),M=function(){if(Q$)return Y$;Q$=1,Object.defineProperty(Y$,"__esModule",{value:!0}),Y$.RGBA=void 0;const e=tB(),t=nB(),n=eB();return Y$.RGBA=function(e){const t=e.data,n=t.length,a=this.red(),s=this.green(),r=this.blue(),i=this.alpha();for(let o=0;o<n;o+=4){const e=1-i;t[o]=a*i+t[o]*e,t[o+1]=s*i+t[o+1]*e,t[o+2]=r*i+t[o+2]*e}},e.Factory.addGetterSetter(t.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e}),Y$}(),D=(X$||(X$=1,Object.defineProperty(Z$,"__esModule",{value:!0}),Z$.Sepia=void 0,Z$.Sepia=function(e){const t=e.data,n=t.length;for(let a=0;a<n;a+=4){const e=t[a+0],n=t[a+1],s=t[a+2];t[a+0]=Math.min(255,.393*e+.769*n+.189*s),t[a+1]=Math.min(255,.349*e+.686*n+.168*s),t[a+2]=Math.min(255,.272*e+.534*n+.131*s)}}),Z$),L=(J$||(J$=1,Object.defineProperty(eU,"__esModule",{value:!0}),eU.Solarize=void 0,eU.Solarize=function(e){const t=e.data,n=e.width,a=4*n;let s=e.height;do{const e=(s-1)*a;let r=n;do{const n=e+4*(r-1);let a=t[n],s=t[n+1],i=t[n+2];a>127&&(a=255-a),s>127&&(s=255-s),i>127&&(i=255-i),t[n]=a,t[n+1]=s,t[n+2]=i}while(--r)}while(--s)}),eU),F=function(){if(tU)return aU;tU=1,Object.defineProperty(aU,"__esModule",{value:!0}),aU.Threshold=void 0;const e=tB(),t=nB(),n=eB();return aU.Threshold=function(e){const t=255*this.threshold(),n=e.data,a=n.length;for(let s=0;s<a;s+=1)n[s]=n[s]<t?0:255},e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),aU}();return Tz.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:r.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:l.Path,Rect:c.Rect,RegularPolygon:d.RegularPolygon,Ring:u.Ring,Sprite:h.Sprite,Star:m.Star,Text:p.Text,TextPath:f.TextPath,Transformer:g.Transformer,Wedge:x.Wedge,Filters:{Blur:v.Blur,Brighten:y.Brighten,Contrast:b.Contrast,Emboss:w.Emboss,Enhance:S.Enhance,Grayscale:j.Grayscale,HSL:C.HSL,HSV:k.HSV,Invert:N.Invert,Kaleidoscope:_.Kaleidoscope,Mask:E.Mask,Noise:P.Noise,Pixelate:A.Pixelate,Posterize:R.Posterize,RGB:T.RGB,RGBA:M.RGBA,Sepia:D.Sepia,Solarize:L.Solarize,Threshold:F.Threshold}}),Tz}var rU,iU=Rz.exports;const oU=n(function(){if(rU)return Rz.exports;rU=1,Object.defineProperty(iU,"__esModule",{value:!0});const e=sU();return Rz.exports=e.Konva,Rz.exports}());var lU,cU={exports:{}};const dU=n((lU||(lU=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=EB();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const a=EB();e.exports=a.Konva}(cU,cU.exports)),cU.exports));var uU,hU,mU,pU,fU={exports:{}},gU={exports:{}},xU={exports:{}},vU={};function yU(){return hU||(hU=1,xU.exports=(uU||(uU=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<s(r,t)))break e;e[a]=t,e[n]=r,n=a}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<r&&0>s(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<r&&0>s(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,f=!1,g=!1,x="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var s=n(c);null!==s;){if(null===s.callback)a(c);else{if(!(s.startTime<=e))break;a(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function w(e){if(f=!1,b(e),!p)if(null!==n(l))p=!0,j||(j=!0,S());else{var t=n(c);null!==t&&R(w,t.startTime-e)}}var S,j=!1,C=-1,k=5,N=-1;function _(){return!(!g&&e.unstable_now()-N<k)}function E(){if(g=!1,j){var t=e.unstable_now();N=t;var s=!0;try{e:{p=!1,f&&(f=!1,v(C),C=-1),m=!0;var r=h;try{t:{for(b(t),u=n(l);null!==u&&!(u.expirationTime>t&&_());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){u.callback=o,b(t),s=!0;break t}u===n(l)&&a(l),b(t)}else a(l);u=n(l)}if(null!==u)s=!0;else{var d=n(c);null!==d&&R(w,d.startTime-t),s=!1}}break e}finally{u=null,h=r,m=!1}s=void 0}}finally{s?S():j=!1}}}if("function"==typeof y)S=function(){y(E)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=E,S=function(){A.postMessage(null)}}else S=function(){x(E,0)};function R(t,n){C=x(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(a,s,r){var i=e.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?i+r:i,a){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return a={id:d++,callback:s,priorityLevel:a,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(a.sortIndex=r,t(c,a),null===n(l)&&a===n(c)&&(f?(v(C),C=-1):f=!0,R(w,r-i))):(a.sortIndex=o,t(l,a),p||m||(p=!0,j||(j=!0,S()))),a},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(vU)),vU)),xU.exports}function bU(){return mU||(mU=1,(e=gU).exports=function(e){function t(e,t,n,a){return new Bs(e,t,n,a)}function n(){}function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function r(e){if(s(e)!==e)throw Error(a(188))}function i(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(null===o)break;var l=o.alternate;if(null===l){if(null!==(i=o.return)){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return r(o),e;if(l===i)return r(o),t;l=l.sibling}throw Error(a(188))}if(n.return!==i.return)n=o,i=l;else{for(var c=!1,d=o.child;d;){if(d===n){c=!0,n=o,i=l;break}if(d===i){c=!0,i=o,n=l;break}d=d.sibling}if(!c){for(d=l.child;d;){if(d===n){c=!0,n=l,i=o;break}if(d===i){c=!0,i=l,n=o;break}d=d.sibling}if(!c)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function o(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=o(e)))return t;e=e.sibling}return null}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=l(e)))return t;e=e.sibling}return null}function c(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=wr&&e[wr]||e["@@iterator"])?e:null}function d(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===Sr?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case cr:return"Fragment";case ur:return"Profiler";case dr:return"StrictMode";case fr:return"Suspense";case gr:return"SuspenseList";case yr:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case lr:return"Portal";case mr:return e.displayName||"Context";case hr:return(e._context.displayName||"Context")+".Consumer";case pr:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case xr:return null!==(t=e.displayName||null)?t:d(e.type)||"Memo";case vr:t=e._payload,e=e._init;try{return d(e(t))}catch(n){}}return null}function u(e){return{current:e}}function h(e){0>Go||(e.current=Ho[Go],Ho[Go]=null,Go--)}function p(e,t){Go++,Ho[Go]=e.current,e.current=t}function f(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function g(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&a;return 0!==o?0!==(a=o&~r)?s=f(a):0!==(i&=o)?s=f(i):n||0!==(n=o&~e)&&(s=f(n)):0!==(o=a&~r)?s=f(o):0!==i?s=f(i):n||0!==(n=a&~e)&&(s=f(n)),0===s?0:0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(n=t&-t)||32===r&&4194048&n)?t:s}function x(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function v(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function y(){var e=Jo;return!(62914560&(Jo<<=1))&&(Jo=4194304),e}function b(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function w(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function S(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Wo(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|261930&n}function j(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Wo(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}function C(e,t){var n=t&-t;return 0!==((n=42&n?1:k(n))&(e.suspendedLanes|t))?0:n}function k(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function N(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function _(e){if("function"==typeof cl&&dl(e),hl&&"function"==typeof hl.setStrictMode)try{hl.setStrictMode(ul,e)}catch(GQ){}}function E(e){if(void 0===wo)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wo=t&&t[1]||"",So=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+wo+e+So}function P(e,t){if(!e||gl)return"";gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var a=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){a=r}e.call(n.prototype)}}else{try{throw Error()}catch(i){a=i}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&a&&"string"==typeof o.stack)return[o.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),i=r[0],o=r[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(s=a=0;a<l.length&&!l[a].includes("DetermineComponentFrameRoot");)a++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(a===l.length||s===c.length)for(a=l.length-1,s=c.length-1;1<=a&&0<=s&&l[a]!==c[s];)s--;for(;1<=a&&0<=s;a--,s--)if(l[a]!==c[s]){if(1!==a||1!==s)do{if(a--,0>--s||l[a]!==c[s]){var d="\n"+l[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=a&&0<=s);break}}}finally{gl=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?E(n):""}function A(e,t){switch(e.tag){case 26:case 27:case 5:return E(e.type);case 16:return E("Lazy");case 13:return e.child!==t&&null!==t?E("Suspense Fallback"):E("Suspense");case 19:return E("SuspenseList");case 0:case 15:return P(e.type,!1);case 11:return P(e.type.render,!1);case 1:return P(e.type,!0);case 31:return E("Activity");default:return""}}function R(e){try{var t="",n=null;do{t+=A(e,n),n=e,e=e.return}while(e);return t}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}function T(e,t){if("object"==typeof e&&null!==e){var n=xl.get(e);return void 0!==n?n:(t={value:e,source:t,stack:R(t)},xl.set(e,t),t)}return{value:e,source:t,stack:R(t)}}function M(e,t){vl[yl++]=wl,vl[yl++]=bl,bl=e,wl=t}function D(e,t,n){Sl[jl++]=kl,Sl[jl++]=Nl,Sl[jl++]=Cl,Cl=e;var a=kl;e=Nl;var s=32-Wo(a)-1;a&=~(1<<s),n+=1;var r=32-Wo(t)+s;if(30<r){var i=s-s%5;r=(a&(1<<i)-1).toString(32),a>>=i,s-=i,kl=1<<32-Wo(t)+s|n<<s|a,Nl=r+e}else kl=1<<r|n<<s|a,Nl=e}function L(e){null!==e.return&&(M(e,1),D(e,1,0))}function F(e){for(;e===bl;)bl=vl[--yl],vl[yl]=null,wl=vl[--yl],vl[yl]=null;for(;e===Cl;)Cl=Sl[--jl],Sl[jl]=null,Nl=Sl[--jl],Sl[jl]=null,kl=Sl[--jl],Sl[jl]=null}function I(e,t){Sl[jl++]=kl,Sl[jl++]=Nl,Sl[jl++]=Cl,kl=t.id,Nl=t.overflow,Cl=e}function O(e,t){p(Pl,t),p(El,e),p(_l,null),e=Pr(t),h(_l),p(_l,e)}function z(){h(_l),h(El),h(Pl)}function B(e){null!==e.memoizedState&&p(Al,e);var t=_l.current,n=Ar(t,e.type);t!==n&&(p(El,e),p(_l,n))}function $(e){El.current===e&&(h(_l),h(El)),Al.current===e&&(h(Al),$r?ii._currentValue=ri:ii._currentValue2=ri)}function U(e){throw W(T(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),Fl}function V(e,t){if(!qr)throw Error(a(175));ao(e.stateNode,e.type,e.memoizedProps,t,e)||U(e,!0)}function q(e){for(Rl=e.return;Rl;)switch(Rl.tag){case 5:case 31:case 13:return void(Ll=!1);case 27:case 3:return void(Ll=!0);default:Rl=Rl.return}}function H(e){if(!qr||e!==Rl)return!1;if(!Ml)return q(e),Ml=!0,!1;var t=e.tag;if(zo?3!==t&&27!==t&&(5!==t||bo(e.type)&&!Fr(e.type,e.memoizedProps))&&Tl&&U(e):3!==t&&(5!==t||bo(e.type)&&!Fr(e.type,e.memoizedProps))&&Tl&&U(e),q(e),13===t){if(!qr)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Tl=lo(e)}else if(31===t){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Tl=oo(e)}else Tl=zo&&27===t?Ki(e.type,Tl):Rl?Gi(e.stateNode):null;return!0}function G(){qr&&(Tl=Rl=null,Ml=!1)}function K(){var e=Dl;return null!==e&&(null===bd?bd=e:bd.push.apply(bd,e),Dl=null),e}function W(e){null===Dl?Dl=[e]:Dl.push(e)}function Q(e,t,n){$r?(p(Il,t._currentValue),t._currentValue=n):(p(Il,t._currentValue2),t._currentValue2=n)}function Y(e){var t=Il.current;$r?e._currentValue=t:e._currentValue2=t,h(Il)}function X(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Z(e,t,n,s){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var o=r.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),X(i.return,n,e),s||(o=null);break e}i=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),X(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function J(e,t,n,s){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(524288&r.flags)i=!0;else if(262144&r.flags)break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=r.type;ml(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===Al.current){if(null===(o=r.alternate))throw Error(a(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(ii):e=[ii])}r=r.return}null!==e&&Z(t,e,n,s),t.flags|=262144}function ee(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!ml($r?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function te(e){Ol=e,zl=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ne(e){return se(Ol,e)}function ae(e,t){return null===Ol&&te(e),se(e,t)}function se(e,t){var n=$r?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===zl){if(null===e)throw Error(a(308));zl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zl=zl.next=t;return n}function re(){return{controller:new Bl,data:new Map,refCount:0}}function ie(e){e.refCount--,0===e.refCount&&$l(Ul,function(){e.controller.abort()})}function oe(){}function le(e){e!==Hl&&null===e.next&&(null===Hl?ql=Hl=e:Hl=Hl.next=e),Kl=!0,Gl||(Gl=!0,li?ci(function(){6&ad?el(rl,de):ue()}):el(rl,de))}function ce(e,t){if(!Wl&&Kl){Wl=!0;do{for(var n=!1,a=ql;null!==a;){if(0!==e){var s=a.pendingLanes;if(0===s)var r=0;else{var i=a.suspendedLanes,o=a.pingedLanes;r=(1<<31-Wo(42|e)+1)-1,r=201326741&(r&=s&~(i&~o))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,pe(a,r))}else r=id,!(3&(r=g(a,a===sd?r:0,null!==a.cancelPendingCommit||a.timeoutHandle!==Br)))||x(a,r)||(n=!0,pe(a,r));a=a.next}}while(n);Wl=!1}}function de(){ue()}function ue(){Kl=Gl=!1;var e=0;0!==Ql&&Yr()&&(e=Ql);for(var t=sl(),n=null,a=ql;null!==a;){var s=a.next,r=he(a,t);0===r?(a.next=null,null===n?ql=s:n.next=s,null===s&&(Hl=n)):(n=a,(0!==e||3&r)&&(Kl=!0)),a=s}0!==_d&&5!==_d||ce(e),0!==Ql&&(Ql=0)}function he(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var i=31-Wo(r),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&a)||(s[i]=v(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(n=id,n=g(e,e===(t=sd)?n:0,null!==e.cancelPendingCommit||e.timeoutHandle!==Br),a=e.callbackNode,0===n||e===t&&(2===od||9===od)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&tl(a),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||x(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&tl(a),N(n)){case 2:case 8:n=il;break;case 32:default:n=ol;break;case 268435456:n=ll}return a=me.bind(null,e),n=el(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&tl(a),e.callbackPriority=2,e.callbackNode=null,2}function me(e,t){if(0!==_d&&5!==_d)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Rs()&&e.callbackNode!==n)return null;var a=id;return 0===(a=g(e,e===sd?a:0,null!==e.cancelPendingCommit||e.timeoutHandle!==Br))?null:(is(e,a,t),he(e,sl()),null!=e.callbackNode&&e.callbackNode===n?me.bind(null,e):null)}function pe(e,t){if(Rs())return null;is(e,t,!0)}function fe(){if(0===Ql){var e=Zl;0===e&&(e=Xo,!(261888&(Xo<<=1))&&(Xo=256)),Ql=e}return Ql}function ge(){if(0===--Xl&&null!==Yl){null!==Jl&&(Jl.status="fulfilled");var e=Yl;Yl=null,Zl=0,Jl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xe(){var e=tc.current;return null!==e?e:sd.pooledCache}function ve(e,t){p(tc,null===t?tc.current:t.pool)}function ye(){var e=xe();return null===e?null:{parent:$r?Vl._currentValue:Vl._currentValue2,pool:e}}function be(e,t){if(ml(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!fl.call(t,s)||!ml(e[s],t[s]))return!1}return!0}function we(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Se(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(oe,oe),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ke(e=t.reason),e;default:if("string"==typeof t.status)t.then(oe,oe);else{if(null!==(e=sd)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ke(e=t.reason),e}throw ic=t,nc}}function je(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw ic=t,nc;throw t}}function Ce(){if(null===ic)throw Error(a(459));var e=ic;return ic=null,e}function ke(e){if(e===nc||e===sc)throw Error(a(483))}function Ne(e){var t=lc;return lc+=1,null===oc&&(oc=[]),Se(oc,e,t)}function _e(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ee(e,t){if(t.$$typeof===ir)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pe(e){function n(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function s(t,a){if(!e)return null;for(;null!==a;)n(t,a),a=a.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Us(e,t)).index=0,e.sibling=null,e}function o(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function d(e,t,n,a){return null===t||6!==t.tag?((t=Gs(n,e.mode,a)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,a){var s=n.type;return s===cr?m(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===vr&&je(s)===t.type)?(_e(t=i(t,n.props),n),t.return=e,t):(_e(t=qs(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function h(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ws(n,e.mode,a)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function m(e,t,n,a,s){return null===t||7!==t.tag?((t=Hs(n,e.mode,a,s)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Gs(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case or:return _e(n=qs(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case lr:return(t=Ws(t,e.mode,n)).return=e,t;case vr:return p(e,t=je(t),n)}if(jr(t)||c(t))return(t=Hs(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,Ne(t),n);if(t.$$typeof===mr)return p(e,ae(e,t),n);Ee(e,t)}return null}function f(e,t,n,a){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==s?null:d(e,t,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case or:return n.key===s?u(e,t,n,a):null;case lr:return n.key===s?h(e,t,n,a):null;case vr:return f(e,t,n=je(n),a)}if(jr(n)||c(n))return null!==s?null:m(e,t,n,a,null);if("function"==typeof n.then)return f(e,t,Ne(n),a);if(n.$$typeof===mr)return f(e,t,ae(e,n),a);Ee(e,n)}return null}function g(e,t,n,a,s){if("string"==typeof a&&""!==a||"number"==typeof a||"bigint"==typeof a)return d(t,e=e.get(n)||null,""+a,s);if("object"==typeof a&&null!==a){switch(a.$$typeof){case or:return u(t,e=e.get(null===a.key?n:a.key)||null,a,s);case lr:return h(t,e=e.get(null===a.key?n:a.key)||null,a,s);case vr:return g(e,t,n,a=je(a),s)}if(jr(a)||c(a))return m(t,e=e.get(n)||null,a,s,null);if("function"==typeof a.then)return g(e,t,n,Ne(a),s);if(a.$$typeof===mr)return g(e,t,n,ae(t,a),s);Ee(t,a)}return null}function x(t,d,u,h){if("object"==typeof u&&null!==u&&u.type===cr&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case or:e:{for(var m=u.key;null!==d;){if(d.key===m){if((m=u.type)===cr){if(7===d.tag){s(t,d.sibling),(h=i(d,u.props.children)).return=t,t=h;break e}}else if(d.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===vr&&je(m)===d.type){s(t,d.sibling),_e(h=i(d,u.props),u),h.return=t,t=h;break e}s(t,d);break}n(t,d),d=d.sibling}u.type===cr?((h=Hs(u.props.children,t.mode,h,u.key)).return=t,t=h):(_e(h=qs(u.type,u.key,u.props,null,t.mode,h),u),h.return=t,t=h)}return l(t);case lr:e:{for(m=u.key;null!==d;){if(d.key===m){if(4===d.tag&&d.stateNode.containerInfo===u.containerInfo&&d.stateNode.implementation===u.implementation){s(t,d.sibling),(h=i(d,u.children||[])).return=t,t=h;break e}s(t,d);break}n(t,d),d=d.sibling}(h=Ws(u,t.mode,h)).return=t,t=h}return l(t);case vr:return x(t,d,u=je(u),h)}if(jr(u))return function(t,a,i,l){for(var c=null,d=null,u=a,h=a=0,m=null;null!==u&&h<i.length;h++){u.index>h?(m=u,u=null):m=u.sibling;var x=f(t,u,i[h],l);if(null===x){null===u&&(u=m);break}e&&u&&null===x.alternate&&n(t,u),a=o(x,a,h),null===d?c=x:d.sibling=x,d=x,u=m}if(h===i.length)return s(t,u),Ml&&M(t,h),c;if(null===u){for(;h<i.length;h++)null!==(u=p(t,i[h],l))&&(a=o(u,a,h),null===d?c=u:d.sibling=u,d=u);return Ml&&M(t,h),c}for(u=r(u);h<i.length;h++)null!==(m=g(u,t,h,i[h],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?h:m.key),a=o(m,a,h),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach(function(e){return n(t,e)}),Ml&&M(t,h),c}(t,d,u,h);if(c(u)){if("function"!=typeof(m=c(u)))throw Error(a(150));return function(t,i,l,c){if(null==l)throw Error(a(151));for(var d=null,u=null,h=i,m=i=0,x=null,v=l.next();null!==h&&!v.done;m++,v=l.next()){h.index>m?(x=h,h=null):x=h.sibling;var y=f(t,h,v.value,c);if(null===y){null===h&&(h=x);break}e&&h&&null===y.alternate&&n(t,h),i=o(y,i,m),null===u?d=y:u.sibling=y,u=y,h=x}if(v.done)return s(t,h),Ml&&M(t,m),d;if(null===h){for(;!v.done;m++,v=l.next())null!==(v=p(t,v.value,c))&&(i=o(v,i,m),null===u?d=v:u.sibling=v,u=v);return Ml&&M(t,m),d}for(h=r(h);!v.done;m++,v=l.next())null!==(v=g(h,t,m,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),i=o(v,i,m),null===u?d=v:u.sibling=v,u=v);return e&&h.forEach(function(e){return n(t,e)}),Ml&&M(t,m),d}(t,d,u=m.call(u),h)}if("function"==typeof u.then)return x(t,d,Ne(u),h);if(u.$$typeof===mr)return x(t,d,ae(t,u),h);Ee(t,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==d&&6===d.tag?(s(t,d.sibling),(h=i(d,u)).return=t,t=h):(s(t,d),(h=Gs(u,t.mode,h)).return=t,t=h),l(t)):s(t,d)}return function(e,n,a,s){try{lc=0;var r=x(e,n,a,s);return oc=null,r}catch(o){if(o===nc||o===sc)throw o;var i=t(29,o,null,e.mode);return i.lanes=s,i.return=e,i}}}function Ae(){for(var e=hc,t=mc=hc=0;t<e;){var n=uc[t];uc[t++]=null;var a=uc[t];uc[t++]=null;var s=uc[t];uc[t++]=null;var r=uc[t];if(uc[t++]=null,null!==a&&null!==s){var i=a.pending;null===i?s.next=s:(s.next=i.next,i.next=s),a.pending=s}0!==r&&De(n,s,r)}}function Re(e,t,n,a){uc[hc++]=e,uc[hc++]=t,uc[hc++]=n,uc[hc++]=a,mc|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Te(e,t,n,a){return Re(e,t,n,a),Le(e)}function Me(e,t){return Re(e,null,null,t),Le(e)}function De(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var s=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(a=r.alternate)&&(a.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,s&&null!==t&&(s=31-Wo(n),null===(a=(e=r.hiddenUpdates)[s])?e[s]=[t]:a.push(t),t.lane=536870912|n),r):null}function Le(e){if(50<Dd)throw Dd=0,Ld=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function Fe(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ie(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oe(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ze(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,2&ad){var s=a.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),a.pending=t,t=Le(e),De(e,null,n),t}return Re(e,a,t,n),Le(e)}function Be(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,j(e,n)}}function $e(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?s=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ue(){if(fc&&null!==Jl)throw Jl}function Ve(e,t,n,a){fc=!1;var s=e.updateQueue;pc=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?r=c:i.next=c,i=l;var d=e.alternate;null!==d&&(o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l)}if(null!==r){var u=s.baseState;for(i=0,d=c=l=null,o=r;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(id&h)===h:(a&h)===h){0!==h&&h===Zl&&(fc=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,f=o;h=t;var g=n;switch(f.tag){case 1:if("function"==typeof(p=f.payload)){u=p.call(g,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=f.payload)?p.call(g,u,h):p))break e;u=rr({},u,h);break e;case 2:pc=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null===r&&(s.shared.lanes=0),pd|=i,e.lanes=i,e.memoizedState=u}}function qe(e,t){if("function"!=typeof e)throw Error(a(191,e));e.call(t)}function He(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)qe(n[e],t)}function Ge(e,t){p(xc,e=hd),p(gc,t),hd=e|t.baseLanes}function Ke(){p(xc,hd),p(gc,gc.current)}function We(){hd=xc.current,h(gc),h(xc)}function Qe(e){var t=e.alternate;p(bc,1&bc.current),p(vc,e),null===yc&&(null===t||null!==gc.current||null!==t.memoizedState)&&(yc=e)}function Ye(e){p(bc,bc.current),p(vc,e),null===yc&&(yc=e)}function Xe(e){22===e.tag?(p(bc,bc.current),p(vc,e),null===yc&&(yc=e)):Ze()}function Ze(){p(bc,bc.current),p(vc,vc.current)}function Je(e){h(vc),yc===e&&(yc=null),h(bc)}function et(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Bi(n)||$i(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function tt(){throw Error(a(321))}function nt(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ml(e[n],t[n]))return!1;return!0}function at(e,t,n,a,s,r){return wc=r,Sc=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cr.H=null===e||null===e.memoizedState?Mc:Dc,_c=!1,r=n(a,s),_c=!1,Nc&&(r=rt(t,n,a,s)),st(e),r}function st(e){Cr.H=Tc;var t=null!==jc&&null!==jc.next;if(wc=0,Cc=jc=Sc=null,kc=!1,Pc=0,Ac=null,t)throw Error(a(300));null===e||Oc||null!==(e=e.dependencies)&&ee(e)&&(Oc=!0)}function rt(e,t,n,s){Sc=e;var r=0;do{if(Nc&&(Ac=null),Pc=0,Nc=!1,25<=r)throw Error(a(301));if(r+=1,Cc=jc=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}Cr.H=Lc,i=t(n,s)}while(Nc);return i}function it(){var e=Cr.H,t=e.useState()[0];return t="function"==typeof t.then?ht(t):t,e=e.useState()[0],(null!==jc?jc.memoizedState:null)!==e&&(Sc.flags|=1024),t}function ot(){var e=0!==Ec;return Ec=0,e}function lt(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ct(e){if(kc){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}kc=!1}wc=0,Cc=jc=Sc=null,Nc=!1,Pc=Ec=0,Ac=null}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Cc?Sc.memoizedState=Cc=e:Cc=Cc.next=e,Cc}function ut(){if(null===jc){var e=Sc.alternate;e=null!==e?e.memoizedState:null}else e=jc.next;var t=null===Cc?Sc.memoizedState:Cc.next;if(null!==t)Cc=t,jc=e;else{if(null===e){if(null===Sc.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(jc=e).memoizedState,baseState:jc.baseState,baseQueue:jc.baseQueue,queue:jc.queue,next:null},null===Cc?Sc.memoizedState=Cc=e:Cc=Cc.next=e}return Cc}function ht(e){var t=Pc;return Pc+=1,null===Ac&&(Ac=[]),e=Se(Ac,e,t),t=Sc,null===(null===Cc?t.memoizedState:Cc.next)&&(t=t.alternate,Cr.H=null===t||null===t.memoizedState?Mc:Dc),e}function mt(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ht(e);if(e.$$typeof===mr)return ne(e)}throw Error(a(438,String(e)))}function pt(e){var t=null,n=Sc.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=Sc.alternate;null!==a&&null!==(a=a.updateQueue)&&null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=br;return t.index++,n}function ft(e,t){return"function"==typeof t?t(e):t}function gt(e){return xt(ut(),jc,e)}function xt(e,t,n){var s=e.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=n;var r=e.baseQueue,i=s.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var l=o=null,c=null,d=t=r.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(id&h)===h:(wc&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Zl&&(u=!0);else{if((wc&m)===m){d=d.next,m===Zl&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,Sc.lanes|=m,pd|=m}h=d.action,_c&&n(i,h),i=d.hasEagerState?d.eagerState:n(i,h)}else m={lane:h,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,o=i):c=c.next=m,Sc.lanes|=h,pd|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=i:c.next=l,!ml(i,e.memoizedState)&&(Oc=!0,u&&null!==(n=Jl)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return null===r&&(s.lanes=0),[e.memoizedState,s.dispatch]}function vt(e){var t=ut(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);ml(i,t.memoizedState)||(Oc=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function yt(e,t,n){var s=Sc,r=ut(),i=Ml;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!ml((jc||r).memoizedState,n);if(o&&(r.memoizedState=n,Oc=!0),r=r.queue,qt(St.bind(null,s,r,e),[e]),r.getSnapshot!==t||o||null!==Cc&&1&Cc.memoizedState.tag){if(s.flags|=2048,zt(9,{destroy:void 0},wt.bind(null,s,r,n,t),null),null===sd)throw Error(a(349));i||127&wc||bt(s,t,n)}return n}function bt(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Sc.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wt(e,t,n,a){t.value=n,t.getSnapshot=a,jt(t)&&Ct(e)}function St(e,t,n){return n(function(){jt(t)&&Ct(e)})}function jt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ml(e,n)}catch(a){return!0}}function Ct(e){var t=Me(e,2);null!==t&&rs(t,0,2)}function kt(e){var t=dt();if("function"==typeof e){var n=e;if(e=n(),_c){_(!0);try{n()}finally{_(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:e},t}function Nt(e,t,n,a){return e.baseState=n,xt(e,jc,"function"==typeof a?a:ft)}function _t(e,t,n,s,r){if(hn(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==Cr.T?n(!0):i.isTransition=!1,s(i),null===(n=t.pending)?(i.next=t.pending=i,Et(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Et(e,t){var n=t.action,a=t.payload,s=e.state;if(t.isTransition){var r=Cr.T,i={};Cr.T=i;try{var o=n(s,a),l=Cr.S;null!==l&&l(i,o),Pt(e,t,o)}catch(c){Rt(e,t,c)}finally{null!==r&&null!==i.types&&(r.types=i.types),Cr.T=r}}else try{Pt(e,t,r=n(s,a))}catch(d){Rt(e,t,d)}}function Pt(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){At(e,t,n)},function(n){return Rt(e,t,n)}):At(e,t,n)}function At(e,t,n){t.status="fulfilled",t.value=n,Tt(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Et(e,n)))}function Rt(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,Tt(t),t=t.next}while(t!==a)}e.action=null}function Tt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Mt(e,t){return t}function Dt(e,t){if(Ml){var n=sd.formState;if(null!==n){e:{var a=Sc;if(Ml){if(Tl){var s=qi(Tl,Ll);if(s){Tl=Gi(s),a=Hi(s);break e}}U(a)}a=!1}a&&(t=n[0])}}(n=dt()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mt,lastRenderedState:t},n.queue=a,n=cn.bind(null,Sc,a),a.dispatch=n,a=kt(!1);var r=un.bind(null,Sc,!1,a.queue);return s={state:t,dispatch:null,action:e,pending:null},(a=dt()).queue=s,n=_t.bind(null,Sc,s,r,n),s.dispatch=n,a.memoizedState=e,[t,n,!1]}function Lt(e){return Ft(ut(),jc,e)}function Ft(e,t,n){if(t=xt(e,t,Mt)[0],e=gt(ft)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var a=ht(t)}catch(i){if(i===nc)throw sc;throw i}else a=t;var s=(t=ut()).queue,r=s.dispatch;return n!==t.memoizedState&&(Sc.flags|=2048,zt(9,{destroy:void 0},It.bind(null,s,n),null)),[a,r,e]}function It(e,t){e.action=t}function Ot(e){var t=ut(),n=jc;if(null!==n)return Ft(t,n,e);ut(),t=t.memoizedState;var a=(n=ut()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function zt(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=Sc.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Bt(){return ut().memoizedState}function $t(e,t,n,a){var s=dt();Sc.flags|=e,s.memoizedState=zt(1|t,{destroy:void 0},n,void 0===a?null:a)}function Ut(e,t,n,a){var s=ut();a=void 0===a?null:a;var r=s.memoizedState.inst;null!==jc&&null!==a&&nt(a,jc.memoizedState.deps)?s.memoizedState=zt(t,r,n,a):(Sc.flags|=e,s.memoizedState=zt(1|t,r,n,a))}function Vt(e,t){$t(8390656,8,e,t)}function qt(e,t){Ut(2048,8,e,t)}function Ht(e){var t=ut().memoizedState;return function(e){Sc.flags|=4;var t=Sc.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&ad)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Gt(e,t){return Ut(4,2,e,t)}function Kt(e,t){return Ut(4,4,e,t)}function Wt(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Qt(e,t,n){n=null!=n?n.concat([e]):null,Ut(4,4,Wt.bind(null,t,e),n)}function Yt(){}function Xt(e,t){var n=ut();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&nt(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Zt(e,t){var n=ut();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&nt(t,a[1]))return a[0];if(a=e(),_c){_(!0);try{e()}finally{_(!1)}}return n.memoizedState=[a,t],a}function Jt(e,t,n){return void 0===n||1073741824&wc&&!(261930&id)?e.memoizedState=t:(e.memoizedState=n,e=ss(),Sc.lanes|=e,pd|=e,n)}function en(e,t,n,a){return ml(n,t)?n:null!==gc.current?(e=Jt(e,n,a),ml(e,t)||(Oc=!0),e):42&wc&&(!(1073741824&wc)||261930&id)?(e=ss(),Sc.lanes|=e,pd|=e,t):(Oc=!0,e.memoizedState=n)}function tn(e,t,n,a,s){var r=Wr();Kr(0!==r&&8>r?r:8);var i,o,l,c=Cr.T,d={};Cr.T=d,un(e,!1,t,n);try{var u=s(),h=Cr.S;null!==h&&h(d,u),null!==u&&"object"==typeof u&&"function"==typeof u.then?dn(e,t,(i=a,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},u.then(function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),as()):dn(e,t,a,as())}catch(m){dn(e,t,{then:function(){},status:"rejected",reason:m},as())}finally{Kr(r),null!==c&&null!==d.types&&(c.types=d.types),Cr.T=c}}function nn(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:ri,baseState:ri,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:ri},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function an(){return ne(ii)}function sn(){return ut().memoizedState}function rn(){return ut().memoizedState}function on(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=as(),a=ze(t,e=Oe(n),n);return null!==a&&(rs(a,0,n),Be(a,t,n)),t={cache:re()},void(e.payload=t)}t=t.return}}function ln(e,t,n){var a=as();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hn(e)?mn(t,n):null!==(n=Te(e,t,n,a))&&(rs(n,0,a),pn(n,t,a))}function cn(e,t,n){dn(e,t,n,as())}function dn(e,t,n,a){var s={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hn(e))mn(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,n);if(s.hasEagerState=!0,s.eagerState=o,ml(o,i))return Re(e,t,s,0),null===sd&&Ae(),!1}catch(l){}if(null!==(n=Te(e,t,s,a)))return rs(n,0,a),pn(n,t,a),!0}return!1}function un(e,t,n,s){if(s={lane:2,revertLane:fe(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},hn(e)){if(t)throw Error(a(479))}else null!==(t=Te(e,n,s,2))&&rs(t,0,2)}function hn(e){var t=e.alternate;return e===Sc||null!==t&&t===Sc}function mn(e,t){Nc=kc=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pn(e,t,n){if(4194048&n){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,j(e,n)}}function fn(e,t,n,a){n=null==(n=n(a,t=e.memoizedState))?t:rr({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function gn(e,t,n,a,s,r,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!(t.prototype&&t.prototype.isPureReactComponent&&be(n,a)&&be(s,r))}function xn(e,t,n,a){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Fc.enqueueReplaceState(t,t.state,null)}function vn(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var s in n===t&&(n=rr({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function yn(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function bn(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function wn(e,t,n){return(n=Oe(n)).tag=3,n.payload={element:null},n.callback=function(){yn(e,t)},n}function Sn(e){return(e=Oe(e)).tag=3,e}function jn(e,t,n,a){var s=n.type.getDerivedStateFromError;if("function"==typeof s){var r=a.value;e.payload=function(){return s(r)},e.callback=function(){bn(t,n,a)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){bn(t,n,a),"function"!=typeof s&&(null===Nd?Nd=new Set([this]):Nd.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}function Cn(e,t,n,a){t.child=null===e?dc(t,null,n,a):cc(t,e.child,n,a)}function kn(e,t,n,a,s){n=n.render;var r=t.ref;if("ref"in a){var i={};for(var o in a)"ref"!==o&&(i[o]=a[o])}else i=a;return te(t),a=at(e,t,n,i,r,s),o=ot(),null===e||Oc?(Ml&&o&&L(t),t.flags|=1,Cn(e,t,a,s),t.child):(lt(e,t,s),Kn(e,t,s))}function Nn(e,t,n,a,s){if(null===e){var r=n.type;return"function"!=typeof r||$s(r)||void 0!==r.defaultProps||null!==n.compare?((e=qs(n.type,null,a,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,_n(e,t,r,a,s))}if(r=e.child,!Wn(e,s)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:be)(i,a)&&e.ref===t.ref)return Kn(e,t,s)}return t.flags|=1,(e=Us(r,a)).ref=t.ref,e.return=t,t.child=e}function _n(e,t,n,a,s){if(null!==e){var r=e.memoizedProps;if(be(r,a)&&e.ref===t.ref){if(Oc=!1,t.pendingProps=a=r,!Wn(e,s))return t.lanes=e.lanes,Kn(e,t,s);131072&e.flags&&(Oc=!0)}}return Dn(e,t,n,a,s)}function En(e,t,n,a){var s=a.children,r=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===a.mode){if(128&t.flags){if(r=null!==r?r.baseLanes|n:n,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;a=s&~r}else a=0,t.child=null;return An(e,t,r,n,a)}if(!(536870912&n))return a=t.lanes=536870912,An(e,t,null!==r?r.baseLanes|n:n,n,a);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ve(0,null!==r?r.cachePool:null),null!==r?Ge(t,r):Ke(),Xe(t)}else null!==r?(ve(0,r.cachePool),Ge(t,r),Ze(),t.memoizedState=null):(null!==e&&ve(0,null),Ke(),Ze());return Cn(e,t,s,n),t.child}function Pn(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function An(e,t,n,a,s){var r=xe();return r=null===r?null:{parent:$r?Vl._currentValue:Vl._currentValue2,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&ve(0,null),Ke(),Xe(t),null!==e&&J(e,t,a,!0),t.childLanes=s,null}function Rn(e,t){return(t=Un({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Tn(e,t,n){return cc(t,e.child,null,n),(e=Rn(t,t.pendingProps)).flags|=2,Je(t),t.memoizedState=null,e}function Mn(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Dn(e,t,n,a,s){return te(t),n=at(e,t,n,a,void 0,s),a=ot(),null===e||Oc?(Ml&&a&&L(t),t.flags|=1,Cn(e,t,n,s),t.child):(lt(e,t,s),Kn(e,t,s))}function Ln(e,t,n,a,s,r){return te(t),t.updateQueue=null,n=rt(t,a,n,s),st(e),a=ot(),null===e||Oc?(Ml&&a&&L(t),t.flags|=1,Cn(e,t,n,r),t.child):(lt(e,t,r),Kn(e,t,r))}function Fn(e,t,n,a,s){if(te(t),null===t.stateNode){var r=Ko,i=n.contextType;"object"==typeof i&&null!==i&&(r=ne(i)),r=new n(a,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=Fc,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=a,r.state=t.memoizedState,r.refs={},Fe(t),i=n.contextType,r.context="object"==typeof i&&null!==i?ne(i):Ko,r.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(fn(t,n,i,a),r.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(i=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),i!==r.state&&Fc.enqueueReplaceState(r,r.state,null),Ve(t,a,r,s),Ue(),r.state=t.memoizedState),"function"==typeof r.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){r=t.stateNode;var o=t.memoizedProps,l=vn(n,o);r.props=l;var c=r.context,d=n.contextType;i=Ko,"object"==typeof d&&null!==d&&(i=ne(d));var u=n.getDerivedStateFromProps;d="function"==typeof u||"function"==typeof r.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o||c!==i)&&xn(t,r,a,i),pc=!1;var h=t.memoizedState;r.state=h,Ve(t,a,r,s),Ue(),c=t.memoizedState,o||h!==c||pc?("function"==typeof u&&(fn(t,n,u,a),c=t.memoizedState),(l=pc||gn(t,n,l,a,h,c,i))?(d||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.flags|=4194308)):("function"==typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),r.props=a,r.state=c,r.context=i,a=l):("function"==typeof r.componentDidMount&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,Ie(e,t),d=vn(n,i=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=n.contextType,l=Ko,"object"==typeof c&&null!==c&&(l=ne(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(i!==u||h!==l)&&xn(t,r,a,l),pc=!1,h=t.memoizedState,r.state=h,Ve(t,a,r,s),Ue();var m=t.memoizedState;i!==u||h!==m||pc||null!==e&&null!==e.dependencies&&ee(e.dependencies)?("function"==typeof o&&(fn(t,n,o,a),m=t.memoizedState),(d=pc||gn(t,n,d,a,h,m,l)||null!==e&&null!==e.dependencies&&ee(e.dependencies))?(c||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(a,m,l),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(a,m,l)),"function"==typeof r.componentDidUpdate&&(t.flags|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),r.props=a,r.state=m,r.context=l,a=d):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,Mn(e,t),a=!!(128&t.flags),r||a?(r=t.stateNode,n=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&a?(t.child=cc(t,e.child,null,s),t.child=cc(t,null,n,s)):Cn(e,t,n,s),t.memoizedState=r.state,e=t.child):e=Kn(e,t,s),e}function In(e,t,n,a){return G(),t.flags|=256,Cn(e,t,n,a),t.child}function On(e){return{baseLanes:e,cachePool:ye()}}function zn(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=xd),e}function Bn(e,t,n){var s,r=t.pendingProps,i=!1,o=!!(128&t.flags);if((s=o)||(s=(null===e||null!==e.memoizedState)&&!!(2&bc.current)),s&&(i=!0,t.flags&=-129),s=!!(32&t.flags),t.flags&=-33,null===e){if(Ml){if(i?Qe(t):Ze(),(e=Tl)?null!==(e=no(e,Ll))&&(t.memoizedState={dehydrated:e,treeContext:null!==Cl?{id:kl,overflow:Nl}:null,retryLane:536870912,hydrationErrors:null},(n=Ks(e)).return=t,t.child=n,Rl=t,Tl=null):e=null,null===e)throw U(t);return $i(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,i?(Ze(),l=Un({mode:"hidden",children:l},i=t.mode),r=Hs(r,i,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=On(n),r.childLanes=zn(e,s,n),t.memoizedState=zc,Pn(null,r)):(Qe(t),$n(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Qe(t),t.flags&=-257,t=Vn(e,t,n)):null!==t.memoizedState?(Ze(),t.child=e.child,t.flags|=128,t=null):(Ze(),l=r.fallback,i=t.mode,r=Un({mode:"visible",children:r.children},i),(l=Hs(l,i,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,cc(t,e.child,null,n),(r=t.child).memoizedState=On(n),r.childLanes=zn(e,s,n),t.memoizedState=zc,t=Pn(null,r));else if(Qe(t),$i(l))s=Ui(l).digest,(r=Error(a(419))).stack="",r.digest=s,W({value:r,source:null,stack:null}),t=Vn(e,t,n);else if(Oc||J(e,t,n,!1),s=0!==(n&e.childLanes),Oc||s){if(null!==(s=sd)&&0!==(r=C(s,n))&&r!==c.retryLane)throw c.retryLane=r,Me(e,r),rs(s,0,r),Ic;Bi(l)||xs(),t=Vn(e,t,n)}else Bi(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,qr&&(Tl=Xi(l),Rl=t,Ml=!0,Dl=null,Ll=!1,null!==e&&I(t,e)),(t=$n(t,r.children)).flags|=4096);return t}return i?(Ze(),l=r.fallback,i=t.mode,o=(c=e.child).sibling,(r=Us(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==o?l=Us(o,l):(l=Hs(l,i,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,Pn(null,r),r=t.child,null===(l=e.child.memoizedState)?l=On(n):(null!==(i=l.cachePool)?(c=$r?Vl._currentValue:Vl._currentValue2,i=i.parent!==c?{parent:c,pool:c}:i):i=ye(),l={baseLanes:l.baseLanes|n,cachePool:i}),r.memoizedState=l,r.childLanes=zn(e,s,n),t.memoizedState=zc,Pn(e.child,r)):(Qe(t),e=(n=e.child).sibling,(n=Us(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function $n(e,t){return(t=Un({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Un(e,n){return(e=t(22,e,null,n)).lanes=0,e}function Vn(e,t,n){return cc(t,e.child,null,n),(e=$n(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qn(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),X(e.return,t,n)}function Hn(e,t,n,a,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=s,i.treeForkCount=r)}function Gn(e,t,n){var a=t.pendingProps,s=a.revealOrder,r=a.tail;a=a.children;var i=bc.current,o=!!(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,p(bc,i),Cn(e,t,a,n),a=Ml?wl:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qn(e,n,t);else if(19===e.tag)qn(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===et(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Hn(t,!1,s,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===et(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Hn(t,!0,n,null,r,a);break;case"together":Hn(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Kn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pd|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(J(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Us(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Us(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wn(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ee(e))}function Qn(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oc=!0;else{if(!(Wn(e,n)||128&t.flags))return Oc=!1,function(e,t,n){switch(t.tag){case 3:O(t,t.stateNode.containerInfo),Q(0,Vl,e.memoizedState.cache),G();break;case 27:case 5:B(t);break;case 4:O(t,t.stateNode.containerInfo);break;case 10:Q(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ye(t),null;break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(Qe(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bn(e,t,n):(Qe(t),null!==(e=Kn(e,t,n))?e.sibling:null);Qe(t);break;case 19:var s=!!(128&e.flags);if((a=0!==(n&t.childLanes))||(J(e,t,n,!1),a=0!==(n&t.childLanes)),s){if(a)return Gn(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),p(bc,bc.current),a)break;return null;case 22:return t.lanes=0,En(e,t,n,t.pendingProps);case 24:Q(0,Vl,e.memoizedState.cache)}return Kn(e,t,n)}(e,t,n);Oc=!!(131072&e.flags)}else Oc=!1,Ml&&1048576&t.flags&&D(t,wl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=je(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var r=e.$$typeof;if(r===pr){t.tag=11,t=kn(null,t,e,s,n);break e}if(r===xr){t.tag=14,t=Nn(null,t,e,s,n);break e}}throw t=d(e)||e,Error(a(306,t,""))}$s(e)?(s=vn(e,s),t.tag=1,t=Fn(null,t,e,s,n)):(t.tag=0,t=Dn(null,t,e,s,n))}return t;case 0:return Dn(e,t,t.type,t.pendingProps,n);case 1:return Fn(e,t,s=t.type,r=vn(s,t.pendingProps),n);case 3:e:{if(O(t,t.stateNode.containerInfo),null===e)throw Error(a(387));var i=t.pendingProps;s=(r=t.memoizedState).element,Ie(e,t),Ve(t,i,null,n);var o=t.memoizedState;if(i=o.cache,Q(0,Vl,i),i!==r.cache&&Z(t,[Vl],n,!0),Ue(),i=o.element,qr&&r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=In(e,t,i,n);break e}if(i!==s){W(s=T(Error(a(424)),t)),t=In(e,t,i,n);break e}for(qr&&(Tl=Qi(t.stateNode.containerInfo),Rl=t,Ml=!0,Dl=null,Ll=!0),n=dc(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(G(),i===s){t=Kn(e,t,n);break e}Cn(e,t,i,n)}t=t.child}return t;case 26:if(ko)return Mn(e,t),null===e?(n=Eo(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ml||(t.stateNode=Do(t.type,t.pendingProps,Pl.current,t)):t.memoizedState=Eo(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(zo)return B(t),null===e&&zo&&Ml&&(s=t.stateNode=Bo(t.type,t.pendingProps,Pl.current,_l.current,!1),Rl=t,Ll=!0,Tl=Zi(t.type,s,Tl)),Cn(e,t,t.pendingProps.children,n),Mn(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&Ml&&(jo(t.type,t.pendingProps,_l.current),(r=s=Tl)&&(null!==(s=Ji(s,t.type,t.pendingProps,Ll))?(t.stateNode=s,Rl=t,Tl=Wi(s),Ll=!1,r=!0):r=!1),r||U(t)),B(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Fr(r,i)?s=null:null!==o&&Fr(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=at(e,t,it,null,null,n),$r?ii._currentValue=r:ii._currentValue2=r),Mn(e,t),Cn(e,t,s,n),t.child;case 6:return null===e&&Ml&&(Co(t.pendingProps,_l.current),(e=n=Tl)&&(null!==(n=eo(n,t.pendingProps,Ll))?(t.stateNode=n,Rl=t,Tl=null,e=!0):e=!1),e||U(t)),null;case 13:return Bn(e,t,n);case 4:return O(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=cc(t,null,s,n):Cn(e,t,s,n),t.child;case 11:return kn(e,t,t.type,t.pendingProps,n);case 7:return Cn(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cn(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,Q(0,t.type,s.value),Cn(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,te(t),s=s(r=ne(r)),t.flags|=1,Cn(e,t,s,n),t.child;case 14:return Nn(e,t,t.type,t.pendingProps,n);case 15:return _n(e,t,t.type,t.pendingProps,n);case 19:return Gn(e,t,n);case 31:return function(e,t,n){var s=t.pendingProps,r=!!(128&t.flags);if(t.flags&=-129,null===e){if(Ml){if("hidden"===s.mode)return e=Rn(t,s),t.lanes=536870912,Pn(null,e);if(Ye(t),(e=Tl)?null!==(e=to(e,Ll))&&(t.memoizedState={dehydrated:e,treeContext:null!==Cl?{id:kl,overflow:Nl}:null,retryLane:536870912,hydrationErrors:null},(n=Ks(e)).return=t,t.child=n,Rl=t,Tl=null):e=null,null===e)throw U(t);return t.lanes=536870912,null}return Rn(t,s)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Ye(t),r)if(256&t.flags)t.flags&=-257,t=Tn(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Oc||J(e,t,n,!1),r=0!==(n&e.childLanes),Oc||r){if(null!==(s=sd)&&0!==(o=C(s,n))&&o!==i.retryLane)throw i.retryLane=o,Me(e,o),rs(s,0,o),Ic;xs(),t=Tn(e,t,n)}else e=i.treeContext,qr&&(Tl=Yi(o),Rl=t,Ml=!0,Dl=null,Ll=!1,null!==e&&I(t,e)),(t=Rn(t,s)).flags|=4096;return t}return(e=Us(e.child,{mode:s.mode,children:s.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return En(e,t,n,t.pendingProps);case 24:return te(t),s=ne(Vl),null===e?(null===(r=xe())&&(r=sd,i=re(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:s,cache:r},Fe(t),Q(0,Vl,r)):(0!==(e.lanes&n)&&(Ie(e,t),Ve(t,null,null,n),Ue()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Q(0,Vl,s)):(s=i.cache,Q(0,Vl,s),s!==r.cache&&Z(t,[Vl],n,!0))),Cn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Yn(e){e.flags|=4}function Xn(e){Vr&&(e.flags|=8)}function Zn(e,t){if(null!==e&&e.child===t.child)return!1;if(16&t.flags)return!0;for(e=t.child;null!==e;){if(8218&e.flags||8218&e.subtreeFlags)return!0;e=e.sibling}return!1}function Jn(e,t,n,a){if(Ur)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)Dr(e,n.stateNode);else if(!(4===n.tag||zo&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(Vr)for(var s=t.child;null!==s;){if(5===s.tag){var r=s.stateNode;n&&a&&(r=Oi(r,s.type,s.memoizedProps)),Dr(e,r)}else if(6===s.tag)r=s.stateNode,n&&a&&(r=zi(r,s.memoizedProps)),Dr(e,r);else if(4!==s.tag)if(22===s.tag&&null!==s.memoizedState)null!==(r=s.child)&&(r.return=s),Jn(e,s,!0,!0);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}}function ea(e,t,n,a){var s=!1;if(Vr)for(var r=t.child;null!==r;){if(5===r.tag){var i=r.stateNode;n&&a&&(i=Oi(i,r.type,r.memoizedProps)),Li(e,i)}else if(6===r.tag)i=r.stateNode,n&&a&&(i=zi(i,r.memoizedProps)),Li(e,i);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),ea(e,r,!0,!0),s=!0;else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return s;r=r.return}r.sibling.return=r.return,r=r.sibling}return s}function ta(e,t){if(Vr&&Zn(e,t)){var n=(e=t.stateNode).containerInfo,a=Di();ea(a,t,!1,!1),e.pendingChildren=a,Yn(t),Fi(n,a)}}function na(e,t,n,a){if(Ur)e.memoizedProps!==a&&Yn(t);else if(Vr){var s=e.stateNode,r=e.memoizedProps;if((e=Zn(e,t))||r!==a){var i=_l.current;(r=Mi(s,n,r,a,!e,null))===s?t.stateNode=s:(Xn(t),Lr(r,n,a,i)&&Yn(t),t.stateNode=r,e&&Jn(r,t,!1,!1))}else t.stateNode=s}}function aa(e,t,n,a,s){if(32&e.mode&&(null===n?Zr(t,a):Jr(t,n,a))){if(e.flags|=16777216,(335544128&s)===s||ei(t,a))if(ti(e.stateNode,t,a))e.flags|=8192;else{if(!ps())throw ic=rc,ac;e.flags|=8192}}else e.flags&=-16777217}function sa(e,t){if(Fo(t)){if(e.flags|=16777216,!Io(t)){if(!ps())throw ic=rc,ac;e.flags|=8192}}else e.flags&=-16777217}function ra(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?y():536870912,e.lanes|=t,vd|=t)}function ia(e,t){if(!Ml)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function oa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=65011712&s.subtreeFlags,a|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function la(e,t,n){var s=t.pendingProps;switch(F(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return oa(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Y(Vl),z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(H(t)?Yn(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,K())),ta(e,t),oa(t),null;case 26:if(ko){var r=t.type,i=t.memoizedState;return null===e?(Yn(t),null!==i?(oa(t),sa(t,i)):(oa(t),aa(t,r,null,s,n))):i?i!==e.memoizedState?(Yn(t),oa(t),sa(t,i)):(oa(t),t.flags&=-16777217):(i=e.memoizedProps,Ur?i!==s&&Yn(t):na(e,t,r,s),oa(t),aa(t,r,i,s,n)),null}case 27:if(zo){if($(t),n=Pl.current,r=t.type,null!==e&&null!=t.stateNode)Ur?e.memoizedProps!==s&&Yn(t):na(e,t,r,s);else{if(!s){if(null===t.stateNode)throw Error(a(166));return oa(t),null}e=_l.current,H(t)?V(t,e):(e=Bo(r,s,n,e,!0),t.stateNode=e,Yn(t))}return oa(t),null}case 5:if($(t),r=t.type,null!==e&&null!=t.stateNode)na(e,t,r,s);else{if(!s){if(null===t.stateNode)throw Error(a(166));return oa(t),null}if(i=_l.current,H(t))V(t,i),po(t.stateNode,r,s,i)&&(t.flags|=64);else{var o=Mr(r,s,Pl.current,i,t);Xn(t),Jn(o,t,!1,!1),t.stateNode=o,Lr(o,r,s,i)&&Yn(t)}}return oa(t),aa(t,t.type,null===e?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Ur?n!==s&&Yn(t):Vr&&(n!==s?(e=Pl.current,n=_l.current,Xn(t),t.stateNode=Ir(s,e,n,t)):t.stateNode=e.stateNode);else{if("string"!=typeof s&&null===t.stateNode)throw Error(a(166));if(e=Pl.current,n=_l.current,H(t)){if(!qr)throw Error(a(176));if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(r=Rl))switch(r.tag){case 27:case 5:s=r.memoizedProps}so(e,n,t,s)||U(t,!0)}else Xn(t),t.stateNode=Ir(s,e,n,t)}return oa(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(s=H(t),null!==n){if(null===e){if(!s)throw Error(a(318));if(!qr)throw Error(a(556));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));ro(e,t)}else G(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;oa(t),e=!1}else n=K(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Je(t),t):(Je(t),null);if(128&t.flags)throw Error(a(558))}return oa(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=H(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(a(318));if(!qr)throw Error(a(344));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));io(r,t)}else G(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;oa(t),r=!1}else r=K(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Je(t),t):(Je(t),null)}return Je(t),128&t.flags?(t.lanes=n,t):(n=null!==s,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(r=s.alternate.memoizedState.cachePool.pool),i=null,null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ra(t,t.updateQueue),oa(t),null);case 4:return z(),ta(e,t),null===e&&Gr(t.stateNode.containerInfo),oa(t),null;case 10:return Y(t.type),oa(t),null;case 19:if(h(bc),null===(s=t.memoizedState))return oa(t),null;if(r=!!(128&t.flags),null===(i=s.rendering))if(r)ia(s,!1);else{if(0!==md||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=et(e))){for(t.flags|=128,ia(s,!1),e=i.updateQueue,t.updateQueue=e,ra(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vs(n,e),n=n.sibling;return p(bc,1&bc.current|2),Ml&&M(t,s.treeForkCount),t.child}e=e.sibling}null!==s.tail&&sl()>Cd&&(t.flags|=128,r=!0,ia(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=et(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ra(t,e),ia(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!Ml)return oa(t),null}else 2*sl()-s.renderingStartTime>Cd&&536870912!==n&&(t.flags|=128,r=!0,ia(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=sl(),e.sibling=null,n=bc.current,p(bc,r?1&n|2:1&n),Ml&&M(t,s.treeForkCount),e):(oa(t),null);case 22:case 23:return Je(t),We(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?!!(536870912&n)&&!(128&t.flags)&&(oa(t),6&t.subtreeFlags&&(t.flags|=8192)):oa(t),null!==(n=t.updateQueue)&&ra(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&h(tc),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Y(Vl),oa(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function ca(e,t){switch(F(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Y(Vl),z(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Je(t),null===t.alternate)throw Error(a(340));G()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Je(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));G()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return h(bc),null;case 4:return z(),null;case 10:return Y(t.type),null;case 22:case 23:return Je(t),We(),null!==e&&h(tc),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Y(Vl),null;default:return null}}function da(e,t){switch(F(t),t.tag){case 3:Y(Vl),z();break;case 26:case 27:case 5:$(t);break;case 4:z();break;case 31:null!==t.memoizedState&&Je(t);break;case 13:Je(t);break;case 19:h(bc);break;case 10:Y(t.type);break;case 22:case 23:Je(t),We(),null!==e&&h(tc);break;case 24:Y(Vl)}}function ua(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){a=void 0;var r=n.create,i=n.inst;a=r(),i.destroy=a}n=n.next}while(n!==s)}}catch(o){Ds(t,t.return,o)}}function ha(e,t,n){try{var a=t.updateQueue,s=null!==a?a.lastEffect:null;if(null!==s){var r=s.next;a=r;do{if((a.tag&e)===e){var i=a.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(d){Ds(s,l,d)}}}a=a.next}while(a!==r)}}catch(d){Ds(t,t.return,d)}}function ma(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{He(t,n)}catch(a){Ds(e,e.return,a)}}}function pa(e,t,n){n.props=vn(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Ds(e,t,a)}}function fa(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=Er(e.stateNode);break;default:a=e.stateNode}"function"==typeof n?e.refCleanup=n(a):n.current=a}}catch(s){Ds(e,t,s)}}function ga(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"==typeof a)try{a()}catch(s){Ds(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(r){Ds(e,t,r)}else n.current=null}function xa(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{wi(a,t,n,e)}catch(s){Ds(e,e.return,s)}}function va(e,t,n){try{Si(e.stateNode,e.type,n,t,e)}catch(a){Ds(e,e.return,a)}}function ya(e){return 5===e.tag||3===e.tag||!!ko&&26===e.tag||!!zo&&27===e.tag&&qo(e.type)||4===e.tag}function ba(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ya(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(zo&&27===e.tag&&qo(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function wa(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?Ci(n,e,t):yi(n,e);else if(4!==a&&(zo&&27===a&&qo(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function Sa(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?ji(n,e,t):vi(n,e);else if(4!==a&&(zo&&27===a&&qo(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function ja(e,t,n){e=e.containerInfo;try{Ii(e,n)}catch(a){Ds(t,t.return,a)}}function Ca(e){var t=e.stateNode,n=e.memoizedProps;try{$o(e.type,n,t,e)}catch(a){Ds(e,e.return,a)}}function ka(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Fa(e,n),4&a&&ua(5,n);break;case 1:if(Fa(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){Ds(n,n.return,i)}else{var s=vn(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Ds(n,n.return,o)}}64&a&&ma(n),512&a&&fa(n,n.return);break;case 3:if(Fa(e,n),64&a&&null!==(a=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=Er(n.child.stateNode);break;case 1:e=n.child.stateNode}try{He(a,e)}catch(i){Ds(n,n.return,i)}}break;case 27:zo&&null===t&&4&a&&Ca(n);case 26:case 5:if(Fa(e,n),null===t)if(4&a)xa(n);else if(64&a){e=n.type,t=n.memoizedProps,s=n.stateNode;try{co(s,e,t,n)}catch(i){Ds(n,n.return,i)}}512&a&&fa(n,n.return);break;case 12:Fa(e,n);break;case 31:Fa(e,n),4&a&&Pa(e,n);break;case 13:Fa(e,n),4&a&&Aa(e,n),64&a&&null!==(a=n.memoizedState)&&null!==(a=a.dehydrated)&&(n=Os.bind(null,n),Vi(a,n));break;case 22:if(!(a=null!==n.memoizedState||Bc)){t=null!==t&&null!==t.memoizedState||$c,s=Bc;var r=$c;Bc=a,($c=t)&&!r?Oa(e,n,!!(8772&n.subtreeFlags)):Fa(e,n),Bc=s,$c=r}break;case 30:break;default:Fa(e,n)}}function Na(e){var t=e.alternate;null!==t&&(e.alternate=null,Na(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Xr(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _a(e,t,n){for(n=n.child;null!==n;)Ea(e,t,n),n=n.sibling}function Ea(e,t,n){if(hl&&"function"==typeof hl.onCommitFiberUnmount)try{hl.onCommitFiberUnmount(ul,n)}catch(GQ){}switch(n.tag){case 26:if(ko){$c||ga(n,t),_a(e,t,n),n.memoizedState?Ao(n.memoizedState):n.stateNode&&Mo(n.stateNode);break}case 27:if(zo){$c||ga(n,t);var a=Hc,s=Gc;qo(n.type)&&(Hc=n.stateNode,Gc=!1),_a(e,t,n),Uo(n.stateNode),Hc=a,Gc=s;break}case 5:$c||ga(n,t);case 6:if(Ur){if(a=Hc,s=Gc,Hc=null,_a(e,t,n),Gc=s,null!==(Hc=a))if(Gc)try{Ni(Hc,n.stateNode)}catch(r){Ds(n,t,r)}else try{ki(Hc,n.stateNode)}catch(r){Ds(n,t,r)}}else _a(e,t,n);break;case 18:Ur&&null!==Hc&&(Gc?xo(Hc,n.stateNode):go(Hc,n.stateNode));break;case 4:Ur?(a=Hc,s=Gc,Hc=n.stateNode.containerInfo,Gc=!0,_a(e,t,n),Hc=a,Gc=s):(Vr&&ja(n.stateNode,n,Di()),_a(e,t,n));break;case 0:case 11:case 14:case 15:ha(2,n,t),$c||ha(4,n,t),_a(e,t,n);break;case 1:$c||(ga(n,t),"function"==typeof(a=n.stateNode).componentWillUnmount&&pa(n,t,a)),_a(e,t,n);break;case 21:_a(e,t,n);break;case 22:$c=(a=$c)||null!==n.memoizedState,_a(e,t,n),$c=a;break;default:_a(e,t,n)}}function Pa(e,t){if(qr&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{ho(e)}catch(n){Ds(t,t.return,n)}}}function Aa(e,t){if(qr&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{mo(e)}catch(n){Ds(t,t.return,n)}}function Ra(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Vc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Vc),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var a=zs.bind(null,e,t);t.then(a,a)}})}function Ta(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s],i=e,o=t;if(Ur){var l=o;e:for(;null!==l;){switch(l.tag){case 27:if(zo){if(qo(l.type)){Hc=l.stateNode,Gc=!1;break e}break}case 5:Hc=l.stateNode,Gc=!1;break e;case 3:case 4:Hc=l.stateNode.containerInfo,Gc=!0;break e}l=l.return}if(null===Hc)throw Error(a(160));Ea(i,o,r),Hc=null,Gc=!1}else Ea(i,o,r);null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ma(t,e),t=t.sibling}function Ma(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ta(t,e),Da(e),4&s&&(ha(3,e,e.return),ua(3,e),ha(5,e,e.return));break;case 1:Ta(t,e),Da(e),512&s&&($c||null===n||ga(n,n.return)),64&s&&Bc&&null!==(e=e.updateQueue)&&null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s));break;case 26:if(ko){var r=Kc;if(Ta(t,e),Da(e),512&s&&($c||null===n||ga(n,n.return)),4&s){s=null!==n?n.memoizedState:null;var i=e.memoizedState;null===n?null===i?null===e.stateNode?e.stateNode=Ro(r,e.type,e.memoizedProps,e):To(r,e.type,e.stateNode):e.stateNode=Po(r,i,e.memoizedProps):s!==i?(null===s?null!==n.stateNode&&Mo(n.stateNode):Ao(s),null===i?To(r,e.type,e.stateNode):Po(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&va(e,e.memoizedProps,n.memoizedProps)}break}case 27:if(zo){Ta(t,e),Da(e),512&s&&($c||null===n||ga(n,n.return)),null!==n&&4&s&&va(e,e.memoizedProps,n.memoizedProps);break}case 5:if(Ta(t,e),Da(e),512&s&&($c||null===n||ga(n,n.return)),Ur){if(32&e.flags){r=e.stateNode;try{_i(r)}catch(h){Ds(e,e.return,h)}}4&s&&null!=e.stateNode&&va(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&s&&(Uc=!0)}else Vr&&null!==e.alternate&&(e.alternate.stateNode=e.stateNode);break;case 6:if(Ta(t,e),Da(e),4&s&&Ur){if(null===e.stateNode)throw Error(a(162));s=e.memoizedProps,n=null!==n?n.memoizedProps:s,r=e.stateNode;try{bi(r,n,s)}catch(h){Ds(e,e.return,h)}}break;case 3:if(ko?(Lo(),r=Kc,Kc=_o(t.containerInfo),Ta(t,e),Kc=r):Ta(t,e),Da(e),4&s){if(Ur&&qr&&null!==n&&n.memoizedState.isDehydrated)try{uo(t.containerInfo)}catch(h){Ds(e,e.return,h)}if(Vr){s=t.containerInfo,n=t.pendingChildren;try{Ii(s,n)}catch(h){Ds(e,e.return,h)}}}Uc&&(Uc=!1,La(e));break;case 4:ko?(n=Kc,Kc=_o(e.stateNode.containerInfo),Ta(t,e),Da(e),Kc=n):(Ta(t,e),Da(e)),4&s&&Vr&&ja(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:Ta(t,e),Da(e);break;case 31:Ta(t,e),Da(e),4&s&&null!==(s=e.updateQueue)&&(e.updateQueue=null,Ra(e,s));break;case 13:Ta(t,e),Da(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Sd=sl()),4&s&&null!==(s=e.updateQueue)&&(e.updateQueue=null,Ra(e,s));break;case 22:r=null!==e.memoizedState;var o=null!==n&&null!==n.memoizedState,l=Bc,c=$c;if(Bc=l||r,$c=c||o,Ta(t,e),$c=c,Bc=l,Da(e),8192&s&&((t=e.stateNode)._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||o||Bc||$c||Ia(e)),Ur))e:if(n=null,Ur)for(t=e;;){if(5===t.tag||ko&&26===t.tag){if(null===n){o=n=t;try{i=o.stateNode,r?Ei(i):Ai(o.stateNode,o.memoizedProps)}catch(h){Ds(o,o.return,h)}}}else if(6===t.tag){if(null===n){o=t;try{var d=o.stateNode;r?Pi(d):Ri(d,o.memoizedProps)}catch(h){Ds(o,o.return,h)}}}else if(18===t.tag){if(null===n){o=t;try{var u=o.stateNode;r?vo(u):yo(o.stateNode)}catch(h){Ds(o,o.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&null!==(s=e.updateQueue)&&null!==(n=s.retryQueue)&&(s.retryQueue=null,Ra(e,n));break;case 19:Ta(t,e),Da(e),4&s&&null!==(s=e.updateQueue)&&(e.updateQueue=null,Ra(e,s));break;case 30:case 21:break;default:Ta(t,e),Da(e)}}function Da(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(ya(s)){n=s;break}s=s.return}if(Ur){if(null==n)throw Error(a(160));switch(n.tag){case 27:if(zo){var r=n.stateNode;Sa(e,ba(e),r);break}case 5:var i=n.stateNode;32&n.flags&&(_i(i),n.flags&=-33),Sa(e,ba(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;wa(e,ba(e),o);break;default:throw Error(a(161))}}}catch(l){Ds(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function La(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;La(t),5===t.tag&&1024&t.flags&&oi(t.stateNode),e=e.sibling}}function Fa(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)ka(e,t.alternate,t),t=t.sibling}function Ia(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ha(4,t,t.return),Ia(t);break;case 1:ga(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&pa(t,t.return,n),Ia(t);break;case 27:zo&&Uo(t.stateNode);case 26:case 5:ga(t,t.return),Ia(t);break;case 22:null===t.memoizedState&&Ia(t);break;default:Ia(t)}e=e.sibling}}function Oa(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,s=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:Oa(s,r,n),ua(4,r);break;case 1:if(Oa(s,r,n),"function"==typeof(s=(a=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Ds(a,a.return,c)}if(null!==(s=(a=r).updateQueue)){var o=a.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)qe(l[s],o)}catch(c){Ds(a,a.return,c)}}n&&64&i&&ma(r),fa(r,r.return);break;case 27:zo&&Ca(r);case 26:case 5:Oa(s,r,n),n&&null===a&&4&i&&xa(r),fa(r,r.return);break;case 12:Oa(s,r,n);break;case 31:Oa(s,r,n),n&&4&i&&Pa(s,r);break;case 13:Oa(s,r,n),n&&4&i&&Aa(s,r);break;case 22:null===r.memoizedState&&Oa(s,r,n),fa(r,r.return);break;case 30:break;default:Oa(s,r,n)}t=t.sibling}}function za(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ie(n))}function Ba(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ie(e))}function $a(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ua(e,t,n,a),t=t.sibling}function Ua(e,t,n,a){var s=t.flags;switch(t.tag){case 0:case 11:case 15:$a(e,t,n,a),2048&s&&ua(9,t);break;case 1:case 31:case 13:default:$a(e,t,n,a);break;case 3:$a(e,t,n,a),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ie(e)));break;case 12:if(2048&s){$a(e,t,n,a),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,o=r.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Ds(t,t.return,l)}}else $a(e,t,n,a);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,null!==t.memoizedState?2&r._visibility?$a(e,t,n,a):qa(e,t):2&r._visibility?$a(e,t,n,a):(r._visibility|=2,Va(e,t,n,a,!!(10256&t.subtreeFlags)||!1)),2048&s&&za(i,t);break;case 24:$a(e,t,n,a),2048&s&&Ba(t.alternate,t)}}function Va(e,t,n,a,s){for(s=s&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var r=e,i=t,o=n,l=a,c=i.flags;switch(i.tag){case 0:case 11:case 15:Va(r,i,o,l,s),ua(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?Va(r,i,o,l,s):qa(r,i):(d._visibility|=2,Va(r,i,o,l,s)),s&&2048&c&&za(i.alternate,i);break;case 24:Va(r,i,o,l,s),s&&2048&c&&Ba(i.alternate,i);break;default:Va(r,i,o,l,s)}t=t.sibling}}function qa(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,s=a.flags;switch(a.tag){case 22:qa(n,a),2048&s&&za(a.alternate,a);break;case 24:qa(n,a),2048&s&&Ba(a.alternate,a);break;default:qa(n,a)}t=t.sibling}}function Ha(e,t,n){if(e.subtreeFlags&Wc)for(e=e.child;null!==e;)Ga(e,t,n),e=e.sibling}function Ga(e,t,n){switch(e.tag){case 26:if(Ha(e,t,n),e.flags&Wc)if(null!==e.memoizedState)Oo(n,Kc,e.memoizedState,e.memoizedProps);else{var a=e.stateNode,s=e.type;e=e.memoizedProps,((335544128&t)===t||ei(s,e))&&ai(n,a,s,e)}break;case 5:Ha(e,t,n),e.flags&Wc&&(a=e.stateNode,s=e.type,e=e.memoizedProps,((335544128&t)===t||ei(s,e))&&ai(n,a,s,e));break;case 3:case 4:ko?(a=Kc,Kc=_o(e.stateNode.containerInfo),Ha(e,t,n),Kc=a):Ha(e,t,n);break;case 22:null===e.memoizedState&&(null!==(a=e.alternate)&&null!==a.memoizedState?(a=Wc,Wc=16777216,Ha(e,t,n),Wc=a):Ha(e,t,n));break;default:Ha(e,t,n)}}function Ka(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Wa(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];qc=a,Xa(a,e)}Ka(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Qa(e),e=e.sibling}function Qa(e){switch(e.tag){case 0:case 11:case 15:Wa(e),2048&e.flags&&ha(9,e,e.return);break;case 3:case 12:default:Wa(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ya(e)):Wa(e)}}function Ya(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];qc=a,Xa(a,e)}Ka(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ha(8,t,t.return),Ya(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Ya(t));break;default:Ya(t)}e=e.sibling}}function Xa(e,t){for(;null!==qc;){var n=qc;switch(n.tag){case 0:case 11:case 15:ha(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:ie(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,qc=a;else e:for(n=e;null!==qc;){var s=(a=qc).sibling,r=a.return;if(Na(a),a===n){qc=null;break e}if(null!==s){s.return=r,qc=s;break e}qc=r}}}function Za(e){var t=Hr(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=ui(e)))throw Error(a(362));return e.stateNode.current}function Ja(e,t){var n=e.tag;switch(t.$$typeof){case Yc:if(e.type===t.value)return!0;break;case Xc:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var s=e[n++],r=s.tag,i=e[n++],o=t[i];if(5!==r&&26!==r&&27!==r||!pi(s)){for(;null!=o&&Ja(s,o);)o=t[++i];if(i===t.length){t=!0;break e}for(s=s.child;null!==s;)e.push(s,i),s=s.sibling}}t=!1}return t;case Zc:if((5===n||26===n||27===n)&&fi(e.stateNode,t.value))return!0;break;case ed:if((5===n||6===n||26===n||27===n)&&null!==(e=mi(e))&&0<=e.indexOf(t.value))return!0;break;case Jc:if((5===n||26===n||27===n)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(a(365))}return!1}function es(e){switch(e.$$typeof){case Yc:return"<"+(d(e.value)||"Unknown")+">";case Xc:return":has("+(es(e)||"")+")";case Zc:return'[role="'+e.value+'"]';case ed:return'"'+e.value+'"';case Jc:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function ts(e,t){var n=[];e=[e,0];for(var a=0;a<e.length;){var s=e[a++],r=s.tag,i=e[a++],o=t[i];if(5!==r&&26!==r&&27!==r||!pi(s)){for(;null!=o&&Ja(s,o);)o=t[++i];if(i===t.length)n.push(s);else for(s=s.child;null!==s;)e.push(s,i),s=s.sibling}}return n}function ns(e,t){if(!di)throw Error(a(363));e=ts(e=Za(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var s=e[n++],r=s.tag;if(5===r||26===r||27===r)pi(s)||t.push(s.stateNode);else for(s=s.child;null!==s;)e.push(s),s=s.sibling}return t}function as(){return 2&ad&&0!==id?id&-id:null!==Cr.T?fe():Qr()}function ss(){if(0===xd)if(536870912&id&&!Ml)xd=536870912;else{var e=Zo;!(3932160&(Zo<<=1))&&(Zo=262144),xd=e}return null!==(e=vc.current)&&(e.flags|=32),xd}function rs(e,t,n){(e!==sd||2!==od&&9!==od)&&null===e.cancelPendingCommit||(hs(e,0),cs(e,id,xd,!1)),w(e,n),2&ad&&e===sd||(e===sd&&(!(2&ad)&&(fd|=n),4===md&&cs(e,id,xd,!1)),le(e))}function is(e,t,n){if(6&ad)throw Error(a(327));for(var s=!n&&!(127&t)&&0===(t&e.expiredLanes)||x(e,t),r=s?function(e,t){var n=ad;ad|=2;var s=fs(),r=gs();sd!==e||id!==t?(kd=null,Cd=sl()+500,hs(e,t)):dd=x(e,t);e:for(;;)try{if(0!==od&&null!==rd){t=rd;var i=ld;t:switch(od){case 1:od=0,ld=null,js(e,t,i,1);break;case 2:case 9:if(we(i)){od=0,ld=null,Ss(t);break}t=function(){2!==od&&9!==od||sd!==e||(od=7),le(e)},i.then(t,t);break e;case 3:od=7;break e;case 4:od=5;break e;case 7:we(i)?(od=0,ld=null,Ss(t)):(od=0,ld=null,js(e,t,i,7));break;case 5:var o=null;switch(rd.tag){case 26:o=rd.memoizedState;case 5:case 27:var l=rd,c=l.type,d=l.pendingProps;if(o?Io(o):ti(l.stateNode,c,d)){od=0,ld=null;var u=l.sibling;if(null!==u)rd=u;else{var h=l.return;null!==h?(rd=h,Cs(h)):rd=null}break t}}od=0,ld=null,js(e,t,i,5);break;case 6:od=0,ld=null,js(e,t,i,6);break;case 8:us(),md=6;break e;default:throw Error(a(462))}}bs();break}catch(m){ms(e,m)}return zl=Ol=null,Cr.H=s,Cr.A=r,ad=n,null!==rd?0:(sd=null,id=0,Ae(),md)}(e,t):vs(e,t,!0),i=s;;){if(0===r){dd&&!s&&cs(e,t,0,!1);break}if(n=e.current.alternate,!i||ls(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!=(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=yd;var c=qr&&l.current.memoizedState.isDehydrated;if(c&&(hs(l,o).flags|=256),2!==(o=vs(l,o,!1))){if(ud&&!c){l.errorRecoveryDisabledLanes|=i,fd|=i,r=4;break e}i=bd,bd=r,null!==i&&(null===bd?bd=i:bd.push.apply(bd,i))}r=o}if(i=!1,2!==r)continue}}if(1===r){hs(e,0),cs(e,t,0,!0);break}e:{switch(s=e,i=r){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:cs(s,t,xd,!cd);break e;case 2:bd=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(r=Sd+300-sl())){if(cs(s,t,xd,!cd),0!==g(s,0,!0))break e;Ad=t,s.timeoutHandle=Or(os.bind(null,s,n,bd,kd,wd,t,xd,fd,vd,cd,i,"Throttled",-0,0),r)}else os(s,n,bd,kd,wd,t,xd,fd,vd,cd,i,null,-0,0)}break}r=vs(e,t,!1),i=!1}le(e)}function os(e,t,n,a,s,r,i,o,l,c,d,u,h,m){if(e.timeoutHandle=Br,8192&(u=t.subtreeFlags)||!(16785408&~u)){Ga(t,r,u=ni());var p=(62914560&r)===r?Sd-sl():(4194048&r)===r?jd-sl():0;if(null!==(p=si(u,p)))return Ad=r,e.cancelPendingCommit=p(Ns.bind(null,e,t,r,n,a,s,i,o,l,d,u,null,h,m)),void cs(e,r,i,!c)}Ns(e,t,r,n,a,s,i,o,l)}function ls(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!ml(r(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cs(e,t,n,a){t&=~gd,t&=~fd,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var s=t;0<s;){var r=31-Wo(s),i=1<<r;a[r]=-1,s&=~i}0!==n&&S(e,n,t)}function ds(){return!!(6&ad)||(ce(0),!1)}function us(){if(null!==rd){if(0===od)var e=rd.return;else zl=Ol=null,ct(e=rd),oc=null,lc=0,e=rd;for(;null!==e;)da(e.alternate,e),e=e.return;rd=null}}function hs(e,t){var n=e.timeoutHandle;n!==Br&&(e.timeoutHandle=Br,zr(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Ad=0,us(),sd=e,rd=n=Us(e.current,null),id=t,od=0,ld=null,cd=!1,dd=x(e,t),ud=!1,vd=xd=gd=fd=pd=md=0,bd=yd=null,wd=!1,8&t&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var s=31-Wo(a),r=1<<s;t|=e[s],a&=~r}return hd=t,Ae(),n}function ms(e,t){Sc=null,Cr.H=Tc,t===nc||t===sc?(t=Ce(),od=3):t===ac?(t=Ce(),od=4):od=t===Ic?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ld=t,null===rd&&(md=1,yn(e,T(t,e.current)))}function ps(){var e=vc.current;return null===e||((4194048&id)===id?null===yc:!!((62914560&id)===id||536870912&id)&&e===yc)}function fs(){var e=Cr.H;return Cr.H=Tc,null===e?Tc:e}function gs(){var e=Cr.A;return Cr.A=Qc,e}function xs(){md=4,cd||(4194048&id)!==id&&null!==vc.current||(dd=!0),!(134217727&pd)&&!(134217727&fd)||null===sd||cs(sd,id,xd,!1)}function vs(e,t,n){var a=ad;ad|=2;var s=fs(),r=gs();sd===e&&id===t||(kd=null,hs(e,t)),t=!1;var i=md;e:for(;;)try{if(0!==od&&null!==rd){var o=rd,l=ld;switch(od){case 8:us(),i=6;break e;case 3:case 2:case 9:case 6:null===vc.current&&(t=!0);var c=od;if(od=0,ld=null,js(e,o,l,c),n&&dd){i=0;break e}break;default:c=od,od=0,ld=null,js(e,o,l,c)}}ys(),i=md;break}catch(d){ms(e,d)}return t&&e.shellSuspendCounter++,zl=Ol=null,ad=a,Cr.H=s,Cr.A=r,null===rd&&(sd=null,id=0,Ae()),i}function ys(){for(;null!==rd;)ws(rd)}function bs(){for(;null!==rd&&!nl();)ws(rd)}function ws(e){var t=Qn(e.alternate,e,hd);e.memoizedProps=e.pendingProps,null===t?Cs(e):rd=t}function Ss(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ln(n,t,t.pendingProps,t.type,void 0,id);break;case 11:t=Ln(n,t,t.pendingProps,t.type.render,t.ref,id);break;case 5:ct(t);default:da(n,t),t=Qn(n,t=rd=Vs(t,hd),hd)}e.memoizedProps=e.pendingProps,null===t?Cs(e):rd=t}function js(e,t,n,s){zl=Ol=null,ct(t),oc=null,lc=0;var r=t.return;try{if(function(e,t,n,s,r){if(n.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){if(null!==(t=n.alternate)&&J(t,n,r,!0),null!==(n=vc.current)){switch(n.tag){case 31:case 13:return null===yc?xs():null===n.alternate&&0===md&&(md=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===rc?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),Ls(e,s,r)),!1;case 22:return n.flags|=65536,s===rc?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),Ls(e,s,r)),!1}throw Error(a(435,n.tag))}return Ls(e,s,r),xs(),!1}if(Ml)return null!==(t=vc.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==Fl&&W(T(e=Error(a(422),{cause:s}),n))):(s!==Fl&&W(T(t=Error(a(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,s=T(s,n),$e(e,r=wn(e.stateNode,s,r)),4!==md&&(md=2)),!1;var i=Error(a(520),{cause:s});if(i=T(i,n),null===yd?yd=[i]:yd.push(i),4!==md&&(md=2),null===t)return!0;s=T(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,$e(n,e=wn(n.stateNode,s,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Nd&&Nd.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,jn(r=Sn(r),e,n,s),$e(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,id))return md=1,yn(e,T(n,e.current)),void(rd=null)}catch(i){if(null!==r)throw rd=r,i;return md=1,yn(e,T(n,e.current)),void(rd=null)}32768&t.flags?(Ml||1===s?e=!0:dd||536870912&id?e=!1:(cd=e=!0,(2===s||9===s||3===s||6===s)&&null!==(s=vc.current)&&13===s.tag&&(s.flags|=16384)),ks(t,e)):Cs(t)}function Cs(e){var t=e;do{if(32768&t.flags)return void ks(t,cd);e=t.return;var n=la(t.alternate,t,hd);if(null!==n)return void(rd=n);if(null!==(t=t.sibling))return void(rd=t);rd=t=e}while(null!==t);0===md&&(md=5)}function ks(e,t){do{var n=ca(e.alternate,e);if(null!==n)return n.flags&=32767,void(rd=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(rd=e);rd=e=n}while(null!==e);md=6,rd=null}function Ns(e,t,n,s,r,i,o,l,c){e.cancelPendingCommit=null;do{Rs()}while(0!==_d);if(6&ad)throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,a,s,r){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-Wo(n),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==a&&S(e,a,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(i&~t))}(e,n,i|=mc,o,l,c),e===sd&&(rd=sd=null,id=0),Pd=t,Ed=e,Ad=n,Rd=i,Td=r,Md=s,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,el(ol,function(){return Ts(),null})):(e.callbackNode=null,e.callbackPriority=0),s=!!(13878&t.flags),13878&t.subtreeFlags||s){s=Cr.T,Cr.T=null,r=Wr(),Kr(2),o=ad,ad|=4;try{!function(e,t){for(Rr(e.containerInfo),qc=t;null!==qc;)if(t=(e=qc).child,1028&e.subtreeFlags&&null!==t)t.return=e,qc=t;else for(;null!==qc;){var n=(e=qc).alternate;switch(t=e.flags,e.tag){case 0:if(4&t&&null!==(t=null!==(t=e.updateQueue)?t.events:null))for(var s=0;s<t.length;s++){var r=t[s];r.ref.impl=r.nextImpl}break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&t&&null!==n){t=void 0,s=e,r=n.memoizedProps,n=n.memoizedState;var i=s.stateNode;try{var o=vn(s.type,r);t=i.getSnapshotBeforeUpdate(o,n),i.__reactInternalSnapshotBeforeUpdate=t}catch(l){Ds(s,s.return,l)}}break;case 3:1024&t&&Ur&&Ti(e.stateNode.containerInfo);break;default:if(1024&t)throw Error(a(163))}if(null!==(t=e.sibling)){t.return=e.return,qc=t;break}qc=e.return}}(e,t)}finally{ad=o,Kr(r),Cr.T=s}}_d=1,_s(),Es(),Ps()}}function _s(){if(1===_d){_d=0;var e=Ed,t=Pd,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=Cr.T,Cr.T=null;var a=Wr();Kr(2);var s=ad;ad|=4;try{Ma(t,e),Tr(e.containerInfo)}finally{ad=s,Kr(a),Cr.T=n}}e.current=t,_d=2}}function Es(){if(2===_d){_d=0;var e=Ed,t=Pd,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=Cr.T,Cr.T=null;var a=Wr();Kr(2);var s=ad;ad|=4;try{ka(e,t.alternate,t)}finally{ad=s,Kr(a),Cr.T=n}}_d=3}}function Ps(){if(4===_d||3===_d){_d=0,al();var e=Ed,t=Pd,n=Ad,a=Md;10256&t.subtreeFlags||10256&t.flags?_d=5:(_d=0,Pd=Ed=null,As(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Nd=null),N(n),t=t.stateNode,hl&&"function"==typeof hl.onCommitFiberRoot)try{hl.onCommitFiberRoot(ul,t,void 0,!(128&~t.current.flags))}catch(GQ){}if(null!==a){t=Cr.T,s=Wr(),Kr(2),Cr.T=null;try{for(var r=e.onRecoverableError,i=0;i<a.length;i++){var o=a[i];r(o.value,{componentStack:o.stack})}}finally{Cr.T=t,Kr(s)}}3&Ad&&Rs(),le(e),s=e.pendingLanes,261930&n&&42&s?e===Ld?Dd++:(Dd=0,Ld=e):Dd=0,qr&&fo(),ce(0)}}function As(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,ie(t))}function Rs(){return _s(),Es(),Ps(),Ts()}function Ts(){if(5!==_d)return!1;var e=Ed,t=Rd;Rd=0;var n=N(Ad),s=32>n?32:n;n=Cr.T;var r=Wr();try{Kr(s),Cr.T=null,s=Td,Td=null;var i=Ed,o=Ad;if(_d=0,Pd=Ed=null,Ad=0,6&ad)throw Error(a(331));var l=ad;if(ad|=4,Qa(i.current),Ua(i,i.current,o,s),ad=l,ce(0),hl&&"function"==typeof hl.onPostCommitFiberRoot)try{hl.onPostCommitFiberRoot(ul,i)}catch(GQ){}return!0}finally{Kr(r),Cr.T=n,As(e,t)}}function Ms(e,t,n){t=T(n,t),null!==(e=ze(e,t=wn(e.stateNode,t,2),2))&&(w(e,2),le(e))}function Ds(e,t,n){if(3===e.tag)Ms(e,e,n);else for(;null!==t;){if(3===t.tag){Ms(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof a.componentDidCatch&&(null===Nd||!Nd.has(a))){e=T(n,e),null!==(a=ze(t,n=Sn(2),2))&&(jn(n,a,t,e),w(a,2),le(a));break}}t=t.return}}function Ls(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new nd;var s=new Set;a.set(t,s)}else void 0===(s=a.get(t))&&(s=new Set,a.set(t,s));s.has(n)||(ud=!0,s.add(n),e=Fs.bind(null,e,t,n),t.then(e,e))}function Fs(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sd===e&&(id&n)===n&&(4===md||3===md&&(62914560&id)===id&&300>sl()-Sd?!(2&ad)&&hs(e,0):gd|=n,vd===id&&(vd=0)),le(e)}function Is(e,t){0===t&&(t=y()),null!==(e=Me(e,t))&&(w(e,t),le(e))}function Os(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Is(e,n)}function zs(e,t){var n=0;switch(e.tag){case 31:case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==s&&s.delete(t),Is(e,n)}function Bs(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Us(e,n){var a=e.alternate;return null===a?((a=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=65011712&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Vs(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qs(e,n,s,r,i,o){var l=0;if(r=e,"function"==typeof e)$s(e)&&(l=1);else if("string"==typeof e)l=ko&&zo?No(e,s,_l.current)?26:Vo(e)?27:5:ko?No(e,s,_l.current)?26:5:zo&&Vo(e)?27:5;else e:switch(e){case yr:return(e=t(31,s,n,i)).elementType=yr,e.lanes=o,e;case cr:return Hs(s.children,i,o,n);case dr:l=8,i|=24;break;case ur:return(e=t(12,s,n,2|i)).elementType=ur,e.lanes=o,e;case fr:return(e=t(13,s,n,i)).elementType=fr,e.lanes=o,e;case gr:return(e=t(19,s,n,i)).elementType=gr,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case mr:l=10;break e;case hr:l=9;break e;case pr:l=11;break e;case xr:l=14;break e;case vr:l=16,r=null;break e}l=29,s=Error(a(130,null===e?"null":typeof e,"")),r=null}return(n=t(l,s,n,i)).elementType=e,n.type=r,n.lanes=o,n}function Hs(e,n,a,s){return(e=t(7,e,s,n)).lanes=a,e}function Gs(e,n,a){return(e=t(6,e,null,n)).lanes=a,e}function Ks(e){var n=t(18,null,null,0);return n.stateNode=e,n}function Ws(e,n,a){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Qs(e,t,n,a,s,r,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Br,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=b(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b(0),this.hiddenUpdates=b(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Ys(e,n,a,s,r,i,o,l,c,d,u,h){return e=new Qs(e,n,a,o,c,d,u,h,l),n=1,!0===i&&(n|=24),i=t(3,null,null,n),e.current=i,i.stateNode=e,(n=re()).refCount++,e.pooledCache=n,n.refCount++,i.memoizedState={element:s,isDehydrated:a,cache:n},Fe(i),e}function Xs(e){return e?e=Ko:Ko}function Zs(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=null!==(e=i(t))?o(e):null)?null:Er(e.stateNode)}function Js(e,t,n,a,s,r){s=Xs(s),null===a.context?a.context=s:a.pendingContext=s,(a=Oe(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(a.callback=r),null!==(n=ze(e,a,t))&&(rs(n,0,t),Be(n,e,t))}function er(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tr(e,t){er(e,t),(e=e.alternate)&&er(e,t)}var nr={},ar=m(),sr=yU(),rr=Object.assign,ir=Symbol.for("react.element"),or=Symbol.for("react.transitional.element"),lr=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),dr=Symbol.for("react.strict_mode"),ur=Symbol.for("react.profiler"),hr=Symbol.for("react.consumer"),mr=Symbol.for("react.context"),pr=Symbol.for("react.forward_ref"),fr=Symbol.for("react.suspense"),gr=Symbol.for("react.suspense_list"),xr=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),yr=Symbol.for("react.activity"),br=Symbol.for("react.memo_cache_sentinel"),wr=Symbol.iterator,Sr=Symbol.for("react.client.reference"),jr=Array.isArray,Cr=ar.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,kr=e.rendererVersion,Nr=e.rendererPackageName,_r=e.extraDevToolsConfig,Er=e.getPublicInstance,Pr=e.getRootHostContext,Ar=e.getChildHostContext,Rr=e.prepareForCommit,Tr=e.resetAfterCommit,Mr=e.createInstance;e.cloneMutableInstance;var Dr=e.appendInitialChild,Lr=e.finalizeInitialChildren,Fr=e.shouldSetTextContent,Ir=e.createTextInstance;e.cloneMutableTextInstance;var Or=e.scheduleTimeout,zr=e.cancelTimeout,Br=e.noTimeout,$r=e.isPrimaryRenderer;e.warnsIfNotActing;var Ur=e.supportsMutation,Vr=e.supportsPersistence,qr=e.supportsHydration,Hr=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Gr=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Kr=e.setCurrentUpdatePriority,Wr=e.getCurrentUpdatePriority,Qr=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Yr=e.shouldAttemptEagerTransition,Xr=e.detachDeletedInstance;e.requestPostPaintCallback;var Zr=e.maySuspendCommit,Jr=e.maySuspendCommitOnUpdate,ei=e.maySuspendCommitInSyncRender,ti=e.preloadInstance,ni=e.startSuspendingCommit,ai=e.suspendInstance;e.suspendOnActiveViewTransition;var si=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var ri=e.NotPendingTransition,ii=e.HostTransitionContext,oi=e.resetFormInstance;e.bindToConsole;var li=e.supportsMicrotasks,ci=e.scheduleMicrotask,di=e.supportsTestSelectors,ui=e.findFiberRoot,hi=e.getBoundingRect,mi=e.getTextContent,pi=e.isHiddenSubtree,fi=e.matchAccessibilityRole,gi=e.setFocusIfFocusable,xi=e.setupIntersectionObserver,vi=e.appendChild,yi=e.appendChildToContainer,bi=e.commitTextUpdate,wi=e.commitMount,Si=e.commitUpdate,ji=e.insertBefore,Ci=e.insertInContainerBefore,ki=e.removeChild,Ni=e.removeChildFromContainer,_i=e.resetTextContent,Ei=e.hideInstance,Pi=e.hideTextInstance,Ai=e.unhideInstance,Ri=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Ti=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Mi=e.cloneInstance,Di=e.createContainerChildSet,Li=e.appendChildToContainerChildSet,Fi=e.finalizeContainerChildren,Ii=e.replaceContainerChildren,Oi=e.cloneHiddenInstance,zi=e.cloneHiddenTextInstance,Bi=e.isSuspenseInstancePending,$i=e.isSuspenseInstanceFallback,Ui=e.getSuspenseInstanceFallbackErrorDetails,Vi=e.registerSuspenseInstanceRetry,qi=e.canHydrateFormStateMarker,Hi=e.isFormStateMarkerMatching,Gi=e.getNextHydratableSibling,Ki=e.getNextHydratableSiblingAfterSingleton,Wi=e.getFirstHydratableChild,Qi=e.getFirstHydratableChildWithinContainer,Yi=e.getFirstHydratableChildWithinActivityInstance,Xi=e.getFirstHydratableChildWithinSuspenseInstance,Zi=e.getFirstHydratableChildWithinSingleton,Ji=e.canHydrateInstance,eo=e.canHydrateTextInstance,to=e.canHydrateActivityInstance,no=e.canHydrateSuspenseInstance,ao=e.hydrateInstance,so=e.hydrateTextInstance,ro=e.hydrateActivityInstance,io=e.hydrateSuspenseInstance,oo=e.getNextHydratableInstanceAfterActivityInstance,lo=e.getNextHydratableInstanceAfterSuspenseInstance,co=e.commitHydratedInstance,uo=e.commitHydratedContainer,ho=e.commitHydratedActivityInstance,mo=e.commitHydratedSuspenseInstance,po=e.finalizeHydratedChildren,fo=e.flushHydrationEvents;e.clearActivityBoundary;var go=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var xo=e.clearSuspenseBoundaryFromContainer,vo=e.hideDehydratedBoundary,yo=e.unhideDehydratedBoundary,bo=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var wo,So,jo=e.validateHydratableInstance,Co=e.validateHydratableTextInstance,ko=e.supportsResources,No=e.isHostHoistableType,_o=e.getHoistableRoot,Eo=e.getResource,Po=e.acquireResource,Ao=e.releaseResource,Ro=e.hydrateHoistable,To=e.mountHoistable,Mo=e.unmountHoistable,Do=e.createHoistableInstance,Lo=e.prepareToCommitHoistables,Fo=e.mayResourceSuspendCommit,Io=e.preloadResource,Oo=e.suspendResource,zo=e.supportsSingletons,Bo=e.resolveSingletonInstance,$o=e.acquireSingletonInstance,Uo=e.releaseSingletonInstance,Vo=e.isHostSingletonType,qo=e.isSingletonScope,Ho=[],Go=-1,Ko={},Wo=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(Qo(e)/Yo|0)|0},Qo=Math.log,Yo=Math.LN2,Xo=256,Zo=262144,Jo=4194304,el=sr.unstable_scheduleCallback,tl=sr.unstable_cancelCallback,nl=sr.unstable_shouldYield,al=sr.unstable_requestPaint,sl=sr.unstable_now,rl=sr.unstable_ImmediatePriority,il=sr.unstable_UserBlockingPriority,ol=sr.unstable_NormalPriority,ll=sr.unstable_IdlePriority,cl=sr.log,dl=sr.unstable_setDisableYieldValue,ul=null,hl=null,ml="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},pl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},fl=Object.prototype.hasOwnProperty,gl=!1,xl=new WeakMap,vl=[],yl=0,bl=null,wl=0,Sl=[],jl=0,Cl=null,kl=1,Nl="",_l=u(null),El=u(null),Pl=u(null),Al=u(null),Rl=null,Tl=null,Ml=!1,Dl=null,Ll=!1,Fl=Error(a(519)),Il=u(null),Ol=null,zl=null,Bl="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},$l=sr.unstable_scheduleCallback,Ul=sr.unstable_NormalPriority,Vl={$$typeof:mr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},ql=null,Hl=null,Gl=!1,Kl=!1,Wl=!1,Ql=0,Yl=null,Xl=0,Zl=0,Jl=null,ec=Cr.S;Cr.S=function(e,t){jd=sl(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Yl){var n=Yl=[];Xl=0,Zl=fe(),Jl={status:"pending",value:void 0,then:function(e){n.push(e)}}}Xl++,t.then(ge,ge)}(0,t),null!==ec&&ec(e,t)};var tc=u(null),nc=Error(a(460)),ac=Error(a(474)),sc=Error(a(542)),rc={then:function(){}},ic=null,oc=null,lc=0,cc=Pe(!0),dc=Pe(!1),uc=[],hc=0,mc=0,pc=!1,fc=!1,gc=u(null),xc=u(0),vc=u(null),yc=null,bc=u(0),wc=0,Sc=null,jc=null,Cc=null,kc=!1,Nc=!1,_c=!1,Ec=0,Pc=0,Ac=null,Rc=0,Tc={readContext:ne,use:mt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};Tc.useEffectEvent=tt;var Mc={readContext:ne,use:mt,useCallback:function(e,t){return dt().memoizedState=[e,void 0===t?null:t],e},useContext:ne,useEffect:Vt,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,$t(4194308,4,Wt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $t(4194308,4,e,t)},useInsertionEffect:function(e,t){$t(4,2,e,t)},useMemo:function(e,t){var n=dt();t=void 0===t?null:t;var a=e();if(_c){_(!0);try{e()}finally{_(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=dt();if(void 0!==n){var s=n(t);if(_c){_(!0);try{n(t)}finally{_(!1)}}}else s=t;return a.memoizedState=a.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=ln.bind(null,Sc,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},dt().memoizedState=e},useState:function(e){var t=(e=kt(e)).queue,n=cn.bind(null,Sc,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yt,useDeferredValue:function(e,t){return Jt(dt(),e,t)},useTransition:function(){var e=kt(!1);return e=tn.bind(null,Sc,e.queue,!0,!1),dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Sc,r=dt();if(Ml){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===sd)throw Error(a(349));127&id||bt(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Vt(St.bind(null,s,i,e),[e]),s.flags|=2048,zt(9,{destroy:void 0},wt.bind(null,s,i,n,t),null),n},useId:function(){var e=dt(),t=sd.identifierPrefix;if(Ml){var n=Nl;t="_"+t+"R_"+(n=(kl&~(1<<32-Wo(kl)-1)).toString(32)+n),0<(n=Ec++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Rc++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:an,useFormState:Dt,useActionState:Dt,useOptimistic:function(e){var t=dt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=un.bind(null,Sc,!0,n),n.dispatch=t,[e,t]},useMemoCache:pt,useCacheRefresh:function(){return dt().memoizedState=on.bind(null,Sc)},useEffectEvent:function(e){var t=dt(),n={impl:e};return t.memoizedState=n,function(){if(2&ad)throw Error(a(440));return n.impl.apply(void 0,arguments)}}},Dc={readContext:ne,use:mt,useCallback:Xt,useContext:ne,useEffect:qt,useImperativeHandle:Qt,useInsertionEffect:Gt,useLayoutEffect:Kt,useMemo:Zt,useReducer:gt,useRef:Bt,useState:function(){return gt(ft)},useDebugValue:Yt,useDeferredValue:function(e,t){return en(ut(),jc.memoizedState,e,t)},useTransition:function(){var e=gt(ft)[0],t=ut().memoizedState;return["boolean"==typeof e?e:ht(e),t]},useSyncExternalStore:yt,useId:sn,useHostTransitionStatus:an,useFormState:Lt,useActionState:Lt,useOptimistic:function(e,t){return Nt(ut(),0,e,t)},useMemoCache:pt,useCacheRefresh:rn};Dc.useEffectEvent=Ht;var Lc={readContext:ne,use:mt,useCallback:Xt,useContext:ne,useEffect:qt,useImperativeHandle:Qt,useInsertionEffect:Gt,useLayoutEffect:Kt,useMemo:Zt,useReducer:vt,useRef:Bt,useState:function(){return vt(ft)},useDebugValue:Yt,useDeferredValue:function(e,t){var n=ut();return null===jc?Jt(n,e,t):en(n,jc.memoizedState,e,t)},useTransition:function(){var e=vt(ft)[0],t=ut().memoizedState;return["boolean"==typeof e?e:ht(e),t]},useSyncExternalStore:yt,useId:sn,useHostTransitionStatus:an,useFormState:Ot,useActionState:Ot,useOptimistic:function(e,t){var n=ut();return null!==jc?Nt(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:pt,useCacheRefresh:rn};Lc.useEffectEvent=Ht;var Fc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=as(),s=Oe(a);s.payload=t,null!=n&&(s.callback=n),null!==(t=ze(e,s,a))&&(rs(t,0,a),Be(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=as(),s=Oe(a);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=ze(e,s,a))&&(rs(t,0,a),Be(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=as(),a=Oe(n);a.tag=2,null!=t&&(a.callback=t),null!==(t=ze(e,a,n))&&(rs(t,0,n),Be(t,e,n))}},Ic=Error(a(461)),Oc=!1,zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Bc=!1,$c=!1,Uc=!1,Vc="function"==typeof WeakSet?WeakSet:Set,qc=null,Hc=null,Gc=!1,Kc=null,Wc=8192,Qc={getCacheForType:function(e){var t=ne(Vl),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ne(Vl).controller.signal}},Yc=0,Xc=1,Zc=2,Jc=3,ed=4;if("function"==typeof Symbol&&Symbol.for){var td=Symbol.for;Yc=td("selector.component"),Xc=td("selector.has_pseudo_class"),Zc=td("selector.role"),Jc=td("selector.test_id"),ed=td("selector.text")}var nd="function"==typeof WeakMap?WeakMap:Map,ad=0,sd=null,rd=null,id=0,od=0,ld=null,cd=!1,dd=!1,ud=!1,hd=0,md=0,pd=0,fd=0,gd=0,xd=0,vd=0,yd=null,bd=null,wd=!1,Sd=0,jd=0,Cd=1/0,kd=null,Nd=null,_d=0,Ed=null,Pd=null,Ad=0,Rd=0,Td=null,Md=null,Dd=0,Ld=null;return nr.attemptContinuousHydration=function(e){if(13===e.tag||31===e.tag){var t=Me(e,67108864);null!==t&&rs(t,0,67108864),tr(e,67108864)}},nr.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag||31===e.tag){var t=as(),n=Me(e,t=k(t));null!==n&&rs(n,0,t),tr(e,t)}},nr.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=f(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-Wo(t);e.entanglements[1]|=n,t&=~n}le(e),!(6&ad)&&(Cd=sl()+500,ce(0))}}break;case 31:case 13:null!==(t=Me(e,2))&&rs(t,0,2),ds(),tr(e,2)}},nr.batchedUpdates=function(e,t){return e(t)},nr.createComponentSelector=function(e){return{$$typeof:Yc,value:e}},nr.createContainer=function(e,t,n,a,s,r,i,o,l,c){return Ys(e,t,!1,null,0,a,r,null,i,o,l,c)},nr.createHasPseudoClassSelector=function(e){return{$$typeof:Xc,value:e}},nr.createHydrationContainer=function(e,t,n,a,s,r,i,o,l,c,d,u,h,m){return(e=Ys(n,a,!0,e,0,r,o,m,l,c,d,u)).context=Xs(null),n=e.current,(s=Oe(a=k(a=as()))).callback=null!=t?t:null,ze(n,s,a),t=a,e.current.lanes=t,w(e,t),le(e),e},nr.createPortal=function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:lr,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}},nr.createRoleSelector=function(e){return{$$typeof:Zc,value:e}},nr.createTestNameSelector=function(e){return{$$typeof:Jc,value:e}},nr.createTextSelector=function(e){return{$$typeof:ed,value:e}},nr.defaultOnCaughtError=function(e){},nr.defaultOnRecoverableError=function(e){pl(e)},nr.defaultOnUncaughtError=function(e){pl(e)},nr.deferredUpdates=function(e){var t=Cr.T,n=Wr();try{return Kr(32),Cr.T=null,e()}finally{Kr(n),Cr.T=t}},nr.discreteUpdates=function(e,t,n,a,s){var r=Cr.T,i=Wr();try{return Kr(2),Cr.T=null,e(t,n,a,s)}finally{Kr(i),Cr.T=r,0===ad&&(Cd=sl()+500)}},nr.findAllNodes=ns,nr.findBoundingRects=function(e,t){if(!di)throw Error(a(363));t=ns(e,t),e=[];for(var n=0;n<t.length;n++)e.push(hi(t[n]));for(t=e.length-1;0<t;t--)for(var s=(n=e[t]).x,r=s+n.width,i=n.y,o=i+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],d=c.x,u=d+c.width,h=c.y,m=h+c.height;if(s>=d&&i>=h&&r<=u&&o<=m){e.splice(t,1);break}if(!(s!==d||n.width!==c.width||m<i||h>o)){h>i&&(c.height+=h-i,c.y=i),m<o&&(c.height=o-h),e.splice(t,1);break}if(!(i!==h||n.height!==c.height||u<s||d>r)){d>s&&(c.width+=d-s,c.x=s),u<r&&(c.width=r-d),e.splice(t,1);break}}return e},nr.findHostInstance=Zs,nr.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=i(e))?l(e):null)?null:Er(e.stateNode)},nr.findHostInstanceWithWarning=function(e){return Zs(e)},nr.flushPassiveEffects=Rs,nr.flushSyncFromReconciler=function(e){var t=ad;ad|=1;var n=Cr.T,a=Wr();try{if(Kr(2),Cr.T=null,e)return e()}finally{Kr(a),Cr.T=n,!(6&(ad=t))&&ce(0)}},nr.flushSyncWork=ds,nr.focusWithin=function(e,t){if(!di)throw Error(a(363));for(t=ts(e=Za(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],s=n.tag;if(!pi(n)){if((5===s||26===s||27===s)&&gi(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},nr.getFindAllNodesFailureDescription=function(e,t){if(!di)throw Error(a(363));var n=0,s=[];e=[Za(e),0];for(var r=0;r<e.length;){var i=e[r++],o=i.tag,l=e[r++],c=t[l];if((5!==o&&26!==o&&27!==o||!pi(i))&&(Ja(i,c)&&(s.push(es(c)),++l>n&&(n=l)),l<t.length))for(i=i.child;null!==i;)e.push(i,l),i=i.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(es(t[n]));return"findAllNodes was able to match part of the selector:\n  "+s.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},nr.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return Er(e.child.stateNode);default:return e.child.stateNode}},nr.injectIntoDevTools=function(){var e={bundleType:0,version:kr,rendererPackageName:Nr,currentDispatcherRef:Cr,reconcilerVersion:"19.2.0"};if(null!==_r&&(e.rendererConfig=_r),"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{ul=t.inject(e),hl=t}catch(GQ){}e=!!t.checkDCE}}return e},nr.isAlreadyRendering=function(){return!!(6&ad)},nr.observeVisibleRects=function(e,t,n,s){if(!di)throw Error(a(363));e=ns(e,t);var r=xi(e,n,s).disconnect;return{disconnect:function(){r()}}},nr.shouldError=function(){return null},nr.shouldSuspend=function(){return!1},nr.startHostTransition=function(e,t,s,r){if(5!==e.tag)throw Error(a(476));var i=nn(e).queue;tn(e,i,t,ri,null===s?n:function(){var t=nn(e);return null===t.next&&(t=e.alternate.memoizedState),dn(e,t.next.queue,{},as()),s(r)})},nr.updateContainer=function(e,t,n,a){var s=t.current,r=as();return Js(s,r,e,t,n,a),r},nr.updateContainerSync=function(e,t,n,a){return Js(t.current,2,e,t,n,a),2},nr},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})),gU.exports;var e}const wU=n((pU||(pU=1,fU.exports=bU()),fU.exports));var SU,jU,CU={exports:{}},kU={};var NU=(jU||(jU=1,CU.exports=(SU||(SU=1,kU.ConcurrentRoot=1,kU.ContinuousEventPriority=8,kU.DefaultEventPriority=32,kU.DiscreteEventPriority=2,kU.IdleEventPriority=268435456,kU.LegacyRoot=0,kU.NoEventPriority=0),kU)),CU.exports),_U=Lz();const EU={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let PU=!1,AU=!1;const RU=".react-konva-event",TU={};function MU(e,t,n=TU){if(!PU&&"zIndex"in t&&(PU=!0),!AU&&t.draggable){var a=void 0!==t.x||void 0!==t.y,s=t.onDragEnd||t.onDragMove;a&&!s&&(AU=!0)}for(var r in n)if(!EU[r]){var i="on"===r.slice(0,2),o=n[r]!==t[r];if(i&&o)"content"===(m=r.substr(2).toLowerCase()).substr(0,7)&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),e.off(m,n[r]);!t.hasOwnProperty(r)&&e.setAttr(r,void 0)}var l=t._useStrictMode,c={},d=!1;const u={};for(var r in t)if(!EU[r]){i="on"===r.slice(0,2);var h=n[r]!==t[r];if(i&&h)"content"===(m=r.substr(2).toLowerCase()).substr(0,7)&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[r]&&(u[m]=t[r]);!i&&(t[r]!==n[r]||l&&t[r]!==e.getAttr(r))&&(d=!0,c[r]=t[r])}for(var m in d&&(e.setAttrs(c),DU(e)),u)e.off(m+RU),e.on(m+RU,u[m])}function DU(e){if(!_U.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var LU,FU,IU={exports:{}},OU={};var zU=(FU||(FU=1,IU.exports=(LU||(LU=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<s(r,t)))break e;e[a]=t,e[n]=r,n=a}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<r&&0>s(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<r&&0>s(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,f=!1,g=!1,x="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var s=n(c);null!==s;){if(null===s.callback)a(c);else{if(!(s.startTime<=e))break;a(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function w(e){if(f=!1,b(e),!p)if(null!==n(l))p=!0,j||(j=!0,S());else{var t=n(c);null!==t&&R(w,t.startTime-e)}}var S,j=!1,C=-1,k=5,N=-1;function _(){return!(!g&&e.unstable_now()-N<k)}function E(){if(g=!1,j){var t=e.unstable_now();N=t;var s=!0;try{e:{p=!1,f&&(f=!1,v(C),C=-1),m=!0;var r=h;try{t:{for(b(t),u=n(l);null!==u&&!(u.expirationTime>t&&_());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){u.callback=o,b(t),s=!0;break t}u===n(l)&&a(l),b(t)}else a(l);u=n(l)}if(null!==u)s=!0;else{var d=n(c);null!==d&&R(w,d.startTime-t),s=!1}}break e}finally{u=null,h=r,m=!1}s=void 0}}finally{s?S():j=!1}}}if("function"==typeof y)S=function(){y(E)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=E,S=function(){A.postMessage(null)}}else S=function(){x(E,0)};function R(t,n){C=x(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(a,s,r){var i=e.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?i+r:i,a){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return a={id:d++,callback:s,priorityLevel:a,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(a.sortIndex=r,t(c,a),null===n(l)&&a===n(c)&&(f?(v(C),C=-1):f=!0,R(w,r-i))):(a.sortIndex=o,t(l,a),p||m||(p=!0,j||(j=!0,S()))),a},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(OU)),OU)),IU.exports);const BU={},$U={};dU.Node.prototype._applyProps=MU;let UU=NU.DefaultEventPriority;const VU=setTimeout,qU=clearTimeout;function HU(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),DU(e)}const GU=f.createContext(null);const KU=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:GU,NotPendingTransition:null,afterActiveInstanceBlur:function(){},appendChild:function(e,t){t.parent===e?t.moveToTop():e.add(t),DU(e)},appendChildToContainer:function(e,t){t.parent===e?t.moveToTop():e.add(t),DU(e)},appendInitialChild:function(e,t){"string"!=typeof t&&(e.add(t),DU(e))},beforeActiveInstanceBlur:function(){},cancelTimeout:qU,clearContainer:function(e){},commitMount:function(e,t,n){},commitTextUpdate:function(e,t,n){},commitUpdate:function(e,t,n,a){MU(e,a,n)},createInstance:function(e,t,n){let a=dU[e];a||(a=dU.Group);const s={},r={};for(var i in t){if("ref"!==i)"on"===i.slice(0,2)?r[i]=t[i]:s[i]=t[i]}const o=new a(s);return MU(o,r),o},createTextInstance:function(e,t,n){},detachDeletedInstance:function(){},finalizeInitialChildren:function(e,t,n){return!1},getChildHostContext:function(){return BU},getCurrentEventPriority:function(){return NU.DefaultEventPriority},getCurrentUpdatePriority:function(){return UU},getInstanceFromNode:function(){return null},getInstanceFromScope:function(){return null},getPublicInstance:function(e){return e},getRootHostContext:function(){return BU},hideInstance:function(e){e.hide(),DU(e)},hideTextInstance:function(e){},idlePriority:zU.unstable_IdlePriority,insertBefore:HU,insertInContainerBefore:function(e,t,n){HU(e,t,n)},isPrimaryRenderer:!1,maySuspendCommit:function(){return!1},noTimeout:-1,now:zU.unstable_now,preloadInstance:function(){return!0},prepareForCommit:function(){return null},preparePortalMount:function(){return null},prepareScopeUpdate:function(){},prepareUpdate:function(e,t,n,a){return $U},removeChild:function(e,t){t.destroy(),t.off(RU),DU(e)},removeChildFromContainer:function(e,t){t.destroy(),t.off(RU),DU(e)},requestPostPaintCallback:function(){},resetAfterCommit:function(){},resetFormInstance:function(){},resetTextContent:function(e){},resolveEventTimeStamp:function(){return-1.1},resolveEventType:function(){return null},resolveUpdatePriority:function(){return NU.DiscreteEventPriority},run:zU.unstable_runWithPriority,scheduleMicrotask:e=>{e()},scheduleTimeout:VU,setCurrentUpdatePriority:function(e){UU=e},shouldAttemptEagerTransition:function(){return!1},shouldDeprioritizeSubtree:function(e,t){return!1},shouldSetTextContent:function(e,t){return!1},startSuspendingCommit:function(){},supportsHydration:!1,supportsMicrotasks:!0,supportsMutation:!0,supportsPersistence:!1,suspendInstance:function(){},trackSchedulerEvent:function(){},unhideInstance:function(e,t){(null==t.visible||t.visible)&&e.show()},unhideTextInstance:function(e,t){},waitForCommitToBeReady:function(){return null},warnsIfNotActing:!1},Symbol.toStringTag,{value:"Module"}));function WU(e,t,n){if(!e)return;if(!0===n(e))return e;let a=e.child;for(;a;){const e=WU(a,t,n);if(e)return e;a=a.sibling}}function QU(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const YU=QU(p.createContext(null));class XU extends p.Component{render(){return p.createElement(YU.Provider,{value:this._reactInternals},this.props.children)}}const ZU=Symbol.for("react.context"),JU=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===ZU;function eV(){const e=function(){const e=p.useContext(YU);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=p.useId();return p.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=WU(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}(),[t]=p.useState(()=>new Map);t.clear();let n=e;for(;n;){const e=n.type;JU(e)&&e!==YU&&!t.has(e)&&t.set(e,p.use(QU(e))),n=n.return}return t}if(-1===f.version.indexOf("19"))throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");const tV=e=>{const t=f.useRef(null),n=f.useRef(null),a=f.useRef(null),s=function(e){const t=f.useRef({});return f.useLayoutEffect(()=>{t.current=e}),f.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}(e),r=function(){const e=eV();return p.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>a=>p.createElement(t,null,p.createElement(n.Provider,{...a,value:e.get(n)})),e=>p.createElement(XU,{...e})),[e])}(),i=f.useRef(null),o=t=>{const{forwardedRef:n}=e;n&&("function"==typeof n?n(t):n.current=t)},l=(()=>{const e=f.useRef(0);return f.useMemo(()=>{e.current++},[]),e.current>1})(),c=()=>{o(null),uV.updateContainer(null,a.current,null),n.current?.destroy(),n.current=null};return f.useLayoutEffect(()=>(i.current&&(clearTimeout(i.current),i.current=null),n.current?o(n.current):(n.current=new dU.Stage({width:e.width,height:e.height,container:t.current}),o(n.current),a.current=uV.createContainer(n.current,NU.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),uV.updateContainer(f.createElement(r,{},e.children),a.current,null,()=>{})),()=>{l?i.current=setTimeout(c,0):c()}),[]),f.useLayoutEffect(()=>{o(n.current),MU(n.current,e,s),uV.updateContainer(f.createElement(r,{},e.children),a.current,null)}),f.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},nV="Layer",aV="Group",sV="Rect",rV="Circle",iV="Line",oV="Image",lV="Text",cV="Path",dV="Transformer",uV=wU(KU),hV=f.forwardRef((e,t)=>f.createElement(XU,{},f.createElement(tV,{...e,forwardedRef:t}))),mV="#f7f9fd",pV="#60a5fa",fV="#2563eb",gV="#6b7280",xV="#374151",vV="#0ea5e9",yV="#0284c7",bV="#f59e0b",wV="#b45309",SV="#d946ef",jV="#a21caf",CV="#ef4444",kV="#991b1b",NV="#10b981",_V="#047857",EV="#9ca3af",PV="#06b6d4",AV="#fcd34d",RV="#e879f9",TV="#fca5a5",MV="#6ee7b7",DV="#10b981",LV="#f97316",FV="#ea580c";var IV=(e=>(e.CIRCLE="circle",e.RECTANGLE="rectangle",e.ELLIPSE="ellipse",e.POLYGON="polygon",e.FREEFORM="freeform",e.SOFA="sofa",e.STAGE="stage",e.SEAT="seat",e))(IV||{});const OV=12;function zV({shape:e,fill:t,stroke:n,strokeWidth:a=2,imageWidth:s,imageHeight:r,opacity:i=1,dash:o,rotation:l=0,rotationFromParent:d=!1}){const u={fill:t,stroke:n,strokeWidth:a,opacity:i,dash:o,perfectDrawEnabled:!1,strokeScaleEnabled:!1};if(!e||!e.type)return c.jsx(rV,{...u,radius:OV});const h=e.type;if(!Object.values(IV).includes(h))return c.jsx(rV,{...u,radius:OV});const m=d?0:e.rotation??l;switch(h){case IV.CIRCLE:{const t=e.radius?e.radius/100*Math.min(s,r):OV,n=Math.max(1,Math.abs(t));return c.jsx(rV,{...u,radius:n,rotation:m})}case IV.RECTANGLE:{const t=e.width?e.width/100*s:24,n=e.height?e.height/100*r:24,a=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(n)),o=e.cornerRadius||0,l=Math.min(a,i)/2,d=Math.max(0,Math.min(Math.abs(o),l));return c.jsx(sV,{...u,x:-a/2,y:-i/2,width:a,height:i,cornerRadius:d,rotation:m})}case IV.ELLIPSE:{const t=e.width?e.width/100*s/2:OV,n=e.height?e.height/100*r/2:OV,a=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(n));return c.jsx("Ellipse",{...u,radiusX:a,radiusY:i,rotation:m})}case IV.POLYGON:{if(!e.points||e.points.length<6)return c.jsx(rV,{...u,radius:OV});const t=e.points.map((e,t)=>t%2==0?e/100*s:e/100*r);return c.jsx(iV,{...u,points:t,closed:!0,rotation:m})}case IV.FREEFORM:{if(!e.points||e.points.length<4)return c.jsx(rV,{...u,radius:OV});const t=e.points.map((e,t)=>t%2==0?e/100*s:e/100*r);return c.jsx(iV,{...u,points:t,closed:!0,tension:0,rotation:m})}case IV.SOFA:{const t=e.width?e.width/100*s:36,n=e.height?e.height/100*r:24,a=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(n)),o=a/24,l=i/24;return c.jsx(aV,{x:-a/2,y:-i/2,scaleX:o,scaleY:l,children:c.jsx(cV,{...u,data:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3 M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z M4 18v2 M20 18v2 M12 4v9",x:0,y:0,rotation:m})})}case IV.STAGE:{const t=e.width?e.width/100*s:100,n=e.height?e.height/100*r:50,a=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(n));return c.jsxs(f.Fragment,{children:[c.jsx(sV,{...u,x:-a/2,y:-i/2,width:a,height:i,cornerRadius:2,rotation:m}),c.jsx(sV,{...u,fill:"transparent",stroke:u.stroke,strokeWidth:1,x:-a/2+5,y:-i/2+5,width:a-10,height:i-10,cornerRadius:1,rotation:m,dash:[5,5]})]})}case IV.SEAT:{const t=e.width?e.width/100*s:24,n=e.height?e.height/100*r:24,a=Math.max(1,Math.abs(t))/2,i=Math.max(1,Math.abs(n))/2,o=Math.min(a,i),l=`M ${-a} ${-i} L ${a-o} ${-i} A ${o} ${o} 0 0 1 ${a-o} ${i} L ${-a} ${i} Z`;return c.jsx(cV,{...u,data:l,rotation:m})}default:return c.jsx(rV,{...u,radius:OV})}}function BV(e){switch(String(e).toUpperCase().trim()){case"AVAILABLE":return{fill:NV,stroke:_V};case"RESERVED":return{fill:bV,stroke:wV};case"SOLD":return{fill:vV,stroke:yV};case"HELD":return{fill:SV,stroke:jV};case"BLOCKED":return{fill:CV,stroke:kV};default:return{fill:gV,stroke:xV}}}function $V(e,t=.5){const n=Math.max(0,Math.min(1,e)),a=Math.max(0,Math.min(1,t)),s=30,r=58,i=138,o=107,l=114,c=128;return`rgba(${Math.round(s+(o-s)*n)}, ${Math.round(r+(l-r)*n)}, ${Math.round(i+(c-i)*n)}, ${a})`}function UV(e){if(e)try{const t=JSON.parse(e);if(t&&"object"==typeof t&&t.type){const e={...t,type:t.type};return Object.values(IV).includes(e.type)?e:void 0}}catch(t){}}function VV(e,t,n,a,s=2.5,r=1,i){const o=i?.isHover&&i?.hoverColors?i.hoverColors:t;return c.jsx(zV,{shape:e??void 0,fill:o.fill||"transparent",stroke:o.stroke||"transparent",strokeWidth:s,imageWidth:n,imageHeight:a,opacity:r})}function qV({seat:e,eventSeat:t,x:n,y:a,isHovered:s,isSpacePressed:r,isSelected:i=!1,onMouseEnter:o,onMouseMove:l,onMouseLeave:d,onClick:u,imageWidth:h,imageHeight:m,markerFillTransparency:f=1}){const g=p.useRef(null),[x,v]=p.useState(!1),[y,b]=p.useState(!1);let w;if(t?.ticket_status){const e=function(e){if(!e)return null;switch(String(e).toUpperCase().trim()){case"AVAILABLE":return{fill:NV,stroke:_V};case"RESERVED":return{fill:bV,stroke:wV};case"CONFIRMED":return{fill:vV,stroke:yV};case"CANCELLED":return{fill:CV,stroke:kV};case"USED":return{fill:"#6b7280",stroke:"#4b5563"};case"TRANSFERRED":return{fill:SV,stroke:jV};default:return null}}(t.ticket_status);w=e||BV(t.status)}else w=t?BV(t.status):{fill:gV,stroke:xV};const S=UV(e.shape),j=S?.fillColor?.trim(),C=S?.strokeColor?.trim(),k=(e,t)=>!e||e.toLowerCase().replace(/^#/,"")===t.toLowerCase().replace(/^#/,""),N={fill:k(j,pV)?void 0:j,stroke:k(C,fV)?void 0:C},_={fill:k(j,pV)?w.fill===gV?EV:w.fill===vV?PV:w.fill===bV?AV:w.fill===SV?RV:w.fill===CV?TV:MV:j,stroke:k(C,fV)?w.stroke===xV?gV:w.stroke===yV?vV:w.stroke===wV?bV:w.stroke===jV?SV:w.stroke===kV?CV:DV:C},E=s||x,P=i?"#06b6d4":_.fill??w.fill,A=i?"#0891b2":_.stroke??w.stroke,R="available"===t?.status,T=i?1:E?.3:f,M=i?3:E?1.5:1;p.useEffect(()=>{const e=g.current;if(!e)return;e.to({opacity:T,duration:.2,easing:oU.Easings.EaseInOut});e.getChildren().forEach(e=>{e instanceof oU.Shape&&e.to({strokeWidth:M,duration:.2,easing:oU.Easings.EaseInOut})})},[T,M]),p.useEffect(()=>{if(!y)return;const e=g.current;e&&(e.scaleX(.9),e.scaleY(.9),e.to({scaleX:1,scaleY:1,duration:.15,easing:oU.Easings.EaseOut,onFinish:()=>{b(!1)}}))},[y]);const D=t?function(e){switch(String(e).toUpperCase().trim()){case"AVAILABLE":case"SOLD":case"HELD":case"RESERVED":default:return 1;case"BLOCKED":return 0}}(t.status):0,L=S?.width?Math.min(Math.max(.15*S.width,6),12):8,F=1.75*L;return c.jsxs(aV,{x:n,y:a,onMouseEnter:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=R?"pointer":"not-allowed"),v(!0),o(e)},onMouseMove:e=>{l&&l(e)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=r?"grabbing":"default"),v(!1),d()},onClick:e=>{e.cancelBubble=!0,b(!0),u()},onTap:e=>{e.cancelBubble=!0,b(!0),u()},onMouseDown:e=>{e.cancelBubble=!0},children:[(T>0||i)&&t&&c.jsx(aV,{opacity:D*T,children:VV(S,{fill:P,stroke:A},h,m,0,1)}),c.jsx(aV,{ref:g,opacity:T,children:VV(S,{fill:N.fill??P,stroke:N.stroke??A},h,m,M,1,{hoverColors:{fill:N.fill??_.fill,stroke:N.stroke??_.stroke},isHover:E})}),i&&c.jsxs(aV,{children:[c.jsx(rV,{x:0,y:0,radius:L,fill:"#ef4444",stroke:"#fff",strokeWidth:2}),c.jsx(lV,{x:.6*-L,y:.85*-L,text:"",fontSize:F,fill:"#fff",fontStyle:"bold"})]})]})}function HV({section:e,x:t,y:n,isHovered:a,isSpacePressed:s,totalSeats:r,eventSeatCount:i,statusCounts:o,imageWidth:l,imageHeight:d,markerFillTransparency:u=.5,onMouseEnter:h,onMouseMove:m,onMouseLeave:f,onClick:g}){const x=p.useRef(null),v=p.useRef(null),y=p.useRef(null),[b,w]=p.useState(!1),[S,j]=p.useState(!1);let C={fill:gV,stroke:xV};i>0&&(o.sold>0?C={fill:vV,stroke:yV}:o.reserved>0?C={fill:bV,stroke:wV}:o.held>0?C={fill:SV,stroke:jV}:o.blocked>0?C={fill:CV,stroke:kV}:o.available>0&&(C={fill:NV,stroke:_V}));const k=UV(e.shape),N=!!k,_=o.sold??0,E=r>0?Math.min(1,_/r):0,P=$V(E,u),A=$V(E,Math.min(1,u+.2)),R=k?.fillColor?.trim(),T=k?.strokeColor?.trim(),M=(e,t)=>!e||e.toLowerCase().replace(/^#/,"")===t.toLowerCase().replace(/^#/,""),D={fill:M(R,pV)?void 0:R,stroke:M(T,fV)?void 0:T},L={fill:N?A:M(R,pV)?C.fill===gV?EV:C.fill===vV?PV:C.fill===bV?AV:C.fill===SV?RV:C.fill===CV?TV:MV:R,stroke:N?"rgba(30, 58, 138, 0.6)":M(T,fV)?C.stroke===xV?gV:C.stroke===yV?vV:C.stroke===wV?bV:C.stroke===jV?SV:C.stroke===kV?CV:DV:T},F=a||b,I=F?.3:u,O=F?1.5:1;return p.useEffect(()=>{const e=v.current;if(!e||!N)return;e.to({opacity:I,duration:.2,easing:oU.Easings.EaseInOut});e.getChildren().forEach(e=>{e instanceof oU.Shape&&e.to({strokeWidth:O,duration:.2,easing:oU.Easings.EaseInOut})})},[I,O,N]),p.useEffect(()=>{const e=y.current;e&&!N&&e.to({fontSize:F?15:14,shadowBlur:F?4:2,backgroundStrokeWidth:O,duration:.2,easing:oU.Easings.EaseInOut})},[F,O,N]),p.useEffect(()=>{if(!S)return;const e=x.current;e&&(e.scaleX(.9),e.scaleY(.9),e.to({scaleX:1,scaleY:1,duration:.15,easing:oU.Easings.EaseOut,onFinish:()=>{j(!1)}}))},[S]),c.jsx(aV,{ref:x,x:t,y:n,rotation:k?.rotation||0,onMouseEnter:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor="pointer"),w(!0),h(e)},onMouseMove:e=>{m&&m(e)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=s?"grabbing":"default"),w(!1),f()},onClick:e=>{e.cancelBubble=!0,j(!0),g()},onTap:e=>{e.cancelBubble=!0,j(!0),g()},onMouseDown:e=>{e.cancelBubble=!0},children:N?c.jsxs(c.Fragment,{children:[c.jsx(aV,{ref:v,opacity:I,children:VV(k,{fill:N?P:D.fill,stroke:N?"rgba(30, 58, 138, 0.4)":D.stroke},l,d,O,1,{hoverColors:L,isHover:F})}),c.jsx(lV,{ref:y,text:e.name,fontSize:10,fontFamily:"Arial",fill:"#1e293b",padding:2,align:"center",verticalAlign:"middle",listening:!1,x:0,y:0,width:48,offsetX:24,offsetY:7,backgroundFill:"rgba(255, 255, 255, 0.9)",backgroundStroke:"#e2e8f0",backgroundStrokeWidth:1,cornerRadius:2})]}):c.jsx(lV,{ref:y,text:e.name,fontSize:14,fontFamily:"Arial",padding:8,align:"center",verticalAlign:"middle",backgroundFill:(F?L.fill:D.fill)??C.fill,backgroundStroke:(F?L.stroke:D.stroke)??C.stroke,backgroundStrokeWidth:O,cornerRadius:4,x:0,y:0,width:80,offsetX:40,offsetY:15,shadowBlur:2,shadowColor:"rgba(0,0,0,0.2)",opacity:I})})}function GV({containerRef:e,stageRef:t,validWidth:n,validHeight:a,centerX:s,centerY:r,imageX:i,imageY:o,displayedWidth:l,displayedHeight:d,image:u,zoomLevel:h,panOffset:m,isSpacePressed:p,isPanning:f,hoveredSeatId:g,layout:x,selectedSectionId:v,sections:y,sectionStats:b,displayedSeats:w,seatStatusMap:S,locationStatusMap:j,sectionNameMap:C,selectedSeatIds:k,hoveredSectionId:N,percentageToStage:_,onWheel:E,onMouseDown:P,onMouseMove:A,onMouseUp:R,onMouseLeave:T,setHoveredSectionId:M,setHoveredSectionData:D,setHoveredSeatPosition:L,setHoveredSeatId:F,setHoveredSeatData:I,updatePopoverPosition:O,setSelectedSectionId:z,setZoomLevel:B,setPanOffset:$,onSeatClick:U,canvasBackgroundColor:V="#e5e7eb"}){function q(e){if(v){const t=y.find(t=>t.id===e.section_id);return t?.marker_fill_transparency??x.marker_fill_transparency??1}return x.marker_fill_transparency??1}const H="section-level"===x.design_mode&&!v;return c.jsx("div",{ref:e,className:"relative w-full",style:{minHeight:"600px",height:"70vh"},children:c.jsx(hV,{ref:t,width:n,height:a,onWheel:e=>E(e,p),onMouseDown:P,onMouseMove:A,onMouseUp:R,onMouseLeave:T,style:{display:"block",cursor:g?"pointer":f||p?"grabbing":"default"},children:c.jsxs(nV,{x:s+m.x,y:r+m.y,scaleX:h,scaleY:h,offsetX:s,offsetY:r,children:[u?c.jsx(oV,{name:"background-image",image:u,x:i,y:o,width:l,height:d,listening:!0}):c.jsx(sV,{name:"background-image",x:i,y:o,width:l,height:d,fill:V,listening:!0}),H?y.map(e=>{const t=b.get(e.id);if(!t)return null;if(!e.x_coordinate||!e.y_coordinate)return null;const{x:n,y:a}=_(e.x_coordinate,e.y_coordinate),s=x.marker_fill_transparency??.5;return c.jsx(HV,{section:e,x:n,y:a,isHovered:N===e.id,isSpacePressed:p,totalSeats:t.totalSeats,eventSeatCount:t.eventSeatCount,statusCounts:t.statusCounts,imageWidth:l,imageHeight:d,markerFillTransparency:s,onMouseEnter:n=>{M(e.id),D({section:e,seatCount:t.totalSeats,eventSeatCount:t.eventSeats.length,statusSummary:t.statusCounts}),O(n)},onMouseMove:O,onMouseLeave:()=>{M(null),L(null),D(null)},onClick:()=>{0!==t.totalSeats?(z(e.id),B(1),$({x:0,y:0})):Uk({title:"No Seats Available",description:`Section "${e.name}" does not have any seats. Please add seats to this section first.`,variant:"destructive"})}},e.id)}):w.map(e=>{if(!e.x_coordinate||!e.y_coordinate)return null;const{x:t,y:n}=_(e.x_coordinate,e.y_coordinate),a=function(e){if(e.id&&S.has(e.id))return S.get(e.id);if(e.row&&e.seat_number){const t=e.section_name||C.get(e.section_id);if(t){const n=`${t}|${e.row}|${e.seat_number}`;return j.get(n)}}}(e),s=Boolean(e.id&&k.has(e.id));return c.jsx(qV,{seat:e,eventSeat:a,x:t,y:n,isHovered:g===e.id,isSpacePressed:p,isSelected:s,imageWidth:l,imageHeight:d,markerFillTransparency:q(e),onMouseEnter:t=>{F(e.id),I({seat:e,eventSeat:a}),O(t)},onMouseMove:O,onMouseLeave:()=>{F(null),L(null),I(null)},onClick:()=>{"available"===a?.status&&U&&U(e.id,a)}},e.id)})]})})})}function KV({className:e}){return c.jsxs("div",{className:sl("bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-md",e),children:[c.jsx("div",{className:"text-xs font-medium mb-2",children:"Seat Status"}),c.jsx("div",{className:"space-y-1",children:Object.entries(JI).map(([e,t])=>{const n=BV(t);return c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.fill,border:`1px solid ${n.stroke}`}}),c.jsx("span",{children:e})]},e)})})]})}function WV({section:e,onBack:t,className:n}){return c.jsx("div",{className:sl("z-10 bg-background/95 backdrop-blur-sm rounded-full px-2 py-1 shadow-md border border-border",n),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:t,className:"flex items-center justify-center h-6 w-6 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",title:"Back to Sections",children:c.jsx(Tp,{className:"h-3.5 w-3.5"})}),c.jsx("div",{className:"text-xs font-medium text-foreground",children:e.name})]})})}function QV({section:e,seatCount:t,eventSeatCount:n,statusSummary:a,x:s,y:r}){return c.jsx("div",{className:"fixed z-[9999] rounded-lg border border-gray-300 bg-white p-4 shadow-2xl dark:border-gray-600 dark:bg-gray-900",style:{left:`${s}px`,top:`${r}px`,pointerEvents:"none",width:"320px",opacity:1,backdropFilter:"none"},children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-gray-100",children:"Section Information"}),c.jsxs("div",{className:"space-y-1.5 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Section Name:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.name})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Seats:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Event Seats:"}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[n," / ",t]})]})]})]}),Object.keys(a).length>0&&c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[c.jsx("h4",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-gray-100",children:"Status Summary"}),c.jsx("div",{className:"space-y-1.5 text-sm",children:Object.entries(a).map(([e,t])=>{const n=BV(e);return c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.fill,border:`1px solid ${n.stroke}`}}),c.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e,":"]})]}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t})]},e)})})]})]})})}function YV({seat:e,eventSeat:t,sectionName:n,x:a,y:s}){return c.jsx("div",{className:"fixed z-[9999] rounded-lg border border-gray-300 bg-white p-4 shadow-2xl dark:border-gray-600 dark:bg-gray-900",style:{left:`${a}px`,top:`${s}px`,pointerEvents:"none",width:"320px",opacity:1,backdropFilter:"none"},children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-gray-100",children:"Seat Information"}),c.jsxs("div",{className:"space-y-1.5 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Section:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:n})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Row:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.row||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Seat Number:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.seat_number||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Seat Type:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.seat_type||"STANDARD"})]})]})]}),t?c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[c.jsx("h4",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-gray-100",children:"Event Seat Status"}),c.jsxs("div",{className:"space-y-1.5 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),c.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:BV(t.status).fill+"20",color:BV(t.status).stroke,border:`1px solid ${BV(t.status).stroke}`},children:t.status})]}),(t.status===JI.HELD||t.status===JI.BLOCKED)&&t.attributes&&c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t.status===JI.HELD?"Hold":"Block"," ","Reason:"]}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 max-w-32 truncate",title:t.status===JI.HELD?t.attributes.hold_reason||"No reason provided":t.attributes.block_reason||"No reason provided",children:t.status===JI.HELD?t.attributes.hold_reason||"No reason provided":t.attributes.block_reason||"No reason provided"})]}),t.ticket_number&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Ticket Number:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.ticket_number})]}),void 0!==t.ticket_price&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Ticket Price:"}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:["$",t.ticket_price.toFixed(2)]})]}),t.broker_id&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Broker ID:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.broker_id})]})]})]}):c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No event seat assigned"})})]})})}function XV({layout:e,layoutSeats:t,sections:n,seatStatusMap:a,locationStatusMap:s,imageUrl:r,isLoading:i=!1,className:o,onSeatClick:l,selectedSeatIds:d=new Set,selectedSectionId:u,onSelectedSectionIdChange:h,showLegend:m=!0}){const f=p.useRef(null),g=p.useRef(null),[x,v]=p.useState(null),[y,b]=p.useState(null),[w,S]=p.useState(null),[j,C]=p.useState(null),[k,N]=p.useState(null),_=void 0!==u?u:k,E=h||N,[P,A]=p.useState(null),[R,T]=p.useState(!1),M=p.useMemo(()=>{const e=new Map;return n.forEach(t=>{e.set(t.id,t.name)}),e},[n]),D=function(e,t,n,a,s,r){return p.useMemo(()=>{if("section-level"!==e.design_mode)return new Map;const r=new Map;return t.forEach(e=>{const t=n.filter(t=>t.section_id===e.id),i=[];t.forEach(t=>{if(t.id&&a.has(t.id))i.push(a.get(t.id));else if(t.row&&t.seat_number){const n=`${e.name}|${t.row}|${t.seat_number}`,a=s.get(n);a&&i.push(a)}});const o={};Object.values(JI).forEach(e=>{o[e]=0}),i.forEach(e=>{const t=e.status;o[t]=(o[t]||0)+1}),r.set(e.id,{section:e,totalSeats:t.length,eventSeats:i,statusCounts:o,eventSeatCount:i.length})}),r},[e.design_mode,t,n,a,s,r])}(e,n,t,a,s,M),{hoveredSeatPosition:L,setHoveredSeatPosition:F,updatePopoverPosition:I}=function({containerRef:e}){const[t,n]=p.useState(null),a=p.useCallback(t=>{const a=t.target.getParent(),r=t.evt,i=t.target.getStage();if(a&&i&&e.current)try{const t=e.current.getBoundingClientRect(),s=a.getClientRect(),r=t.left+s.x,i=t.top+s.y,o=320,l=200,c=15;let d=r+s.width+c,u=i+s.height/2-l/2;const h=window.innerWidth,m=window.innerHeight;d+o>h&&(d=r-o-c),d<0&&(d=Math.max(c,r+s.width+c),d+o>h&&(d=h-o-c)),u+l>m&&(u=m-l-c),u<0&&(u=c),n({x:d,y:u})}catch(o){s(r)}else s(r)},[e]),s=e=>{let t=e.clientX+20,a=e.clientY-100;t+320>window.innerWidth&&(t=e.clientX-320-20),a<0&&(a=10),n({x:t,y:a})};return{hoveredSeatPosition:t,setHoveredSeatPosition:n,updatePopoverPosition:a}}({containerRef:f}),O=p.useMemo(()=>_&&n.find(e=>e.id===_)||null,[_,n]),z=p.useMemo(()=>O?.canvas_background_color?O.canvas_background_color:e.canvas_background_color?e.canvas_background_color:mV,[O,e.canvas_background_color]),B=p.useMemo(()=>O?O.image_url||void 0:r,[O,r]),$=p.useMemo(()=>"section-level"===e.design_mode&&_?t.filter(e=>e.section_id===_):t,[e.design_mode,_,t]);p.useEffect(()=>{if(!B)return A(null),void T(!0);T(!1);const e=new window.Image;e.crossOrigin="anonymous",e.onload=()=>{A(e),T(!0)},e.onerror=()=>{A(null),T(!1)},e.src=B},[B]);const U=!!P&&!!P.width&&!!P.height,V=!i&&(!B||R&&U),q=function(e,t={}){const n={...kz,...t},[a,s]=p.useState({width:800,height:600}),r=p.useRef(null),i=p.useRef(n.resetLockKey);return i.current!==n.resetLockKey&&(i.current=n.resetLockKey,r.current=null),p.useEffect(()=>{const t=e.current;if(!t||!n.enabled)return;const a=()=>{const e=t.getBoundingClientRect(),a=Math.floor(e.width)||800,i=Math.floor(e.height)||600;if(!(a<=0||i<=0)){if(n.lockFirstSize)return r.current||(r.current={width:a,height:i}),void s(r.current);r.current=null,n.dimensionDeltaThreshold>0?s(e=>{const t=Math.abs(e.width-a),s=Math.abs(e.height-i);return t<=n.dimensionDeltaThreshold&&s<=n.dimensionDeltaThreshold?e:{width:a,height:i}}):s({width:a,height:i})}};let i;a();const o=new ResizeObserver(()=>{n.throttleMs>0?(clearTimeout(i),i=setTimeout(a,n.throttleMs)):a()});return o.observe(t),()=>{clearTimeout(i),o.disconnect()}},[e,n.enabled,n.lockFirstSize,n.dimensionDeltaThreshold,n.throttleMs]),a}(f,{enabled:V,lockFirstSize:!U,resetLockKey:`${e.id}-${U}`}),{zoomLevel:H,setZoomLevel:G,handleZoomIn:K,handleZoomOut:W,handleResetZoom:Q}=Ez({minZoom:.1,maxZoom:5,zoomFactor:1.2}),{panOffset:Y,setPanOffset:X,isSpacePressed:Z,isPanning:J,handleMouseDown:ee,handleMouseMove:te,handleMouseUp:ne,handleMouseLeave:ae,resetPan:se}=Pz(),re=p.useCallback(()=>{Q(),se()},[Q,se]),ie=p.useCallback(()=>{h?h(null):N(null),re()},[h,re]),oe=p.useCallback((e,t)=>{if(!t)return;e.evt.preventDefault();const n=g.current;if(!n)return;const a=n.getPointerPosition();if(!a)return;const s=(q.width>0?q.width:800)/2,r=(q.height>0?q.height:600)/2,i=H,o=e.evt.deltaY>0?i/1.1:1.1*i,l=Math.max(.1,Math.min(5,o)),c=(a.x-(s+Y.x))/i+s,d=(a.y-(r+Y.y))/i+r,u=a.x-s-(c-s)*l,h=a.y-r-(d-r)*l;G(l),X({x:u,y:h})},[H,Y,q,G,X]),le=q.width>0?q.width:800,ce=q.height>0?q.height:600,de=U?P.height/P.width:.75,{displayedWidth:ue,displayedHeight:he,imageX:me,imageY:pe,centerX:fe,centerY:ge,percentageToStage:xe}=Nz({containerWidth:le,containerHeight:ce,contentAspectRatio:de});return c.jsx("div",{className:sl("relative border rounded-lg bg-gray-100",U?"overflow-hidden":"overflow-auto",o),style:{minHeight:"600px",height:"70vh"},children:V?c.jsxs(c.Fragment,{children:[c.jsx(GV,{containerRef:f,stageRef:g,validWidth:le,validHeight:ce,centerX:fe,centerY:ge,imageX:me,imageY:pe,displayedWidth:ue,displayedHeight:he,image:P,zoomLevel:H,panOffset:Y,isSpacePressed:Z,isPanning:J,hoveredSeatId:x,layout:e,selectedSectionId:_,sections:n,sectionStats:D,displayedSeats:$,seatStatusMap:a,locationStatusMap:s,sectionNameMap:M,selectedSeatIds:d,hoveredSectionId:w,percentageToStage:xe,onWheel:oe,onMouseDown:ee,onMouseMove:te,onMouseUp:ne,onMouseLeave:ae,setHoveredSectionId:S,setHoveredSectionData:C,setHoveredSeatPosition:F,setHoveredSeatId:v,setHoveredSeatData:b,updatePopoverPosition:I,setSelectedSectionId:E,setZoomLevel:G,setPanOffset:X,onSeatClick:l,canvasBackgroundColor:z}),"section-level"===e.design_mode&&_&&O&&c.jsx(WV,{section:O,onBack:ie,className:"absolute top-4 left-4"}),c.jsx(gz,{zoomLevel:H,panOffset:Y,onZoomIn:K,onZoomOut:W,onResetZoom:re}),m&&!("section-level"===e.design_mode&&_)&&c.jsx(KV,{className:"absolute top-4 left-4"}),"section-level"===e.design_mode&&!_&&w&&L&&j&&Zt.createPortal(c.jsx(QV,{section:j.section,seatCount:j.seatCount,eventSeatCount:j.eventSeatCount,statusSummary:j.statusSummary,x:L.x,y:L.y}),document.body),("section-level"!==e.design_mode||_)&&x&&L&&y&&Zt.createPortal(c.jsx(YV,{seat:y.seat,eventSeat:y.eventSeat,sectionName:y.seat.section_name||M.get(y.seat.section_id)||"N/A",x:L.x,y:L.y}),document.body)]}):c.jsx("div",{style:{width:le,height:ce,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:c.jsx("div",{className:"text-muted-foreground",children:"Loading seats..."})})})}function ZV({isOpen:e,onOpenChange:t,availableSeatIds:n,action:a,onConfirm:s,isLoading:r=!1}){const[i,o]=p.useState(""),l="hold"===a?"Hold":"unhold"===a?"Unhold":"unblock"===a?"Unblock":"Block",d=c.jsxs("div",{className:"space-y-4",children:["unhold"!==a&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"reason",className:"text-sm font-medium",children:"Reason (Optional)"}),c.jsx(Dl,{id:"reason",placeholder:`Enter reason for ${a.toLowerCase()}ing seats...`,value:i,onChange:e=>o(e.target.value),className:"min-h-[80px] resize-none",disabled:r}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["This reason will be visible to administrators and can help track why seats were ",a.toLowerCase(),"ed."]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(bl,{type:"button",variant:"outline",onClick:()=>{o(""),t(!1)},disabled:r,children:"Cancel"}),c.jsx(bl,{type:"button",onClick:()=>{const e=i.trim();s(e||void 0),o("")},disabled:r,variant:"block"===a?"destructive":"default",size:"default",children:r?"Processing...":`${l} ${n.size} Seat${1!==n.size?"s":""}`})]})]});return c.jsx(bA,{open:e,onOpenChange:t,title:`${l} ${n.size} Seat${1!==n.size?"s":""}`,description:"hold"===a?`These ${n.size} available seat${1!==n.size?"s":""} will be temporarily held and cannot be sold. You can provide an optional reason for the hold.`:"unhold"===a?`These ${n.size} held seat${1!==n.size?"s":""} will be released and become available for sale again.`:"unblock"===a?`These ${n.size} blocked seat${1!==n.size?"s":""} will be unblocked and become available for sale again.`:`These ${n.size} available seat${1!==n.size?"s":""} will be blocked and permanently unavailable for sale. You can provide an optional reason for the block.`,footer:d,className:"sm:max-w-[500px]"})}function JV({eventSeats:e,isLoading:t=!1,onRefresh:n,onDelete:a,onDeleteSeat:s,onCreateTickets:r,onHoldSeats:i,onUnholdSeats:o,onUnblockSeats:l,onBlockSeats:d,className:u,onSeatSelect:h,selectedSeatIds:m,showSelection:f=!0,onAddToBooking:g,showAddToBooking:x=!1,bookedSeatIds:v=new Set}){const[y,b]=p.useState(""),[w,S]=p.useState("available"),[j,C]=p.useState(new Set),k=[{value:"available",label:"Available",icon:Yp},{value:"reserved",label:"Reserved",icon:Hp},{value:"held",label:"Held",icon:pg},{value:"blocked",label:"Blocked",icon:Fp},{value:"sold",label:"Sold",icon:nx}],[N,_]=p.useState(""),[E,P]=p.useState(new Set),A=x?E:void 0!==m?m:E;p.useEffect(()=>{void 0===m?P(new Set):h&&e.forEach(e=>{A.has(e.id)&&h(e,!1)})},[w]);const[R,T]=p.useState(!1),[M,D]=p.useState(!1),[L,F]=p.useState(!1),[I,O]=p.useState(!1),[z,B]=p.useState("0"),[$,U]=p.useState([]),[V,q]=p.useState(!1),[H,G]=p.useState("hold"),[K,W]=p.useState(!1),Q=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{e.section_name&&t.add(e.section_name)}),Array.from(t).sort()},[e]),Y=p.useMemo(()=>{if(!N.trim())return Q;const e=N.toLowerCase();return Q.filter(t=>t.toLowerCase().includes(e))},[Q,N]),X=p.useMemo(()=>e.filter(e=>{if(e.status!==w)return!1;if(j.size>0&&e.section_name&&!j.has(e.section_name))return!1;if(!y.trim())return!0;const t=y.toLowerCase();return e.section_name?.toLowerCase().includes(t)||e.row_name?.toLowerCase().includes(t)||e.seat_number?.toLowerCase().includes(t)||e.ticket_number?.toLowerCase().includes(t)||!1}),[e,w,j,y]),Z=p.useMemo(()=>{const e=new Map;X.forEach(t=>{const n=t.section_name||"Unknown Section";e.has(n)||e.set(n,[]),e.get(n).push(t)});return Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0]))},[X]),J=e=>{if(e.ticket_status){switch(String(e.ticket_status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"CONFIRMED":return"border-l-4 border-l-blue-500";case"CANCELLED":return"border-l-4 border-l-red-500";case"USED":return"border-l-4 border-l-gray-500";case"TRANSFERRED":return"border-l-4 border-l-purple-500"}}switch(String(e.status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"SOLD":return"border-l-4 border-l-blue-500";case"HELD":return"border-l-4 border-l-purple-500";case"BLOCKED":return"border-l-4 border-l-red-500";default:return"border-l-4 border-l-gray-500"}},ee=e=>{if(e.ticket_status){return"AVAILABLE"===String(e.ticket_status).toUpperCase().trim()}return"AVAILABLE"===String(e.status).toUpperCase().trim()},te=e=>{const t=String(e.status).toUpperCase().trim();if("HELD"===t||"BLOCKED"===t)return!1;if(e.ticket_status){return"AVAILABLE"===String(e.ticket_status).toUpperCase().trim()}return"AVAILABLE"===t},ne=(e,t)=>{const n="held"===e||"blocked"===e?e:t||e,a=String(n).toUpperCase().trim();return c.jsx(NC,{variant:{AVAILABLE:"outline",RESERVED:"outline",SOLD:"default",CONFIRMED:"default",CANCELLED:"destructive",USED:"secondary",TRANSFERRED:"outline",HELD:"outline",BLOCKED:"destructive"}[a]||"outline",className:{AVAILABLE:"bg-green-50 text-green-700 border-green-200",RESERVED:"bg-yellow-50 text-yellow-700 border-yellow-200",SOLD:"bg-blue-50 text-blue-700 border-blue-200",CONFIRMED:"bg-blue-50 text-blue-700 border-blue-200",CANCELLED:"bg-red-50 text-red-700 border-red-200",USED:"bg-gray-50 text-gray-700 border-gray-200",TRANSFERRED:"bg-purple-50 text-purple-700 border-purple-200",HELD:"bg-purple-50 text-purple-700 border-purple-200",BLOCKED:"bg-red-50 text-red-700 border-red-200"}[a]||"bg-gray-50 text-gray-700 border-gray-200",children:n})},ae=(e,t)=>{if(ee(e)&&!v.has(e.id))if(x){const n=new Set(E);t?n.add(e.id):n.delete(e.id),P(n)}else if(h)h(e,t);else if(void 0===m){const n=new Set(E);t?n.add(e.id):n.delete(e.id),P(n)}},se=()=>{if(0===A.size)return;const t=Array.from(A).filter(t=>{const n=e.find(e=>e.id===t);return n&&"available"===n.status});0!==t.length&&(void 0===m?P(new Set(t)):h&&A.forEach(t=>{const n=e.find(e=>e.id===t);if(!n||"available"!==n.status){const n=e.find(e=>e.id===t);n&&h(n,!1)}}),T(!0))},re=()=>{if(0===A.size||!r)return;const t=Array.from(A).filter(t=>{const n=e.find(e=>e.id===t);return n&&!n.ticket_number});0!==t.length&&(U(t),O(!0))},ie=()=>{0!==A.size&&i&&(G("hold"),q(!0))},oe=()=>{0!==A.size&&o&&(G("unhold"),q(!0))},le=()=>{0!==A.size&&l&&(G("unblock"),q(!0))},ce=()=>{0!==A.size&&d&&(G("block"),q(!0))},de=p.useMemo(()=>X.filter(e=>{if(e.ticket_status){if("AVAILABLE"!==String(e.ticket_status).toUpperCase().trim())return!1}else{if("AVAILABLE"!==String(e.status).toUpperCase().trim())return!1}return!v.has(e.id)}),[X,v]),ue=de.length>0&&A.size===de.length;return t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading seats..."})}):0===e.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx("p",{className:"text-muted-foreground mb-4",children:"No seats found"}),n&&c.jsxs(bl,{onClick:n,variant:"outline",size:"sm",children:[c.jsx(Ag,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}):c.jsxs("div",{className:sl("space-y-4 min-w-0",u),children:[c.jsx(UD,{tabs:k,value:w,onValueChange:e=>S(e),className:"mb-4"}),c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-wrap",children:[c.jsxs("div",{className:"relative flex-1 min-w-0 max-w-xs",children:[c.jsx(Ig,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none z-10"}),c.jsx(_l,{placeholder:"Search seats...",value:y,onChange:e=>b(e.target.value),className:"pl-8 h-8 text-sm min-w-0"})]}),c.jsxs(wE,{children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",size:"sm",className:"h-7 px-2 flex-shrink-0 justify-start gap-1",children:[c.jsx(Ef,{className:"h-3 w-3"}),c.jsx("span",{className:"text-[10px] whitespace-nowrap",children:0===j.size?"Sections":1===j.size?Array.from(j)[0].slice(0,8):`${j.size}`}),j.size>0&&c.jsx(NC,{variant:"secondary",className:"rounded-sm px-0.5 py-0 text-[9px] font-normal h-3 ml-0.5",children:j.size})]})}),c.jsx(jE,{className:"w-[250px] p-0",align:"start",children:c.jsxs(RN,{children:[c.jsx(MN,{placeholder:"Search sections...",value:N,onValueChange:_}),c.jsxs(DN,{children:[c.jsx(LN,{children:"No sections found."}),c.jsx(FN,{children:Y.map(e=>{const t=j.has(e);return c.jsxs(ON,{onSelect:()=>(e=>{const t=new Set(j);t.has(e)?t.delete(e):t.add(e),C(t)})(e),children:[c.jsx("div",{className:sl("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",t?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:c.jsx(Yp,{className:"h-3 w-3"})}),c.jsx("span",{children:e})]},e)})}),j.size>0&&c.jsxs(c.Fragment,{children:[c.jsx(sC,{}),c.jsx(FN,{children:c.jsx(ON,{onSelect:()=>{C(new Set)},className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]}),n&&c.jsx(bl,{onClick:n,variant:"outline",size:"sm",className:"flex-shrink-0 h-7 px-2",children:c.jsx(Ag,{className:"h-3 w-3"})})]}),A.size>0&&(()=>{const t=Array.from(A),n=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&"available"===n.status}),u=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&!n.ticket_number}),h=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&"held"===n.status}),m=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&"blocked"===n.status}),p=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&te(n)}),f=x&&g&&A.size>0,y=r&&u.length>0,b=i&&p.length>0,w=d&&p.length>0,S=o&&h.length>0,j=l&&m.length>0,C=(a||s)&&n.length>0;return f||y||b||w||S||j||C?c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 rounded-lg border border-primary/20 min-w-0",children:[c.jsxs("span",{className:"text-sm font-medium truncate flex-shrink-0 min-w-0",children:[A.size," seat",1!==A.size?"s":""," selected"]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 flex-wrap",children:[f&&c.jsx(bl,{variant:"default",size:"sm",onClick:()=>{if(g&&A.size>0){const e=Array.from(A).filter(e=>!v.has(e));e.length>0&&(g(e),P(new Set))}},className:"h-7 w-7 p-0",title:`Add ${A.size} seat${1!==A.size?"s":""} to booking`,disabled:0===A.size||Array.from(A).every(e=>v.has(e)),children:c.jsx(Ug,{className:"h-4 w-4"})}),y&&c.jsx(bl,{variant:"outline",size:"sm",onClick:re,disabled:L,className:"h-7 w-7 p-0",title:`Create tickets for ${u.length} seat${1!==u.length?"s":""} without tickets`,children:c.jsx(nx,{className:sl("h-4 w-4",L&&"animate-spin")})}),c.jsxs("div",{className:"flex items-center gap-1",children:[b&&c.jsx(bl,{variant:"outline",size:"sm",onClick:ie,disabled:K,className:"h-7 w-7 p-0 border-orange-300 text-orange-700 hover:bg-orange-100",title:`Hold ${p.length} seat${1!==p.length?"s":""}`,children:c.jsx(pg,{className:"h-4 w-4"})}),w&&c.jsx(bl,{variant:"outline",size:"sm",onClick:ce,disabled:K,className:"h-7 w-7 p-0 border-orange-300 text-orange-700 hover:bg-orange-100",title:`Block ${p.length} seat${1!==p.length?"s":""}`,children:c.jsx(Fp,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[S&&c.jsx(bl,{variant:"outline",size:"sm",onClick:oe,disabled:K,className:"h-7 w-7 p-0 border-green-300 text-green-700 hover:bg-green-100",title:`Unhold ${h.length} seat${1!==h.length?"s":""}`,children:c.jsx(Sg,{className:"h-4 w-4"})}),j&&c.jsx(bl,{variant:"outline",size:"sm",onClick:le,disabled:K,className:"h-7 w-7 p-0 border-blue-300 text-blue-700 hover:bg-blue-100",title:`Unblock ${m.length} seat${1!==m.length?"s":""}`,children:c.jsx(Sg,{className:"h-4 w-4"})})]}),C&&c.jsx(bl,{variant:"destructive",size:"sm",onClick:se,className:"h-7 w-7 p-0",title:`Delete ${n.length} available seat${1!==n.length?"s":""}`,children:c.jsx(ax,{className:"h-4 w-4"})})]})]})}):null})(),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",X.length," of ",e.length," seats"]}),X.length>0&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(VC,{id:"select-all",checked:ue,onCheckedChange:e=>{if(x)if(e){const e=X.filter(e=>ee(e)&&!v.has(e.id)).map(e=>e.id);P(new Set(e))}else P(new Set);else if(void 0!==m)X.forEach(t=>{ee(t)&&!v.has(t.id)&&h&&h(t,e)});else if(e){const e=X.filter(e=>ee(e)&&!v.has(e.id)).map(e=>e.id);P(new Set(e))}else P(new Set)},disabled:0===de.length}),c.jsx("label",{htmlFor:"select-all",className:sl("text-sm text-muted-foreground",de.length>0&&"cursor-pointer"),children:"Select all"})]})]}),c.jsx("div",{className:"space-y-4 min-w-0",children:Z.map(([t,n])=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b pb-2 pt-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.length," seat",1!==n.length?"s":""]})]})}),c.jsx("div",{className:"space-y-2 pl-2",children:n.map(t=>{const n=t.row_name&&t.seat_number?`${t.row_name} ${t.seat_number}`:t.seat_id?`Seat ${t.seat_id.slice(0,8)}`:"N/A",a=void 0!==t.ticket_price&&null!==t.ticket_price?`Price: $${t.ticket_price.toFixed(2)}`:null,s=[t.broker_id&&`Broker: ${t.broker_id}`,t.ticket_number&&`Ticket: ${t.ticket_number}`,a].filter(Boolean).join("  "),r=A.has(t.id),u=v.has(t.id),p=ee(t),y=!p||u;return c.jsxs(xP,{onClick:()=>{y||ae(t,!r)},className:sl(r&&"bg-accent/50 border-primary",y&&"opacity-60 cursor-not-allowed",J(t),"min-w-0"),children:[f&&c.jsx(SP,{className:"flex-shrink-0",children:c.jsx(VC,{checked:r,onCheckedChange:e=>{y||ae(t,e)},onClick:e=>e.stopPropagation(),disabled:y})}),c.jsx(yP,{className:"min-w-0",children:c.jsxs("div",{className:"flex items-start justify-between gap-4 min-w-0",children:[c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(bP,{className:"truncate",children:n}),ne(t.status,t.ticket_status)]}),s&&c.jsx(wP,{className:"truncate",children:s})]}),c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[x&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),g&&!y&&g([t.id])},className:"h-7 w-7 p-0","aria-label":"Add to booking",title:u?"Already in booking":p?"Add to booking":"Seat not available",disabled:y,children:c.jsx(jg,{className:"h-4 w-4"})}),!x&&i&&te(t)&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("hold"),q(!0),void 0===m?P(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&A.has(e.id)?h(e,!1):e.id!==t.id||A.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-orange-600 hover:text-orange-700 hover:bg-orange-50","aria-label":"Hold seat",title:"Temporarily hold this seat",disabled:K,children:c.jsx(pg,{className:"h-4 w-4"})}),!x&&o&&"held"===t.status&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("unhold"),q(!0),void 0===m?P(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&A.has(e.id)?h(e,!1):e.id!==t.id||A.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-green-600 hover:text-green-700 hover:bg-green-50","aria-label":"Unhold seat",title:"Release this held seat",disabled:K,children:c.jsx(Sg,{className:"h-4 w-4"})}),!x&&l&&"blocked"===t.status&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("unblock"),q(!0),void 0===m?P(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&A.has(e.id)?h(e,!1):e.id!==t.id||A.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50","aria-label":"Unblock seat",title:"Unblock this blocked seat",disabled:K,children:c.jsx(Sg,{className:"h-4 w-4"})}),!x&&d&&te(t)&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("block"),q(!0),void 0===m?P(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&A.has(e.id)?h(e,!1):e.id!==t.id||A.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50","aria-label":"Block seat",title:"Permanently block this seat",disabled:K,children:c.jsx(Fp,{className:"h-4 w-4"})})]})]})})]},t.id)})})]},t))}),c.jsx(bA,{open:R,onOpenChange:T,title:"Delete Seats",description:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to delete ",A.size," available seat",1!==A.size?"s":"","? Only available seats can be deleted. This action cannot be undone."]}),A.size<=5&&c.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[c.jsx("p",{className:"font-medium mb-1",children:"Seats to be deleted:"}),c.jsx("ul",{className:"list-disc list-inside space-y-1",children:Array.from(A).map(t=>{const n=e.find(e=>e.id===t),a=n?n.section_name&&n.row_name&&n.seat_number?`${n.section_name} ${n.row_name} ${n.seat_number}`:n.seat_id?`Seat ${n.seat_id.slice(0,8)}`:t:t;return c.jsx("li",{children:a},t)})})]})]}),confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmTextPlaceholder:"delete",confirmAction:{label:"Delete",type:"delete",variant:"destructive",onClick:async()=>{if(0!==A.size){D(!0);try{a?await a(Array.from(A)):s&&1===A.size&&await s(Array.from(A)[0]),void 0===m?P(new Set):h&&e.forEach(e=>{A.has(e.id)&&h(e,!1)}),T(!1)}catch(t){}finally{D(!1)}}},loading:M,disabled:M},cancelAction:{label:"Cancel",onClick:()=>T(!1),disabled:M}}),c.jsx(bA,{open:I,onOpenChange:e=>{O(e),e||(B("0"),U([]))},title:"Create Tickets",description:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Create tickets for ",$.length," selected seat",1!==$.length?"s":""," without tickets."]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"ticket-price-input",children:"Ticket Price (per ticket)"}),c.jsx(_l,{id:"ticket-price-input",type:"number",step:"0.01",min:"0",value:z,onChange:e=>B(e.target.value),placeholder:"0.00",disabled:L}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"This price will be applied to all tickets. You can change individual ticket prices later."})]})]}),confirmAction:{label:"Create Tickets",variant:"default",onClick:async()=>{if(0===$.length||!r)return;const t=parseFloat(z)||0;F(!0),O(!1);try{if(await r($,t),void 0===m){const e=new Set(E);$.forEach(t=>e.delete(t)),P(e)}else h&&$.forEach(t=>{const n=e.find(e=>e.id===t);n&&h(n,!1)});U([]),B("0")}catch(n){}finally{F(!1)}},loading:L,disabled:L},cancelAction:{label:"Cancel",onClick:()=>{O(!1),B("0"),U([])},disabled:L}}),c.jsx(ZV,{isOpen:V,onOpenChange:q,availableSeatIds:A,action:H,onConfirm:async t=>{if(0!==A.size){W(!0),q(!1);try{const n=Array.from(A);"hold"===H&&i?await i(n,t):"unhold"===H&&o?await o(n):"unblock"===H&&l?await l(n):"block"===H&&d&&await d(n,t),void 0===m?P(new Set):h&&e.forEach(e=>{A.has(e.id)&&h(e,!1)})}catch(n){}finally{W(!1)}}},isLoading:K})]})}const eq={[XI.DRAFT]:[XI.PUBLISHED,XI.CANCELLED],[XI.PUBLISHED]:[XI.ON_SALE,XI.CANCELLED],[XI.ON_SALE]:[XI.SOLD_OUT,XI.COMPLETED,XI.CANCELLED],[XI.SOLD_OUT]:[XI.ON_SALE,XI.COMPLETED,XI.CANCELLED],[XI.CANCELLED]:[],[XI.COMPLETED]:[]},tq={[XI.DRAFT]:"Draft",[XI.PUBLISHED]:"Published",[XI.ON_SALE]:"On Sale",[XI.SOLD_OUT]:"Sold Out",[XI.CANCELLED]:"Cancelled",[XI.COMPLETED]:"Completed"},nq={[XI.DRAFT]:"Event is in draft mode. Seats can be added or removed.",[XI.PUBLISHED]:"Event is published but not yet on sale. Seats can be held or blocked.",[XI.ON_SALE]:"Event is on sale. Customers can book seats.",[XI.SOLD_OUT]:"Event is sold out. No more bookings available.",[XI.CANCELLED]:"Event has been cancelled.",[XI.COMPLETED]:"Event has been completed."},aq=e=>{switch(e){case XI.DRAFT:return"bg-gray-100 text-gray-800 border-gray-300";case XI.PUBLISHED:return"bg-blue-100 text-blue-800 border-blue-300";case XI.ON_SALE:return"bg-green-100 text-green-800 border-green-300";case XI.SOLD_OUT:return"bg-yellow-100 text-yellow-800 border-yellow-300";case XI.CANCELLED:return"bg-red-100 text-red-800 border-red-300";case XI.COMPLETED:return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};function sq({open:e,onOpenChange:t,currentStatus:n,onConfirm:a,loading:s=!1,eventTitle:r}){const[i,o]=p.useState(null),l=eq[n]||[],d=l.length>0,u=()=>{o(null),t(!1)};return c.jsx(ub,{open:e,onOpenChange:u,children:c.jsxs(pb,{className:"sm:max-w-[500px]",children:[c.jsxs(fb,{children:[c.jsx(xb,{children:"Change Event Status"}),c.jsxs(vb,{children:[r&&c.jsx("span",{className:"block mb-2 font-medium text-foreground",children:r}),"Update the status of this event. Status changes affect what actions can be performed on the event."]})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{children:"Current Status"}),c.jsxs("div",{className:`inline-flex items-center gap-2 rounded-md border px-3 py-2 text-sm font-medium ${aq(n)}`,children:[c.jsx(of,{className:"h-4 w-4"}),tq[n]]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:nq[n]})]}),d?c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"new-status",children:"New Status"}),c.jsxs(bx,{value:i||"",onValueChange:e=>o(e),children:[c.jsx(Sx,{id:"new-status",children:c.jsx(wx,{placeholder:"Select new status"})}),c.jsx(kx,{children:l.map(e=>c.jsx(Nx,{value:e,children:tq[e]},e))})]}),i&&c.jsx("p",{className:"text-sm text-muted-foreground",children:nq[i]})]}):c.jsxs(il,{variant:"default",children:[c.jsx(sf,{className:"h-4 w-4"}),c.jsxs(ol,{children:["No status transitions available from the current status."," ",n===XI.CANCELLED?"Cancelled events cannot be changed.":"Completed events cannot be changed."]})]}),i===XI.CANCELLED&&c.jsxs(il,{variant:"destructive",children:[c.jsx(sf,{className:"h-4 w-4"}),c.jsxs(ol,{children:[c.jsx("strong",{children:"Warning:"})," Cancelling an event cannot be undone. All bookings will need to be handled manually."]})]})]}),c.jsxs(gb,{children:[c.jsx(bl,{type:"button",variant:"outline",onClick:u,disabled:s,children:"Cancel"}),c.jsx(bl,{type:"button",onClick:async()=>{i&&(await a(i),o(null),t(!1))},disabled:!i||s,variant:i===XI.CANCELLED?"destructive":"default",children:s?"Updating...":"Change Status"})]})]})})}function rq({eventId:e,className:t}){const n=rO(),a=EO(),[s,r]=p.useState(!1),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(new Set),[g,x]=p.useState(!1),[v,y]=p.useState("hold"),[b,w]=p.useState(!1),[S,j]=p.useState(!1),{data:C,isLoading:k,error:N}=oO(n,e),{data:_,isLoading:E,error:P}=AO(a,C?.layout_id||null),{data:A,isLoading:R,refetch:T}=uO(n,e,{skip:0,limit:1e3}),{data:M}=lO(n,e),D=Va(),[L,F]=p.useState(!1),I=p.useCallback(async()=>{F(!0);try{await Promise.all([D.refetchQueries({queryKey:["events",e]}),C?.layout_id?D.refetchQueries({queryKey:["layouts",C.layout_id,"with-seats"]}):Promise.resolve()])}finally{F(!1)}},[D,e,C?.layout_id]),O=function(e){const t=Va();return Xa({mutationFn:({eventId:t,generateTickets:n,ticketPrice:a,pricingMode:s,sectionPricing:r,seatPricing:i,includedSectionIds:o,excludedSectionIds:l})=>e.initializeEventSeats(t,{generate_tickets:n,ticket_price:a,pricing_mode:s,section_pricing:r,seat_pricing:i,included_section_ids:o,excluded_section_ids:l}),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),z=function(e){const t=Va();return Xa({mutationFn:({eventId:t,seatIds:n})=>e.deleteEventSeats(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),B=function(e){const t=Va();return Xa({mutationFn:({eventId:t,seatIds:n,ticketPrice:a})=>e.createTicketsFromSeats(t,n,a),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),$=function(e){const t=Va();return Xa({mutationFn:({eventId:t,input:n})=>e.createEventSeat(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),U=function(e){const t=Va();return Xa({mutationFn:({eventId:t,seatIds:n,reason:a})=>e.holdEventSeats(t,n,a),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),V=function(e){const t=Va();return Xa({mutationFn:({eventId:t,seatIds:n})=>e.unholdEventSeats(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),q=function(e){const t=Va();return Xa({mutationFn:({eventId:t,seatIds:n})=>e.unblockEventSeats(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),H=function(e){const t=Va();return Xa({mutationFn:({eventId:t,seatIds:n,reason:a})=>e.blockEventSeats(t,n,a),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),G=dO(n),K=A?.data||[],W=A?.pagination.total||0,Q=p.useMemo(()=>{const e=new Map;return K.forEach(t=>{t.seat_id&&e.set(t.seat_id,t)}),e},[K]),Y=p.useMemo(()=>{const e=new Map;return K.forEach(t=>{if(t.section_name&&t.row_name&&t.seat_number){const n=`${t.section_name}|${t.row_name}|${t.seat_number}`;e.set(n,t)}}),e},[K]),X=p.useMemo(()=>{if(!C||!C.layout_id||!_||"seat_setup"!==C.configuration_type)return!1;const e=_.seats;if(0===e.length)return!1;const t=new Set,n=new Set,a=new Map;return _.sections.forEach(e=>{a.set(e.id,e.name)}),K.forEach(e=>{if(e.seat_id&&t.add(e.seat_id),e.section_name&&e.row_name&&e.seat_number){const t=`${e.section_name}|${e.row_name}|${e.seat_number}`;n.add(t)}}),e.some(e=>{if(e.id&&t.has(e.id))return!1;const s=a.get(e.section_id);if(s&&e.row&&e.seat_number){const t=`${s}|${e.row}|${e.seat_number}`;if(n.has(t))return!1}return!0})},[C,_,K]);if((()=>{if(M)return{available:M.available_seats,reserved:M.reserved_seats,sold:M.sold_seats,held:M.held_seats,blocked:M.blocked_seats};const e={available:0,reserved:0,sold:0,held:0,blocked:0};K.forEach(t=>{e[t.status]=(e[t.status]||0)+1})})(),k)return c.jsx("div",{className:"container mx-auto py-6",children:c.jsx(Sl,{className:"p-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading event..."})})})});if(N)return c.jsx("div",{className:"container mx-auto py-6",children:c.jsx(Sl,{className:"p-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error loading event: ",N.message]})})})});if(!C)return c.jsx("div",{className:"container mx-auto py-6",children:c.jsx(Sl,{className:"p-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Event not found"})})})});const Z=!!C.layout_id,J=W>0,ee="seat_setup"===C.configuration_type&&Z&&!J,te=(e=>{switch(e){case XI.DRAFT:return{canAddSeats:!0,canDeleteSeats:!0,canHoldSeats:!1,canBlockSeats:!1,canBookSeats:!1,canUnholdSeats:!1,canUnblockSeats:!1,isReadOnly:!1};case XI.PUBLISHED:return{canAddSeats:!1,canDeleteSeats:!1,canHoldSeats:!0,canBlockSeats:!0,canBookSeats:!1,canUnholdSeats:!0,canUnblockSeats:!0,isReadOnly:!1};case XI.ON_SALE:return{canAddSeats:!1,canDeleteSeats:!1,canHoldSeats:!0,canBlockSeats:!1,canBookSeats:!0,canUnholdSeats:!0,canUnblockSeats:!1,isReadOnly:!1};case XI.SOLD_OUT:case XI.CANCELLED:case XI.COMPLETED:default:return{canAddSeats:!1,canDeleteSeats:!1,canHoldSeats:!1,canBlockSeats:!1,canBookSeats:!1,canUnholdSeats:!1,canUnblockSeats:!1,isReadOnly:!0}}})(C.status);return c.jsxs("div",{className:sl("container mx-auto py-6 space-y-6",t),children:[c.jsxs(Sl,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsx("h1",{className:"text-xl font-semibold",children:C.title}),c.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Hp,{className:"h-4 w-4"}),(e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()})(C.start_dt)]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(hf,{className:"h-4 w-4"}),(e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`})(C.duration_minutes)]}),C.layout_id&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jf,{className:"h-4 w-4"}),"Layout: ",_?.layout.name||"Loading..."]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[c.jsx(bl,{onClick:I,variant:"outline",size:"sm",className:"h-8 w-8 p-0",title:"Refresh (invalidate cache)",disabled:L,children:c.jsx(Ag,{className:sl("h-3.5 w-3.5",L&&"animate-spin")})}),c.jsxs(bl,{onClick:()=>j(!0),variant:"outline",size:"sm",className:sl("inline-flex items-center gap-1 rounded-md border px-2 py-1 text-xs font-medium",C.status===XI.DRAFT&&"bg-gray-100 text-gray-800 border-gray-300",C.status===XI.PUBLISHED&&"bg-blue-100 text-blue-800 border-blue-300",C.status===XI.ON_SALE&&"bg-green-100 text-green-800 border-green-300",C.status===XI.SOLD_OUT&&"bg-yellow-100 text-yellow-800 border-yellow-300",C.status===XI.CANCELLED&&"bg-red-100 text-red-800 border-red-300",C.status===XI.COMPLETED&&"bg-purple-100 text-purple-800 border-purple-300"),title:"Change event status",children:[c.jsx(fg,{className:"h-3.5 w-3.5"}),C.status.replace("_"," ").toUpperCase()]}),(ee||X)&&te.canAddSeats&&c.jsxs(bl,{onClick:async()=>{C?.id&&o(!0)},disabled:O.isPending,size:"sm",className:"gap-1.5 h-8 px-3",children:[c.jsx(Ag,{className:sl("h-3.5 w-3.5",O.isPending&&"animate-spin")}),ee?"Initialize Seats":"Add Seats"]}),J&&c.jsxs(c.Fragment,{children:[c.jsx(bl,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"h-8 w-8 p-0",title:"Scan tickets (webcam)",children:c.jsx(Lg,{className:"h-3.5 w-3.5"})}),c.jsx(bl,{onClick:()=>r(!0),disabled:m.size>0,variant:"outline",size:"sm",className:"h-8 w-8 p-0",title:`View Seat List (${W})`,children:c.jsx(Gf,{className:"h-3.5 w-3.5"})})]})]})]}),m.size>0&&!te.isReadOnly&&c.jsx("div",{className:"w-full bg-blue-50 border-t border-blue-200 mt-2 px-4 py-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-sm font-medium text-blue-700",children:(()=>{const e=Array.from(m).filter(e=>{const t=Q.get(e);return t?.status===JI.AVAILABLE}).length,t=m.size;return e===t?`${e} seat${1!==e?"s":""} selected`:`${e} of ${t} seat${1!==t?"s":""} available`})()}),c.jsx(bl,{onClick:()=>f(new Set),variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-100 ml-1",title:"Clear selection",children:c.jsx(xx,{className:"h-3 w-3"})})]})}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[te.canHoldSeats&&c.jsxs(bl,{onClick:()=>{y("hold"),x(!0)},disabled:U.isPending||Array.from(m).every(e=>{const t=Q.get(e);return t?.status!==JI.AVAILABLE}),size:"sm",className:"gap-1 h-7 px-2 bg-purple-600 hover:bg-purple-700 text-white font-medium text-xs shadow-sm hover:shadow-md transition-all duration-200 border border-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(pg,{className:"h-3 w-3"}),"Hold"]}),te.canBlockSeats&&c.jsxs(bl,{onClick:()=>{y("block"),x(!0)},disabled:H.isPending||Array.from(m).every(e=>{const t=Q.get(e);return t?.status!==JI.AVAILABLE}),size:"sm",className:"gap-1 h-7 px-2 bg-red-600 hover:bg-red-700 text-white font-medium text-xs shadow-sm hover:shadow-md transition-all duration-200 border border-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Fp,{className:"h-3 w-3"}),"Block"]})]})]})})]}),!Z&&"seat_setup"===C.configuration_type&&c.jsx(Sl,{className:"p-4 border-yellow-200 bg-yellow-50",children:c.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[c.jsx(sf,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"This event requires a layout to manage seat inventory. Please assign a layout to the event first."})]})}),"ticket_import"===C.configuration_type&&!J&&c.jsx(Sl,{className:"p-4 border-blue-200 bg-blue-50",children:c.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[c.jsx(lx,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"This event uses ticket import. Import broker tickets to manage inventory."})]})}),Z&&c.jsx(Sl,{className:"p-6",children:E?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading layout..."})}):P?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error loading layout:"," ",P instanceof Error?P.message:"Unknown error"]})}):_?c.jsx(XV,{layout:_.layout,layoutSeats:_.seats,sections:_.sections,eventSeats:K,seatStatusMap:Q,locationStatusMap:Y,imageUrl:_.layout.image_url,isLoading:R,selectedSectionId:u,onSelectedSectionIdChange:h,selectedSeatIds:m,onSeatClick:(e,t)=>{if(te.isReadOnly)return;if(C?.status===XI.DRAFT){const t=m.has(e),n=new Set(m);return t?n.delete(e):n.add(e),void f(n)}if(t&&t.status!==JI.AVAILABLE)return;const n=m.has(e),a=new Set(m);n?a.delete(e):a.add(e),f(a)}}):c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Layout not found"})})}),c.jsx(CE,{open:s,onOpenChange:r,children:c.jsxs(EE,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0 overflow-hidden",style:{width:"600px",maxWidth:"740px"},children:[c.jsx(PE,{className:"px-6 pt-6 pb-4 ml-6 border-b flex-shrink-0",children:c.jsxs(RE,{children:["Seat List (",W,")"]})}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6 min-w-0",children:c.jsx(JV,{eventSeats:K,isLoading:R,onDelete:te.canDeleteSeats?async e=>{if(!C?.id||0===e.length)return;const t=e.filter(e=>{const t=K.find(t=>t.id===e);return t&&t.status===JI.AVAILABLE});if(0===t.length)throw new Error("No available seats to delete");try{await z.mutateAsync({eventId:C.id,seatIds:t}),await T()}catch(GQ){throw GQ}}:void 0,onCreateTickets:te.canBookSeats?async(e,t)=>{if(C?.id&&0!==e.length)try{await B.mutateAsync({eventId:C.id,seatIds:e,ticketPrice:t}),await T()}catch(GQ){throw GQ}}:void 0,onHoldSeats:te.canHoldSeats?async(e,t)=>{if(C?.id&&0!==e.length)try{await U.mutateAsync({eventId:C.id,seatIds:e,reason:t}),await T()}catch(GQ){throw GQ}}:void 0,onUnholdSeats:te.canUnholdSeats?async e=>{if(C?.id&&0!==e.length)try{await V.mutateAsync({eventId:C.id,seatIds:e}),await T()}catch(GQ){throw GQ}}:void 0,onUnblockSeats:te.canUnblockSeats?async e=>{if(C?.id&&0!==e.length)try{await q.mutateAsync({eventId:C.id,seatIds:e}),await T()}catch(GQ){throw GQ}}:void 0,onBlockSeats:te.canBlockSeats?async(e,t)=>{if(C?.id&&0!==e.length)try{await H.mutateAsync({eventId:C.id,seatIds:e,reason:t}),await T()}catch(GQ){throw GQ}}:void 0})})]})}),c.jsx(CE,{open:b,onOpenChange:w,children:c.jsxs(EE,{side:"right",className:"w-full sm:max-w-lg flex flex-col p-0 overflow-hidden",children:[c.jsx(PE,{className:"px-6 pt-6 pb-4 border-b flex-shrink-0",children:c.jsx(RE,{children:"Scan tickets"})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c.jsx(fz,{eventId:e,autoStart:!0,onScanSuccess:()=>T(),onClose:()=>w(!1)})})]})}),!Z&&c.jsx(Sl,{className:"p-6",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx(Jf,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Layout Assigned"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"This event does not have a layout assigned. Assign a layout to the event to manage seat inventory visually."})]})}),_&&c.jsx(lz,{open:i,onClose:()=>o(!1),onSubmit:async e=>{if(C?.id)try{await O.mutateAsync({eventId:C.id,generateTickets:e.generateTicketCodes,ticketPrice:e.defaultPrice,pricingMode:e.pricingMode,sectionPricing:e.sectionPricing,seatPricing:e.seatPricing,includedSectionIds:e.includedSectionIds,excludedSectionIds:e.excludedSectionIds}),await T(),o(!1)}catch(GQ){throw GQ}},layoutSeats:_.seats,sections:_.sections,existingEventSeats:K,loading:O.isPending,designMode:_.layout.design_mode,selectedSectionId:u}),c.jsx(cz,{open:l,onOpenChange:d,onSubmit:async e=>{if(C?.id)try{await $.mutateAsync({eventId:C.id,input:{seat_id:e.seat_id,section_name:e.section_name,row_name:e.row_name,seat_number:e.seat_number,broker_id:e.broker_id,create_ticket:e.create_ticket,ticket_price:e.ticket_price,ticket_number:e.ticket_number}}),await T(),d(!1)}catch(GQ){throw GQ}},loading:$.isPending}),c.jsx(ZV,{isOpen:g,onOpenChange:x,availableSeatIds:new Set(Array.from(m).filter(e=>{const t=Q.get(e);return"unhold"===v?t?.status===JI.HELD:t?.status===JI.AVAILABLE})),action:v,onConfirm:e=>{"hold"===v?(async e=>{if(!C?.id||0===m.size)return;const t=Array.from(m).map(e=>{const t=Q.get(e);return t?.status===JI.AVAILABLE?t.id:null}).filter(e=>null!==e);if(0===t.length)throw new Error("No available seats selected. Only available seats can be held.");try{await U.mutateAsync({eventId:C.id,seatIds:t,reason:e}),await T(),f(new Set),x(!1)}catch(GQ){throw GQ}})(e):"unhold"===v?(async()=>{if(!C?.id||0===m.size)return;const e=Array.from(m).map(e=>{const t=Q.get(e);return t?.status===JI.HELD?t.id:null}).filter(e=>null!==e);if(0===e.length)throw new Error("No held seats selected. Only held seats can be unheld.");try{await V.mutateAsync({eventId:C.id,seatIds:e}),await T(),f(new Set),x(!1)}catch(GQ){throw GQ}})():"unblock"===v?(async()=>{if(!C?.id||0===m.size)return;const e=Array.from(m).map(e=>{const t=Q.get(e);return t?.status===JI.BLOCKED?t.id:null}).filter(e=>null!==e);if(0===e.length)throw new Error("No blocked seats selected. Only blocked seats can be unblocked.");try{await q.mutateAsync({eventId:C.id,seatIds:e}),await T(),f(new Set),x(!1)}catch(GQ){throw GQ}})():(async e=>{if(!C?.id||0===m.size)return;const t=Array.from(m).map(e=>{const t=Q.get(e);return t?.status===JI.AVAILABLE?t.id:null}).filter(e=>null!==e);if(0===t.length)throw new Error("No available seats selected. Only available seats can be blocked.");try{await H.mutateAsync({eventId:C.id,seatIds:t,reason:e}),await T(),f(new Set),x(!1)}catch(GQ){throw GQ}})(e)},isLoading:U.isPending||V.isPending||H.isPending}),c.jsx(sq,{open:S,onOpenChange:j,currentStatus:C.status,onConfirm:async e=>{if(C?.id)try{await G.mutateAsync({id:C.id,input:{status:e}}),await T()}catch(GQ){throw GQ}},loading:G.isPending,eventTitle:C.title})]})}class iq{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async createPayment(e){try{const t=await this.apiClient.post(this.endpoints.payments,{booking_id:e.booking_id,amount:e.amount,payment_method:e.payment_method,currency:e.currency||"USD",transaction_reference:e.transaction_reference,notes:e.notes},{requiresAuth:!0});return this.transformPayment(t)}catch(t){throw t}}async getAllPayments(){try{const e=this.endpoints.payments.replace(/\/$/,"");return(await this.apiClient.get(e,{requiresAuth:!0})).items.map(e=>this.transformPayment(e))}catch(e){throw e}}async getPaymentsByBooking(e){try{const t=this.endpoints.payments.replace(/\/$/,"");return(await this.apiClient.get(`${t}/booking/${e}`,{requiresAuth:!0})).items.map(e=>this.transformPayment(e))}catch(t){throw t}}async voidPayment(e){try{const t=this.endpoints.payments.replace(/\/$/,""),n=await this.apiClient.post(`${t}/${e}/cancel`,{},{requiresAuth:!0});return this.transformPayment(n)}catch(t){throw t}}transformPayment(e){return{id:e.id,tenant_id:e.tenant_id,booking_id:e.booking_id,payment_code:e.payment_code||void 0,amount:e.amount,currency:e.currency,payment_method:e.payment_method,status:e.status,transaction_reference:e.transaction_reference||void 0,notes:e.notes||void 0,processed_at:e.processed_at?new Date(e.processed_at):void 0,created_at:new Date(e.created_at),updated_at:e.updated_at?new Date(e.updated_at):void 0,version:e.version}}}function oq(e){const t=Va();return Xa({mutationFn:t=>e.createPayment(t),onSuccess:e=>{t.invalidateQueries({queryKey:["bookings"]}),t.invalidateQueries({queryKey:["payments","booking",e.booking_id]})}})}function lq(e,t){return Ya({queryKey:["payments","booking",t],queryFn:()=>t?e.getPaymentsByBooking(t):Promise.resolve([]),enabled:!!t,staleTime:3e5})}const cq=[{value:"credit_card",label:"Credit Card"},{value:"debit_card",label:"Debit Card"},{value:"paypal",label:"PayPal"},{value:"bank_transfer",label:"Bank Transfer"},{value:"cash",label:"Cash"},{value:"other",label:"Other"}];function dq(e){const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t}function uq({open:e,onOpenChange:t,booking:n,onSubmit:a,isLoading:s=!1}){const r=Us(),[i,o]=p.useState(""),[l,d]=p.useState("cash"),[u,h]=p.useState(""),[m,f]=p.useState(""),g=p.useMemo(()=>new iq({apiClient:Fs,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:x=[]}=lq(g,n?.id||null),v=p.useMemo(()=>x.filter(e=>"void"!==e.status),[x]),y=p.useMemo(()=>{if(!n)return 0;if(void 0!==n.due_balance)return Math.max(0,n.due_balance);const e=x.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0);return Math.max(0,n.total_amount-e)},[n,x]),b=p.useMemo(()=>n?n.total_amount-y:0,[n,y]),w=()=>{o(""),d("cash"),h(""),f(""),t(!1)},S=()=>{(async()=>{if(!n)return;if(!dq(n.status))return void alert(`Payment cannot be processed for booking with status '${n.status}'. Booking must be PENDING, CONFIRMED, or RESERVED before payment.`);const e=parseFloat(i);if(isNaN(e)||e<=0)return;if(e>y)return void alert(`Payment amount (${e}) exceeds remaining balance (${y})`);const s={booking_id:n.id,amount:e,payment_method:l,currency:n.currency||"USD",transaction_reference:u.trim()||void 0,notes:m.trim()||void 0};try{await a(s),o(""),d("cash"),h(""),f(""),t(!1)}catch(r){}})()},j=parseFloat(i)||0,C=dq(n?.status||""),k=y<=0||"paid"===n?.payment_status,N=C&&!k&&j>0&&j<=y;return n?c.jsx(c.Fragment,{children:c.jsx(yA,{open:e,onClose:w,title:`Settle Booking Payment - ${n.booking_number}`,maxWidth:"600px",loading:s,footer:[{label:"Cancel",variant:"outline",type:"button",onClick:w,disabled:s},{label:s?"Processing...":"Process Payment",variant:"default",type:"submit",onClick:S,disabled:!N||s||k}],onSubmit:S,autoSubmitShortcut:!0,children:c.jsx("div",{className:sl("space-y-6 mt-12"),children:c.jsxs("div",{className:sl("space-y-4",r.paddingForm),children:[k&&c.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:[c.jsx("p",{className:"text-sm font-medium text-green-700",children:"Booking Fully Paid"}),c.jsx("p",{className:"text-sm text-green-600 mt-1",children:"This booking has been fully paid. No additional payments are required."})]}),!C&&!k&&c.jsxs("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4",children:[c.jsx("p",{className:"text-sm font-medium text-destructive",children:"Payment Not Allowed"}),c.jsxs("p",{className:"text-sm text-destructive/80 mt-1",children:["Payments can only be processed for bookings with status"," ",c.jsx("strong",{children:"PENDING"}),", ",c.jsx("strong",{children:"CONFIRMED"}),", or"," ",c.jsx("strong",{children:"RESERVED"}),". Current status:"," ",c.jsx("strong",{children:n.status.toUpperCase()})]})]}),c.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Total Amount:"}),c.jsxs("span",{className:"font-semibold",children:[n.currency||"USD"," ",n.total_amount.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Paid Amount:"}),c.jsxs("span",{className:"font-semibold",children:[n.currency||"USD"," ",b.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between text-sm border-t pt-2",children:[c.jsx("span",{className:"font-medium",children:"Remaining Balance:"}),c.jsxs("span",{className:"font-bold text-primary",children:[n.currency||"USD"," ",y.toFixed(2)]})]})]}),v.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{children:"Existing Payments"}),c.jsx("div",{className:"rounded-lg border divide-y",children:v.map(e=>c.jsxs("div",{className:"p-3 hover:bg-muted/30 transition-colors",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("span",{className:"text-sm font-semibold",children:[e.currency||"USD"," ",e.amount.toFixed(2)]}),c.jsx("span",{className:"text-sm text-muted-foreground",children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[e.payment_method]||e.payment_method})]}),(e.payment_code||e.transaction_reference||e.notes)&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[e.payment_code&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"font-mono font-semibold",children:e.payment_code}),(e.transaction_reference||e.notes)&&c.jsx("span",{children:""})]}),e.transaction_reference&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"font-mono",children:e.transaction_reference}),e.notes&&c.jsx("span",{children:""})]}),e.notes&&c.jsx("span",{className:"truncate",children:e.notes})]})]},e.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"amount",children:["Payment Amount ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx("div",{className:"relative",children:c.jsx(_l,{id:"amount",type:"text",value:i,onChange:e=>(e=>{const t=e.replace(/[^0-9.]/g,""),n=t.split(".");n.length>2||n[1]&&n[1].length>2||o(t)})(e.target.value),placeholder:"0.00",className:"pl-[5rem]",disabled:s||!C||k})}),j>0&&j>y&&c.jsxs("p",{className:"text-sm text-destructive",children:["Amount exceeds remaining balance of"," ",n.currency||"USD"," ",y.toFixed(2)]}),j>0&&j<=y&&c.jsxs("p",{className:"text-sm text-muted-foreground",children:["New balance after payment: ",n.currency||"USD"," ",(y-j).toFixed(2)]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fl,{htmlFor:"payment-method",children:["Payment Method ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsxs(bx,{value:l,onValueChange:e=>d(e),disabled:s||!C||k,children:[c.jsx(Sx,{id:"payment-method",children:c.jsx(wx,{placeholder:"Select payment method"})}),c.jsx(kx,{children:cq.map(e=>c.jsx(Nx,{value:e.value,children:e.label},e.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"transaction-reference",children:"Transaction Reference"}),c.jsx(_l,{id:"transaction-reference",value:u,onChange:e=>h(e.target.value),placeholder:"Optional transaction reference",disabled:s||!C||k})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"notes",children:"Notes"}),c.jsx(Dl,{id:"notes",value:m,onChange:e=>f(e.target.value),placeholder:"Optional payment notes",rows:3,disabled:s||!C||k})]})]})})})}):null}function hq({open:e,onOpenChange:t,booking:n}){const a=Us(),{toast:s}=Vk(),[r,i]=p.useState(new Set),[o,l]=p.useState(""),[d,u]=p.useState(!1),h=p.useMemo(()=>new iq({apiClient:Fs,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:m=[]}=lq(h,n?.id||null),f=function(e){const t=Va();return Xa({mutationFn:t=>e.voidPayment(t),onSuccess:e=>{t.invalidateQueries({queryKey:["bookings"]}),t.invalidateQueries({queryKey:["payments","booking",e.booking_id]})}})}(h),g=m.filter(e=>{return t=e,"cancelled"!==n?.status&&"completed"===t.status;var t}),x=()=>{i(new Set),l(""),u(!1),t(!1)};return n?c.jsx(c.Fragment,{children:c.jsx(ub,{open:e,onOpenChange:x,children:c.jsxs(pb,{className:"sm:max-w-[600px]",children:[c.jsxs(fb,{children:[c.jsx(xb,{children:"Void Payments"}),c.jsxs(vb,{children:["Void payments for booking ",n.booking_number,". Payments can be voided for bookings with payments (full or partial), but cannot be voided if the booking is already cancelled."]})]}),c.jsx("div",{className:sl("space-y-4",a.paddingForm),children:0===g.length?c.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[c.jsx("p",{children:"No voidable payments found for this booking."}),"cancelled"===n.status?c.jsx("p",{className:"text-sm mt-2 text-destructive",children:"Payments cannot be voided for cancelled bookings. Payments must be voided before cancellation."}):c.jsx("p",{className:"text-sm mt-2",children:"Only payments that have been processed (paid, processing, failed) can be voided. Pending payments cannot be voided since no payment has been made yet."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Fl,{children:"Voidable Payments"}),g.length>0&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>{r.size===g.length?i(new Set):i(new Set(g.map(e=>e.id)))},className:"h-8 text-xs",children:r.size===g.length?"Deselect All":"Select All"})]}),c.jsx("div",{className:"rounded-lg border divide-y max-h-[300px] overflow-y-auto",children:g.map(e=>{const t=r.has(e.id);return c.jsxs("label",{className:"p-3 flex items-start gap-3 hover:bg-muted/30 transition-colors cursor-pointer",children:[c.jsx(VC,{checked:t,onCheckedChange:()=>{return t=e.id,void i(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},disabled:d,className:"mt-0.5"}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 mb-1",children:c.jsxs("span",{className:"text-sm font-semibold",children:[e.currency||"USD"," ",e.amount.toFixed(2)]})}),e.transaction_reference&&c.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:c.jsx("span",{className:"font-mono",children:e.transaction_reference})}),e.notes&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.notes})]}),c.jsx("div",{className:"text-sm text-muted-foreground whitespace-nowrap",children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[e.payment_method]||e.payment_method})]})]},e.id)})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"remarks",children:"Remarks (Optional)"}),c.jsx(Dl,{id:"remarks",value:o,onChange:e=>l(e.target.value),placeholder:"Add remarks for voiding payments...",rows:3,disabled:d})]})]})}),c.jsxs(gb,{children:[c.jsx(bl,{variant:"outline",onClick:x,disabled:d,children:"Cancel"}),g.length>0&&c.jsx(bl,{variant:"destructive",onClick:async()=>{if(0===r.size)return;u(!0);const e=Array.from(r);let t=0,n=0;try{for(const s of e)try{await f.mutateAsync(s),t++}catch(a){n++}0===n?(s({title:"Success",description:`Successfully voided ${t} payment${t>1?"s":""}`}),x()):s(t>0?{title:"Partial Success",description:`Voided ${t} payment${t>1?"s":""}, ${n} failed`,variant:"default"}:{title:"Error",description:`Failed to void ${n} payment${n>1?"s":""}`,variant:"destructive"})}finally{u(!1)}},disabled:0===r.size||d,children:d?"Voiding...":`Void Selected (${r.size})`})]})]})})}):null}function mq({className:e,data:t,loading:n=!1,error:a=null,showMetadata:s=!1,editable:r=!0,onEdit:i,onPayment:o,customActions:l}){const[d,u]=p.useState("information"),[h,m]=p.useState(!1),[f,g]=p.useState(!1),x=p.useMemo(()=>new nO({apiClient:Fs,endpoints:{events:"/api/v1/ticketing/events"}}),[]),v=p.useMemo(()=>new FO({apiClient:Fs,endpoints:{shows:"/api/v1/ticketing/shows"}}),[]),y=p.useMemo(()=>new fI({apiClient:Fs,endpoints:{customers:"/api/v1/sales/customers"}}),[]),b=p.useMemo(()=>new iq({apiClient:Fs,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:w,isLoading:S}=oO(x,t?.event_id||null),{data:j,isLoading:C}=XO(v,w?.show_id||null),{data:k,isLoading:N}=xI(y,t?.customer_id||null),{data:_=[],isLoading:E}=lq(b,t?.id||null),P=oq(b),A=p.useMemo(()=>t&&(t?.booking_number||t?.id)||"",[t,t?.booking_number]),R=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},T=p.useMemo(()=>{const e=_.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0);return{totalPaid:e,balanceDue:void 0!==t?.due_balance?Math.max(0,t.due_balance):Math.max(0,(t?.total_amount||0)-e)}},[_,t?.total_amount,t?.due_balance]),M=p.useMemo(()=>!(!t||"cancelled"===t.status)&&_.some(e=>"completed"===e.status),[_,t]);if(n)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(a)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",a.message]})})});if(!t)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No booking selected"})})});const D=s;return c.jsxs(Sl,{className:sl("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(Ff,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-xl font-semibold",children:A}),c.jsx(UL,{value:t.booking_number,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[t.status&&c.jsx("span",{className:sl("px-2 py-1 text-xs font-medium rounded-full","confirmed"===t.status||"paid"===t.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"cancelled"===t.status||"refunded"===t.status?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"),children:t.status.toUpperCase()}),t.payment_status&&c.jsxs("span",{className:sl("px-2 py-1 text-xs font-medium rounded-full","paid"===t.payment_status?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:["Payment: ",t.payment_status.toUpperCase()]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[l?.(t),t&&M&&c.jsxs(bl,{onClick:()=>g(!0),variant:"outline",className:"gap-2",children:[c.jsx(cf,{className:"h-4 w-4"}),"Void Payment"]}),t&&(e=>{const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t})(t.status)&&T.balanceDue>0&&c.jsxs(bl,{onClick:()=>m(!0),className:"gap-2",disabled:P.isPending,children:[c.jsx(xf,{className:"h-4 w-4"}),"Pay ",t.currency||"USD"," ",T.balanceDue.toFixed(2)]})]}),r&&i||l?c.jsx("div",{children:c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"ghost",size:"icon","aria-label":"Actions",children:c.jsx(yf,{className:"h-4 w-4"})})}),c.jsxs(hj,{align:"end",className:"w-56",children:[r&&i&&c.jsxs(mj,{onClick:()=>i(t),children:[c.jsx(Kg,{className:"mr-2 h-3.5 w-3.5"})," Edit booking"]}),l&&l(t)]})]})}):null]})]}),c.jsxs(gy,{value:d,onValueChange:e=>u(e),children:[c.jsx("div",{className:"border-b mb-4",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","information"===d?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>u("information"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Ff,{className:"h-4 w-4"}),"Overview"]})}),c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","payments"===d?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>u("payments"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(xf,{className:"h-4 w-4"}),"Payments (",_.length,")"]})}),D&&c.jsx("button",{className:sl("border-b-2 px-4 py-2 text-sm font-medium transition-colors","metadata"===d?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>u("metadata"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(gf,{className:"h-4 w-4"}),"Metadata"]})})]})}),c.jsxs("div",{className:"mt-0",children:["information"===d&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{children:c.jsxs("dl",{className:"grid gap-4 md:grid-cols-3",children:[c.jsxs("div",{children:[c.jsxs("dt",{className:"text-sm font-medium flex items-center gap-1",children:[c.jsx(hx,{className:"h-3.5 w-3.5"}),"Customer"]}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.customer_id?N?c.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):k?.code&&k?.name?`${k.code} - ${k.name}`:k?.name?k.name:k?.code?k.code:"-":"-"})]}),t.event_id&&c.jsxs("div",{children:[c.jsxs("dt",{className:"text-sm font-medium flex items-center gap-1",children:[c.jsx(Hp,{className:"h-3.5 w-3.5"}),"Event"]}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:S||C?c.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):j?.name&&w?.title?`${j.name} - ${w.title}`:w?.title?w.title:(e=>{if(null==e)return"N/A";if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){const t=e.trim();if(!t)return"N/A";const n=new Date(t);return Number.isNaN(n.getTime())?t:n.toLocaleString()}if("number"==typeof e||"boolean"==typeof e)return String(e);try{return JSON.stringify(e)}catch{return String(e)}})(t.event_id)})]}),t.created_at&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Created"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:R(t.created_at)})]}),t.updated_at&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Updated"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:R(t.updated_at)})]}),t.reserved_until&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Reserved Until"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:R(t.reserved_until)})]}),t.cancelled_at&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium text-destructive",children:"Cancelled At"}),c.jsx("dd",{className:"mt-1 text-sm text-destructive",children:R(t.cancelled_at)})]})]})}),t.items&&t.items.length>0&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("h3",{className:"mb-3 text-sm font-medium text-muted-foreground flex items-center gap-2",children:[c.jsx(nx,{className:"h-4 w-4"}),"Booking Items (",t.items.length,")"]}),c.jsx(Sl,{className:"overflow-hidden border",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-muted/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"w-12 px-2 py-2 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"#"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Ticket Number"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Section"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Row"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Seat"}),c.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Price"})]})}),c.jsx("tbody",{className:"divide-y divide-border",children:t.items.map((e,n)=>c.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[c.jsx("td",{className:"w-12 px-2 py-2 text-sm text-muted-foreground",children:n+1}),c.jsx("td",{className:"px-3 py-2 text-sm text-muted-foreground font-mono",children:e.ticket_number||"-"}),c.jsx("td",{className:"px-3 py-2 text-sm text-muted-foreground",children:e.section_name||"-"}),c.jsx("td",{className:"px-3 py-2 text-sm text-muted-foreground",children:e.row_name||"-"}),c.jsx("td",{className:"px-3 py-2 text-sm font-medium",children:e.seat_number||"-"}),c.jsxs("td",{className:"px-3 py-2 text-sm font-semibold text-right",children:[e.currency||t.currency||"USD"," ",e.unit_price?.toFixed(2)||"0.00"]})]},e.id||n))}),c.jsxs("tfoot",{className:"bg-muted/50 border-t",children:[c.jsxs("tr",{children:[c.jsx("td",{colSpan:5,className:"px-3 py-2 text-sm font-medium text-right pr-6",children:"Subtotal:"}),c.jsxs("td",{className:"px-3 py-2 text-sm font-semibold text-right whitespace-nowrap",children:[t.currency||"USD"," ",t.subtotal_amount?.toFixed(2)||"0.00"]})]}),t.discount_amount>0&&c.jsxs("tr",{children:[c.jsxs("td",{colSpan:5,className:"px-3 py-2 text-sm font-medium text-right pr-6",children:["Discount","percentage"===t.discount_type&&t.discount_value?` (${t.discount_value}%)`:"",":"]}),c.jsxs("td",{className:"px-3 py-2 text-sm text-muted-foreground text-right whitespace-nowrap",children:["-",t.currency||"USD"," ",t.discount_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("tr",{children:[c.jsxs("td",{colSpan:5,className:"px-3 py-2 text-sm font-medium text-right pr-6",children:["Tax (",(100*(t.tax_rate||0)).toFixed(0),"%):"]}),c.jsxs("td",{className:"px-3 py-2 text-sm text-muted-foreground text-right whitespace-nowrap",children:[t.currency||"USD"," ",t.tax_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("tr",{className:"border-t-2 border-border",children:[c.jsx("td",{colSpan:5,className:"px-3 py-2.5 text-sm font-bold text-right pr-6",children:"Total:"}),c.jsxs("td",{className:"px-3 py-2.5 text-sm font-bold text-right whitespace-nowrap",children:[t.currency||"USD"," ",t.total_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("tr",{children:[c.jsx("td",{colSpan:5,className:"px-3 py-2 text-sm font-medium text-right pr-6",children:"Paid Amount:"}),c.jsxs("td",{className:"px-3 py-2 text-sm text-muted-foreground text-right whitespace-nowrap",children:[t.currency||"USD"," ",T.totalPaid.toFixed(2)]})]}),c.jsxs("tr",{className:"border-t-2 border-border",children:[c.jsx("td",{colSpan:5,className:"px-3 py-2.5 text-sm font-bold text-right pr-6",children:"Balance Due:"}),c.jsxs("td",{className:sl("px-3 py-2.5 text-sm font-bold text-right whitespace-nowrap",T.balanceDue>0?"text-destructive":"text-green-600"),children:[t.currency||"USD"," ",T.balanceDue.toFixed(2)]})]})]})]})})})]})]}),"payments"===d&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(Sl,{className:"p-4",children:c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),c.jsxs("div",{className:"text-lg font-semibold",children:[t.currency||"USD"," ",t.total_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Paid Amount"}),c.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[t.currency||"USD"," ",T.totalPaid.toFixed(2)]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance Due"}),c.jsxs("div",{className:sl("text-lg font-semibold",T.balanceDue>0?"text-destructive":"text-green-600"),children:[t.currency||"USD"," ",T.balanceDue.toFixed(2)]})]})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Payment History"}),E?c.jsx(Sl,{className:"p-6",children:c.jsx("div",{className:"text-center text-muted-foreground",children:"Loading payments..."})}):0===_.length?c.jsx(Sl,{className:"p-6",children:c.jsx("div",{className:"text-center text-muted-foreground",children:"No payments recorded"})}):c.jsx(Sl,{className:"overflow-hidden border",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-muted/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Method"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Reference"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-border",children:_.map(e=>c.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:R(e.created_at)}),c.jsxs("td",{className:"px-4 py-3 text-sm font-semibold",children:[e.currency||"USD"," ",e.amount.toFixed(2)]}),c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[e.payment_method]||e.payment_method}),c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground font-mono",children:e.transaction_reference||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:sl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold","completed"===e.status?"bg-green-50 text-green-700 border-green-200":(e.status,"bg-gray-50 text-gray-700 border-gray-200")),children:e.status.toUpperCase()})})]},e.id))})]})})})]})]}),"metadata"===d&&c.jsx("div",{className:"space-y-6",children:c.jsx(Sl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})]})]}),t&&c.jsx(uq,{open:h,onOpenChange:m,booking:t,onSubmit:async e=>{try{await P.mutateAsync(e),m(!1),o?.(t)}catch(n){throw n}},isLoading:P.isPending}),t&&c.jsx(hq,{open:f,onOpenChange:g,booking:t})]})}const pq=ED({code:kD().optional(),name:kD().min(1,"Name is required")}).transform(e=>e);function fq({className:e,venues:t=[],loading:n=!1,pagination:a,onVenueClick:s,onDelete:r,onCreate:i,onSearch:o,onPageChange:l,onPageSizeChange:d}){const u=Us(),[h,m]=p.useState(!1),[f,g]=p.useState(null),x=e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},v=[LP({getDisplayName:x,getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:s,additionalOptions:{id:"code"}}),TP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("font-medium",u.textSize),children:t??"-"})}}),TP({accessorKey:"venue_type",header:"Type",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:t??"-"})}}),TP({accessorKey:"phone",header:"Phone",cell:e=>{const t=e.getValue();return c.jsx("div",{className:"flex items-center gap-2",children:t?c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:t}):c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"})})}}),TP({accessorKey:"email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("div",{className:"flex items-center gap-2",children:t?c.jsx(c.Fragment,{children:c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:t})}):c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"})})}}),TP({accessorKey:"city",header:"Address",cell:e=>{const t=e.row.original,n=[t.city,t.state_province,t.country].filter(Boolean).join(", ");return c.jsx("div",{className:"flex items-center gap-2",children:n?c.jsx(c.Fragment,{children:c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:n})}):c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"})})}}),MP({accessorKey:"created_at",header:"Date Created",cell:e=>{const t=e.getValue();if(!t)return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:"-"});const n=t instanceof Date?t:new Date(t);return c.jsx("span",{className:sl("text-muted-foreground",u.textSize),children:n.toLocaleDateString()})}})],y=t,b=a?{page:a.page,pageSize:a.pageSize,total:a.total,totalPages:a.totalPages}:void 0,w={label:"Delete",onClick:()=>{f&&r&&r(f),m(!1),g(null)},variant:"destructive"},S={label:"Cancel",onClick:()=>{m(!1),g(null)}};return c.jsxs("div",{className:sl("w-full",e),children:[c.jsx(OP,{data:y,columns:v,useDefaultColumns:!1,title:"Venues",description:"Manage and view venues",onCreate:i,onSearch:o,manualPagination:Boolean(a&&l),serverPagination:b,onPageChange:l,onPageSizeChange:d,loading:n}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||g(null)},title:"Delete Venue",description:f?`Are you sure you want to delete "${x(f)}"? This action cannot be undone.`:"Are you sure you want to delete this venue?",confirmAction:w,cancelAction:S})]})}function gq({open:e,onOpenChange:t,venue:n}){const[a,s]=p.useState(""),[r,i]=p.useState("seat-level"),o=function(e){const t=Va();return Xa({mutationFn:t=>e.createLayout(t),onSuccess:e=>{t.invalidateQueries({queryKey:["layouts","venue",e.venue_id]})}})}(EO()),l=async()=>{if(n&&a.trim())try{await o.mutateAsync({venue_id:n.id,name:a.trim(),design_mode:r}),s(""),i("seat-level"),t(!1)}catch(e){}};return c.jsx(ub,{open:e,onOpenChange:t,children:c.jsxs(pb,{children:[c.jsxs(fb,{children:[c.jsx(xb,{children:"Create New Layout"}),c.jsx(vb,{children:"Create a new layout for this venue. Design mode cannot be changed after seats are added."})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"layout-name",children:"Layout Name"}),c.jsx(_l,{id:"layout-name",placeholder:"Layout name",value:a,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&a.trim()&&l()},autoFocus:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"design-mode",children:"Design Mode"}),c.jsxs(bx,{value:r,onValueChange:e=>i(e),children:[c.jsx(Sx,{id:"design-mode",children:c.jsx(wx,{})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"seat-level",children:c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsx("span",{className:"font-medium",children:"Seat Level"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Place seats directly on venue floor plan"})]})}),c.jsx(Nx,{value:"section-level",children:c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsx("span",{className:"font-medium",children:"Section Level"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Define sections first, then add seats to each section"})]})})]})]})]})]}),c.jsxs(gb,{children:[c.jsx(bl,{variant:"outline",onClick:()=>{t(!1),s(""),i("seat-level")},children:"Cancel"}),c.jsx(bl,{onClick:l,disabled:!a.trim()||o.isPending,children:o.isPending?"Creating...":"Create"})]})]})})}function xq({open:e,onOpenChange:t,layout:n}){const[a,s]=p.useState(""),[r,i]=p.useState(""),o=RO(EO());p.useEffect(()=>{n&&(s(n.name||""),i(n.description||""))},[n]);const l=async()=>{if(n&&a.trim())try{await o.mutateAsync({id:n.id,input:{name:a.trim(),description:r.trim()||void 0}}),t(!1)}catch(e){}};return c.jsx(ub,{open:e,onOpenChange:t,children:c.jsxs(pb,{children:[c.jsxs(fb,{children:[c.jsx(xb,{children:"Edit Layout"}),c.jsxs(vb,{children:['Update the layout information for "',n?.name,'".']})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"layout-name",children:"Layout Name"}),c.jsx(_l,{id:"layout-name",placeholder:"Layout name",value:a,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&a.trim()&&l()},autoFocus:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{htmlFor:"layout-description",children:"Description"}),c.jsx(Dl,{id:"layout-description",placeholder:"Layout description (optional)",value:r,onChange:e=>i(e.target.value),rows:3})]})]}),c.jsxs(gb,{children:[c.jsx(bl,{variant:"outline",onClick:()=>{t(!1),n&&(s(n.name||""),i(n.description||""))},children:"Cancel"}),c.jsx(bl,{onClick:l,disabled:!a.trim()||o.isPending,children:o.isPending?"Updating...":"Update"})]})]})})}function vq({className:e,data:t,loading:n=!1,error:a=null,showMetadata:s=!1,editable:r=!0,onEdit:i,onNavigateToSeatDesigner:o,profilePhotoComponent:l,customActions:d}){const[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>t&&(t?.name||t?.id)||"",[t,t?.name]),y=e=>{if(!e)return"N/A";try{const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"Invalid Date":t.toLocaleString()}catch{return"Invalid Date"}},b=e=>{x(e),f(!0)},w=[{value:"layout",label:"Layout",icon:Vf},{value:"overview",label:"Overview",icon:Ff},{value:"contact",label:"Contact & Address",icon:vg}];s&&w.push({value:"metadata",label:"Metadata",icon:gf});const S=[];return r&&i&&t&&S.push({id:"edit",label:"Edit",icon:c.jsx(Kg,{className:"h-3.5 w-3.5"}),onClick:()=>i(t)}),S.push({id:"add-layout",label:"Add Layout",icon:c.jsx(jg,{className:"h-3.5 w-3.5"}),onClick:()=>h(!0)}),n?c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})}):a?c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",a.message]})})}):t?c.jsxs(Sl,{className:sl("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[l?c.jsx("div",{className:"flex-shrink-0",children:l}):c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(Ff,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:v}),t.code&&c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code,c.jsx(UL,{value:t.code,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]})]})]}),c.jsx(ST,{actions:S,maxVisibleActions:2,customActions:d?.(t),size:"sm"})]}),c.jsx(UD,{tabs:w,defaultValue:"layout",children:e=>c.jsxs("div",{className:"mt-0",children:["layout"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(az,{venueId:t.id,onNavigateToDesigner:e=>{o&&o(t.id,e)},onEdit:b})}),"overview"===e&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs(GD,{title:"Venue Information",columns:3,children:[c.jsx(HD,{label:"Venue Type",value:t.venue_type||null}),c.jsx(HD,{label:"Capacity",value:t.capacity?`${t.capacity.toLocaleString()} seats`:null}),c.jsx(HD,{label:"Opening Hours",value:t.opening_hours||null,preserveWhitespace:!0})]}),c.jsxs(GD,{title:"Facilities & Amenities",columns:3,children:[c.jsx(HD,{label:"Parking",value:t.parking_info||null}),c.jsx(HD,{label:"Accessibility",value:t.accessibility||null}),c.jsx(HD,{label:"Amenities",value:t.amenities&&Array.isArray(t.amenities)&&t.amenities.length>0?c.jsx("div",{className:"flex flex-wrap gap-2",children:t.amenities.map((e,t)=>c.jsx("span",{className:"inline-flex items-center rounded-md bg-secondary px-2.5 py-1 text-xs font-medium",children:e},t))}):null})]}),c.jsx(qD,{children:c.jsx(HD,{label:"Description",value:t.description||null})}),c.jsxs(GD,{title:"Timeline",icon:gf,columns:3,className:"border-t pt-4",children:[c.jsx(HD,{label:"Created",value:t.created_at,render:e=>y(e)}),c.jsx(HD,{label:"Last Updated",value:t.updated_at,render:e=>y(e)})]})]}),"contact"===e&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs(GD,{title:"Contact Information",columns:3,children:[c.jsx(HD,{label:"Phone",value:t.phone||null,linkType:"tel",icon:vg}),c.jsx(HD,{label:"Email",value:t.email||null,linkType:"email",icon:Zf}),c.jsx(HD,{label:"Website",value:t.website||null,linkType:"external",icon:Pf,span:"md:col-span-3"})]}),c.jsxs(GD,{title:"Address Information",icon:Jf,columns:3,children:[c.jsx(HD,{label:"Street Address",value:t.street_address||null}),c.jsx(HD,{label:"City, State, ZIP",value:[t.city,t.state_province,t.postal_code].filter(Boolean).join(", ")||null}),c.jsx(HD,{label:"Country",value:t.country||null})]})]}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(Sl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})})]}),c.jsx(gq,{open:u,onOpenChange:h,venue:t}),c.jsx(xq,{open:m,onOpenChange:e=>{f(e),e||x(null)},layout:g||void 0})]}):c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No venue selected"})})})}function yq(e){return{id:e.id,code:e.code,name:e.name,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:a="create"},s){const{register:r,handleSubmit:i,formState:{errors:o,isSubmitted:l}}=lT({resolver:GT(pq),defaultValues:{code:void 0,name:"",...e}}),d=p.useRef(null);p.useEffect(()=>{if(l&&Object.keys(o).length>0){const e=Object.keys(o)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):d.current&&d.current.scrollIntoView({behavior:"smooth",block:"center"})}},[o,l]);return c.jsx("form",{ref:s,id:"booking-form",onSubmit:i(async e=>{await t(e)}),className:"space-y-6",children:c.jsxs("div",{className:sl("grid grid-cols-1 md:grid-cols-2 gap-4"),ref:d,children:[c.jsxs(Rl,{"data-invalid":!!o.code,children:[c.jsx(Tl,{htmlFor:"code",children:"Code"}),(()=>{const e="edit"===a||"create"===a,t="edit"===a?"Codes cannot be modified after creation":"create"===a?"Code will be generated automatically":void 0;return c.jsx(_l,{id:"code",type:"text",placeholder:"Auto generated",...r("code"),disabled:n||e,readOnly:e,tabIndex:e?-1:void 0,"aria-disabled":e||void 0,"aria-readonly":e||void 0,title:t,className:sl(e&&"cursor-not-allowed bg-muted text-muted-foreground",o.code&&"border-destructive")})})(),c.jsx(Ml,{children:o.code?.message})]}),c.jsxs(Rl,{"data-invalid":!!o.name,children:[c.jsxs(Tl,{htmlFor:"name",children:["Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),(()=>{const e=!1;return c.jsx(_l,{id:"name",type:"text",placeholder:"Enter Name",...r("name"),disabled:n||e,readOnly:e,tabIndex:void 0,"aria-disabled":void 0,"aria-readonly":void 0,title:void 0,className:sl(e,o.name&&"border-destructive")})})(),c.jsx(Ml,{children:o.name?.message})]})]})})});class bq{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchVenueTypes(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.venueTypes.replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(yq),pagination:l}}catch(t){throw t}}async searchVenueTypes(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.endpoints.venueTypes.replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(yq)}catch(n){throw n}}async fetchVenueTypeById(e){try{const t=this.endpoints.venueTypes.replace(/\/$/,"");return yq(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createVenueType(e){try{return yq(await this.apiClient.post(this.endpoints.venueTypes,e,{requiresAuth:!0}))}catch(t){throw t}}async updateVenueType(e,t){try{const n=this.endpoints.venueTypes.replace(/\/$/,"");return yq(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteVenueType(e){try{const t=this.endpoints.venueTypes.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const wq=p.createContext(null);function Sq({children:e,config:t}){const n=p.useMemo(()=>new bq(t),[t.apiClient,t.endpoints?.venueTypes]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(wq.Provider,{value:a,children:e})}function jq(e,t){const{search:n,pagination:a,enabled:s=!0}=t||{},r=n?.trim()||void 0;return Ya({queryKey:["vt",r,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,n=a?.pageSize||100;return r?e.searchVenueTypes(r,n).then(e=>({data:e,pagination:{page:1,pageSize:n,total:e.length,totalPages:1}})):e.fetchVenueTypes({skip:t,limit:n})},enabled:s,staleTime:3e5})}const Cq=ED({code:kD().optional(),name:kD().min(1,"Name is required"),description:kD().optional(),venue_type:kD().optional(),capacity:RD().optional(),parking_info:kD().optional(),accessibility:kD().optional(),amenities:kD().optional(),opening_hours:kD().optional(),phone:kD().optional(),email:kD().email("Invalid email address").optional().or(PD("")),website:kD().optional().refine(e=>!e||""===e||(!!kD().url().safeParse(e).success||/^www\.[\w.-]+\.[\w.-]+$/.test(e)),{message:"Invalid URL (use https://example.com or www.example.com)"}),street_address:kD().optional(),city:kD().optional(),state_province:kD().optional(),postal_code:kD().optional(),country:kD().optional()}),kq=Cq.transform(e=>({...e,amenities:e.amenities?e.amenities.split(",").map(e=>e.trim()).filter(e=>e):[]})),Nq=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,venueTypes:a},s){const r=p.useContext(wq),i=r?.service,{data:o}=jq(i||{fetchVenueTypes:async()=>({data:[],pagination:{page:1,pageSize:100,total:0,totalPages:0}})},{pagination:{page:1,pageSize:100},enabled:!!i&&!a}),l=a||o?.data||[],{register:d,control:u,handleSubmit:h,watch:m,setValue:f,formState:{errors:g,isSubmitted:x}}=lT({resolver:GT(Cq),defaultValues:{name:"",description:void 0,venue_type:void 0,parking_info:void 0,accessibility:void 0,amenities:Array.isArray(e?.amenities)?e.amenities.join(", "):"string"==typeof e?.amenities?e.amenities:void 0,opening_hours:void 0,phone:void 0,email:void 0,website:void 0,street_address:void 0,city:void 0,state_province:void 0,postal_code:void 0,country:void 0,...e?{...e,amenities:Array.isArray(e.amenities)?e.amenities.join(", "):"string"==typeof e.amenities?e.amenities:void 0}:{}}}),v=p.useRef(null);p.useEffect(()=>{if(x&&Object.keys(g).length>0){const e=Object.keys(g)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):v.current&&v.current.scrollIntoView({behavior:"smooth",block:"center"})}},[g,x]);const y={name:m("name")??"",description:m("description")??"",venue_type:m("venue_type")??"",street_address:m("street_address")??"",city:m("city")??"",state_province:m("state_province")??"",postal_code:m("postal_code")??"",country:m("country")??"",phone:m("phone")??"",email:m("email")??"",website:m("website")??""};return c.jsxs("form",{ref:s,id:"venue-form",onSubmit:h(async e=>{const n=kq.parse(e);await t(n)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(vT,{formType:"venue",currentValues:y,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&f(e,t)})},disabled:n})}),c.jsxs("div",{ref:v,className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Basic Information"}),c.jsxs("div",{className:sl("grid grid-cols-1 md:grid-cols-2 gap-4"),children:[c.jsxs(Rl,{"data-invalid":!!g.name,children:[c.jsxs(Tl,{htmlFor:"name",children:["Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(_l,{id:"name",type:"text",placeholder:"Enter Name",...d("name"),disabled:n,className:sl(g.name&&"border-destructive")}),c.jsx(Ml,{children:g.name?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.venue_type,children:[c.jsx(Tl,{htmlFor:"venue_type",children:"Venue Type"}),c.jsxs(bx,{value:m("venue_type")||void 0,onValueChange:e=>f("venue_type","none"===e?void 0:e),disabled:n,children:[c.jsx(Sx,{id:"venue_type",children:c.jsx(wx,{placeholder:"Select venue type"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"none",children:"None"}),l.map(e=>c.jsx(Nx,{value:e.name,children:e.name},e.id))]})]}),c.jsx(Ml,{children:g.venue_type?.message})]})]}),c.jsx(yT,{control:u,name:"description",label:"Description",placeholder:"Venue description",rows:3,disabled:n,showImproveButton:!0})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Contact Information"}),c.jsxs("div",{className:sl("grid grid-cols-1 md:grid-cols-3 gap-4"),children:[c.jsxs(Rl,{"data-invalid":!!g.phone,children:[c.jsx(Tl,{htmlFor:"phone",children:"Phone"}),c.jsx(_l,{id:"phone",type:"tel",placeholder:"Phone number",...d("phone"),disabled:n,className:sl(g.phone&&"border-destructive")}),c.jsx(Ml,{children:g.phone?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.email,children:[c.jsx(Tl,{htmlFor:"email",children:"Email"}),c.jsx(_l,{id:"email",type:"email",placeholder:"Email address",...d("email"),disabled:n,className:sl(g.email&&"border-destructive")}),c.jsx(Ml,{children:g.email?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.website,children:[c.jsx(Tl,{htmlFor:"website",children:"Website"}),c.jsx(_l,{id:"website",type:"url",placeholder:"https://example.com or www.example.com",...d("website"),disabled:n,className:sl(g.website&&"border-destructive")}),c.jsx(Ml,{children:g.website?.message})]})]})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Address"}),c.jsxs("div",{className:sl("grid grid-cols-1 md:grid-cols-2 gap-4"),children:[c.jsxs(Rl,{"data-invalid":!!g.street_address,className:"md:col-span-2",children:[c.jsx(Tl,{htmlFor:"street_address",children:"Street Address"}),c.jsx(_l,{id:"street_address",type:"text",placeholder:"Street address",...d("street_address"),disabled:n,className:sl(g.street_address&&"border-destructive")}),c.jsx(Ml,{children:g.street_address?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.city,children:[c.jsx(Tl,{htmlFor:"city",children:"City"}),c.jsx(_l,{id:"city",type:"text",placeholder:"City",...d("city"),disabled:n,className:sl(g.city&&"border-destructive")}),c.jsx(Ml,{children:g.city?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.state_province,children:[c.jsx(Tl,{htmlFor:"state_province",children:"State/Province"}),c.jsx(_l,{id:"state_province",type:"text",placeholder:"State or province",...d("state_province"),disabled:n,className:sl(g.state_province&&"border-destructive")}),c.jsx(Ml,{children:g.state_province?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.postal_code,children:[c.jsx(Tl,{htmlFor:"postal_code",children:"Postal Code"}),c.jsx(_l,{id:"postal_code",type:"text",placeholder:"Postal/ZIP code",...d("postal_code"),disabled:n,className:sl(g.postal_code&&"border-destructive")}),c.jsx(Ml,{children:g.postal_code?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.country,children:[c.jsx(Tl,{htmlFor:"country",children:"Country"}),c.jsx(_l,{id:"country",type:"text",placeholder:"Country",...d("country"),disabled:n,className:sl(g.country&&"border-destructive")}),c.jsx(Ml,{children:g.country?.message})]})]})]}),c.jsx(sC,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Facilities & Information"}),c.jsxs("div",{className:sl("grid grid-cols-1 gap-4"),children:[c.jsxs(Rl,{"data-invalid":!!g.parking_info,children:[c.jsx(Tl,{htmlFor:"parking_info",children:"Parking Information"}),c.jsx(Dl,{id:"parking_info",placeholder:"Parking availability and details",...d("parking_info"),disabled:n,rows:3,className:sl(g.parking_info&&"border-destructive")}),c.jsx(Ml,{children:g.parking_info?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.accessibility,children:[c.jsx(Tl,{htmlFor:"accessibility",children:"Accessibility Features"}),c.jsx(Dl,{id:"accessibility",placeholder:"Accessibility features and accommodations",...d("accessibility"),disabled:n,rows:3,className:sl(g.accessibility&&"border-destructive")}),c.jsx(Ml,{children:g.accessibility?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.amenities,children:[c.jsx(Tl,{htmlFor:"amenities",children:"Amenities"}),c.jsx(Dl,{id:"amenities",placeholder:"List amenities separated by commas (e.g., WiFi, Concessions, Restrooms)",...d("amenities"),disabled:n,rows:3,className:sl(g.amenities&&"border-destructive")}),c.jsx(Ml,{children:g.amenities?.message})]}),c.jsxs(Rl,{"data-invalid":!!g.opening_hours,children:[c.jsx(Tl,{htmlFor:"opening_hours",children:"Opening Hours"}),c.jsx(Dl,{id:"opening_hours",placeholder:"Operating hours (e.g., Mon-Fri: 9am-5pm, Sat-Sun: 10am-6pm)",...d("opening_hours"),disabled:n,rows:3,className:sl(g.opening_hours&&"border-destructive")}),c.jsx(Ml,{children:g.opening_hours?.message})]})]})]})]})});function _q({open:e,onOpenChange:t,onSubmit:n,title:a="Create Venue",maxWidth:s="720px"}){const r=Us(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=p.useMemo(()=>e=>({code:void 0,name:e.name,description:e.description||void 0,venue_type:e.venue_type||void 0,parking_info:e.parking_info||void 0,accessibility:e.accessibility||void 0,amenities:e.amenities&&e.amenities.length>0?e.amenities:void 0,opening_hours:e.opening_hours||void 0,phone:e.phone||void 0,email:e.email||void 0,website:e.website||void 0,street_address:e.street_address||void 0,city:e.city||void 0,state_province:e.state_province||void 0,postal_code:e.postal_code||void 0,country:e.country||void 0}),[]),v=()=>{m(!1),g(null),t(!1)},y={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=x(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},b={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:v,title:a,maxWidth:s,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:v,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(Nq,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d},o)})}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Venue Creation",description:f?c.jsx("p",{className:sl("mb-3",r.textSizeSmall),children:"Are you sure you want to create this venue?"}):void 0,confirmAction:y,cancelAction:b})]})}function Eq({open:e,onOpenChange:t,onSubmit:n,venue:a,title:s="Edit Venue",maxWidth:r="720px"}){const i=Us(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>{if(a)return{name:a.name??"",description:a.description??"",venue_type:a.venue_type??"",capacity:a.capacity??void 0,parking_info:a.parking_info??"",accessibility:a.accessibility??"",amenities:a.amenities?.join(", ")??"",opening_hours:a.opening_hours??"",phone:a.phone??"",email:a.email??"",website:a.website??"",street_address:a.street_address??"",city:a.city??"",state_province:a.state_province??"",postal_code:a.postal_code??"",country:a.country??""}},[a]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const y=p.useMemo(()=>e=>({code:void 0,name:e.name,description:e.description||void 0,venue_type:e.venue_type||void 0,capacity:e.capacity||void 0,parking_info:e.parking_info||void 0,accessibility:e.accessibility||void 0,amenities:e.amenities&&e.amenities.length>0?e.amenities:void 0,opening_hours:e.opening_hours||void 0,phone:e.phone||void 0,email:e.email||void 0,website:e.website||void 0,street_address:e.street_address||void 0,city:e.city||void 0,state_province:e.state_province||void 0,postal_code:e.postal_code||void 0,country:e.country||void 0}),[]),b=()=>{f(!1),x(null),t(!1)},w={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&a){h(!0);try{const e=y(g);await n(a.id,e),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},S={label:"Cancel",variant:"outline",disabled:u};return a?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:b,title:s,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:b,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(Nq,{ref:o,defaultValues:v,onSubmit:async e=>{x(e),f(!0)},isLoading:u},`${a.id}-${l}`)})}),c.jsx(bA,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Venue Update",description:g?c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:"Are you sure you want to update this venue?"}):void 0,confirmAction:w,cancelAction:S})]}):null}function Pq({onNavigateToVenue:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:a}){const s=bO(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(null),v=f.useRef(!1);f.useEffect(()=>{const e=v.current;n&&!e&&u(!0),v.current=!!n},[n]);const{data:y,isLoading:b,error:w}=wO(s,{filter:r,pagination:o}),S=function(e){const t=Va();return Xa({mutationFn:t=>e.createVenue(t),onSuccess:()=>{t.invalidateQueries({queryKey:["venues"]})}})}(s),j=jO(s),C=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteVenue(t),onSuccess:()=>{t.invalidateQueries({queryKey:["venues"]})}})}(s),k=y?.data??[],N=y?.pagination,_=p.useCallback(()=>{t&&t(),u(!0)},[t]),E=p.useCallback(e=>{x(e),m(!0)},[]),P=p.useCallback(async e=>{try{await C.mutateAsync(e.id),Uk({title:"Success",description:"Venue deleted successfully"})}catch(GQ){Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to delete venue",variant:"destructive"})}},[C]),A=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),R=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),T=p.useCallback(e=>{l({page:1,pageSize:e})},[]),M=p.useCallback(async e=>{try{await S.mutateAsync(e),Uk({title:"Success",description:"Venue created successfully"}),u(!1),a?.()}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create venue",variant:"destructive"}),GQ}},[S,a]),D=p.useCallback(async(e,t)=>{try{await j.mutateAsync({id:e,input:t}),Uk({title:"Success",description:"Venue updated successfully"}),m(!1),x(null)}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to update venue",variant:"destructive"}),GQ}},[j]),L=p.useCallback(t=>{e?.(t.id)},[e]),F=p.useMemo(()=>{if(N)return{page:o.page,pageSize:o.pageSize,total:N.total,totalPages:N.totalPages}},[o,N]);return c.jsxs(c.Fragment,{children:[c.jsx(fq,{venues:k,loading:b,error:w,onVenueClick:L,onEdit:E,onDelete:P,onCreate:_,onSearch:A,pagination:F,onPageChange:R,onPageSizeChange:T}),c.jsx(_q,{open:d,onOpenChange:e=>{u(e),e||a?.()},onSubmit:M}),c.jsx(Eq,{open:h&&!!g,onOpenChange:e=>{m(e),e||x(null)},onSubmit:D,venue:g})]})}function Aq({venue:e,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s=!1,size:r="md"}){return c.jsx(KL,{entityId:e.id,entityType:"venue",defaultImageUrl:e.image_url||null,altText:e.name,FallbackIcon:Lf,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s,size:r})}function Rq({className:e,organizers:t=[],loading:n=!1,error:a=null,pagination:s,onOrganizerClick:r,onEdit:i,onDelete:o,onCreate:l,onSearch:d,onPageChange:u,onPageSizeChange:h,customActions:m}){const p=Us(),f=[LP({getDisplayName:e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:r,additionalOptions:{id:"code"}}),TP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",p.textSize),children:t??"-"})}}),TP({accessorKey:"description",header:"Description",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",p.textSize),children:t??"-"})}}),TP({accessorKey:"email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",p.textSize),children:t??"-"})}}),TP({accessorKey:"phone",header:"Phone",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",p.textSize),children:t??"-"})}}),TP({accessorKey:"city",header:"City",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",p.textSize),children:t??"-"})}})],g=t,x=s?{page:s.page,pageSize:s.pageSize,total:s.total,totalPages:s.totalPages}:void 0;return c.jsx("div",{className:sl("w-full",e),children:c.jsx(OP,{data:g,columns:f,useDefaultColumns:!1,title:"Organizers",description:"Manage and view organizers",onCreate:l,onSearch:d,manualPagination:Boolean(s&&u),serverPagination:x,onPageChange:u,onPageSizeChange:h,loading:n})})}function Tq({className:e,data:t,loading:n=!1,error:a=null,showMetadata:s=!1,editable:r=!0,attachmentService:i,onEdit:o,customActions:l,onManageTags:d,onManageAttachments:u,profilePhotoComponent:h}){const[m,g]=p.useState("overview"),[x,v]=p.useState([]),[y,b]=p.useState(!1),w=p.useMemo(()=>i||new KP({apiClient:Fs,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[i]),S=p.useCallback(async()=>{if(t?.id&&w){b(!0);try{const e=await w.getAttachmentsForEntity("organizer",t.id,"document");v(e.items||[])}catch(e){v([])}finally{b(!1)}}},[t?.id,w]);p.useEffect(()=>{"documents"===m&&t?.id&&w&&S()},[m,t?.id,w,S]),f.useEffect(()=>{},[t?.tags]);const j=p.useMemo(()=>t&&(t?.name||t?.code||t?.id)||"",[t,t?.code]),C=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()};if(n)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(a)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",a.message]})})});if(!t)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No organizer selected"})})});const k=s,N=[{value:"overview",label:"Overview",icon:Ff},{value:"documents",label:"Documents"+(x.length>0?` (${x.length})`:""),icon:Cf}];return k&&N.splice(1,0,{value:"metadata",label:"Metadata",icon:gf}),c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[h||c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:t.logo?c.jsx("img",{src:t.logo,alt:j,className:"h-full w-full object-cover rounded-lg"}):c.jsx(Ff,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:j}),t.code&&c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code]}),t.website&&c.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[c.jsx(Pf,{className:"h-3 w-3"}),t.website]})]})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsx(ST,{actions:[...r&&o?[{id:"edit",label:"Edit",icon:c.jsx(Kg,{className:"h-3.5 w-3.5"}),onClick:()=>o(t)}]:[],...r&&d?[{id:"manage-tags",label:"Manage tags",icon:c.jsx(ex,{className:"h-3.5 w-3.5"}),onClick:()=>d(t),display:"dropdown-item"}]:[],...r&&u?[{id:"manage-documents",label:"Manage documents",icon:c.jsx(Cf,{className:"h-3.5 w-3.5"}),onClick:()=>u(t),display:"dropdown-item"}]:[]],customActions:l?.(t)})})]}),c.jsx(UD,{tabs:N,value:m,onValueChange:e=>g(e),children:e=>c.jsxs("div",{className:"mt-0",children:["overview"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(GD,{title:"Contact & Location",icon:hx,columns:3,children:[c.jsx(HD,{label:"Email",value:t.email,dataType:"email",linkType:"email",icon:Zf}),c.jsx(HD,{label:"Phone",value:t.phone,dataType:"phone",linkType:"tel",icon:vg}),c.jsx(HD,{label:"Website",value:t.website,dataType:"url",linkType:"external",icon:Pf}),c.jsx(HD,{label:"Address",value:[t.address,t.city,t.country].filter(Boolean).join(", "),icon:Jf,span:"md:col-span-3"})]}),c.jsx(qD,{children:c.jsx(HD,{label:"Description",value:t.description,span:"md:col-span-3"})}),c.jsx(qD,{children:c.jsx(HD,{label:"Tags"+(t.tags&&t.tags.length>0?` (${t.tags.length})`:""),value:t.tags&&t.tags.length>0?c.jsx(VL,{tags:t.tags}):null,span:"md:col-span-3",hideIfEmpty:!1})}),c.jsxs(GD,{title:"System Information",icon:gf,columns:3,children:[c.jsx(HD,{label:"Created",value:t.created_at,render:e=>C(e)}),c.jsx(HD,{label:"Last Updated",value:t.updated_at,render:e=>C(e)})]})]}),"documents"===e&&c.jsx($L,{documents:x,isLoading:y,onManageAttachments:r&&u?()=>u(t):void 0}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(Sl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})})]})})}const Mq=ED({code:kD().optional(),name:kD().min(1,"Name is required"),description:kD().optional(),email:kD().email("Invalid email").optional().or(PD("")),phone:kD().optional(),website:kD().url("Invalid URL").optional().or(PD("")),address:kD().optional(),city:kD().optional(),country:kD().optional(),logo:kD().url("Invalid URL").optional().or(PD(""))}).transform(e=>e),Dq=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:a="create"},s){const{handleSubmit:r,control:i}=lT({resolver:GT(Mq),defaultValues:{code:"",name:"",description:"",email:"",phone:"",website:"",address:"",city:"",country:"",logo:"",...e}});return c.jsxs("form",{ref:s,id:"organizer-form",onSubmit:r(async e=>{await t(e)}),className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(cT,{name:"code",control:i,label:"Code",placeholder:"Enter code",type:"text",disabled:n}),c.jsx(cT,{name:"name",control:i,label:"Name",placeholder:"Enter Name",type:"text",required:!0,disabled:n}),c.jsx(cT,{name:"email",control:i,label:"Email",placeholder:"contact@example.com",type:"email",disabled:n}),c.jsx(cT,{name:"phone",control:i,label:"Phone",placeholder:"+1 234 567 890",type:"tel",disabled:n}),c.jsx(cT,{name:"website",control:i,label:"Website",placeholder:"https://example.com",type:"url",disabled:n}),c.jsx(cT,{name:"logo",control:i,label:"Logo URL",placeholder:"https://example.com/logo.png",type:"url",disabled:n}),c.jsx(cT,{name:"address",control:i,label:"Address",placeholder:"Street Address",type:"text",disabled:n}),c.jsx(cT,{name:"city",control:i,label:"City",placeholder:"City",type:"text",disabled:n}),c.jsx(cT,{name:"country",control:i,label:"Country",placeholder:"Country",type:"text",disabled:n})]}),c.jsx(yT,{name:"description",control:i,label:"Description",placeholder:"Enter description",disabled:n,rows:4,showImproveButton:!0})]})});function Lq({open:e,onOpenChange:t,onSubmit:n,title:a="Create Organizer",maxWidth:s="720px"}){const r=Us(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=p.useMemo(()=>e=>({name:e.name}),[]),v=()=>{m(!1),g(null),t(!1)},y={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=x(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},b={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:v,title:a,maxWidth:s,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:v,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(Dq,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create"},o)})}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Organizer Creation",description:f?c.jsx("p",{className:sl("mb-3",r.textSizeSmall),children:"Are you sure you want to create this organizer?"}):void 0,confirmAction:y,cancelAction:b})]})}function Fq({open:e,onOpenChange:t,onSubmit:n,organizer:a,title:s="Edit Organizer",maxWidth:r="720px"}){const i=Us(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>{if(a)return{code:a.code??"",name:a.name??"",description:a.description??"",email:a.email??"",phone:a.phone??"",website:a.website??"",address:a.address??"",city:a.city??"",country:a.country??"",logo:a.logo??""}},[a]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const y=p.useMemo(()=>e=>({code:e.code||void 0,name:e.name,description:e.description||void 0,email:e.email||void 0,phone:e.phone||void 0,website:e.website||void 0,address:e.address||void 0,city:e.city||void 0,country:e.country||void 0,logo:e.logo||void 0}),[]),b=()=>{f(!1),x(null),t(!1)},w={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&a){h(!0);try{const e=y(g);await n(a.id,e),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},S={label:"Cancel",variant:"outline",disabled:u};return a?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:b,title:s,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:b,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(Dq,{ref:o,defaultValues:v,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit"},`${a.id}-${l}`)})}),c.jsx(bA,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Organizer Update",description:g?c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:"Are you sure you want to update this organizer?"}):void 0,confirmAction:w,cancelAction:S})]}):null}function Iq({onNavigateToOrganizer:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:a}){const s=KO(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),h=f.useRef(!1);f.useEffect(()=>{const e=h.current;n&&!e&&u(!0),h.current=!!n},[n]);const{data:m,isLoading:g,error:x}=WO(s,{filter:r,pagination:o}),v=function(e){const t=Va();return Xa({mutationFn:t=>e.createOrganizer(t),onSuccess:()=>{t.invalidateQueries({queryKey:["organizers"]})}})}(s),y=m?.data??[],b=m?.pagination,w=p.useCallback(()=>{t&&t(),u(!0)},[t]),S=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),j=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),C=p.useCallback(e=>{l({page:1,pageSize:e})},[]),k=p.useCallback(async e=>{try{await v.mutateAsync(e),Uk({title:"Success",description:"Organizer created successfully"}),u(!1),a?.()}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create organizer",variant:"destructive"}),GQ}},[v,a]),N=p.useCallback(t=>{e?.(t.id)},[e]),_=p.useMemo(()=>{if(b)return{page:o.page,pageSize:o.pageSize,total:b.total,totalPages:b.totalPages}},[o,b]);return c.jsxs(c.Fragment,{children:[c.jsx(Rq,{organizers:y,loading:g,error:x,onOrganizerClick:N,onCreate:w,onSearch:S,pagination:_,onPageChange:j,onPageSizeChange:C}),c.jsx(Lq,{open:d,onOpenChange:e=>{u(e),e||a?.()},onSubmit:k})]})}function Oq({open:e,onOpenChange:t,organizer:n,tagService:a,onSave:s,loading:r=!1}){return c.jsx(zL,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"organizer",initialTags:n.tags,tagService:a,onSave:s,loading:r})}function zq({open:e,onOpenChange:t,organizer:n,attachmentService:a,onSave:s,loading:r=!1}){return c.jsx(BL,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"organizer",attachmentService:a,onSave:s,loading:r})}function Bq({organizer:e,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s=!1,size:r="md"}){return c.jsx(KL,{entityId:e.id,entityType:"organizer",defaultImageUrl:e.logo||null,altText:e.name,FallbackIcon:$p,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s,size:r})}var $q=(e=>(e.STANDARD="STANDARD",e.VIP="VIP",e.WHEELCHAIR="WHEELCHAIR",e.COMPANION="COMPANION",e))($q||{});const Uq=f.memo(function({overlay:e,isSelected:t,onShapeOverlayClick:n,imageWidth:a,imageHeight:s,isPanning:r,isSpacePressed:i,selectedShapeTool:o,isPlacingSeats:l,isPlacingSections:d,percentageToStage:u,disableHoverAnimation:h=!1}){const[m,f]=p.useState(!1),g=p.useRef(null),x=p.useRef(null),{x:v,y:y}=u(e.x,e.y),b=t?.55:m?.3:.25,w=t?.15:.08,S=t?"#1e40af":m?"#2563eb":"#3b82f6",j=t?2:m?1:.75;return p.useEffect(()=>{if(h)return;const e=g.current;if(!e)return;e.to({opacity:b,duration:.2,easing:oU.Easings.EaseInOut});e.getChildren().forEach(e=>{e instanceof oU.Shape&&e.to({strokeWidth:j,duration:.2,easing:oU.Easings.EaseInOut})})},[b,j,h]),p.useEffect(()=>{if(h)return;const e=x.current;e&&e.to({fontSize:m||t?13:12,shadowBlur:m||t?3:1,duration:.2,easing:oU.Easings.EaseInOut})},[m,t,h]),c.jsxs(aV,{x:v,y:y,rotation:e.shape.rotation||0,listening:!0,onClick:t=>{t.cancelBubble=!0,n?.(e.id),e.onClick?.()},onTap:t=>{t.cancelBubble=!0,n?.(e.id),e.onClick?.()},onMouseDown:e=>{e.cancelBubble=!0},onMouseEnter:t=>{const n=t.target.getStage()?.container();n&&(n.style.cursor=o?"crosshair":"pointer"),f(!0),e.onHover?.()},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=r||i?"grab":o||l||d?"crosshair":"pointer"),f(!1)},children:[c.jsx(aV,{ref:g,children:c.jsx(zV,{shape:e.shape,fill:`rgba(59, 130, 246, ${w})`,stroke:S,strokeWidth:j,imageWidth:a,imageHeight:s,opacity:1,dash:e.isPlacement?[5,5]:void 0})}),e.label&&c.jsx(lV,{ref:x,text:e.label,fontSize:12,fontFamily:"Arial",fill:m||t?"#1e40af":"#3b82f6",padding:4,align:"center",verticalAlign:"middle",backgroundFill:`rgba(255, 255, 255, ${m||t?.98:.9})`,backgroundStroke:S,backgroundStrokeWidth:m||t?.75:.5,cornerRadius:2,x:-20,y:-8,shadowBlur:m||t?3:1,shadowColor:"rgba(0, 0, 0, 0.1)"})]})});const Vq=f.memo(function({seat:e,x:t,y:n,isSelected:a,isAnchor:s=!1,isPlacingSeats:r,isPanning:i,isSpacePressed:o,isPlacingSections:l,selectedShapeTool:d,onSeatClick:u,onSeatDragEnd:h,onSeatDragMove:m,onShapeTransform:f,layerToPercentage:g,colors:x,imageWidth:v,imageHeight:y,readOnly:b=!1,disableHoverAnimation:w=!1,onSeatDragStart:S,useLowDetail:j=!1,forceDraggable:C=!1,onTransformProgress:k}){const N=p.useRef(null),_=p.useRef(null),E=p.useRef(null),[P,A]=p.useState(!1),R={type:IV.CIRCLE,radius:.8},T=e.shape||R,M=p.useMemo(()=>JSON.stringify({type:T.type,width:T.width,height:T.height,radius:T.radius,points:T.points,rotation:T.rotation}),[T.type,T.width,T.height,T.radius,T.points,T.rotation]);p.useEffect(()=>{const e=_.current;if(e)if(a){if(e.clearCache(),!b&&E.current){const t=E.current;let n;const a=requestAnimationFrame(()=>{n=requestAnimationFrame(()=>{t.nodes([e]),t.forceUpdate(),t.getLayer()?.batchDraw()})});return()=>{cancelAnimationFrame(a),void 0!==n&&cancelAnimationFrame(n)}}}else j||(e.clearCache(),e.cache())},[a,j,M,b,Math.round(t),Math.round(n)]),p.useEffect(()=>{if(w)return;const e=N.current;if(!e||a)return;const t=x.stroke;e.to({stroke:t,strokeWidth:P?.75:.5,duration:.2,easing:oU.Easings.EaseInOut})},[P,a,x.stroke,w]);const D=s?LV:x.fill,L=s?FV:x.stroke,F=s?1:a?1.5:1,I=s?.6:a?.5:.35,O=p.useCallback(()=>{if(!_.current||!f)return;const t=_.current,n=t.scaleX(),a=t.scaleY(),s=t.rotation();let r;t.scaleX(1),t.scaleY(1),g&&(r=g(t.x(),t.y()));const i={...T};if(T.type===IV.CIRCLE){const e=(T.radius?T.radius/100*Math.min(v,y):12)*Math.max(Math.abs(n),Math.abs(a)),t=.1;i.radius=Math.max(t,e/Math.min(v,y)*100)}else if(T.type===IV.RECTANGLE||T.type===IV.ELLIPSE||T.type===IV.SEAT){const e=T.width?T.width/100*v:30,t=T.height?T.height/100*y:20,s=.1,r=.1;if(i.width=Math.max(s,Math.abs(e*n)/v*100),i.height=Math.max(r,Math.abs(t*a)/y*100),T.type===IV.RECTANGLE&&i.cornerRadius){const e=Math.min(i.width/100*v,i.height/100*y)/2;i.cornerRadius=Math.min(i.cornerRadius,e/v*100)}}else if(T.type===IV.FREEFORM&&T.points){const e=Math.abs((n+a)/2);i.points=T.points.map(t=>t*e)}else if(T.type===IV.POLYGON&&T.points){const e=Math.abs((n+a)/2);i.points=T.points.map(t=>t*e)}else if(T.type===IV.SOFA||T.type===IV.STAGE){const e=Math.abs((n+a)/2),t=T.width?T.width/100*v:36,s=T.height?T.height/100*y:24,r=T.type===IV.STAGE?5:2,o=T.type===IV.STAGE?3:1.5;i.width=Math.max(r,Math.abs(t*e)/v*100),i.height=Math.max(o,Math.abs(s*e)/y*100)}i.rotation=s,f(e.id,i,r),setTimeout(()=>{E.current&&_.current&&(E.current.nodes([_.current]),E.current.forceUpdate(),E.current.getLayer()?.batchDraw())},0)},[T,v,y,f,e.id,g]);return c.jsxs(c.Fragment,{children:[c.jsx(aV,{ref:_,name:"seat-marker",x:t,y:n,rotation:T.rotation||0,draggable:!b&&(C||r||l||!d),onDragStart:!b&&S?()=>S(e.id):void 0,onDragMove:!b&&m?t=>m(e.id,t.target.x(),t.target.y()):void 0,onDragEnd:b?void 0:t=>h(e.id,t),onTransformEnd:b?void 0:O,onMouseDown:e=>{d!==IV.FREEFORM&&(e.cancelBubble=!0)},onClick:t=>{d!==IV.FREEFORM&&(t.cancelBubble=!0,u?.(e,{shiftKey:t.evt.shiftKey}))},onTap:t=>{d!==IV.FREEFORM&&(t.cancelBubble=!0,u?.(e,{shiftKey:t.evt.shiftKey}))},onMouseEnter:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=d?"crosshair":a?"move":r||l||!d?"grab":"pointer"),A(!0)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=i||o?"grab":d||r||l?"crosshair":"pointer"),A(!1)},children:c.jsx(aV,{ref:N,children:j?c.jsx(rV,{radius:3,fill:D,stroke:L,strokeWidth:F,opacity:I,perfectDrawEnabled:!1}):c.jsx(zV,{shape:T,fill:D,stroke:L,strokeWidth:F,imageWidth:v,imageHeight:y,opacity:I,rotationFromParent:!0})})}),a&&!b&&c.jsx(dV,{ref:E,onTransform:k,onTransformStart:k,boundBoxFunc:(e,t)=>Math.abs(t.width)<10||Math.abs(t.height)<10?e:t,rotateEnabled:!0,resizeEnabled:!0,borderEnabled:!0,borderStroke:"#3b82f6",borderStrokeWidth:1.5,anchorFill:"#ffffff",anchorStroke:"#3b82f6",anchorStrokeWidth:1.5,anchorSize:10,anchorCornerRadius:2,padding:0,ignoreStroke:!0,keepRatio:T.type===IV.SOFA||T.type===IV.STAGE,flipEnabled:!1,enabledAnchors:T.type===IV.SOFA||T.type===IV.STAGE?["top-left","top-right","bottom-left","bottom-right"]:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],onMouseDown:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();if(!E.current||!t||!n)return;const a=t.getPointerPosition();if(!a)return;const s=E.current.getLayer();if(!s||!_.current)return;const r=s.scaleX(),i=_.current,o=i.x(),l=i.y()-i.height()/2-25/r,c=o,d=12/r,u=Math.abs(a.x-c),h=Math.abs(a.y-l);u<d&&h<d+15/r&&(n.style.cursor="grab")},onMouseMove:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();if(!E.current||!t||!n)return;const a=t.getPointerPosition();if(!a)return;const s=E.current.getLayer();if(!s||!_.current)return;const r=s.scaleX(),i=_.current,o=i.x(),l=i.y()-i.height()/2-25/r,c=o,u=12/r,h=Math.abs(a.x-c),m=Math.abs(a.y-l),p=h<u&&m<u+15/r;n.style.cursor=p?"grab":d?"crosshair":"pointer"},onMouseEnter:e=>{e.cancelBubble=!0},onMouseLeave:e=>{const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor=d?"crosshair":"pointer")},onMouseUp:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor=d?"crosshair":"pointer")}})]})});const qq=f.memo(function({section:e,x:t,y:n,isSelected:a,isAnchor:s=!1,isPlacingSections:r,isPanning:i,isSpacePressed:o,isPlacingSeats:l,selectedShapeTool:d,onSectionClick:u,onSectionDoubleClick:h,onSectionDragEnd:m,onSectionDragMove:f,onShapeTransform:g,layerToPercentage:x,imageWidth:v,imageHeight:y,readOnly:b=!1,disableHoverAnimation:w=!1,onSectionDragStart:S,useLowDetail:j=!1,colors:C,forceDraggable:k=!1,onTransformProgress:N}){const _=p.useRef(null),E=p.useRef(null),P=p.useRef(null),[A,R]=p.useState(!1),T={type:IV.RECTANGLE,width:2,height:1.5},M=e.shape||T,D=p.useMemo(()=>e.shape?JSON.stringify({type:M.type,width:M.width,height:M.height,radius:M.radius,points:M.points,rotation:M.rotation}):null,[e.shape,M.type,M.width,M.height,M.radius,M.points,M.rotation]);p.useEffect(()=>{const t=_.current;if(t)if(a&&e.shape){if(t.clearCache(),!b&&P.current){const e=P.current;let n;const a=requestAnimationFrame(()=>{n=requestAnimationFrame(()=>{e.nodes([t]),e.forceUpdate(),e.getLayer()?.batchDraw()})});return()=>{cancelAnimationFrame(a),void 0!==n&&cancelAnimationFrame(n)}}}else!j&&e.shape&&(t.clearCache(),t.cache())},[a,j,e.shape,D,b,Math.round(t),Math.round(n)]);const L=p.useCallback(()=>{if(!_.current||!g||!e.shape)return;const t=_.current,n=t.scaleX(),a=t.scaleY(),s=t.rotation();let r;t.scaleX(1),t.scaleY(1),x&&(r=x(t.x(),t.y()));const i={...M};if(M.type===IV.CIRCLE){const e=(M.radius?M.radius/100*Math.min(v,y):12)*Math.max(Math.abs(n),Math.abs(a)),t=.1;i.radius=Math.max(t,e/Math.min(v,y)*100)}else if(M.type===IV.RECTANGLE||M.type===IV.ELLIPSE||M.type===IV.SEAT){const e=M.width?M.width/100*v:30,t=M.height?M.height/100*y:20,s=.1,r=.1;if(i.width=Math.max(s,Math.abs(e*n)/v*100),i.height=Math.max(r,Math.abs(t*a)/y*100),M.type===IV.RECTANGLE&&i.cornerRadius){const e=Math.min(i.width/100*v,i.height/100*y)/2;i.cornerRadius=Math.min(i.cornerRadius,e/v*100)}}else if(M.type===IV.FREEFORM&&M.points){const e=Math.abs((n+a)/2);i.points=M.points.map(t=>t*e)}else if(M.type===IV.POLYGON&&M.points){const e=Math.abs((n+a)/2);i.points=M.points.map(t=>t*e)}else if(M.type===IV.SOFA||M.type===IV.STAGE){const e=Math.abs((n+a)/2),t=M.width?M.width/100*v:36,s=M.height?M.height/100*y:24,r=M.type===IV.STAGE?5:2,o=M.type===IV.STAGE?3:1.5;i.width=Math.max(r,Math.abs(t*e)/v*100),i.height=Math.max(o,Math.abs(s*e)/y*100)}i.rotation=s,g(e.id,i,r),setTimeout(()=>{P.current&&_.current&&(P.current.nodes([_.current]),P.current.forceUpdate(),P.current.getLayer()?.batchDraw())},0)},[M,v,y,g,e.id,e.shape,x]);p.useEffect(()=>{if(w)return;const e=E.current;if(!e||!r||a)return;const t=A?.75:.5;e.to({stroke:C.stroke,strokeWidth:t,duration:.2,easing:oU.Easings.EaseInOut})},[A,a,r,w,C.stroke]);const F=s?LV:C.fill,I=s?FV:C.stroke,O=s?1:a?1.5:1,z=s?.6:a?.5:.35;return c.jsxs(c.Fragment,{children:[c.jsxs(aV,{ref:_,x:t,y:n,rotation:M.rotation||0,draggable:!b&&(k||r||l||!d),onDragStart:!b&&S?()=>S(e.id):void 0,onDragMove:!b&&f?t=>f(e.id,t.target.x(),t.target.y()):void 0,onDragEnd:b?void 0:t=>{if(!m)return;const n=t.target;m(e.id,n.x(),n.y())},onTransformEnd:!b&&e.shape?L:void 0,onMouseDown:e=>{d!==IV.FREEFORM&&(e.cancelBubble=!0)},onClick:t=>{if(d===IV.FREEFORM)return;t.cancelBubble=!0;const n=t.evt.shiftKey||!1;u?.(e,{shiftKey:n})},onDblClick:t=>{d!==IV.FREEFORM&&(t.cancelBubble=!0,h?.(e))},onTap:t=>{if(d===IV.FREEFORM)return;t.cancelBubble=!0;const n=t.evt?.shiftKey||!1;u?.(e,{shiftKey:n})},onMouseEnter:t=>{const n=t.target.getStage()?.container();n&&(n.style.cursor=d?"crosshair":a&&e.shape?"move":(r||l||!d)&&e.shape?"grab":"pointer"),R(!0)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=i||o?"grab":d||l||r?"crosshair":"pointer"),R(!1)},children:[e.shape&&c.jsx(aV,{ref:E,children:j?c.jsx(rV,{radius:4,fill:F,stroke:I,strokeWidth:O,opacity:z,perfectDrawEnabled:!1}):c.jsx(zV,{shape:M,fill:F,stroke:I,strokeWidth:O,imageWidth:v,imageHeight:y,opacity:z,rotationFromParent:!0})}),!e.shape&&c.jsx(rV,{radius:a?12:10,fill:F,stroke:I,strokeWidth:s?2:O,x:0,y:0,opacity:z})]}),a&&!b&&e.shape&&c.jsx(dV,{ref:P,onTransform:N,onTransformStart:N,boundBoxFunc:(e,t)=>Math.abs(t.width)<10||Math.abs(t.height)<10?e:t,rotateEnabled:!0,resizeEnabled:!0,borderEnabled:!0,borderStroke:"#3b82f6",borderStrokeWidth:1.5,anchorFill:"#ffffff",anchorStroke:"#3b82f6",anchorStrokeWidth:1.5,anchorSize:10,anchorCornerRadius:2,padding:0,ignoreStroke:!0,keepRatio:M.type===IV.SOFA||M.type===IV.STAGE,flipEnabled:!1,enabledAnchors:M.type===IV.SOFA||M.type===IV.STAGE?["top-left","top-right","bottom-left","bottom-right"]:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],onMouseDown:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();if(!P.current||!t||!n)return;const a=t.getPointerPosition();if(!a)return;const s=P.current.getLayer();if(!s||!_.current)return;const r=s.scaleX(),i=_.current,o=i.x(),l=i.y()-i.height()/2-25/r,c=o,d=12/r,u=Math.abs(a.x-c),h=Math.abs(a.y-l);u<d&&h<d+15/r&&(n.style.cursor="grabbing")},onMouseMove:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();if(!P.current||!t||!n)return;const a=t.getPointerPosition();if(!a)return;const s=P.current.getLayer();if(!s||!_.current)return;const r=s.scaleX(),i=_.current,o=i.x(),l=i.y()-i.height()/2-25/r,c=o,u=12/r,h=Math.abs(a.x-c),m=Math.abs(a.y-l),p=h<u&&m<u+15/r;n.style.cursor=p?"grab":d?"crosshair":"pointer"},onMouseEnter:e=>{e.cancelBubble=!0},onMouseLeave:e=>{const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor=d?"crosshair":"pointer")},onMouseUp:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor=d?"crosshair":"pointer")}})]})});function Hq({imageUrl:e,seats:t,sections:n=[],selectedSeatId:a,selectedSectionId:s,selectedSeatIds:r,selectedSectionIds:i,anchorSeatId:o,anchorSectionId:l,onMarkersInRect:d,isPlacingSeats:u,isPlacingSections:h,readOnly:m=!1,zoomLevel:f,panOffset:g,onSeatClick:x,onSectionClick:v,onSectionDoubleClick:y,onSectionDragEnd:b,onSeatDragEnd:w,onBatchSeatDragEnd:S,onBatchSectionDragEnd:j,onSeatShapeTransform:C,onSectionShapeTransform:k,onImageClick:N,onDeselect:_,onShapeDraw:E,onShapeOverlayClick:P,onWheel:A,onPanStart:R,onPan:T,onPanEnd:M,containerWidth:D,containerHeight:L,venueType:F,selectedShapeTool:I,shapeOverlays:O=[],selectedOverlayId:z,canvasBackgroundColor:B="#e5e7eb",showGrid:$=!1,gridSize:U=5}){const[V,q]=p.useState(null),[H,G]=p.useState(!0),K=p.useRef(null),W=p.useRef(null),[Q,Y]=p.useState(!1),[X,Z]=p.useState({x:0,y:0}),[J,ee]=p.useState(!1),[te,ne]=p.useState(!1),[ae,se]=p.useState(null),[re,ie]=p.useState(null),[oe,le]=p.useState([]),[ce,de]=p.useState(null),ue=p.useRef(null),he=p.useRef(null),[me,pe]=p.useState(null),[fe,ge]=p.useState(null),[xe,ve]=p.useState(null),[ye,be]=p.useState(null),[we,Se]=p.useState(null),[je,Ce]=p.useState(null),[ke,Ne]=p.useState(null),_e=p.useMemo(()=>r&&r.length>0?new Set(r):new Set(a?[a]:[]),[r,a]),Ee=p.useMemo(()=>i&&i.length>0?new Set(i):new Set(s?[s]:[]),[i,s]),Pe=p.useRef(!1),Ae=p.useRef(null),Re=p.useCallback(()=>{null===Ae.current&&(Ae.current=requestAnimationFrame(()=>{K.current?.batchDraw(),Ae.current=null}))},[]);p.useEffect(()=>{const e=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("input, textarea, [contenteditable]");"Delete"!==e.key&&"Backspace"!==e.key||n?"Space"!==e.code||e.repeat||n||(e.preventDefault(),ee(!0)):I===IV.FREEFORM&&oe.length>0&&(e.preventDefault(),le(e=>{const t=e.slice(0,-1);return 0===t.length&&de(null),t}))},t=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("input, textarea, [contenteditable]");"Space"!==e.code||n||(e.preventDefault(),ee(!1),Q&&(Y(!1),M?.()))};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[Q,M,I,oe]),p.useEffect(()=>{if(!e)return q(null),void G(!1);if(V&&(V.src===e||V.src.endsWith(e)))return void G(!1);G(!0);const t=new window.Image;t.crossOrigin="anonymous";return t.onload=()=>{q(t),G(!1)},t.onerror=()=>{q(null),G(!1)},t.src=e,()=>{t.onload=null,t.onerror=null}},[e]);const Te=e=>{const t=function(e){switch(e?.toLowerCase()||"standard"){case"vip":return{fill:"#f59e0b",stroke:"#d97706"};case"handicap":return{fill:"#8b5cf6",stroke:"#7c3aed"};case"couple":return{fill:"#ec4899",stroke:"#db2777"};case"wheelchair":return{fill:"#06b6d4",stroke:"#0891b2"};default:return{fill:"#3b82f6",stroke:"#1d4ed8"}}}(e.seat.seatType);const n=e.shape?.fillColor?.trim(),a=e.shape?.strokeColor?.trim();return{fill:n||t.fill,stroke:a||t.stroke}},Me=e=>{const t=e.shape?.fillColor?.trim(),n=e.shape?.strokeColor?.trim();return{fill:t||"#60a5fa",stroke:n||"#2563eb"}},De=!!V&&!!V.width&&!!V.height;!De&&D>0&&L>0?he.current||(he.current={w:D,h:L}):De&&(he.current=null);const Le=De?D>0?D:800:he.current?.w??(D>0?D:800),Fe=De?L>0?L:600:he.current?.h??(L>0?L:600),Ie=De?V.height/V.width:.75,{displayedWidth:Oe,displayedHeight:ze,imageX:Be,imageY:$e,centerX:Ue,centerY:Ve,percentageToStage:qe,layerToPercentage:He,stageToPercentage:Ge,pointerToPercentage:Ke}=Nz({containerWidth:Le,containerHeight:Fe,contentAspectRatio:Ie,panOffset:g,zoomLevel:f}),We=p.useCallback((e,n)=>{const a=n.target,{x:s,y:r}=He(a.x(),a.y());pe(null),ve(null);if(!_e.has(e)){const n=t.find(t=>t.id===e);n&&x&&x(n,{shiftKey:!1})}if("seats"===ye?.type&&S){const t=ye.initialPositions.get(e);if(t){const e=s-t.x,n=r-t.y,a=Array.from(ye.initialPositions.entries()).map(([t,a])=>({id:t,x:Math.max(0,Math.min(100,a.x+e)),y:Math.max(0,Math.min(100,a.y+n))}));S(a)}be(null),Se(null)}else w(e,s,r)},[w,S,He,ye,t,_e,x]),Qe=p.useCallback(e=>{pe(e);const n=t.find(t=>t.id===e);if(n&&ve({x:n.x,y:n.y}),_e.size>1&&_e.has(e)&&S){const n=new Map;t.filter(e=>_e.has(e.id)).forEach(e=>n.set(e.id,{x:e.x,y:e.y})),be({type:"seats",initialPositions:n,draggedId:e}),Se({dx:0,dy:0})}},[t,_e,S]),Ye=p.useCallback((e,t,n)=>{const{x:a,y:s}=He(t,n);if(ve({x:a,y:s}),"seats"===ye?.type&&ye.draggedId===e){const t=ye.initialPositions.get(e);t&&Se({dx:a-t.x,dy:s-t.y})}},[He,ye]),Xe=p.useCallback((e,t,a)=>{const{x:s,y:r}=He(t,a);ge(null),ve(null);if(!Ee.has(e)){const t=n.find(t=>t.id===e);t&&v&&v(t,{shiftKey:!1})}if("sections"===ye?.type&&j){const t=ye.initialPositions.get(e);if(t){const e=s-t.x,n=r-t.y,a=Array.from(ye.initialPositions.entries()).map(([t,a])=>({id:t,x:Math.max(0,Math.min(100,a.x+e)),y:Math.max(0,Math.min(100,a.y+n))}));j(a)}be(null),Se(null)}else b?.(e,s,r)},[b,j,He,ye,n,Ee,v]),Ze=p.useCallback(e=>{ge(e);const t=n.find(t=>t.id===e);if(t&&ve({x:t.x,y:t.y}),Ee.size>1&&Ee.has(e)&&j){const t=new Map;n.filter(e=>Ee.has(e.id)).forEach(e=>t.set(e.id,{x:e.x,y:e.y})),be({type:"sections",initialPositions:t,draggedId:e}),Se({dx:0,dy:0})}},[n,Ee,j]),Je=p.useCallback((e,t,n)=>{const{x:a,y:s}=He(t,n);if(ve({x:a,y:s}),"sections"===ye?.type&&ye.draggedId===e){const t=ye.initialPositions.get(e);t&&Se({dx:a-t.x,dy:s-t.y})}},[He,ye]),et=Le,tt=Fe,nt=Oe,at=ze,st=Be,rt=$e,{visibleSeats:it,visibleSections:ot,visibleShapeOverlays:lt}=p.useMemo(()=>{if(t.length+n.length+O.length<40)return{visibleSeats:t,visibleSections:n,visibleShapeOverlays:O};const e=.2,a=Ue-(Ue+g.x)/f-et*e/f,s=Ue+(et-Ue-g.x)/f+et*e/f,r=Ve-(Ve+g.y)/f-tt*e/f,i=Ve+(tt-Ve-g.y)/f+tt*e/f,o=(e,t)=>{const n=st+e/100*nt,o=rt+t/100*at;return n>=a&&n<=s&&o>=r&&o<=i};return{visibleSeats:t.filter(e=>!!_e.has(e.id)||o(e.x,e.y)),visibleSections:n.filter(e=>!!Ee.has(e.id)||o(e.x,e.y)),visibleShapeOverlays:O.filter(e=>z===e.id||o(e.x,e.y))}},[t,n,O,g,f,et,tt,Ue,Ve,st,rt,nt,at,_e,Ee,z]),ct=it.length+ot.length+lt.length>100,dt=f<.4,ut=p.useMemo(()=>ye&&"seats"===ye.type&&we?it.map(e=>{const t=ye.initialPositions.get(e.id);return t?e.id===ye.draggedId&&xe?{...e,x:xe.x,y:xe.y}:{...e,x:t.x+we.dx,y:t.y+we.dy}:e}):it,[it,ye,we,xe]),ht=p.useMemo(()=>ye&&"sections"===ye.type&&we?ot.map(e=>{const t=ye.initialPositions.get(e.id);return t?e.id===ye.draggedId&&xe?{...e,x:xe.x,y:xe.y}:{...e,x:t.x+we.dx,y:t.y+we.dy}:e}):ot,[ot,ye,we,xe]),mt={x:Ue+g.x,y:Ve+g.y,scaleX:f,scaleY:f,offsetX:Ue,offsetY:Ve},pt=ut.filter(e=>!_e.has(e.id)),ft=ut.filter(e=>_e.has(e.id));ut.find(e=>e.id===a);const gt=ut.find(e=>e.id===me),xt=ht.filter(e=>!Ee.has(e.id)),vt=ht.filter(e=>Ee.has(e.id));ht.find(e=>e.id===s);const yt=ht.find(e=>e.id===fe);return!e||!H&&V&&V.width&&V.height?c.jsxs(hV,{ref:K,width:et,height:tt,onWheel:e=>{e.evt.preventDefault(),A?.(e,J)},onTouchStart:e=>{e.evt&&e.evt.preventDefault()},onMouseDown:e=>{Pe.current=!1,e.evt&&e.evt.preventDefault();const t=e.target.getStage();if(!t)return;const n=t.getPointerPosition();if(!n)return;if(J)return Y(!0),Z(n),void R?.();const a=e.target,s="Transformer"===a.getType();let r=a,i=!1;for(;r;){if("Transformer"===r.getType()){i=!0;break}r=r.getParent()}const o="seat-marker"===a.name()||"section-marker"===a.name(),l="seat-marker"===a.getParent()?.name()||"section-marker"===a.getParent()?.name();let c=a.getParent(),u=!1;for(;c;){if("seat-marker"===c.name()||"section-marker"===c.name()){u=!0;break}c=c.getParent()}const h=s||i||o||l||u;if(!m&&d&&!I&&!te&&!h)return Ce(n),void Ne(n);if((_e.size>0||Ee.size>0)&&h)return ne(!1),se(null),void ie(null);if(I&&E&&I!==IV.FREEFORM){const e=Ke(n.x,n.y);return ne(!0),se(e),void ie(e)}},onMouseMove:e=>{const t=e.target.getStage();if(!t)return;const n=t.getPointerPosition();if(!n)return;if(je)return void Ne(n);const a=e.target,s="Transformer"===a.getType();let r=a,i=!1;for(;r;){if("Transformer"===r.getType()){i=!0;break}r=r.getParent()}const o="seat-marker"===a.name()||"section-marker"===a.name(),l="seat-marker"===a.getParent()?.name()||"section-marker"===a.getParent()?.name();let c=a.getParent(),d=!1;for(;c;){if("seat-marker"===c.name()||"section-marker"===c.name()){d=!0;break}c=c.getParent()}const u=(_e.size>0||Ee.size>0)&&(s||i||o||l||d);if(Q&&J){const e={x:n.x-X.x,y:n.y-X.y};Z(n),T?.(e)}else if(!u&&te&&ae&&I&&I!==IV.FREEFORM){const e=Ke(n.x,n.y);ie(e)}else if(!u&&I===IV.FREEFORM&&oe.length>0){const e=Ke(n.x,n.y);de(e)}},onMouseUp:e=>{if(Q)return Y(!1),void M?.();if(je&&ke&&d){const e=Math.min(je.x,ke.x),a=Math.min(je.y,ke.y),s=Math.max(je.x,ke.x),r=Math.max(je.y,ke.y),i=Ge(e,a),o=Ge(s,r),l=Math.min(i.x,o.x),c=Math.max(i.x,o.x),u=Math.min(i.y,o.y),h=Math.max(i.y,o.y),m=t.filter(e=>e.x>=l&&e.x<=c&&e.y>=u&&e.y<=h).map(e=>e.id),p=n.filter(e=>e.x>=l&&e.x<=c&&e.y>=u&&e.y<=h).map(e=>e.id);return d(m,p),Ce(null),void Ne(null)}const a=e.target,s="Transformer"===a.getType();let r=a,i=!1;for(;r;){if("Transformer"===r.getType()){i=!0;break}r=r.getParent()}const o="seat-marker"===a.name()||"section-marker"===a.name(),l="seat-marker"===a.getParent()?.name()||"section-marker"===a.getParent()?.name();let c=a.getParent(),u=!1;for(;c;){if("seat-marker"===c.name()||"section-marker"===c.name()){u=!0;break}c=c.getParent()}if((_e.size>0||Ee.size>0)&&(s||i||o||l||u))return ne(!1),se(null),void ie(null);if(te&&ae&&I&&E){if(I!==IV.FREEFORM&&re){const t=ae.x,n=ae.y,a=re.x,s=re.y;if(Math.sqrt(Math.pow(a-t,2)+Math.pow(s-n,2))>=.3){e.cancelBubble=!0,Pe.current=!0;const r=1.5,i=Math.max(r,Math.abs(a-t)),o=Math.max(r,Math.abs(s-n)),l=(t+a)/2,c=(n+s)/2;let d;if(I===IV.CIRCLE){const e=Math.max(i,o)/2;d={type:IV.CIRCLE,radius:Math.max(.8,e)},E(d,l,c)}else if(I===IV.RECTANGLE)d={type:IV.RECTANGLE,width:Math.max(1,i),height:Math.max(1,o),cornerRadius:2},E(d,l,c,i,o);else if(I===IV.ELLIPSE)d={type:IV.ELLIPSE,width:Math.max(1,i),height:Math.max(1,o)},E(d,l,c,i,o);else if(I===IV.POLYGON){const e=i/2,t=o/2,n=[-1,-1,1,-1,1.5,0,1,1,-1,1,-1.5,0].map((n,a)=>a%2==0?n*e:n*t);d={type:IV.POLYGON,points:n},E(d,l,c)}else I===IV.SOFA?(d={type:IV.SOFA,width:Math.max(5,i),height:Math.max(4,o),fillColor:"#60a5fa",strokeColor:"#2563eb"},E(d,l,c,i,o)):I===IV.STAGE?(d={type:IV.STAGE,width:Math.max(20,i),height:Math.max(15,o),fillColor:"#333333",strokeColor:"#2563eb"},E(d,l,c,i,o)):I===IV.SEAT&&(d={type:IV.SEAT,width:Math.max(1,i),height:Math.max(1,o)},E(d,l,c,i,o))}}ne(!1),se(null),ie(null)}},onMouseLeave:()=>{Q&&(Y(!1),M?.()),Ce(null),Ne(null)},style:{display:"block",willChange:"transform",cursor:Q||J?"grab":I?"crosshair":"pointer"},children:[c.jsxs(nV,{ref:W,...mt,listening:!0,children:[$&&U>0&&c.jsx(aV,{listening:!1,children:(()=>{const e=[];for(let t=U;t<100;t+=U){const n=t/100*et;e.push({x1:n,y1:0,x2:n,y2:tt})}for(let t=U;t<100;t+=U){const n=t/100*tt;e.push({x1:0,y1:n,x2:et,y2:n})}return e.map((e,t)=>c.jsx(iV,{points:[e.x1,e.y1,e.x2,e.y2],stroke:"rgba(100, 150, 255, 0.2)",strokeWidth:1,perfectDrawEnabled:!1,dash:[2,2]},`grid-line-${t}`))})()}),c.jsx(sV,{name:"canvas-background",x:st,y:rt,width:nt,height:at,fill:B,listening:!1}),V?c.jsx(oV,{name:"background-image",image:V,x:st,y:rt,width:nt,height:at,listening:!0,onMouseMove:e=>{if(I===IV.FREEFORM&&oe.length>0){const t=e.target.getStage()?.getPointerPosition();if(t){const e=Ke(t.x,t.y);de(e)}}},onClick:e=>{if(Pe.current)return void(Pe.current=!1);if(I===IV.FREEFORM&&E){e.cancelBubble=!0;const t=e.target.getStage()?.getPointerPosition();if(t){const e=Ke(t.x,t.y);if(oe.length>=2){const t=oe[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...oe,t],n=e.reduce((e,t)=>e+t.x,0),a=e.reduce((e,t)=>e+t.y,0),s=n/e.length,r=a/e.length,i=[];e.forEach(e=>{i.push(e.x-s,e.y-r)});const o={type:IV.FREEFORM,points:i};return E(o,s,r),le([]),void de(null)}}le(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}return}const t=e.target;if(!t||"background-image"!==t.name()||I||te||_?.(),N){const t=e.target.getStage()?.getPointerPosition();if(t){const n=Ke(t.x,t.y);N(e,n)}else N(e)}},onDblClick:e=>{if(I===IV.FREEFORM&&oe.length>=2&&E){e.cancelBubble=!0;const t=[...oe,oe[0]],n=t.reduce((e,t)=>e+t.x,0),a=t.reduce((e,t)=>e+t.y,0),s=n/t.length,r=a/t.length,i=[];t.forEach(e=>{i.push(e.x-s,e.y-r)});const o={type:IV.FREEFORM,points:i};E(o,s,r),le([]),de(null)}},onTap:e=>{const t=e.target;!t||"background-image"!==t.name()||I||te||_?.()}}):c.jsx(sV,{name:"background-image",x:st,y:rt,width:nt,height:at,fill:B,listening:!0,onMouseMove:e=>{if(I===IV.FREEFORM&&oe.length>0){const t=e.target.getStage()?.getPointerPosition();if(t){const e=Ke(t.x,t.y);de(e)}}},onClick:e=>{if(Pe.current)return void(Pe.current=!1);if(I===IV.FREEFORM&&E){e.cancelBubble=!0;const t=e.target.getStage()?.getPointerPosition();if(t){const e=Ke(t.x,t.y);if(oe.length>=2){const t=oe[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...oe,t],n=e.reduce((e,t)=>e+t.x,0),a=e.reduce((e,t)=>e+t.y,0),s=n/e.length,r=a/e.length,i=[];e.forEach(e=>{i.push(e.x-s,e.y-r)});const o={type:IV.FREEFORM,points:i};return E(o,s,r),le([]),void de(null)}}le(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}return}const t=e.target;if(!t||"background-image"!==t.name()||I||te||_?.(),N){const t=e.target.getStage()?.getPointerPosition();if(t){const n=Ke(t.x,t.y);N(e,n)}else N(e)}},onDblClick:e=>{if(I===IV.FREEFORM&&oe.length>=2&&E){e.cancelBubble=!0;const t=[...oe,oe[0]],n=t.reduce((e,t)=>e+t.x,0),a=t.reduce((e,t)=>e+t.y,0),s=n/t.length,r=a/t.length,i=[];t.forEach(e=>{i.push(e.x-s,e.y-r)});const o={type:IV.FREEFORM,points:i};E(o,s,r),le([]),de(null)}},onTap:e=>{const t=e.target;!t||"background-image"!==t.name()||I||te||_?.()}})]}),c.jsxs(nV,{...mt,listening:!0,children:[pt.map(e=>{const t=e.id===me&&xe?xe:{x:e.x,y:e.y},{x:n,y:a}=qe(t.x,t.y),s=Te(e);return c.jsx(Vq,{seat:e,x:n,y:a,isSelected:_e.has(e.id),isAnchor:o===e.id&&r&&r.length>1,isPlacingSeats:u,isPanning:Q,isSpacePressed:J,isPlacingSections:h,selectedShapeTool:I,onSeatClick:x,onSeatDragStart:Qe,onSeatDragMove:Ye,onSeatDragEnd:We,onShapeTransform:C,layerToPercentage:He,colors:s,imageWidth:nt,imageHeight:at,readOnly:m,disableHoverAnimation:ct,useLowDetail:dt},e.id)}),"large"===F&&xt.map(e=>{const t=e.id===fe&&xe?xe:{x:e.x,y:e.y},{x:n,y:a}=qe(t.x,t.y);return c.jsx(qq,{section:e,x:n,y:a,isSelected:Ee.has(e.id),isAnchor:l===e.id&&i&&i.length>1,isPlacingSections:h,isPanning:Q,isSpacePressed:J,isPlacingSeats:u,onSectionClick:v,onSectionDoubleClick:y,onSectionDragEnd:Xe,onSectionDragMove:Je,onSectionDragStart:Ze,selectedShapeTool:I,onShapeTransform:k,layerToPercentage:He,colors:Me(e),imageWidth:nt,imageHeight:at,readOnly:m,disableHoverAnimation:ct,useLowDetail:dt},e.id)}),lt.map(e=>{const t=z===e.id;return c.jsx(Uq,{overlay:e,isSelected:t,onShapeOverlayClick:P,imageWidth:nt,imageHeight:at,isPanning:Q,isSpacePressed:J,selectedShapeTool:I,isPlacingSeats:u,isPlacingSections:h,percentageToStage:qe,disableHoverAnimation:ct},e.id)})]}),c.jsxs(nV,{...mt,listening:!0,children:[ft.map(e=>{const t=e.id===me&&xe?xe:{x:e.x,y:e.y},{x:n,y:a}=qe(t.x,t.y),s=Te(e);return c.jsx(Vq,{seat:e,x:n,y:a,isSelected:!0,isAnchor:o===e.id&&r&&r.length>1,isPlacingSeats:u,isPanning:Q,isSpacePressed:J,isPlacingSections:h,selectedShapeTool:I,onSeatClick:x,onSeatDragStart:Qe,onSeatDragMove:Ye,onSeatDragEnd:We,onShapeTransform:C,layerToPercentage:He,colors:s,imageWidth:nt,imageHeight:at,readOnly:m,disableHoverAnimation:ct,useLowDetail:!1,onTransformProgress:Re},e.id)}),"large"===F&&vt.map(e=>{const t=e.id===fe&&xe?xe:{x:e.x,y:e.y},{x:n,y:a}=qe(t.x,t.y);return c.jsx(qq,{section:e,x:n,y:a,isSelected:!0,isAnchor:l===e.id&&i&&i.length>1,isPlacingSections:h,isPanning:Q,isSpacePressed:J,isPlacingSeats:u,onSectionClick:v,onSectionDoubleClick:y,onSectionDragEnd:Xe,onSectionDragMove:Je,onSectionDragStart:Ze,selectedShapeTool:I,onShapeTransform:k,layerToPercentage:He,colors:Me(e),imageWidth:nt,imageHeight:at,readOnly:m,disableHoverAnimation:ct,useLowDetail:!1,onTransformProgress:Re},e.id)}),gt&&me&&!_e.has(me)&&(()=>{const e=xe??{x:gt.x,y:gt.y},{x:t,y:n}=qe(e.x,e.y),a=Te(gt);return c.jsx(Vq,{seat:gt,x:t,y:n,isSelected:!1,isAnchor:o===gt.id&&r&&r.length>1,isPlacingSeats:u,isPanning:Q,isSpacePressed:J,isPlacingSections:h,selectedShapeTool:I,onSeatClick:x,onSeatDragStart:Qe,onSeatDragMove:Ye,onSeatDragEnd:We,onShapeTransform:C,colors:a,imageWidth:nt,imageHeight:at,readOnly:m,disableHoverAnimation:ct,useLowDetail:!1,forceDraggable:!0},gt.id)})(),"large"===F&&yt&&fe&&!Ee.has(fe)&&(()=>{const e=xe??{x:yt.x,y:yt.y},{x:t,y:n}=qe(e.x,e.y);return c.jsx(qq,{section:yt,x:t,y:n,isSelected:!1,isAnchor:l===yt.id&&i&&i.length>1,isPlacingSections:h,isPanning:Q,isSpacePressed:J,isPlacingSeats:u,onSectionClick:v,onSectionDoubleClick:y,onSectionDragEnd:Xe,onSectionDragMove:Je,onSectionDragStart:Ze,selectedShapeTool:I,onShapeTransform:k,layerToPercentage:He,colors:Me(yt),imageWidth:nt,imageHeight:at,readOnly:m,disableHoverAnimation:ct,useLowDetail:!1,forceDraggable:!0},yt.id)})()]}),c.jsxs(nV,{...mt,listening:!0,onClick:e=>{if(I===IV.FREEFORM&&E){const t=e.target;if(t&&("seat-marker"===t.name()||"section-marker"===t.name()))return;e.cancelBubble=!0;const n=e.target.getStage()?.getPointerPosition();if(n){const e=Ke(n.x,n.y);if(oe.length>=2){const t=oe[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...oe,t],n=e.reduce((e,t)=>e+t.x,0),a=e.reduce((e,t)=>e+t.y,0),s=n/e.length,r=a/e.length,i=[];e.forEach(e=>{i.push(e.x-s,e.y-r)});const o={type:IV.FREEFORM,points:i};return E(o,s,r),le([]),void de(null)}}le(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}}},children:[c.jsx(sV,{x:st,y:rt,width:nt,height:at,fill:"transparent",listening:!1,onMouseMove:e=>{if(I===IV.FREEFORM&&oe.length>0){const t=e.target.getStage()?.getPointerPosition();if(t){const e=Ke(t.x,t.y);de(e)}}},onClick:e=>{if(Pe.current)return void(Pe.current=!1);if(I===IV.FREEFORM&&E){e.cancelBubble=!0;const t=e.target.getStage()?.getPointerPosition();if(t){const e=Ke(t.x,t.y);if(oe.length>=2){const t=oe[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...oe,t],n=e.reduce((e,t)=>e+t.x,0),a=e.reduce((e,t)=>e+t.y,0),s=n/e.length,r=a/e.length,i=[];e.forEach(e=>{i.push(e.x-s,e.y-r)});const o={type:IV.FREEFORM,points:i};return E(o,s,r),le([]),void de(null)}}le(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}return}const t=e.target;if(!t||"background-image"!==t.name()||I||te||_?.(),N){const t=e.target.getStage()?.getPointerPosition();if(t){const n=Ke(t.x,t.y);N(e,n)}else N(e)}},onDblClick:e=>{if(I===IV.FREEFORM&&oe.length>=2&&E){e.cancelBubble=!0;const t=[...oe,oe[0]],n=t.reduce((e,t)=>e+t.x,0),a=t.reduce((e,t)=>e+t.y,0),s=n/t.length,r=a/t.length,i=[];t.forEach(e=>{i.push(e.x-s,e.y-r)});const o={type:IV.FREEFORM,points:i};E(o,s,r),le([]),de(null)}},onTap:e=>{const t=e.target;!t||"background-image"!==t.name()||I||te||_?.()}}),I===IV.FREEFORM&&oe.length>0&&(()=>{const e=[];for(let t=0;t<oe.length-1;t++){const n=oe[t],a=oe[t+1],{x:s,y:r}=qe(n.x,n.y),{x:i,y:o}=qe(a.x,a.y);e.push({points:[0,0,i-s,o-r],x:s,y:r})}if(ce&&oe.length>0){const t=oe[oe.length-1],{x:n,y:a}=qe(t.x,t.y),{x:s,y:r}=qe(ce.x,ce.y);e.push({points:[0,0,s-n,r-a],x:n,y:a})}return c.jsx(c.Fragment,{children:e.map((t,n)=>c.jsx(iV,{points:t.points,x:t.x,y:t.y,stroke:"#3b82f6",strokeWidth:1.5,opacity:.8,dash:n===e.length-1?[5,5]:void 0},`freeform-preview-${n}`))})})(),te&&ae&&I&&I!==IV.FREEFORM&&(()=>{if(re){const e=ae.x,t=ae.y,n=re.x,a=re.y,s=1.5,r=Math.max(s,Math.abs(n-e)),i=Math.max(s,Math.abs(a-t)),o=(e+n)/2,l=(t+a)/2,{x:d,y:u}=qe(o,l);let h;if(I===IV.CIRCLE){const e=Math.max(r,i)/2;h={type:IV.CIRCLE,radius:Math.max(.8,e)}}else if(I===IV.RECTANGLE)h={type:IV.RECTANGLE,width:Math.max(1,r),height:Math.max(1,i),cornerRadius:2};else if(I===IV.ELLIPSE)h={type:IV.ELLIPSE,width:Math.max(1,r),height:Math.max(1,i)};else if(I===IV.POLYGON){const e=r/2,t=i/2,n=[-1,-1,1,-1,1.5,0,1,1,-1,1,-1.5,0].map((n,a)=>a%2==0?n*e:n*t);h={type:IV.POLYGON,points:n}}else h=I===IV.SOFA?{type:IV.SOFA,width:Math.max(5,r),height:Math.max(4,i),fillColor:"#60a5fa",strokeColor:"#2563eb"}:I===IV.STAGE?{type:IV.STAGE,width:Math.max(20,r),height:Math.max(15,i),fillColor:"#333333",strokeColor:"#2563eb"}:I===IV.SEAT?{type:IV.SEAT,width:Math.max(1,r),height:Math.max(1,i)}:{type:IV.POLYGON,points:[-1,-1,1,-1,1.5,0,1,1,-1,1,-1.5,0]};return c.jsx(aV,{ref:ue,x:d,y:u,children:c.jsx(zV,{shape:h,fill:"rgba(59, 130, 246, 0.15)",stroke:"#3b82f6",strokeWidth:1.5,imageWidth:nt,imageHeight:at,opacity:.8})})}return null})()]}),je&&ke&&c.jsx(nV,{listening:!1,children:c.jsx(sV,{x:Math.min(je.x,ke.x),y:Math.min(je.y,ke.y),width:Math.abs(ke.x-je.x),height:Math.abs(ke.y-je.y),stroke:"#3b82f6",strokeWidth:1,dash:[6,4],fill:"rgba(59, 130, 246, 0.1)"})})]}):c.jsxs("div",{style:{width:et,height:tt,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),c.jsx("p",{style:{color:"#6b7280",fontSize:"14px"},children:"Loading image..."})]}),c.jsx("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})}function Gq(e,t,n,a){const s=new Set;return e.forEach(e=>{e.seat.section&&s.add(e.seat.section)}),t&&t.forEach(e=>{s.add(e.name)}),"section-level"===a&&n&&n.forEach(e=>{s.add(e.name)}),Array.from(s).sort()}const Kq=ED({name:kD().min(1,"Section name is required")}),Wq=ED({section:kD().min(1,"Section is required"),sectionId:kD().optional(),row:kD().min(1,"Row is required"),seatNumber:kD().min(1,"Seat number is required"),seatType:AD($q,{errorMap:()=>({message:"Seat type is required"})})});function Qq({initialSeats:e,initialSections:t,initialCanvasBackgroundColor:n,initialMarkerFillTransparency:a}){const[s,r]=p.useState(e||[]),[i,o]=p.useState(t||[]),[l,c]=p.useState(n||mV),[d,u]=p.useState(a??1),[h,m]=p.useState([]),[f,g]=p.useState([]),x=p.useCallback(()=>({seats:[...s],sectionMarkers:[...i],canvasBackgroundColor:l,markerFillTransparency:d}),[s,i,l,d]),v=p.useCallback(e=>{r(e.seats),o(e.sectionMarkers),c(e.canvasBackgroundColor),u(e.markerFillTransparency)},[]),{recordSnapshot:y,undo:b,redo:w,clearHistory:S,canUndo:j,canRedo:C}=function({getSnapshot:e,restoreSnapshot:t,maxHistory:n=50}){const[a,s]=p.useState([]),[r,i]=p.useState([]),o=p.useRef(!1);return{recordSnapshot:p.useCallback(()=>{if(o.current)return;const t=e();s(e=>{const a=[...e,t];return a.length>n?a.slice(-n):a}),i([])},[e,n]),undo:p.useCallback(()=>{if(0===a.length)return;const n=e(),r=a[a.length-1];s(e=>e.slice(0,-1)),i(e=>[n,...e]),o.current=!0,t(r),Promise.resolve().then(()=>{o.current=!1})},[a,e,t]),redo:p.useCallback(()=>{if(0===r.length)return;const n=e(),a=r[0];i(e=>e.slice(1)),s(e=>[...e,n]),o.current=!0,t(a),Promise.resolve().then(()=>{o.current=!1})},[r,e,t]),clearHistory:p.useCallback(()=>{s([]),i([])},[]),canUndo:a.length>0,canRedo:r.length>0}}({getSnapshot:x,restoreSnapshot:v}),k=p.useCallback(e=>{y(),c(e)},[y]),N=p.useCallback(e=>{y(),u(e)},[y]),_=p.useCallback(e=>{y(),"small"===e||o([]),r([])},[y]),E=p.useCallback(e=>{y(),r(t=>[...t,e])},[y]),P=p.useCallback((e,t)=>{y(),r(n=>n.map(n=>n.id===e?{...n,...t}:n))},[y]),A=p.useCallback(e=>{y(),r(t=>{const n=[...t];return e.forEach(({id:e,updates:t})=>{const a=n.findIndex(t=>t.id===e);-1!==a&&(n[a]={...n[a],...t})}),n})},[y]),R=p.useCallback(e=>{y();const t=s.find(t=>t.id===e);t&&!t.isNew&&m(t=>[...t,e]),r(t=>t.filter(t=>t.id!==e))},[s,y]),T=p.useCallback(e=>{y();const t={...e,id:e.id||`section-${Date.now()}`,name:e.name,x:e.x??50,y:e.y??50,isNew:!0};o(e=>[...e,t])},[y]),M=p.useCallback((e,t)=>{y(),o(n=>n.map(n=>n.id===e?{...n,...t}:n))},[y]),D=p.useCallback(e=>{y(),o(t=>{const n=[...t];return e.forEach(({id:e,updates:t})=>{const a=n.findIndex(t=>t.id===e);-1!==a&&(n[a]={...n[a],...t})}),n})},[y]),L=p.useCallback(e=>{y();const t=i.find(t=>t.id===e);t&&!t.isNew&&g(t=>[...t,e]),o(t=>t.filter(t=>t.id!==e))},[i,y]);return{seats:s,setSeats:r,sectionMarkers:i,setSectionMarkers:o,canvasBackgroundColor:l,setCanvasBackgroundColor:c,handleCanvasBackgroundColorChange:k,markerFillTransparency:d,setMarkerFillTransparency:u,handleMarkerFillTransparencyChange:N,deletedSeatIds:h,setDeletedSeatIds:m,deletedSectionIds:f,setDeletedSectionIds:g,recordSnapshot:y,undo:b,redo:w,clearHistory:S,canUndo:j,canRedo:C,clearAllPlacements:_,addSeat:E,updateSeat:P,batchUpdateSeats:A,removeSeat:R,addSection:T,updateSection:M,batchUpdateSections:D,removeSection:L,isDirty:j}}function Yq(e,t,n,a){const{toast:s}=Vk(),[r,i]=p.useState(e),[o,l]=p.useState(null),[c,d]=p.useState(!1),[u,h]=p.useState(a),[m,f]=p.useState(!1),[g,x]=p.useState(null);p.useEffect(()=>{e&&i(e)},[e]),p.useEffect(()=>{if(!r)return void l(null);const e=new window.Image;e.crossOrigin="anonymous",e.src=r,e.onload=()=>{l(e)}},[r]);const v=p.useCallback(async e=>{d(!0),x(e);try{const{url:n,id:a}=await GP.uploadImage(e);i(n),h(a),t?.(n,a),s({title:"Image uploaded",description:"Seat map image has been uploaded successfully."})}catch(n){s({title:"Upload failed",description:"Failed to upload seat map image. Please try again.",variant:"destructive"})}finally{d(!1)}},[t,s]),y=p.useCallback(()=>{i(void 0),l(null),h(void 0),x(null),n?.()},[n]),b=p.useCallback(async e=>{if(g){f(!0);try{const t=(await async function(e){const t=new FormData;return t.append("file",e),Fs.postForm("/api/v1/ai/detect-markers",t,{requiresAuth:!0})}(g)).sections.map(e=>({id:crypto.randomUUID(),x:e.x,y:e.y,name:e.label||`Section ${e.index+1}`,capacity:100,row_count:10,is_general_admission:!1}));e(t),s({title:"Detection complete",description:`Detected ${t.length} sections.`})}catch(t){s({title:"Detection failed",description:"Failed to detect sections. Please try again.",variant:"destructive"})}finally{f(!1)}}else s({title:"No image",description:"Please upload an image first to detect sections.",variant:"destructive"})},[g,s]),w=p.useCallback(async e=>{if(g){f(!0);try{const t=(await async function(e){const t=new FormData;return t.append("file",e),Fs.postForm("/api/v1/ai/detect-seats",t,{requiresAuth:!0})}(g)).seats.map(e=>({id:crypto.randomUUID(),x:e.x,y:e.y,seat:{row:e.row||"1",seatNumber:e.seat_number||`${e.index+1}`,section:"General",seatType:$q.STANDARD,sectionId:""},isNew:!0}));e(t),s({title:"Detection complete",description:`Detected ${t.length} seats.`})}catch(t){s({title:"Detection failed",description:"Failed to detect seats. Please try again.",variant:"destructive"})}finally{f(!1)}}else s({title:"No image",description:"Please upload an image first to detect seats.",variant:"destructive"})},[g,s]);return{imageUrl:r,image:o,isUploadingImage:c,imageUploadId:u,isDetecting:m,handleImageUpload:v,handleRemoveImage:y,handleDetectSections:b,handleDetectSeats:w}}function Xq({onUndo:e,onRedo:t,onSave:n,onDelete:a,onEscape:s,onSelectAll:r,onCopy:i,onPaste:o,onArrowMove:l}){p.useEffect(()=>{const c=c=>{if(!(c.target instanceof HTMLInputElement||c.target instanceof HTMLTextAreaElement||c.target.isContentEditable)&&(!c.ctrlKey&&!c.metaKey||"z"!==c.key||c.shiftKey||(c.preventDefault(),e?.()),((c.ctrlKey||c.metaKey)&&"y"===c.key||(c.ctrlKey||c.metaKey)&&c.shiftKey&&"z"===c.key)&&(c.preventDefault(),t?.()),(c.ctrlKey||c.metaKey)&&"s"===c.key&&(c.preventDefault(),n?.()),"Delete"!==c.key&&"Backspace"!==c.key||(c.preventDefault(),a?.()),"Escape"===c.key&&(c.preventDefault(),s?.()),(c.ctrlKey||c.metaKey)&&"a"===c.key&&(c.preventDefault(),r?.()),(c.ctrlKey||c.metaKey)&&"c"===c.key&&(c.preventDefault(),i?.()),(c.ctrlKey||c.metaKey)&&"v"===c.key&&(c.preventDefault(),o?.()),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(c.key))){c.preventDefault();const e=c.key.replace("Arrow","").toLowerCase(),t=c.shiftKey;l?.(e,t)}};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[e,t,n,a,s,r,i,o,l])}function Zq({id:e,label:t,isUploading:n=!1,onFileSelect:a}){return c.jsx(Sl,{className:"border-2 border-dashed border-gray-200 bg-gray-50/50 hover:bg-gray-100/50 transition-colors",children:c.jsxs(Fl,{htmlFor:e,className:"flex flex-col items-center justify-center w-full h-full py-12 cursor-pointer gap-4",children:[c.jsx("div",{className:"bg-white p-4 rounded-full shadow-sm ring-1 ring-gray-200/50",children:c.jsx(lx,{className:"h-6 w-6 text-gray-500"})}),c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("span",{className:"text-base font-medium text-gray-900 block",children:n?"Uploading...":t}),c.jsx("p",{className:"text-sm text-gray-500",children:"Click to select an image from your device"})]}),c.jsx(_l,{id:e,type:"file",accept:"image/*",onChange:a,className:"hidden",disabled:n})]})})}function Jq({open:e,onOpenChange:t,form:n,editingSectionId:a,isCreating:s,isUpdating:r,onSave:i,onCancel:o}){const l=n.watch("name"),d=(l?.trim()||"").length>0;f.useEffect(()=>{e&&void 0!==l&&n.trigger("name")},[e,l,n]);const u=d;return c.jsx(CE,{open:e,onOpenChange:t,children:c.jsxs(EE,{side:"right",className:"flex flex-col h-full",children:[c.jsxs(PE,{children:[c.jsx(RE,{children:a?"Edit Section":"New Section"}),c.jsx(TE,{children:a?"Update the section details":"Create a new section for your layout"})]}),c.jsx("div",{className:"mt-6 flex-1  min-h-0",children:c.jsxs("div",{className:"px-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx(Fl,{htmlFor:"section-name",children:"Section Name"}),c.jsx(fR,{name:"name",control:n.control,render:({field:e})=>c.jsx(_l,{...e,id:"section-name",className:"mt-2",placeholder:"e.g., Section A, VIP Area, General Admission",autoFocus:!0})}),n.formState.errors.name&&c.jsx("p",{className:"text-sm text-destructive mt-1",children:n.formState.errors.name.message})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(bl,{variant:"outline",onClick:o,className:"flex-1",children:"Cancel"}),c.jsx(bl,{onClick:i,disabled:s||r||!u,className:"flex-1",children:a?"Update":"Create"})]})]})})]})})}function eH({form:e,uniqueSections:t,sectionsData:n,sectionMarkers:a,designMode:s,viewingSection:r,onSave:i,onCancel:o,isUpdating:l=!1,standalone:d=!1}){const u=t=>{e.setValue("section",t);const r="seat-level"===s?n:a,i=r?.find(e=>e.name===t);i&&e.setValue("sectionId",i.id)};return c.jsxs("div",{className:sl("flex items-center gap-2 flex-wrap",!d&&"border-l pl-2.5"),children:[c.jsx("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap shrink-0",children:"Edit:"}),c.jsx(fR,{name:"section",control:e.control,render:({field:e})=>c.jsxs(bx,{value:r?r.name:e.value||"",onValueChange:u,disabled:!!r,children:[c.jsx(Sx,{className:"h-6 text-xs w-20 min-w-20",children:c.jsx(wx,{placeholder:"Section"})}),c.jsx(kx,{children:t.map(e=>c.jsx(Nx,{value:e,children:e},e))})]})}),c.jsx(fR,{name:"row",control:e.control,render:({field:e})=>c.jsx(_l,{...e,className:"h-6 text-xs w-10",placeholder:"Row"})}),c.jsx(fR,{name:"seatNumber",control:e.control,render:({field:e})=>c.jsx(_l,{...e,className:"h-6 text-xs w-10",placeholder:"#"})}),c.jsx(fR,{name:"seatType",control:e.control,render:({field:e})=>c.jsxs(bx,{value:e.value,onValueChange:e.onChange,children:[c.jsx(Sx,{className:"h-6 text-xs w-20",children:c.jsx(wx,{})}),c.jsx(kx,{children:Object.values($q).map(e=>c.jsx(Nx,{value:e,children:e},e))})]})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",onClick:e.handleSubmit(i),disabled:l,className:sl("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-primary hover:border-primary hover:text-primary-foreground","bg-background border-border"),title:"Save",children:c.jsx(Yp,{className:"h-3 w-3"})}),c.jsx("button",{type:"button",onClick:o,disabled:l,className:sl("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Cancel",children:c.jsx(xx,{className:"h-3 w-3"})})]})]})}function tH({form:e,uniqueSections:t,sectionsData:n,sectionSelectValue:a,onSectionSelectValueChange:s,viewingSection:r,onNewSection:i,onManageSections:o,compact:l=!1}){const d=c.jsxs(c.Fragment,{children:[c.jsx(fR,{name:"section",control:e.control,render:({field:d})=>c.jsxs(bx,{value:r?r.name:a||d.value||"",onValueChange:t=>{if("new-section"===t)i(),s(d.value||"");else if("manage-sections"===t&&o)o(),s(d.value||"");else{d.onChange(t),s(t);const a=n?.find(e=>e.name===t);a&&e.setValue("sectionId",a.id)}},disabled:!!r,children:[c.jsx(Sx,{className:l?"h-6 text-xs w-20 min-w-20":"h-8 text-sm flex-1",children:c.jsx(wx,{placeholder:"Section"})}),c.jsxs(kx,{children:[t.map(e=>c.jsx(Nx,{value:e,children:e},e)),!r&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-px bg-border my-1 mx-2"}),c.jsx(Nx,{value:"new-section",children:c.jsx("div",{className:"flex items-center gap-2 font-medium text-primary",children:c.jsx("span",{children:"+ New Section"})})}),o&&c.jsx(Nx,{value:"manage-sections",children:c.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[c.jsx(Kg,{className:"h-3 w-3"}),c.jsx("span",{children:"Manage Sections"})]})})]})]})]})}),c.jsx(fR,{name:"row",control:e.control,render:({field:e})=>c.jsx(_l,{...e,className:l?"h-6 text-xs w-10":"h-8 text-sm w-16",placeholder:"Row"})}),c.jsx(fR,{name:"seatNumber",control:e.control,render:({field:e})=>c.jsx(_l,{...e,className:l?"h-6 text-xs w-10":"h-8 text-sm w-16",placeholder:"#"})})]}),u=c.jsx(fR,{name:"seatType",control:e.control,render:({field:e})=>c.jsxs(bx,{value:e.value,onValueChange:e.onChange,children:[c.jsx(Sx,{className:l?"h-6 text-xs w-20":"mt-1 h-8 text-sm",children:c.jsx(wx,{})}),c.jsx(kx,{children:Object.values($q).map(e=>c.jsx(Nx,{value:e,children:e},e))})]})});return l?c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap shrink-0",children:"Place:"}),c.jsx("div",{className:"flex items-center gap-1.5",children:d}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"Type"}),u]})]}):c.jsx(Sl,{className:"p-3",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx(Fl,{className:"text-xs",children:"Section / Row / Seat #"}),c.jsx("div",{className:"flex gap-2 mt-1",children:d})]}),c.jsxs("div",{children:[c.jsx(Fl,{className:"text-xs",children:"Type"}),u]})]})})}function nH({value:e,onCommit:t,min:n,max:a,step:s,fallback:r,className:i,title:o,"aria-label":l}){const[d,u]=p.useState(String(e));p.useEffect(()=>{u(String(e))},[e]);const h=p.useCallback(()=>{const e=parseFloat(d),n=isNaN(e)?r:e;t(n),u(String(n))},[d,r,t]);return c.jsx(_l,{type:"number",min:n,max:a,step:s,value:d,onChange:e=>u(e.target.value),onBlur:h,onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:i,title:o,"aria-label":l})}const aH=[{type:IV.CIRCLE,icon:df,label:"Circle"},{type:IV.RECTANGLE,icon:Wg,label:"Rectangle"},{type:IV.ELLIPSE,icon:df,label:"Ellipse"},{type:IV.POLYGON,icon:Tf,label:"Polygon"},{type:IV.FREEFORM,icon:gg,label:"Freeform"},{type:IV.SOFA,icon:Rp,label:"Sofa"},{type:IV.STAGE,icon:Ng,label:"Stage"},{type:IV.SEAT,icon:yg,label:"Seat"}];function sH({selectedShapeType:e,onShapeTypeSelect:t,selectedSeat:n,selectedSection:a,onSeatEdit:s,onSeatView:r,onSectionEdit:i,onSectionView:o,onSeatDelete:l,onSectionDelete:d,onSeatShapeStyleChange:u,onSectionShapeStyleChange:h,onAlign:m,selectedSeatCount:f=0,selectedSectionCount:g=0,seatPlacementControls:x,seatEditControls:v,className:y,readOnly:b=!1,level:w="seat"}){const S=!b&&m&&f+g>=2,[j,C]=p.useState([IV.CIRCLE,IV.RECTANGLE,IV.ELLIPSE,IV.POLYGON]),[k,N]=p.useState(!1),_=n||a,E=n?`${n.seat.section} ${n.seat.row}-${n.seat.seatNumber}`:a?a.name:null,P=n&&s?()=>s(n):a&&i?()=>i(a):void 0,A=n&&r?()=>r(n):a&&o?()=>o(a):void 0,R=n&&l?()=>l(n):a&&d?()=>d(a):void 0,T=n?.shape??a?.shape,M=n&&u?e=>u(n.id,e):a&&h?e=>h(a.id,e):void 0,D=!b&&_&&M&&(n||a&&a.shape),L=!(!n||!v);return c.jsx(Sl,{className:sl("px-3 py-2.5",y),children:c.jsxs("div",{className:"flex items-center gap-3 flex-wrap w-full",children:[!L&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Shapes:"}),c.jsxs("div",{className:"flex gap-1.5",children:[c.jsx("button",{type:"button",onClick:()=>t?.(null),disabled:b||!t,className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out",!b&&"hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95",b&&"opacity-50 cursor-not-allowed",e||b?"bg-background border-border":"bg-primary text-primary-foreground border-primary shadow-sm"),title:"Pointer (Select)",children:c.jsx(lg,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),j.map((n,a)=>{if("section"===w&&n===IV.SEAT)return null;const s=aH.find(e=>e.type===n)||aH[0],r=s.icon,i=e===n;return c.jsx("button",{type:"button",draggable:!b,onDragStart:e=>{e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("application/json",JSON.stringify({shapeType:n,dragSource:"shape-toolbox"}));const t=new Image;t.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%235b21b6' stroke='%235b21b6'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3C/svg%3E",e.dataTransfer.setDragImage(t,12,12)},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:e=>{e.preventDefault();const t=e.dataTransfer.getData("application/json");if(t)try{const e=JSON.parse(t);"shape-library"===e.dragSource&&e.shapeType&&((e,t)=>{const n=[...j];n[e]=t,C(n)})(a,e.shapeType)}catch(GQ){}},onDragEnd:e=>{e.dataTransfer.dropEffect="copy"},onClick:()=>{t?.(n)},disabled:b||!t,className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out",!b&&"hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95 cursor-grab active:cursor-grabbing",b&&"opacity-50 cursor-not-allowed",i?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background border-border"),title:`${s.label} (drag to canvas to place, drop from More to replace)`,children:c.jsx(r,{className:"h-3.5 w-3.5 transition-transform duration-200"})},`${n}-${a}`)}),c.jsxs(wE,{open:k,onOpenChange:N,children:[c.jsx(SE,{asChild:!0,children:c.jsx("button",{type:"button",disabled:b,className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out",!b&&"hover:bg-accent hover:border-accent-foreground hover:shadow-md active:scale-95",b&&"opacity-50 cursor-not-allowed","bg-background border-border"),title:"More Shapes (drag to toolbox to customize)",children:c.jsx(bf,{className:"h-3.5 w-3.5 transition-transform duration-200"})})}),c.jsx(jE,{className:"w-64 p-3",align:"start",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fl,{className:"text-xs font-semibold text-muted-foreground",children:"Available Shapes"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:aH.filter(e=>!j.includes(e.type)&&("section"!==w||e.type!==IV.SOFA&&e.type!==IV.SEAT)).map(n=>{const a=n.icon;return c.jsxs("button",{type:"button",draggable:!b,onDragStart:e=>{e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("application/json",JSON.stringify({shapeType:n.type,dragSource:"shape-library"}))},onClick:()=>{t?.(n.type)},onDoubleClick:()=>(n=>{const a=e?j.indexOf(e):-1,s=-1!==a?a:3,r=[...j];r[s]=n,C(r),t?.(n),N(!1)})(n.type),className:sl("flex flex-col items-center justify-center p-2 rounded border transition-all gap-1 h-16","hover:bg-accent hover:border-accent-foreground cursor-grab active:cursor-grabbing",e===n.type&&"bg-accent border-accent-foreground"),title:`${n.label} - Double click to add to toolbar`,children:[c.jsx(a,{className:"h-5 w-5"}),c.jsx("span",{className:"text-[10px] truncate w-full text-center",children:n.label})]},n.type)})}),c.jsx("p",{className:"text-[10px] text-muted-foreground mt-2",children:"Drag to toolbar or double-click to pin."})]})})]})]})]}),S&&c.jsxs("div",{className:"flex items-center gap-1 border-l pl-2.5",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground shrink-0",children:"Align:"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{type:"button",onClick:()=>m?.("left"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Align left",children:c.jsx(Pp,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("center"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Align center",children:c.jsx(Cp,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("right"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Align right",children:c.jsx(Np,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("top"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Align top",children:c.jsx(Ep,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("middle"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Align middle",children:c.jsx(jp,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("bottom"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Align bottom",children:c.jsx(kp,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("div",{className:"w-px h-5 bg-border shrink-0","aria-hidden":!0}),c.jsx("button",{type:"button",onClick:()=>m?.("space-between-h"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Space between horizontally",children:c.jsx(_p,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("space-between-v"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Space between vertically",children:c.jsx(Ap,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("space-between-both"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Spread (space between horizontally and vertically)",children:c.jsx(qf,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("same-width"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Same width",children:c.jsx(_g,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),c.jsx("button",{type:"button",onClick:()=>m?.("same-height"),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95","bg-background border-border"),title:"Same height",children:c.jsx(Eg,{className:"h-3.5 w-3.5 transition-transform duration-200"})})]})]}),!L&&!_&&e&&x&&c.jsx("div",{className:"flex items-center gap-2 border-l pl-2.5",children:x}),!L&&D&&c.jsxs("div",{className:"hidden flex items-center gap-2 border-l pl-2.5",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Fl,{className:"text-xs text-muted-foreground shrink-0 w-7",children:"Fill"}),c.jsx("input",{type:"color","aria-label":"Fill color",title:"Fill color",value:T?.fillColor?.trim()||pV,onChange:e=>M?.({fillColor:e.target.value}),className:"h-6 w-7 cursor-pointer rounded border shrink-0"}),c.jsx(_l,{className:"h-6 w-16 font-mono text-[11px] py-0 px-1 min-w-0",placeholder:"#rrggbb","aria-label":"Fill color hex",value:T?.fillColor?.trim()||"",onChange:e=>M?.({fillColor:e.target.value||void 0})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Fl,{className:"text-xs text-muted-foreground shrink-0 w-12",children:"Border"}),c.jsx("input",{type:"color","aria-label":"Border color",title:"Border color",value:T?.strokeColor?.trim()||fV,onChange:e=>M?.({strokeColor:e.target.value}),className:"h-6 w-7 cursor-pointer rounded border shrink-0"}),c.jsx(_l,{className:"h-6 w-16 font-mono text-[11px] py-0 px-1 min-w-0",placeholder:"#rrggbb","aria-label":"Border color hex",value:T?.strokeColor?.trim()||"",onChange:e=>M?.({strokeColor:e.target.value||void 0})})]}),c.jsx("button",{type:"button",onClick:()=>M?.({fillColor:void 0,strokeColor:void 0}),className:sl("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Reset to default colors","aria-label":"Reset to default colors",children:c.jsx(Rg,{className:"h-3 w-3 text-muted-foreground"})})]}),!L&&T&&c.jsxs("div",{className:"flex items-center gap-2 border-l pl-2.5",children:[T.type===IV.CIRCLE?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Fl,{className:"text-xs text-muted-foreground shrink-0",children:"Radius"}),c.jsx(nH,{min:"0.1",max:"50",step:"0.1",value:T.radius||1.2,onCommit:e=>M?.({radius:e}),fallback:1.2,className:"h-6 w-16 font-mono text-[11px] py-0 px-1",title:"Radius as % of canvas","aria-label":"Circle radius"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Fl,{className:"text-xs text-muted-foreground shrink-0",children:"W"}),c.jsx(nH,{min:"0.1",max:"100",step:"0.1",value:T.width||3,onCommit:e=>M?.({width:e}),fallback:3,className:"h-6 w-16 font-mono text-[11px] py-0 px-1",title:"Width as % of canvas","aria-label":"Shape width"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Fl,{className:"text-xs text-muted-foreground shrink-0",children:"H"}),c.jsx(nH,{min:"0.1",max:"100",step:"0.1",value:T.height||2,onCommit:e=>M?.({height:e}),fallback:2,className:"h-6 w-16 font-mono text-[11px] py-0 px-1",title:"Height as % of canvas","aria-label":"Shape height"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Fl,{className:"text-xs text-muted-foreground shrink-0",children:"R"}),c.jsx(nH,{min:"0",max:"360",step:"1",value:T.rotation||0,onCommit:e=>M?.({rotation:e}),fallback:0,className:"h-6 w-10 font-mono text-[11px] py-0 px-1",title:"Rotation in degrees","aria-label":"Shape rotation"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]}),n&&v?v:_&&E&&c.jsxs("div",{className:"flex items-center gap-1.5 ml-auto",children:[c.jsx("span",{className:"text-xs font-medium text-foreground whitespace-nowrap px-2.5 py-1",children:E}),A&&c.jsx("button",{type:"button",onClick:A,className:sl("flex items-center justify-center p-1 rounded border transition-all","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:a?"Open section detail":"View seat details","aria-label":a?"Open section detail":"View seat details",children:c.jsx(Sf,{className:"h-3 w-3 text-muted-foreground"})}),P&&!b&&c.jsx("button",{type:"button",onClick:P,className:sl("flex items-center justify-center p-1 rounded border transition-all","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Click to edit",children:c.jsx(Kg,{className:"h-3 w-3 text-muted-foreground"})}),R&&!b&&c.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),R()},className:sl("flex items-center justify-center p-1 rounded border transition-all","hover:bg-destructive hover:border-destructive hover:text-destructive-foreground","bg-background border-border"),title:"Delete marker",children:c.jsx(ax,{className:"h-3 w-3 text-destructive"})})]})]})})}function rH({seatPlacement:e,seatEditControls:t,readOnly:n=!1,...a}){const s=e&&!n?c.jsx(tH,{compact:!0,...e}):void 0;return c.jsx(sH,{...a,seatPlacementControls:s,seatEditControls:t,readOnly:n})}function iH({imageUrl:e,showImageUpload:t=!1,imageUploadId:n,imageUploadLabel:a,onImageUpload:s,isUploadingImage:r=!1,containerRef:i,dimensionsReady:o,containerDimensions:l,containerStyle:d="fixed",seats:u,selectedSeatId:h,selectedSeatIds:m=[],anchorSeatId:f,anchorSectionId:g,isPlacingSeats:x,readOnly:v,zoomLevel:y,panOffset:b,onSeatClick:w,onSeatDragEnd:S,onBatchSeatDragEnd:j,onSeatShapeTransform:C,onImageClick:k,onDeselect:N,onShapeDraw:_,onShapeOverlayClick:E,onMarkersInRect:P,onWheel:A,onPan:R,onZoomIn:T,onZoomOut:M,onResetZoom:D,selectedShapeTool:L,shapeOverlays:F,selectedOverlayId:I,canvasBackgroundColor:O="#e5e7eb",showGrid:z=!1,gridSize:B=5}){const[$,U]=p.useState(!1),V=p.useRef(null),q=!!e;!q&&l.width>0&&l.height>0?V.current||(V.current={w:l.width,h:l.height}):q&&(V.current=null);const H=q?l.width>0?l.width:800:V.current?.w??(l.width>0?l.width:800),G=q?l.height>0?l.height:600:V.current?.h??(l.height>0?l.height:600),K=q?G/H:3/4;let W,Q;K>G/H?(Q=G,W=Q/K):(W=H,Q=W*K);const Y=(H-W)/2,X=(G-Q)/2;if(t&&!e)return c.jsx(Zq,{id:n??"seat-design-image-upload",label:a??"Upload Floor Plan Image",isUploading:r,onFileSelect:s??(()=>{})});const Z="fixed"===d?{height:"600px",width:"100%",touchAction:"none",overscrollBehavior:"contain"}:{minHeight:"600px",minWidth:0,display:"flex",flexDirection:"column",height:"100%"};return c.jsx("div",{ref:i,className:`relative border rounded-lg overflow-hidden select-none w-full transition-colors ${e?"bg-gray-100":""} ${$?"ring-2 ring-primary bg-primary/5":""}`,style:e?Z:{...Z,backgroundColor:O},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",U(!0)},onDragLeave:e=>{e.currentTarget===e.target&&U(!1)},onDrop:e=>{e.preventDefault(),U(!1);const t=e.dataTransfer.getData("application/json");if(t&&_)try{const{shapeType:n,dragSource:a}=JSON.parse(t);if("shape-toolbox"!==a||!n)return;const s=n;if(!Object.values(IV).includes(s))return;const r=i.current?.getBoundingClientRect();if(!r)return;const o=e.clientX-r.left,l=e.clientY-r.top,c=(o-b.x)/y,d=(l-b.y)/y,u=(c-Y)/W*100,h=(d-X)/Q*100,m={[IV.CIRCLE]:{type:IV.CIRCLE,radius:2,fillColor:"#60a5fa",strokeColor:"#2563eb"},[IV.RECTANGLE]:{type:IV.RECTANGLE,width:4,height:3,fillColor:"#60a5fa",strokeColor:"#2563eb"},[IV.ELLIPSE]:{type:IV.ELLIPSE,width:4,height:3,fillColor:"#60a5fa",strokeColor:"#2563eb"},[IV.POLYGON]:{type:IV.POLYGON,points:[-1.5,-1,1.5,-1,2,1,0,2,-2,1],fillColor:"#60a5fa",strokeColor:"#2563eb"},[IV.FREEFORM]:{type:IV.FREEFORM,points:[0,50,50,0,100,50,50,100],fillColor:"#60a5fa",strokeColor:"#2563eb"},[IV.SOFA]:{type:IV.SOFA,width:36,height:24,fillColor:"#60a5fa",strokeColor:"#2563eb"},[IV.STAGE]:{type:IV.STAGE,width:150,height:80,fillColor:"#333333",strokeColor:"#2563eb"},[IV.SEAT]:{type:IV.SEAT,width:4,height:3,fillColor:"#60a5fa",strokeColor:"#2563eb"}}[s];if(!m)return;_(m,u,h)}catch(n){}},children:o?c.jsxs(c.Fragment,{children:[c.jsx(Hq,{imageUrl:e??void 0,seats:u,sections:[],selectedSeatId:h??null,selectedSeatIds:m,anchorSeatId:f??null,anchorSectionId:g??null,isPlacingSeats:x,isPlacingSections:!1,readOnly:v,zoomLevel:y,panOffset:b,onSeatClick:w,onSeatDragEnd:S,onBatchSeatDragEnd:j,onSeatShapeTransform:C,onImageClick:k,onDeselect:N,onShapeDraw:_,onShapeOverlayClick:E,onWheel:A,onPan:R,onMarkersInRect:P,containerWidth:l.width,containerHeight:l.height,venueType:"small",selectedShapeTool:L??null,shapeOverlays:F,selectedOverlayId:I,canvasBackgroundColor:O,showGrid:z,gridSize:B}),c.jsx(gz,{zoomLevel:y,panOffset:b,onZoomIn:T,onZoomOut:M,onResetZoom:D})]}):c.jsx("div",{className:"flex items-center justify-center w-full h-full py-12 text-muted-foreground",children:"Initializing canvas..."})})}function oH({viewingSection:e,className:t,readOnly:n=!1,displayedSeats:a,selectedSeat:s,seatPlacementForm:r,uniqueSections:i,sectionsData:o,sectionSelectValue:l,onSectionSelectValueChange:d,containerRef:u,dimensionsReady:h,containerDimensions:m,zoomLevel:f,panOffset:g,isPlacingSeats:x,isUploadingImage:v,onBack:y,onSave:b,onClearSectionSeats:w,onSectionImageSelect:S,onRemoveSectionImage:j,onSeatClick:C,onSeatDragEnd:k,onBatchSeatDragEnd:N,onSeatShapeTransform:_,onSeatShapeStyleChange:E,onImageClick:P,onDeselect:A,onWheel:R,onPan:T,onZoomIn:M,onZoomOut:D,onResetZoom:L,onNewSection:F,saveSeatsMutationPending:I,seats:O,onDeleteSeat:z,onSetViewingSeat:B,onEditSeat:$,onSetSelectedSeat:U,seatEditFormReset:V,selectedShapeTool:q,onShapeToolSelect:H,onShapeDraw:G,shapeOverlays:K,selectedOverlayId:W,onShapeOverlayClick:Q,onDetectSeats:Y,isDetectingSeats:X=!1,onMarkersInRect:Z,selectedSeatIds:J=[],onSelectSeatIds:ee,anchorSeatId:te,onAlign:ne,seatEditControls:ae,canvasBackgroundColor:se="#e5e7eb",onCanvasBackgroundColorChange:re,markerFillTransparency:ie=1,onMarkerFillTransparencyChange:oe,showGrid:le=!1,gridSize:ce=5,isFullscreen:de=!1,onToggleFullscreen:ue,onUndo:he,onRedo:me,canUndo:pe=!1,canRedo:fe=!1,isDirty:ge=!1,onRefresh:xe,isRefreshing:ve=!1}){const[ye,be]=p.useState(!1),we=e.canvasBackgroundColor??se??"#e5e7eb",Se=de?"flex flex-col flex-1 min-h-0 p-6 space-y-4":"p-6 space-y-4",je=p.useMemo(()=>[c.jsxs(mj,{onClick:w,children:[c.jsx(Bp,{className:"h-4 w-4 mr-2"}),"Clear All Placements"]}),c.jsx(xj,{}),!e.imageUrl&&c.jsx(Fl,{htmlFor:`add-section-image-${e.id}`,className:"cursor-pointer",children:c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Lf,{className:"h-4 w-4 mr-2"}),"Add floor plan image",c.jsx(_l,{id:`add-section-image-${e.id}`,type:"file",accept:"image/*",onChange:t=>{S(e.id,t),t.target.value=""},className:"hidden"})]})})}),e.imageUrl&&S&&c.jsx(Fl,{htmlFor:`change-section-image-${e.id}`,className:"cursor-pointer",children:c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Lf,{className:"h-4 w-4 mr-2"}),"Change Image",c.jsx(_l,{id:`change-section-image-${e.id}`,type:"file",accept:"image/*",onChange:t=>{S(e.id,t),t.target.value=""},className:"hidden"})]})})}),re&&!e.imageUrl&&c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-2 py-1.5",children:[c.jsx(dg,{className:"h-4 w-4 shrink-0"}),c.jsx("span",{className:"flex-1",children:"Canvas background color"}),c.jsx("input",{type:"color","aria-label":"Canvas background color",value:we,onChange:e=>re(e.target.value),className:"h-6 w-8 cursor-pointer rounded border border-input"})]})}),oe&&c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-2 py-1.5",children:[c.jsx($f,{className:"h-4 w-4 shrink-0"}),c.jsx("span",{className:"flex-1",children:"Transparency"}),c.jsx("input",{type:"range",min:"0",max:"100",value:100*(ie??1),onChange:e=>oe(parseInt(e.target.value)/100),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer min-w-0",title:"Adjust marker fill transparency for this section"}),c.jsxs("span",{className:"text-xs text-muted-foreground w-8 text-right shrink-0",children:[Math.round(100*(ie??1)),"%"]})]})}),e.imageUrl&&j&&c.jsxs(c.Fragment,{children:[c.jsx(xj,{}),c.jsxs(mj,{onClick:()=>j(e.id),className:"text-destructive focus:text-destructive",children:[c.jsx(ax,{className:"h-4 w-4 mr-2"}),"Remove Image"]})]})],[w,ie,oe]);return c.jsxs(Sl,{className:t,children:[c.jsxs("div",{className:Se,children:[c.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{variant:"ghost",size:"sm",onClick:y,className:"h-8 w-8 p-0",title:"Back to Main Floor Plan",children:c.jsx(Tp,{className:"h-4 w-4"})}),c.jsxs("h3",{className:"text-lg font-semibold",children:["Section: ",e.name]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[xe&&c.jsx(bl,{variant:"outline",onClick:xe,disabled:ve,size:"sm",className:"h-7 w-7 p-0",title:"Refresh data from server",children:c.jsx(Ag,{className:"h-3.5 w-3.5 "+(ve?"animate-spin":"")})}),!de&&c.jsx(bl,{onClick:()=>be(!0),variant:"outline",size:"sm",className:"h-7 w-7 p-0",title:"View seat list",children:c.jsx(Gf,{className:"h-3.5 w-3.5"})}),Y&&e.imageUrl&&!n&&c.jsxs(bl,{variant:"outline",onClick:Y,disabled:X,size:"sm",className:"h-7 px-2",title:"Detect seats from section image (AI)",children:[c.jsx(Fg,{className:"h-3.5 w-3.5 mr-1"}),X?"Detecting":"Detect seats"]}),!n&&he&&me&&c.jsxs(c.Fragment,{children:[c.jsx(bl,{variant:"outline",onClick:he,disabled:!pe,size:"sm",className:"h-7 w-7 p-0",title:"Undo (Ctrl+Z)",children:c.jsx(ox,{className:"h-3.5 w-3.5"})}),c.jsx(bl,{variant:"outline",onClick:me,disabled:!fe,size:"sm",className:"h-7 w-7 p-0",title:"Redo (Ctrl+Shift+Z)",children:c.jsx(Pg,{className:"h-3.5 w-3.5"})})]}),ue&&c.jsx(bl,{variant:"outline",onClick:ue,size:"sm",className:"h-7 w-7 p-0",title:de?"Exit Fullscreen":"Enter Fullscreen",children:de?c.jsx(rg,{className:"h-3.5 w-3.5"}):c.jsx(ng,{className:"h-3.5 w-3.5"})}),!n&&je.length>0&&c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"outline",size:"sm",className:"h-7 w-7 p-0",children:c.jsx(yf,{className:"h-3.5 w-3.5"})})}),c.jsx(hj,{align:"end",children:je.map((e,t)=>c.jsx(p.Fragment,{children:e},t))})]})]})]}),H&&c.jsx("div",{className:"shrink-0",children:c.jsx(rH,{selectedShapeType:q||null,onShapeTypeSelect:H,selectedSeat:s,onSeatView:e=>{B(e)},onSeatEdit:e=>{$?.(e)},onSeatDelete:z,onSeatShapeStyleChange:E,onAlign:ne,selectedSeatCount:J.length,seatPlacement:J.length<=1?{form:r,uniqueSections:i,sectionsData:o,sectionSelectValue:l,onSectionSelectValueChange:d,viewingSection:e,onNewSection:F}:void 0,seatEditControls:ae,readOnly:n})}),c.jsx("div",{className:de?"flex-1 min-h-0 flex flex-col":"space-y-4",children:c.jsx(iH,{imageUrl:e.imageUrl??"",showImageUpload:!1,imageUploadId:`section-image-${e.id}`,imageUploadLabel:`Upload Floor Plan Image for ${e.name}`,onImageUpload:t=>S(e.id,t),isUploadingImage:v,containerRef:u,dimensionsReady:h,containerDimensions:m,containerStyle:"flex",canvasBackgroundColor:we,seats:a,selectedSeatId:s?.id??null,selectedSeatIds:J,anchorSeatId:te,anchorSectionId:null,isPlacingSeats:x,readOnly:n,zoomLevel:f,panOffset:g,onSeatClick:C,onSeatDragEnd:k,onBatchSeatDragEnd:N,onSeatShapeTransform:_,onImageClick:P,onDeselect:A,onShapeDraw:G,onShapeOverlayClick:Q,onMarkersInRect:Z,onWheel:R,onPan:T,onZoomIn:M,onZoomOut:D,onResetZoom:L,selectedShapeTool:q??null,shapeOverlays:K,selectedOverlayId:W,showGrid:le,gridSize:ce})})]}),c.jsx(lH,{isOpen:ye,onOpenChange:be,readOnly:n,viewingSection:e,venueType:"small",displayedSeats:a,seats:O,sectionMarkers:[],selectedSeat:s,isPlacingSeats:x,isSectionFormOpen:!1,editingSectionId:null,sectionForm:{},selectedSectionMarker:null,createSectionMutationPending:!1,updateSectionMutationPending:!1,onSeatClick:C,onDeleteSeat:z,onOpenNewSectionForm:()=>{},onCancelSectionForm:()=>{},onSaveSectionForm:()=>{},onSectionMarkerClick:()=>{},onOpenSectionDetail:()=>{},onEditSectionFromSheet:()=>{},onDeleteSection:()=>{},onSetViewingSeat:B,onEditSeat:$,onSetSelectedSeat:U,onSetIsDatasheetOpen:be,seatEditFormReset:V})]})}function lH({isOpen:e,onOpenChange:t,readOnly:n=!1,viewingSection:a,venueType:s,displayedSeats:r,seats:i,sectionMarkers:o,selectedSeat:l,isPlacingSeats:d,isSectionFormOpen:u,editingSectionId:h,sectionForm:m,selectedSectionMarker:p,createSectionMutationPending:f,updateSectionMutationPending:g,onDeleteSeat:x,onCancelSectionForm:v,onSaveSectionForm:y,onSectionMarkerClick:b,onOpenSectionDetail:w,onEditSectionFromSheet:S,onDeleteSection:j,onSetViewingSeat:C,onEditSeat:k,onSetSelectedSeat:N,onSetIsDatasheetOpen:_,seatEditFormReset:E}){return c.jsx(CE,{open:e,onOpenChange:t,children:c.jsxs(EE,{side:"right",className:"w-[400px] sm:w-[540px] flex flex-col",children:[c.jsxs(PE,{children:[c.jsx(RE,{children:a?`Seats - ${a.name}`:"large"===s?"Sections":"Seats"}),c.jsx(TE,{children:a?`${r.length} seat(s) in ${a.name}`:"large"===s?`${o.length} section(s) placed`:`${i.length} seat(s) placed`})]}),c.jsx("div",{className:"mt-6 flex-1 overflow-y-auto min-h-0",children:a?c.jsx("div",{className:"space-y-2",children:r.map(e=>c.jsx("div",{className:"group p-3 rounded-lg border cursor-pointer transition-colors "+(l?.id===e.id?"bg-blue-50 border-blue-500":"bg-background border-border hover:bg-muted"),onClick:()=>{d?(N(e),_(!1)):(C(e),_(!1))},children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"font-medium text-sm",children:[e.seat.row," ",e.seat.seatNumber]}),c.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.seat.seatType})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d&&!n&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),N(e),k?.(e),_(!1)},className:"h-6 w-6 p-0",title:"Edit seat in toolbox",children:c.jsx(Kg,{className:"h-3 w-3"})}),d&&!n&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),x(e)},className:"h-6 w-6 p-0",title:"Delete seat",children:c.jsx(ax,{className:"h-3 w-3"})})]})]})},e.id))}):"large"===s?c.jsxs("div",{className:"space-y-2",children:[u&&!n&&c.jsxs(Sl,{className:"p-3 space-y-2 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:h?"Update section":"New section"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(bl,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:v,children:"Cancel"}),c.jsx(bl,{size:"sm",className:"h-7 px-3",onClick:y,disabled:!m.watch("name")?.trim()||f||g,children:h?"Update":"Create"})]})]}),c.jsxs("div",{className:"mt-20",children:[c.jsx(Fl,{className:"text-xs",children:"Section Name"}),c.jsx(fR,{name:"name",control:m.control,render:({field:e})=>c.jsx(_l,{...e,className:"mt-1 h-8 text-sm w-full",placeholder:"e.g., Section A",autoFocus:!0})})]})]}),o.map(e=>c.jsx("div",{className:"p-2 rounded-lg border cursor-pointer transition-colors overflow-hidden "+(p?.id===e.id?"bg-blue-50 border-blue-500":"bg-background border-border hover:bg-muted"),onClick:t=>{t.stopPropagation(),b(e,t),_(!1)},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[c.jsx("span",{className:"font-medium text-sm truncate",children:e.name}),e.imageUrl&&c.jsx("div",{className:"flex items-center text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full whitespace-nowrap",children:"Image"})]}),c.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[c.jsxs("span",{children:[i.filter(t=>t.seat.section===e.name).length," ","seats"]}),!e.imageUrl&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-muted-foreground/40"}),c.jsx("span",{className:"italic",children:"No image"})]})]})]}),c.jsxs("div",{className:"flex gap-1 shrink-0",children:[c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w(e),_(!1)},className:"h-7 w-7 p-0",title:"Open Details",children:c.jsx(Nf,{className:"h-3.5 w-3.5"})}),!n&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),S(e)},className:"h-7 w-7 p-0",title:"Edit section",children:c.jsx(Kg,{className:"h-3.5 w-3.5"})}),!n&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),j(e)},className:"h-7 w-7 p-0 text-destructive hover:text-destructive",title:"Delete section",children:c.jsx(ax,{className:"h-3.5 w-3.5"})})]})]})},e.id))]}):c.jsx("div",{className:"space-y-2",children:i.map(e=>c.jsx("div",{className:"group p-3 rounded-lg border cursor-pointer transition-colors "+(l?.id===e.id?"bg-blue-50 border-blue-500":"bg-background border-border hover:bg-muted"),onClick:()=>{d?(N(e),_(!1)):(C(e),_(!1))},children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"font-medium text-sm",children:[e.seat.section," ",e.seat.row," ",e.seat.seatNumber]}),c.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.seat.seatType})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d&&!n&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),N(e),k?.(e),_(!1)},className:"h-6 w-6 p-0",title:"Edit seat in toolbox",children:c.jsx(Kg,{className:"h-3 w-3"})}),d&&!n&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),x(e)},className:"h-6 w-6 p-0",title:"Delete seat",children:c.jsx(ax,{className:"h-3 w-3"})})]})]})},e.id))})})]})})}function cH({open:e,onOpenChange:t,sections:n,onEdit:a,onDelete:s,isDeleting:r,form:i,editingSectionId:o,isUpdating:l,onSave:d,onCancelEdit:u}){const[h,m]=p.useState(!1),f=n?.find(e=>e.id===o),g=i.watch("name"),x=(g?.trim()||"").length>0;p.useEffect(()=>{o&&e?m(!0):o||m(!1)},[o,e]),p.useEffect(()=>{e||m(!1)},[e]);return c.jsx(CE,{open:e,onOpenChange:t,children:c.jsx(EE,{side:"right",className:"w-[400px] sm:w-[540px] flex flex-col",children:h&&f?c.jsxs(c.Fragment,{children:[c.jsxs(PE,{children:[c.jsx(RE,{children:"Edit Section"}),c.jsx(TE,{children:"Update the section details"})]}),c.jsx("div",{className:"mt-6 flex-1 min-h-0",children:c.jsxs("div",{className:"px-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx(Fl,{htmlFor:"section-name",children:"Section Name"}),c.jsx(fR,{name:"name",control:i.control,render:({field:e})=>c.jsx(_l,{...e,id:"section-name",className:"mt-2",placeholder:"e.g., Section A, VIP Area, General Admission",autoFocus:!0})}),i.formState.errors.name&&c.jsx("p",{className:"text-sm text-destructive mt-1",children:i.formState.errors.name.message})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(bl,{variant:"outline",onClick:()=>{m(!1),u()},className:"flex-1",children:"Cancel"}),c.jsx(bl,{onClick:d,disabled:l||!x,className:"flex-1",children:"Update"})]})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs(PE,{children:[c.jsx(RE,{children:"Manage Sections"}),c.jsx(TE,{children:"Edit or delete sections for this layout"})]}),c.jsxs("div",{className:"mt-6 px-6 flex-1 overflow-y-auto min-h-0 space-y-4",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("p",{className:"text-sm text-muted-foreground",children:[n?.length||0," section(s)"]})}),c.jsx("div",{className:"space-y-2",children:n&&n.length>0?n.map(e=>{const t=e.seat_count??0,n=t>0;return c.jsx(Sl,{className:"p-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:e.name}),c.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[null!=e.x_coordinate&&null!=e.y_coordinate&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Position: (",e.x_coordinate.toFixed(1),","," ",e.y_coordinate.toFixed(1),")"]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:0===t?"No seats":`${t} seat${1===t?"":"s"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>(e=>{a(e),m(!0)})(e),className:"h-8 px-2",title:"Edit section",children:c.jsx(Kg,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>s(e),className:"h-8 px-2 text-destructive hover:text-destructive",title:n?`Cannot delete: ${t} seat${1===t?"":"s"} attached`:"Delete section",disabled:r||n,children:c.jsx(ax,{className:"h-4 w-4"})})]})]})},e.id)}):c.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No sections found. Create your first section."})})]})]})})})}function dH({initialName:e="",isEditing:t=!1,selectedShapeType:n,onShapeTypeSelect:a,onSave:s,onCancel:r,className:i}){const[o,l]=p.useState(e);p.useEffect(()=>{l(e)},[e]);const d=f.useRef(null);p.useEffect(()=>{d.current&&d.current.focus()},[]);const u=()=>{o.trim()&&s(o)},h=[{type:IV.RECTANGLE,icon:Wg,label:"Rectangle"},{type:IV.CIRCLE,icon:df,label:"Circle"},{type:IV.POLYGON,icon:Tf,label:"Polygon"},{type:IV.FREEFORM,icon:gg,label:"Freeform"}];return c.jsxs(Sl,{className:sl("px-3 py-2.5 flex items-center gap-3 flex-wrap w-full",i),children:[!t&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Shapes:"}),c.jsxs("div",{className:"flex gap-1.5",children:[c.jsx("button",{type:"button",onClick:()=>a(null),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md",n?"bg-background border-border":"bg-primary text-primary-foreground border-primary shadow-sm"),title:"Pointer (Select)",children:c.jsx(lg,{className:"h-3.5 w-3.5"})}),h.map(e=>{const t=e.icon,s=n===e.type;return c.jsx("button",{type:"button",onClick:()=>a(e.type),className:sl("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md",s?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background border-border"),title:e.label,children:c.jsx(t,{className:"h-3.5 w-3.5"})},e.type)})]})]}),c.jsxs("div",{className:sl("flex items-center gap-2 flex-wrap",!t&&"border-l pl-2.5"),children:[t&&c.jsx("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap shrink-0",children:"Edit:"}),c.jsx(_l,{ref:d,value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key?u():"Escape"===e.key&&r()},placeholder:"Section Name (e.g. Stage)",className:"h-6 text-xs w-36 min-w-36"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",onClick:u,disabled:!o.trim(),className:sl("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-primary hover:border-primary hover:text-primary-foreground","bg-background border-border"),title:"Save",children:c.jsx(Yp,{className:"h-3 w-3"})}),c.jsx("button",{type:"button",onClick:r,className:sl("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Cancel",children:c.jsx(xx,{className:"h-3 w-3"})})]})]})]})}function uH({layoutName:e,isLoading:t,seatsError:n,venueType:a,sectionMarkers:s,seats:r,viewingSection:i,displayedSeats:o,onToggleDatasheet:l,readOnly:d,onSave:u,isSaving:h,isFullscreen:m,onToggleFullscreen:f,mainImageUrl:g,isPlacingSeats:x,isPlacingSections:v,onClearAllPlacements:y,onMainImageSelect:b,onRemoveImage:w,onDetectSections:S,isDetectingSections:j=!1,onDetectSeats:C,isDetectingSeats:k=!1,canvasBackgroundColor:N="#e5e7eb",onCanvasBackgroundColorChange:_,snapToGrid:E=!1,onSnapToGridChange:P,gridSize:A=5,onGridSizeChange:R,showGrid:T=!1,onShowGridChange:M,onPreview:D,markerFillTransparency:L=1,onMarkerFillTransparencyChange:F,onUndo:I,onRedo:O,canUndo:z=!1,canRedo:B=!1,isDirty:$=!1,onRefresh:U,isRefreshing:V=!1}){const q=!m&&("large"===a&&s.length>0||"small"===a&&r.length>0||i&&o.length>0),H=p.useMemo(()=>[c.jsxs(mj,{onClick:y,children:[c.jsx(Bp,{className:"h-4 w-4 mr-2"}),"Clear All Placements"]}),c.jsx(xj,{}),!d&&b&&!g&&c.jsx(Fl,{htmlFor:"add-floor-plan-image",className:"cursor-pointer",children:c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Lf,{className:"h-4 w-4 mr-2"}),"Add floor plan image",c.jsx(_l,{id:"add-floor-plan-image",type:"file",accept:"image/*",onChange:e=>{b(e),e.target.value=""},className:"hidden"})]})})}),!d&&_&&c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-2 py-1.5",children:[c.jsx(dg,{className:"h-4 w-4 shrink-0"}),c.jsx("span",{className:"flex-1",children:"Canvas background color"}),c.jsx("input",{type:"color","aria-label":"Canvas background color",value:N,onChange:e=>_(e.target.value),className:"h-6 w-8 cursor-pointer rounded border border-input"})]})}),!d&&g&&c.jsx(Fl,{htmlFor:"change-main-image",className:"cursor-pointer",children:c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Lf,{className:"h-4 w-4 mr-2"}),"Change Image",c.jsx(_l,{id:"change-main-image",type:"file",accept:"image/*",onChange:e=>{b(e),e.target.value=""},className:"hidden"})]})})}),!d&&w&&c.jsx(c.Fragment,{children:c.jsxs(mj,{onClick:()=>w(),className:"text-destructive focus:text-destructive",children:[c.jsx(ax,{className:"h-4 w-4 mr-2"}),"Remove Image"]})}),!d&&F&&c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-2 py-1.5",children:[c.jsx($f,{className:"h-4 w-4 shrink-0"}),c.jsx("span",{className:"flex-1",children:"Transparency"}),c.jsx("input",{type:"range",min:"0",max:"100",value:100*(L??1),onChange:e=>F(parseInt(e.target.value)/100),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer min-w-0",title:"Adjust marker fill transparency"}),c.jsxs("span",{className:"text-xs text-muted-foreground w-8 text-right shrink-0",children:[Math.round(100*(L??1)),"%"]})]})}),!d&&P&&c.jsxs(c.Fragment,{children:[c.jsx(xj,{}),c.jsxs(mj,{onClick:()=>P(!E),children:[c.jsx(Af,{className:"h-4 w-4 mr-2"}),c.jsx("span",{className:"flex-1",children:"Snap to Grid"}),E&&c.jsx("span",{className:"text-xs text-primary",children:""})]}),E&&R&&c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex flex-col cursor-pointer items-start gap-3 px-2 py-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2 w-full",children:[c.jsx("span",{className:"text-xs text-muted-foreground w-16 flex-shrink-0",children:"Grid size:"}),c.jsx("input",{type:"number",min:"1",max:"20",value:A,onChange:e=>R(Math.max(1,parseInt(e.target.value)||5)),className:"h-6 w-12 px-1 text-xs border rounded",title:"Grid size in percentage"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]}),M&&c.jsxs("div",{className:"flex items-center gap-2 w-full pl-16 cursor-pointer",onClick:e=>{e.preventDefault(),e.stopPropagation(),M(!T)},children:[c.jsx("input",{type:"checkbox",checked:T,onChange:()=>{},className:"h-4 w-4 rounded cursor-pointer",title:"Toggle grid visibility"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Show grid lines"})]})]})}),!E&&M&&c.jsx(mj,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer px-2 py-1.5",onClick:e=>{e.preventDefault(),e.stopPropagation(),M(!T)},children:[c.jsx("input",{type:"checkbox",checked:T,onChange:()=>{},className:"h-4 w-4 rounded cursor-pointer",title:"Toggle grid visibility"}),c.jsx("span",{className:"text-xs",children:"Show grid lines"})]})})]})],[y,b,_,w,N,F,L,P,E,A,R,T,M]);return c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-semibold",children:e?`Designer - ${e}`:"Seat Designer"}),t&&c.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading seats..."}),Boolean(n)&&c.jsx("span",{className:"text-xs text-destructive",children:"Error loading seats"})]}),c.jsxs("div",{className:"flex gap-1",children:[U&&c.jsx(bl,{variant:"outline",onClick:U,disabled:V,size:"sm",className:"h-7 w-7 p-0",title:"Refresh data from server",children:c.jsx(Ag,{className:"h-3.5 w-3.5 "+(V?"animate-spin":"")})}),q&&c.jsx(bl,{variant:"outline",onClick:l,size:"sm",className:"h-7 w-7 p-0",title:"View Datasheet",children:c.jsx(Gf,{className:"h-3.5 w-3.5"})}),S&&c.jsxs(bl,{variant:"outline",onClick:S,disabled:j,size:"sm",className:"h-7 px-2",title:"Detect sections from image (AI)",children:[c.jsx(Fg,{className:"h-3.5 w-3.5 mr-1"}),j?"Detecting":"Detect sections"]}),C&&c.jsxs(bl,{variant:"outline",onClick:C,disabled:k,size:"sm",className:"h-7 px-2",title:"Detect seats from image (AI)",children:[c.jsx(Fg,{className:"h-3.5 w-3.5 mr-1"}),k?"Detecting":"Detect seats"]}),!d&&I&&O&&c.jsxs(c.Fragment,{children:[c.jsx(bl,{variant:"outline",onClick:I,disabled:!z,size:"sm",className:"h-7 w-7 p-0",title:"Undo (Ctrl+Z)",children:c.jsx(ox,{className:"h-3.5 w-3.5"})}),c.jsx(bl,{variant:"outline",onClick:O,disabled:!B,size:"sm",className:"h-7 w-7 p-0",title:"Redo (Ctrl+Shift+Z)",children:c.jsx(Pg,{className:"h-3.5 w-3.5"})})]}),!d&&c.jsxs(bl,{onClick:u,disabled:h,size:"sm",className:"h-7 px-2 "+($?"ring-2 ring-primary ring-offset-2":""),title:$?"You have unsaved changes":"Save changes",children:[c.jsx(Dg,{className:"h-3.5 w-3.5 mr-1"}),"Save",$?" *":""]}),D&&c.jsxs(bl,{variant:"outline",onClick:D,size:"sm",className:"h-7 px-2",title:"Preview how this layout will appear during booking",children:[c.jsx(Sf,{className:"h-3.5 w-3.5 mr-1"}),"Preview"]}),c.jsx(bl,{variant:"outline",onClick:f,size:"sm",className:"h-7 w-7 p-0",title:m?"Exit Fullscreen":"Enter Fullscreen",children:m?c.jsx(rg,{className:"h-3.5 w-3.5"}):c.jsx(ng,{className:"h-3.5 w-3.5"})}),!d&&H.length>0&&c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"outline",size:"sm",className:"h-7 w-7 p-0",children:c.jsx(yf,{className:"h-3.5 w-3.5"})})}),c.jsx(hj,{align:"end",children:H.map((e,t)=>c.jsx(p.Fragment,{children:e},t))})]})]})]})}function hH({open:e,onOpenChange:t,layout:n,layoutSeats:a,sections:s,imageUrl:r}){const i=n?.name||"Layout",[o,l]=p.useState(null);f.useEffect(()=>{e||l(null)},[e]);const d=p.useMemo(()=>s.find(e=>e.id===o),[s,o]),u=p.useMemo(()=>o?a.filter(e=>e.section_id===o):a,[a,o]),h=p.useMemo(()=>o?s.filter(e=>e.id===o):s,[s,o]),m=p.useMemo(()=>d?.image_url?d.image_url:r,[d,r]),g=p.useMemo(()=>u.map(e=>({id:`preview-${e.id}`,tenant_id:e.tenant_id,event_id:"preview-event",seat_id:e.id,section_name:e.section_name||void 0,row_name:e.row||void 0,seat_number:e.seat_number||void 0,status:"AVAILABLE",ticket_price:0,ticket_number:void 0,attributes:void 0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})),[u]),x=p.useMemo(()=>{const e=new Map;return g.forEach(t=>{t.seat_id&&e.set(t.seat_id,t)}),e},[g]),v=p.useMemo(()=>{const e=new Map;return g.forEach(t=>{if(t.section_name&&t.row_name&&t.seat_number){const n=`${t.section_name}|${t.row_name}|${t.seat_number}`;e.set(n,t)}}),e},[g]);return c.jsx(ub,{open:e,onOpenChange:t,children:c.jsx(pb,{className:"max-w-[98vw] max-h-[98vh] w-[98vw] h-[98vh] p-0",children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(fb,{className:"px-6 py-4 border-b flex-shrink-0",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx(xb,{children:d?`Section: ${d.name}`:`Layout Preview - ${i}`}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d?"Click the back button to return to full layout view":"section-level"===n?.design_mode?"Click on a section to view its seats":"Preview all designed seats as they will appear during booking"})]})})}),c.jsx("div",{className:"flex-1 overflow-hidden p-6 bg-muted/20",children:c.jsxs("div",{className:"h-full relative",children:[d&&c.jsxs(bl,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"absolute left-4 top-4 h-9 px-3 gap-2 rounded-full bg-background/90 text-foreground border border-border shadow-sm hover:bg-background",children:[c.jsx(Tp,{className:"h-4 w-4"}),c.jsx("span",{children:"Back"})]}),n?c.jsx(XV,{layout:n,layoutSeats:u,sections:h,eventSeats:g,seatStatusMap:x,locationStatusMap:v,imageUrl:m,onSeatClick:()=>{},selectedSeatIds:new Set,selectedSectionId:o,onSelectedSectionIdChange:l,showLegend:!1}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No layout data available for preview"})]})})]})})})}function mH(e,t){const{x:n,y:a}=e,s=e.shape,r=s?.type??IV.CIRCLE;if(r===IV.CIRCLE){const e=s?.radius??t.radius??.8;return{left:n-e,right:n+e,top:a-e,bottom:a+e,centerX:n,centerY:a}}if(r===IV.RECTANGLE||r===IV.ELLIPSE||r===IV.SEAT){const e=(s?.width??t.width??2)/2,r=(s?.height??t.height??1.5)/2;return{left:n-e,right:n+e,top:a-r,bottom:a+r,centerX:n,centerY:a}}const i=(s?.width??t.width??0)/2,o=(s?.height??t.height??0)/2;return{left:n-i,right:n+i,top:a-o,bottom:a+o,centerX:n,centerY:a}}function pH(e,t,n,a){const s=new Map;if(e.length<2)return s;const r=Math.min(...t.map(e=>e.left)),i=Math.max(...t.map(e=>e.right)),o=Math.min(...t.map(e=>e.top)),l=Math.max(...t.map(e=>e.bottom)),c=(r+i)/2,d=(o+l)/2;if("space-between-h"===n||"space-between-v"===n||"space-between-both"===n||"same-width"===n||"same-height"===n){const a=()=>{const n=e.map((e,n)=>({marker:e,bounds:t[n],idx:n})).sort((e,t)=>e.bounds.centerX-t.bounds.centerX),a=n.length,r=n[0].bounds.left,i=n[a-1].bounds.right-r,o=n.map(e=>e.bounds.right-e.bounds.left),l=o.reduce((e,t)=>e+t,0),c=Math.max(0,i-l),d=a>1?c/(a-1):0;let u=r;n.forEach(({marker:e},t)=>{const n=o[t],a=u+n/2;s.set(e.id,{...s.get(e.id),x:a}),u+=n+d})},r=()=>{const n=e.map((e,n)=>({marker:e,bounds:t[n],idx:n})).sort((e,t)=>e.bounds.centerY-t.bounds.centerY),a=n.length,r=n[0].bounds.top,i=n[a-1].bounds.bottom-r,o=n.map(e=>e.bounds.bottom-e.bounds.top),l=o.reduce((e,t)=>e+t,0),c=Math.max(0,i-l),d=a>1?c/(a-1):0;let u=r;n.forEach(({marker:e},t)=>{const n=o[t],a=u+n/2;s.set(e.id,{...s.get(e.id),y:a}),u+=n+d})};if("space-between-h"===n)a();else if("space-between-v"===n)r();else if("space-between-both"===n)a(),r();else if("same-width"===n){let n=0;e.forEach((e,a)=>{const s=t[a],r=s.right-s.left;r>n&&(n=r)}),e.forEach(e=>{const t=e.shape??{},a=t.type??IV.CIRCLE;a===IV.CIRCLE?s.set(e.id,{shape:{...t,type:a,radius:n/2}}):a!==IV.RECTANGLE&&a!==IV.ELLIPSE&&a!==IV.SEAT||s.set(e.id,{shape:{...t,type:a,width:n}})})}else if("same-height"===n){let n=0;e.forEach((e,a)=>{const s=t[a],r=s.bottom-s.top;r>n&&(n=r)}),e.forEach(e=>{const t=e.shape??{},a=t.type??IV.CIRCLE;a===IV.CIRCLE?s.set(e.id,{shape:{...t,type:a,radius:n/2}}):a!==IV.RECTANGLE&&a!==IV.ELLIPSE&&a!==IV.SEAT||s.set(e.id,{shape:{...t,type:a,height:n}})})}return s}return e.forEach((e,a)=>{const u=t[a],h={};"left"!==n&&"center"!==n&&"right"!==n||(h.x="left"===n?e.x+(r-u.left):"right"===n?e.x+(i-u.right):c),"top"!==n&&"middle"!==n&&"bottom"!==n||(h.y="top"===n?e.y+(o-u.top):"bottom"===n?e.y+(l-u.bottom):d),Object.keys(h).length>0&&s.set(e.id,h)}),s}function fH(e,t,n){if(!e)return e;const a=e.type??IV.CIRCLE,s={...e,type:a};if(a===IV.CIRCLE){const a=e.radius??n.radius??.8;s.radius=Math.max(.1,a*t)}else if(a===IV.RECTANGLE||a===IV.ELLIPSE||a===IV.SEAT){const a=e.width??n.width??2,r=e.height??n.height??1.5;s.width=Math.max(.1,a*t),s.height=Math.max(.1,r*t)}else a!==IV.POLYGON&&a!==IV.FREEFORM||!e.points?.length||(s.points=e.points.map(e=>e*t));return s}function gH(e,t,n){const a=t.type??IV.CIRCLE;let s=1;if(a===IV.CIRCLE){const a=e?.radius??n.radius??.8,r=t.radius??a;s=a>0?r/a:1}else if(a===IV.RECTANGLE||a===IV.ELLIPSE||a===IV.SEAT){const a=e?.width??n.width??2,r=e?.height??n.height??1.5,i=t.width??a,o=t.height??r,l=a>0?i/a:1,c=r>0?o/r:1;s=Math.sqrt(l*c)}else if((a===IV.POLYGON||a===IV.FREEFORM)&&e?.points?.length&&t.points?.length){const n=Math.sqrt(e.points.reduce((e,t)=>e+t*t,0))||1;s=(Math.sqrt(t.points.reduce((e,t)=>e+t*t,0))||1)/n}return Math.max(.25,Math.min(4,s))}function xH({venueId:e,layoutId:t,layoutName:n,imageUrl:a,designMode:s="seat-level",readOnly:r=!1,initialSeats:i,initialSections:o,onImageUpload:l,onRemoveImage:d,initialCanvasBackgroundColor:u,onCanvasBackgroundColorChange:h,markerFillTransparency:m,onMarkerFillTransparencyChange:f,className:g,fileId:x}){const v="seat-level"===s?"small":"large",y=Va(),b=p.useMemo(()=>i?.map(e=>({id:e.id,x:e.x_coordinate??0,y:e.y_coordinate??0,seat:{section:e.section_name||"",sectionId:e.section_id,row:e.row,seatNumber:e.seat_number,seatType:e.seat_type},shape:e.shape?JSON.parse(e.shape):void 0,isNew:!1})),[i]),w=p.useMemo(()=>o?.map(e=>({id:e.id,name:e.name,x:e.x_coordinate??0,y:e.y_coordinate??0,imageUrl:e.image_url??void 0,file_id:e.file_id??void 0,canvasBackgroundColor:e.canvas_background_color??void 0,markerFillTransparency:e.marker_fill_transparency??void 0,shape:e.shape?JSON.parse(e.shape):void 0,isNew:!1})),[o]),{isLoading:S,seatsError:j,effectiveSectionsData:C}=Cz({layoutId:t,designMode:s,initialSeats:i,initialSections:o,setSeats:()=>{},setSectionMarkers:()=>{}}),{seats:k,setSeats:N,sectionMarkers:_,setSectionMarkers:E,canvasBackgroundColor:P,setCanvasBackgroundColor:A,markerFillTransparency:R,setMarkerFillTransparency:T,addSeat:M,updateSeat:D,batchUpdateSeats:L,removeSeat:F,addSection:I,updateSection:O,batchUpdateSections:z,removeSection:B,undo:$,redo:U,canUndo:V,canRedo:q,clearHistory:H,recordSnapshot:G,deletedSeatIds:K,setDeletedSeatIds:W,deletedSectionIds:Q,setDeletedSectionIds:Y,isDirty:X}=Qq({initialSeats:b,initialSections:w,initialCanvasBackgroundColor:u,initialMarkerFillTransparency:m}),Z=p.useRef(()=>{}),J=p.useRef(()=>{});p.useEffect(()=>{Z.current=N,J.current=E},[N,E]);const ee=p.useCallback(e=>{Z.current(e)},[]),te=p.useCallback(e=>{J.current(e)},[]);Cz({layoutId:t,designMode:s,initialSeats:i,initialSections:o,setSeats:ee,setSectionMarkers:te});const{selectedSeatIds:ne,setSelectedSeatIds:ae,selectedSectionIds:se,setSelectedSectionIds:re,selectedSeat:ie,setSelectedSeat:oe,selectedSectionMarker:le,setSelectedSectionMarker:ce,anchorSeatId:de,anchorSectionId:ue,handleSeatClick:he,handleSectionClick:me,handleDeselect:pe,clearSelection:fe}=function({seats:e,sectionMarkers:t}){const[n,a]=p.useState([]),[s,r]=p.useState([]),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),f=p.useCallback((e,t,n,s)=>{if(a(e),r(t),1===e.length){const t=n.find(t=>t.id===e[0])||null;o(t)}else o(null);if(1===t.length){const e=s.find(e=>e.id===t[0])||null;c(e)}else c(null)},[]),g=p.useCallback((n,r)=>{r&&void 0!==r.cancelBubble&&(r.cancelBubble=!0);const i=n.id,o=r?.shiftKey||!1;a(n=>{if(o){if(n.includes(i)){const a=n.filter(e=>e!==i);return f(a,s,e,t),a}{const a=[...n,i];return f(a,s,e,t),a}}{const n=[i];return f(n,[],e,t),n}})},[f,s,e,t]),x=p.useCallback((a,s)=>{s&&void 0!==s.cancelBubble&&(s.cancelBubble=!0);const i=a.id,o=s?.shiftKey||!1;r(a=>{if(o){if(a.includes(i)){const s=a.filter(e=>e!==i);return f(n,s,e,t),s}{const s=[...a,i];return f(n,s,e,t),s}}{const n=[i];return f([],n,e,t),n}})},[f,n,e,t]),v=p.useCallback(()=>{a([]),r([]),o(null),c(null)},[]),y=p.useCallback(()=>{a([]),r([]),o(null),c(null),u(null),m(null)},[]);return{selectedSeatIds:n,setSelectedSeatIds:a,selectedSectionIds:s,setSelectedSectionIds:r,selectedSeat:i,setSelectedSeat:o,selectedSectionMarker:l,setSelectedSectionMarker:c,anchorSeatId:d,setAnchorSeatId:u,anchorSectionId:h,setAnchorSectionId:m,handleSelectionChange:f,handleSeatClick:g,handleSectionClick:x,handleDeselect:v,clearSelection:y}}({seats:k,sectionMarkers:_}),{imageUrl:ge,isUploadingImage:xe,imageUploadId:ve,handleImageUpload:ye,handleRemoveImage:be,handleDetectSections:we,handleDetectSeats:Se}=Yq(a,l,d,x),{zoomLevel:je,setZoomLevel:Ce,handleZoomIn:ke,handleZoomOut:Ne,handleResetZoom:_e}=Ez({step:.25,minZoom:.5,maxZoom:3}),{panOffset:Ee,handlePanDelta:Pe,resetPan:Ae}=Pz(),Re=p.useCallback(()=>{_e(),Ae()},[_e,Ae]),[Te,Me]=p.useState(!1),[De,Le]=p.useState(null),[Fe,Ie]=p.useState(!1),[Oe,ze]=p.useState(null),[Be,$e]=p.useState({}),Ue=lT({resolver:GT(Kq),mode:"onChange",defaultValues:{name:"Section A"}}),[Ve,qe]=p.useState(null);p.useEffect(()=>{if(Ve){const e=Ve.canvasBackgroundColor||mV;A(e)}else{A(u||mV)}},[Ve,u,A]);const He=!0,Ge=!0,Ke=lT({resolver:GT(Wq),defaultValues:{section:"Section A",sectionId:void 0,row:"Row 1",seatNumber:"1",seatType:$q.STANDARD}}),[We,Qe]=p.useState(""),[Ye,Xe]=p.useState(!1),[Ze,Je]=p.useState(!1),[et,tt]=p.useState(null),[nt,at]=p.useState(!1),[st,rt]=p.useState(!1),[it,ot]=p.useState(null),[lt,ct]=p.useState(null),dt=lT({resolver:GT(Wq),defaultValues:{section:"",sectionId:void 0,row:"",seatNumber:"",seatType:$q.STANDARD}}),[ut,ht]=p.useState(!1),[mt,pt]=p.useState(!1),[ft,gt]=p.useState(!1),[xt,vt]=p.useState(!1),[yt,bt]=p.useState({type:IV.CIRCLE,radius:.8}),[wt,St]=p.useState(null),jt=p.useCallback((e,t)=>{wt&&St(null),he(e,t)},[wt,he]),Ct=p.useCallback((e,t)=>{wt&&St(null),me(e,t)},[wt,me]),[kt,Nt]=p.useState([]),[_t,Et]=p.useState(null),Pt=p.useMemo(()=>mt&&Oe?[...kt,{id:"pending-section-creation",x:Oe.x,y:Oe.y,shape:yt,isSelected:!0,isPlacement:!0}]:kt,[kt,mt,Oe,yt]),At=p.useRef(null),Rt=p.useRef(null),[Tt,Mt]=p.useState({width:0,height:0}),[Dt,Lt]=p.useState(!1),[Ft,It]=p.useState(!1),[Ot,zt]=p.useState(!1),[Bt,$t]=p.useState(5),[Ut,Vt]=p.useState(!1),[qt,Ht]=p.useState(!1);p.useRef(null);const Gt=p.useRef(R);p.useEffect(()=>{Gt.current=R},[R]),p.useLayoutEffect(()=>{if(Dt)return;const e=()=>{const e=At.current?.getBoundingClientRect(),t=e&&e.width>0?Math.floor(e.width):800,n=e&&e.height>0?Math.floor(e.height):600;Mt({width:t,height:n}),Lt(!0)};e();const t=setTimeout(e,50);return()=>clearTimeout(t)},[Dt]),p.useEffect(()=>{if(!At.current||!Dt)return;let e,t;const n=()=>{if(!At.current)return;const e=At.current.getBoundingClientRect(),t=Math.floor(e.width)||800,n=Math.floor(e.height)||600;Mt(e=>{const a=Math.abs(e.width-t),s=Math.abs(e.height-n);return a<=4&&s<=4?e:{width:t,height:n}})},a=()=>{t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{clearTimeout(e),e=setTimeout(n,250)})},s=new ResizeObserver(a);s.observe(At.current),window.addEventListener("resize",a);const r=At.current,i=e=>{e.preventDefault()};return r.addEventListener("wheel",i,{passive:!1}),()=>{t&&cancelAnimationFrame(t),clearTimeout(e),s.disconnect(),window.removeEventListener("resize",a),r.removeEventListener("wheel",i)}},[Dt]);const Kt=p.useRef(void 0);p.useEffect(()=>{const e="large"===v&&Ve?Ve.imageUrl:void 0;!!!Kt.current&&!!e&&Lt(!1),Kt.current=e},[v,Ve?.id,Ve?.imageUrl]),p.useEffect(()=>{if(!("section-level"!==s||0!==_.length||S||o||C&&0!==C.length)){const e={id:"section-default",name:"Section A",x:50,y:50,isNew:!0};E([e]),Ue.setValue("name",e.name)}},[s,S,_.length,o,C,E,Ue]);const Wt="small"===v?k:Ve?k.filter(e=>e.seat.section===Ve.name):[],Qt=p.useCallback(e=>{G(),E(t=>t.map(t=>t.id===e?{...t,imageUrl:void 0,file_id:null}:t)),Ve?.id===e&&qe(e=>e?{...e,imageUrl:void 0,file_id:null}:null)},[G,E,Ve?.id]),Yt=p.useCallback(async()=>{gt(!0),await we(e=>{G(),E(t=>[...t,...e])}),gt(!1)},[we,G,E]),Xt=p.useCallback(async()=>{vt(!0),await Se(e=>{G();const t=Ke.getValues(),n=Ve?.name??t.section,a=Ve?.id??t.sectionId,s=e.map(e=>({...e,seat:{...e.seat,section:n,sectionId:a,seatType:$q.STANDARD}}));N(e=>[...e,...s])}),vt(!1)},[Se,G,N,Ve,Ke]),Zt=p.useCallback((e,t,n,a,r)=>{let i=t,o=n;Ot&&(i=Math.round(t/Bt)*Bt,o=Math.round(n/Bt)*Bt);const l=Math.max(0,Math.min(100,i)),c=Math.max(0,Math.min(100,o)),d={...e,...a&&{width:a},...r&&{height:r}};if(wt){if("section-level"===s&&"large"===v&&!Ve)return ze({x:l,y:c}),bt(d),pt(!0),void Le(null);G();const e=Ke.getValues(),t={id:`temp-${Date.now()}`,x:l,y:c,seat:{section:Ve?.name||e.section,sectionId:Ve?.id||e.sectionId,row:e.row,seatNumber:e.seatNumber,seatType:e.seatType},shape:d,isNew:!0};M(t);const n=String(parseInt(e.seatNumber)+1);return void Ke.setValue("seatNumber",n)}if("section-level"===s&&"large"===v&&!Ve)return ze({x:l,y:c}),bt(d),pt(!0),void Le(null);{G();const e=Ke.getValues(),t={id:`temp-${Date.now()}`,x:l,y:c,seat:{section:Ve?.name||e.section,sectionId:Ve?.id||e.sectionId,row:e.row,seatNumber:e.seatNumber,seatType:e.seatType},shape:d,isNew:!0};M(t);const n=String(parseInt(e.seatNumber)+1);Ke.setValue("seatNumber",n)}},[Ot,Bt,wt,s,v,Ge,Ve,G,Ke,He,M]),Jt=p.useCallback((e,t)=>{if(!t)return;if(!wt)return;const{x:n,y:a}=t},[wt]),en=p.useCallback((e,t,n)=>{G();let a=t,s=n;Ot&&(a=Math.round(t/Bt)*Bt,s=Math.round(n/Bt)*Bt),D(e,{x:Math.max(0,Math.min(100,a)),y:Math.max(0,Math.min(100,s))})},[G,Ot,Bt,D]),tn=p.useCallback((e,t,n)=>{G();let a=t,s=n;Ot&&(a=Math.round(t/Bt)*Bt,s=Math.round(n/Bt)*Bt),O(e,{x:Math.max(0,Math.min(100,a)),y:Math.max(0,Math.min(100,s))})},[G,Ot,Bt,O]),nn=p.useCallback(e=>{G();const t=e.map(({id:e,x:t,y:n})=>{let a=t,s=n;return Ot&&(a=Math.round(t/Bt)*Bt,s=Math.round(n/Bt)*Bt),{id:e,updates:{x:Math.max(0,Math.min(100,a)),y:Math.max(0,Math.min(100,s))}}});L(t)},[G,Ot,Bt,L]),an=p.useCallback(e=>{G();const t=e.map(({id:e,x:t,y:n})=>{let a=t,s=n;return Ot&&(a=Math.round(t/Bt)*Bt,s=Math.round(n/Bt)*Bt),{id:e,updates:{x:Math.max(0,Math.min(100,a)),y:Math.max(0,Math.min(100,s))}}});z(t)},[G,Ot,Bt,z]),sn=p.useCallback((e,t,n)=>{const a=k.find(t=>t.id===e),s=a?.shape,r=[{id:e,updates:{shape:t,...n&&{x:n.x,y:n.y}}}];if(ne.length>1&&ne.includes(e)){const n=gH(s,t,{radius:.8});if(1!==n){k.filter(t=>ne.includes(t.id)&&t.id!==e).forEach(e=>{const t=fH(e.shape,n,{radius:.8});t&&r.push({id:e.id,updates:{shape:t}})})}}1===r.length?D(r[0].id,r[0].updates):r.length>1&&L(r)},[D,L,k,ne]),rn=p.useCallback((e,t,n)=>{const a=_.find(t=>t.id===e),s=a?.shape,r=[{id:e,updates:{shape:t,...n&&{x:n.x,y:n.y}}}];if(se.length>1&&se.includes(e)){const n=gH(s,t,{width:2,height:1.5});if(1!==n){_.filter(t=>se.includes(t.id)&&t.id!==e).forEach(e=>{const t=fH(e.shape,n,{width:2,height:1.5});t&&r.push({id:e.id,updates:{shape:t}})})}}1===r.length?O(r[0].id,r[0].updates):r.length>1&&z(r)},[O,z,_,se]);Xq({onUndo:r?void 0:$,onRedo:r?void 0:U,onSave:()=>ht(!0),onDelete:()=>{(ne.length>0||se.length>0)&&(se.forEach(e=>B(e)),ne.forEach(e=>F(e)),fe())},onEscape:()=>{pe(),St(null)},onSelectAll:()=>{const e=Wt.map(e=>e.id);ae(e)},onCopy:()=>{const e=k.filter(e=>ne.includes(e.id)),t=_.filter(e=>se.includes(e.id));$e({seats:e,sections:t})},onPaste:()=>{G();if(Be.seats?.length){const e=Be.seats.map(e=>({...e,id:crypto.randomUUID(),x:e.x+1,y:e.y+1,isNew:!0}));N(t=>[...t,...e]),ae(e.map(e=>e.id))}if(Be.sections?.length){const e=Be.sections.map(e=>({...e,id:crypto.randomUUID(),x:e.x+1,y:e.y+1,isNew:!0}));E(t=>[...t,...e]),re(e.map(e=>e.id))}},onArrowMove:(e,t)=>{G();const n=t?.1:1;let a=0,s=0;switch(e){case"left":a=-n;break;case"right":a=n;break;case"up":s=-n;break;case"down":s=n}ne.length>0&&N(e=>e.map(e=>ne.includes(e.id)?{...e,x:e.x+a,y:e.y+s}:e)),se.length>0&&E(e=>e.map(e=>se.includes(e.id)?{...e,x:e.x+a,y:e.y+s}:e))}});const on=p.useCallback(async()=>{await Promise.all([y.invalidateQueries({queryKey:["seats",t]}),y.invalidateQueries({queryKey:["layouts",t,"with-seats"]})]),W([]),Y([]),H()},[y,t,H,W,Y]),ln=Xa({mutationFn:async()=>{const n=ve&&ve!==x,a=[];if("section-level"===s&&"large"===v){for(const e of Q)a.push({id:e,delete:!0});for(const e of _){const t=Gt.current??R??1,n=void 0!==e.markerFillTransparency&&null!==e.markerFillTransparency?e.markerFillTransparency:t,s="number"!=typeof n||isNaN(n)?1:n;if(e.isNew){const t={name:e.name,x_coordinate:e.x,y_coordinate:e.y,canvas_background_color:e.canvasBackgroundColor||void 0,marker_fill_transparency:s,shape:e.shape?JSON.stringify(e.shape):void 0};a.push(t)}else{const t=C?.find(t=>t.id===e.id),n=null===e.file_id?"":void 0!==e.file_id?e.file_id:t?.file_id??void 0,r={id:e.id,name:e.name,x_coordinate:e.x,y_coordinate:e.y,canvas_background_color:e.canvasBackgroundColor||void 0,marker_fill_transparency:s,shape:e.shape?JSON.stringify(e.shape):void 0,file_id:n};a.push(r)}}}const r=k.map(n=>{if(n.isNew)return{venue_id:e,layout_id:t,section:n.seat.section,row:n.seat.row,seat_number:n.seat.seatNumber,seat_type:n.seat.seatType,x_coordinate:n.x,y_coordinate:n.y,shape:n.shape?JSON.stringify(n.shape):void 0};{let e=n.seat.sectionId;if(!e&&n.seat.section)if(C&&"seat-level"===s){const t=C.find(e=>e.name===n.seat.section);e=t?.id}else if("section-level"===s){const t=_.find(e=>e.name===n.seat.section);e=t?.id}return{id:n.id,section_id:e||n.seat.section,row:n.seat.row,seat_number:n.seat.seatNumber,seat_type:n.seat.seatType,x_coordinate:n.x,y_coordinate:n.y,shape:n.shape?JSON.stringify(n.shape):void 0}}}),i=K.map(e=>({id:e,delete:!0})),o=Gt.current??R??1;return await Fs.post(`/api/v1/ticketing/layouts/${t}/bulk-save?venue_id=${e}`,{canvas_background_color:P,marker_fill_transparency:o,file_id:n?ve:void 0,sections:a,seats:[...r,...i]},{requiresAuth:!0})},onSuccess:e=>{y.invalidateQueries({queryKey:["layouts",t]}),y.invalidateQueries({queryKey:["seats",t]}),y.invalidateQueries({queryKey:["sections","layout",t]}),H(),W([]),Y([]),ht(!1),Uk({title:"Designer Saved",description:"All designer changes have been saved successfully."}),N(e=>e.map(e=>({...e,isNew:!1}))),E(e=>e.map(e=>({...e,isNew:!1}))),"small"===v||E([]),N([]),oe(null)},onError:e=>{let t="Failed to save designer changes. Please try again.";if(e?.message)try{const n=JSON.parse(e.message);t=n.detail||n.message||e.message}catch{t=e.message}Uk({title:"Save Failed",description:t,variant:"destructive"}),ht(!1)}}),cn=p.useCallback(()=>{r||(ne.length>0&&ne.forEach(e=>F(e)),se.length>0&&se.forEach(e=>B(e)),fe())},[r,ne,se,F,B,fe]),dn=p.useCallback(()=>{if("small"===v){const e=k.map(e=>e.id);e.length>0&&ae(e)}else if(Ve){const e=k.filter(e=>e.seat.sectionId===Ve.id);e.length>0&&ae(e.map(e=>e.id))}else if("seat-level"===s){const e=k.map(e=>e.id);e.length>0&&ae(e)}else{const e=_.map(e=>e.id);e.length>0&&re(e)}},[v,Ve,s,k,_,ae,re]);Xq({onUndo:$,onRedo:U,onSave:()=>ht(!0),onDelete:cn,onEscape:pe,onSelectAll:dn,onCopy:()=>{const e=k.filter(e=>ne.includes(e.id)),t=_.filter(e=>se.includes(e.id));$e({seats:e,sections:t})},onPaste:()=>{G();if(Be.seats?.length){const e=Be.seats.map(e=>({...e,id:crypto.randomUUID(),x:e.x+1,y:e.y+1,isNew:!0}));N(t=>[...t,...e]),ae(e.map(e=>e.id))}if(Be.sections?.length){const e=Be.sections.map(e=>({...e,id:crypto.randomUUID(),x:e.x+1,y:e.y+1,isNew:!0}));E(t=>[...t,...e]),re(e.map(e=>e.id))}},onArrowMove:(e,t)=>{G();const n=t?.1:1;let a=0,s=0;switch(e){case"left":a=-n;break;case"right":a=n;break;case"up":s=-n;break;case"down":s=n}ne.length>0&&N(e=>e.map(e=>ne.includes(e.id)?{...e,x:e.x+a,y:e.y+s}:e)),se.length>0&&E(e=>e.map(e=>se.includes(e.id)?{...e,x:e.x+a,y:e.y+s}:e))}});const un="large"===v&&Ve?c.jsx(oH,{viewingSection:Ve,readOnly:r,displayedSeats:Wt,selectedSeat:ie,seatPlacementForm:Ke,uniqueSections:Gq(k,C,_,s),sectionsData:C,sectionSelectValue:We,onSectionSelectValueChange:Qe,containerRef:At,dimensionsReady:Dt,containerDimensions:Tt,zoomLevel:je,panOffset:Ee,isPlacingSeats:He,isUploadingImage:xe,onBack:()=>{qe(null),Ke.setValue("section",""),oe(null)},onSave:()=>ht(!0),onClearSectionSeats:()=>{G(),N(e=>e.filter(e=>e.seat.section!==Ve.name))},onSectionImageSelect:async(e,t)=>{const n=t.target.files?.[0];if(n)try{const t=await GP.uploadImage(n);E(n=>n.map(n=>n.id===e?{...n,imageUrl:t.url,file_id:t.id}:n)),Ve?.id===e&&qe(e=>e?{...e,imageUrl:t.url,file_id:t.id}:null);C?.find(t=>t.id===e);const a=_.find(t=>t.id===e);a&&a.isNew}catch(a){Uk({title:"Upload failed",variant:"destructive"})}},onRemoveSectionImage:Qt,onSeatClick:jt,onSeatDragEnd:en,onBatchSeatDragEnd:nn,onSeatShapeTransform:sn,onSeatShapeStyleChange:(e,t)=>{G(),N(n=>n.map(n=>n.id===e?{...n,shape:{...n.shape||{type:IV.CIRCLE,radius:.8},...t}}:n))},onImageClick:Jt,onDeselect:pe,onWheel:(e,t)=>{if(t){e.evt.preventDefault();const t=e.evt.deltaY>0?-.1:.1;Ce(e=>Math.max(.5,Math.min(3,e+t)))}},onPan:e=>Pe(e),onZoomIn:ke,onZoomOut:Ne,onResetZoom:Re,onNewSection:()=>{Me(!0),Le(null),Ue.reset({name:""})},saveSeatsMutationPending:ln.isPending,seats:k,onDeleteSeat:e=>F(e.id),onSetViewingSeat:tt,onEditSeat:e=>{at(!0),dt.reset({section:e.seat.section,sectionId:e.seat.sectionId,row:e.seat.row,seatNumber:e.seat.seatNumber,seatType:e.seat.seatType})},onSetSelectedSeat:oe,seatEditFormReset:e=>dt.reset(e),selectedSeatIds:ne,onSelectSeatIds:ae,anchorSeatId:de,placementShape:yt,onPlacementShapeChange:bt,selectedShapeTool:wt,onShapeToolSelect:St,onShapeDraw:Zt,shapeOverlays:Pt,selectedOverlayId:_t,onShapeOverlayClick:e=>{wt&&St(null),Et(e)},onDetectSeats:Ve.imageUrl?Xt:void 0,isDetectingSeats:xt,onMarkersInRect:(e,t)=>{wt||(ae(e),re(t))},onAlign:e=>{if(ne.length<=1)return;G();const t=k.filter(e=>ne.includes(e.id)),n=t.map(e=>mH(e,{radius:.8})),a=pH(t,n,e);N(e=>e.map(e=>{const t=a.get(e.id);return t?{...e,...t}:e}))},seatEditControls:nt&&ie&&!r?c.jsx(eH,{form:dt,uniqueSections:Gq(k,C,_,s),sectionsData:C,sectionMarkers:_,designMode:s,viewingSection:Ve,onSave:e=>{ie&&(G(),D(ie.id,{seat:e}),at(!1),dt.reset())},onCancel:()=>{at(!1),dt.reset()},isUpdating:!1,standalone:!0}):void 0,canvasBackgroundColor:P,onCanvasBackgroundColorChange:e=>{G(),E(t=>t.map(t=>t.id===Ve.id?{...t,canvasBackgroundColor:e}:t))},markerFillTransparency:Ve.markerFillTransparency,onMarkerFillTransparencyChange:e=>{G(),E(t=>t.map(t=>t.id===Ve.id?{...t,markerFillTransparency:e}:t))},showGrid:Ut,gridSize:Bt,isFullscreen:Ye,onToggleFullscreen:()=>Xe(!Ye),onUndo:r?void 0:$,onRedo:r?void 0:U,canUndo:V,canRedo:q,isDirty:X,onRefresh:on,isRefreshing:S}):c.jsxs("div",{className:Ye?"flex flex-col flex-1 min-h-0 space-y-4":"space-y-4",children:[c.jsx(uH,{layoutName:n,isLoading:S,seatsError:j,venueType:v,sectionMarkers:_,seats:k,viewingSection:Ve,displayedSeats:Wt,onToggleDatasheet:()=>Je(!0),readOnly:r,onSave:()=>ht(!0),isSaving:ln.isPending,isFullscreen:Ye,onToggleFullscreen:()=>Xe(!Ye),mainImageUrl:ge,isPlacingSeats:He,isPlacingSections:Ge,onClearAllPlacements:()=>{G(),"small"===v||E([]),N([]),fe()},onMainImageSelect:async e=>{const t=e.target.files?.[0];t&&(await ye(t),setTimeout(()=>{if(At.current){const e=At.current.getBoundingClientRect(),t=Math.floor(e.width)||800,n=Math.floor(e.height)||600;Mt({width:t,height:n})}},100))},onDetectSections:ge&&"section-level"===s?Yt:void 0,isDetectingSections:ft,onDetectSeats:ge&&"small"===v?Xt:void 0,isDetectingSeats:xt,onRemoveImage:ge?be:void 0,canvasBackgroundColor:P,onCanvasBackgroundColorChange:ge?void 0:A,markerFillTransparency:R,onMarkerFillTransparencyChange:r?void 0:T,snapToGrid:Ot,onSnapToGridChange:zt,gridSize:Bt,onGridSizeChange:$t,showGrid:Ut,onShowGridChange:Vt,onPreview:()=>Ht(!0),onUndo:r?void 0:$,onRedo:r?void 0:U,canUndo:V,canRedo:q,isDirty:X,onRefresh:on,isRefreshing:S}),c.jsxs("div",{className:Ye?"flex flex-col flex-1 min-h-0 space-y-4":"space-y-4",children:["small"===v&&c.jsx(rH,{selectedShapeType:wt,onShapeTypeSelect:r?()=>{}:St,selectedSeat:ie,selectedSection:"section-level"===s?le:null,onSeatEdit:e=>{at(!0),dt.reset({section:e.seat.section,sectionId:e.seat.sectionId,row:e.seat.row,seatNumber:e.seat.seatNumber,seatType:e.seat.seatType})},onSeatView:tt,onSectionEdit:e=>{Le(e.id),pt(!0),e.shape&&(bt(e.shape),St(e.shape.type))},onSectionView:e=>{qe(e),Ke.setValue("section",e.name),ce(null),Re()},onSeatDelete:e=>F(e.id),onSectionDelete:e=>B(e.id),onSeatShapeStyleChange:(e,t)=>{G(),N(n=>n.map(n=>n.id===e?{...n,shape:{...n.shape||{type:IV.CIRCLE,radius:.8},...t}}:n))},onSectionShapeStyleChange:(e,t)=>{G(),E(n=>n.map(n=>n.id===e?{...n,shape:{...n.shape||{type:IV.RECTANGLE,width:2,height:1.5},...t}}:n))},onAlign:e=>{G();const t=e;if(ne.length>1){const e=k.filter(e=>ne.includes(e.id)),n=e.map(e=>mH(e,{radius:.8})),a=pH(e,n,t);N(e=>e.map(e=>{const t=a.get(e.id);return t?{...e,...t}:e}))}if(se.length>1){const e=_.filter(e=>se.includes(e.id)),n=e.map(e=>mH(e,{width:2,height:1.5})),a=pH(e,n,t);E(e=>e.map(e=>{const t=a.get(e.id);return t?{...e,...t}:e}))}},selectedSeatCount:ne.length,selectedSectionCount:se.length,seatPlacement:ne.length<=1?{form:Ke,uniqueSections:Gq(k,C,_,s),sectionsData:C,sectionSelectValue:We,onSectionSelectValueChange:Qe,onNewSection:()=>{Me(!0),Le(null),Ue.reset({name:""})},onManageSections:()=>Ie(!0)}:void 0,seatEditControls:nt&&ie&&!r?c.jsx(eH,{form:dt,uniqueSections:Gq(k,C,_,s),sectionsData:C,sectionMarkers:_,designMode:s,onSave:e=>{ie&&(G(),D(ie.id,{seat:e}),at(!1),dt.reset())},onCancel:()=>{at(!1),dt.reset()},isUpdating:!1,standalone:!0}):void 0,readOnly:r}),"large"===v&&!Ve&&c.jsx(c.Fragment,{children:mt?c.jsx(dH,{initialName:De&&_.find(e=>e.id===De)?.name||"",isEditing:!!De,selectedShapeType:wt,onShapeTypeSelect:St,onSave:e=>{if(De){const t=_.find(e=>e.id===De);t&&O(De,{name:e,shape:yt??t.shape})}else I({name:e,x:"section-level"===s?Oe?.x??50:void 0,y:"section-level"===s?Oe?.y??50:void 0,shape:"section-level"===s?yt:void 0});pt(!1),ze(null),Le(null)},onCancel:()=>{pt(!1),ze(null),Le(null)}}):c.jsx(sH,{selectedShapeType:wt,onShapeTypeSelect:r?()=>{}:St,selectedSeat:null,selectedSection:le,onSeatEdit:()=>{},onSeatView:()=>{},onSectionEdit:e=>{Le(e.id),pt(!0),e.shape&&(bt(e.shape),St(e.shape.type))},onSectionView:e=>{qe(e),Ke.setValue("section",e.name),ce(null),Re()},onSeatDelete:()=>{},onSectionDelete:e=>B(e.id),onSeatShapeStyleChange:()=>{},onSectionShapeStyleChange:(e,t)=>{G(),E(n=>n.map(n=>n.id===e?{...n,shape:{...n.shape||{type:IV.RECTANGLE,width:2,height:1.5},...t}}:n))},onAlign:e=>{if(se.length<=1)return;G();const t=_.filter(e=>se.includes(e.id)),n=t.map(e=>mH(e,{width:2,height:1.5})),a=pH(t,n,e);E(e=>e.map(e=>{const t=a.get(e.id);return t?{...e,...t}:e}))},selectedSeatCount:0,selectedSectionCount:se.length,readOnly:r,level:"section"})}),c.jsxs("div",{ref:At,className:`relative border rounded-lg overflow-hidden select-none w-full transition-colors ${ge?"bg-gray-100":""} ${Ye?"flex-1 min-h-0":""}`,style:{height:Ye?void 0:"600px",width:"100%",...Ye?{minHeight:400}:{},backgroundColor:ge?void 0:P},children:["small"===v?c.jsx(iH,{imageUrl:ge,canvasBackgroundColor:P,containerRef:At,dimensionsReady:Dt,containerDimensions:Tt,containerStyle:Ye?"flex":"fixed",seats:Wt,selectedSeatId:ie?.id??null,selectedSeatIds:ne,anchorSeatId:de,anchorSectionId:ue,isPlacingSeats:He,readOnly:r,zoomLevel:je,panOffset:Ee,onSeatClick:jt,onSeatDragEnd:en,onBatchSeatDragEnd:nn,onSeatShapeTransform:sn,onImageClick:Jt,onDeselect:pe,onShapeDraw:Zt,onShapeOverlayClick:e=>{wt&&St(null),Et(e)},onWheel:(e,t)=>{if(t){e.evt.preventDefault();const t=e.evt.deltaY>0?-.1:.1;Ce(e=>Math.max(.5,Math.min(3,e+t)))}},onPan:e=>Pe(e),onMarkersInRect:(e,t)=>{wt||(ae(e),re(t))},onZoomIn:ke,onZoomOut:Ne,onResetZoom:Re,selectedShapeTool:wt,shapeOverlays:Pt,selectedOverlayId:_t,showGrid:Ut,gridSize:Bt}):c.jsx(Hq,{imageUrl:ge,canvasBackgroundColor:P,seats:[],sections:_,selectedSeatId:null,selectedSectionId:le?.id||null,selectedSeatIds:[],selectedSectionIds:se,anchorSeatId:de,anchorSectionId:ue,onMarkersInRect:(e,t)=>{wt||re(t)},isPlacingSeats:!1,isPlacingSections:Ge,readOnly:r,zoomLevel:je,panOffset:Ee,onSeatClick:jt,onSectionClick:Ct,onSectionDragEnd:tn,onSeatDragEnd:en,onBatchSeatDragEnd:nn,onBatchSectionDragEnd:an,onSeatShapeTransform:sn,onSectionShapeTransform:rn,onSectionDoubleClick:e=>{qe(e),Ke.setValue("section",e.name),ce(null),Re()},shapeOverlays:Pt,onImageClick:Jt,onDeselect:pe,onShapeDraw:Zt,onShapeOverlayClick:e=>{wt&&St(null),Et(e)},onWheel:(e,t)=>{if(t){e.evt.preventDefault();const t=e.evt.deltaY>0?-.1:.1;Ce(e=>Math.max(.5,Math.min(3,e+t)))}},onPan:e=>Pe(e),containerWidth:Tt.width,containerHeight:Tt.height,venueType:v,selectedShapeTool:wt,selectedOverlayId:_t}),c.jsx(gz,{zoomLevel:je,panOffset:Ee,onZoomIn:ke,onZoomOut:Ne,onResetZoom:Re})]})]})]});return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:Rt,className:Ye?"h-screen w-screen bg-background overflow-auto":"",children:Ye?c.jsx("div",{className:"h-full w-full flex flex-col bg-background p-6",children:un}):c.jsx(Sl,{className:g,children:c.jsx("div",{className:"p-6",children:un})})}),c.jsx(bA,{open:ut,onOpenChange:ht,title:"Save Seat Layout",description:"Are you sure you want to save changes?",confirmAction:{label:"Save",onClick:()=>ln.mutate(),loading:ln.isPending},cancelAction:{label:"Cancel",onClick:()=>ht(!1)}}),"seat-level"===s&&c.jsx(cH,{open:Fe,onOpenChange:Ie,sections:C??[],onEdit:e=>{Le(e.id),Ue.reset({name:e.name})},onDelete:e=>B(e.id),isDeleting:!1,form:Ue,editingSectionId:De,isUpdating:!1,onSave:Ue.handleSubmit(e=>{De&&O(De,{name:e.name}),Ie(!1)}),onCancelEdit:()=>{Le(null),Ue.reset({name:""})}}),c.jsx(Jq,{open:Te,onOpenChange:e=>{e||(Me(!1),Le(null),Ue.reset({name:""}),ze(null))},form:Ue,editingSectionId:De,isCreating:!1,isUpdating:!1,onSave:Ue.handleSubmit(e=>{De?O(De,{name:e.name}):I({name:e.name}),Me(!1),Le(null),Ue.reset({name:""})}),onCancel:()=>{Me(!1),Le(null),Ue.reset({name:""})}}),c.jsx(hH,{open:qt,onOpenChange:Ht,layout:{id:t,name:n||"Layout",image_url:ge,canvas_background_color:P,design_mode:s,marker_fill_transparency:R},layoutSeats:("large"===v&&Ve?Wt:k).map(e=>({id:e.id,layout_id:t,section_id:e.seat.sectionId||"",section_name:e.seat.section,row:e.seat.row,seat_number:e.seat.seatNumber,seat_type:e.seat.seatType,x_coordinate:e.x,y_coordinate:e.y,shape:e.shape?JSON.stringify(e.shape):void 0})),sections:_.map(e=>({id:e.id,layout_id:t,name:e.name,x_coordinate:e.x,y_coordinate:e.y,image_url:e.imageUrl,canvas_background_color:e.canvasBackgroundColor,marker_fill_transparency:e.markerFillTransparency??void 0,shape:e.shape?JSON.stringify(e.shape):void 0})),imageUrl:"large"===v&&Ve&&Ve.imageUrl||ge})]})}function vH({data:e=[],loading:t=!1,onCreate:n,onEdit:a,onDelete:s,onSearch:r,className:i}){const{t:o}=fr(),l=[DP({accessorKey:"code",header:()=>o("pages.settings.ticketing.et.code","Code"),size:100}),TP({accessorKey:"name",header:()=>o("pages.settings.ticketing.et.name","Name"),size:150}),FP({header:()=>o("common.actions","Actions"),size:180,actions:[...a?[{icon:Kg,onClick:e=>a(e),title:"Edit"}]:[],...s?[{icon:ax,onClick:e=>s(e),title:"Delete",className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors"}]:[]]})];return c.jsx("div",{className:i,children:c.jsx(OP,{data:e,columns:l,title:o("pages.settings.ticketing.et.title","EventTypes"),description:o("pages.settings.ticketing.et.list","EventType List"),loading:t,onCreate:n,onSearch:r,manualFiltering:!!r,useDefaultColumns:!1})})}function yH(e){return{id:e.id,code:e.code,name:e.name,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class bH{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchEventTypes(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.eventTypes.replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(yH),pagination:l}}catch(t){throw t}}async searchEventTypes(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.endpoints.eventTypes.replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(yH)}catch(n){throw n}}async fetchEventTypeById(e){try{const t=this.endpoints.eventTypes.replace(/\/$/,"");return yH(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createEventType(e){try{return yH(await this.apiClient.post(this.endpoints.eventTypes,e,{requiresAuth:!0}))}catch(t){throw t}}async updateEventType(e,t){try{const n=this.endpoints.eventTypes.replace(/\/$/,"");return yH(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteEventType(e){try{const t=this.endpoints.eventTypes.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const wH=p.createContext(null);function SH({children:e,config:t}){const n=p.useMemo(()=>new bH(t),[t.apiClient,t.endpoints?.eventTypes]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(wH.Provider,{value:a,children:e})}const jH={code:"",name:""};function CH({open:e,onOpenChange:t,onSubmit:n,loading:a=!1,error:s=null}){const{t:r}=fr(),i=Us(),[o,l]=p.useState(jH),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(0),[x,v]=p.useState(null),y=p.useRef(null),b=p.useRef(null);p.useEffect(()=>{v(s)},[s]);const w=()=>{const e={};return o.code||(e.code=r("pages.settings.ticketing.et.codeRequired","Code is required")),o.name||(e.name=r("pages.settings.ticketing.et.nameRequired","Name is required")),u(e),0===Object.keys(e).length},S=async()=>{try{const e={code:o.code,name:o.name};await n(e),l(jH),u({}),m(!1),g(e=>e+1)}catch(e){m(!1)}},j=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),x&&v(null)},C=()=>{l(jH),u({}),t(!1)},k=()=>{l({...jH}),u({}),v(null),g(e=>e+1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{y.current?.focus()})},[e,f]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&h)return e.preventDefault(),e.stopPropagation(),void m(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h?a||S():!a&&w()&&m(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||k())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,h,a,o]);return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:C,title:r("pages.settings.ticketing.et.createTitle","Create EventType"),maxWidth:"500px",loading:a,showClearButton:!0,onClear:k,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:r("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>C(),disabled:a},{label:a?r("pages.settings.ticketing.et.creating","Creating..."):r("pages.settings.ticketing.et.create","Create EventType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),b.current&&b.current.requestSubmit()},disabled:a}],children:c.jsxs("form",{ref:b,onSubmit:async e=>{e.preventDefault(),w()&&m(!0)},className:sl(i.spacingFormSection,"w-full"),children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:sl("grid grid-cols-1",i.gapForm),children:[c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"code",className:sl(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.et.code","Code")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"code",ref:y,type:"text",value:o.code,onChange:e=>j("code",e.target.value),className:sl(i.inputHeight,i.textSize,d.code&&"border-destructive"),disabled:a,placeholder:r("pages.settings.ticketing.et.codePlaceholder","Enter code")})}),c.jsx(Ul,{className:i.textSizeSmall,children:d.code})]}),c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"name",className:sl(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.et.name","Name")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"name",type:"text",value:o.name,onChange:e=>j("name",e.target.value),className:sl(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:a,placeholder:r("pages.settings.ticketing.et.namePlaceholder","Enter name")})}),c.jsx(Ul,{className:i.textSizeSmall,children:d.name})]})]})}),x&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[r("common.error","ERROR"),":"]}),c.jsx("span",{children:x.message||r("pages.settings.ticketing.et.createError","Failed to create EventType")})]})})]},f)}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||setTimeout(()=>{y.current?.focus()},0)},title:r("pages.settings.ticketing.et.confirmCreateTitle","Confirm EventType Creation"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:r("pages.settings.ticketing.et.confirmCreateDescription","Are you sure you want to create a new event-type?")})}),confirmAction:{label:a?r("pages.settings.ticketing.et.creating","Creating..."):r("pages.settings.ticketing.et.confirmCreate","Confirm & Create"),onClick:S,loading:a,disabled:a},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:a,onClick:()=>m(!1)}})]})}function kH({open:e,onOpenChange:t,et:n,onSubmit:a,loading:s=!1,error:r=null}){const{t:i}=fr(),o=Us(),[l,d]=p.useState({code:"",name:""}),[u,h]=p.useState({code:"",name:""}),[m,f]=p.useState({}),[g,x]=p.useState(!1),[v,y]=p.useState(0),[b,w]=p.useState(null),S=p.useRef(null),j=p.useRef(null);p.useEffect(()=>{w(r)},[r]),p.useEffect(()=>{if(e&&n){const e={code:n.code||"",name:n.name||""};d(e),h(e),f({}),w(null),y(e=>e+1)}},[e,n]);const C=()=>{const e={};return l.code||(e.code=i("pages.settings.ticketing.et.codeRequired","Code is required")),l.name||(e.name=i("pages.settings.ticketing.et.nameRequired","Name is required")),f(e),0===Object.keys(e).length},k=async()=>{if(n)try{const e={code:l.code,name:l.name};await a(n.id,e),x(!1),t(!1)}catch(e){x(!1)}},N=(e,t)=>{d(n=>({...n,[e]:t})),m[e]&&f(t=>({...t,[e]:void 0})),b&&w(null)},_=()=>{n&&d(u),f({}),t(!1)},E=()=>{n&&(d({...u}),f({}),w(null),y(e=>e+1))};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{S.current?.focus()})},[e,v,n]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&g)return e.preventDefault(),e.stopPropagation(),void x(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),g?s||k():!s&&C()&&x(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||E())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,g,s,l,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:_,title:i("pages.settings.ticketing.et.editTitle","Edit EventType"),maxWidth:"500px",loading:s,showClearButton:!0,onClear:E,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Reset",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:i("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>_(),disabled:s},{label:s?i("pages.settings.ticketing.et.updating","Updating..."):i("pages.settings.ticketing.et.update","Update EventType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),j.current&&j.current.requestSubmit()},disabled:s}],children:c.jsxs("form",{ref:j,onSubmit:async e=>{e.preventDefault(),C()&&x(!0)},className:sl(o.spacingFormSection,"w-full"),children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",o.paddingForm),children:c.jsxs("div",{className:sl("grid grid-cols-1",o.gapForm),children:[c.jsxs(Ol,{className:o.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"code",className:sl(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.et.code","Code")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"code",ref:S,type:"text",value:l.code,onChange:e=>N("code",e.target.value),className:sl(o.inputHeight,o.textSize,m.code&&"border-destructive"),disabled:s,placeholder:i("pages.settings.ticketing.et.codePlaceholder","Enter code")})}),c.jsx(Ul,{className:o.textSizeSmall,children:m.code})]}),c.jsxs(Ol,{className:o.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"name",className:sl(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.et.name","Name")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"name",type:"text",value:l.name,onChange:e=>N("name",e.target.value),className:sl(o.inputHeight,o.textSize,m.name&&"border-destructive"),disabled:s,placeholder:i("pages.settings.ticketing.et.namePlaceholder","Enter name")})}),c.jsx(Ul,{className:o.textSizeSmall,children:m.name})]})]})}),b&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",o.paddingContainer,o.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[i("common.error","ERROR"),":"]}),c.jsx("span",{children:b.message||i("pages.settings.ticketing.et.updateError","Failed to update EventType")})]})})]},v)}),c.jsx(bA,{open:g,onOpenChange:e=>{x(e),e||setTimeout(()=>{S.current?.focus()},0)},title:i("pages.settings.ticketing.et.confirmUpdateTitle","Confirm EventType Update"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:sl("mb-3",o.textSizeSmall),children:i("pages.settings.ticketing.et.confirmUpdateDescription","Are you sure you want to update this event-type?")})}),confirmAction:{label:s?i("pages.settings.ticketing.et.updating","Updating..."):i("pages.settings.ticketing.et.confirmUpdate","Confirm & Update"),onClick:k,loading:s,disabled:s},cancelAction:{label:i("common.cancel","Cancel"),variant:"outline",disabled:s,onClick:()=>x(!1)}})]}):null}function NH({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToEventType:n}){const a=function(){const e=p.useContext(wH);if(!e)throw new Error("useEventTypeService must be used within EventTypeProvider");return e.service}(),{toast:s}=Vk(),{t:r}=fr(),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(""),[g,x]=p.useState({page:1,pageSize:50}),[v,y]=p.useState(!1),[b,w]=p.useState(null),{data:S,isLoading:j}=function(e,t){const{search:n,pagination:a,enabled:s=!0}=t||{},r=n?.trim()||void 0;return Ya({queryKey:["et",r,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,n=a?.pageSize||100;return r?e.searchEventTypes(r,n).then(e=>({data:e,pagination:{page:1,pageSize:n,total:e.length,totalPages:1}})):e.fetchEventTypes({skip:t,limit:n})},enabled:s,staleTime:3e5})}(a,{search:m||void 0,pagination:g}),C=S?.data||[],k=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteEventType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["et"]})}})}(a),N=function(e){const t=Va();return Xa({mutationFn:t=>e.createEventType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["et"]})}})}(a),_=function(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateEventType(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["et"]}),t.invalidateQueries({queryKey:["et",n.id]})}})}(a),E=p.useCallback(e=>{w(e),y(!0)},[]),P=p.useCallback(async()=>{if(b)try{await k.mutateAsync(b.id),s({title:r("common.success"),description:r("pages.settings.ticketing.et.deleted")}),y(!1),w(null)}catch(e){s({title:r("common.error"),description:r("common.errorOccurred"),variant:"destructive"})}},[b,k,s,r]),A=p.useCallback(e=>{h(e),d(!0)},[]),R=p.useCallback(()=>{o(!0)},[]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const T=p.useCallback(async e=>{try{await N.mutateAsync(e),s({title:r("common.success","Success"),description:r("pages.settings.ticketing.et.created","EventType created successfully")})}catch(t){throw s({title:r("common.error","Error"),description:r("pages.settings.ticketing.et.createError","Failed to create event-type"),variant:"destructive"}),t}},[N,s,r]),M=p.useCallback(async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),s({title:r("common.success","Success"),description:r("pages.settings.ticketing.et.updated","EventType updated successfully")})}catch(n){throw s({title:r("common.error","Error"),description:r("pages.settings.ticketing.et.updateError","Failed to update event-type"),variant:"destructive"}),n}},[_,s,r]),D=p.useCallback(e=>{f(e),x(e=>({...e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(vH,{data:C,loading:j,onCreate:R,onEdit:A,onDelete:E,onSearch:D}),c.jsx(CH,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:T,loading:N.isPending,error:N.error}),c.jsx(kH,{open:l,onOpenChange:e=>{d(e),e||h(null)},et:u,onSubmit:M,loading:_.isPending,error:_.error}),c.jsx(bA,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:r("pages.settings.ticketing.et.confirmDeleteTitle","Delete EventType"),description:b?r("pages.settings.ticketing.et.confirmDelete",{defaultValue:`Are you sure you want to delete "${b.name||b.id}"? This action cannot be undone.`,name:b.name||b.id}):"",confirmText:"delete",confirmTextLabel:r("common.typeToConfirm","Type 'delete' to confirm"),confirmAction:{label:r("common.delete","Delete"),variant:"destructive",onClick:P,loading:k.isPending,disabled:k.isPending},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:k.isPending}})]})}function _H({data:e=[],loading:t=!1,onCreate:n,onEdit:a,onDelete:s,onSearch:r,className:i}){const{t:o}=fr(),l=[DP({accessorKey:"code",header:()=>o("pages.settings.ticketing.vt.code","Code"),size:100}),TP({accessorKey:"name",header:()=>o("pages.settings.ticketing.vt.name","Name"),size:150}),FP({header:()=>o("common.actions","Actions"),size:180,actions:[...a?[{icon:Kg,onClick:e=>a(e),title:"Edit"}]:[],...s?[{icon:ax,onClick:e=>s(e),title:"Delete",className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors"}]:[]]})];return c.jsx("div",{className:i,children:c.jsx(OP,{data:e,columns:l,title:o("pages.settings.ticketing.vt.title","VenueTypes"),description:o("pages.settings.ticketing.vt.list","VenueType List"),loading:t,onCreate:n,onSearch:r,manualFiltering:!!r,useDefaultColumns:!1})})}const EH={code:"",name:""};function PH({open:e,onOpenChange:t,onSubmit:n,loading:a=!1,error:s=null}){const{t:r}=fr(),i=Us(),[o,l]=p.useState(EH),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(0),[x,v]=p.useState(null),y=p.useRef(null),b=p.useRef(null);p.useEffect(()=>{v(s)},[s]);const w=()=>{const e={};return o.code||(e.code=r("pages.settings.ticketing.vt.codeRequired","Code is required")),o.name||(e.name=r("pages.settings.ticketing.vt.nameRequired","Name is required")),u(e),0===Object.keys(e).length},S=async()=>{try{const e={code:o.code,name:o.name};await n(e),l(EH),u({}),m(!1),g(e=>e+1)}catch(e){m(!1)}},j=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),x&&v(null)},C=()=>{l(EH),u({}),t(!1)},k=()=>{l({...EH}),u({}),v(null),g(e=>e+1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{y.current?.focus()})},[e,f]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&h)return e.preventDefault(),e.stopPropagation(),void m(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h?a||S():!a&&w()&&m(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||k())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,h,a,o]);return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:C,title:r("pages.settings.ticketing.vt.createTitle","Create VenueType"),maxWidth:"500px",loading:a,showClearButton:!0,onClear:k,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:r("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>C(),disabled:a},{label:a?r("pages.settings.ticketing.vt.creating","Creating..."):r("pages.settings.ticketing.vt.create","Create VenueType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),b.current&&b.current.requestSubmit()},disabled:a}],children:c.jsxs("form",{ref:b,onSubmit:async e=>{e.preventDefault(),w()&&m(!0)},className:sl(i.spacingFormSection,"w-full"),children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:sl("grid grid-cols-1",i.gapForm),children:[c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"code",className:sl(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.vt.code","Code")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"code",ref:y,type:"text",value:o.code,onChange:e=>j("code",e.target.value),className:sl(i.inputHeight,i.textSize,d.code&&"border-destructive"),disabled:a,placeholder:r("pages.settings.ticketing.vt.codePlaceholder","Enter code")})}),c.jsx(Ul,{className:i.textSizeSmall,children:d.code})]}),c.jsxs(Ol,{className:i.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"name",className:sl(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.vt.name","Name")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"name",type:"text",value:o.name,onChange:e=>j("name",e.target.value),className:sl(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:a,placeholder:r("pages.settings.ticketing.vt.namePlaceholder","Enter name")})}),c.jsx(Ul,{className:i.textSizeSmall,children:d.name})]})]})}),x&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[r("common.error","ERROR"),":"]}),c.jsx("span",{children:x.message||r("pages.settings.ticketing.vt.createError","Failed to create VenueType")})]})})]},f)}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||setTimeout(()=>{y.current?.focus()},0)},title:r("pages.settings.ticketing.vt.confirmCreateTitle","Confirm VenueType Creation"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:r("pages.settings.ticketing.vt.confirmCreateDescription","Are you sure you want to create a new venue-type?")})}),confirmAction:{label:a?r("pages.settings.ticketing.vt.creating","Creating..."):r("pages.settings.ticketing.vt.confirmCreate","Confirm & Create"),onClick:S,loading:a,disabled:a},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:a,onClick:()=>m(!1)}})]})}function AH({open:e,onOpenChange:t,vt:n,onSubmit:a,loading:s=!1,error:r=null}){const{t:i}=fr(),o=Us(),[l,d]=p.useState({code:"",name:""}),[u,h]=p.useState({code:"",name:""}),[m,f]=p.useState({}),[g,x]=p.useState(!1),[v,y]=p.useState(0),[b,w]=p.useState(null),S=p.useRef(null),j=p.useRef(null);p.useEffect(()=>{w(r)},[r]),p.useEffect(()=>{if(e&&n){const e={code:n.code||"",name:n.name||""};d(e),h(e),f({}),w(null),y(e=>e+1)}},[e,n]);const C=()=>{const e={};return l.code||(e.code=i("pages.settings.ticketing.vt.codeRequired","Code is required")),l.name||(e.name=i("pages.settings.ticketing.vt.nameRequired","Name is required")),f(e),0===Object.keys(e).length},k=async()=>{if(n)try{const e={code:l.code,name:l.name};await a(n.id,e),x(!1),t(!1)}catch(e){x(!1)}},N=(e,t)=>{d(n=>({...n,[e]:t})),m[e]&&f(t=>({...t,[e]:void 0})),b&&w(null)},_=()=>{n&&d(u),f({}),t(!1)},E=()=>{n&&(d({...u}),f({}),w(null),y(e=>e+1))};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{S.current?.focus()})},[e,v,n]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&g)return e.preventDefault(),e.stopPropagation(),void x(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),g?s||k():!s&&C()&&x(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||E())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,g,s,l,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:_,title:i("pages.settings.ticketing.vt.editTitle","Edit VenueType"),maxWidth:"500px",loading:s,showClearButton:!0,onClear:E,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Reset",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:i("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>_(),disabled:s},{label:s?i("pages.settings.ticketing.vt.updating","Updating..."):i("pages.settings.ticketing.vt.update","Update VenueType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),j.current&&j.current.requestSubmit()},disabled:s}],children:c.jsxs("form",{ref:j,onSubmit:async e=>{e.preventDefault(),C()&&x(!0)},className:sl(o.spacingFormSection,"w-full"),children:[c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",o.paddingForm),children:c.jsxs("div",{className:sl("grid grid-cols-1",o.gapForm),children:[c.jsxs(Ol,{className:o.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"code",className:sl(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.vt.code","Code")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"code",ref:S,type:"text",value:l.code,onChange:e=>N("code",e.target.value),className:sl(o.inputHeight,o.textSize,m.code&&"border-destructive"),disabled:s,placeholder:i("pages.settings.ticketing.vt.codePlaceholder","Enter code")})}),c.jsx(Ul,{className:o.textSizeSmall,children:m.code})]}),c.jsxs(Ol,{className:o.spacingFormItem,children:[c.jsxs(zl,{htmlFor:"name",className:sl(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.vt.name","Name")," *"]}),c.jsx(Bl,{children:c.jsx(_l,{id:"name",type:"text",value:l.name,onChange:e=>N("name",e.target.value),className:sl(o.inputHeight,o.textSize,m.name&&"border-destructive"),disabled:s,placeholder:i("pages.settings.ticketing.vt.namePlaceholder","Enter name")})}),c.jsx(Ul,{className:o.textSizeSmall,children:m.name})]})]})}),b&&c.jsx("div",{className:sl("rounded-md bg-destructive/10 border border-destructive/20",o.paddingContainer,o.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[i("common.error","ERROR"),":"]}),c.jsx("span",{children:b.message||i("pages.settings.ticketing.vt.updateError","Failed to update VenueType")})]})})]},v)}),c.jsx(bA,{open:g,onOpenChange:e=>{x(e),e||setTimeout(()=>{S.current?.focus()},0)},title:i("pages.settings.ticketing.vt.confirmUpdateTitle","Confirm VenueType Update"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:sl("mb-3",o.textSizeSmall),children:i("pages.settings.ticketing.vt.confirmUpdateDescription","Are you sure you want to update this venue-type?")})}),confirmAction:{label:s?i("pages.settings.ticketing.vt.updating","Updating..."):i("pages.settings.ticketing.vt.confirmUpdate","Confirm & Update"),onClick:k,loading:s,disabled:s},cancelAction:{label:i("common.cancel","Cancel"),variant:"outline",disabled:s,onClick:()=>x(!1)}})]}):null}function RH({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToVenueType:n}){const a=function(){const e=p.useContext(wq);if(!e)throw new Error("useVenueTypeService must be used within VenueTypeProvider");return e.service}(),{toast:s}=Vk(),{t:r}=fr(),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(""),[g,x]=p.useState({page:1,pageSize:50}),[v,y]=p.useState(!1),[b,w]=p.useState(null),{data:S,isLoading:j}=jq(a,{search:m||void 0,pagination:g}),C=S?.data||[],k=function(e){const t=Va();return Xa({mutationFn:t=>e.deleteVenueType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["vt"]})}})}(a),N=function(e){const t=Va();return Xa({mutationFn:t=>e.createVenueType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["vt"]})}})}(a),_=function(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateVenueType(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["vt"]}),t.invalidateQueries({queryKey:["vt",n.id]})}})}(a),E=p.useCallback(e=>{w(e),y(!0)},[]),P=p.useCallback(async()=>{if(b)try{await k.mutateAsync(b.id),s({title:r("common.success"),description:r("pages.settings.ticketing.vt.deleted")}),y(!1),w(null)}catch(e){s({title:r("common.error"),description:r("common.errorOccurred"),variant:"destructive"})}},[b,k,s,r]),A=p.useCallback(e=>{h(e),d(!0)},[]),R=p.useCallback(()=>{o(!0)},[]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const T=p.useCallback(async e=>{try{await N.mutateAsync(e),s({title:r("common.success","Success"),description:r("pages.settings.ticketing.vt.created","VenueType created successfully")})}catch(t){throw s({title:r("common.error","Error"),description:r("pages.settings.ticketing.vt.createError","Failed to create venue-type"),variant:"destructive"}),t}},[N,s,r]),M=p.useCallback(async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),s({title:r("common.success","Success"),description:r("pages.settings.ticketing.vt.updated","VenueType updated successfully")})}catch(n){throw s({title:r("common.error","Error"),description:r("pages.settings.ticketing.vt.updateError","Failed to update venue-type"),variant:"destructive"}),n}},[_,s,r]),D=p.useCallback(e=>{f(e),x(e=>({...e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(_H,{data:C,loading:j,onCreate:R,onEdit:A,onDelete:E,onSearch:D}),c.jsx(PH,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:T,loading:N.isPending,error:N.error}),c.jsx(AH,{open:l,onOpenChange:e=>{d(e),e||h(null)},vt:u,onSubmit:M,loading:_.isPending,error:_.error}),c.jsx(bA,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:r("pages.settings.ticketing.vt.confirmDeleteTitle","Delete VenueType"),description:b?r("pages.settings.ticketing.vt.confirmDelete",{defaultValue:`Are you sure you want to delete "${b.name||b.id}"? This action cannot be undone.`,name:b.name||b.id}):"",confirmText:"delete",confirmTextLabel:r("common.typeToConfirm","Type 'delete' to confirm"),confirmAction:{label:r("common.delete","Delete"),variant:"destructive",onClick:P,loading:k.isPending,disabled:k.isPending},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:k.isPending}})]})}function TH(e){return{id:e.id,code:e.code,name:e.name,user_id:e.user_id??void 0,work_email:e.work_email??void 0,job_title:e.job_title??void 0,department:e.department??void 0,employment_type:e.employment_type??void 0,hire_date:e.hire_date??void 0,work_phone:e.work_phone??void 0,mobile_phone:e.mobile_phone??void 0,office_location:e.office_location??void 0,timezone:e.timezone||"UTC",skills:e.skills??void 0,assigned_territories:e.assigned_territories??void 0,quota_config:e.quota_config??void 0,commission_tier:e.commission_tier??void 0,birthday:e.birthday??void 0,emergency_contact_name:e.emergency_contact_name??void 0,emergency_contact_phone:e.emergency_contact_phone??void 0,emergency_contact_relationship:e.emergency_contact_relationship??void 0,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0,deactivated_at:e.deactivated_at?new Date(e.deactivated_at):void 0}}class MH{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchEmployees(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.employees.replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(TH),pagination:l}}catch(t){throw t}}async searchEmployees(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.endpoints.employees.replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(TH)}catch(n){throw n}}async fetchEmployeeById(e){try{const t=this.endpoints.employees.replace(/\/$/,"");return TH(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createEmployee(e){try{return TH(await this.apiClient.post(this.endpoints.employees,e,{requiresAuth:!0}))}catch(t){throw t}}async updateEmployee(e,t){try{const n=this.endpoints.employees.replace(/\/$/,"");return TH(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteEmployee(e){try{const t=this.endpoints.employees.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}function DH(e,t){const{filter:n,pagination:a}=t||{};return Ya({queryKey:["employees",n?.search,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchEmployees({skip:t,limit:s,search:n?.search})},staleTime:3e5})}function LH({customers:e,selectedCustomerId:t,onSelectedCustomerIdChange:n,customerPopoverOpen:a,onCustomerPopoverOpenChange:s,customerSearchQuery:r,onCustomerSearchQueryChange:i,employees:o,selectedSalespersonId:l,onSelectedSalespersonIdChange:d,salespersonPopoverOpen:u,onSalespersonPopoverOpenChange:h,salespersonSearchQuery:m,onSalespersonSearchQueryChange:f,discountType:g,onDiscountTypeChange:x,discountValue:v,onDiscountValueChange:y,selectedTickets:b,onRemoveTicket:w,onClearAll:S,subtotalAmount:j,discountAmount:C,taxAmount:k,totalAmount:N}){const _=e.find(e=>e.id===t),E=o.find(e=>e.id===l),[P,A]=p.useState("info");return p.useEffect(()=>{b.length>0&&A("tickets")},[b.length]),c.jsx("div",{className:"flex flex-col h-full",children:c.jsxs(gy,{value:P,onValueChange:A,className:"flex flex-col h-full",children:[c.jsx("div",{className:"border-b flex-shrink-0",children:c.jsxs(xy,{className:"w-full h-auto p-0 bg-transparent justify-start",children:[c.jsx(vy,{value:"info",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-6 py-3 font-medium",children:"Information"}),c.jsxs(vy,{value:"tickets",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-6 py-3 font-medium flex items-center gap-2",children:[c.jsx("span",{children:"Tickets"}),b.length>0&&c.jsxs("span",{className:"text-sm text-muted-foreground font-normal",children:["(",b.length,")"]})]})]})}),c.jsx(yy,{value:"info",className:"flex-1 overflow-y-auto mt-0",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground mb-2 block",children:"Customer"}),c.jsxs(wE,{open:a,onOpenChange:e=>{s(e),e||i("")},children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",children:[t?_?.name||_?.code||"Select a customer":"Select customer (optional)",c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(jE,{className:"w-[400px] p-0",align:"start",children:c.jsxs(RN,{children:[c.jsx(MN,{placeholder:"Search customers...",className:"h-9",value:r,onValueChange:i}),c.jsxs(DN,{children:[c.jsx(LN,{children:r?`No customers found matching "${r}"`:"Start typing to search customers..."}),c.jsxs(FN,{children:[c.jsx(ON,{value:"none",onSelect:()=>{n(null),s(!1)},children:c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-muted-foreground",children:"No customer selected"})})}),e.map(e=>c.jsx(ON,{value:`${e.name||e.code} ${e.code||""} ${e.email||""}`,onSelect:()=>{n(e.id),s(!1),i("")},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.name||e.code}),e.code&&e.name&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.code}),e.email&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.email})]})},e.id))]})]})]})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground mb-2 block",children:"Salesperson"}),c.jsxs(wE,{open:u,onOpenChange:e=>{h(e),e||f("")},children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",children:[l?E?.name||E?.code||"Select a salesperson":"Select salesperson (optional)",c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(jE,{className:"w-[400px] p-0",align:"start",children:c.jsxs(RN,{children:[c.jsx(MN,{placeholder:"Search salespeople...",className:"h-9",value:m,onValueChange:f}),c.jsxs(DN,{children:[c.jsx(LN,{children:m?`No salespeople found matching "${m}"`:"Start typing to search salespeople..."}),c.jsxs(FN,{children:[c.jsx(ON,{value:"none",onSelect:()=>{d(null),h(!1)},children:c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-muted-foreground",children:"No salesperson selected"})})}),o.map(e=>c.jsx(ON,{value:`${e.name} ${e.code||""} ${e.work_email||""}`,onSelect:()=>{d(e.id),h(!1),f("")},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.name}),e.code&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.code})]})},e.id))]})]})]})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground mb-2 block",children:"Discount (Optional)"}),c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-md p-1",children:[c.jsx(bl,{variant:"percentage"===g?"default":"ghost",size:"sm",onClick:()=>x("percentage"),className:"h-7 px-3 text-xs",children:"%"}),c.jsx(bl,{variant:"amount"===g?"default":"ghost",size:"sm",onClick:()=>x("amount"),className:"h-7 px-3 text-xs",children:"$"})]}),c.jsx(_l,{type:"number",value:v,onChange:e=>y(e.target.value),placeholder:"0",className:"h-9 flex-1",min:"0",step:"percentage"===g?"1":"0.01"})]})})]})]})}),c.jsxs(yy,{value:"tickets",className:"flex-1 overflow-y-auto mt-0",children:[c.jsx("div",{className:"p-4 space-y-4 h-full flex flex-col",children:0===b.length?c.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:c.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsx("p",{className:"font-medium",children:"No tickets selected"}),c.jsx("p",{className:"text-xs",children:"Select seats from the layout or list"})]})}):c.jsx(c.Fragment,{children:c.jsx("div",{className:"space-y-0",children:b.map((e,t)=>{const n=e.sectionName&&e.rowName&&e.seatNumber?`${e.sectionName} ${e.rowName} ${e.seatNumber}`:e.seatId?`Seat ${e.seatId.slice(0,8)}`:"Unknown";return c.jsx("div",{className:"group py-3 border-b last:border-b-0 hover:bg-muted/30 transition-colors relative",children:c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"text-xs font-mono text-muted-foreground",children:["#",String(t+1).padStart(3,"0")]}),c.jsx("span",{className:"text-sm font-medium truncate",children:n})]}),e.ticketNumber&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ticket: ",e.ticketNumber]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsxs("span",{className:"text-sm font-semibold tabular-nums",children:["$",e.ticketPrice?.toFixed(2)||"0.00"]}),c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>w(e.eventSeatId),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive hover:bg-destructive/10","aria-label":"Remove ticket",title:"Remove ticket",children:c.jsx(ax,{className:"h-3.5 w-3.5"})})]})]})},e.eventSeatId)})})})}),b.length>0&&c.jsx("div",{className:"border-t bg-background mt-auto flex-shrink-0",children:c.jsxs("div",{className:"p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"}),c.jsxs("span",{className:"font-semibold tabular-nums",children:["$",j.toFixed(2)]})]}),C>0&&c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground",children:["Discount","percentage"===g?` (${v}%):`:" ($):"]}),c.jsxs("span",{className:"font-semibold tabular-nums text-green-600",children:["-$",C.toFixed(2)]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Tax (10%):"}),c.jsxs("span",{className:"font-semibold tabular-nums",children:["$",k.toFixed(2)]})]}),c.jsx(sC,{}),c.jsxs("div",{className:"flex items-center justify-between text-base font-bold",children:[c.jsx("span",{children:"TOTAL:"}),c.jsxs("span",{className:"tabular-nums",children:["$",N.toFixed(2)]})]}),c.jsx("div",{className:"pt-2",children:c.jsx(bl,{variant:"ghost",size:"sm",onClick:S,className:"w-full h-8 text-xs",children:"Clear All"})})]})})]})]})})}function FH({selectedEventId:e,seatViewMode:t,layoutWithSeats:n,eventSeats:a,seatStatusMap:s,locationStatusMap:r,onSeatClick:i,selectedTickets:o,selectedSectionId:l,onSelectedSectionIdChange:d,onListSeatSelect:u,onAddSeatsToBooking:h}){return c.jsx("div",{className:"pr-1 flex-1",children:e?"visualization"===t?n?c.jsx("div",{className:"h-full overflow-hidden",children:c.jsx(XV,{layout:n.layout,layoutSeats:n.seats,sections:n.sections,eventSeats:a,seatStatusMap:s,locationStatusMap:r,imageUrl:n.layout.image_url,onSeatClick:i,selectedSeatIds:new Set(o.map(e=>{if(e.sectionName&&e.rowName&&e.seatNumber){const t=n.seats.find(t=>t.section_name===e.sectionName&&t.row===e.rowName&&t.seat_number===e.seatNumber);return t?.id}return e.seatId}).filter(Boolean)),selectedSectionId:l,onSelectedSectionIdChange:d})}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No layout available for this event"}):c.jsx("div",{className:"h-full overflow-y-auto p-4",children:c.jsx(JV,{eventSeats:a,onSeatSelect:u,selectedSeatIds:void 0,showSelection:!0,onAddToBooking:h,showAddToBooking:!0,bookedSeatIds:new Set(o.map(e=>e.eventSeatId))})}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Select a show and event to view seats"})})}function IH({open:e,onOpenChange:t,onSubmit:n,title:a="Create Booking",maxWidth:s="95vw",initialShowId:r,initialEventId:i,initialCustomerId:o}){const l=Us(),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null),[x,v]=p.useState(r||null),[y,b]=p.useState(i||null),[w,S]=p.useState(!1),[j,C]=p.useState(!1),[k,N]=p.useState(!1),[_,E]=p.useState(""),[P,A]=p.useState(""),[R,T]=p.useState(null),[M,D]=p.useState(!1),[L,F]=p.useState(""),[I,O]=p.useState(""),[z,B]=p.useState("visualization"),[$,U]=p.useState(null),[V,q]=p.useState([]),[H,G]=p.useState(o||null),[K,W]=p.useState("percentage"),[Q,Y]=p.useState("0"),X=p.useMemo(()=>new FO({apiClient:Fs,endpoints:{shows:"/api/v1/ticketing/shows"}}),[]),Z=p.useMemo(()=>new nO({apiClient:Fs,endpoints:{events:"/api/v1/ticketing/events"}}),[]),J=p.useMemo(()=>new kO({apiClient:Fs,endpoints:{layouts:"/api/v1/ticketing/layouts"}}),[]),ee=p.useMemo(()=>new fI({apiClient:Fs,endpoints:{customers:"/api/v1/sales/customers"}}),[]),te=p.useMemo(()=>new MH({apiClient:Fs,endpoints:{employees:"/api/v1/sales/employees"}}),[]),{data:ne}=YO(X,{pagination:{page:1,pageSize:100}}),ae=p.useMemo(()=>{const e=ne?.data||[],t=new Map;return e.forEach(e=>{t.has(e.id)||t.set(e.id,e)}),Array.from(t.values())},[ne?.data]),{data:se}=iO(Z,{filter:x?{show_id:x}:void 0,pagination:{page:1,pageSize:200}}),re=(se?.data||[]).filter(e=>e.status===XI.ON_SALE),{data:ie}=oO(Z,y),{data:oe}=AO(J,ie?.layout_id||null),{data:le}=uO(Z,y||"",{skip:0,limit:1e3}),ce=le?.data||[];p.useEffect(()=>{const e=setTimeout(()=>{A(_)},300);return()=>clearTimeout(e)},[_]),p.useEffect(()=>{const e=setTimeout(()=>{O(L)},300);return()=>clearTimeout(e)},[L]);const{data:de}=gI(ee,{filter:{search:P||void 0},pagination:{page:1,pageSize:50}}),ue=de?.data||[],{data:he}=DH(te,{filter:{search:I||void 0},pagination:{page:1,pageSize:50}}),me=he?.data||[],pe=p.useMemo(()=>{const e=new Map;return ce.forEach(t=>{t.seat_id&&e.set(t.seat_id,t)}),e},[ce]),fe=p.useMemo(()=>{const e=new Map;return ce.forEach(t=>{if(t.section_name&&t.row_name&&t.seat_number){const n=`${t.section_name}|${t.row_name}|${t.seat_number}`;e.set(n,t)}}),e},[ce]);p.useEffect(()=>{y&&(q([]),U(null))},[y]),p.useEffect(()=>{e?(r&&v(r),i&&b(i),o&&G(o)):(v(null),b(null),q([]),G(null),T(null),B("visualization"),U(null),g(null),m(!1),E(""),N(!1),F(""),D(!1))},[e,r,i,o]);const ge=p.useCallback((e,t)=>{if(!y)return;let n=t;if(!n&&e&&(n=pe.get(e),!n&&oe)){const t=oe.seats.find(t=>t.id===e);if(t&&t.section_name&&t.row&&t.seat_number){const e=`${t.section_name}|${t.row}|${t.seat_number}`;n=fe.get(e)}}if(!n)return;const a=V.findIndex(e=>e.eventSeatId===n.id);if(a>=0)q(e=>e.filter((e,t)=>t!==a));else{const e=n.status?.toUpperCase();if("AVAILABLE"===e){const e={eventSeatId:n.id,seatId:n.seat_id,sectionName:n.section_name,rowName:n.row_name,seatNumber:n.seat_number,ticketPrice:n.ticket_price,ticketNumber:n.ticket_number,status:n.status};q(t=>[...t,e])}}},[y,V,pe,fe,oe]),xe=p.useCallback((e,t)=>{},[]),ve=p.useCallback(e=>{y&&0!==e.length&&q(t=>{const n=e.map(e=>ce.find(t=>t.id===e)).filter(e=>{if(!e)return!1;const n=e.status?.toUpperCase();if("AVAILABLE"!==n)return!1;return!t.some(t=>t.eventSeatId===e.id)});if(0===n.length)return t;const a=n.map(e=>({eventSeatId:e.id,seatId:e.seat_id,sectionName:e.section_name,rowName:e.row_name,seatNumber:e.seat_number,ticketPrice:e.ticket_price,ticketNumber:e.ticket_number,status:e.status}));return[...t,...a]})},[y,ce]),ye=p.useMemo(()=>V.reduce((e,t)=>e+(t.ticketPrice||0),0),[V]),be=p.useMemo(()=>{const e=parseFloat(Q)||0;return e<=0?0:"percentage"===K?ye*e/100:Math.min(e,ye)},[ye,Q,K]),we=p.useMemo(()=>ye-be,[ye,be]),Se=p.useMemo(()=>.1*we,[we]),je=p.useMemo(()=>we+Se,[we,Se]),Ce=()=>{m(!1),g(null),t(!1)},ke={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e={event_id:f.eventId,customer_id:f.customerId||void 0,salesperson_id:f.salespersonId||void 0,items:f.tickets.map(e=>({event_seat_id:e.eventSeatId,section_name:e.sectionName,row_name:e.rowName,seat_number:e.seatNumber,unit_price:e.ticketPrice||0,total_price:e.ticketPrice||0,currency:"USD",ticket_number:e.ticketNumber,ticket_status:e.status})),discount_type:K,discount_value:parseFloat(Q)||0,tax_rate:.1,currency:"USD"};await n(e),g(null),m(!1),t(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},Ne={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:Ce,title:a,maxWidth:s,loading:d,showSubmitButton:!0,onSubmit:async()=>{if(!y||0===V.length)return;const e=re.find(e=>e.id===y);if(!e||e.status!==XI.ON_SALE)return void alert("The selected event is no longer available for booking. Please select a different event.");g({customerId:H||void 0,salespersonId:R||void 0,eventId:y,tickets:V}),m(!0)},onCancel:Ce,children:c.jsxs("div",{style:{height:"calc(100vh - 115px)"},className:sl("flex min-h-0",l.paddingForm),children:[c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 min-h-0",children:[c.jsxs("div",{className:"pr-1 border-b flex items-center gap-3 flex-shrink-0",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs(wE,{open:w,onOpenChange:S,children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",children:[c.jsx("span",{className:"truncate",children:x&&(ae.find(e=>e.id===x)?.name||ae.find(e=>e.id===x)?.code)||"Select a show"}),c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(jE,{className:"w-[400px] p-0",align:"start",children:c.jsxs(RN,{children:[c.jsx(MN,{placeholder:"Search shows...",className:"h-9"}),c.jsxs(DN,{children:[c.jsx(LN,{children:"No shows found."}),c.jsx(FN,{children:ae.map(e=>c.jsx(ON,{value:`${e.name||e.code} ${e.code||""}`,onSelect:()=>{v(e.id),b(null),S(!1)},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.name||e.code}),e.code&&e.name&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.code})]})},e.id))})]})]})})]})}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs(wE,{open:j,onOpenChange:C,children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",disabled:!x,children:[c.jsx("span",{className:"truncate",children:y?(()=>{const e=re.find(e=>e.id===y);return e?`${e.title} - ${new Date(e.start_dt).toLocaleDateString()}`:"Select an event"})():"Select an on-sale event"}),c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(jE,{className:"w-[400px] p-0",align:"start",children:c.jsxs(RN,{children:[c.jsx(MN,{placeholder:"Search on-sale events...",className:"h-9"}),c.jsxs(DN,{children:[c.jsx(LN,{children:"No on-sale events found."}),c.jsx(FN,{children:re.map(e=>c.jsx(ON,{value:`${e.title} ${new Date(e.start_dt).toLocaleDateString()}`,onSelect:()=>{b(e.id),C(!1)},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.title}),c.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.start_dt).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},e.id))})]})]})})]})}),c.jsx("div",{children:c.jsx(gy,{value:z,onValueChange:e=>B(e),children:c.jsxs(xy,{children:[c.jsxs(vy,{value:"visualization",className:"h-9 w-9 p-0",children:[c.jsx(Vf,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Layout"})]}),c.jsxs(vy,{value:"list",className:"h-9 w-9 p-0",children:[c.jsx(Gf,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"List"})]})]})})})]}),c.jsx("div",{className:"h-full",children:c.jsx(fP,{className:"h-full w-full",children:c.jsx(FH,{selectedEventId:y,seatViewMode:z,layoutWithSeats:oe,eventSeats:ce,seatStatusMap:pe,locationStatusMap:fe,onSeatClick:ge,selectedTickets:V,selectedSectionId:$,onSelectedSectionIdChange:U,onListSeatSelect:xe,onAddSeatsToBooking:ve})})})]}),c.jsx("div",{className:"w-96 sticky top-0 flex flex-col min-w-0 min-h-0 border rounded-xl bg-card flex-shrink-0 shadow-lg ml-6",children:c.jsx(fP,{className:"h-full w-full",children:c.jsx(LH,{customers:ue,selectedCustomerId:H,onSelectedCustomerIdChange:G,customerPopoverOpen:k,onCustomerPopoverOpenChange:N,customerSearchQuery:_,onCustomerSearchQueryChange:E,employees:me,selectedSalespersonId:R,onSelectedSalespersonIdChange:T,salespersonPopoverOpen:M,onSalespersonPopoverOpenChange:D,salespersonSearchQuery:L,onSalespersonSearchQueryChange:F,discountType:K,onDiscountTypeChange:W,discountValue:Q,onDiscountValueChange:Y,selectedTickets:V,onRemoveTicket:e=>{q(t=>t.filter(t=>t.eventSeatId!==e))},onClearAll:()=>q([]),subtotalAmount:ye,discountAmount:be,taxAmount:Se,totalAmount:je})})})]})}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||g(null)},title:"Confirm Booking Creation",description:f?c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:sl("mb-3",l.textSizeSmall),children:"Are you sure you want to create this booking?"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Event:"})," ",re.find(e=>e.id===f.eventId)?.title||"N/A"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Tickets:"})," ",f.tickets.length]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Total:"})," $",je.toFixed(2)]})]})]}):void 0,confirmAction:ke,cancelAction:Ne})]})}function OH(e){return{id:e.id,tenant_id:e.tenant_id,booking_number:e.booking_number,customer_id:e.customer_id,customer_name:e.customer_name,salesperson_id:e.salesperson_id,event_id:e.event_id,status:e.status,subtotal_amount:e.subtotal_amount,discount_amount:e.discount_amount,discount_type:e.discount_type,discount_value:e.discount_value,tax_amount:e.tax_amount,tax_rate:e.tax_rate,total_amount:e.total_amount,currency:e.currency,payment_status:e.payment_status,due_balance:e.due_balance,reserved_until:e.reserved_until?new Date(e.reserved_until):void 0,cancelled_at:e.cancelled_at?new Date(e.cancelled_at):void 0,cancellation_reason:e.cancellation_reason,items:e.items||[],created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0,version:e.version}}class zH{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}getEndpoint(){return this.endpoints?.bookings||ms.ENDPOINTS.SALES.BOOKINGS}async fetchBookings(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.status&&t.append("status",e.status);const n=this.getEndpoint().replace(/\/$/,""),a=t.toString()?`${n}?${t.toString()}`:n,s=await this.apiClient.get(a,{requiresAuth:!0}),r=s.skip||e?.skip||0,i=s.limit||e?.limit||50,o=s.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(s.items||[]).map(OH),pagination:l}}catch(t){throw t}}async searchBookings(e,t=100){try{const n=e.trim();if(!n)return[];const a=new URLSearchParams;a.append("search",n),a.append("limit",Math.min(t,200).toString());const s=`${this.getEndpoint().replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(s,{requiresAuth:!0})).items||[]).map(OH)}catch(n){throw n}}async fetchBookingById(e){try{const t=this.getEndpoint().replace(/\/$/,"");return OH(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createBooking(e){try{return OH(await this.apiClient.post(this.getEndpoint(),e,{requiresAuth:!0}))}catch(t){throw t}}async updateBooking(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return OH(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteBooking(e,t){try{const n=this.getEndpoint().replace(/\/$/,""),a=`${n}/${e}?${new URLSearchParams({cancellation_reason:t}).toString()}`;await this.apiClient.delete(a,{requiresAuth:!0})}catch(n){throw n}}}function BH(e,t){return Ya({queryKey:["bookings",t],queryFn:()=>t?e.fetchBookingById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function $H(e){const t=Va();return Xa({mutationFn:t=>e.createBooking(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["bookings"]}),n.event_id&&t.invalidateQueries({queryKey:["events",n.event_id,"seats"]})}})}const UH=p.createContext(null);function VH({children:e,config:t}){const n=p.useMemo(()=>new zH(t),[t.apiClient,t.endpoints?.bookings]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(UH.Provider,{value:a,children:e})}function qH(){const e=p.useContext(UH);if(!e)throw new Error("useBookingService must be used within BookingProvider");return e.service}function HH({onNavigateToBooking:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:a}){const s=qH(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(!1),[v,y]=p.useState(null),[b,w]=p.useState(null),S=p.useMemo(()=>new iq({apiClient:Fs,endpoints:{payments:"/api/v1/sales/payments"}}),[]),j=f.useRef(!1);f.useEffect(()=>{const e=j.current;n&&!e&&u(!0),j.current=!!n},[n]);const{data:C,isLoading:k,error:N}=function(e,t){const{filter:n,pagination:a}=t||{};return Ya({queryKey:["bookings",n?.search,a?.page,a?.pageSize],queryFn:()=>{const t=a?(a.page-1)*a.pageSize:0,s=a?.pageSize||50;return e.fetchBookings({skip:t,limit:s,search:n?.search})},staleTime:3e5})}(s,{filter:r,pagination:o}),_=$H(s),E=function(e){const t=Va();return Xa({mutationFn:({id:t,cancellationReason:n})=>e.deleteBooking(t,n),onSuccess:()=>{t.invalidateQueries({queryKey:["bookings"]}),t.invalidateQueries({queryKey:["events"]})}})}(s),P=oq(S),A=C?.data??[],R=C?.pagination,T=p.useCallback(()=>{t&&t(),u(!0)},[t]),M=p.useCallback(async(e,t)=>{try{await E.mutateAsync({id:e.id,cancellationReason:t}),Uk({title:"Success",description:"Booking cancelled successfully"})}catch(GQ){Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to cancel booking",variant:"destructive"})}},[E]),D=p.useCallback(e=>{!function(e){const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t}(e.status)?Uk({title:"Payment Not Allowed",description:`Payments can only be processed for bookings with status PENDING, CONFIRMED, or RESERVED. Current status: ${e.status.toUpperCase()}`,variant:"destructive"}):(y(e),m(!0))},[]),L=p.useCallback(e=>{w(e),x(!0)},[]),F=p.useCallback(async e=>{try{await P.mutateAsync(e),Uk({title:"Success",description:"Payment processed successfully"}),m(!1),y(null)}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to process payment",variant:"destructive"}),GQ}},[P]),I=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),O=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),z=p.useCallback(e=>{l({page:1,pageSize:e})},[]),B=p.useCallback(async e=>{try{await _.mutateAsync(e),Uk({title:"Success",description:"Booking created successfully"}),u(!1),a?.()}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create booking",variant:"destructive"}),GQ}},[_,a]),$=p.useCallback(t=>{e?.(t.id)},[e]),U=p.useMemo(()=>{if(R)return{page:o.page,pageSize:o.pageSize,total:R.total,totalPages:R.totalPages}},[o,R]);return c.jsxs(c.Fragment,{children:[c.jsx(YI,{bookings:A,loading:k,error:N,onBookingClick:$,onCancel:M,onPayment:D,onVoidPayment:L,onCreate:T,onSearch:I,pagination:U,onPageChange:O,onPageSizeChange:z}),c.jsx(IH,{open:d,onOpenChange:e=>{u(e),e||a?.()},onSubmit:B}),c.jsx(uq,{open:h&&!!v,onOpenChange:e=>{m(e),e||y(null)},onSubmit:F,booking:v,isLoading:P.isPending}),c.jsx(hq,{open:g&&!!b,onOpenChange:e=>{x(e),e||w(null)},booking:b})]})}function GH({open:e,onOpenChange:t,payment:n}){const a=p.useMemo(()=>new zH({apiClient:Fs,endpoints:{bookings:"/api/v1/sales/bookings"}}),[]),{data:s,isLoading:r}=BH(a,n?.booking_id??null);if(!n)return null;return c.jsx(ub,{open:e,onOpenChange:t,children:c.jsxs(pb,{className:"max-w-2xl",children:[c.jsxs(fb,{children:[c.jsx(xb,{children:"Payment Details"}),c.jsx(vb,{children:"View payment information and transaction details."})]}),c.jsx("div",{className:"py-4",children:c.jsxs(GD,{columns:2,children:[c.jsx(HD,{label:"Payment Code",value:n.payment_code||"N/A",valueClassName:"font-mono"}),c.jsx(HD,{label:"Amount",value:`${n.currency} ${n.amount.toFixed(2)}`,valueClassName:"font-semibold"}),c.jsx(HD,{label:"Status",value:c.jsx("span",{className:"capitalize",children:n.status.toLowerCase()})}),c.jsx(HD,{label:"Payment Method",value:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[n.payment_method]||n.payment_method}),c.jsx(HD,{label:"Booking",value:r?"Loading...":s?.booking_number||n.booking_id,valueClassName:"font-mono",span:"col-span-2"}),c.jsx(HD,{label:"Transaction Reference",value:n.transaction_reference,span:"col-span-2",valueClassName:"font-mono"}),c.jsx(HD,{label:"Notes",value:n.notes,span:"col-span-2"}),c.jsx(HD,{label:"Created At",value:qs(n.created_at)}),c.jsx(HD,{label:"Processed At",value:n.processed_at?qs(n.processed_at):"N/A"})]})}),c.jsx(gb,{children:c.jsx(bl,{onClick:()=>t(!1),children:"Close"})})]})})}function KH({className:e,payments:t=[],loading:n=!1,error:a=null,pagination:s,onPaymentClick:r,onSearch:i,onPageChange:o,onPageSizeChange:l}){const d=Us(),u=(e,t="USD")=>`${t} ${e.toFixed(2)}`,h=[LP({getDisplayName:e=>e.payment_code||e.id.slice(0,8).toUpperCase(),getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.payment_code||e.id),header:"Payment Code",showAvatar:!1,onClick:r,additionalOptions:{id:"id"}}),TP({accessorKey:"booking_id",header:"Booking",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",d.textSize),children:t?t.slice(0,8).toUpperCase():"-"})}}),TP({accessorKey:"amount",header:"Amount",cell:e=>{const t=e.row.original;return c.jsx("span",{className:sl("font-semibold",d.textSize),children:u(t.amount,t.currency)})}}),TP({accessorKey:"payment_method",header:"Method",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",d.textSize),children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[t]||t})}}),TP({accessorKey:"status",header:"Status",cell:e=>(e=>c.jsx("span",{className:sl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold",{completed:"bg-green-50 text-green-700 border-green-200",pending:"bg-yellow-50 text-yellow-700 border-yellow-200",processing:"bg-blue-50 text-blue-700 border-blue-200",failed:"bg-red-50 text-red-700 border-red-200",refunded:"bg-gray-50 text-gray-700 border-gray-200",cancelled:"bg-gray-50 text-gray-700 border-gray-200"}[e.toLowerCase()]||"bg-gray-50 text-gray-700 border-gray-200"),children:e.toUpperCase()}))(e.getValue())}),MP({accessorKey:"created_at",header:"Created At"})],m=t,p=s?{page:s.page,pageSize:s.pageSize,total:s.total,totalPages:s.totalPages}:void 0;return c.jsx("div",{className:sl("space-y-4",e),children:c.jsx(OP,{data:m,columns:h,loading:n,manualPagination:!1,serverPagination:p,onPageChange:o,onPageSizeChange:l,onSearch:i})})}function WH({}){const[e,t]=p.useState({page:1,pageSize:50}),[n,a]=p.useState(null),[s,r]=p.useState(!1),i=p.useMemo(()=>new iq({apiClient:Fs,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:o=[],isLoading:l,error:d}=Ya({queryKey:["payments","all"],queryFn:async()=>i.getAllPayments(),staleTime:3e5}),u=p.useCallback(e=>{},[]),h=p.useCallback(e=>{t(t=>({...t,page:e}))},[]),m=p.useCallback(e=>{t({page:1,pageSize:e})},[]),f=p.useCallback(e=>{a(e),r(!0)},[]),g=p.useMemo(()=>{const t=o.length;return{...e,total:t,totalPages:Math.ceil(t/e.pageSize)}},[e,o.length]);return c.jsxs(c.Fragment,{children:[c.jsx(KH,{payments:o,loading:l,error:d,onPaymentClick:f,onSearch:u,pagination:g,onPageChange:h,onPageSizeChange:m}),c.jsx(GH,{open:s,onOpenChange:r,payment:n})]})}function QH({open:e,onOpenChange:t,show:n,onEventClick:a,onBookNow:s,showShowNameInTitle:r=!1}){const i=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`};return c.jsx(CE,{open:e,onOpenChange:t,children:c.jsx(EE,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0",children:n&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx(PE,{children:c.jsx(RE,{className:"text-xl",children:n.name})})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:c.jsx($P,{items:n.events.map(e=>({...e,name:e.title})),searchable:!1,viewMode:"list",showViewToggle:!1,gridCols:{default:1},emptyMessage:"No events available for this show.",renderItem:e=>{const t=(e=>{switch(e.toLowerCase()){case"on_sale":return"default";case"published":return"secondary";case"sold_out":default:return"outline";case"cancelled":return"destructive"}})(e.status),o=(e=>{const t=new Date(e);return{month:t.toLocaleDateString("en-US",{month:"short"}),day:t.getDate(),fullDate:t}})(e.start_dt),l=(e=>{const t=new Date(e);return{dayOfWeek:t.toLocaleDateString("en-US",{weekday:"short"}),time:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}})(e.start_dt);return c.jsx("div",{className:"group rounded-lg border bg-card transition-all hover:shadow-md hover:border-primary/20 cursor-pointer overflow-hidden mb-3",onClick:()=>a(e),children:c.jsxs("div",{className:"flex gap-3 p-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsxs("div",{className:"flex flex-col items-center justify-center w-16 h-16 rounded bg-muted/50 border border-border/50",children:[c.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase leading-tight tracking-wide",children:o.month}),c.jsx("span",{className:"text-xl font-bold text-foreground leading-none mt-0.5",children:o.day})]})}),c.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1.5",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx("h4",{className:"text-sm font-semibold text-foreground line-clamp-2 leading-snug flex-1",children:r&&n?`${n.name} - ${e.title}`:e.title}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx(NC,{variant:t,className:"text-xs",children:(d=e.status,d.charAt(0).toUpperCase()+d.slice(1).replace(/_/g," "))})})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-muted-foreground flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(hf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"font-medium text-foreground",children:l.dayOfWeek}),c.jsx("span",{children:l.time})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Jf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:e.venue?.name||"Venue TBD"})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsx("span",{children:i(e.duration_minutes)})})]}),c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:e.status===XI.ON_SALE&&c.jsxs(bl,{size:"sm",className:"h-7 px-2",onClick:t=>{t.stopPropagation(),s(e)},children:[c.jsx(nx,{className:"h-3.5 w-3.5 mr-1.5"}),"Book Now"]})})]})]})]})},e.id);var d}})})]})})})}function YH({isLoading:e,shows:t,hasActiveFilters:n,onClearFilters:a,onShowClick:s}){const r=Us(),i=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return e?c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(e=>c.jsxs(Sl,{className:"animate-pulse",children:[c.jsx("div",{className:"h-48 bg-muted rounded-t-lg"}),c.jsx(jl,{children:c.jsx("div",{className:"h-6 bg-muted rounded w-3/4"})})]},e))}):0===t.length?c.jsx(Sl,{children:c.jsx(Nl,{className:"pt-6",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Hp,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:sl("font-semibold mb-2",r.textSizeCardTitle),children:"No shows found"}),c.jsx("p",{className:sl("text-muted-foreground",r.textSizeCardDescription),children:n?"Try adjusting your filters to see more shows.":"No shows with upcoming events available at the moment."}),n&&c.jsx(bl,{variant:"outline",onClick:a,className:"mt-4",children:"Clear Filters"})]})})}):c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(e=>{const t=e.events.length>0;return c.jsxs(Sl,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s(e),children:[e.bannerImage?.file_url?c.jsx("div",{className:"relative h-48 w-full overflow-hidden bg-muted",children:c.jsx("img",{src:e.bannerImage.file_url,alt:e.bannerImage.name||e.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})}):c.jsx("div",{className:"relative h-48 w-full overflow-hidden bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center",children:c.jsx(Hp,{className:"h-16 w-16 text-muted-foreground/30"})}),c.jsx(jl,{children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(Cl,{className:sl("mb-2",r.textSizeCardTitle),children:e.name}),e.code&&c.jsxs("p",{className:sl("text-muted-foreground",r.textSizeCardDescription),children:["Code: ",e.code]}),e.started_date&&e.ended_date&&c.jsxs("p",{className:sl("text-muted-foreground mt-1",r.textSizeCardDescription),children:[i(new Date(e.started_date))," -"," ",i(new Date(e.ended_date))]})]}),t&&c.jsxs(bl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),s(e)},className:"ml-4",children:[c.jsx(Xp,{className:"h-4 w-4 mr-2"}),"View Events (",e.events.length,")"]})]})}),!t&&c.jsx(Nl,{children:c.jsx("p",{className:sl("text-muted-foreground",r.textSizeCardDescription),children:"No events available for this show."})})]},e.id)})})}function XH({search:e,onSearchChange:t,statusFilter:n,onStatusFilterChange:a,dateFilter:s,onDateFilterChange:r,showPastEvents:i,onShowPastEventsChange:o,onClearFilters:l,pastEventsLabel:d="Include past events",pastEventsClearLabel:u="Clear past events filter"}){const h=e||"all"!==n||s.startDate||s.endDate||i,m=["all"!==n,s.startDate,s.endDate,i].filter(Boolean).length,p=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Ig,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),c.jsx(_l,{placeholder:"Search shows or events...",value:e,onChange:e=>t(e.target.value),className:"pl-10 h-8"})]}),c.jsx(jP,{badgeCount:m,label:"Filters",align:"end",popoverContentClassName:"w-80 p-5",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Status"}),c.jsxs(bx,{value:n,onValueChange:e=>a(e),children:[c.jsx(Sx,{className:"w-full",children:c.jsx(wx,{placeholder:"Status"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"all",children:"All Status"}),c.jsx(Nx,{value:XI.ON_SALE,children:"On Sale"}),c.jsx(Nx,{value:XI.PUBLISHED,children:"Published"}),c.jsx(Nx,{value:XI.SOLD_OUT,children:"Sold Out"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Date Range"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"From"}),c.jsx(_l,{type:"date",value:s.startDate||"",onChange:e=>r({...s,startDate:e.target.value||null}),className:"w-full"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"To"}),c.jsx(_l,{type:"date",value:s.endDate||"",onChange:e=>r({...s,endDate:e.target.value||null}),min:s.startDate||void 0,className:"w-full"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx("input",{type:"checkbox",id:"showPastEvents",checked:i,onChange:e=>o(e.target.checked),className:"h-4 w-4 rounded border-gray-300 accent-primary"}),c.jsx("label",{htmlFor:"showPastEvents",className:"text-sm font-medium cursor-pointer flex-1",children:d})]}),h&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>{l()},className:"w-full h-8 mt-2",children:"Reset all filters"})]})})]}),h&&c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Search: ",c.jsx("span",{className:"font-medium",children:e}),c.jsx("button",{type:"button",onClick:()=>t(""),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear search filter",title:"Clear search filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),"all"!==n&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:[(f=n,f.charAt(0).toUpperCase()+f.slice(1).replace(/_/g," ")),c.jsx("button",{type:"button",onClick:()=>a("all"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear status filter",title:"Clear status filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),s.startDate&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["From: ",p(s.startDate),c.jsx("button",{type:"button",onClick:()=>r({...s,startDate:null}),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear start date filter",title:"Clear start date filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),s.endDate&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["To: ",p(s.endDate),c.jsx("button",{type:"button",onClick:()=>r({...s,endDate:null}),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear end date filter",title:"Clear end date filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),i&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Past events",c.jsx("button",{type:"button",onClick:()=>o(!1),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":u,title:u,children:c.jsx(xx,{className:"h-3 w-3"})})]}),c.jsx(bl,{variant:"ghost",size:"sm",onClick:l,className:"h-6 px-2 text-xs",children:"Clear all"})]})]});var f}function ZH({search:e,onSearchChange:t,statusFilter:n,onStatusFilterChange:a,dateFilter:s,onDateFilterChange:r,showPastEvents:i,onShowPastEventsChange:o,onClearFilters:l,events:d=[],onTimelineSourceChange:u,pastEventsLabel:h="Include past events",pastEventsClearLabel:m="Clear past events filter"}){const f=e||"all"!==n||s.startDate||s.endDate||i,g=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),x=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,v=(()=>{const e=d.filter(e=>e.status===XI.ON_SALE);if(!e.length)return[];const t=new Date;t.setHours(0,0,0,0);const n=new Date(t);n.setDate(n.getDate()+21);const a=new Set;for(const s of e){const e=new Date(s.start_dt);e.setHours(0,0,0,0),e>=t&&e<=n&&a.add(x(e))}return Array.from(a).sort()})(),y=(()=>{const e=d.filter(e=>e.status===XI.PUBLISHED);if(!e.length)return[];const t=new Date,n=t.getFullYear(),a=t.getMonth(),s=new Set;for(const r of e){const e=new Date(r.start_dt),t=e.getFullYear(),i=e.getMonth();(t>n||t===n&&i>=a)&&s.add(`${t}-${i}`)}return Array.from(s).sort()})(),b=e=>e===x(new Date),w=e=>!!s.startDate&&s.startDate===e&&s.endDate===e,S=e=>{const[t,n]=e.split("-").map(Number),a=`${t}-${String(n+1).padStart(2,"0")}-01`,r=new Date(t,n+1,0).getDate(),i=`${t}-${String(n+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`;return s.startDate===a&&s.endDate===i},j=e=>{r({startDate:e,endDate:e}),u?.("now-showing")},C=e=>{const[t,n]=e.split("-").map(Number),a=`${t}-${String(n+1).padStart(2,"0")}-01`,s=new Date(t,n+1,0).getDate(),i=`${t}-${String(n+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`;r({startDate:a,endDate:i}),u?.("coming-soon")},k=e=>{r({...s,startDate:null,endDate:null}),u?.(e)},N=null!=s.startDate&&null!=s.endDate,[_,E]=p.useState("now-showing"),P=v.length>0&&y.length>0;return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Ig,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),c.jsx(_l,{placeholder:"Search events...",value:e,onChange:e=>t(e.target.value),className:"pl-10 h-8"})]}),c.jsxs(wE,{children:[c.jsx(SE,{asChild:!0,children:c.jsxs(bl,{variant:"outline",className:"h-8 gap-2 px-4 shadow-sm border-dashed",children:[c.jsx(Hf,{className:"h-4 w-4"}),"Filters",f&&c.jsx("div",{className:"bg-primary text-primary-foreground text-[10px] rounded-full h-4 w-4 grid place-items-center ml-1 font-bold",children:["all"!==n,s.startDate,s.endDate,i].filter(Boolean).length})]})}),c.jsx(jE,{className:"w-80 p-5",align:"end",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Status"}),c.jsxs(bx,{value:n,onValueChange:e=>a(e),children:[c.jsx(Sx,{className:"w-full",children:c.jsx(wx,{placeholder:"Status"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"all",children:"All Status"}),c.jsx(Nx,{value:XI.ON_SALE,children:"On Sale"}),c.jsx(Nx,{value:XI.PUBLISHED,children:"Published"}),c.jsx(Nx,{value:XI.SOLD_OUT,children:"Sold Out"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Date Range"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"From"}),c.jsx(_l,{type:"date",value:s.startDate||"",onChange:e=>{r({...s,startDate:e.target.value||null}),u?.(null)},className:"w-full"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"To"}),c.jsx(_l,{type:"date",value:s.endDate||"",onChange:e=>{r({...s,endDate:e.target.value||null}),u?.(null)},min:s.startDate||void 0,className:"w-full"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx("input",{type:"checkbox",id:"eventShowPastEvents",checked:i,onChange:e=>o(e.target.checked),className:"h-4 w-4 rounded border-gray-300 accent-primary"}),c.jsx("label",{htmlFor:"eventShowPastEvents",className:"text-sm font-medium cursor-pointer flex-1",children:h})]}),f&&c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>{l()},className:"w-full h-8 mt-2",children:"Reset all filters"})]})})]})]}),d.length>0&&(v.length>0||y.length>0)&&c.jsx("div",{className:"rounded-lg border border-l-[3px] border-l-primary/40 bg-muted/30 px-4 py-3","aria-label":"Timeline filters",children:P?c.jsxs(gy,{value:_,onValueChange:e=>{const t=e;E(t),u?.(t),r({...s,startDate:null,endDate:null})},children:[c.jsxs(xy,{className:"h-9 w-auto inline-flex mb-2",children:[c.jsxs(vy,{value:"now-showing",className:"gap-1.5 text-xs px-3",children:[c.jsx(Sg,{className:"h-3.5 w-3.5"}),"Now Showing"]}),c.jsxs(vy,{value:"coming-soon",className:"gap-1.5 text-xs px-3",children:[c.jsx(qp,{className:"h-3.5 w-3.5"}),"Coming Soon"]})]}),c.jsx(yy,{value:"now-showing",className:"mt-0",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("now-showing"),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),v.map(e=>{const t=new Date(e+"T12:00:00"),n=b(e)?"Today":t.toLocaleDateString(void 0,{weekday:"short",day:"numeric"}),a=w(e);return c.jsx("button",{type:"button",onClick:()=>j(e),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",a?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:n},e)})]})}),c.jsx(yy,{value:"coming-soon",className:"mt-0",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("coming-soon"),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),y.map(e=>{const[t,n]=e.split("-").map(Number),a=new Date(t,n,1).toLocaleDateString(void 0,{month:"short",year:"numeric"}),s=S(e);return c.jsx("button",{type:"button",onClick:()=>C(e),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",s?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:a},e)})]})})]}):v.length>0?c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-foreground mb-2",children:[c.jsx(Sg,{className:"h-3.5 w-3.5 text-primary"}),c.jsx("span",{children:"Now Showing"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("now-showing"),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),v.map(e=>{const t=new Date(e+"T12:00:00"),n=b(e)?"Today":t.toLocaleDateString(void 0,{weekday:"short",day:"numeric"}),a=w(e);return c.jsx("button",{type:"button",onClick:()=>j(e),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",a?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:n},e)})]})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-foreground mb-2",children:[c.jsx(qp,{className:"h-3.5 w-3.5 text-primary"}),c.jsx("span",{children:"Coming Soon"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("coming-soon"),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),y.map(e=>{const[t,n]=e.split("-").map(Number),a=new Date(t,n,1).toLocaleDateString(void 0,{month:"short",year:"numeric"}),s=S(e);return c.jsx("button",{type:"button",onClick:()=>C(e),className:sl("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",s?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:a},e)})]})]})}),f&&c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Search: ",c.jsx("span",{className:"font-medium",children:e}),c.jsx("button",{type:"button",onClick:()=>t(""),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear search filter",title:"Clear search filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),"all"!==n&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:[(A=n,A.charAt(0).toUpperCase()+A.slice(1).replace(/_/g," ")),c.jsx("button",{type:"button",onClick:()=>a("all"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear status filter",title:"Clear status filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),s.startDate&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["From: ",g(s.startDate),c.jsx("button",{type:"button",onClick:()=>{r({...s,startDate:null}),u?.(null)},className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear start date filter",title:"Clear start date filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),s.endDate&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["To: ",g(s.endDate),c.jsx("button",{type:"button",onClick:()=>{r({...s,endDate:null}),u?.(null)},className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear end date filter",title:"Clear end date filter",children:c.jsx(xx,{className:"h-3 w-3"})})]}),i&&c.jsxs(NC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Past events",c.jsx("button",{type:"button",onClick:()=>o(!1),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":m,title:m,children:c.jsx(xx,{className:"h-3 w-3"})})]}),c.jsx(bl,{variant:"ghost",size:"sm",onClick:l,className:"h-6 px-2 text-xs",children:"Clear all"})]})]});var A}const JH=e=>{switch(e){case XI.PUBLISHED:return"border-l-blue-500 bg-blue-50/50 hover:bg-blue-50";case XI.ON_SALE:return"border-l-green-500 bg-green-50/50 hover:bg-green-50";case XI.SOLD_OUT:return"border-l-red-500 bg-red-50/50 hover:bg-red-50";case XI.CANCELLED:return"border-l-gray-500 bg-gray-50/50 hover:bg-gray-50";case XI.COMPLETED:return"border-l-purple-500 bg-purple-50/50 hover:bg-purple-50";case XI.DRAFT:return"border-l-yellow-500 bg-yellow-50/50 hover:bg-yellow-50";default:return"border-l-gray-400 bg-gray-50/50 hover:bg-gray-50"}},eG=e=>{switch(e){case XI.PUBLISHED:return"bg-blue-500";case XI.ON_SALE:return"bg-green-500";case XI.SOLD_OUT:return"bg-red-500";case XI.CANCELLED:return"bg-gray-500";case XI.COMPLETED:return"bg-purple-500";case XI.DRAFT:return"bg-yellow-500";default:return"bg-gray-400"}};function tG({events:e,onEventClick:t,onDateClick:n,className:a}){const[s,r]=p.useState(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}),[i,o]=p.useState("all"),[l,d]=p.useState(new Set),u=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{e.venue?.city&&t.add(e.venue.city)}),Array.from(t).sort()},[e]),h=p.useMemo(()=>"all"===i?e:e.filter(e=>e.venue?.city===i),[e,i]),m=p.useMemo(()=>{const e={};return h.forEach(t=>{const n=new Date(t.start_dt),a=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`;e[a]||(e[a]=[]),e[a].push(t)}),e},[h]),f=e=>{const t=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`;return m[t]||[]},g=(e,t)=>h.filter(n=>{const a=new Date(n.start_dt);return a.getFullYear()===e&&a.getMonth()===t}).length,x=p.useMemo(()=>{const e=[],t=s.getFullYear(),n=s.getMonth();for(let a=-2;a<=2;a++){const s=new Date(t,n+a,1),r=s.getFullYear(),i=s.getMonth(),o=g(r,i);e.push({date:s,shortName:s.toLocaleString("default",{month:"short"}),fullName:s.toLocaleString("default",{month:"long"}),year:r,eventCount:o,isDisabled:0===o})}return e},[s,h]),v=p.useMemo(()=>{const e=s.getFullYear(),t=s.getMonth(),n=new Date;n.setHours(0,0,0,0);const a=new Date(e,t,1),r=new Date(e,t+1,0),i=a.getDay(),o=new Date(e,t,0).getDate(),l=[];for(let s=i-1;s>=0;s--){const a=new Date(e,t-1,o-s);a.setHours(0,0,0,0),l.push({date:a,dayNumber:a.getDate(),isCurrentMonth:!1,isPast:a<n,events:f(a)})}for(let s=1;s<=r.getDate();s++){const a=new Date(e,t,s);a.setHours(0,0,0,0),l.push({date:a,dayNumber:s,isCurrentMonth:!0,isPast:a<n,events:f(a)})}const c=7-l.length%7;if(c<7)for(let s=1;s<=c;s++){const a=new Date(e,t+1,s);a.setHours(0,0,0,0),l.push({date:a,dayNumber:s,isCurrentMonth:!1,isPast:a<n,events:f(a)})}return l},[s,m]),y=p.useMemo(()=>{const e=[];for(let t=0;t<v.length;t+=7)e.push(v.slice(t,t+7));return e},[v]),b=e=>{const t=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`;d(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})},w=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),S=e=>e.venue?.city&&e.venue?.state?`${e.venue.city}, ${e.venue.state}`:e.venue?.city?e.venue.city:"Location TBA";return c.jsxs("div",{className:sl("space-y-6",a),"data-testid":"calendar",children:[c.jsxs("div",{className:"space-y-4",children:[u.length>0&&c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{className:"w-full max-w-sm",children:[c.jsx("label",{htmlFor:"location-filter",className:"block text-sm font-medium mb-2",children:"Location"}),c.jsxs("div",{className:"relative",children:[c.jsx(Jf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cyan-500 h-4 w-4 z-10"}),c.jsxs("select",{id:"location-filter",value:i,onChange:e=>o(e.target.value),"aria-label":"Location suggestions","aria-autocomplete":"both",className:sl("w-full h-11 pl-10 pr-4 py-2","border border-input rounded-md","bg-background text-sm","focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent","transition-colors cursor-pointer","appearance-none"),children:[c.jsx("option",{value:"all",children:"City or Zip Code"}),u.map(e=>c.jsx("option",{value:e,children:e},e))]}),c.jsx(Xp,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4 pointer-events-none"})]})]})}),c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsx("span",{className:"sr-only",children:c.jsxs("div",{"aria-live":"polite",children:[c.jsx("span",{children:c.jsxs("span",{children:[s.toLocaleString("default",{month:"long",year:"numeric"})," selected"]})}),c.jsxs("span",{children:[g(s.getFullYear(),s.getMonth())," Events"]})]})}),c.jsx(bl,{variant:"outline",size:"icon",onClick:()=>{r(new Date(s.getFullYear()-1,s.getMonth(),1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Previous Year",children:c.jsx(Xp,{className:"h-5 w-5 rotate-90"})}),c.jsx(bl,{variant:"ghost",size:"icon",onClick:()=>{r(new Date(s.getFullYear(),s.getMonth()-1,1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Previous Month",children:c.jsx(Xp,{className:"h-5 w-5 rotate-90"})}),c.jsx("div",{role:"tablist",className:"flex items-center justify-center gap-2 flex-1 overflow-x-auto scrollbar-hide",children:x.map((e,t)=>{const n=e.date.getFullYear()===s.getFullYear()&&e.date.getMonth()===s.getMonth(),a=e.date.getFullYear()===s.getFullYear()&&e.date.getMonth()===s.getMonth();return c.jsx("button",{role:"tab",...n?{"aria-selected":"true"}:{"aria-selected":"false"},onClick:()=>{return!e.isDisabled&&(t=e.date,void r(t));var t},disabled:e.isDisabled,className:sl("shrink-0","px-4 py-2.5 min-w-[100px]","text-sm font-medium transition-all duration-200","whitespace-nowrap rounded-lg","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",n&&"bg-primary text-primary-foreground shadow-md scale-105",!n&&!e.isDisabled&&"hover:bg-accent hover:scale-102",e.isDisabled&&"opacity-40 cursor-not-allowed"),children:c.jsxs("span",{className:"flex flex-col items-center gap-1",children:[c.jsx("span",{className:sl(n&&"font-bold"),children:a?c.jsxs(c.Fragment,{children:[c.jsx("span",{"aria-hidden":"true",children:c.jsxs("span",{children:[e.shortName," ",e.year]})}),c.jsxs("span",{className:"sr-only",children:[c.jsxs("span",{children:[e.fullName," ",e.year]})," selected"]})]}):c.jsx("span",{children:e.shortName})}),c.jsx("span",{className:"sr-only",children:", "}),c.jsx("span",{className:sl("text-xs font-normal",n?"text-primary-foreground/80":"text-muted-foreground"),children:e.eventCount>0?`${e.eventCount} Event${1!==e.eventCount?"s":""}`:"No Events"})]})},`${e.date.getTime()}-${t}`)})}),c.jsx(bl,{variant:"ghost",size:"icon",onClick:()=>{r(new Date(s.getFullYear(),s.getMonth()+1,1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Next Month",children:c.jsx(Xp,{className:"h-5 w-5 -rotate-90"})}),c.jsx(bl,{variant:"outline",size:"icon",onClick:()=>{r(new Date(s.getFullYear()+1,s.getMonth(),1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Next Year",children:c.jsx(Xp,{className:"h-5 w-5 -rotate-90"})})]})]}),c.jsxs("div",{className:"border rounded-lg overflow-hidden bg-border shadow-sm","data-testid":"calendarGrid",children:[c.jsx("ul",{"aria-hidden":"true",className:"grid grid-cols-7 gap-px bg-border border-b",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>c.jsx("li",{className:"py-3 px-2 text-center text-xs font-bold text-muted-foreground uppercase tracking-wider bg-muted/50",children:c.jsx("span",{children:e})},e))}),c.jsx("div",{"aria-hidden":"false",className:"flex flex-col gap-px bg-border",children:y.map((e,a)=>c.jsxs("section",{children:[c.jsxs("h3",{className:"sr-only",children:["Week ",a+1]}),c.jsx("ul",{className:"grid grid-cols-7 gap-px bg-border",children:e.map((e,a)=>{const s=e.events.length>0,r=!s,i=(e=>{const t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()})(e.date),o=(e=>{const t=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`;return l.has(t)})(e.date),d=`${e.date.getFullYear()}-${e.date.getMonth()}-${e.date.getDate()}`,u=0===(h=e.events).length?"":1===h.length||1===new Set(h.map(e=>e.venue?.city).filter(Boolean)).size?S(h[0]):"Multiple Locations";var h;return c.jsx("li",{className:sl("relative min-h-[140px] group","transition-all duration-200 ease-in-out",!e.isCurrentMonth&&"bg-muted/20",e.isCurrentMonth&&"bg-card",s&&e.isCurrentMonth&&"bg-accent/5",s&&!e.isCurrentMonth&&"bg-accent/10",i&&"bg-primary/5 ring-1 ring-primary/20 ring-inset",i&&s&&"bg-primary/10 ring-1 ring-primary/30",s&&!o&&"hover:bg-accent/20 hover:shadow-sm cursor-pointer"),onClick:()=>{s&&!o&&e.events.length>1&&b(e.date)},children:c.jsxs("div",{className:"h-full flex flex-col p-3",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("button",{disabled:r,...o?{"aria-expanded":"true"}:{"aria-expanded":"false"},onClick:t=>{t.stopPropagation(),s&&b(e.date)},className:sl("text-sm font-semibold leading-none","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded","transition-colors",i&&"text-primary font-bold",!i&&e.isCurrentMonth&&"text-foreground",!e.isCurrentMonth&&"text-muted-foreground/50",!r&&"hover:text-primary"),children:[c.jsxs("span",{className:"sr-only",children:[s&&c.jsxs(c.Fragment,{children:[e.events.length," Event",1!==e.events.length?"s":"",", "]}),!s&&c.jsx(c.Fragment,{children:"0 Events, "}),c.jsx("span",{children:e.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),c.jsx("span",{"aria-hidden":"true",children:String(e.dayNumber).padStart(2,"0")})]}),s&&c.jsx("span",{className:"flex items-center gap-1 shrink-0 ml-2",children:1===e.events.length?c.jsxs("span",{"data-testid":"availability-pill",children:[c.jsx("div",{className:sl("h-2.5 w-2.5 rounded-full shadow-sm",eG(e.events[0].status))}),c.jsx("span",{className:"sr-only",children:e.events[0].status})]}):(()=>{const t=Array.from(new Set(e.events.map(e=>e.status))).slice(0,3);return t.length<=3?c.jsx("span",{className:"flex gap-0.5",children:t.map((e,t)=>c.jsx("div",{className:sl("h-2 w-2 rounded-full shadow-sm",eG(e)),title:e},t))}):c.jsxs("span",{"aria-hidden":"true",className:"text-xs font-bold text-primary px-1.5 py-0.5 bg-primary/10 rounded",children:["+",e.events.length]})})()})]}),s&&!o&&c.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground truncate",children:u}),c.jsx("div",{className:"mt-auto",children:c.jsxs("button",{onClick:a=>{a.stopPropagation(),n?n(e.date,e.events):1===e.events.length?t(e.events[0]):b(e.date)},className:sl("w-full text-left px-2 py-1.5 rounded-md","transition-all duration-150","group flex items-center justify-between","hover:bg-accent/80 focus:outline-none focus:ring-2 focus:ring-ring"),children:[1===e.events.length?c.jsx("span",{className:"text-xs font-semibold text-foreground",children:w(e.events[0].start_dt)}):c.jsxs("span",{className:"text-xs font-semibold text-primary",children:[e.events.length," Events"]}),c.jsx(Xp,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-foreground transition-all -rotate-90"}),c.jsxs("span",{className:"sr-only",children:[", ",c.jsx("span",{children:e.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),1===e.events.length&&c.jsxs("span",{children:[", ",S(e.events[0])]}),e.events.length>1&&c.jsxs("span",{children:[", ",u]})]})]})})]}),s&&o&&c.jsxs("div",{className:"flex-1 flex flex-col gap-2 -mx-1",children:[c.jsx("div",{className:"text-xs font-bold text-foreground px-1 pb-1 border-b",children:e.date.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),c.jsx("div",{className:"flex-1 space-y-1.5 overflow-y-auto max-h-[180px] pr-1 custom-scrollbar",children:e.events.map(e=>c.jsxs("button",{onClick:n=>{n.stopPropagation(),t(e)},className:sl("w-full text-left p-2 rounded-md border-l-4","transition-all duration-150 group","focus:outline-none focus:ring-2 focus:ring-ring",JH(e.status)),children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsx("span",{className:"text-xs font-semibold text-foreground",children:w(e.start_dt)}),c.jsx(Xp,{className:"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors shrink-0 -rotate-90"})]}),c.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S(e)}),e.show&&c.jsx("div",{className:"text-xs text-muted-foreground/80 truncate mt-0.5",children:e.show.name})]},e.id))})]})]})},`${d}-${a}`)})})]},a))})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx(Hp,{className:"h-4 w-4"}),c.jsxs("span",{children:["Showing ",h.length," event",1!==h.length?"s":""," in"," ",s.toLocaleString("default",{month:"long",year:"numeric"})]})]})]})}function nG({open:e,onOpenChange:t,date:n,events:a,onEventClick:s,onBookNow:r}){const i=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`};return c.jsx(CE,{open:e,onOpenChange:t,children:c.jsx(EE,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0",children:n&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx(PE,{children:c.jsxs(RE,{className:"text-xl flex items-center gap-2",children:[c.jsx(Hp,{className:"h-5 w-5 text-muted-foreground"}),(o=n,o.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}))]})})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:c.jsx($P,{items:a.map(e=>({...e,name:e.title})),searchable:!1,viewMode:"list",showViewToggle:!1,gridCols:{default:1},emptyMessage:`No events scheduled for ${n.toLocaleDateString()}.`,renderItem:e=>{const t=(e=>{switch(e.toLowerCase()){case"on_sale":return"default";case"published":return"secondary";case"sold_out":default:return"outline";case"cancelled":return"destructive"}})(e.status),n=(a=e.start_dt,new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}));var a,o;return c.jsx("div",{className:"group rounded-lg border bg-card transition-all hover:shadow-md hover:border-primary/20 cursor-pointer overflow-hidden mb-3",onClick:()=>s(e),children:c.jsxs("div",{className:"flex gap-3 p-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"flex flex-col items-center justify-center w-20 h-16 rounded bg-muted/50 border border-border/50 px-1",children:c.jsx("span",{className:"text-sm font-bold text-foreground leading-none",children:n})})}),c.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1.5",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex flex-col min-w-0",children:[e.show&&c.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide truncate",children:e.show.name}),c.jsx("h4",{className:"text-sm font-semibold text-foreground line-clamp-1 leading-snug",children:e.title})]}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx(NC,{variant:t,className:"text-xs",children:(o=e.status,o.charAt(0).toUpperCase()+o.slice(1).replace(/_/g," "))})})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-muted-foreground flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Jf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:e.venue?.name||"Venue TBD"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(hf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{children:i(e.duration_minutes)})]})]}),c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:e.status===XI.ON_SALE&&c.jsxs(bl,{size:"sm",className:"h-7 px-2",onClick:t=>{t.stopPropagation(),r(e)},children:[c.jsx(nx,{className:"h-3.5 w-3.5 mr-1.5"}),"Book Now"]})})]})]})]})},e.id)}})})]})})});var o}const aG="Include past events (90 days back)",sG="Clear past events filter (90 days back)";function rG(){const e=Yt(),[t,n]=p.useState("show"),[a,s]=p.useState(""),[r,i]=p.useState("all"),[o,l]=p.useState({startDate:null,endDate:null}),[d,u]=p.useState(!1),[h,m]=p.useState(""),[f,g]=p.useState("all"),[x,v]=p.useState({startDate:null,endDate:null}),[y,b]=p.useState(!1),[w,S]=p.useState("now-showing"),[j,C]=p.useState({}),[k,N]=p.useState(null),[_,E]=p.useState(!1),[P,A]=p.useState([]),[R,T]=p.useState(null),[M,D]=p.useState(!1),[L,F]=p.useState(!1),[I,O]=p.useState(null),[z,B]=p.useState(null),$=$H(p.useMemo(()=>new zH({apiClient:Fs,endpoints:{bookings:"/api/v1/sales/bookings"}}),[])),U=rO(),V=zO(),q=p.useMemo(()=>({page:1,pageSize:100,total:0,totalPages:0}),[]),H=p.useMemo(()=>({page:1,pageSize:200,total:0,totalPages:0}),[]),G=p.useMemo(()=>{const e=new Date;return e.setHours(0,0,0,0),e},[]),K=p.useMemo(()=>{const e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()-90),e},[]),[W,Q]=p.useState(""),[Y,X]=p.useState("");p.useEffect(()=>{const e=setTimeout(()=>{Q(a)},300);return()=>clearTimeout(e)},[a]),p.useEffect(()=>{const e=setTimeout(()=>{X(h)},300);return()=>clearTimeout(e)},[h]);const{data:Z,isLoading:J}=YO(V,{filter:{search:W||void 0},pagination:q,enabled:"show"===t||"event"===t}),{data:ee,isLoading:te}=iO(U,{filter:{status:[XI.PUBLISHED,XI.ON_SALE,XI.SOLD_OUT]},pagination:H,enabled:"show"===t}),ne=p.useMemo(()=>"now-showing"===w?[XI.ON_SALE,XI.SOLD_OUT]:"coming-soon"===w?[XI.PUBLISHED]:[XI.PUBLISHED,XI.ON_SALE,XI.SOLD_OUT],[w]),{data:ae,isLoading:se}=iO(U,{filter:{search:Y||void 0,status:ne},pagination:H,enabled:"event"===t}),{data:re,isLoading:ie}=iO(U,{filter:{status:[XI.PUBLISHED,XI.ON_SALE,XI.SOLD_OUT]},pagination:H,enabled:"calendar"===t}),{data:oe}=iO(U,{filter:{status:[XI.PUBLISHED,XI.ON_SALE,XI.SOLD_OUT]},pagination:H,enabled:"event"===t});p.useEffect(()=>{if("show"===t&&Z?.data&&Z.data.length>0){(async()=>{for(let t=0;t<Z.data.length;t++){const n=Z.data[t];try{const e=await V.fetchShowImages(n.id);C(t=>t[n.id]?t:{...t,[n.id]:e}),t<Z.data.length-1&&await new Promise(e=>setTimeout(e,100))}catch(e){429!==e?.response?.status&&429!==e?.status||await new Promise(e=>setTimeout(e,2e3))}}})()}},[t,Z?.data,V]);const le=p.useMemo(()=>{if(!Z?.data||!ee?.data)return[];(new Date).setHours(0,0,0,0);const e=ee.data.filter(e=>{const t=new Date(e.start_dt);t.setHours(0,0,0,0);if(t<(d?K:G))return!1;if(!1===e.is_active)return!1;if("all"!==r&&e.status!==r)return!1;if(o.startDate){const e=new Date(o.startDate);if(e.setHours(0,0,0,0),t<e)return!1}if(o.endDate){const e=new Date(o.endDate);if(e.setHours(23,59,59,999),t>e)return!1}return!0}),t=new Map;e.forEach(e=>{const n=t.get(e.show_id)||[];t.set(e.show_id,[...n,e])});return Z.data.reduce((e,n)=>{const a=t.get(n.id)||[];let s=!1;if(W){const e=W.toLowerCase(),t=n.name.toLowerCase().includes(e),r=a.some(t=>t.title.toLowerCase().includes(e));(t||r)&&(s=!0)}else a.length>0&&(s=!0);if(s){const t=j[n.id]||[],s=t.find(e=>e.is_banner)||t[0];e.push({...n,events:a.sort((e,t)=>new Date(e.start_dt).getTime()-new Date(t.start_dt).getTime()),bannerImage:s})}return e},[]).sort((e,t)=>0===e.events.length&&0===t.events.length?0:0===e.events.length?1:0===t.events.length?-1:new Date(e.events[0].start_dt).getTime()-new Date(t.events[0].start_dt).getTime())},[Z?.data,ee?.data,j,W,r,o,d,G,K]),ce=p.useCallback(t=>{e({to:"/ticketing/events/$eventId/inventory",params:{eventId:t.id}})},[e]),de=p.useCallback(()=>{s(""),i("all"),l({startDate:null,endDate:null}),u(!1)},[]),ue=p.useCallback(()=>{m(""),g("all"),v({startDate:null,endDate:null}),b(!1)},[]),he=!!(a||"all"!==r||o.startDate||o.endDate||d),me=p.useMemo(()=>{if(!ae?.data)return[];const e=new Map(Z?.data?.map(e=>[e.id,e]));(new Date).setHours(0,0,0,0);return ae.data.map(t=>{const n=e.get(t.show_id);return n?{...t,show:{id:n.id,name:n.name}}:t}).filter(e=>{const t=new Date(e.start_dt);t.setHours(0,0,0,0);if(t<(y?K:G))return!1;if(!1===e.is_active)return!1;if(null===w&&"all"!==f&&e.status!==f)return!1;if(x.startDate){if(t<new Date(x.startDate+"T00:00:00"))return!1}if(x.endDate){if(t>new Date(x.endDate+"T23:59:59.999"))return!1}return!0}).sort((e,t)=>new Date(e.start_dt).getTime()-new Date(t.start_dt).getTime())},[ae?.data,Z?.data,f,x,y,w]),pe=p.useMemo(()=>{if(!re?.data)return[];const e=new Map(Z?.data?.map(e=>[e.id,e]));return(new Date).setHours(0,0,0,0),re.data.filter(e=>{const t=new Date(e.start_dt);return t.setHours(0,0,0,0),!(t<K)&&!1!==e.is_active}).map(t=>{const n=e.get(t.show_id);return n?{...t,show:{id:n.id,name:n.name}}:t}).sort((e,t)=>new Date(e.start_dt).getTime()-new Date(t.start_dt).getTime())},[re?.data,Z?.data,K]),fe="show"===t?J||te:"event"===t?se:ie,ge=le.reduce((e,t)=>e+t.events.length,0),xe=p.useCallback(e=>{N(e),E(!0)},[]),ve=p.useCallback((e,t)=>{T(e),A(t),D(!0)},[]),ye=p.useCallback(e=>{O(e.show?.id||e.show_id||null),B(e.id),F(!0)},[]),be=p.useCallback(async e=>{try{await $.mutateAsync(e),Uk({title:"Success",description:"Booking created successfully"}),F(!1)}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create booking",variant:"destructive"}),GQ}},[$]);return c.jsxs("div",{className:"space-y-6 p-6",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsx("div",{className:"flex-1 max-w-3xl",children:"show"===t?c.jsx(XH,{search:a,onSearchChange:s,statusFilter:r,onStatusFilterChange:i,dateFilter:o,onDateFilterChange:l,showPastEvents:d,onShowPastEventsChange:u,onClearFilters:de,pastEventsLabel:aG,pastEventsClearLabel:sG}):"event"===t?c.jsx(ZH,{search:h,onSearchChange:m,statusFilter:f,onStatusFilterChange:g,dateFilter:x,onDateFilterChange:v,showPastEvents:y,onShowPastEventsChange:b,onClearFilters:ue,events:oe?.data||[],onTimelineSourceChange:S,pastEventsLabel:aG,pastEventsClearLabel:sG}):c.jsx("h1",{className:"text-2xl font-bold tracking-tight h-10 flex items-center",children:"Explore Calendar"})}),c.jsx("div",{className:"flex items-center gap-2 pt-0.5",children:c.jsxs("div",{className:"flex border rounded-md",children:[c.jsx(bl,{variant:"show"===t?"default":"ghost",size:"icon",onClick:()=>n("show"),className:"rounded-none rounded-l-md border-r h-8 w-8 px-0",title:"Show Layout",children:c.jsx(Af,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"event"===t?"default":"ghost",size:"icon",onClick:()=>n("event"),className:"rounded-none border-r h-8 w-8 px-0",title:"Event Layout",children:c.jsx(Gf,{className:"h-4 w-4"})}),c.jsx(bl,{variant:"calendar"===t?"default":"ghost",size:"icon",onClick:()=>n("calendar"),className:"rounded-none rounded-r-md h-8 w-8 px-0",title:"Calendar Layout",children:c.jsx(Hp,{className:"h-4 w-4"})})]})})]}),"calendar"!==t&&c.jsx("div",{className:"text-sm text-muted-foreground",children:fe?"Loading events...":"show"===t?c.jsxs(c.Fragment,{children:["Showing ",le.length," show",1!==le.length?"s":""," with"," ",ge," event",1!==ge?"s":""]}):c.jsxs(c.Fragment,{children:["Showing ",me.length," event",1!==me.length?"s":""]})}),"event"===t?c.jsx(fO,{events:me,loading:fe,error:se||ae?null:new Error("Failed to load events"),onEventClick:ce,searchable:!1,title:"",description:"",showViewToggle:!1,showShowNameInTitle:!0,customActions:e=>c.jsx("div",{className:"flex gap-2",children:e.status===XI.ON_SALE&&c.jsxs(bl,{size:"sm",onClick:()=>ye(e),children:[c.jsx(nx,{className:"h-4 w-4 mr-2"}),"Book Now"]})})}):"calendar"===t?c.jsx(tG,{events:pe,onEventClick:ye,onDateClick:ve}):c.jsx(c.Fragment,{children:c.jsx(YH,{isLoading:fe,shows:le,hasActiveFilters:he,onClearFilters:de,onShowClick:xe})}),c.jsx(QH,{open:_,onOpenChange:E,show:k,onEventClick:ce,onBookNow:ye}),c.jsx(nG,{open:M,onOpenChange:D,date:R,events:P,onEventClick:ce,onBookNow:ye}),c.jsx(IH,{open:L,onOpenChange:F,onSubmit:be,initialShowId:I,initialEventId:z})]})}function iG({className:e,employees:t=[],loading:n=!1,error:a=null,pagination:s,onEmployeeClick:r,onCreate:i,onSearch:o,onPageChange:l,onPageSizeChange:d,customActions:u}){const h=Us(),m=[LP({getDisplayName:e=>e.code||e.name||String(e.id),getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:r,additionalOptions:{id:"code"}}),TP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",h.textSize),children:t??"-"})}}),TP({accessorKey:"job_title",header:"Job Title",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",h.textSize),children:t??"-"})}}),TP({accessorKey:"department",header:"Department",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",h.textSize),children:t??"-"})}}),TP({accessorKey:"work_email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",h.textSize),children:t??"-"})}}),TP({accessorKey:"employment_type",header:"Type",cell:e=>{const t=e.getValue();return c.jsx("span",{className:sl("text-muted-foreground",h.textSize),children:t??"-"})}}),...u?[FP({customActions:u})]:[]],p=t,f=s?{page:s.page,pageSize:s.pageSize,total:s.total,totalPages:s.totalPages}:void 0;return c.jsx("div",{className:sl("w-full",e),children:c.jsx(OP,{data:p,columns:m,useDefaultColumns:!1,title:"Employees",description:"Manage and view employees",onCreate:i,onSearch:o,manualPagination:Boolean(s&&l),serverPagination:f,onPageChange:l,onPageSizeChange:d,loading:n})})}function oG({className:e,data:t,loading:n=!1,error:a=null,showMetadata:s=!1,editable:r=!0,attachmentService:i,onEdit:o,onManageTags:l,onManageAttachments:d,profilePhotoComponent:u,customActions:h}){const[m,f]=p.useState("profile"),[g,x]=p.useState([]),[v,y]=p.useState(!1),b=p.useMemo(()=>i||new KP({apiClient:Fs,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[i]),w=p.useMemo(()=>t&&(t?.name||t?.code||t?.id)||"",[t,t?.code,t?.name]),S=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},j=p.useCallback(async()=>{if(t?.id&&b){y(!0);try{const e=await b.getAttachmentsForEntity("employee",t.id,"document");x(e.items||[])}catch(e){x([])}finally{y(!1)}}},[t?.id,b]);if(p.useEffect(()=>{"documents"===m&&t?.id&&b&&j()},[m,t?.id,b,j]),n)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(a)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",a.message]})})});if(!t)return c.jsx(Sl,{className:sl("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No employee selected"})})});const C=s,k=[{value:"profile",label:"Overview",icon:Ff},{value:"contact",label:"Contact & Address",icon:Zf},{value:"sales",label:"Sales & Performance",icon:rx},{value:"documents",label:"Documents"+(g.length>0?` (${g.length})`:""),icon:jf}];return C&&k.push({value:"metadata",label:"Metadata",icon:gf}),c.jsx(Sl,{className:sl("p-6",e),children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[u?c.jsx("div",{className:"flex-shrink-0",children:u}):c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(Ff,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:w}),t.code&&c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code,c.jsx(UL,{value:t.code,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[h?.(t),r&&o&&c.jsxs(bl,{onClick:()=>o(t),size:"sm",variant:"outline",className:sl("h-8 px-2 text-xs"),children:[c.jsx(Kg,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),c.jsx("div",{children:c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"ghost",size:"sm",className:sl("h-8 px-2 text-xs"),"aria-label":"Actions",children:c.jsx(yf,{className:"h-3 w-3"})})}),c.jsxs(hj,{align:"end",className:"w-56",children:[r&&l&&c.jsxs(mj,{onClick:()=>l(t),children:[c.jsx(ex,{className:"mr-2 h-3.5 w-3.5"})," Manage Tags"]}),r&&d&&c.jsxs(mj,{onClick:()=>d(t),children:[c.jsx(jf,{className:"mr-2 h-3.5 w-3.5"})," Manage Documents"]}),h&&h(t)]})]})})]})]}),c.jsx(UD,{tabs:k,value:m,onValueChange:e=>f(e),children:e=>c.jsxs("div",{className:"mt-0",children:["profile"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(GD,{columns:3,children:[c.jsx(HD,{label:"Work Email",value:t.work_email,linkType:"email",icon:Zf,hideIfEmpty:!1}),c.jsx(HD,{label:"Job Title",value:t.job_title,icon:zp,hideIfEmpty:!1}),c.jsx(HD,{label:"Department",value:t.department,hideIfEmpty:!1}),c.jsx(HD,{label:"Employment Type",value:t.employment_type,icon:hf,hideIfEmpty:!1}),c.jsx(HD,{label:"Hire Date",value:t.hire_date,icon:Hp,render:e=>S(e),hideIfEmpty:!1}),c.jsx(HD,{label:"Birthday",value:t.birthday,icon:Vp,render:e=>S(e),hideIfEmpty:!1})]}),c.jsx(qD,{showBorder:!0,children:c.jsx(GD,{gridClassName:"!grid-cols-1",className:"mt-0 mb-0",children:c.jsx(HD,{label:"Tags"+(t.tags&&t.tags.length>0?` (${t.tags.length})`:""),value:t.tags&&t.tags.length>0?c.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((e,t)=>c.jsxs(NC,{variant:"secondary",className:"text-xs flex items-center gap-1.5 pr-2 py-1.5 px-2.5 bg-primary/10 text-primary border-primary/20",children:[c.jsx(ex,{className:"h-3 w-3"}),c.jsx("span",{children:e})]},`tag-${t}-${e}`))}):c.jsx("span",{className:"text-muted-foreground italic",children:"No tags"}),hideIfEmpty:!1})})}),c.jsx(qD,{showBorder:!0,children:c.jsxs(GD,{columns:2,icon:gf,title:"System Information",className:"mt-0 mb-0",children:[c.jsx(HD,{label:"Created",value:t.created_at,render:e=>S(e),hideIfEmpty:!1}),c.jsx(HD,{label:"Last Updated",value:t.updated_at,render:e=>S(e),hideIfEmpty:!1})]})})]}),"contact"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(GD,{icon:Zf,title:"Contact",columns:3,children:[c.jsx(HD,{label:"Work Phone",value:t.work_phone,linkType:"tel",icon:vg,hideIfEmpty:!1}),c.jsx(HD,{label:"Mobile Phone",value:t.mobile_phone,linkType:"tel",icon:qg,hideIfEmpty:!1}),c.jsx(HD,{label:"Emergency Contact",value:t.emergency_contact_name?c.jsxs("span",{children:[t.emergency_contact_name,t.emergency_contact_phone&&c.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",t.emergency_contact_phone,")"]}),t.emergency_contact_relationship&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:t.emergency_contact_relationship})]}):null,icon:sf,hideIfEmpty:!1})]}),c.jsx(GD,{icon:Jf,title:"Address",columns:3,children:c.jsx(HD,{value:t.office_location?c.jsx("div",{className:"whitespace-pre-line",children:t.office_location}):null,hideIfEmpty:!1})})]}),"sales"===e&&c.jsx("div",{className:"space-y-8",children:c.jsxs(GD,{columns:3,children:[c.jsx(HD,{label:"Skills",value:t.skills&&t.skills.length>0?c.jsx("div",{className:"flex flex-wrap gap-1",children:t.skills.map((e,t)=>c.jsx("span",{className:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary",children:e},t))}):null,icon:Lp,hideIfEmpty:!1}),c.jsx(HD,{label:"Territories",value:t.assigned_territories&&t.assigned_territories.length>0?c.jsx("div",{className:"flex flex-wrap gap-1",children:t.assigned_territories.map((e,t)=>c.jsx("span",{className:"inline-flex items-center rounded-md bg-secondary/10 px-2 py-1 text-xs font-medium text-secondary-foreground",children:e},t))}):null,icon:eg,hideIfEmpty:!1}),c.jsx(HD,{label:"Commission Tier",value:t.commission_tier,icon:rx,hideIfEmpty:!1})]})}),"documents"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx($L,{documents:g,isLoading:v,onManageAttachments:r&&d?()=>d(t):void 0})}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(Sl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})})]})})}const lG=ED({name:kD().min(1,"Name is required"),work_email:kD().email("Invalid email format").optional().or(PD("")),job_title:kD().optional(),department:kD().optional(),employment_type:kD().optional(),hire_date:kD().optional(),work_phone:kD().optional(),mobile_phone:kD().optional(),street_address:kD().optional(),city:kD().optional(),state_province:kD().optional(),postal_code:kD().optional(),country:kD().optional(),office_location:kD().optional(),timezone:kD().optional(),skills:kD().optional(),assigned_territories:kD().optional(),commission_tier:kD().optional(),birthday:kD().optional(),emergency_contact_name:kD().optional(),emergency_contact_phone:kD().optional(),emergency_contact_relationship:kD().optional()}).transform(e=>e);function cG(e){return null==e?"":Array.isArray(e)?e.map(e=>String(e??"")).join(", "):String(e)}const dG=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1},a){const{handleSubmit:s,control:r,reset:i,watch:o,setValue:l,formState:{errors:d,isSubmitted:u}}=lT({resolver:GT(lG),defaultValues:(()=>{const t={name:"",work_email:"",job_title:"",department:"",employment_type:"",street_address:"",city:"",state_province:"",postal_code:"",country:"",office_location:"",timezone:"UTC",hire_date:"",work_phone:"",mobile_phone:"",skills:"",assigned_territories:"",commission_tier:"",birthday:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:""};return e?{...t,...e,skills:cG(e.skills),assigned_territories:cG(e.assigned_territories)}:t})()}),h=p.useRef(null);p.useEffect(()=>{e&&i(t=>({...t,...e,skills:cG(e.skills??t.skills),assigned_territories:cG(e.assigned_territories??t.assigned_territories)}))},[e,i]),p.useEffect(()=>{if(u&&Object.keys(d).length>0){const e=Object.keys(d)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):h.current&&h.current.scrollIntoView({behavior:"smooth",block:"center"})}},[d,u]);const m=o(),f={name:cG(m.name),work_email:cG(m.work_email),job_title:cG(m.job_title),department:cG(m.department),employment_type:cG(m.employment_type),hire_date:cG(m.hire_date),work_phone:cG(m.work_phone),mobile_phone:cG(m.mobile_phone),street_address:cG(m.street_address),city:cG(m.city),state_province:cG(m.state_province),postal_code:cG(m.postal_code),country:cG(m.country),office_location:cG(m.office_location),timezone:cG(m.timezone),skills:cG(m.skills),assigned_territories:cG(m.assigned_territories),commission_tier:cG(m.commission_tier),birthday:cG(m.birthday),emergency_contact_name:cG(m.emergency_contact_name),emergency_contact_phone:cG(m.emergency_contact_phone),emergency_contact_relationship:cG(m.emergency_contact_relationship)};return c.jsxs("form",{ref:a,id:"employee-form",onSubmit:s(async e=>{await t(e)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(vT,{formType:"employee",currentValues:f,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&l(e,t)})},disabled:n})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),c.jsxs("div",{className:sl("grid grid-cols-1 md:grid-cols-2 gap-4"),ref:h,children:[c.jsx(cT,{control:r,name:"name",label:"Name",placeholder:"Enter full name",required:!0,disabled:n}),c.jsx(cT,{control:r,name:"work_email",label:"Work Email",type:"email",placeholder:"employee@company.com",disabled:n})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsx(uT,{control:r,name:"birthday",label:"Birthday (for celebrations)",disabled:n})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Contact & Location"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(cT,{control:r,name:"work_phone",label:"Work Phone",type:"tel",placeholder:"+1 (555) 123-4567",disabled:n}),c.jsx(cT,{control:r,name:"mobile_phone",label:"Mobile Phone",type:"tel",placeholder:"+1 (555) 987-6543",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(cT,{control:r,name:"street_address",label:"Street Address",placeholder:"123 Main Street",disabled:n})}),c.jsx(cT,{control:r,name:"city",label:"City",placeholder:"New York",disabled:n}),c.jsx(cT,{control:r,name:"state_province",label:"State/Province",placeholder:"NY",disabled:n}),c.jsx(cT,{control:r,name:"postal_code",label:"Postal Code",placeholder:"10001",disabled:n}),c.jsx(cT,{control:r,name:"country",label:"Country",placeholder:"United States",disabled:n})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsx(cT,{control:r,name:"timezone",label:"Timezone",placeholder:"UTC",disabled:n})}),c.jsx("div",{className:"hidden",children:c.jsx(cT,{control:r,name:"office_location",label:"Office Location",placeholder:"e.g., New York HQ",disabled:n})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Organization"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(cT,{control:r,name:"job_title",label:"Job Title",placeholder:"e.g., Sales Manager",disabled:n}),c.jsx(cT,{control:r,name:"department",label:"Department",placeholder:"e.g., Sales",disabled:n}),c.jsx(mT,{control:r,name:"employment_type",label:"Employment Type",placeholder:"Select type",options:[{value:"Full-time",label:"Full-time"},{value:"Part-time",label:"Part-time"},{value:"Contractor",label:"Contractor"},{value:"Intern",label:"Intern"}],disabled:n}),c.jsx(uT,{control:r,name:"hire_date",label:"Hire Date",disabled:n})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Sales & Operations"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(cT,{control:r,name:"skills",label:"Skills",placeholder:"Comma-separated (e.g., Sales, Spanish)",helperText:"Separate skills with commas",disabled:n}),c.jsx(cT,{control:r,name:"assigned_territories",label:"Assigned Territories",placeholder:"Comma-separated (e.g., EMEA, APAC)",helperText:"Separate territories with commas",disabled:n}),c.jsx(cT,{control:r,name:"commission_tier",label:"Commission Tier",placeholder:"e.g., Tier 1",disabled:n})]})]}),c.jsxs("details",{className:"space-y-4",children:[c.jsx("summary",{className:"text-lg font-semibold cursor-pointer",children:"Emergency Contact"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[c.jsx(cT,{control:r,name:"emergency_contact_name",label:"Contact Name",placeholder:"Full name",disabled:n}),c.jsx(cT,{control:r,name:"emergency_contact_phone",label:"Contact Phone",type:"tel",placeholder:"+1 (555) 000-0000",disabled:n}),c.jsx(cT,{control:r,name:"emergency_contact_relationship",label:"Relationship",placeholder:"e.g., Spouse, Parent",disabled:n})]})]})]})});function uG({open:e,onOpenChange:t,onSubmit:n,title:a="Create Employee",maxWidth:s="720px"}){const r=Us(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=e=>{if(0===[e.street_address?.trim(),e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim(),e.country?.trim()].filter(Boolean).length)return e.office_location?.trim()||void 0;const t=e.street_address?.trim(),n=[e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim()].filter(Boolean).join(", "),a=e.country?.trim(),s=[];return t&&s.push(t),n&&s.push(n),a&&s.push(a),s.join("\n")},v=p.useMemo(()=>e=>({name:e.name,work_email:e.work_email||void 0,job_title:e.job_title||void 0,department:e.department||void 0,employment_type:e.employment_type||void 0,hire_date:e.hire_date?.trim()||void 0,work_phone:e.work_phone||void 0,mobile_phone:e.mobile_phone||void 0,office_location:x(e)||void 0,timezone:e.timezone||void 0,skills:e.skills?e.skills.split(",").map(e=>e.trim()).filter(Boolean):void 0,assigned_territories:e.assigned_territories?e.assigned_territories.split(",").map(e=>e.trim()).filter(Boolean):void 0,commission_tier:e.commission_tier||void 0,birthday:e.birthday?.trim()||void 0,emergency_contact_name:e.emergency_contact_name||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,emergency_contact_relationship:e.emergency_contact_relationship||void 0}),[]),y=()=>{m(!1),g(null),t(!1)},b={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=v(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},w={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:y,title:a,maxWidth:s,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:y,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(dG,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create"},o)})}),c.jsx(bA,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Employee Creation",description:f?c.jsx("p",{className:sl("mb-3",r.textSizeSmall),children:"Are you sure you want to create this employee?"}):void 0,confirmAction:b,cancelAction:w})]})}function hG({open:e,onOpenChange:t,onSubmit:n,employee:a,title:s="Edit Employee",maxWidth:r="720px"}){const i=Us(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=e=>{if(0===[e.street_address?.trim(),e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim(),e.country?.trim()].filter(Boolean).length)return e.office_location?.trim()||void 0;const t=e.street_address?.trim(),n=[e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim()].filter(Boolean).join(", "),a=e.country?.trim(),s=[];return t&&s.push(t),n&&s.push(n),a&&s.push(a),s.join("\n")},y=p.useMemo(()=>{if(!a)return;const e=(e=>{if(!e)return{street_address:"",city:"",state_province:"",postal_code:"",country:""};const t=e.split("\n").map(e=>e.trim()).filter(Boolean),n={street_address:t[0]||"",city:"",state_province:"",postal_code:"",country:t[t.length-1]||""};if(t[1]){const e=t[1].split(",").map(e=>e.trim());if(n.city=e[0]||"",e[1]){const t=e[1].split(" ");n.state_province=t[0]||"",n.postal_code=t.slice(1).join(" ")||""}}return n})(a.office_location);return{name:a.name??"",work_email:a.work_email??"",job_title:a.job_title??"",department:a.department??"",employment_type:a.employment_type??"",hire_date:a.hire_date??"",work_phone:a.work_phone??"",mobile_phone:a.mobile_phone??"",street_address:e.street_address,city:e.city,state_province:e.state_province,postal_code:e.postal_code,country:e.country,office_location:a.office_location??"",timezone:a.timezone??"UTC",skills:a.skills?.join(", ")??"",assigned_territories:a.assigned_territories?.join(", ")??"",commission_tier:a.commission_tier??"",birthday:a.birthday??"",emergency_contact_name:a.emergency_contact_name??"",emergency_contact_phone:a.emergency_contact_phone??"",emergency_contact_relationship:a.emergency_contact_relationship??""}},[a]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const b=p.useMemo(()=>e=>({name:e.name,work_email:e.work_email||void 0,job_title:e.job_title||void 0,department:e.department||void 0,employment_type:e.employment_type||void 0,hire_date:e.hire_date?.trim()||void 0,work_phone:e.work_phone||void 0,mobile_phone:e.mobile_phone||void 0,office_location:v(e)||void 0,timezone:e.timezone||void 0,skills:e.skills?e.skills.split(",").map(e=>e.trim()).filter(Boolean):void 0,assigned_territories:e.assigned_territories?e.assigned_territories.split(",").map(e=>e.trim()).filter(Boolean):void 0,commission_tier:e.commission_tier||void 0,birthday:e.birthday?.trim()||void 0,emergency_contact_name:e.emergency_contact_name||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,emergency_contact_relationship:e.emergency_contact_relationship||void 0}),[]),w=()=>{f(!1),x(null),t(!1)},S={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&a){h(!0);try{const e=b(g);await n(a.id,e),f(!1),x(null)}catch(e){Uk({title:"Error",description:e instanceof Error?e.message:"Failed to update employee",variant:"destructive"}),f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},j={label:"Cancel",variant:"outline",disabled:u};return a?c.jsxs(c.Fragment,{children:[c.jsx(yA,{open:e,onClose:w,title:s,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:w,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:sl("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(dG,{ref:o,defaultValues:y,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit"},`${a.id}-${l}`)})}),c.jsx(bA,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Employee Update",description:g?c.jsx("p",{className:sl("mb-3",i.textSizeSmall),children:"Are you sure you want to update this employee?"}):void 0,confirmAction:S,cancelAction:j})]}):null}function mG({open:e,onOpenChange:t,employee:n,tagService:a,onSave:s,loading:r=!1}){return c.jsx(zL,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"employee",initialTags:n.tags,tagService:a,onSave:s,loading:r})}function pG({open:e,onOpenChange:t,employee:n,attachmentService:a,onSave:s,loading:r=!1}){return c.jsx(BL,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"employee",attachmentService:a,onSave:s,loading:r})}function fG({employee:e,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s=!1,size:r="md"}){return c.jsx(KL,{entityId:e.id,entityType:"employee",defaultImageUrl:null,altText:e.name,FallbackIcon:hx,attachmentService:t,currentPhoto:n,onPhotoChange:a,disabled:s,size:r})}const gG=p.createContext(null);function xG({children:e,config:t}){const n=p.useMemo(()=>new MH(t),[t.apiClient,t.endpoints?.employees]),a=p.useMemo(()=>({service:n}),[n]);return c.jsx(gG.Provider,{value:a,children:e})}function vG(){const e=p.useContext(gG);if(!e)throw new Error("useEmployeeService must be used within EmployeeProvider");return e.service}function yG({onNavigateToEmployee:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:a}){const s=vG(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),h=f.useRef(!1);f.useEffect(()=>{const e=h.current;n&&!e&&u(!0),h.current=!!n},[n]);const{data:m,isLoading:g,error:x}=DH(s,{filter:r,pagination:o}),v=function(e){const t=Va();return Xa({mutationFn:t=>e.createEmployee(t),onSuccess:()=>{t.invalidateQueries({queryKey:["employees"]})}})}(s),y=m?.data??[],b=m?.pagination,w=p.useCallback(()=>{t&&t(),u(!0)},[t]),S=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),j=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),C=p.useCallback(e=>{l({page:1,pageSize:e})},[]),k=p.useCallback(async e=>{try{await v.mutateAsync(e),Uk({title:"Success",description:"Employee created successfully"}),u(!1),a?.()}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create employee",variant:"destructive"}),GQ}},[v,a]),N=p.useCallback(t=>{e?.(t.id)},[e]),_=p.useMemo(()=>{if(b)return{page:o.page,pageSize:o.pageSize,total:b.total,totalPages:b.totalPages}},[o,b]);return c.jsxs(c.Fragment,{children:[c.jsx(iG,{employees:y,loading:g,error:x,onEmployeeClick:N,onCreate:w,onSearch:S,pagination:_,onPageChange:j,onPageSizeChange:C}),c.jsx(uG,{open:d,onOpenChange:e=>{u(e),e||a?.()},onSubmit:k})]})}function bG({children:e}){const t={apiClient:Fs,endpoints:{customers:"/api/v1/sales/customers"}};return c.jsx(wI,{config:t,children:e})}function wG({children:e}){return c.jsx(aI,{children:c.jsx(bG,{children:c.jsx(xG,{config:{apiClient:Fs,endpoints:{employees:"/api/v1/sales/employees"}},children:c.jsx(VH,{config:{apiClient:Fs,endpoints:{bookings:"/api/v1/sales/bookings"}},children:c.jsx(yO,{config:{apiClient:Fs,endpoints:{venues:"/api/v1/ticketing/venues"}},children:c.jsx(OO,{config:{apiClient:Fs,endpoints:{shows:"/api/v1/ticketing/shows"}},children:c.jsx(GO,{config:{apiClient:Fs,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:e})})})})})})})}const SG=function(){return null},jG=function(e){return new hn(e)}({component:()=>c.jsxs(c.Fragment,{children:[c.jsx(_n,{}),c.jsx(qk,{}),c.jsx(SG,{})]})}),CG=()=>{const e=p.useContext(Ws);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},kG=[{code:"en",name:"English"},{code:"fr",name:"Franais"},{code:"es",name:"Espaol"}];function NG(){const{i18n:e,t:t}=fr();return c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent/50 transition-all duration-200","aria-label":t("language.select"),children:c.jsx(Bf,{className:"h-4 w-4"})})}),c.jsx(hj,{align:"end",children:kG.map(t=>c.jsx(mj,{onClick:()=>{return n=t.code,e.changeLanguage(n),void Gs.set(vs,n);var n},className:e.language===t.code?"bg-accent":"",children:t.name},t.code))})]})}const _G=["Pinned","General","Sales & Bookings","Ticketing","Users","Settings","Other"],EG={tabs:[{path:"/",title:"Home",iconName:"Home",pageType:"list",module:"General",group:"primary",sequence:1,priority:1},{path:"/users",title:"Users",iconName:"Users",pageType:"list",module:"Users",group:"users",sequence:1,priority:1},{path:"/users/$id",title:"User",iconName:"User",pageType:"detail",module:"users",group:"primary",sequence:2,priority:2},{path:"/profile",title:"Profile",iconName:"User",pageType:"detail",module:"profile",group:"secondary",sequence:1,priority:3},{path:"/settings/profile",title:"Profile Settings",iconName:"User",pageType:"detail",module:"Settings",group:"profile",sequence:2,priority:1},{path:"/sales/customers",title:"Customers",iconName:"Users",pageType:"list",module:"Sales & Bookings",group:"customers",sequence:1,priority:1},{path:"/sales/customers/$id",title:"Customer",iconName:"User",pageType:"detail",module:"Sales & Bookings",group:"customers",sequence:2,priority:2},{path:"/sales/bookings",title:"Bookings",iconName:"Calendar",pageType:"list",module:"Sales & Bookings",group:"bookings",sequence:1,priority:3},{path:"/sales/bookings/$id",title:"Booking",iconName:"Calendar",pageType:"detail",module:"Sales & Bookings",group:"bookings",sequence:2,priority:4},{path:"/bookings",title:"Bookings",iconName:"Calendar",pageType:"list",module:"Sales & Bookings",group:"bookings",sequence:5,priority:11},{path:"/sales/employees",title:"Employees",iconName:"Users",pageType:"list",module:"Sales & Bookings",group:"employees",sequence:1,priority:5},{path:"/sales/employees/$id",title:"Employee",iconName:"User",pageType:"detail",module:"Sales & Bookings",group:"employees",sequence:2,priority:6},{path:"/sales/payments",title:"Payments",iconName:"CreditCard",pageType:"list",module:"Sales & Bookings",group:"payments",sequence:1,priority:7},{path:"/sales/payments/$id",title:"Payment",iconName:"CreditCard",pageType:"detail",module:"Sales & Bookings",group:"payments",sequence:2,priority:8},{path:"/sales/explore",title:"Explore",iconName:"Search",pageType:"list",module:"Sales & Bookings",group:"explore",sequence:1,priority:9},{path:"/explore",title:"Explore",iconName:"Search",pageType:"list",module:"Sales & Bookings",group:"explore",sequence:2,priority:10},{path:"/ticketing/venues",title:"Venues",iconName:"MapPin",pageType:"list",module:"Ticketing",group:"venues",sequence:1,priority:1},{path:"/ticketing/venues/$id",title:"Venue",iconName:"MapPin",pageType:"detail",module:"Ticketing",group:"venues",sequence:2,priority:2},{path:"/ticketing/venues/$id/seats/designer",title:"Seat Designer",iconName:"LayoutGrid",pageType:"sub-detail",module:"Ticketing",group:"venues",sequence:3,priority:3},{path:"/ticketing/events",title:"Events",iconName:"Calendar",pageType:"list",module:"Ticketing",group:"events",sequence:4,priority:4},{path:"/ticketing/events/$id",title:"Event",iconName:"Calendar",pageType:"detail",module:"Ticketing",group:"events",sequence:5,priority:5},{path:"/ticketing/events/$eventId/inventory",title:"Event Inventory",iconName:"Package",pageType:"sub-detail",module:"Ticketing",group:"events",sequence:6,priority:6,loadingOnAdded:!0},{path:"/ticketing/shows",title:"Shows",iconName:"Play",pageType:"list",module:"Ticketing",group:"shows",sequence:1,priority:8},{path:"/ticketing/shows/$id",title:"Show",iconName:"Play",pageType:"detail",module:"Ticketing",group:"shows",sequence:2,priority:9},{path:"/ticketing/organizers",title:"Organizers",iconName:"Users",pageType:"list",module:"Ticketing",group:"organizers",sequence:1,priority:6},{path:"/ticketing/organizers/$id",title:"Organizer",iconName:"User",pageType:"detail",module:"Ticketing",group:"organizers",sequence:2,priority:7},{path:"/settings",title:"Settings",iconName:"Settings",pageType:"list",module:"Settings",group:"settings",sequence:1,priority:1},{path:"/settings/account",title:"Account Settings",iconName:"User",pageType:"detail",module:"Settings",group:"settings",sequence:2,priority:2},{path:"/settings/appearance",title:"Appearance",iconName:"Palette",pageType:"detail",module:"Settings",group:"settings",sequence:3,priority:4},{path:"/settings/notifications",title:"Notifications",iconName:"Bell",pageType:"detail",module:"Settings",group:"settings",sequence:1,priority:3},{path:"/settings/language",title:"Language",iconName:"Globe",pageType:"detail",module:"Settings",group:"settings",sequence:2,priority:5},{path:"/settings/security",title:"Security",iconName:"Shield",pageType:"detail",module:"Settings",group:"settings",sequence:3,priority:6}]},PG="app_tabs";function AG({onTabChange:e,inline:t=!1}){const n=Yt(),a=Mn(),s=p.useRef(null),r=p.useRef(null),[i,o]=p.useState(()=>Gs.get(PG)||[]),[l,d]=p.useState(null),[u,h]=p.useState(null),[m,f]=p.useState(null),[g,x]=p.useState(null),[v,y]=p.useState(!1),[b,w]=p.useState(()=>Gs.get("tab_position")??"separate"),S=p.useCallback(e=>VD(EG,e),[]);p.useEffect(()=>{o(e=>{const t=e.filter(e=>null!=e&&!!e.id&&!!e.path);return t.length!==e.length?t:e})},[]),p.useEffect(()=>{const e=i.filter(e=>null!=e&&!!e.id&&!!e.path);Gs.set(PG,e)},[i]);const j=p.useCallback(e=>function(e,t){const n=VD(e,t);if(n)return{title:n.title,iconName:n.iconName};const a=t.split("/").pop()||"Page";return{title:a.match(/^[a-zA-Z][a-zA-Z0-9_-]*$/)?a.charAt(0).toUpperCase()+a.slice(1):"Page",iconName:"FileText"}}(EG,e),[]);p.useEffect(()=>{const t=a.pathname.includes("/seats/designer"),n=new URLSearchParams(a.search).get("layoutId"),s=t&&n?`${a.pathname}?layoutId=${n}`:a.pathname;o(t=>{const n=t.find(e=>e.path===s);if(n)return d(n.id),e&&e(n),t;{const{title:n,iconName:r}=j(a.pathname),i=S(s),o=i?.loadingOnAdded?"Loading...":n,l={id:C(),path:s,title:o,iconName:r};if(i?.group){t.some(e=>{if(e.grouped){const t=S(e.path);return t?.group===i.group}return!1})&&(l.grouped=!0)}d(l.id),e&&e(l);const c=[...t,l];return $(c)}})},[a.pathname,a.search,e,j,S]),p.useEffect(()=>{if(v)return;const e=setTimeout(()=>{r.current&&r.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},10);return()=>clearTimeout(e)},[l,i,v]),p.useEffect(()=>{const e=e=>{const{path:t,title:n,iconName:a}=e.detail||{};t&&n&&o(e=>e.map(e=>e.path===t?{...e,title:n,iconName:a??e.iconName}:e))};return window.addEventListener("update-tab-title",e),()=>{window.removeEventListener("update-tab-title",e)}},[]);const C=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,k=e=>e?{Home:Df,LayoutDashboard:Uf,Users:px,User:hx,Settings:Og,FileText:jf,Package:cg,Calendar:Hp,CreditCard:ff,Search:Ig,MapPin:Jf,LayoutGrid:Vf,Play:Sg,Palette:dg,Bell:Ip,Globe:Pf,Shield:$g}[e]:null,N=p.useCallback(e=>{const[t,a]=e.split("?"),s=a?new URLSearchParams(a):void 0;n({to:t,search:s?Object.fromEntries(s):void 0})},[n]),_=p.useCallback(t=>{y(!0),d(t.id),N(t.path),e&&e(t),setTimeout(()=>y(!1),100)},[N,e]),E=p.useCallback((e,t)=>{e.stopPropagation();const a=i.findIndex(e=>e.id===t),s=l===t,r=i.filter(e=>e.id!==t);if(o(r),s)if(r.length>0){let e;e=a<r.length?r[a]:r[a-1],setTimeout(()=>{n({to:e.path})},50)}else n({to:"/"})},[i,l,n]),P=p.useCallback(()=>{const e=i.find(e=>e.id===l);e&&o([e])},[i,l]),A=p.useCallback(()=>{o([]),n({to:"/"})},[n]);p.useEffect(()=>{const e=e=>{const t=navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey;if(t&&"w"===e.key&&(e.preventDefault(),l)){const e=new MouseEvent("click");E(e,l)}if(t&&"Tab"===e.key&&!e.shiftKey){e.preventDefault();const t=i.findIndex(e=>e.id===l);t<i.length-1?n({to:i[t+1].path}):i.length>0&&n({to:i[0].path})}if(t&&"Tab"===e.key&&e.shiftKey){e.preventDefault();const t=i.findIndex(e=>e.id===l);t>0?n({to:i[t-1].path}):i.length>0&&n({to:i[i.length-1].path})}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i,l,n,E]);const R=p.useCallback((e,t)=>{h(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",t)},[]),T=p.useCallback((e,t)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",f(t)},[]),M=p.useCallback(()=>{f(null)},[]),D=p.useCallback((e,t)=>{if(e.preventDefault(),!u||u===t)return h(null),void f(null);o(e=>{const n=e.findIndex(e=>e.id===u),a=e.findIndex(e=>e.id===t);if(-1===n||-1===a)return e;const s=[...e],[r]=s.splice(n,1);return s.splice(a,0,r),s}),h(null),f(null)},[u]),L=p.useCallback(()=>{h(null),f(null)},[]),F=p.useCallback(e=>{x(e)},[]),I=p.useCallback(()=>{x(null)},[]),[O,z]=p.useState(()=>!1!==Gs.get("enable_tabs"));p.useEffect(()=>{const e=e=>{z(e.detail.enabled)};return window.addEventListener("tabs-preference-changed",e),()=>{window.removeEventListener("tabs-preference-changed",e)}},[]),p.useEffect(()=>{const e=e=>{w(e.detail.position)};return window.addEventListener("tab-position-changed",e),()=>{window.removeEventListener("tab-position-changed",e)}},[]);const B=p.useCallback(e=>function(e,t){const n=VD(e,t);return n?.module||"Other"}(EG,e),[]),$=e=>{const t=["/"];return[...e].sort((e,n)=>{const a=t.includes(e.path),s=t.includes(n.path);return a&&!s?-1:!a&&s?1:a&&s?0:e.pinned&&!n.pinned?-1:!e.pinned&&n.pinned?1:e.grouped&&!n.grouped?-1:!e.grouped&&n.grouped?1:0})},U=p.useCallback(e=>{o(t=>{const n=t.map(t=>t.id===e.id?{...t,pinned:!t.pinned}:t);return $(n)})},[]),V=p.useCallback(e=>{o(t=>{if(e.grouped){const n=S(e.path);if(n?.group){const e=t.map(e=>{const t=S(e.path);return t?.group===n.group?{...e,grouped:!1}:e});return $(e)}}else{const n=S(e.path);if(n?.group){const e=t.map(e=>{const t=S(e.path);return t?.group===n.group?{...e,grouped:!0}:e});return $(e)}}return t})},[S]),q=p.useCallback(()=>{o(e=>[...e].sort((e,t)=>{if(e.pinned&&!t.pinned)return-1;if(!e.pinned&&t.pinned)return 1;if(e.pinned&&t.pinned)return 0;const n=B(e.path),a=B(t.path);if(n===a){const n=S(e.path),a=S(t.path);if(n&&a){const e=n.group,t=a.group;if(e&&!t)return-1;if(!e&&t)return 1;if(e&&t&&e!==t)return e.localeCompare(t);const s=n.sequence-a.sequence;if(0!==s)return s}return"/"===e.path?-1:"/"===t.path?1:e.title.localeCompare(t.title)}return _G.indexOf(n)-_G.indexOf(a)}))},[B,S]),H=i.reduce((e,t)=>{const n=t.pinned?"Pinned":B(t.path);return e[n]||(e[n]=[]),e[n].push(t),e},{});if(!O||t&&"inline"!==b)return null;const G=i.filter(e=>null!=e);return c.jsx("div",{className:t?"":"sticky-tabs border-b border-border bg-background/95 backdrop-blur-sm supports-[backdrop-filter]:bg-background/80",children:c.jsxs("div",{className:sl("flex items-center",t?"gap-1.5":"container gap-0.5 h-8 px-4 sm:px-6"),children:[c.jsx("div",{className:"flex-1 min-w-0 overflow-hidden relative group/tabs-container",children:c.jsx("div",{className:sl("flex items-center scroll-smooth tab-container",t?"gap-1.5":"gap-0.5"),ref:s,children:G.map(e=>{const n=G.find(e=>e.id===l),a=n?S(n.path):null,s=S(e.path),o=a?.group&&s?.group&&a.group===s.group&&e.id!==l;return c.jsxs(Wj,{children:[c.jsx(Qj,{asChild:!0,children:c.jsxs("div",{ref:l===e.id?r:null,draggable:g===e.id,onDragStart:t=>R(t,e.id),onDragOver:t=>T(t,e.id),onDragLeave:M,onDrop:t=>D(t,e.id),onDragEnd:L,onClick:()=>_(e),className:sl("group relative flex items-center justify-between gap-1.5 px-2 py-1 rounded-md","transition-all duration-200 whitespace-nowrap text-xs border","flex-shrink-0 select-none",e.pinned?"w-8 px-0 justify-center min-w-[32px]":sl("min-w-0",t?"max-w-[140px] text-[11px]":"max-w-[200px]"),g===e.id?"cursor-grab":"cursor-pointer",l===e.id?"bg-primary/10 dark:bg-primary/20 text-primary dark:text-primary border-primary/30 dark:border-primary/50 shadow-sm ring-1 ring-primary/20 dark:ring-primary/30":"bg-transparent hover:bg-accent/50 border-transparent hover:border-border/50 text-muted-foreground hover:text-foreground",u===e.id?"opacity-50 scale-95":"",m===e.id&&u!==e.id?"ring-2 ring-primary/50 bg-primary/10":"",o?"bg-accent/90 text-accent-foreground border-border shadow-sm":""),title:e.title,children:[e.pinned?(()=>{const t=k(e.iconName);return t?c.jsx(t,{className:"h-3.5 w-3.5 flex-shrink-0 mx-auto"}):null})():c.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1",children:[(()=>{const t=k(e.iconName);return t?c.jsxs("div",{className:"relative h-3.5 w-3.5 flex-shrink-0",children:[c.jsx(t,{className:"h-3.5 w-3.5 opacity-100 group-hover:opacity-0 transition-opacity duration-300"}),c.jsx(Rf,{className:"h-3.5 w-3.5 absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-grab active:cursor-grabbing",onMouseEnter:()=>F(e.id),onMouseLeave:I})]}):null})(),c.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[c.jsx("span",{className:"font-medium truncate",children:e.title}),e.grouped&&c.jsx($f,{className:"h-2.5 w-2.5 flex-shrink-0 text-muted-foreground opacity-60"})]})]}),!e.pinned&&i.length>1&&c.jsx("button",{onClick:t=>E(t,e.id),className:sl("opacity-0 group-hover:opacity-100 transition-all duration-150","hover:bg-red-500/10 dark:hover:bg-red-500/20 rounded p-0.5 -mr-0.5","shrink-0 ml-1",l===e.id?"opacity-100":""),"aria-label":`Close ${e.title}`,title:`Close ${e.title}`,children:c.jsx(xx,{className:"h-3 w-3 transition-all duration-150 hover:text-red-500 hover:scale-110 active:scale-95"})})]})}),c.jsx(Yj,{className:"min-w-[120px]",children:i.length>1&&c.jsxs(c.Fragment,{children:[c.jsxs(Xj,{onClick:()=>U(e),className:"text-xs",children:[e.pinned?c.jsx(bg,{className:"mr-2 h-3.5 w-3.5"}):c.jsx(wg,{className:"mr-2 h-3.5 w-3.5"}),e.pinned?"Unpin Tab":"Pin Tab"]}),c.jsxs(Xj,{onClick:()=>V(e),className:"text-xs",children:[c.jsx($f,{className:"mr-2 h-3.5 w-3.5"}),e.grouped?"Ungroup Tab":"Group Related Tabs"]}),c.jsxs(Xj,{onClick:q,className:"text-xs",children:[c.jsx($f,{className:"mr-2 h-3.5 w-3.5"}),"Sort by Groups"]}),c.jsx(Zj,{}),c.jsx(Xj,{onClick:P,className:"text-xs",children:"Close Others"}),c.jsx(Xj,{onClick:A,className:"text-xs",children:"Close All"})]})})]},e.id)})})}),c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"ghost",size:"sm",className:sl("h-[26px] w-[26px] p-0 border border-transparent rounded-md hover:bg-accent/50 shrink-0 ml-1","text-muted-foreground hover:text-foreground"),"aria-label":"List all tabs",title:"List all tabs",children:c.jsx(Xp,{className:"h-4 w-4"})})}),c.jsxs(hj,{align:"end",className:"max-h-[400px] overflow-y-auto min-w-[200px]",children:[_G.map(e=>{const t=H[e];return t&&0!==t.length?c.jsxs("div",{children:[c.jsx(gj,{className:"text-[10px] uppercase text-muted-foreground px-2 py-1.5 font-bold tracking-wider opacity-70",children:e}),t.map(e=>{const t=k(e.iconName);return c.jsxs(mj,{onClick:()=>_(e),className:sl("text-xs flex items-center justify-between gap-2 pl-4",l===e.id&&"bg-accent text-accent-foreground font-medium"),children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.pinned&&c.jsx(wg,{className:"h-3 w-3 text-muted-foreground shrink-0 rotate-45"}),e.grouped&&c.jsx($f,{className:"h-3 w-3 text-muted-foreground shrink-0"}),t&&c.jsx(t,{className:"mr-2 h-3.5 w-3.5 shrink-0"}),c.jsx("span",{className:"truncate",title:e.title,children:e.title})]}),!e.pinned&&i.length>1&&c.jsx("div",{role:"button",onClick:t=>E(t,e.id),className:"opacity-50 hover:opacity-100 p-1 hover:bg-background/80 rounded","aria-label":`Close ${e.title}`,title:`Close ${e.title}`,children:c.jsx(xx,{className:"h-3 w-3"})})]},e.id)}),c.jsx(xj,{className:"my-1"})]},e):null}),i.length>1&&c.jsxs(c.Fragment,{children:[c.jsxs(mj,{onClick:()=>{const e=i.find(e=>e.id===l);e&&V(e)},className:"text-xs",children:[c.jsx($f,{className:"mr-2 h-3.5 w-3.5"}),i.find(e=>e.id===l)?.grouped?"Ungroup Tabs":"Group Related Tabs"]}),c.jsxs(mj,{onClick:q,className:"text-xs",children:[c.jsx($f,{className:"mr-2 h-3.5 w-3.5"}),"Sort by Groups"]}),c.jsx(xj,{className:"my-1"}),c.jsx(mj,{onClick:A,className:"text-xs text-red-500 focus:text-red-600",children:"Close All Tabs"})]})]})]})]})})}function RG({className:e}){const{t:t}=fr(),n=Yt(),{toast:a}=Vk(),s=Va(),{data:r,isLoading:i}=Ya({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser()}),o=()=>r?r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.name?r.name:r.username?r.username:"User":"User";return c.jsxs(ij,{children:[c.jsx(oj,{asChild:!0,children:c.jsx(bl,{variant:"ghost",className:`relative h-8 w-8 rounded-full p-0 hover:bg-accent/50 transition-all duration-200 ${e||""}`,children:c.jsxs(SC,{className:"h-8 w-8",children:[c.jsx(jC,{src:"",alt:o()}),c.jsx(CC,{className:"text-sm font-medium",children:i?"...":(()=>{if(!r)return"??";if(r.first_name&&r.last_name)return`${r.first_name[0]}${r.last_name[0]}`.toUpperCase();if(r.name){const e=r.name.trim().split(/\s+/);return e.length>=2?`${e[0][0]}${e[e.length-1][0]}`.toUpperCase():e[0].substring(0,2).toUpperCase()}return r.username?r.username.substring(0,2).toUpperCase():r.email?r.email.substring(0,2).toUpperCase():"??"})()})]})})}),c.jsxs(hj,{align:"end",className:"w-56",children:[c.jsx(gj,{children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:i?"Loading...":o()}),c.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r?.email||"user@example.com"})]})}),c.jsx(xj,{}),c.jsx(mj,{asChild:!0,children:c.jsxs(dn,{to:"/profile",className:"cursor-pointer",children:[c.jsx(hx,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:t("common.profile")})]})}),c.jsx(mj,{asChild:!0,children:c.jsxs(dn,{to:"/settings/profile",className:"cursor-pointer",children:[c.jsx(Og,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:t("common.settings")})]})}),c.jsx(xj,{}),c.jsxs(mj,{onClick:async()=>{_s(!0);try{await di.logout(),s.clear(),Gs.removeMatching?Gs.removeMatching("^command-palette-recent"):Gs.remove("command-palette-recent"),a({title:t("common.success"),description:t("auth.logoutSuccess")})}catch(e){s.clear(),Gs.removeMatching?Gs.removeMatching("^command-palette-recent"):Gs.remove("command-palette-recent"),a({title:t("common.success"),description:"Logged out locally"})}n({to:"/login"})},children:[c.jsx(Xf,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:t("common.logout")})]})]})]})}class TG{async fetchNavigation(){return Ls("/api/v1/navigation",{method:"GET",requiresAuth:!0})}}const MG=["navigation","v2"];function DG(e,t){return Ya({queryKey:MG,queryFn:()=>e.fetchNavigation(),staleTime:9e5,enabled:void 0===t?.enabled||t.enabled})}const LG={Home:Df,LayoutDashboard:Uf,Users:px,Settings:Og,Layout:mg,Boxes:Op,User:hx,Bell:Ip,Palette:dg,Languages:Bf,Shield:$g,Warehouse:fx,Sliders:Vg,ClipboardList:uf,TrendingUp:rx,MapPin:Jf,Building2:$p,ShoppingCart:Ug,Ticket:nx,Search:Ig,Calendar:Hp,Building:Up,DollarSign:xf};function FG(e){if(e)return LG[e]||void 0}function IG(e){return e?"/"===e?"/":e.endsWith("/")?e.slice(0,-1):e:""}function OG(e,t){if(!t)return!1;const n=IG(t),a=IG(e);return"/"===n?"/"===a:a===n||a.startsWith(`${n}/`)}function zG(e,t){const n=FG(e.icon)||Uf,a=Array.isArray(e.children)?e.children.filter(t=>{if(!t?.path)return!1;const n=IG(t.path)===IG(e.path),a=(t.label||"").trim()===(e.label||"").trim();return!(n||a&&n)}):[],s=a.map(a=>{const s=FG(a.icon)||n,r=OG(t,a.path),i=Array.isArray(a.children)&&a.children.length>0;return c.jsx("li",{children:c.jsxs(dn,{to:a.path,className:"group flex items-start gap-3 rounded-lg px-3 py-2 transition-colors duration-150 "+(r?"bg-primary/10 text-primary":"hover:bg-accent/40 hover:text-accent-foreground"),children:[c.jsx("span",{className:"mt-0.5 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-md border transition-colors duration-150 "+(r?"border-primary/40 bg-primary/10 text-primary":"border-border/60 bg-background text-muted-foreground group-hover:border-border group-hover:bg-accent group-hover:text-accent-foreground"),children:c.jsx(s,{className:"h-5 w-5"})}),c.jsxs("span",{className:"flex flex-1 flex-col gap-1",children:[c.jsx("span",{className:"text-sm font-medium",children:a.label}),a.description?c.jsx("span",{className:"text-xs leading-snug text-muted-foreground",children:a.description}):null]}),i&&c.jsx(Jp,{className:"h-3.5 w-3.5 text-muted-foreground/70"})]})},`${e.path}-${a.path}`)});return c.jsx("div",{className:"flex w-[420px] flex-col gap-3 p-4 sm:w-[460px]",children:a.length>0?c.jsx("ul",{className:"flex flex-col gap-1.5",children:s}):c.jsxs(dn,{to:e.path,className:"group flex items-center justify-between rounded-lg border border-border/70 px-3 py-2 text-sm font-medium transition-colors duration-150 hover:border-border hover:bg-accent/40 hover:text-accent-foreground",children:[c.jsxs("span",{children:["Open ",e.label]}),c.jsx(Jp,{className:"h-3.5 w-3.5 text-muted-foreground/70 group-hover:text-accent-foreground"})]})})}function BG(){const e=Mn(),t=p.useMemo(()=>new TG,[]),{data:n}=Ya({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser()}),{data:a}=DG(t,{enabled:!!n}),s=a??[];return s.length?c.jsxs(B_,{children:[c.jsx($_,{children:s.map(t=>{const n=FG(t.icon)||Uf,a=Array.isArray(t.children)&&t.children.length>0,s=OG(e.pathname,t.path);return a?c.jsxs(U_,{children:[c.jsxs(q_,{className:"group inline-flex items-center gap-1.5 rounded-md px-2.5 py-1 text-xs font-medium transition-colors duration-150 "+(s?"text-primary":"text-muted-foreground hover:text-foreground"),children:[c.jsx(n,{className:"h-3.5 w-3.5","aria-hidden":"true"}),c.jsx("span",{children:t.label})]}),c.jsx(H_,{className:"rounded-lg border border-border/60 bg-background/95 shadow-lg",children:zG(t,e.pathname)})]},t.path):c.jsx(U_,{children:c.jsx(G_,{asChild:!0,children:c.jsxs(dn,{to:t.path,className:"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1 text-xs font-medium transition-colors duration-150 "+(s?"text-primary":"text-muted-foreground hover:text-foreground"),children:[c.jsx(n,{className:"h-3.5 w-3.5","aria-hidden":"true"}),c.jsx("span",{children:t.label})]})})},t.path)})}),c.jsx(K_,{className:"rounded-lg border border-border/60 bg-background/95 shadow-lg"})]}):c.jsx(B_,{children:c.jsx($_,{children:c.jsx(U_,{children:c.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"Loading"})})})})}function $G({onCommandPaletteOpen:e}){const{t:t}=fr(),{theme:n,resolvedTheme:a,setTheme:s}=CG(),[r,i]=p.useState(()=>Gs.get("tab_position")??"separate");p.useEffect(()=>{const e=e=>{i(e.detail.position)};return window.addEventListener("tab-position-changed",e),()=>{window.removeEventListener("tab-position-changed",e)}},[]);const o=()=>{s("system"===n?"dark"===a?"light":"dark":"dark"===n?"light":"dark")},l="undefined"!=typeof navigator&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"":"Ctrl";return c.jsx("header",{className:"sticky-header w-full border-b border-border/40 bg-background/95 backdrop-blur-xl supports-[backdrop-filter]:bg-background/80",children:"inline"===r?c.jsxs("div",{className:"container flex h-12 items-center justify-between px-4 sm:px-6",children:[c.jsxs("div",{className:"flex gap-3 items-center flex-1 min-w-0",children:[c.jsx(dn,{to:"/",className:"flex items-center group flex-shrink-0",children:c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"font-semibold text-lg tracking-tight text-foreground group-hover:text-primary transition-colors duration-200",children:"Hello Ticket"}),c.jsx("div",{className:"absolute -bottom-0.5 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"})]})}),c.jsx("div",{className:"hidden lg:flex flex-shrink-0",children:c.jsx(BG,{})}),c.jsx(bl,{variant:"ghost",size:"icon",className:"h-8 w-8 lg:hidden",onClick:()=>e?.(),"aria-label":"Open quick navigation",children:c.jsx(ag,{className:"h-4 w-4"})}),c.jsx("div",{className:"flex items-center gap-1.5 max-w-[500px] min-w-0 flex-1",children:c.jsx(AG,{inline:!0})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[c.jsxs(bl,{variant:"outline",className:"relative h-8 w-full justify-start text-sm text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-all duration-200 sm:pr-8 md:w-32 lg:w-40 border-border/50 hover:border-border min-w-[80px]",onClick:e,children:[c.jsx(Ig,{className:"mr-2 h-4 w-4 flex-shrink-0"}),c.jsx("span",{className:"hidden sm:inline-flex truncate",children:"Search..."}),c.jsx("span",{className:"inline-flex sm:hidden",children:"Search"}),c.jsxs("kbd",{className:"pointer-events-none absolute right-1 top-1 hidden h-5 select-none items-center gap-0.5 rounded border bg-muted px-1 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[c.jsx("span",{className:"text-[9px]",children:l}),"K"]})]}),c.jsx(NG,{}),c.jsx(bl,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent/50 transition-all duration-200",onClick:o,"aria-label":t("theme.toggle"),children:"dark"===a?c.jsx(Jg,{className:"h-4 w-4"}):c.jsx(og,{className:"h-4 w-4"})}),c.jsx(RG,{})]})]}):c.jsxs("div",{className:"container flex h-12 items-center justify-between px-4 sm:px-6",children:[c.jsxs("div",{className:"flex gap-3 items-center",children:[c.jsx(dn,{to:"/",className:"flex items-center group",children:c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"font-semibold text-lg tracking-tight text-foreground group-hover:text-primary transition-colors duration-200",children:"Hello Ticket"}),c.jsx("div",{className:"absolute -bottom-0.5 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"})]})}),c.jsx("div",{className:"hidden lg:flex",children:c.jsx(BG,{})}),c.jsx(bl,{variant:"ghost",size:"icon",className:"h-8 w-8 lg:hidden",onClick:()=>e?.(),"aria-label":"Open quick navigation",children:c.jsx(ag,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsxs(bl,{variant:"outline",className:"relative h-8 w-full justify-start text-sm text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-all duration-200 sm:pr-8 md:w-32 lg:w-40 border-border/50 hover:border-border min-w-[80px]",onClick:e,children:[c.jsx(Ig,{className:"mr-2 h-4 w-4 flex-shrink-0"}),c.jsx("span",{className:"hidden sm:inline-flex truncate",children:"Search..."}),c.jsx("span",{className:"inline-flex sm:hidden",children:"Search"}),c.jsxs("kbd",{className:"pointer-events-none absolute right-1 top-1 hidden h-5 select-none items-center gap-0.5 rounded border bg-muted px-1 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[c.jsx("span",{className:"text-[9px]",children:l}),"K"]})]}),c.jsx(NG,{}),c.jsx(bl,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent/50 transition-all duration-200",onClick:o,"aria-label":t("theme.toggle"),children:"dark"===a?c.jsx(Jg,{className:"h-4 w-4"}):c.jsx(og,{className:"h-4 w-4"})}),c.jsx(RG,{})]})]})})}const UG="scroll_positions";function VG(){const e=Mn().pathname;p.useEffect(()=>{const t=()=>{(document.body.scrollTop||document.documentElement.scrollTop)&&function(e,t){const n=JSON.parse(localStorage.getItem(UG)||"{}");n[e]=t,localStorage.setItem(UG,JSON.stringify(n))}(e,window.scrollY)},n=function(e){return JSON.parse(localStorage.getItem(UG)||"{}")[e]||0}(e),a=setTimeout(()=>{window.scrollTo({top:n,behavior:"instant"})},0);return function(){const e=JSON.parse(localStorage.getItem(UG)||"{}");localStorage.setItem(UG,JSON.stringify(e))}(),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("beforeunload",t),()=>{clearTimeout(a),window.removeEventListener("scroll",t),window.removeEventListener("beforeunload",t),t()}},[e])}function qG({open:e,onOpenChange:t,dataTypes:n,navigationItems:a,quickActions:s,userId:r}){return c.jsx(gA,{open:e,onOpenChange:t,dataTypes:n,userId:r,navigationItems:a,quickActions:s})}const HG={user:{extractName:e=>(e=>{if(e.firstName&&e.lastName)return`${e.firstName} ${e.lastName}`;if(e.firstName)return e.firstName;if(e.lastName)return e.lastName;if(e.username)return e.username;if(e.email){const[t]=e.email.split("@");return t||e.email}return"Unknown User"})(e),fallbackName:"Unknown User"}};const GG=e=>function(e,t){const n=HG[t],a=(0,n.extractName)(e)||n.fallbackName||"Unknown";return{...e,name:a}}(e,"user"),KG={user:HG.user.extractName};function WG({icon:e,displayName:t,subtitle:n,badge:a,searchValue:s,itemKey:r,itemId:i,onSelect:o}){return c.jsxs(ON,{value:s,onSelect:o,children:[c.jsx(e,{className:"mr-2 h-4 w-4"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm",children:t}),n&&c.jsx("span",{className:"text-xs text-muted-foreground",children:n})]}),a&&c.jsx(NC,{variant:"outline",className:"ml-auto text-[10px]",children:a})]},`${r}-${i}`)}function QG(e){const{key:t,name:n,icon:a,scope:s,fetcher:r,navigateTo:i,renderItem:o,getSearchValue:l,getDisplayName:d,getSubtitle:u,getBadge:h}=e;return{key:t,name:n,icon:a,scope:s,fetcher:r,renderItem:o?(e,t)=>o(e,t):(e,n)=>{const s=e,r=d?.(s)??e.name??"Unknown",i=u?.(s)??null,o=h?.(s)??null,m=l?.(s)??`${t}-${e.id}-${r}`;return c.jsx(WG,{icon:a,displayName:r,subtitle:i,badge:o,searchValue:m,itemKey:t,itemId:e.id,onSelect:n})},getSearchValue:l?e=>l(e):e=>{const n=e,a=d?.(n)??e.name??"",s=u?.(n)??"";return`${t}-${e.id}-${a}-${s}`.toLowerCase()},navigateTo:i}}const YG=e=>QG({key:"customers",name:"Customers",icon:px,scope:"customers",fetcher:e,navigateTo:"/sales/customers/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.code||null,getSearchValue:e=>{const t=e.code||e.id,n=e.name||t;return`customer-${e.id}-${t}-${n}`}}),XG=e=>QG({key:"employees",name:"Employees",icon:dx,scope:"employees",fetcher:e,navigateTo:"/sales/employees/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.job_title||e.department||null,getBadge:e=>e.employment_type||null,getSearchValue:e=>`employee-${e.name}-${e.code||""}-${e.work_email||""}`}),ZG=e=>QG({key:"bookings",name:"Bookings",icon:nx,scope:"bookings",fetcher:e,navigateTo:"/sales/bookings/$id",getDisplayName:e=>e.booking_number||String(e.id),getSubtitle:e=>e.status||null,getBadge:e=>e.payment_status||null,getSearchValue:e=>`booking-${e.booking_number}-${e.id}-${e.status||""}`}),JG=e=>QG({key:"venues",name:"Venues",icon:$p,scope:"venues",fetcher:e,navigateTo:"/ticketing/venues/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.city||e.venue_type||null,getBadge:e=>e.capacity?`${e.capacity} seats`:null,getSearchValue:e=>`venue-${e.name}-${e.code||""}-${e.city||""}-${e.venue_type||""}`}),eK=e=>QG({key:"shows",name:"Shows",icon:kf,scope:"shows",fetcher:e,navigateTo:"/ticketing/shows/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.organizer?.name||e.started_date||null,getBadge:e=>e.started_date||null,getSearchValue:e=>`show-${e.name}-${e.code||""}-${e.organizer?.name||""}`}),tK=e=>QG({key:"organizers",name:"Organizers",icon:Xg,scope:"organizers",fetcher:e,navigateTo:"/ticketing/organizers/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.email||e.city||null,getSearchValue:e=>`organizer-${e.name}-${e.code||""}-${e.email||""}`});function nK(e){const t=Yt(),n=zF(),a=SI(),s=vG(),r=qH(),i=bO(),o=zO(),l=KO(),c=p.useMemo(()=>new TG,[]),{data:d}=Ya({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser(),enabled:e}),u=d?.id||d?.sub||void 0,{data:h}=DG(c,{enabled:!!u}),{fetchUsers:m,fetchCustomers:f,fetchEmployees:g,fetchBookings:x,fetchVenues:v,fetchShows:y,fetchOrganizers:b}=(e=>{const{userService:t,customerService:n,employeeService:a,bookingService:s,venueService:r,showService:i,organizerService:o}=e;return{fetchUsers:p.useCallback(async e=>(await t.searchUsers(e?.trim(),10)??[]).map(GG),[t]),fetchCustomers:p.useCallback(async e=>(await n.fetchCustomers({search:e?.trim(),skip:0,limit:10})).data??[],[n]),fetchEmployees:p.useCallback(async e=>await a.searchEmployees(e?.trim(),10)??[],[a]),fetchBookings:p.useCallback(async e=>(await s.searchBookings(e?.trim(),10)??[]).map(e=>({...e,name:e.booking_number})),[s]),fetchVenues:p.useCallback(async e=>await r.searchVenues(e?.trim(),10)??[],[r]),fetchShows:p.useCallback(async e=>await i.searchShows(e?.trim(),10)??[],[i]),fetchOrganizers:p.useCallback(async e=>await o.searchOrganizers(e?.trim(),10)??[],[o])}})({userService:n,customerService:a,employeeService:s,bookingService:r,venueService:i,showService:o,organizerService:l}),w=p.useMemo(()=>{return[(e=m,QG({key:"users",name:"Users",icon:hx,scope:"users",fetcher:e,navigateTo:"/users/$id",getDisplayName:e=>e.name??KG.user(e),getSubtitle:e=>e.email||null,getBadge:e=>e.role||null,getSearchValue:e=>`user-${e.name??KG.user(e)}-${e.email||""}`})),YG(f),XG(g),ZG(x),JG(v),eK(y),tK(b)];var e},[m,f,g,x,v,y,b]),S=p.useMemo(()=>(e=>{if(!e)return;const t=(e,n)=>e.flatMap(e=>{const a=n?.fallbackIcon??Uf,s=FG(e.icon)||a,r=(e.label||e.path||"nav-item").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),i=n?.slugPrefix?`${n.slugPrefix}-${r}`:r;return[{icon:s,label:e.label,value:`nav-${i}`,path:e.path,shortcut:e.shortcut,description:e.description,keywords:e.keywords,parentLabel:n?.parentLabel},...Array.isArray(e.children)?t(e.children,{parentLabel:e.label,slugPrefix:i,fallbackIcon:s}):[]]});return t(e)})(h),[h]),j=p.useMemo(()=>function(e){return[{icon:hx,label:"Add New User",value:"action-add-user",keywords:["user","usr","people","person"],action:()=>{e&&e({to:"/users?action=create"})}},{icon:Ug,label:"Add New Customer",value:"action-add-customer",keywords:["customer","cust","client","cus"],action:()=>{e&&e({to:"/sales/customers?action=create"})}},{icon:dx,label:"Add New Employee",value:"action-add-employee",keywords:["employee","emp","staff","worker"],action:()=>{e&&e({to:"/sales/employees?action=create"})}},{icon:nx,label:"Add New Booking",value:"action-add-booking",keywords:["booking","book","reservation","order"],action:()=>{e&&e({to:"/sales/bookings?action=create"})}},{icon:kf,label:"Add New Show",value:"action-add-show",keywords:["show","event","concert"],action:()=>{e&&e({to:"/ticketing/shows?action=create"})}},{icon:$p,label:"Add New Venue",value:"action-add-venue",keywords:["venue","location","place","theater"],action:()=>{e&&e({to:"/ticketing/venues?action=create"})}},{icon:Xg,label:"Add New Organizer",value:"action-add-organizer",keywords:["organizer","org","promoter"],action:()=>{e&&e({to:"/ticketing/organizers?action=create"})}},{icon:Rg,label:"Invalidate Query Cache",value:"action-invalidate-cache",keywords:["cache","clear","invalidate","refresh","reset"],action:()=>{os.queryClient&&os.queryClient.clear(),cF().catch(e=>{})}}]}(t),[t]);return{dataTypes:w,navigationItems:S,quickActions:j,userId:u}}function aK({children:e}){const t=Yt(),n=Mn(),{open:a,setOpen:s}=function(e){const[t,n]=p.useState(!1);return p.useEffect(()=>{const a=a=>{if("k"===a.key&&(a.metaKey||a.ctrlKey))return a.preventDefault(),a.stopPropagation(),void n(e=>!e);if(!t&&e){if("h"===a.key&&(a.metaKey||a.ctrlKey))return a.preventDefault(),a.stopPropagation(),void e({to:"/"});if("d"===a.key&&(a.metaKey||a.ctrlKey))return a.preventDefault(),a.stopPropagation(),void e({to:"/dashboard"});if("u"===a.key&&(a.metaKey||a.ctrlKey))return a.preventDefault(),a.stopPropagation(),void e({to:"/users"});if(","===a.key&&(a.metaKey||a.ctrlKey))return a.preventDefault(),a.stopPropagation(),void e({to:"/settings"})}};return document.addEventListener("keydown",a,!0),()=>{document.removeEventListener("keydown",a,!0)}},[t,e]),{open:t,setOpen:n}}(t),{dataTypes:r,navigationItems:i,quickActions:o,userId:l}=nK(a),[d,u]=p.useState(()=>Gs.get("tab_position")??"separate");return p.useEffect(()=>{if("/change-password"===n.pathname)return;di.getMustChangePassword()&&di.isAuthenticated()&&t({to:"/change-password"})},[n.pathname,t]),p.useEffect(()=>{document.title="Hello Ticket"},[]),VG(),p.useEffect(()=>{const e=e=>{u(e.detail.position)};return window.addEventListener("tab-position-changed",e),()=>{window.removeEventListener("tab-position-changed",e)}},[]),c.jsxs("div",{className:"min-h-screen bg-background min-w-[1024px]",children:[c.jsx($G,{onCommandPaletteOpen:()=>s(!0)}),"separate"===d&&c.jsx(AG,{}),c.jsx("main",{className:"container py-3",children:e}),c.jsx(qG,{open:a,onOpenChange:s,dataTypes:r,navigationItems:i,quickActions:o,userId:l})]})}const sK=mn("/users")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});function rK(){const{showSessionExpiredDialog:e}=function(){const e=p.useContext(YL);if(void 0===e)throw new Error("useSession must be used within a SessionProvider");return e}();p.useEffect(()=>{di.isAuthenticated()||e()},[e])}function iK(){const{t:e}=fr();rK();const{data:t,isLoading:n,error:a}=Ya({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser()});if(n)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e("pages.profile.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.profile.loading")})]}),c.jsx(Sl,{children:c.jsx(Nl,{className:"pt-6",children:c.jsx("div",{className:"flex items-center justify-center h-40",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})})]});if(a||!t)return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e("pages.profile.title")})}),c.jsx(Sl,{children:c.jsx(Nl,{className:"pt-6",children:c.jsx("div",{className:"text-center text-destructive",children:e("pages.profile.error")})})})]});const s=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",r=(()=>{if(!t)return"";if("name"in t&&t.name)return t.name;return`${("first_name"in t?t.first_name:"")||""} ${("last_name"in t?t.last_name:"")||""}`.trim()||t.username||t.email})(),i=t.role||"";return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e("pages.profile.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.profile.subtitle")})]}),c.jsx(Sl,{children:c.jsx(jl,{children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(SC,{className:"h-20 w-20",children:[c.jsx(jC,{src:"",alt:r}),c.jsx(CC,{className:"text-2xl",children:(o=r,o?o.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"??")})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx(Cl,{className:"text-2xl",children:r}),c.jsxs(kl,{className:"text-base",children:["@",t.username]})]}),c.jsx(NC,{variant:"secondary",className:"h-fit",children:s(i)})]})})}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs(Sl,{children:[c.jsx(jl,{children:c.jsxs(Cl,{className:"flex items-center gap-2",children:[c.jsx(Zf,{className:"h-5 w-5"}),e("pages.profile.contactInfo")]})}),c.jsxs(Nl,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.email")}),c.jsx("p",{className:"text-base",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.username")}),c.jsxs("p",{className:"text-base",children:["@",t.username]})]})]})]}),c.jsxs(Sl,{children:[c.jsx(jl,{children:c.jsxs(Cl,{className:"flex items-center gap-2",children:[c.jsx($g,{className:"h-5 w-5"}),e("pages.profile.accountInfo")]})}),c.jsxs(Nl,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.userId")}),c.jsx("p",{className:"font-mono text-sm",children:t.id||t.sub||"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.role")}),c.jsx("p",{className:"text-base",children:s(i)})]}),t.tenant_id&&c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-muted-foreground",children:[c.jsx($p,{className:"inline h-4 w-4 mr-1"}),e("pages.profile.tenantId")]}),c.jsx("p",{className:"font-mono text-sm",children:t.tenant_id})]})]})]})]}),c.jsxs(Sl,{children:[c.jsx(jl,{children:c.jsxs(Cl,{className:"flex items-center gap-2",children:[c.jsx(hx,{className:"h-5 w-5"}),e("pages.profile.additionalInfo")]})}),c.jsx(Nl,{children:c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.displayName")}),c.jsx("p",{className:"text-base",children:r})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.accountStatus")}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),c.jsx("span",{className:"text-base",children:e("pages.profile.active")})]})]})]})})]})]});var o}const oK=mn("/profile")({component:function(){return c.jsx(aK,{children:c.jsx(iK,{})})}});function lK(){return rK(),c.jsxs("div",{className:"container mx-auto space-y-6 p-6",children:[c.jsx(wT,{title:"My Page",description:"Example page"}),c.jsxs("div",{className:"rounded-lg border bg-card p-6 text-card-foreground shadow-sm",children:[c.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Welcome"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"This is a sample page."})]})]})}const cK=mn("/my-page")({component:function(){return c.jsx(aK,{children:c.jsx(lK,{})})}});function dK(){const{t:e}=fr();return c.jsxs(Sl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(jl,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"h-20 w-20 rounded-full bg-destructive/10 flex items-center justify-center",children:c.jsx(sf,{className:"h-10 w-10 text-destructive"})})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-6xl font-bold text-muted-foreground",children:"404"}),c.jsx(Cl,{className:"text-2xl",children:e("pages.notFound.title")}),c.jsx(kl,{className:"text-base",children:e("pages.notFound.message")})]})]}),c.jsxs(Nl,{className:"space-y-3",children:[c.jsx(bl,{asChild:!0,className:"w-full",size:"lg",children:c.jsxs(dn,{to:"/",children:[c.jsx(Df,{className:"mr-2 h-4 w-4"}),e("pages.notFound.goHome")]})}),c.jsxs(bl,{variant:"outline",className:"w-full",size:"lg",onClick:()=>window.history.back(),children:[c.jsx(Tp,{className:"mr-2 h-4 w-4"}),e("pages.notFound.goBack")]})]})]})}function uK({children:e}){const{theme:t,resolvedTheme:n,setTheme:a}=CG();return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted",children:[c.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:c.jsx("span",{className:"text-primary-foreground font-bold text-lg",children:"T"})}),c.jsx("span",{className:"font-semibold text-lg",children:"Truths"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(NG,{}),c.jsx(bl,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>{a("system"===t?"dark"===n?"light":"dark":"dark"===t?"light":"dark")},children:"dark"===n?c.jsx(Jg,{className:"h-4 w-4"}):c.jsx(og,{className:"h-4 w-4"})})]})]}),c.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-center text-sm text-muted-foreground",children:c.jsx("p",{children:" 2025 Truths. All rights reserved."})})]})}const hK=mn("/$")({component:function(){return c.jsx(uK,{children:c.jsx(dK,{})})}});function mK(){const{t:e}=fr(),[t,n]=p.useState(null),[a,s]=p.useState([]),[r,i]=p.useState(!0),[o,l]=p.useState(null),[d,u]=p.useState("30");rK();const h=p.useCallback(async()=>{try{i(!0),l(null);const e=(e=>{const t=new Date,n=new Date;switch(e){case"7":n.setDate(t.getDate()-7);break;case"30":default:n.setDate(t.getDate()-30);break;case"thisMonth":n.setDate(1);break;case"lastMonth":n.setMonth(n.getMonth()-1),n.setDate(1),t.setDate(0);break;case"year":n.setMonth(0,1)}return{start_date:n.toISOString(),end_date:t.toISOString()}})(d),[t,a]=await Promise.all([WP.getAnalytics(e),WP.getRevenueAnalytics({...e,group_by:"month"}).catch(()=>[])]);n(t),s(a)}catch(GQ){l("Failed to load dashboard data")}finally{i(!1)}},[d]);p.useEffect(()=>{h()},[d,h]);return r&&!t?c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:e("pages.home.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.home.subtitle")})]}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((e,t)=>c.jsxs(Sl,{children:[c.jsxs(jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(Tv,{className:"h-4 w-24"}),c.jsx(Tv,{className:"h-4 w-4"})]}),c.jsxs(Nl,{children:[c.jsx(Tv,{className:"h-8 w-16 mb-2"}),c.jsx(Tv,{className:"h-3 w-20"})]})]},t))}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[...Array(3)].map((e,t)=>c.jsx(Tv,{className:"h-64 w-full"},t))})]}):o||!t?c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:e("pages.home.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.home.subtitle")})]}),c.jsx(Sl,{children:c.jsxs(Nl,{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(Sp,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Unable to Load Dashboard"}),c.jsx("p",{className:"text-muted-foreground text-center mb-4",children:o||"Something went wrong while loading your dashboard data."}),c.jsxs(bl,{onClick:h,variant:"outline",children:[c.jsx(Ag,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]}):c.jsx("div",{className:"space-y-8",children:c.jsxs(gy,{defaultValue:"overview",className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h3",{className:"text-2xl font-bold",children:e("pages.home.title")})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs(xy,{className:"inline-flex h-8 items-center justify-center rounded-md bg-muted p-0.5 text-muted-foreground",children:[c.jsxs(vy,{value:"overview",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm gap-1.5 hover:bg-muted/50",title:"View dashboard overview with key metrics and recent activity",children:[c.jsx(Df,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),c.jsxs(vy,{value:"analytics",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm gap-1.5 hover:bg-muted/50",title:"Detailed analytics and performance metrics",children:[c.jsx(Qp,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]}),c.jsxs(vy,{value:"operations",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm gap-1.5 hover:bg-muted/50",title:"Operational insights and status distributions",children:[c.jsx(Og,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Operations"})]})]}),c.jsxs(bx,{value:d,onValueChange:u,disabled:r,children:[c.jsx(Sx,{className:"w-[120px] h-7",children:c.jsx(wx,{placeholder:"Period"})}),c.jsxs(kx,{children:[c.jsx(Nx,{value:"7",children:"7 Days"}),c.jsx(Nx,{value:"30",children:"30 Days"}),c.jsx(Nx,{value:"thisMonth",children:"This Month"}),c.jsx(Nx,{value:"lastMonth",children:"Last Month"}),c.jsx(Nx,{value:"year",children:"YTD"})]})]}),c.jsx(bl,{onClick:h,variant:"outline",size:"sm",disabled:r,className:"h-7 w-7 p-0",children:c.jsx(Ag,{className:"h-3.5 w-3.5 "+(r?"animate-spin":"")})})]})]}),c.jsxs(yy,{value:"overview",className:"space-y-8",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[c.jsx(lA,{title:"Total Events",value:WP.formatNumber(t.total_events),change:t.events_growth,changeType:t.events_growth>0?"positive":"negative",icon:c.jsx(Hp,{className:"h-4 w-4 text-muted-foreground"}),description:`${t.upcoming_events} upcoming, ${t.active_events} active`}),c.jsx(lA,{title:"Total Bookings",value:WP.formatNumber(t.total_bookings),change:t.bookings_growth,changeType:t.bookings_growth>0?"positive":"negative",icon:c.jsx(nx,{className:"h-4 w-4 text-muted-foreground"}),description:`${t.bookings_this_month} this month`}),c.jsx(lA,{title:"Total Revenue",value:WP.formatCurrency(t.total_revenue),change:t.revenue_growth,changeType:t.revenue_growth>0?"positive":"negative",icon:c.jsx(xf,{className:"h-4 w-4 text-muted-foreground"}),description:`${WP.formatCurrency(t.revenue_this_month)} this month`}),c.jsx(lA,{title:"Active Customers",value:WP.formatNumber(t.active_customers),change:t.customers_growth,changeType:t.customers_growth>0?"positive":"negative",icon:c.jsx(px,{className:"h-4 w-4 text-muted-foreground"}),description:`${t.new_customers_this_month} new this month`})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[c.jsx("div",{className:"col-span-4",children:c.jsx(IL,{data:a.map(e=>({label:e.period,value:e.revenue})),title:"Revenue Overview",height:350,color:"#22c55e"})}),c.jsx("div",{className:"col-span-3",children:c.jsxs(Sl,{className:"h-full",children:[c.jsxs(jl,{children:[c.jsx(Cl,{children:"Top Performers"}),c.jsx(kl,{children:"Leading shows by revenue"})]}),c.jsx(Nl,{children:c.jsxs("div",{className:"space-y-4",children:[t.top_shows_by_revenue.slice(0,5).map((e,t)=>c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(NC,{variant:"outline",className:"w-6 h-6 p-0 flex items-center justify-center",children:t+1}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:e.show_name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:WP.formatCurrency(e.revenue)})]})]})},e.show_id)),c.jsx(bl,{variant:"ghost",size:"sm",className:"w-full mt-4",asChild:!0,children:c.jsxs(dn,{to:"/ticketing/shows",children:["View All Shows ",c.jsx(Mp,{className:"h-4 w-4 ml-2"})]})})]})})]})})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsx(cA,{activities:(e=>{const t=[];return e.recent_events.forEach(e=>{t.push({id:`event-${e.id}`,type:"info",title:`Event Created: ${e.title}`,description:`Status: ${e.status}`,timestamp:new Date(e.created_at).toLocaleDateString()})}),e.recent_bookings.forEach(e=>{t.push({id:`booking-${e.id}`,type:"success",title:`New Booking: ${e.customer_name}`,description:`${WP.formatCurrency(e.total_amount)} - ${e.status}`,timestamp:new Date(e.created_at).toLocaleDateString()})}),e.recent_payments.forEach(e=>{t.push({id:`payment-${e.id}`,type:"success",title:"Payment Received",description:`${WP.formatCurrency(e.amount)} - ${e.status}`,timestamp:new Date(e.created_at).toLocaleDateString()})}),t.slice(0,10)})(t),maxItems:6}),c.jsxs(Sl,{children:[c.jsxs(jl,{children:[c.jsxs(Cl,{className:"flex items-center gap-2",children:[c.jsx(Sp,{className:"h-5 w-5"}),"Action Center"]}),c.jsx(kl,{children:"Items ensuring your attention"})]}),c.jsxs(Nl,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:"Draft Events"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.event_status_breakdown.draft||0," shows pending publication"]})]}),c.jsx(bl,{variant:"outline",size:"sm",asChild:!0,children:c.jsx(dn,{to:"/ticketing/shows",children:"Review"})})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:"Pending Bookings"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.booking_status_breakdown.pending||0," orders awaiting confirmation"]})]}),c.jsx(bl,{variant:"outline",size:"sm",asChild:!0,children:c.jsx(dn,{to:"/sales/bookings",children:"Process"})})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:"New Customers"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.new_customers_this_month||0," joined this month"]})]}),c.jsx(bl,{variant:"ghost",size:"sm",asChild:!0,children:c.jsx(dn,{to:"/sales/customers",children:"View"})})]})]})]})]})]}),c.jsxs(yy,{value:"analytics",className:"space-y-4",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsx(IL,{data:a.map(e=>({label:e.period,value:e.revenue})),title:"Revenue Trends",height:350,color:"#22c55e"}),c.jsx(IL,{data:a.map(e=>({label:e.period,value:e.bookings_count})),title:"Booking Volume Trends",height:350,color:"#3b82f6"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsx(FL,{data:t.top_events_by_bookings.map(e=>({label:e.event_title.length>15?`${e.event_title.slice(0,15)}...`:e.event_title,value:e.bookings_count})),title:"Top Events by Bookings",height:300}),c.jsxs(Sl,{className:"col-span-1",children:[c.jsx(jl,{children:c.jsx(Cl,{children:"Ticket Type Distribution"})}),c.jsx(Nl,{className:"flex items-center justify-center h-[250px]",children:c.jsx("p",{className:"text-muted-foreground text-sm",children:"Select an event to view breakdown"})})]}),c.jsxs(Sl,{className:"col-span-1",children:[c.jsx(jl,{children:c.jsx(Cl,{children:"Key Metrics"})}),c.jsxs(Nl,{className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Average Ticket Price"}),c.jsx("span",{className:"text-2xl font-bold",children:t.average_ticket_price>0?WP.formatCurrency(t.average_ticket_price):"$0.00"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),c.jsx("span",{className:"text-2xl font-bold",children:t.active_users})]})]})]})]})]}),c.jsx(yy,{value:"operations",className:"space-y-4",children:c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsx(OL,{data:(m=t,Object.entries(m.event_status_breakdown).map(([e,t])=>({label:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," "),value:t,color:"published"===e?"#22c55e":"draft"===e?"#f59e0b":"cancelled"===e?"#ef4444":"#6b7280"}))),title:"Event Status Distribution",height:300}),c.jsx(OL,{data:(e=>Object.entries(e.booking_status_breakdown).map(([e,t])=>({label:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," "),value:t,color:"confirmed"===e?"#22c55e":"pending"===e?"#f59e0b":"cancelled"===e?"#ef4444":"#6b7280"})))(t),title:"Booking Status Distribution",height:300}),c.jsxs(Sl,{children:[c.jsxs(jl,{children:[c.jsx(Cl,{children:"Top Venues"}),c.jsx(kl,{children:"By number of events"})]}),c.jsx(Nl,{children:c.jsx("div",{className:"space-y-4",children:t.top_venues_by_events?.length>0?t.top_venues_by_events.slice(0,5).map((e,t)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(NC,{variant:"secondary",className:"w-5 h-5 p-0 flex items-center justify-center rounded-full text-xs",children:t+1}),c.jsx("span",{className:"font-medium text-sm",children:e.venue_name})]}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.events_count," events"]})]},e.venue_id)):c.jsx("p",{className:"text-sm text-muted-foreground",children:"No venue data available"})})})]})]})})]})});var m}const pK=mn("/")({component:function(){return c.jsx(aK,{children:c.jsx(mK,{})})}});const fK=mn("/users/")({component:function(){rK();const e=Yt(),t=Mn(),n=new URLSearchParams(t.search),a="create"===n.get("action"),s=n.get("tab")||"users";return c.jsx("div",{className:"space-y-4",children:c.jsx(nI,{autoOpenCreate:a,defaultTab:s,onCreateDialogClose:()=>e({to:"/users",search:{}}),onUserClick:t=>e({to:"/users/$id",params:{id:t}}),onRoleClick:e=>{},onGroupClick:e=>{}})})}}),gK=mn("/settings/")({component:()=>c.jsx(Xt,{to:"/settings/profile",replace:!0})});const xK=mn("/users/$id")({component:function(){rK();const{id:e}=Gt({from:"/users/$id"}),t=Yt();return e?c.jsx(UF,{userId:e,onBack:()=>{t({to:"/users"})},onUpdateTabTitle:(t,n)=>{window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/users/${e}`,title:t,iconName:n||"User"}}))}}):null}});const vK=mn("/ticketing/venues")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});const yK=mn("/ticketing/shows")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});const bK=mn("/ticketing/organizers")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});function wK(){const{t:e}=fr(),t=Us();return c.jsxs("div",{className:sl("space-y-6",t.spacingFormSection),children:[c.jsxs(Sl,{children:[c.jsxs(jl,{className:t.spacingFormItem,children:[c.jsxs(Cl,{className:sl("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(Of,{className:t.iconSize}),e("pages.settings.security.changePassword")]}),c.jsx(kl,{className:t.textSizeSmall,children:e("pages.settings.security.changePasswordDesc")})]}),c.jsxs(Nl,{className:sl(t.paddingContainer,t.spacingFormSection),children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"current-password",className:t.textSizeLabel,children:e("pages.settings.security.currentPassword")}),c.jsx(_l,{id:"current-password",type:"password",autoComplete:"current-password",className:sl(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"new-password",className:t.textSizeLabel,children:e("pages.settings.security.newPassword")}),c.jsx(_l,{id:"new-password",type:"password",autoComplete:"new-password",className:sl(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"confirm-password",className:t.textSizeLabel,children:e("pages.settings.security.confirmPassword")}),c.jsx(_l,{id:"confirm-password",type:"password",autoComplete:"new-password",className:sl(t.inputHeight,t.textSize)})]}),c.jsxs(bl,{className:sl(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx(Of,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.security.updatePassword")})]})]})]}),c.jsxs(Sl,{children:[c.jsxs(jl,{className:t.spacingFormItem,children:[c.jsxs(Cl,{className:sl("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx($g,{className:t.iconSize}),e("pages.settings.security.twoFactor")]}),c.jsx(kl,{className:t.textSizeSmall,children:e("pages.settings.security.twoFactorDesc")})]}),c.jsx(Nl,{className:t.paddingContainer,children:c.jsxs(bl,{variant:"outline",className:sl(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx($g,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.security.enableTwoFactor")})]})})]})]})}const SK={sales:rx,default:cg},jK={profile:hx,account:$g,notifications:Ip,appearance:dg,language:Pf,security:Of,"company-addresses":Jf,sales:rx,units:Mg,"customer-types":hx},CK=[{title:"pages.settings.menu.profile",href:"/settings/profile",icon:hx,description:"pages.settings.menu.profileDesc"},{title:"pages.settings.menu.account",href:"/settings/account",icon:$g,description:"pages.settings.menu.accountDesc"},{title:"pages.settings.menu.notifications",href:"/settings/notifications",icon:Ip,description:"pages.settings.menu.notificationsDesc"},{title:"pages.settings.menu.appearance",href:"/settings/appearance",icon:dg,description:"pages.settings.menu.appearanceDesc"},{title:"pages.settings.menu.language",href:"/settings/language",icon:Pf,description:"pages.settings.menu.languageDesc"},{title:"pages.settings.menu.security",href:"/settings/security",icon:Of,description:"pages.settings.menu.securityDesc"},{title:"pages.settings.menu.companyAddresses",href:"/settings/company-addresses",icon:Jf,description:"pages.settings.menu.companyAddressesDesc"}];const kK="settings-menu-collapsed",NK="settings-expanded-menu-items";function _K({children:e}){const{t:t}=fr(),n=Bt(),a=zt(),s=n.location.pathname,[r,i]=p.useState(()=>{if("undefined"!=typeof window){return"true"===localStorage.getItem(kK)}return!1}),[o,l]=p.useState(()=>{if("undefined"!=typeof window){const e=localStorage.getItem(NK);if(e)try{return new Set(JSON.parse(e))}catch{return new Set}}return new Set}),[d,u]=p.useState(""),[h,m]=p.useState(null),[f,g]=p.useState(null),x=p.useRef(null),v=p.useRef(null);p.useEffect(()=>{"undefined"!=typeof window&&localStorage.setItem(kK,String(r))},[r]),p.useEffect(()=>{"undefined"!=typeof window&&localStorage.setItem(NK,JSON.stringify(Array.from(o)))},[o]);const y=p.useCallback(e=>{if(e.includes(".")){const n=t(e);return n!==e?n:e}return e},[t]),b=p.useMemo(()=>{const e=function(e){const t=[];if(!e)return[];try{const n=e,a=n?.routesById;a&&"object"==typeof a&&Object.values(a).forEach(e=>{const n=e?.id||"",a=e?.fullPath||n;if("string"==typeof a&&a.startsWith("/settings/")&&!a.includes("$")){const e=a.replace(/\/$/,"");"/settings"!==e&&t.push(e)}})}catch(n){}return[...new Set(t)].sort()}(a);return function(e=null,t=(e,t)=>t||e){const n=e||["/settings/sales/customer-types"].sort(),a=new Set(CK.map(e=>e.href)),s=n.filter(e=>!a.has(e)&&e.startsWith("/settings/")),r={};s.forEach(e=>{const t=e.replace("/settings/","").split("/").filter(Boolean);if(t.length>=2){const n=t[0],a=e;r[n]||(r[n]=[]),t.length>1&&r[n].push(a)}});const i=Object.entries(r).map(([e,n])=>{const a=SK[e]||SK.default,s=e.charAt(0).toUpperCase()+e.slice(1),r=n.map(e=>{const n=e.split("/").pop()||"",a=n.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return{title:t(`pages.settings.menu.${n}`,a),href:e,icon:jK[n]||hx,description:t(`pages.settings.menu.${n}Desc`,`Manage ${a.toLowerCase()} and related data.`)}}),i=`/settings/${e}`;return{title:t(`pages.settings.menu.${e}`,s),href:i,icon:a,description:t(`pages.settings.menu.${e}Desc`,`Manage ${s.toLowerCase()} settings`),children:r.length>0?r:void 0}});return[...CK,...i.sort((e,t)=>e.href.localeCompare(t.href))]}(e.length>0?e:null,(e,n)=>{const a=n?t(e,{defaultValue:n}):t(e);return"string"==typeof a?a:n||e})},[a,t]);p.useEffect(()=>{b.forEach(e=>{if(e.children){const t=e.children.some(e=>s===e.href||s.startsWith(e.href+"/")),n=!!d&&e.children.some(e=>y(e.title).toLowerCase().includes(d.toLowerCase()));(t||n)&&l(t=>t.has(e.href)?t:new Set([...t,e.href]))}})},[s,d,b,y]);const w=p.useMemo(()=>b.filter(e=>{if(!d)return!0;const t=d.toLowerCase(),n=y(e.title).toLowerCase().includes(t),a=e.children?.some(e=>y(e.title).toLowerCase().includes(t));return n||a}),[b,d,y]);return p.useEffect(()=>{const e=e=>{const t=document.activeElement;if(t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||null!==t.closest("[role='dialog']")||null!==t.closest("[role='combobox']")||null!==t.closest("[role='listbox']")))return;if((e.metaKey||e.ctrlKey)&&"k"===e.key)return e.preventDefault(),void(!r&&x.current&&(x.current.focus(),x.current.select()));const n=v.current&&t&&v.current.contains(t);if(r||!x.current||document.activeElement===x.current||!n||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||"Enter"===e.key||"Tab"===e.key){if(document.activeElement===x.current&&x.current)"Escape"===e.key&&(x.current.blur(),m(null),g(null),u(""));else if(!r)if("ArrowDown"===e.key)if(e.preventDefault(),null!==f){const e=f.parentIndex,t=w[e],n=t.children?.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())})||[];if(f.childIndex<n.length-1)g({parentIndex:f.parentIndex,childIndex:f.childIndex+1});else{const t=e+1;if(t<w.length){const e=w[t];e.children&&o.has(e.href)?g({parentIndex:t,childIndex:0}):(m(t),g(null))}}}else{const e=null===h?0:Math.min(h+1,w.length-1),t=w[e];t.children&&o.has(t.href)?g({parentIndex:e,childIndex:0}):m(e)}else if("ArrowUp"===e.key)if(e.preventDefault(),null!==f)f.childIndex>0?g({parentIndex:f.parentIndex,childIndex:f.childIndex-1}):(m(f.parentIndex),g(null));else{const e=null===h?w.length-1:Math.max(h-1,0),t=w[e];if(t.children&&o.has(t.href)){const n=t.children.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())});g({parentIndex:e,childIndex:n.length-1})}else m(e)}else if("Enter"===e.key||" "===e.key){if(e.preventDefault(),null!==f){const e=w[f.parentIndex],t=(e.children?.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())})||[])[f.childIndex];t&&(window.location.href=t.href)}else if(null!==h){const e=w[h];e.children?l(t=>{const n=new Set(t);return n.has(e.href)?n.delete(e.href):n.add(e.href),n}):window.location.href=e.href}}else"Escape"===e.key&&(m(null),g(null),u(""))}else x.current.focus()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,h,f,w,o,d,y]),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[c.jsxs("aside",{ref:v,className:sl("flex-shrink-0 transition-all duration-300 ease-in-out",r?"w-12 md:w-12":"w-full md:w-52"),children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[!r&&c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ig,{className:"absolute left-1.5 top-1.5 h-3 w-3 text-muted-foreground"}),c.jsx(_l,{ref:x,placeholder:t("common.search","Search..."),value:d,onChange:e=>u(e.target.value),className:"pl-6 h-7 text-xs",onKeyDown:e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key)if(e.preventDefault(),x.current?.blur(),"ArrowDown"===e.key){const e=w[0];e&&(e.children&&o.has(e.href)?g({parentIndex:0,childIndex:0}):m(0))}else{const e=w.length-1,t=w[e];if(t)if(t.children&&o.has(t.href)){const n=t.children.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())});g({parentIndex:e,childIndex:n.length-1})}else m(e)}}})]}),c.jsx(bl,{variant:"ghost",size:"sm",onClick:()=>i(!r),className:"h-7 w-7 p-0 flex-shrink-0","aria-label":r?t("common.expandMenu","Expand menu"):t("common.collapseMenu","Collapse menu"),children:r?c.jsx(Jp,{className:"h-3.5 w-3.5"}):c.jsx(Zp,{className:"h-3.5 w-3.5"})})]}),c.jsx("nav",{className:"space-y-0.5",children:w.map((e,t)=>{const n=e.icon,a=e.children&&e.children.length>0,i=!!a&&e.children.some(e=>s===e.href||s.startsWith(e.href+"/")),u=!i&&(s===e.href||s.startsWith(e.href+"/")),p=i&&(s===e.href||s.startsWith(e.href+"/"));if(r&&a)return c.jsxs(wE,{children:[c.jsx(SE,{asChild:!0,children:c.jsx("button",{className:sl("flex items-center justify-center px-2 py-2 rounded transition-all duration-300 text-xs w-full",u?"bg-primary text-primary-foreground":p?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),title:y(e.title),children:c.jsx(n,{className:"h-4 w-4"})})}),c.jsx(jE,{side:"right",align:"start",className:"w-48 p-1.5",onOpenAutoFocus:e=>e.preventDefault(),children:c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold border-b",children:y(e.title)}),e.children.map(e=>{const t=e.icon,n=s===e.href||s.startsWith(e.href+"/");return c.jsxs(dn,{to:e.href,className:sl("flex items-center gap-2 px-2 py-1.5 rounded transition-all duration-300 text-xs",n?"bg-primary text-primary-foreground font-medium":"hover:bg-accent hover:text-accent-foreground"),children:[c.jsx(t,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:y(e.title)})]},e.href)})]})})]},e.href);const x=o.has(e.href);return c.jsxs("div",{className:"space-y-1",children:[a&&!r?c.jsxs("button",{onClick:t=>{t.preventDefault(),l(t=>{const n=new Set(t);return n.has(e.href)?n.delete(e.href):n.add(e.href),n})},onFocus:()=>{m(t),g(null)},tabIndex:h===t&&null===f?0:-1,className:sl("flex items-center gap-2 px-2 py-1.5 rounded transition-all duration-300 text-xs w-full text-left outline-none",u?"bg-primary text-primary-foreground":p?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground",h===t&&null===f?"ring-2 ring-ring ring-offset-1":""),...a&&{"aria-expanded":x},children:[c.jsx(n,{className:"h-4 w-4 flex-shrink-0"}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("div",{className:"font-medium whitespace-nowrap text-xs",children:y(e.title)})}),c.jsx(Xp,{className:sl("h-3 w-3 flex-shrink-0 transition-transform duration-200",x?"rotate-180":"rotate-0")})]}):c.jsxs(dn,{to:e.href,onFocus:()=>{m(t),g(null)},tabIndex:h===t&&null===f?0:-1,className:sl("flex rounded transition-all duration-300 outline-none",r?"items-center justify-center px-2 py-2":"items-center gap-2 px-2 py-1.5","text-xs",u?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground",h===t&&null===f?"ring-2 ring-ring ring-offset-1":""),title:r?y(e.title):void 0,children:[c.jsx(n,{className:sl("flex-shrink-0 transition-all duration-300","h-4 w-4")}),c.jsx("div",{className:sl("flex-1 transition-all duration-300 ease-in-out overflow-hidden",r?"max-w-0 opacity-0":"max-w-full opacity-100"),children:c.jsx("div",{className:"font-medium whitespace-nowrap text-xs",children:y(e.title)})})]}),a&&!r&&x&&c.jsx("div",{className:"ml-6 space-y-0.5",children:e.children.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())}).map((e,n)=>{const a=e.icon,r=s===e.href||s.startsWith(e.href+"/"),i=f?.parentIndex===t&&f?.childIndex===n;return c.jsxs(dn,{to:e.href,onFocus:()=>{g({parentIndex:t,childIndex:n}),m(null)},tabIndex:i?0:-1,className:sl("flex items-center gap-2 px-2 py-1 rounded transition-all duration-300 text-xs outline-none",r?"bg-primary text-primary-foreground font-medium":"hover:bg-accent hover:text-accent-foreground text-muted-foreground",i?"ring-2 ring-ring ring-offset-1":""),children:[c.jsx(a,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:y(e.title)})]},e.href)})})]},e.href)})})]}),c.jsx("main",{className:"flex-1 min-w-0",children:e})]})})}const EK=mn("/settings/security")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(wK,{})})})}});function PK(){const{t:e}=fr(),t=Us();return c.jsx("div",{className:sl("space-y-6",t.spacingFormSection),children:c.jsxs(Sl,{children:[c.jsxs(jl,{className:t.spacingFormItem,children:[c.jsx(Cl,{className:sl(t.textSizeCardTitle,"font-semibold"),children:e("pages.settings.profile.title")}),c.jsx(kl,{className:t.textSizeSmall,children:e("pages.settings.profile.description")})]}),c.jsxs(Nl,{className:sl(t.paddingContainer,t.spacingFormSection),children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"name",className:t.textSizeLabel,children:e("pages.settings.profile.name")}),c.jsx(_l,{id:"name",placeholder:"John Doe",className:sl(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"username",className:t.textSizeLabel,children:e("pages.settings.profile.username")}),c.jsx(_l,{id:"username",placeholder:"johndoe",className:sl(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"email",className:t.textSizeLabel,children:e("pages.settings.profile.email")}),c.jsx(_l,{id:"email",type:"email",placeholder:"john@example.com",className:sl(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"bio",className:t.textSizeLabel,children:e("pages.settings.profile.bio")}),c.jsx("textarea",{id:"bio",className:sl("flex w-full rounded-md border border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t.paddingCell,t.textSize,"h-7"===t.inputHeight?"min-h-[60px]":"min-h-[80px]"),placeholder:e("pages.settings.profile.bioPlaceholder")})]}),c.jsxs(bl,{className:sl(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx(Dg,{className:t.iconSizeSmall}),c.jsx("span",{children:e("common.save")})]})]})]})})}const AK=mn("/settings/profile")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(PK,{})})})}});function RK(){const{t:e}=fr(),t=Us();return c.jsx("div",{className:sl("space-y-6",t.spacingFormSection),children:c.jsxs(Sl,{children:[c.jsxs(jl,{className:t.spacingFormItem,children:[c.jsx(Cl,{className:sl(t.textSizeCardTitle,"font-semibold"),children:e("pages.settings.notifications.title")}),c.jsx(kl,{className:t.textSizeSmall,children:e("pages.settings.notifications.description")})]}),c.jsxs(Nl,{className:sl(t.paddingContainer,t.spacingFormSection),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"email-notifications",className:t.textSizeLabel,children:e("pages.settings.notifications.emailNotifications")}),c.jsx("p",{className:sl("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.emailNotificationsDesc")})]}),c.jsx(Ox,{id:"email-notifications"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"push-notifications",className:t.textSizeLabel,children:e("pages.settings.notifications.pushNotifications")}),c.jsx("p",{className:sl("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.pushNotificationsDesc")})]}),c.jsx(Ox,{id:"push-notifications"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"marketing-emails",className:t.textSizeLabel,children:e("pages.settings.notifications.marketingEmails")}),c.jsx("p",{className:sl("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.marketingEmailsDesc")})]}),c.jsx(Ox,{id:"marketing-emails"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"security-alerts",className:t.textSizeLabel,children:e("pages.settings.notifications.securityAlerts")}),c.jsx("p",{className:sl("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.securityAlertsDesc")})]}),c.jsx(Ox,{id:"security-alerts",defaultChecked:!0})]})]})]})})}const TK=mn("/settings/notifications")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(RK,{})})})}});function MK(){const{t:e,i18n:t}=fr(),n=Us();return c.jsx("div",{className:sl("space-y-6",n.spacingFormSection),children:c.jsxs(Sl,{children:[c.jsxs(jl,{className:n.spacingFormItem,children:[c.jsx(Cl,{className:sl(n.textSizeCardTitle,"font-semibold"),children:e("pages.settings.language.title")}),c.jsx(kl,{className:n.textSizeSmall,children:e("pages.settings.language.description")})]}),c.jsx(Nl,{className:n.paddingContainer,children:c.jsx("div",{className:sl("space-y-2",n.spacingFormItem),children:[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"Franais"},{code:"es",name:"Spanish",nativeName:"Espaol"}].map(e=>{const a=t.language===e.code;return c.jsxs("button",{onClick:()=>{return n=e.code,void t.changeLanguage(n);var n},className:sl("w-full flex items-center justify-between rounded-lg border hover:bg-accent transition-colors",n.paddingForm,a?"border-primary bg-accent":"border-muted"),children:[c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:sl("font-medium",n.textSize),children:e.nativeName}),c.jsx("div",{className:sl("text-muted-foreground",n.textSizeSmall),children:e.name})]}),a&&c.jsx(Yp,{className:sl("text-primary",n.iconSize)})]},e.code)})})})]})})}const DK=mn("/settings/language")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(MK,{})})})}});function LK(e){return{id:e.id,name:e.name,street:e.street??void 0,city:e.city??void 0,state:e.state??void 0,postal_code:e.postal_code??void 0,country:e.country??void 0,is_default:e.is_default,notes:e.notes??void 0,address_type:e.address_type,created_at:e.created_at,updated_at:e.updated_at}}class FK{constructor(e){this.companyAddressService=e}async listAddresses(e,t){return(await this.companyAddressService.fetchCompanyAddresses({address_type:t,skip:0,limit:200})).data.map(LK)}async createAddress(e,t){if(!t.name||!t.name.trim())throw new Error("Address name is required");const n={name:t.name,address_type:t.address_type,street:t.street??null,city:t.city??null,state:t.state??null,postal_code:t.postal_code??null,country:t.country??null,is_default:t.is_default??!1,notes:t.notes??null};return LK(await this.companyAddressService.createCompanyAddress(n))}async updateAddress(e,t,n){const a={name:n.name,address_type:n.address_type,street:n.street??null,city:n.city??null,state:n.state??null,postal_code:n.postal_code??null,country:n.country??null,is_default:n.is_default,notes:n.notes??null};return LK(await this.companyAddressService.updateCompanyAddress(t,a))}async deleteAddress(e,t){await this.companyAddressService.deleteCompanyAddress(t)}async setDefaultAddress(e,t){const n=await this.companyAddressService.updateCompanyAddress(t,{is_default:!0}),a=(await this.companyAddressService.fetchCompanyAddresses({skip:0,limit:200})).data.filter(e=>e.id!==t&&e.is_default).map(e=>this.companyAddressService.updateCompanyAddress(e.id,{is_default:!1}));return await Promise.all(a),LK(n)}}function IK(){const{t:e}=fr(),t=Us(),[n,a]=p.useState(!1),s=p.useMemo(()=>new VP({apiClient:Fs,endpoints:{"company-addresses":"/api/v1/company-addresses"}}),[]),r=p.useMemo(()=>new FK(s),[s]),i=p.useMemo(()=>({addressTypes:["default","billing","shipping"],addressTypeLabels:{default:e("pages.settings.companyAddresses.default","Default"),billing:e("pages.settings.companyAddresses.billing","Billing"),shipping:e("pages.settings.companyAddresses.shipping","Shipping")},defaultAddressType:"default",entityLabel:"company",formatAddressTypeLabel:t=>({default:e("pages.settings.companyAddresses.default","Default"),billing:e("pages.settings.companyAddresses.billing","Billing"),shipping:e("pages.settings.companyAddresses.shipping","Shipping")}[t])}),[e]);return c.jsx("div",{className:sl("space-y-6",t.spacingFormSection),children:c.jsxs(Sl,{children:[c.jsx(jl,{className:t.spacingFormItem,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs(Cl,{className:sl("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(Jf,{className:sl("h-5 w-5",t.iconSize)}),e("pages.settings.companyAddresses.title","Company Addresses")]}),c.jsx(kl,{className:t.textSizeCardDescription,children:e("pages.settings.companyAddresses.description","Manage your company addresses. You can have one default address, multiple billing addresses, and multiple shipping addresses.")})]}),c.jsxs(bl,{onClick:()=>a(!0),className:"flex items-center gap-2",children:[c.jsx(jg,{className:"h-4 w-4"}),e("pages.settings.companyAddresses.addAddress","Add Address")]})]})}),c.jsx(Nl,{className:sl(t.paddingContainer),children:c.jsx(ID,{entityId:"company",service:r,config:i,addDialogOpen:n,onAddDialogOpenChange:a})})]})})}const OK=mn("/settings/company-addresses")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(IK,{})})})}}),zK="enable_tabs",BK="tab_position";function $K(){const{t:e}=fr(),{theme:t,setTheme:n}=CG(),{density:a,setDensity:s}=(()=>{const e=p.useContext(Zs);if(void 0===e)throw new Error("useDensity must be used within a DensityProvider");return e})(),r=Us(),[i,o]=p.useState(()=>Gs.get(zK)??!0),[l,d]=p.useState(()=>Gs.get(BK)??"separate"),u=e=>{d(e),Gs.set(BK,e),window.dispatchEvent(new CustomEvent("tab-position-changed",{detail:{position:e}}))},h=[{value:"light",label:e("theme.light"),icon:Jg},{value:"dark",label:e("theme.dark"),icon:og},{value:"system",label:e("theme.system"),icon:ig}],m=[{value:"compact",label:e("pages.settings.appearance.compact","Compact"),icon:sg,description:e("pages.settings.appearance.compactDesc","Dense layout with smaller spacing")},{value:"normal",label:e("pages.settings.appearance.normal","Normal"),icon:tg,description:e("pages.settings.appearance.normalDesc","Comfortable layout with more spacing")}];return c.jsxs("div",{className:sl("space-y-6",r.spacingFormSection),children:[c.jsxs(Sl,{children:[c.jsxs(jl,{className:r.spacingFormItem,children:[c.jsx(Cl,{className:sl(r.textSizeCardTitle,"font-semibold"),children:e("pages.settings.appearance.title")}),c.jsx(kl,{className:r.textSizeCardDescription,children:e("pages.settings.appearance.description")})]}),c.jsxs(Nl,{className:sl(r.paddingContainer,r.spacingFormSection),children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(Fl,{children:e("pages.settings.appearance.themeMode")}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:h.map(e=>{const a=e.icon;return c.jsxs("button",{onClick:()=>n(e.value),className:sl("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors",t===e.value?"border-primary bg-accent":"border-muted"),children:[c.jsx(a,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.value)})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Fl,{children:e("pages.settings.appearance.uiDensity","UI Density")}),c.jsx("p",{className:"text-sm text-muted-foreground",children:e("pages.settings.appearance.uiDensityDesc","Choose between compact and normal spacing for a more comfortable or data-dense interface")}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.map(e=>{const t=e.icon;return c.jsxs("button",{onClick:()=>s(e.value),className:sl("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors",a===e.value?"border-primary bg-accent":"border-muted"),children:[c.jsx(t,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e.label}),c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:e.description})]},e.value)})})]})]})]}),c.jsxs(Sl,{children:[c.jsxs(jl,{className:r.spacingFormItem,children:[c.jsxs(Cl,{className:sl("flex items-center gap-2",r.textSizeCardTitle,"font-semibold"),children:[c.jsx(mg,{className:sl("h-5 w-5",r.iconSize)}),e("pages.settings.appearance.interfaceSettings")]}),c.jsx(kl,{className:r.textSizeCardDescription,children:e("pages.settings.appearance.interfaceSettingsDesc")})]}),c.jsxs(Nl,{className:sl(r.paddingContainer,r.spacingFormSection),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Fl,{htmlFor:"enable-tabs",children:e("pages.settings.appearance.enableTabs")}),c.jsx("p",{className:"text-sm text-muted-foreground",children:e("pages.settings.appearance.enableTabsDesc")})]}),c.jsx(Ox,{id:"enable-tabs",checked:i,onCheckedChange:e=>{o(e),Gs.set(zK,e),window.dispatchEvent(new CustomEvent("tabs-preference-changed",{detail:{enabled:e}}))}})]}),i&&c.jsxs("div",{className:"space-y-3",children:[c.jsx(Fl,{children:e("pages.settings.appearance.tabPosition")}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>u("separate"),className:sl("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors","separate"===l?"border-primary bg-accent":"border-muted"),children:[c.jsx(hg,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e("pages.settings.appearance.tabPositionSeparate")}),c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:e("pages.settings.appearance.tabPositionSeparateDesc")})]}),c.jsxs("button",{onClick:()=>u("inline"),className:sl("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors","inline"===l?"border-primary bg-accent":"border-muted"),children:[c.jsx(ug,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e("pages.settings.appearance.tabPositionInline")}),c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:e("pages.settings.appearance.tabPositionInlineDesc")})]})]})]})]})]})]})}const UK=mn("/settings/appearance")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx($K,{})})})}});function VK(){const{t:e}=fr(),t=Us(),n=Va(),{toast:a}=Vk(),[s,r]=p.useState(!0),[i,o]=p.useState(!0);p.useEffect(()=>{const e=zs.get("cache","queryCacheEnabled"),t=zs.get("cache","reactQueryCacheEnabled");r(!1!==e),o(!1!==t)},[]);return c.jsxs("div",{className:sl("space-y-6",t.spacingFormSection),children:[c.jsxs(Sl,{children:[c.jsxs(jl,{className:t.spacingFormItem,children:[c.jsx(Cl,{className:sl(t.textSizeCardTitle,"font-semibold"),children:e("pages.settings.account.title")}),c.jsx(kl,{className:t.textSizeSmall,children:e("pages.settings.account.description")})]}),c.jsx(Nl,{className:sl(t.paddingContainer,t.spacingFormSection),children:c.jsxs("div",{className:sl("flex items-center justify-between border rounded-lg",t.paddingForm),children:[c.jsxs("div",{children:[c.jsx("h4",{className:sl("font-medium",t.textSize),children:e("pages.settings.account.accountStatus")}),c.jsx("p",{className:sl("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.account.accountStatusDesc")})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:sl("rounded-full bg-green-500",t.iconSizeSmall)}),c.jsx("span",{className:sl("font-medium",t.textSizeSmall),children:e("pages.settings.account.active")})]})]})})]}),c.jsxs(Sl,{children:[c.jsxs(jl,{className:t.spacingFormItem,children:[c.jsxs(Cl,{className:sl("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(gf,{className:t.iconSize}),e("pages.settings.account.cacheManagement")]}),c.jsx(kl,{className:t.textSizeSmall,children:e("pages.settings.account.cacheManagementDesc")})]}),c.jsx(Nl,{className:sl(t.paddingContainer,t.spacingFormSection),children:c.jsxs("div",{className:sl("space-y-6",t.spacingFormSection),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"query-cache-enabled",className:t.textSizeLabel,children:e("pages.settings.account.enableQueryCache")}),c.jsx("p",{className:sl("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.account.enableQueryCacheDesc")})]}),c.jsx(Ox,{id:"query-cache-enabled",checked:s,onCheckedChange:async t=>{try{r(t),await zs.setAsync(["cache","queryCacheEnabled"],t),a({title:e(t?"pages.settings.account.queryCacheEnabled":"pages.settings.account.queryCacheDisabled"),description:e(t?"pages.settings.account.queryCacheEnabledDesc":"pages.settings.account.queryCacheDisabledDesc")})}catch(n){r(!t),a({title:e("pages.settings.account.preferenceUpdateError"),description:e("pages.settings.account.preferenceUpdateErrorDesc"),variant:"destructive"})}}})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"react-query-cache-enabled",className:t.textSizeLabel,children:e("pages.settings.account.enableReactQueryCache")}),c.jsx("p",{className:sl("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.account.enableReactQueryCacheDesc")})]}),c.jsx(Ox,{id:"react-query-cache-enabled",checked:i,onCheckedChange:async t=>{try{o(t),await zs.setAsync(["cache","reactQueryCacheEnabled"],t);const s=t?864e5:0,r=t?3e5:0;n.setDefaultOptions({queries:{gcTime:s,staleTime:r}}),t||(n.clear(),await cF()),a({title:e(t?"pages.settings.account.reactQueryCacheEnabled":"pages.settings.account.reactQueryCacheDisabled"),description:e(t?"pages.settings.account.reactQueryCacheEnabledDesc":"pages.settings.account.reactQueryCacheDisabledDesc")})}catch(s){o(!t),a({title:e("pages.settings.account.preferenceUpdateError"),description:e("pages.settings.account.preferenceUpdateErrorDesc"),variant:"destructive"})}}})]}),c.jsxs("div",{className:sl("space-y-3",t.spacingFormSection),children:[c.jsxs(bl,{variant:"outline",onClick:async()=>{try{n.clear(),n.removeQueries(),await cF(),Gs&&"function"==typeof Gs.remove&&(Gs.remove("REACT_QUERY_OFFLINE_CACHE"),Gs.remove("app_tabs"),Gs.remove("scroll_positions"),Gs.removeMatching?Gs.removeMatching("^command-palette-recent"):Gs.remove("command-palette-recent")),a({title:e("pages.settings.account.cacheCleared"),description:e("pages.settings.account.cacheClearedDesc")})}catch(t){a({title:e("pages.settings.account.cacheClearError"),description:e("pages.settings.account.cacheClearErrorDesc"),variant:"destructive"})}},className:sl(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5 w-full justify-start"),children:[c.jsx(gf,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.account.clearCache")})]}),c.jsxs(bl,{variant:"outline",onClick:async()=>{try{await n.invalidateQueries(),a({title:e("pages.settings.account.queriesInvalidated"),description:e("pages.settings.account.queriesInvalidatedDesc")})}catch(t){a({title:e("pages.settings.account.queriesInvalidateError"),description:e("pages.settings.account.queriesInvalidateErrorDesc"),variant:"destructive"})}},className:sl(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5 w-full justify-start"),children:[c.jsx(Ag,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.account.invalidateAllQueries")})]})]})]})})]}),c.jsxs(Sl,{className:"border-destructive",children:[c.jsxs(jl,{className:t.spacingFormItem,children:[c.jsxs(Cl,{className:sl("text-destructive flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(ix,{className:t.iconSize}),e("pages.settings.account.dangerZone")]}),c.jsx(kl,{className:t.textSizeSmall,children:e("pages.settings.account.dangerZoneDesc")})]}),c.jsx(Nl,{className:t.paddingContainer,children:c.jsxs(bl,{variant:"destructive",className:sl(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx(ax,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.account.deleteAccount")})]})})]})]})}const qK=mn("/settings/account")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(VK,{})})})}});const HK=mn("/sales/payments")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});const GK=mn("/sales/explore")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});const KK=mn("/sales/employees")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});const WK=mn("/sales/customers")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});const QK=mn("/sales/bookings")({component:function(){return c.jsx(aK,{children:c.jsx(_n,{})})}});function YK(){const{t:e}=fr(),t=Yt(),{toast:n}=Vk(),a=Va(),[s,r]=p.useState(!1),[i,o]=p.useState(!1),[l,d]=p.useState({username:"",password:""}),[u,h]=p.useState({});p.useEffect(()=>{const e=di.isAuthenticated();o(e)},[]);const m=(e,t)=>{d(n=>({...n,[e]:t})),u[e]&&h(t=>({...t,[e]:void 0}))},f=async()=>{_s(!0);try{await di.logout(),a.clear(),Gs.removeMatching?Gs.removeMatching("^command-palette-recent"):Gs.remove("command-palette-recent"),o(!1),n({title:"Logged Out",description:"You have been successfully logged out."})}catch(e){a.clear(),Gs.removeMatching?Gs.removeMatching("^command-palette-recent"):Gs.remove("command-palette-recent"),o(!1),n({title:"Logged Out",description:"You have been logged out locally."})}},g=()=>{t({to:"/"})};return i?c.jsxs(Sl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(jl,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"h-16 w-16 rounded-full bg-green-500/10 flex items-center justify-center",children:c.jsx(rf,{className:"h-8 w-8 text-green-500"})})}),c.jsx(Cl,{className:"text-2xl",children:"Already Logged In"}),c.jsx(kl,{className:"text-base",children:"You are currently logged in to your account. Would you like to continue to the home page or logout?"})]}),c.jsxs(Nl,{className:"space-y-3",children:[c.jsxs(bl,{onClick:g,className:"w-full",size:"lg",children:[c.jsx(Df,{className:"mr-2 h-4 w-4"}),"Go to Home Page"]}),c.jsxs(bl,{onClick:f,variant:"outline",className:"w-full",size:"lg",children:[c.jsx(Xf,{className:"mr-2 h-4 w-4"}),"Logout & Login as Different User"]})]})]}):c.jsxs(Sl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(jl,{className:"space-y-1 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:c.jsx(Qf,{className:"h-6 w-6 text-primary"})})}),c.jsx(Cl,{className:"text-2xl font-bold",children:e("pages.login.title")}),c.jsx(kl,{children:e("pages.login.subtitle")})]}),c.jsx(Nl,{children:c.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),h({}),(()=>{const t={};return l.username.trim()||(t.username=e("pages.login.errors.usernameRequired")),l.password?l.password.length<8&&(t.password=e("pages.login.errors.passwordTooShort")):t.password=e("pages.login.errors.passwordRequired"),h(t),0===Object.keys(t).length})()){r(!0);try{a.clear(),a.removeQueries(),Gs&&"function"==typeof Gs.remove&&(Gs.remove("REACT_QUERY_OFFLINE_CACHE"),Gs.remove("app_tabs"),Gs.remove("scroll_positions"),Gs.removeMatching?Gs.removeMatching("^command-palette-recent"):Gs.remove("command-palette-recent"));const s=await di.login(l);if(n({title:e("pages.login.success"),description:e("pages.login.successDescription")}),await a.invalidateQueries(),s.must_change_password)return di.setMustChangePassword(!0),void t({to:"/change-password"});t({to:"/"})}catch(i){if(i instanceof ci){let t="",a=e("pages.login.error"),s="";switch(i.type){case"locked":{let e="Your account has been locked.";if(i.lockedUntil)try{const t=new Date(i.lockedUntil);e=`Your account has been locked until ${new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(t)}.`}catch{e=`Your account has been locked. ${i.lockedUntil}`}t=e,a="Account Locked",s=e+" Please contact your administrator or try again later.";break}case"inactive":t="Your account is inactive.",a="Account Inactive",s="Your account has been deactivated. Please contact your administrator to reactivate your account.";break;default:t=e("pages.login.errors.invalidCredentials"),a=e("pages.login.error"),s="The username or password you entered is incorrect. Please try again."}h({general:t}),n({title:a,description:s,variant:"destructive"})}else{const t=i instanceof Error?i.message:"An error occurred";h({general:e("pages.login.errors.invalidCredentials")}),n({title:e("pages.login.error"),description:t,variant:"destructive"})}}finally{r(!1)}}},className:"space-y-4",children:[u.general&&c.jsx(CT,{message:u.general}),c.jsx(CA,{label:e("pages.login.usernameLabel"),htmlFor:"username",error:u.username,children:c.jsx(kA,{id:"username",type:"text",placeholder:e("pages.login.usernamePlaceholder"),value:l.username,onChange:e=>m("username",e.target.value),leftIcon:c.jsx(hx,{className:"h-4 w-4"}),error:Boolean(u.username),disabled:s,autoComplete:"username",autoFocus:!0})}),c.jsx(CA,{label:e("pages.login.passwordLabel"),htmlFor:"password",error:u.password,children:c.jsx(jA,{id:"password",placeholder:e("pages.login.passwordPlaceholder"),value:l.password,onChange:e=>m("password",e.target.value),leftIcon:c.jsx(Qf,{className:"h-4 w-4"}),error:Boolean(u.password),disabled:s,autoComplete:"current-password",capsLockMessage:e("pages.login.capsLockOn")})}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"text-sm text-primary hover:underline",onClick:()=>n({title:"Feature Coming Soon",description:"Password reset functionality will be available soon."}),children:e("pages.login.forgotPassword")})}),c.jsx(bl,{type:"submit",className:"w-full",disabled:s,children:e(s?"pages.login.loggingIn":"pages.login.submit")}),c.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e("pages.login.noAccount")," ",c.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>n({title:"Feature Coming Soon",description:"Sign up functionality will be available soon."}),children:e("pages.login.signUp")})]})]})})]})}const XK=mn("/(auth)/login")({component:function(){return c.jsx(uK,{children:c.jsx(YK,{})})}});function ZK(){const{t:e}=fr(),t=Yt(),{toast:n}=Vk(),[a,s]=p.useState(!1),[r,i]=p.useState(!1),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[h,m]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,g]=p.useState({}),x=Us(),v=(e,t)=>{m(n=>({...n,[e]:t})),f[e]&&g(t=>({...t,[e]:void 0}))};return c.jsxs(Sl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(jl,{className:sl(x.spacingFormItem,"text-center"),children:[c.jsx("div",{className:sl("flex justify-center",x.gapFormItem),children:c.jsx("div",{className:sl("rounded-full bg-primary/10 flex items-center justify-center","h-4 w-4"===x.iconSize?"h-10 w-10":"h-12 w-12"),children:c.jsx(If,{className:sl("text-primary","h-4 w-4"===x.iconSize?"h-5 w-5":"h-6 w-6")})})}),c.jsx(Cl,{className:sl("font-bold","text-sm"===x.textSize?"text-xl":"text-2xl"),children:"Change Your Password"}),c.jsx(kl,{className:x.textSizeSmall,children:"For security reasons, please change your password before continuing."})]}),c.jsx(Nl,{className:x.paddingContainer,children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g({}),(()=>{const e={};return h.currentPassword||(e.currentPassword="Current password is required"),h.newPassword?h.newPassword.length<8&&(e.newPassword="Password must be at least 8 characters"):e.newPassword="New password is required",h.confirmPassword?h.newPassword!==h.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your new password",h.currentPassword===h.newPassword&&(e.newPassword="New password must be different from current password"),g(e),0===Object.keys(e).length})()){s(!0);try{await di.changePassword({current_password:h.currentPassword,new_password:h.newPassword}),di.clearMustChangePassword(),n({title:"Password Changed",description:"Your password has been successfully changed."}),t({to:"/"})}catch(a){const e=a instanceof Error?a.message:"Failed to change password";g({general:e}),n({title:"Password Change Failed",description:e,variant:"destructive"})}finally{s(!1)}}},className:x.spacingFormSection,children:[f.general&&c.jsxs("div",{className:sl("flex items-center gap-2 text-destructive bg-destructive/10 rounded-md",x.paddingCell,x.textSizeSmall),children:[c.jsx(sf,{className:x.iconSizeSmall}),c.jsx("span",{children:f.general})]}),c.jsxs("div",{className:x.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"current-password",className:x.textSizeLabel,children:"Current Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Qf,{className:sl("absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",x.iconSizeSmall)}),c.jsx(_l,{id:"current-password",type:r?"text":"password",placeholder:"Enter your current password",value:h.currentPassword,onChange:e=>v("currentPassword",e.target.value),className:sl("pl-10 pr-10",x.inputHeight,x.textSize,f.currentPassword?"border-destructive":""),disabled:a,autoComplete:"current-password",autoFocus:!0}),c.jsx("button",{type:"button",onClick:()=>i(!r),className:sl("absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"),tabIndex:-1,children:r?c.jsx(wf,{className:x.iconSizeSmall}):c.jsx(Sf,{className:x.iconSizeSmall})})]}),f.currentPassword&&c.jsx("p",{className:sl("text-destructive",x.textSizeSmall),children:f.currentPassword})]}),c.jsxs("div",{className:x.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"new-password",className:x.textSizeLabel,children:"New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Qf,{className:sl("absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",x.iconSizeSmall)}),c.jsx(_l,{id:"new-password",type:o?"text":"password",placeholder:"Enter your new password",value:h.newPassword,onChange:e=>v("newPassword",e.target.value),className:sl("pl-10 pr-10",x.inputHeight,x.textSize,f.newPassword?"border-destructive":""),disabled:a,autoComplete:"new-password"}),c.jsx("button",{type:"button",onClick:()=>l(!o),className:sl("absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"),tabIndex:-1,children:o?c.jsx(wf,{className:x.iconSizeSmall}):c.jsx(Sf,{className:x.iconSizeSmall})})]}),f.newPassword&&c.jsx("p",{className:sl("text-destructive",x.textSizeSmall),children:f.newPassword})]}),c.jsxs("div",{className:x.spacingFormItem,children:[c.jsx(Fl,{htmlFor:"confirm-password",className:x.textSizeLabel,children:"Confirm New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Qf,{className:sl("absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",x.iconSizeSmall)}),c.jsx(_l,{id:"confirm-password",type:d?"text":"password",placeholder:"Confirm your new password",value:h.confirmPassword,onChange:e=>v("confirmPassword",e.target.value),className:sl("pl-10 pr-10",x.inputHeight,x.textSize,f.confirmPassword?"border-destructive":""),disabled:a,autoComplete:"new-password"}),c.jsx("button",{type:"button",onClick:()=>u(!d),className:sl("absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"),tabIndex:-1,children:d?c.jsx(wf,{className:x.iconSizeSmall}):c.jsx(Sf,{className:x.iconSizeSmall})})]}),f.confirmPassword&&c.jsx("p",{className:sl("text-destructive",x.textSizeSmall),children:f.confirmPassword})]}),c.jsxs(bl,{type:"submit",className:sl("w-full flex items-center gap-1.5",x.buttonHeightSmall,x.paddingCell,x.textSizeSmall),disabled:a,children:[c.jsx(If,{className:x.iconSizeSmall}),c.jsx("span",{children:a?"Changing Password...":"Change Password"})]})]})})]})}const JK=mn("/(auth)/change-password")({component:function(){return c.jsx(uK,{children:c.jsx(ZK,{})})}});const eW=mn("/ticketing/venues/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(yO,{config:{apiClient:Fs,endpoints:{venues:"/api/v1/ticketing/venues"}},children:c.jsx(Sq,{config:{apiClient:Fs,endpoints:{venueTypes:"/api/v1/ticketing/venue-types"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(Pq,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/ticketing/venues",search:{}}),onNavigateToVenue:t=>e({to:"/ticketing/venues/$id",params:{id:t}})})})})})}});const tW=mn("/ticketing/shows/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(OO,{config:{apiClient:Fs,endpoints:{shows:"/api/v1/ticketing/shows"}},children:c.jsx(GO,{config:{apiClient:Fs,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(nz,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/ticketing/shows",search:{}}),onNavigateToShow:t=>e({to:"/ticketing/shows/$id",params:{id:t}})})})})})}});const nW=mn("/ticketing/organizers/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(GO,{config:{apiClient:Fs,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(Iq,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/ticketing/organizers",search:{}}),onNavigateToOrganizer:t=>e({to:"/ticketing/organizers/$id",params:{id:t}})})})})}});const aW=mn("/sales/payments/")({component:function(){const e=Yt();return c.jsx("div",{className:"space-y-4",children:c.jsx(WH,{onNavigateToPayment:t=>e({to:"/sales/payments/$id",params:{id:t}})})})}});const sW=mn("/sales/explore/")({component:function(){return c.jsx(OO,{config:{apiClient:Fs,endpoints:{shows:"/api/v1/ticketing/shows"}},children:c.jsx(sO,{config:{apiClient:Fs,endpoints:{events:"/api/v1/ticketing/events"}},children:c.jsx(rG,{})})})}});const rW=mn("/sales/employees/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(xG,{config:{apiClient:Fs,endpoints:{employees:"/api/v1/sales/employees"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(yG,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/sales/employees",search:{}}),onNavigateToEmployee:t=>e({to:"/sales/employees/$id",params:{id:t}})})})})}});const iW=mn("/sales/customers/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx("div",{className:"space-y-4",children:c.jsx(jI,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/sales/customers",search:{}}),onNavigateToCustomer:t=>e({to:"/sales/customers/$id",params:{id:t}})})})}});const oW=mn("/sales/bookings/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(VH,{config:{apiClient:Fs,endpoints:{bookings:"/api/v1/sales/bookings"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(HH,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/sales/bookings",search:{}}),onNavigateToBooking:t=>e({to:"/sales/bookings/$id",params:{id:t}})})})})}});function lW({id:e}){const t=Yt(),n=bO(),{data:a,isLoading:s,error:r}=SO(n,e??null),i=jO(n),[o,l]=p.useState(!1),d=function(){const e=zt();return Bt({select:e=>[e.location.href,e.resolvedLocation?.href,e.status],structuralSharing:!0}),p.useCallback(t=>{const{pending:n,caseSensitive:a,fuzzy:s,includeSearch:r,...i}=t;return e.matchRoute(i,{pending:n,caseSensitive:a,fuzzy:s,includeSearch:r})},[e])}()({to:"/ticketing/venues/$id/seats/designer",params:{id:e}}),u=p.useMemo(()=>new KP({apiClient:Fs,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[]);p.useEffect(()=>{if(!a||d)return;const t=a.name||a.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/venues/${e}`,title:t}}))},[e,a,d]);return d?c.jsx(_n,{}):c.jsxs(c.Fragment,{children:[c.jsx(vq,{data:a??void 0,loading:s,error:r,editable:!0,onEdit:()=>{l(!0)},onNavigateToSeatDesigner:(e,n)=>{t({to:"/ticketing/venues/$id/seats/designer",params:{id:e},search:{layoutId:n}})},profilePhotoComponent:a?c.jsx(Aq,{venue:a,attachmentService:u}):void 0}),a&&c.jsx(Eq,{open:o,onOpenChange:l,onSubmit:async(e,t)=>{try{await i.mutateAsync({id:e,input:t}),Uk({title:"Success",description:"Venue updated successfully"}),l(!1)}catch(n){throw Uk({title:"Error",description:n instanceof Error?n.message:"Failed to update venue",variant:"destructive"}),n}},venue:a})]})}const cW=mn("/ticketing/venues/$id")({component:function(){const{id:e}=Gt({from:"/ticketing/venues/$id"}),t={apiClient:Fs,endpoints:{venues:"/api/v1/ticketing/venues"}},n={apiClient:Fs,endpoints:{layouts:"/api/v1/ticketing/layouts"}};return c.jsx(yO,{config:t,children:c.jsx(Sq,{config:{apiClient:Fs,endpoints:{venueTypes:"/api/v1/ticketing/venue-types"}},children:c.jsx(_O,{config:n,children:c.jsx(lW,{id:e})})})})}});function dW({id:e}){const t=Yt(),n=zO(),{data:a,isLoading:s,error:r}=XO(n,e??null);return p.useEffect(()=>{if(!a)return;const t=a.code||a.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/shows/${e}`,title:t}}))},[e,a]),c.jsx(JO,{data:a??void 0,loading:s,error:r,editable:!0,onNavigateToInventory:e=>{t({to:"/ticketing/events/$eventId/inventory",params:{eventId:e}})},onNavigateToVenue:e=>{t({to:"/ticketing/venues/$id",params:{id:e}})}})}const uW=mn("/ticketing/shows/$id")({component:function(){const{id:e}=Gt({from:"/ticketing/shows/$id"}),t={apiClient:Fs,endpoints:{shows:"/api/v1/ticketing/shows"}};return c.jsx(OO,{config:t,children:c.jsx(GO,{config:{apiClient:Fs,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:c.jsx(sO,{config:{apiClient:Fs,endpoints:{events:"/api/v1/ticketing/events"}},children:c.jsx(yO,{config:{apiClient:Fs,endpoints:{venues:"/api/v1/ticketing/venues"}},children:c.jsx(_O,{config:{apiClient:Fs,endpoints:{layouts:"/api/v1/ticketing/layouts"}},children:c.jsx(JP,{config:{apiClient:Fs,baseUrl:"/api/v1"},children:c.jsx(dW,{id:e})})})})})})})}});function hW({id:e}){const t=KO(),{data:n,isLoading:a,error:s,refetch:r}=function(e,t){return Ya({queryKey:["organizers",t],queryFn:()=>t?e.fetchOrganizerById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}(t,e??null);f.useEffect(()=>{},[n]);const[i,o]=p.useState(!1),[l,d]=p.useState(null),[u,h]=p.useState(!1),[m,g]=p.useState(!1),[x,v]=p.useState(null),y=function(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateOrganizer(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["organizers"]}),t.invalidateQueries({queryKey:["organizers",n.id]})}})}(t),b=new YP({apiClient:Fs,endpoints:{tags:"/api/v1/shared/tags"}}),w=new KP({apiClient:Fs,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),{data:S,refetch:j}=Ya({queryKey:["profilePhoto",e,"organizer"],queryFn:()=>e?w.getProfilePhoto("organizer",e):null,enabled:!!e});p.useEffect(()=>{v(S||null)},[S]);const{data:C,isLoading:k,refetch:N}=Ya({queryKey:["organizer-documents",e],queryFn:()=>e?w.getAttachmentsForEntity("organizer",e,"document").then(e=>e.items):Promise.resolve([]),enabled:!!e});return p.useEffect(()=>{if(!n)return;const t=n.code||n.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/organizers/${e}`,title:t}}))},[e,n]),c.jsxs(c.Fragment,{children:[c.jsx(Tq,{data:n??void 0,loading:a,error:s,editable:!0,onEdit:e=>{d(e),o(!0)},onManageTags:e=>{h(!0)},onManageAttachments:e=>{g(!0)},attachmentService:w,profilePhotoComponent:n?c.jsx(Bq,{organizer:n,attachmentService:w,currentPhoto:x,onPhotoChange:async e=>{v(e),await j()}}):void 0}),c.jsx(Fq,{open:i,onOpenChange:e=>{o(e),e||d(null)},onSubmit:async(e,t)=>{try{await y.mutateAsync({id:e,input:t}),Uk({title:"Success",description:"Organizer updated successfully"}),o(!1),d(null)}catch(GQ){throw Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to update organizer",variant:"destructive"}),GQ}},organizer:l}),n&&c.jsxs(c.Fragment,{children:[c.jsx(Oq,{open:u,onOpenChange:h,organizer:n,tagService:b,onSave:async e=>{if(n)try{await b.manageEntityTags("organizer",n.id,e),await r(),Uk({title:"Success",description:"Tags updated successfully"}),h(!1)}catch(GQ){Uk({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to update tags",variant:"destructive"})}}}),c.jsx(zq,{open:m,onOpenChange:g,organizer:n,attachmentService:w,onSave:async e=>{await N(),Uk({title:"Success",description:"Attachments updated successfully"})}})]})]})}const mW=mn("/ticketing/organizers/$id")({component:function(){const{id:e}=Gt({from:"/ticketing/organizers/$id"}),t={apiClient:Fs,endpoints:{organizers:"/api/v1/ticketing/organizers"}};return c.jsx(GO,{config:t,children:c.jsx(hW,{id:e})})}});function pW(){const e=Yt(),t=Mn(),n=Us(),a="create"===new URLSearchParams(t.search).get("action");return c.jsx(Sq,{config:{apiClient:Fs,endpoints:{venueTypes:"/api/v1/ticketing/venue-types"}},children:c.jsx("div",{className:sl("space-y-4",n.spacingFormSection),children:c.jsx(RH,{autoOpenCreate:a,onCreateDialogClose:()=>e({to:"/settings/ticketing/venue-types",search:{}})})})})}const fW=mn("/settings/ticketing/venue-types")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(pW,{})})})}});function gW(){const e=Yt(),t=Mn(),n=Us(),a="create"===new URLSearchParams(t.search).get("action");return c.jsx(SH,{config:{apiClient:Fs,endpoints:{eventTypes:"/api/v1/ticketing/event-types"}},children:c.jsx("div",{className:sl("space-y-4",n.spacingFormSection),children:c.jsx(NH,{autoOpenCreate:a,onCreateDialogClose:()=>e({to:"/settings/ticketing/event-types",search:{}})})})})}const xW=mn("/settings/ticketing/event-types")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(gW,{})})})}});function vW(){const e=Yt(),t=Mn(),n=Us(),a="create"===new URLSearchParams(t.search).get("action");return c.jsx(EI,{config:{apiClient:Fs,endpoints:{customerTypes:"/api/v1/sales/customer-types"}},children:c.jsx("div",{className:sl("space-y-4",n.spacingFormSection),children:c.jsx(TI,{autoOpenCreate:a,onCreateDialogClose:()=>e({to:"/settings/sales/customer-types",search:{}})})})})}const yW=mn("/settings/sales/customer-types")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(vW,{})})})}});function bW(){const e=Yt(),t=Mn(),n=Us(),a="create"===new URLSearchParams(t.search).get("action");return c.jsx(HI,{config:{apiClient:Fs,endpoints:{customerGroups:"/api/v1/sales/customer-groups"}},children:c.jsx("div",{className:sl("space-y-4",n.spacingFormSection),children:c.jsx(VI,{autoOpenCreate:a,onCreateDialogClose:()=>e({to:"/settings/sales/customer-groups",search:{}})})})})}const wW=mn("/settings/sales/customer-groups")({component:function(){return c.jsx(aK,{children:c.jsx(_K,{children:c.jsx(bW,{})})})}});const SW=mn("/sales/payments/$id")({component:function(){const{id:e}=Gt({from:"/sales/payments/$id"});return c.jsxs("div",{children:["Payment Detail: ",e]})}});function jW({id:e}){const t=vG(),[n,a]=p.useState(!1),[s,r]=p.useState(!1),[i,o]=p.useState(!1),l=function(e){const t=Va();return Xa({mutationFn:({id:t,input:n})=>e.updateEmployee(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["employees"]}),t.invalidateQueries({queryKey:["employees",n.id]})}})}(t),{data:d,isLoading:u,error:h,refetch:m}=function(e,t){return Ya({queryKey:["employees",t],queryFn:()=>t?e.fetchEmployeeById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}(t,e??null),f=p.useMemo(()=>new YP({apiClient:Fs,endpoints:{tags:"/api/v1/shared/tags",entityTags:"/api/v1/shared/tags/entity"}}),[]),g=p.useMemo(()=>new KP({apiClient:Fs,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[]);p.useEffect(()=>{if(!d)return;const t=d.code||d.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/sales/employees/${e}`,title:t}}))},[e,d]);const x=p.useCallback(()=>{m()},[m]);return e?c.jsxs(c.Fragment,{children:[c.jsx(oG,{data:d??void 0,loading:u,error:h,editable:!0,onEdit:()=>{a(!0)},attachmentService:g,onManageTags:()=>r(!0),onManageAttachments:()=>o(!0),profilePhotoComponent:d?c.jsx(fG,{employee:d,attachmentService:g,currentPhoto:null,onPhotoChange:x}):void 0}),c.jsx(hG,{open:n,onOpenChange:a,onSubmit:async(e,t)=>{try{await l.mutateAsync({id:e,input:t}),Uk({title:"Success",description:"Employee updated successfully"}),a(!1)}catch(n){throw n}},employee:d??null}),d&&c.jsxs(c.Fragment,{children:[c.jsx(mG,{open:s,onOpenChange:r,employee:d,tagService:f,onSave:async()=>{d&&(await m(),r(!1))}}),c.jsx(pG,{open:i,onOpenChange:o,employee:d,attachmentService:g,onSave:async()=>{o(!1)}})]})]}):null}const CW=mn("/sales/employees/$id")({component:function(){const{id:e}=Gt({from:"/sales/employees/$id"}),t=p.useMemo(()=>({apiClient:Fs,endpoints:{employees:"/api/v1/sales/employees"}}),[]);return c.jsx(xG,{config:t,children:c.jsx(jW,{id:e})})}});function kW({id:e}){const t=Yt(),n=SI(),{data:a,isLoading:s,error:r,refetch:i}=xI(n,e??null),o=vI(n),l=yI(n),{toast:d}=Vk(),u=new YP({apiClient:Fs,endpoints:{}}),h=new KP({apiClient:Fs,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),m=$H(new zH({apiClient:Fs,endpoints:{bookings:"/api/v1/sales/bookings"}})),[f,g]=p.useState(!1),[x,v]=p.useState(!1),[y,b]=p.useState(!1),[w,S]=p.useState(!1),[j,C]=p.useState(!1),[k,N]=p.useState(!1),[_,E]=p.useState(!1),[P,A]=p.useState(null),{data:R,refetch:T}=Ya({queryKey:["profilePhoto",a?.id,"customer"],queryFn:()=>a?h.getProfilePhoto("customer",a.id):null,enabled:!!a});p.useEffect(()=>{A(R||null)},[R]),p.useEffect(()=>{if(!a)return;const t=a.code||a.name||a.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/sales/customers/${e}`,title:t}}))},[e,a]);const M=p.useCallback(()=>{g(!0)},[]),D=p.useCallback(()=>{v(!0)},[]),L=p.useCallback(async()=>{if(a){try{await l.mutateAsync(a.id),d({title:"Success",description:"Customer deleted successfully"}),t({to:"/sales/customers"})}catch(GQ){d({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to delete customer",variant:"destructive"})}v(!1)}},[a,l,d,t]),F=p.useCallback(()=>{b(!0)},[]),I=p.useCallback(()=>{S(!0)},[]),O=p.useCallback(async()=>{if(a)try{await o.mutateAsync({id:a.id,input:{status:"active"}}),await i(),d({title:"Success",description:"Customer activated successfully"}),b(!1)}catch(GQ){d({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to activate customer",variant:"destructive"})}},[a,o,d,i]),z=p.useCallback(async()=>{if(a)try{await o.mutateAsync({id:a.id,input:{status:"inactive"}}),await i(),d({title:"Success",description:"Customer deactivated successfully"}),S(!1)}catch(GQ){d({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to deactivate customer",variant:"destructive"})}},[a,o,d,i]),B=p.useCallback(async(e,t)=>{try{await o.mutateAsync({id:e,input:t}),await i(),d({title:"Success",description:"Customer updated successfully"}),g(!1)}catch(GQ){throw d({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to update customer",variant:"destructive"}),GQ}},[o,d,i]),$=p.useCallback(e=>{E(!0)},[]),U=p.useCallback(async e=>{try{const n=await m.mutateAsync(e);d({title:"Success",description:"Booking created successfully"}),E(!1),t({to:"/sales/bookings/$id",params:{id:n.id}})}catch(GQ){throw d({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to create booking",variant:"destructive"}),GQ}},[m,t,d]),V=p.useCallback(e=>{t({to:"/sales/bookings",search:{customer_id:e.id}})},[t]),q=p.useCallback(()=>{C(!0)},[]),H=p.useCallback(async e=>{if(a)try{await u.manageEntityTags("customer",a.id,e),await i(),d({title:"Success",description:"Tags updated successfully"}),C(!1)}catch(GQ){throw d({title:"Error",description:GQ instanceof Error?GQ.message:"Failed to update tags",variant:"destructive"}),GQ}},[a,i,d,u]),G=p.useCallback(async e=>{A(e),await T()},[T]),K=p.useCallback(()=>{N(!0)},[]),W=p.useCallback(async e=>{d({title:"Success",description:"Attachments updated successfully"})},[d]);return c.jsxs(c.Fragment,{children:[c.jsx(iI,{cus:a??void 0,loading:s,error:r,editable:!0,onEdit:M,onDelete:D,onActivate:F,onDeactivate:I,onCreateBooking:$,onViewBookings:V,onManageTags:q,onManageAttachments:K,profilePhoto:P,onProfilePhotoChange:G}),a&&c.jsxs(c.Fragment,{children:[c.jsx(dI,{open:f,onOpenChange:g,customer:a,onSubmit:B}),c.jsx(bA,{open:x,onOpenChange:e=>{v(e)},title:"Delete Customer",description:`Are you sure you want to delete "${a.name||a.code}"? This action cannot be undone.`,confirmText:"delete",confirmTextLabel:c.jsxs(c.Fragment,{children:["Type ",c.jsx("span",{className:"font-mono font-semibold",children:"delete"})," to confirm:"]}),confirmTextPlaceholder:"Type 'delete' to confirm",confirmAction:{label:"Delete",onClick:L,variant:"destructive",type:"delete",loading:l.isPending,disabled:l.isPending},cancelAction:{label:"Cancel",onClick:()=>v(!1),disabled:l.isPending}}),c.jsx(bA,{open:y,onOpenChange:e=>{b(e)},title:"Activate Customer",description:`Are you sure you want to activate "${a.name||a.code}"? This will make the customer active and available for bookings.`,confirmAction:{label:"Activate",onClick:O,variant:"default",loading:o.isPending,disabled:o.isPending},cancelAction:{label:"Cancel",onClick:()=>b(!1),disabled:o.isPending}}),c.jsx(bA,{open:w,onOpenChange:e=>{S(e)},title:"Deactivate Customer",description:`Are you sure you want to deactivate "${a.name||a.code}"? This will make the customer inactive and unavailable for new bookings.`,confirmAction:{label:"Deactivate",onClick:z,variant:"default",loading:o.isPending,disabled:o.isPending},cancelAction:{label:"Cancel",onClick:()=>S(!1),disabled:o.isPending}}),c.jsx(uI,{open:j,onOpenChange:C,customer:a,tagService:u,onSave:H,loading:!1}),c.jsx(hI,{open:k,onOpenChange:N,customer:a,attachmentService:h,onSave:W,loading:!1}),c.jsx(IH,{open:_,onOpenChange:E,onSubmit:U,initialCustomerId:a.id})]})]})}const NW=mn("/sales/customers/$id")({component:function(){const{id:e}=Gt({from:"/sales/customers/$id"});return c.jsx(kW,{id:e})}});function _W({id:e}){const t=qH(),{data:n,isLoading:a,error:s}=BH(t,e??null);return p.useEffect(()=>{if(!n)return;const t=n.booking_number||n.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/sales/bookings/${e}`,title:t}}))},[e,n]),c.jsx(mq,{data:n??void 0,loading:a,error:s,editable:!0})}const EW=mn("/sales/bookings/$id")({component:function(){const{id:e}=Gt({from:"/sales/bookings/$id"}),t={apiClient:Fs,endpoints:{bookings:"/api/v1/sales/bookings"}};return c.jsx(VH,{config:t,children:c.jsx(_W,{id:e})})}});function PW({eventId:e}){const t=rO(),n=zO(),{data:a}=oO(t,e||null),{data:s}=XO(n,a?.show_id||null);return p.useEffect(()=>{if(!e)return;if(!a)return;if(!s)return;const t=`${s?.code||""} - ${a.title}`;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/events/${e}/inventory`,title:t,iconName:"Package"}}))},[e,a,s]),c.jsx(rq,{eventId:e})}function AW(){const{eventId:e}=Gt({from:"/ticketing/events/$eventId/inventory"});if(!e)return c.jsx("div",{className:"p-4",children:"Invalid event ID"});const t={apiClient:Fs,endpoints:{events:"/api/v1/ticketing/events"}},n={apiClient:Fs,endpoints:{shows:"/api/v1/ticketing/shows"}},a={apiClient:Fs,endpoints:{layouts:"/api/v1/ticketing/layouts"}};return c.jsx(aK,{children:c.jsx(sO,{config:t,children:c.jsx(OO,{config:n,children:c.jsx(_O,{config:a,children:c.jsx(PW,{eventId:e})})})})})}const RW=mn("/ticketing/events/$eventId/inventory")({component:function(){return c.jsx(AW,{})}});function TW({id:e,layoutId:t}){const n=bO(),a=EO(),s=rO(),{data:r,isLoading:i}=SO(n,e??null),{data:o,isLoading:l,error:d}=PO(a,e??null),u=t||(o&&o.length>0?o[0].id:void 0),{data:h,isLoading:m}=AO(a,u??null),f=RO(a),{data:g}=iO(s,u?{filter:{layout_id:u,is_active:!0}}:void 0),x=g?.data.some(e=>e.status!==XI.COMPLETED&&e.status!==XI.CANCELLED);return p.useEffect(()=>{if(!e||!u)return;const t=`Designer - ${h?.layout.name||`Layout ${u}`}`,n=`/ticketing/venues/${e}/seats/designer?layoutId=${u}`;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:n,title:t}}))},[e,u,h?.layout.name]),i||m||l?c.jsx("div",{className:"p-4",children:"Loading layout and seats..."}):u?c.jsx("div",{className:"container mx-auto py-6 space-y-4",children:c.jsx(xH,{venueId:e,layoutId:u,layoutName:h?.layout.name,imageUrl:h?.layout.image_url||r?.image_url,designMode:h?.layout.design_mode,initialSeats:h?.seats,initialSections:h?.sections,fileId:h?.layout.file_id,initialCanvasBackgroundColor:h?.layout.canvas_background_color,markerFillTransparency:h?.layout.marker_fill_transparency,readOnly:x,onImageUpload:(e,t)=>{t&&f.mutate({id:u,input:{file_id:t}})},onRemoveImage:async()=>{await f.mutateAsync({id:u,input:{file_id:""}})},onCanvasBackgroundColorChange:async e=>{await f.mutateAsync({id:u,input:{canvas_background_color:e}})},onMarkerFillTransparencyChange:async e=>{await f.mutateAsync({id:u,input:{marker_fill_transparency:e}})}},u)}):d?c.jsxs("div",{className:"p-4 text-destructive",children:["Failed to load layouts:"," ",d instanceof Error?d.message:"Unknown error"]}):c.jsx("div",{className:"p-4 text-muted-foreground",children:"No layouts found for this venue. Please create a layout first."})}const MW=mn("/ticketing/venues/$id/seats/designer")({component:function(){const{id:e}=Gt({from:"/ticketing/venues/$id/seats/designer"}),t=Kt({from:"/ticketing/venues/$id/seats/designer"}),n=t?.layoutId;if(!e)return c.jsx("div",{className:"p-4",children:"Invalid venue ID"});const a={apiClient:Fs,endpoints:{venues:"/api/v1/ticketing/venues"}},s={apiClient:Fs,endpoints:{events:"/api/v1/ticketing/events"}},r={apiClient:Fs,endpoints:{layouts:"/api/v1/ticketing/layouts"}};return c.jsx(yO,{config:a,children:c.jsx(_O,{config:r,children:c.jsx(sO,{config:s,children:c.jsx(TW,{id:e,layoutId:n})})})})},validateSearch:ED({layoutId:kD().optional()})}),DW=sK.update({id:"/users",path:"/users",getParentRoute:()=>jG}),LW=oK.update({id:"/profile",path:"/profile",getParentRoute:()=>jG}),FW=cK.update({id:"/my-page",path:"/my-page",getParentRoute:()=>jG}),IW=hK.update({id:"/$",path:"/$",getParentRoute:()=>jG}),OW=pK.update({id:"/",path:"/",getParentRoute:()=>jG}),zW=fK.update({id:"/",path:"/",getParentRoute:()=>DW}),BW=gK.update({id:"/settings/",path:"/settings/",getParentRoute:()=>jG}),$W=xK.update({id:"/$id",path:"/$id",getParentRoute:()=>DW}),UW=vK.update({id:"/ticketing/venues",path:"/ticketing/venues",getParentRoute:()=>jG}),VW=yK.update({id:"/ticketing/shows",path:"/ticketing/shows",getParentRoute:()=>jG}),qW=bK.update({id:"/ticketing/organizers",path:"/ticketing/organizers",getParentRoute:()=>jG}),HW=EK.update({id:"/settings/security",path:"/settings/security",getParentRoute:()=>jG}),GW=AK.update({id:"/settings/profile",path:"/settings/profile",getParentRoute:()=>jG}),KW=TK.update({id:"/settings/notifications",path:"/settings/notifications",getParentRoute:()=>jG}),WW=DK.update({id:"/settings/language",path:"/settings/language",getParentRoute:()=>jG}),QW=OK.update({id:"/settings/company-addresses",path:"/settings/company-addresses",getParentRoute:()=>jG}),YW=UK.update({id:"/settings/appearance",path:"/settings/appearance",getParentRoute:()=>jG}),XW=qK.update({id:"/settings/account",path:"/settings/account",getParentRoute:()=>jG}),ZW=HK.update({id:"/sales/payments",path:"/sales/payments",getParentRoute:()=>jG}),JW=GK.update({id:"/sales/explore",path:"/sales/explore",getParentRoute:()=>jG}),eQ=KK.update({id:"/sales/employees",path:"/sales/employees",getParentRoute:()=>jG}),tQ=WK.update({id:"/sales/customers",path:"/sales/customers",getParentRoute:()=>jG}),nQ=QK.update({id:"/sales/bookings",path:"/sales/bookings",getParentRoute:()=>jG}),aQ=XK.update({id:"/(auth)/login",path:"/login",getParentRoute:()=>jG}),sQ=JK.update({id:"/(auth)/change-password",path:"/change-password",getParentRoute:()=>jG}),rQ=eW.update({id:"/",path:"/",getParentRoute:()=>UW}),iQ=tW.update({id:"/",path:"/",getParentRoute:()=>VW}),oQ=nW.update({id:"/",path:"/",getParentRoute:()=>qW}),lQ=aW.update({id:"/",path:"/",getParentRoute:()=>ZW}),cQ=sW.update({id:"/",path:"/",getParentRoute:()=>JW}),dQ=rW.update({id:"/",path:"/",getParentRoute:()=>eQ}),uQ=iW.update({id:"/",path:"/",getParentRoute:()=>tQ}),hQ=oW.update({id:"/",path:"/",getParentRoute:()=>nQ}),mQ=cW.update({id:"/$id",path:"/$id",getParentRoute:()=>UW}),pQ=uW.update({id:"/$id",path:"/$id",getParentRoute:()=>VW}),fQ=mW.update({id:"/$id",path:"/$id",getParentRoute:()=>qW}),gQ=fW.update({id:"/settings/ticketing/venue-types",path:"/settings/ticketing/venue-types",getParentRoute:()=>jG}),xQ=xW.update({id:"/settings/ticketing/event-types",path:"/settings/ticketing/event-types",getParentRoute:()=>jG}),vQ=yW.update({id:"/settings/sales/customer-types",path:"/settings/sales/customer-types",getParentRoute:()=>jG}),yQ=wW.update({id:"/settings/sales/customer-groups",path:"/settings/sales/customer-groups",getParentRoute:()=>jG}),bQ=SW.update({id:"/$id",path:"/$id",getParentRoute:()=>ZW}),wQ=CW.update({id:"/$id",path:"/$id",getParentRoute:()=>eQ}),SQ=NW.update({id:"/$id",path:"/$id",getParentRoute:()=>tQ}),jQ=EW.update({id:"/$id",path:"/$id",getParentRoute:()=>nQ}),CQ=RW.update({id:"/ticketing/events/$eventId/inventory",path:"/ticketing/events/$eventId/inventory",getParentRoute:()=>jG}),kQ=MW.update({id:"/seats/designer",path:"/seats/designer",getParentRoute:()=>mQ}),NQ={UsersIdRoute:$W,UsersIndexRoute:zW},_Q=DW._addFileChildren(NQ),EQ={SalesBookingsIdRoute:jQ,SalesBookingsIndexRoute:hQ},PQ=nQ._addFileChildren(EQ),AQ={SalesCustomersIdRoute:SQ,SalesCustomersIndexRoute:uQ},RQ=tQ._addFileChildren(AQ),TQ={SalesEmployeesIdRoute:wQ,SalesEmployeesIndexRoute:dQ},MQ=eQ._addFileChildren(TQ),DQ={SalesExploreIndexRoute:cQ},LQ=JW._addFileChildren(DQ),FQ={SalesPaymentsIdRoute:bQ,SalesPaymentsIndexRoute:lQ},IQ=ZW._addFileChildren(FQ),OQ={TicketingOrganizersIdRoute:fQ,TicketingOrganizersIndexRoute:oQ},zQ=qW._addFileChildren(OQ),BQ={TicketingShowsIdRoute:pQ,TicketingShowsIndexRoute:iQ},$Q=VW._addFileChildren(BQ),UQ={TicketingVenuesIdSeatsDesignerRoute:kQ},VQ={TicketingVenuesIdRoute:mQ._addFileChildren(UQ),TicketingVenuesIndexRoute:rQ},qQ={IndexRoute:OW,SplatRoute:IW,MyPageRoute:FW,ProfileRoute:LW,UsersRoute:_Q,authChangePasswordRoute:sQ,authLoginRoute:aQ,SalesBookingsRoute:PQ,SalesCustomersRoute:RQ,SalesEmployeesRoute:MQ,SalesExploreRoute:LQ,SalesPaymentsRoute:IQ,SettingsAccountRoute:XW,SettingsAppearanceRoute:YW,SettingsCompanyAddressesRoute:QW,SettingsLanguageRoute:WW,SettingsNotificationsRoute:KW,SettingsProfileRoute:GW,SettingsSecurityRoute:HW,TicketingOrganizersRoute:zQ,TicketingShowsRoute:$Q,TicketingVenuesRoute:UW._addFileChildren(VQ),SettingsIndexRoute:BW,SettingsSalesCustomerGroupsRoute:yQ,SettingsSalesCustomerTypesRoute:vQ,SettingsTicketingEventTypesRoute:xQ,SettingsTicketingVenueTypesRoute:gQ,TicketingEventsEventIdInventoryRoute:CQ},HQ=(e=>new An(e))({routeTree:jG._addFileChildren(qQ)._addFileTypes(),defaultPreload:"intent"});M.createRoot(document.getElementById("root")).render(c.jsx(f.StrictMode,{children:c.jsx(fF,{children:c.jsx(dF,{children:c.jsx(aF,{children:c.jsx(wG,{children:c.jsx(Xs,{defaultTheme:"system",storageKey:"ui-theme",children:c.jsx(Js,{defaultDensity:"normal",storageKey:"ui-density",children:c.jsxs(li,{children:[c.jsx(Tn,{router:HQ}),c.jsx(es,{initialIsOpen:!1})]})})})})})})})}));
