function e(e,t){for(var n=0;n<t.length;n++){const s=t[n];if("string"!=typeof s&&!Array.isArray(s))for(const t in s)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(s,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>s[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s,a,r={exports:{}},i={};var o,l,c=(a||(a=1,r.exports=function(){if(s)return i;s=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,s){var a=null;if(void 0!==s&&(a=""+s),void 0!==n.key&&(a=""+n.key),"key"in n)for(var r in s={},n)"key"!==r&&(s[r]=n[r]);else s=n;return n=s.ref,{$$typeof:e,type:t,key:a,ref:void 0!==n?n:null,props:s}}return i.Fragment=t,i.jsx=n,i.jsxs=n,i}()),r.exports),d={exports:{}},u={};function h(){if(o)return u;o=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray;function j(){}var C={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function N(t,n,s){var a=s.ref;return{$$typeof:e,type:t,key:n,ref:void 0!==a?a:null,props:s}}function _(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var P=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,s={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return s[e]})):t.toString(36);var n,s}function R(n,s,a,r,i){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var l,c,d=!1;if(null===n)d=!0;else switch(o){case"bigint":case"string":case"number":d=!0;break;case"object":switch(n.$$typeof){case e:case t:d=!0;break;case h:return R((d=n._init)(n._payload),s,a,r,i)}}if(d)return i=i(n),d=""===r?"."+E(n,0):r,S(i)?(a="",null!=d&&(a=d.replace(P,"$&/")+"/"),R(i,s,a,"",function(e){return e})):null!=i&&(_(i)&&(l=i,c=a+(null==i.key||n&&n.key===i.key?"":(""+i.key).replace(P,"$&/")+"/")+d,i=N(l.type,c,l.props)),s.push(i)),1;d=0;var u,m=""===r?".":r+":";if(S(n))for(var f=0;f<n.length;f++)d+=R(r=n[f],s,a,o=m+E(r,f),i);else if("function"==typeof(f=null===(u=n)||"object"!=typeof u?null:"function"==typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(n=f.call(n),f=0;!(r=n.next()).done;)d+=R(r=r.value,s,a,o=m+E(r,f++),i);else if("object"===o){if("function"==typeof n.then)return R(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(j,j):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),s,a,r,i);throw s=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===s?"object with keys {"+Object.keys(n).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.")}return d}function A(e,t,n){if(null==e)return e;var s=[],a=0;return R(e,s,"","",function(e){return t.call(n,e,a++)}),s}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},D={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return u.Activity=m,u.Children=D,u.Component=v,u.Fragment=n,u.Profiler=a,u.PureComponent=b,u.StrictMode=s,u.Suspense=c,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,u.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},u.cache=function(e){return function(){return e.apply(null,arguments)}},u.cacheSignal=function(){return null},u.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var s=g({},e.props),a=e.key;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)!k.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(s[r]=t[r]);var r=arguments.length-2;if(1===r)s.children=n;else if(1<r){for(var i=Array(r),o=0;o<r;o++)i[o]=arguments[o+2];s.children=i}return N(e.type,a,s)},u.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:r,_context:e},e},u.createElement=function(e,t,n){var s,a={},r=null;if(null!=t)for(s in void 0!==t.key&&(r=""+t.key),t)k.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(a[s]=t[s]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(s in i=e.defaultProps)void 0===a[s]&&(a[s]=i[s]);return N(e,r,a)},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:l,render:e}},u.isValidElement=_,u.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},u.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},u.startTransition=function(e){var t=C.T,n={};C.T=n;try{var s=e(),a=C.S;null!==a&&a(n,s),"object"==typeof s&&null!==s&&"function"==typeof s.then&&s.then(j,M)}catch(r){M(r)}finally{null!==t&&null!==n.types&&(t.types=n.types),C.T=t}},u.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},u.use=function(e){return C.H.use(e)},u.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},u.useCallback=function(e,t){return C.H.useCallback(e,t)},u.useContext=function(e){return C.H.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},u.useEffect=function(e,t){return C.H.useEffect(e,t)},u.useEffectEvent=function(e){return C.H.useEffectEvent(e)},u.useId=function(){return C.H.useId()},u.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},u.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},u.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},u.useMemo=function(e,t){return C.H.useMemo(e,t)},u.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},u.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},u.useRef=function(e){return C.H.useRef(e)},u.useState=function(e){return C.H.useState(e)},u.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},u.useTransition=function(){return C.H.useTransition()},u.version="19.2.3",u}function m(){return l||(l=1,d.exports=h()),d.exports}var p=m();const f=n(p),g=e({__proto__:null,default:f},[p]);var x,v,y={exports:{}},b={},w={exports:{}},S={};function j(){return v||(v=1,w.exports=(x||(x=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<a(r,t)))break e;e[s]=t,e[n]=r,n=s}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,i=r>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<r&&0>a(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>a(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,f=!1,g=!1,x="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var a=n(c);null!==a;){if(null===a.callback)s(c);else{if(!(a.startTime<=e))break;s(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function w(e){if(f=!1,b(e),!p)if(null!==n(l))p=!0,j||(j=!0,S());else{var t=n(c);null!==t&&A(w,t.startTime-e)}}var S,j=!1,C=-1,k=5,N=-1;function _(){return!(!g&&e.unstable_now()-N<k)}function P(){if(g=!1,j){var t=e.unstable_now();N=t;var a=!0;try{e:{p=!1,f&&(f=!1,v(C),C=-1),m=!0;var r=h;try{t:{for(b(t),u=n(l);null!==u&&!(u.expirationTime>t&&_());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){u.callback=o,b(t),a=!0;break t}u===n(l)&&s(l),b(t)}else s(l);u=n(l)}if(null!==u)a=!0;else{var d=n(c);null!==d&&A(w,d.startTime-t),a=!1}}break e}finally{u=null,h=r,m=!1}a=void 0}}finally{a?S():j=!1}}}if("function"==typeof y)S=function(){y(P)};else if("undefined"!=typeof MessageChannel){var E=new MessageChannel,R=E.port2;E.port1.onmessage=P,S=function(){R.postMessage(null)}}else S=function(){x(P,0)};function A(t,n){C=x(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(s,a,r){var i=e.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?i+r:i,s){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return s={id:d++,callback:a,priorityLevel:s,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(s.sortIndex=r,t(c,s),null===n(l)&&s===n(c)&&(f?(v(C),C=-1):f=!0,A(w,r-i))):(s.sortIndex=o,t(l,s),p||m||(p=!0,j||(j=!0,S()))),s},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(S)),S)),w.exports}var C,k,N,_,P={exports:{}},E={};function R(){if(C)return E;C=1;var e=m();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");var r=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function i(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return E.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,E.createPortal=function(e,n){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,n,null,s)},E.flushSync=function(e){var t=r.T,n=s.p;try{if(r.T=null,s.p=2,e)return e()}finally{r.T=t,s.p=n,s.d.f()}},E.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},E.prefetchDNS=function(e){"string"==typeof e&&s.d.D(e)},E.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,a=i(n,t.crossOrigin),r="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:r,fetchPriority:o}):"script"===n&&s.d.X(e,{crossOrigin:a,integrity:r,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},E.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=i(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},E.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,a=i(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:a,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},E.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=i(t.as,t.crossOrigin);s.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},E.requestFormReset=function(e){s.d.r(e)},E.unstable_batchedUpdates=function(e,t){return e(t)},E.useFormState=function(e,t,n){return r.H.useFormState(e,t,n)},E.useFormStatus=function(){return r.H.useHostTransitionStatus()},E.version="19.2.3",E}function A(){if(k)return P.exports;return k=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),P.exports=R(),P.exports}function T(){if(N)return b;N=1;var e=j(),t=m(),n=A();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function r(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function i(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function l(e){if(r(e)!==e)throw Error(s(188))}function c(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=c(e)))return t;e=e.sibling}return null}var d=Object.assign,u=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function T(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case x:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case C:return"SuspenseList";case P:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case y:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var L=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},z=[],B=-1;function $(e){return{current:e}}function U(e){0>B||(e.current=z[B],z[B]=null,B--)}function V(e,t){B++,z[B]=e.current,e.current=t}var q,H,G=$(null),K=$(null),W=$(null),Q=$(null);function Y(e,t){switch(V(W,t),V(K,e),V(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bu(t=yu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(G),V(G,e)}function X(){U(G),U(K),U(W)}function Z(e){null!==e.memoizedState&&V(Q,e);var t=G.current,n=bu(t,e.type);t!==n&&(V(K,e),V(G,n))}function J(e){K.current===e&&(U(G),U(K)),Q.current===e&&(U(Q),hh._currentValue=O)}function ee(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+q+e+H}var te=!1;function ne(e,t){if(!e||te)return"";te=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var s=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){s=r}e.call(n.prototype)}}else{try{throw Error()}catch(i){s=i}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&s&&"string"==typeof o.stack)return[o.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),i=r[0],o=r[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(a=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(s===l.length||a===c.length)for(s=l.length-1,a=c.length-1;1<=s&&0<=a&&l[s]!==c[a];)a--;for(;1<=s&&0<=a;s--,a--)if(l[s]!==c[a]){if(1!==s||1!==a)do{if(s--,0>--a||l[s]!==c[a]){var d="\n"+l[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=s&&0<=a);break}}}finally{te=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ee(n):""}function se(e,t){switch(e.tag){case 26:case 27:case 5:return ee(e.type);case 16:return ee("Lazy");case 13:return e.child!==t&&null!==t?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return ne(e.type,!1);case 11:return ne(e.type.render,!1);case 1:return ne(e.type,!0);case 31:return ee("Activity");default:return""}}function ae(e){try{var t="",n=null;do{t+=se(e,n),n=e,e=e.return}while(e);return t}catch(s){return"\nError generating stack: "+s.message+"\n"+s.stack}}var re=Object.prototype.hasOwnProperty,ie=e.unstable_scheduleCallback,oe=e.unstable_cancelCallback,le=e.unstable_shouldYield,ce=e.unstable_requestPaint,de=e.unstable_now,ue=e.unstable_getCurrentPriorityLevel,he=e.unstable_ImmediatePriority,me=e.unstable_UserBlockingPriority,pe=e.unstable_NormalPriority,fe=e.unstable_LowPriority,ge=e.unstable_IdlePriority,xe=e.log,ve=e.unstable_setDisableYieldValue,ye=null,be=null;function we(e){if("function"==typeof xe&&ve(e),be&&"function"==typeof be.setStrictMode)try{be.setStrictMode(ye,e)}catch(t){}}var Se=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(je(e)/Ce|0)|0},je=Math.log,Ce=Math.LN2;var ke=256,Ne=262144,_e=4194304;function Pe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t,n){var s=e.pendingLanes;if(0===s)return 0;var a=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&s;return 0!==o?0!==(s=o&~r)?a=Pe(s):0!==(i&=o)?a=Pe(i):n||0!==(n=o&~e)&&(a=Pe(n)):0!==(o=s&~r)?a=Pe(o):0!==i?a=Pe(i):n||0!==(n=s&~e)&&(a=Pe(n)),0===a?0:0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(n=t&-t)||32===r&&4194048&n)?t:a}function Re(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=_e;return!(62914560&(_e<<=1))&&(_e=4194304),e}function Me(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Le(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Se(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|261930&n}function Fe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Se(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}function Ie(e,t){var n=t&-t;return 0!==((n=42&n?1:Oe(n))&(e.suspendedLanes|t))?0:n}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ze(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Be(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:Ph(e.type)}function $e(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var Ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Ue,qe="__reactProps$"+Ue,He="__reactContainer$"+Ue,Ge="__reactEvents$"+Ue,Ke="__reactListeners$"+Ue,We="__reactHandles$"+Ue,Qe="__reactResources$"+Ue,Ye="__reactMarker$"+Ue;function Xe(e){delete e[Ve],delete e[qe],delete e[Ge],delete e[Ke],delete e[We]}function Ze(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ou(e);null!==e;){if(n=e[Ve])return n;e=Ou(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[Ve]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function et(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function tt(e){var t=e[Qe];return t||(t=e[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[Ye]=!0}var st=new Set,at={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(at[e]=t,e=0;e<t.length;e++)st.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},ct={};function dt(e,t,n){if(a=t,re.call(ct,a)||!re.call(lt,a)&&(ot.test(a)?ct[a]=!0:(lt[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var s=t.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ut(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ht(e,t,n,s){if(null===s)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+s)}}function mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function pt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=pt(e)?"checked":"value";e._valueTracker=function(e,t,n){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var a=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=pt(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function xt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var vt=/[\n"\\]/g;function yt(e){return e.replace(vt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function bt(e,t,n,s,a,r,i,o){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+mt(t)):e.value!==""+mt(t)&&(e.value=""+mt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?St(e,i,mt(t)):null!=n?St(e,i,mt(n)):null!=s&&e.removeAttribute("value"),null==a&&null!=r&&(e.defaultChecked=!!r),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+mt(o):e.removeAttribute("name")}function wt(e,t,n,s,a,r,i,o){if(null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&"boolean"!=typeof r&&(e.type=r),null!=t||null!=n){if(("submit"===r||"reset"===r)&&null==t)return void ft(e);n=null!=n?""+mt(n):"",t=null!=t?""+mt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}s="function"!=typeof(s=null!=s?s:a)&&"symbol"!=typeof s&&!!s,e.checked=o?e.checked:!!s,e.defaultChecked=!!s,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i),ft(e)}function St(e,t,n){"number"===t&&xt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function jt(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+mt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(s&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+mt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+mt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(s(92));if(L(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=mt(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a),ft(e)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pt(e,t,n){var s=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?s?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":s?e.setProperty(t,n):"number"!=typeof n||0===n||_t.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var r in t)a=t[r],t.hasOwnProperty(r)&&n[r]!==a&&Pt(e,r,a)}else for(var i in t)t.hasOwnProperty(i)&&Pt(e,i,t[i])}function Rt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Lt=null;function Ft(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Ot=null;function zt(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;e:switch(e=t.stateNode,t.type){case"input":if(bt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=a[qe]||null;if(!r)throw Error(s(90));bt(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&gt(a)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&jt(e,!!n.multiple,t,!1)}}}var Bt=!1;function $t(e,t,n){if(Bt)return e(t,n);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==It||null!==Ot)&&(td(),It&&(t=It,e=Ot,Ot=It=null,zt(t),e)))for(t=0;t<e.length;t++)zt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var a=n[qe]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Vt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),qt=!1;if(Vt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Jh){qt=!1}var Gt=null,Kt=null,Wt=null;function Qt(){if(Wt)return Wt;var e,t,n=Kt,s=n.length,a="value"in Gt?Gt.value:Gt.textContent,r=a.length;for(e=0;e<s&&n[e]===a[e];e++);var i=s-e;for(t=1;t<=i&&n[s-t]===a[r-t];t++);return Wt=a.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Zt(){return!1}function Jt(e){function t(t,n,s,a,r){for(var i in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Xt:Zt,this.isPropagationStopped=Zt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var en,tn,nn,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},an=Jt(sn),rn=d({},sn,{view:0,detail:0}),on=Jt(rn),ln=d({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,tn=e.screenY-nn.screenY):tn=en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),cn=Jt(ln),dn=Jt(d({},ln,{dataTransfer:0})),un=Jt(d({},rn,{relatedTarget:0})),hn=Jt(d({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=Jt(d({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),pn=Jt(d({},sn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function yn(){return vn}var bn=Jt(d({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Jt(d({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sn=Jt(d({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),jn=Jt(d({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=Jt(d({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=Jt(d({},sn,{newState:0,oldState:0})),Nn=[9,13,27,32],_n=Vt&&"CompositionEvent"in window,Pn=null;Vt&&"documentMode"in document&&(Pn=document.documentMode);var En=Vt&&"TextEvent"in window&&!Pn,Rn=Vt&&(!_n||Pn&&8<Pn&&11>=Pn),An=String.fromCharCode(32),Tn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fn[e.type]:"textarea"===t}function On(e,t,n,s){It?Ot?Ot.push(s):Ot=[s]:It=s,0<(t=ru(t,"onChange")).length&&(n=new an("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var zn=null,Bn=null;function $n(e){Xd(e,0)}function Un(e){if(gt(et(e)))return e}function Vn(e,t){if("change"===e)return t}var qn=!1;if(Vt){var Hn;if(Vt){var Gn="oninput"in document;if(!Gn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Gn="function"==typeof Kn.oninput}Hn=Gn}else Hn=!1;qn=Hn&&(!document.documentMode||9<document.documentMode)}function Wn(){zn&&(zn.detachEvent("onpropertychange",Qn),Bn=zn=null)}function Qn(e){if("value"===e.propertyName&&Un(Bn)){var t=[];On(t,Bn,e,Ft(e)),$t($n,t)}}function Yn(e,t,n){"focusin"===e?(Wn(),Bn=n,(zn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Wn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Bn)}function Zn(e,t){if("click"===e)return Un(t)}function Jn(e,t){if("input"===e||"change"===e)return Un(t)}var es="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ts(e,t){if(es(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!re.call(t,a)||!es(e[a],t[a]))return!1}return!0}function ns(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ss(e,t){var n,s=ns(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ns(s)}}function as(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?as(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rs(e){for(var t=xt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=xt((e=t.contentWindow).document)}return t}function is(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var os=Vt&&"documentMode"in document&&11>=document.documentMode,ls=null,cs=null,ds=null,us=!1;function hs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;us||null==ls||ls!==xt(s)||("selectionStart"in(s=ls)&&is(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ds&&ts(ds,s)||(ds=s,0<(s=ru(cs,"onSelect")).length&&(t=new an("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ls)))}function ms(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ps={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionrun:ms("Transition","TransitionRun"),transitionstart:ms("Transition","TransitionStart"),transitioncancel:ms("Transition","TransitionCancel"),transitionend:ms("Transition","TransitionEnd")},fs={},gs={};function xs(e){if(fs[e])return fs[e];if(!ps[e])return e;var t,n=ps[e];for(t in n)if(n.hasOwnProperty(t)&&t in gs)return fs[e]=n[t];return e}Vt&&(gs=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);var vs=xs("animationend"),ys=xs("animationiteration"),bs=xs("animationstart"),ws=xs("transitionrun"),Ss=xs("transitionstart"),js=xs("transitioncancel"),Cs=xs("transitionend"),ks=new Map,Ns="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(e,t){ks.set(e,t),rt(t,[e])}Ns.push("scrollEnd");var Ps="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},Es=[],Rs=0,As=0;function Ts(){for(var e=Rs,t=As=Rs=0;t<e;){var n=Es[t];Es[t++]=null;var s=Es[t];Es[t++]=null;var a=Es[t];Es[t++]=null;var r=Es[t];if(Es[t++]=null,null!==s&&null!==a){var i=s.pending;null===i?a.next=a:(a.next=i.next,i.next=a),s.pending=a}0!==r&&Fs(n,a,r)}}function Ms(e,t,n,s){Es[Rs++]=e,Es[Rs++]=t,Es[Rs++]=n,Es[Rs++]=s,As|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Ds(e,t,n,s){return Ms(e,t,n,s),Is(e)}function Ls(e,t){return Ms(e,null,null,t),Is(e)}function Fs(e,t,n){e.lanes|=n;var s=e.alternate;null!==s&&(s.lanes|=n);for(var a=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(s=r.alternate)&&(s.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(a=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,a&&null!==t&&(a=31-Se(n),null===(s=(e=r.hiddenUpdates)[a])?e[a]=[t]:s.push(t),t.lane=536870912|n),r):null}function Is(e){if(50<Gc)throw Gc=0,Kc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Os={};function zs(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bs(e,t,n,s){return new zs(e,t,n,s)}function $s(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Us(e,t){var n=e.alternate;return null===n?((n=Bs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vs(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qs(e,t,n,a,r,i){var o=0;if(a=e,"function"==typeof e)$s(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case P:return(e=Bs(31,n,t,r)).elementType=P,e.lanes=i,e;case f:return Hs(n.children,r,i,t);case g:o=8,r|=24;break;case x:return(e=Bs(12,n,t,2|r)).elementType=x,e.lanes=i,e;case S:return(e=Bs(13,n,t,r)).elementType=S,e.lanes=i,e;case C:return(e=Bs(19,n,t,r)).elementType=C,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case y:o=10;break e;case v:o=9;break e;case w:o=11;break e;case k:o=14;break e;case _:o=16,a=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),a=null}return(t=Bs(o,n,t,r)).elementType=e,t.type=a,t.lanes=i,t}function Hs(e,t,n,s){return(e=Bs(7,e,s,t)).lanes=n,e}function Gs(e,t,n){return(e=Bs(6,e,null,t)).lanes=n,e}function Ks(e){var t=Bs(18,null,null,0);return t.stateNode=e,t}function Ws(e,t,n){return(t=Bs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qs=new WeakMap;function Ys(e,t){if("object"==typeof e&&null!==e){var n=Qs.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ae(t)},Qs.set(e,t),t)}return{value:e,source:t,stack:ae(t)}}var Xs=[],Zs=0,Js=null,ea=0,ta=[],na=0,sa=null,aa=1,ra="";function ia(e,t){Xs[Zs++]=ea,Xs[Zs++]=Js,Js=e,ea=t}function oa(e,t,n){ta[na++]=aa,ta[na++]=ra,ta[na++]=sa,sa=e;var s=aa;e=ra;var a=32-Se(s)-1;s&=~(1<<a),n+=1;var r=32-Se(t)+a;if(30<r){var i=a-a%5;r=(s&(1<<i)-1).toString(32),s>>=i,a-=i,aa=1<<32-Se(t)+a|n<<a|s,ra=r+e}else aa=1<<r|n<<a|s,ra=e}function la(e){null!==e.return&&(ia(e,1),oa(e,1,0))}function ca(e){for(;e===Js;)Js=Xs[--Zs],Xs[Zs]=null,ea=Xs[--Zs],Xs[Zs]=null;for(;e===sa;)sa=ta[--na],ta[na]=null,ra=ta[--na],ta[na]=null,aa=ta[--na],ta[na]=null}function da(e,t){ta[na++]=aa,ta[na++]=ra,ta[na++]=sa,aa=t.id,ra=t.overflow,sa=e}var ua=null,ha=null,ma=!1,pa=null,fa=!1,ga=Error(s(519));function xa(e){throw ja(Ys(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ga}function va(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[Ve]=e,t[qe]=s,n){case"dialog":Zd("cancel",t),Zd("close",t);break;case"iframe":case"object":case"embed":Zd("load",t);break;case"video":case"audio":for(n=0;n<Qd.length;n++)Zd(Qd[n],t);break;case"source":Zd("error",t);break;case"img":case"image":case"link":Zd("error",t),Zd("load",t);break;case"details":Zd("toggle",t);break;case"input":Zd("invalid",t),wt(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Zd("invalid",t);break;case"textarea":Zd("invalid",t),kt(t,s.value,s.defaultValue,s.children)}"string"!=typeof(n=s.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===s.suppressHydrationWarning||uu(t.textContent,n)?(null!=s.popover&&(Zd("beforetoggle",t),Zd("toggle",t)),null!=s.onScroll&&Zd("scroll",t),null!=s.onScrollEnd&&Zd("scrollend",t),null!=s.onClick&&(t.onclick=Dt),t=!0):t=!1,t||xa(e,!0)}function ya(e){for(ua=e.return;ua;)switch(ua.tag){case 5:case 31:case 13:return void(fa=!1);case 27:case 3:return void(fa=!0);default:ua=ua.return}}function ba(e){if(e!==ua)return!1;if(!ma)return ya(e),ma=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wu(e.type,e.memoizedProps)),t=!t),t&&ha&&xa(e),ya(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ha=Iu(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ha=Iu(e)}else 27===n?(n=ha,Pu(e.type)?(e=Fu,Fu=null,ha=e):ha=n):ha=ua?Lu(e.stateNode.nextSibling):null;return!0}function wa(){ha=ua=null,ma=!1}function Sa(){var e=pa;return null!==e&&(null===Tc?Tc=e:Tc.push.apply(Tc,e),pa=null),e}function ja(e){null===pa?pa=[e]:pa.push(e)}var Ca=$(null),ka=null,Na=null;function _a(e,t,n){V(Ca,t._currentValue),t._currentValue=n}function Pa(e){e._currentValue=Ca.current,U(Ca)}function Ea(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ra(e,t,n,a){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var o=r.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ea(i.return,n,e),a||(o=null);break e}i=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(s(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Ea(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Aa(e,t,n,a){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(524288&r.flags)i=!0;else if(262144&r.flags)break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=r.type;es(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===Q.current){if(null===(o=r.alternate))throw Error(s(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(hh):e=[hh])}r=r.return}null!==e&&Ra(t,e,n,a),t.flags|=262144}function Ta(e){for(e=e.firstContext;null!==e;){if(!es(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ma(e){ka=e,Na=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Da(e){return Fa(ka,e)}function La(e,t){return null===ka&&Ma(e),Fa(e,t)}function Fa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Na){if(null===e)throw Error(s(308));Na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Na=Na.next=t;return n}var Ia="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Oa=e.unstable_scheduleCallback,za=e.unstable_NormalPriority,Ba={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $a(){return{controller:new Ia,data:new Map,refCount:0}}function Ua(e){e.refCount--,0===e.refCount&&Oa(za,function(){e.controller.abort()})}var Va=null,qa=0,Ha=0,Ga=null;function Ka(){if(0===--qa&&null!==Va){null!==Ga&&(Ga.status="fulfilled");var e=Va;Va=null,Ha=0,Ga=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Wa=F.S;F.S=function(e,t){Lc=de(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Va){var n=Va=[];qa=0,Ha=qd(),Ga={status:"pending",value:void 0,then:function(e){n.push(e)}}}qa++,t.then(Ka,Ka)}(0,t),null!==Wa&&Wa(e,t)};var Qa=$(null);function Ya(){var e=Qa.current;return null!==e?e:gc.pooledCache}function Xa(e,t){V(Qa,null===t?Qa.current:t.pool)}function Za(){var e=Ya();return null===e?null:{parent:Ba._currentValue,pool:e}}var Ja=Error(s(460)),er=Error(s(474)),tr=Error(s(542)),nr={then:function(){}};function sr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ar(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Dt,Dt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw lr(e=t.reason),e;default:if("string"==typeof t.status)t.then(Dt,Dt);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw lr(e=t.reason),e}throw ir=t,Ja}}function rr(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw ir=t,Ja;throw t}}var ir=null;function or(){if(null===ir)throw Error(s(459));var e=ir;return ir=null,e}function lr(e){if(e===Ja||e===tr)throw Error(s(483))}var cr=null,dr=0;function ur(e){var t=dr;return dr+=1,null===cr&&(cr=[]),ar(cr,e,t)}function hr(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function mr(e,t){if(t.$$typeof===u)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pr(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Us(e,t)).index=0,e.sibling=null,e}function i(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=67108866,n):s:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Gs(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var a=n.type;return a===f?u(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===_&&rr(a)===t.type)?(hr(t=r(t,n.props),n),t.return=e,t):(hr(t=qs(n.type,n.key,n.props,null,e.mode,s),n),t.return=e,t)}function d(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ws(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,s,a){return null===t||7!==t.tag?((t=Hs(n,e.mode,s,a)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Gs(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case h:return hr(n=qs(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Ws(t,e.mode,n)).return=e,t;case _:return m(e,t=rr(t),n)}if(L(t)||T(t))return(t=Hs(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,ur(t),n);if(t.$$typeof===y)return m(e,La(e,t),n);mr(e,t)}return null}function g(e,t,n,s){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:l(e,t,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case h:return n.key===a?c(e,t,n,s):null;case p:return n.key===a?d(e,t,n,s):null;case _:return g(e,t,n=rr(n),s)}if(L(n)||T(n))return null!==a?null:u(e,t,n,s,null);if("function"==typeof n.then)return g(e,t,ur(n),s);if(n.$$typeof===y)return g(e,t,La(e,n),s);mr(e,n)}return null}function x(e,t,n,s,a){if("string"==typeof s&&""!==s||"number"==typeof s||"bigint"==typeof s)return l(t,e=e.get(n)||null,""+s,a);if("object"==typeof s&&null!==s){switch(s.$$typeof){case h:return c(t,e=e.get(null===s.key?n:s.key)||null,s,a);case p:return d(t,e=e.get(null===s.key?n:s.key)||null,s,a);case _:return x(e,t,n,s=rr(s),a)}if(L(s)||T(s))return u(t,e=e.get(n)||null,s,a,null);if("function"==typeof s.then)return x(e,t,n,ur(s),a);if(s.$$typeof===y)return x(e,t,n,La(t,s),a);mr(t,s)}return null}function v(l,c,d,u){if("object"==typeof d&&null!==d&&d.type===f&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case h:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===f){if(7===c.tag){n(l,c.sibling),(u=r(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===_&&rr(b)===c.type){n(l,c.sibling),hr(u=r(c,d.props),d),u.return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}d.type===f?((u=Hs(d.props.children,l.mode,u,d.key)).return=l,l=u):(hr(u=qs(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return o(l);case p:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(u=r(c,d.children||[])).return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}(u=Ws(d,l.mode,u)).return=l,l=u}return o(l);case _:return v(l,c,d=rr(d),u)}if(L(d))return function(s,r,o,l){for(var c=null,d=null,u=r,h=r=0,p=null;null!==u&&h<o.length;h++){u.index>h?(p=u,u=null):p=u.sibling;var f=g(s,u,o[h],l);if(null===f){null===u&&(u=p);break}e&&u&&null===f.alternate&&t(s,u),r=i(f,r,h),null===d?c=f:d.sibling=f,d=f,u=p}if(h===o.length)return n(s,u),ma&&ia(s,h),c;if(null===u){for(;h<o.length;h++)null!==(u=m(s,o[h],l))&&(r=i(u,r,h),null===d?c=u:d.sibling=u,d=u);return ma&&ia(s,h),c}for(u=a(u);h<o.length;h++)null!==(p=x(u,s,h,o[h],l))&&(e&&null!==p.alternate&&u.delete(null===p.key?h:p.key),r=i(p,r,h),null===d?c=p:d.sibling=p,d=p);return e&&u.forEach(function(e){return t(s,e)}),ma&&ia(s,h),c}(l,c,d,u);if(T(d)){if("function"!=typeof(b=T(d)))throw Error(s(150));return function(r,o,l,c){if(null==l)throw Error(s(151));for(var d=null,u=null,h=o,p=o=0,f=null,v=l.next();null!==h&&!v.done;p++,v=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var y=g(r,h,v.value,c);if(null===y){null===h&&(h=f);break}e&&h&&null===y.alternate&&t(r,h),o=i(y,o,p),null===u?d=y:u.sibling=y,u=y,h=f}if(v.done)return n(r,h),ma&&ia(r,p),d;if(null===h){for(;!v.done;p++,v=l.next())null!==(v=m(r,v.value,c))&&(o=i(v,o,p),null===u?d=v:u.sibling=v,u=v);return ma&&ia(r,p),d}for(h=a(h);!v.done;p++,v=l.next())null!==(v=x(h,r,p,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?p:v.key),o=i(v,o,p),null===u?d=v:u.sibling=v,u=v);return e&&h.forEach(function(e){return t(r,e)}),ma&&ia(r,p),d}(l,c,d=b.call(d),u)}if("function"==typeof d.then)return v(l,c,ur(d),u);if(d.$$typeof===y)return v(l,c,La(l,d),u);mr(l,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(u=r(c,d)).return=l,l=u):(n(l,c),(u=Gs(d,l.mode,u)).return=l,l=u),o(l)):n(l,c)}return function(e,t,n,s){try{dr=0;var a=v(e,t,n,s);return cr=null,a}catch(i){if(i===Ja||i===tr)throw i;var r=Bs(29,i,null,e.mode);return r.lanes=s,r.return=e,r}}}var fr=pr(!0),gr=pr(!1),xr=!1;function vr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function br(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wr(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,2&fc){var a=s.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),s.pending=t,t=Is(e),Fs(e,null,n),t}return Ms(e,s,t,n),Is(e)}function Sr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Fe(e,n)}}function jr(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var a=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?a=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?a=r=t:r=r.next=t}else a=r=t;return n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Cr=!1;function kr(){if(Cr){if(null!==Ga)throw Ga}}function Nr(e,t,n,s){Cr=!1;var a=e.updateQueue;xr=!1;var r=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?r=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==r){var h=a.baseState;for(i=0,u=c=l=null,o=r;;){var m=-536870913&o.lane,p=m!==o.lane;if(p?(vc&m)===m:(s&m)===m){0!==m&&m===Ha&&(Cr=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,g=o;m=t;var x=n;switch(g.tag){case 1:if("function"==typeof(f=g.payload)){h=f.call(x,h,m);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(m="function"==typeof(f=g.payload)?f.call(x,h,m):f))break e;h=d({},h,m);break e;case 2:xr=!0}}null!==(m=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[m]:p.push(m))}else p={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,i|=m;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}null===u&&(l=h),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===r&&(a.shared.lanes=0),Nc|=i,e.lanes=i,e.memoizedState=h}}function _r(e,t){if("function"!=typeof e)throw Error(s(191,e));e.call(t)}function Pr(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)_r(n[e],t)}var Er=$(null),Rr=$(0);function Ar(e,t){V(Rr,e=Cc),V(Er,t),Cc=e|t.baseLanes}function Tr(){V(Rr,Cc),V(Er,Er.current)}function Mr(){Cc=Rr.current,U(Er),U(Rr)}var Dr=$(null),Lr=null;function Fr(e){var t=e.alternate;V($r,1&$r.current),V(Dr,e),null===Lr&&(null===t||null!==Er.current||null!==t.memoizedState)&&(Lr=e)}function Ir(e){V($r,$r.current),V(Dr,e),null===Lr&&(Lr=e)}function Or(e){22===e.tag?(V($r,$r.current),V(Dr,e),null===Lr&&(Lr=e)):zr()}function zr(){V($r,$r.current),V(Dr,Dr.current)}function Br(e){U(Dr),Lr===e&&(Lr=null),U($r)}var $r=$(0);function Ur(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Mu(n)||Du(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vr=0,qr=null,Hr=null,Gr=null,Kr=!1,Wr=!1,Qr=!1,Yr=0,Xr=0,Zr=null,Jr=0;function ei(){throw Error(s(321))}function ti(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!es(e[n],t[n]))return!1;return!0}function ni(e,t,n,s,a,r){return Vr=r,qr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=null===e||null===e.memoizedState?vo:yo,Qr=!1,r=n(s,a),Qr=!1,Wr&&(r=ai(t,n,s,a)),si(e),r}function si(e){F.H=xo;var t=null!==Hr&&null!==Hr.next;if(Vr=0,Gr=Hr=qr=null,Kr=!1,Xr=0,Zr=null,t)throw Error(s(300));null===e||Lo||null!==(e=e.dependencies)&&Ta(e)&&(Lo=!0)}function ai(e,t,n,a){qr=e;var r=0;do{if(Wr&&(Zr=null),Xr=0,Wr=!1,25<=r)throw Error(s(301));if(r+=1,Gr=Hr=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}F.H=bo,i=t(n,a)}while(Wr);return i}function ri(){var e=F.H,t=e.useState()[0];return t="function"==typeof t.then?ui(t):t,e=e.useState()[0],(null!==Hr?Hr.memoizedState:null)!==e&&(qr.flags|=1024),t}function ii(){var e=0!==Yr;return Yr=0,e}function oi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function li(e){if(Kr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Kr=!1}Vr=0,Gr=Hr=qr=null,Wr=!1,Xr=Yr=0,Zr=null}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gr?qr.memoizedState=Gr=e:Gr=Gr.next=e,Gr}function di(){if(null===Hr){var e=qr.alternate;e=null!==e?e.memoizedState:null}else e=Hr.next;var t=null===Gr?qr.memoizedState:Gr.next;if(null!==t)Gr=t,Hr=e;else{if(null===e){if(null===qr.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Hr=e).memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},null===Gr?qr.memoizedState=Gr=e:Gr=Gr.next=e}return Gr}function ui(e){var t=Xr;return Xr+=1,null===Zr&&(Zr=[]),e=ar(Zr,e,t),t=qr,null===(null===Gr?t.memoizedState:Gr.next)&&(t=t.alternate,F.H=null===t||null===t.memoizedState?vo:yo),e}function hi(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ui(e);if(e.$$typeof===y)return Da(e)}throw Error(s(438,String(e)))}function mi(e){var t=null,n=qr.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var s=qr.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=E;return t.index++,n}function pi(e,t){return"function"==typeof t?t(e):t}function fi(e){return gi(di(),Hr,e)}function gi(e,t,n){var a=e.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=n;var r=e.baseQueue,i=a.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,a.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var l=o=null,c=null,d=t=r.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(vc&h)===h:(Vr&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Ha&&(u=!0);else{if((Vr&m)===m){d=d.next,m===Ha&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,qr.lanes|=m,Nc|=m}h=d.action,Qr&&n(i,h),i=d.hasEagerState?d.eagerState:n(i,h)}else m={lane:h,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,o=i):c=c.next=m,qr.lanes|=h,Nc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=i:c.next=l,!es(i,e.memoizedState)&&(Lo=!0,u&&null!==(n=Ga)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,a.lastRenderedState=i}return null===r&&(a.lanes=0),[e.memoizedState,a.dispatch]}function xi(e){var t=di(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);es(i,t.memoizedState)||(Lo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function vi(e,t,n){var a=qr,r=di(),i=ma;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!es((Hr||r).memoizedState,n);if(o&&(r.memoizedState=n,Lo=!0),r=r.queue,Vi(wi.bind(null,a,r,e),[e]),r.getSnapshot!==t||o||null!==Gr&&1&Gr.memoizedState.tag){if(a.flags|=2048,Oi(9,{destroy:void 0},bi.bind(null,a,r,n,t),null),null===gc)throw Error(s(349));i||127&Vr||yi(a,t,n)}return n}function yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=qr.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bi(e,t,n,s){t.value=n,t.getSnapshot=s,Si(t)&&ji(e)}function wi(e,t,n){return n(function(){Si(t)&&ji(e)})}function Si(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!es(e,n)}catch(s){return!0}}function ji(e){var t=Ls(e,2);null!==t&&Yc(t,e,2)}function Ci(e){var t=ci();if("function"==typeof e){var n=e;if(e=n(),Qr){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:e},t}function ki(e,t,n,s){return e.baseState=n,gi(e,Hr,"function"==typeof s?s:pi)}function Ni(e,t,n,a,r){if(po(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==F.T?n(!0):i.isTransition=!1,a(i),null===(n=t.pending)?(i.next=t.pending=i,_i(t,i)):(i.next=n.next,t.pending=n.next=i)}}function _i(e,t){var n=t.action,s=t.payload,a=e.state;if(t.isTransition){var r=F.T,i={};F.T=i;try{var o=n(a,s),l=F.S;null!==l&&l(i,o),Pi(e,t,o)}catch(c){Ri(e,t,c)}finally{null!==r&&null!==i.types&&(r.types=i.types),F.T=r}}else try{Pi(e,t,r=n(a,s))}catch(d){Ri(e,t,d)}}function Pi(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Ei(e,t,n)},function(n){return Ri(e,t,n)}):Ei(e,t,n)}function Ei(e,t,n){t.status="fulfilled",t.value=n,Ai(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,_i(e,n)))}function Ri(e,t,n){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=n,Ai(t),t=t.next}while(t!==s)}e.action=null}function Ai(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ti(e,t){return t}function Mi(e,t){if(ma){var n=gc.formState;if(null!==n){e:{var s=qr;if(ma){if(ha){t:{for(var a=ha,r=fa;8!==a.nodeType;){if(!r){a=null;break t}if(null===(a=Lu(a.nextSibling))){a=null;break t}}a="F!"===(r=a.data)||"F"===r?a:null}if(a){ha=Lu(a.nextSibling),s="F!"===a.data;break e}}xa(s)}s=!1}s&&(t=n[0])}}return(n=ci()).memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},n.queue=s,n=uo.bind(null,qr,s),s.dispatch=n,s=Ci(!1),r=mo.bind(null,qr,!1,s.queue),a={state:t,dispatch:null,action:e,pending:null},(s=ci()).queue=a,n=Ni.bind(null,qr,a,r,n),a.dispatch=n,s.memoizedState=e,[t,n,!1]}function Di(e){return Li(di(),Hr,e)}function Li(e,t,n){if(t=gi(e,t,Ti)[0],e=fi(pi)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var s=ui(t)}catch(i){if(i===Ja)throw tr;throw i}else s=t;var a=(t=di()).queue,r=a.dispatch;return n!==t.memoizedState&&(qr.flags|=2048,Oi(9,{destroy:void 0},Fi.bind(null,a,n),null)),[s,r,e]}function Fi(e,t){e.action=t}function Ii(e){var t=di(),n=Hr;if(null!==n)return Li(t,n,e);di(),t=t.memoizedState;var s=(n=di()).queue.dispatch;return n.memoizedState=e,[t,s,!1]}function Oi(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},null===(t=qr.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function zi(){return di().memoizedState}function Bi(e,t,n,s){var a=ci();qr.flags|=e,a.memoizedState=Oi(1|t,{destroy:void 0},n,void 0===s?null:s)}function $i(e,t,n,s){var a=di();s=void 0===s?null:s;var r=a.memoizedState.inst;null!==Hr&&null!==s&&ti(s,Hr.memoizedState.deps)?a.memoizedState=Oi(t,r,n,s):(qr.flags|=e,a.memoizedState=Oi(1|t,r,n,s))}function Ui(e,t){Bi(8390656,8,e,t)}function Vi(e,t){$i(2048,8,e,t)}function qi(e){var t=di().memoizedState;return function(e){qr.flags|=4;var t=qr.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},qr.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&fc)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Hi(e,t){return $i(4,2,e,t)}function Gi(e,t){return $i(4,4,e,t)}function Ki(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Wi(e,t,n){n=null!=n?n.concat([e]):null,$i(4,4,Ki.bind(null,t,e),n)}function Qi(){}function Yi(e,t){var n=di();t=void 0===t?null:t;var s=n.memoizedState;return null!==t&&ti(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Xi(e,t){var n=di();t=void 0===t?null:t;var s=n.memoizedState;if(null!==t&&ti(t,s[1]))return s[0];if(s=e(),Qr){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[s,t],s}function Zi(e,t,n){return void 0===n||1073741824&Vr&&!(261930&vc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),qr.lanes|=e,Nc|=e,n)}function Ji(e,t,n,s){return es(n,t)?n:null!==Er.current?(e=Zi(e,n,s),es(e,t)||(Lo=!0),e):42&Vr&&(!(1073741824&Vr)||261930&vc)?(e=Qc(),qr.lanes|=e,Nc|=e,t):(Lo=!0,e.memoizedState=n)}function eo(e,t,n,s,a){var r=I.p;I.p=0!==r&&8>r?r:8;var i,o,l,c=F.T,d={};F.T=d,mo(e,!1,t,n);try{var u=a(),h=F.S;if(null!==h&&h(d,u),null!==u&&"object"==typeof u&&"function"==typeof u.then)ho(e,t,(i=s,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},u.then(function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Wc());else ho(e,t,s,Wc())}catch(m){ho(e,t,{then:function(){},status:"rejected",reason:m},Wc())}finally{I.p=r,null!==c&&null!==d.types&&(c.types=d.types),F.T=c}}function to(){}function no(e,t,n,a){if(5!==e.tag)throw Error(s(476));var r=so(e).queue;eo(e,r,t,O,null===n?to:function(){return ao(e),n(a)})}function so(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ao(e){var t=so(e);null===t.next&&(t=e.alternate.memoizedState),ho(e,t.next.queue,{},Wc())}function ro(){return Da(hh)}function io(){return di().memoizedState}function oo(){return di().memoizedState}function lo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Wc(),s=wr(t,e=br(n),n);return null!==s&&(Yc(s,t,n),Sr(s,t,n)),t={cache:$a()},void(e.payload=t)}t=t.return}}function co(e,t,n){var s=Wc();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},po(e)?fo(t,n):null!==(n=Ds(e,t,n,s))&&(Yc(n,e,s),go(n,t,s))}function uo(e,t,n){ho(e,t,n,Wc())}function ho(e,t,n,s){var a={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(po(e))fo(t,a);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,n);if(a.hasEagerState=!0,a.eagerState=o,es(o,i))return Ms(e,t,a,0),null===gc&&Ts(),!1}catch(l){}if(null!==(n=Ds(e,t,a,s)))return Yc(n,e,s),go(n,t,s),!0}return!1}function mo(e,t,n,a){if(a={lane:2,revertLane:qd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},po(e)){if(t)throw Error(s(479))}else null!==(t=Ds(e,n,a,2))&&Yc(t,e,2)}function po(e){var t=e.alternate;return e===qr||null!==t&&t===qr}function fo(e,t){Wr=Kr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function go(e,t,n){if(4194048&n){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Fe(e,n)}}var xo={readContext:Da,use:hi,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useInsertionEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useSyncExternalStore:ei,useId:ei,useHostTransitionStatus:ei,useFormState:ei,useActionState:ei,useOptimistic:ei,useMemoCache:ei,useCacheRefresh:ei};xo.useEffectEvent=ei;var vo={readContext:Da,use:hi,useCallback:function(e,t){return ci().memoizedState=[e,void 0===t?null:t],e},useContext:Da,useEffect:Ui,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Bi(4194308,4,Ki.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bi(4194308,4,e,t)},useInsertionEffect:function(e,t){Bi(4,2,e,t)},useMemo:function(e,t){var n=ci();t=void 0===t?null:t;var s=e();if(Qr){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=ci();if(void 0!==n){var a=n(t);if(Qr){we(!0);try{n(t)}finally{we(!1)}}}else a=t;return s.memoizedState=s.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},s.queue=e,e=e.dispatch=co.bind(null,qr,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},ci().memoizedState=e},useState:function(e){var t=(e=Ci(e)).queue,n=uo.bind(null,qr,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qi,useDeferredValue:function(e,t){return Zi(ci(),e,t)},useTransition:function(){var e=Ci(!1);return e=eo.bind(null,qr,e.queue,!0,!1),ci().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=qr,r=ci();if(ma){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===gc)throw Error(s(349));127&vc||yi(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Ui(wi.bind(null,a,i,e),[e]),a.flags|=2048,Oi(9,{destroy:void 0},bi.bind(null,a,i,n,t),null),n},useId:function(){var e=ci(),t=gc.identifierPrefix;if(ma){var n=ra;t="_"+t+"R_"+(n=(aa&~(1<<32-Se(aa)-1)).toString(32)+n),0<(n=Yr++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Jr++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Mi,useActionState:Mi,useOptimistic:function(e){var t=ci();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=mo.bind(null,qr,!0,n),n.dispatch=t,[e,t]},useMemoCache:mi,useCacheRefresh:function(){return ci().memoizedState=lo.bind(null,qr)},useEffectEvent:function(e){var t=ci(),n={impl:e};return t.memoizedState=n,function(){if(2&fc)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Da,use:hi,useCallback:Yi,useContext:Da,useEffect:Vi,useImperativeHandle:Wi,useInsertionEffect:Hi,useLayoutEffect:Gi,useMemo:Xi,useReducer:fi,useRef:zi,useState:function(){return fi(pi)},useDebugValue:Qi,useDeferredValue:function(e,t){return Ji(di(),Hr.memoizedState,e,t)},useTransition:function(){var e=fi(pi)[0],t=di().memoizedState;return["boolean"==typeof e?e:ui(e),t]},useSyncExternalStore:vi,useId:io,useHostTransitionStatus:ro,useFormState:Di,useActionState:Di,useOptimistic:function(e,t){return ki(di(),0,e,t)},useMemoCache:mi,useCacheRefresh:oo};yo.useEffectEvent=qi;var bo={readContext:Da,use:hi,useCallback:Yi,useContext:Da,useEffect:Vi,useImperativeHandle:Wi,useInsertionEffect:Hi,useLayoutEffect:Gi,useMemo:Xi,useReducer:xi,useRef:zi,useState:function(){return xi(pi)},useDebugValue:Qi,useDeferredValue:function(e,t){var n=di();return null===Hr?Zi(n,e,t):Ji(n,Hr.memoizedState,e,t)},useTransition:function(){var e=xi(pi)[0],t=di().memoizedState;return["boolean"==typeof e?e:ui(e),t]},useSyncExternalStore:vi,useId:io,useHostTransitionStatus:ro,useFormState:Ii,useActionState:Ii,useOptimistic:function(e,t){var n=di();return null!==Hr?ki(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:mi,useCacheRefresh:oo};function wo(e,t,n,s){n=null==(n=n(s,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=qi;var So={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Wc(),a=br(s);a.payload=t,null!=n&&(a.callback=n),null!==(t=wr(e,a,s))&&(Yc(t,e,s),Sr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Wc(),a=br(s);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=wr(e,a,s))&&(Yc(t,e,s),Sr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wc(),s=br(n);s.tag=2,null!=t&&(s.callback=t),null!==(t=wr(e,s,n))&&(Yc(t,e,n),Sr(t,e,n))}};function jo(e,t,n,s,a,r,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!ts(n,s)||!ts(a,r))}function Co(e,t,n,s){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&So.enqueueReplaceState(t,t.state,null)}function ko(e,t){var n=t;if("ref"in t)for(var s in n={},t)"ref"!==s&&(n[s]=t[s]);if(e=e.defaultProps)for(var a in n===t&&(n=d({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function No(e){Ps(e)}function _o(e){}function Po(e){Ps(e)}function Eo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ro(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Ao(e,t,n){return(n=br(n)).tag=3,n.payload={element:null},n.callback=function(){Eo(e,t)},n}function To(e){return(e=br(e)).tag=3,e}function Mo(e,t,n,s){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var r=s.value;e.payload=function(){return a(r)},e.callback=function(){Ro(t,n,s)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){Ro(t,n,s),"function"!=typeof a&&(null===Oc?Oc=new Set([this]):Oc.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}var Do=Error(s(461)),Lo=!1;function Fo(e,t,n,s){t.child=null===e?gr(t,null,n,s):fr(t,e.child,n,s)}function Io(e,t,n,s,a){n=n.render;var r=t.ref;if("ref"in s){var i={};for(var o in s)"ref"!==o&&(i[o]=s[o])}else i=s;return Ma(t),s=ni(e,t,n,i,r,a),o=ii(),null===e||Lo?(ma&&o&&la(t),t.flags|=1,Fo(e,t,s,a),t.child):(oi(e,t,a),il(e,t,a))}function Oo(e,t,n,s,a){if(null===e){var r=n.type;return"function"!=typeof r||$s(r)||void 0!==r.defaultProps||null!==n.compare?((e=qs(n.type,null,s,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,zo(e,t,r,s,a))}if(r=e.child,!ol(e,a)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:ts)(i,s)&&e.ref===t.ref)return il(e,t,a)}return t.flags|=1,(e=Us(r,s)).ref=t.ref,e.return=t,t.child=e}function zo(e,t,n,s,a){if(null!==e){var r=e.memoizedProps;if(ts(r,s)&&e.ref===t.ref){if(Lo=!1,t.pendingProps=s=r,!ol(e,a))return t.lanes=e.lanes,il(e,t,a);131072&e.flags&&(Lo=!0)}}return Go(e,t,n,s,a)}function Bo(e,t,n,s){var a=s.children,r=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===s.mode){if(128&t.flags){if(r=null!==r?r.baseLanes|n:n,null!==e){for(s=t.child=e.child,a=0;null!==s;)a=a|s.lanes|s.childLanes,s=s.sibling;s=a&~r}else s=0,t.child=null;return Uo(e,t,r,n,s)}if(!(536870912&n))return s=t.lanes=536870912,Uo(e,t,null!==r?r.baseLanes|n:n,n,s);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xa(0,null!==r?r.cachePool:null),null!==r?Ar(t,r):Tr(),Or(t)}else null!==r?(Xa(0,r.cachePool),Ar(t,r),zr(),t.memoizedState=null):(null!==e&&Xa(0,null),Tr(),zr());return Fo(e,t,a,n),t.child}function $o(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uo(e,t,n,s,a){var r=Ya();return r=null===r?null:{parent:Ba._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Xa(0,null),Tr(),Or(t),null!==e&&Aa(e,t,s,!0),t.childLanes=a,null}function Vo(e,t){return(t=tl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return fr(t,e.child,null,n),(e=Vo(t,t.pendingProps)).flags|=2,Br(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Go(e,t,n,s,a){return Ma(t),n=ni(e,t,n,s,void 0,a),s=ii(),null===e||Lo?(ma&&s&&la(t),t.flags|=1,Fo(e,t,n,a),t.child):(oi(e,t,a),il(e,t,a))}function Ko(e,t,n,s,a,r){return Ma(t),t.updateQueue=null,n=ai(t,s,n,a),si(e),s=ii(),null===e||Lo?(ma&&s&&la(t),t.flags|=1,Fo(e,t,n,r),t.child):(oi(e,t,r),il(e,t,r))}function Wo(e,t,n,s,a){if(Ma(t),null===t.stateNode){var r=Os,i=n.contextType;"object"==typeof i&&null!==i&&(r=Da(i)),r=new n(s,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=So,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=s,r.state=t.memoizedState,r.refs={},vr(t),i=n.contextType,r.context="object"==typeof i&&null!==i?Da(i):Os,r.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(wo(t,n,i,s),r.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(i=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),i!==r.state&&So.enqueueReplaceState(r,r.state,null),Nr(t,s,r,a),kr(),r.state=t.memoizedState),"function"==typeof r.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){r=t.stateNode;var o=t.memoizedProps,l=ko(n,o);r.props=l;var c=r.context,d=n.contextType;i=Os,"object"==typeof d&&null!==d&&(i=Da(d));var u=n.getDerivedStateFromProps;d="function"==typeof u||"function"==typeof r.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o||c!==i)&&Co(t,r,s,i),xr=!1;var h=t.memoizedState;r.state=h,Nr(t,s,r,a),kr(),c=t.memoizedState,o||h!==c||xr?("function"==typeof u&&(wo(t,n,u,s),c=t.memoizedState),(l=xr||jo(t,n,l,s,h,c,i))?(d||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.flags|=4194308)):("function"==typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),r.props=s,r.state=c,r.context=i,s=l):("function"==typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,yr(e,t),d=ko(n,i=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=n.contextType,l=Os,"object"==typeof c&&null!==c&&(l=Da(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(i!==u||h!==l)&&Co(t,r,s,l),xr=!1,h=t.memoizedState,r.state=h,Nr(t,s,r,a),kr();var m=t.memoizedState;i!==u||h!==m||xr||null!==e&&null!==e.dependencies&&Ta(e.dependencies)?("function"==typeof o&&(wo(t,n,o,s),m=t.memoizedState),(d=xr||jo(t,n,d,s,h,m,l)||null!==e&&null!==e.dependencies&&Ta(e.dependencies))?(c||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(s,m,l),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,m,l)),"function"==typeof r.componentDidUpdate&&(t.flags|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),r.props=s,r.state=m,r.context=l,s=d):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Ho(e,t),s=!!(128&t.flags),r||s?(r=t.stateNode,n=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&s?(t.child=fr(t,e.child,null,a),t.child=fr(t,null,n,a)):Fo(e,t,n,a),t.memoizedState=r.state,e=t.child):e=il(e,t,a),e}function Qo(e,t,n,s){return wa(),t.flags|=256,Fo(e,t,n,s),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Za()}}function Zo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ec),e}function Jo(e,t,n){var a,r=t.pendingProps,i=!1,o=!!(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&!!(2&$r.current)),a&&(i=!0,t.flags&=-129),a=!!(32&t.flags),t.flags&=-33,null===e){if(ma){if(i?Fr(t):zr(),(e=ha)?null!==(e=null!==(e=Tu(e,fa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==sa?{id:aa,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Ks(e)).return=t,t.child=n,ua=t,ha=null):e=null,null===e)throw xa(t);return Du(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,i?(zr(),l=tl({mode:"hidden",children:l},i=t.mode),r=Hs(r,i,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Xo(n),r.childLanes=Zo(e,a,n),t.memoizedState=Yo,$o(null,r)):(Fr(t),el(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Fr(t),t.flags&=-257,t=nl(e,t,n)):null!==t.memoizedState?(zr(),t.child=e.child,t.flags|=128,t=null):(zr(),l=r.fallback,i=t.mode,r=tl({mode:"visible",children:r.children},i),(l=Hs(l,i,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,fr(t,e.child,null,n),(r=t.child).memoizedState=Xo(n),r.childLanes=Zo(e,a,n),t.memoizedState=Yo,t=$o(null,r));else if(Fr(t),Du(l)){if(a=l.nextSibling&&l.nextSibling.dataset)var d=a.dgst;a=d,(r=Error(s(419))).stack="",r.digest=a,ja({value:r,source:null,stack:null}),t=nl(e,t,n)}else if(Lo||Aa(e,t,n,!1),a=0!==(n&e.childLanes),Lo||a){if(null!==(a=gc)&&(0!==(r=Ie(a,n))&&r!==c.retryLane))throw c.retryLane=r,Ls(e,r),Yc(a,e,r),Do;Mu(l)||ld(),t=nl(e,t,n)}else Mu(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ha=Lu(l.nextSibling),ua=t,ma=!0,pa=null,fa=!1,null!==e&&da(t,e),(t=el(t,r.children)).flags|=4096);return t}return i?(zr(),l=r.fallback,i=t.mode,d=(c=e.child).sibling,(r=Us(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?l=Us(d,l):(l=Hs(l,i,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,$o(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(i=l.cachePool)?(c=Ba._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Za(),l={baseLanes:l.baseLanes|n,cachePool:i}),r.memoizedState=l,r.childLanes=Zo(e,a,n),t.memoizedState=Yo,$o(e.child,r)):(Fr(t),e=(n=e.child).sibling,(n=Us(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function el(e,t){return(t=tl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function tl(e,t){return(e=Bs(22,e,null,t)).lanes=0,e}function nl(e,t,n){return fr(t,e.child,null,n),(e=el(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function sl(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ea(e.return,t,n)}function al(e,t,n,s,a,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a,i.treeForkCount=r)}function rl(e,t,n){var s=t.pendingProps,a=s.revealOrder,r=s.tail;s=s.children;var i=$r.current,o=!!(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,V($r,i),Fo(e,t,s,n),s=ma?ea:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&sl(e,n,t);else if(19===e.tag)sl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Ur(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),al(t,!1,a,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Ur(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}al(t,!0,n,null,r,s);break;case"together":al(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Aa(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Us(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Us(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ta(e))}function ll(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Lo=!0;else{if(!(ol(e,n)||128&t.flags))return Lo=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),_a(0,Ba,e.memoizedState.cache),wa();break;case 27:case 5:Z(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:_a(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ir(t),null;break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(Fr(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Jo(e,t,n):(Fr(t),null!==(e=il(e,t,n))?e.sibling:null);Fr(t);break;case 19:var a=!!(128&e.flags);if((s=0!==(n&t.childLanes))||(Aa(e,t,n,!1),s=0!==(n&t.childLanes)),a){if(s)return rl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),V($r,$r.current),s)break;return null;case 22:return t.lanes=0,Bo(e,t,n,t.pendingProps);case 24:_a(0,Ba,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Lo=!!(131072&e.flags)}else Lo=!1,ma&&1048576&t.flags&&oa(t,ea,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=rr(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var r=e.$$typeof;if(r===w){t.tag=11,t=Io(null,t,e,a,n);break e}if(r===k){t.tag=14,t=Oo(null,t,e,a,n);break e}}throw t=D(e)||e,Error(s(306,t,""))}$s(e)?(a=ko(e,a),t.tag=1,t=Wo(null,t,e,a,n)):(t.tag=0,t=Go(null,t,e,a,n))}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return Wo(e,t,a=t.type,r=ko(a,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(s(387));a=t.pendingProps;var i=t.memoizedState;r=i.element,yr(e,t),Nr(t,a,null,n);var o=t.memoizedState;if(a=o.cache,_a(0,Ba,a),a!==i.cache&&Ra(t,[Ba],n,!0),kr(),a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Qo(e,t,a,n);break e}if(a!==r){ja(r=Ys(Error(s(424)),t)),t=Qo(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ha=Lu(e.firstChild),ua=t,ma=!0,pa=null,fa=!0,n=gr(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wa(),a===r){t=il(e,t,n);break e}Fo(e,t,a,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Ku(t.type,null,t.pendingProps,null))?t.memoizedState=n:ma||(n=t.type,e=t.pendingProps,(a=vu(W.current).createElement(n))[Ve]=t,a[qe]=e,pu(a,n,e),nt(a),t.stateNode=a):t.memoizedState=Ku(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),null===e&&ma&&(a=t.stateNode=zu(t.type,t.pendingProps,W.current),ua=t,fa=!0,r=ha,Pu(t.type)?(Fu=r,ha=Lu(a.firstChild)):ha=r),Fo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ma&&((r=a=ha)&&(null!==(a=function(e,t,n,s){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(s){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===r)return e}if(null===(e=Lu(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,fa))?(t.stateNode=a,ua=t,ha=Lu(a.firstChild),fa=!1,r=!0):r=!1),r||xa(t)),Z(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,wu(r,i)?a=null:null!==o&&wu(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=ni(e,t,ri,null,null,n),hh._currentValue=r),Ho(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&ma&&((e=n=ha)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}(n,t.pendingProps,fa))?(t.stateNode=n,ua=t,ha=null,e=!0):e=!1),e||xa(t)),null;case 13:return Jo(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=fr(t,null,a,n):Fo(e,t,a,n),t.child;case 11:return Io(e,t,t.type,t.pendingProps,n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,_a(0,t.type,a.value),Fo(e,t,a.children,n),t.child;case 9:return r=t.type._context,a=t.pendingProps.children,Ma(t),a=a(r=Da(r)),t.flags|=1,Fo(e,t,a,n),t.child;case 14:return Oo(e,t,t.type,t.pendingProps,n);case 15:return zo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var a=t.pendingProps,r=!!(128&t.flags);if(t.flags&=-129,null===e){if(ma){if("hidden"===a.mode)return e=Vo(t,a),t.lanes=536870912,$o(null,e);if(Ir(t),(e=ha)?null!==(e=null!==(e=Tu(e,fa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==sa?{id:aa,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Ks(e)).return=t,t.child=n,ua=t,ha=null):e=null,null===e)throw xa(t);return t.lanes=536870912,null}return Vo(t,a)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Ir(t),r)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Lo||Aa(e,t,n,!1),r=0!==(n&e.childLanes),Lo||r){if(null!==(a=gc)&&0!==(o=Ie(a,n))&&o!==i.retryLane)throw i.retryLane=o,Ls(e,o),Yc(a,e,o),Do;ld(),t=qo(e,t,n)}else e=i.treeContext,ha=Lu(o.nextSibling),ua=t,ma=!0,pa=null,fa=!1,null!==e&&da(t,e),(t=Vo(t,a)).flags|=4096;return t}return(e=Us(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Bo(e,t,n,t.pendingProps);case 24:return Ma(t),a=Da(Ba),null===e?(null===(r=Ya())&&(r=gc,i=$a(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:a,cache:r},vr(t),_a(0,Ba,r)):(0!==(e.lanes&n)&&(yr(e,t),Nr(t,null,null,n),kr()),r=e.memoizedState,i=t.memoizedState,r.parent!==a?(r={parent:a,cache:a},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),_a(0,Ba,a)):(a=i.cache,_a(0,Ba,a),a!==r.cache&&Ra(t,[Ba],n,!0))),Fo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function cl(e){e.flags|=4}function dl(e,t,n,s,a){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!rd())throw ir=nr,er;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!rd())throw ir=nr,er;e.flags|=8192}}function hl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,Rc|=t)}function ml(e,t){if(!ma)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function pl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=65011712&a.subtreeFlags,s|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function fl(e,t,n){var a=t.pendingProps;switch(ca(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return pl(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Pa(Ba),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ba(t)?cl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,Sa())),pl(t),null;case 26:var r=t.type,i=t.memoizedState;return null===e?(cl(t),null!==i?(pl(t),ul(t,i)):(pl(t),dl(t,r,0,0,n))):i?i!==e.memoizedState?(cl(t),pl(t),ul(t,i)):(pl(t),t.flags&=-16777217):((e=e.memoizedProps)!==a&&cl(t),pl(t),dl(t,r,0,0,n)),null;case 27:if(J(t),n=W.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&cl(t);else{if(!a){if(null===t.stateNode)throw Error(s(166));return pl(t),null}e=G.current,ba(t)?va(t):(e=zu(r,a,n),t.stateNode=e,cl(t))}return pl(t),null;case 5:if(J(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&cl(t);else{if(!a){if(null===t.stateNode)throw Error(s(166));return pl(t),null}if(i=G.current,ba(t))va(t);else{var o=vu(W.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"==typeof a.is?o.createElement("select",{is:a.is}):o.createElement("select"),a.multiple?i.multiple=!0:a.size&&(i.size=a.size);break;default:i="string"==typeof a.is?o.createElement(r,{is:a.is}):o.createElement(r)}}i[Ve]=t,i[qe]=a;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(pu(i,r,a),r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&cl(t)}}return pl(t),dl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&cl(t);else{if("string"!=typeof a&&null===t.stateNode)throw Error(s(166));if(e=W.current,ba(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(r=ua))switch(r.tag){case 27:case 5:a=r.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||uu(e.nodeValue,n)))||xa(t,!0)}else(e=vu(e).createTextNode(a))[Ve]=t,t.stateNode=e}return pl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(a=ba(t),null!==n){if(null===e){if(!a)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ve]=t}else wa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;pl(t),e=!1}else n=Sa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Br(t),t):(Br(t),null);if(128&t.flags)throw Error(s(558))}return pl(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=ba(t),null!==a&&null!==a.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[Ve]=t}else wa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;pl(t),r=!1}else r=Sa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Br(t),t):(Br(t),null)}return Br(t),128&t.flags?(t.lanes=n,t):(n=null!==a,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(r=a.alternate.memoizedState.cachePool.pool),i=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(i=a.memoizedState.cachePool.pool),i!==r&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),hl(t,t.updateQueue),pl(t),null);case 4:return X(),null===e&&tu(t.stateNode.containerInfo),pl(t),null;case 10:return Pa(t.type),pl(t),null;case 19:if(U($r),null===(a=t.memoizedState))return pl(t),null;if(r=!!(128&t.flags),null===(i=a.rendering))if(r)ml(a,!1);else{if(0!==kc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=Ur(e))){for(t.flags|=128,ml(a,!1),e=i.updateQueue,t.updateQueue=e,hl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vs(n,e),n=n.sibling;return V($r,1&$r.current|2),ma&&ia(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&de()>Fc&&(t.flags|=128,r=!0,ml(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ur(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,hl(t,e),ml(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!ma)return pl(t),null}else 2*de()-a.renderingStartTime>Fc&&536870912!==n&&(t.flags|=128,r=!0,ml(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=de(),e.sibling=null,n=$r.current,V($r,r?1&n|2:1&n),ma&&ia(t,a.treeForkCount),e):(pl(t),null);case 22:case 23:return Br(t),Mr(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?!!(536870912&n)&&!(128&t.flags)&&(pl(t),6&t.subtreeFlags&&(t.flags|=8192)):pl(t),null!==(n=t.updateQueue)&&hl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&U(Qa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Pa(Ba),pl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function gl(e,t){switch(ca(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Pa(Ba),X(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(Br(t),null===t.alternate)throw Error(s(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Br(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U($r),null;case 4:return X(),null;case 10:return Pa(t.type),null;case 22:case 23:return Br(t),Mr(),null!==e&&U(Qa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Pa(Ba),null;default:return null}}function xl(e,t){switch(ca(t),t.tag){case 3:Pa(Ba),X();break;case 26:case 27:case 5:J(t);break;case 4:X();break;case 31:null!==t.memoizedState&&Br(t);break;case 13:Br(t);break;case 19:U($r);break;case 10:Pa(t.type);break;case 22:case 23:Br(t),Mr(),null!==e&&U(Qa);break;case 24:Pa(Ba)}}function vl(e,t){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var a=s.next;n=a;do{if((n.tag&e)===e){s=void 0;var r=n.create,i=n.inst;s=r(),i.destroy=s}n=n.next}while(n!==a)}}catch(o){kd(t,t.return,o)}}function yl(e,t,n){try{var s=t.updateQueue,a=null!==s?s.lastEffect:null;if(null!==a){var r=a.next;s=r;do{if((s.tag&e)===e){var i=s.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,a=t;var l=n,c=o;try{c()}catch(d){kd(a,l,d)}}}s=s.next}while(s!==r)}}catch(d){kd(t,t.return,d)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Pr(t,n)}catch(s){kd(e,e.return,s)}}}function wl(e,t,n){n.props=ko(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){kd(e,t,s)}}function Sl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;default:s=e.stateNode}"function"==typeof n?e.refCleanup=n(s):n.current=s}}catch(a){kd(e,t,a)}}function jl(e,t){var n=e.ref,s=e.refCleanup;if(null!==n)if("function"==typeof s)try{s()}catch(a){kd(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(r){kd(e,t,r)}else n.current=null}function Cl(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(a){kd(e,e.return,a)}}function kl(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,o=null,l=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:a.hasOwnProperty(p)||hu(e,t,p,null,a,h)}}for(var m in a){var p=a[m];if(h=n[m],a.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":i=p;break;case"name":r=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&hu(e,t,m,p,a,h)}}return void bt(e,o,l,c,d,u,i,r);case"select":for(i in p=o=l=m=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:a.hasOwnProperty(i)||hu(e,t,i,null,a,c)}for(r in a)if(i=a[r],c=n[r],a.hasOwnProperty(r)&&(null!=i||null!=c))switch(r){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&hu(e,t,r,i,a,c)}return t=l,n=o,a=p,void(null!=m?jt(e,!!n,m,!1):!!a!=!!n&&(null!=t?jt(e,!!n,t,!0):jt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=m=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!a.hasOwnProperty(l))switch(l){case"value":case"children":break;default:hu(e,t,l,null,a,r)}for(o in a)if(r=a[o],i=n[o],a.hasOwnProperty(o)&&(null!=r||null!=i))switch(o){case"value":m=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(s(91));break;default:r!==i&&hu(e,t,o,r,a,i)}return void Ct(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!a.hasOwnProperty(f))if("selected"===f)e.selected=!1;else hu(e,t,f,null,a,m);for(c in a)if(m=a[c],p=n[c],a.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!=typeof m&&"symbol"!=typeof m;else hu(e,t,c,m,a,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!a.hasOwnProperty(g)&&hu(e,t,g,null,a,m);for(d in a)if(m=a[d],p=n[d],a.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(s(137,t));break;default:hu(e,t,d,m,a,p)}return;default:if(Rt(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&void 0!==m&&!a.hasOwnProperty(x)&&mu(e,t,x,void 0,a,m);for(u in a)m=a[u],p=n[u],!a.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||mu(e,t,u,m,a,p);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&null!=m&&!a.hasOwnProperty(v)&&hu(e,t,v,null,a,m);for(h in a)m=a[h],p=n[h],!a.hasOwnProperty(h)||m===p||null==m&&null==p||hu(e,t,h,m,a,p)}(a,e.type,n,t),a[qe]=t}catch(r){kd(e,e.return,r)}}function Nl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Pu(e.type)||4===e.tag}function _l(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Pu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Pl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Dt));else if(4!==s&&(27===s&&Pu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Pl(e,t,n),e=e.sibling;null!==e;)Pl(e,t,n),e=e.sibling}function El(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&(27===s&&Pu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function Rl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);pu(t,s,n),t[Ve]=e,t[qe]=n}catch(r){kd(e,e.return,r)}}var Al=!1,Tl=!1,Ml=!1,Dl="function"==typeof WeakSet?WeakSet:Set,Ll=null;function Fl(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&s&&vl(5,n);break;case 1:if(Yl(e,n),4&s)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){kd(n,n.return,i)}else{var a=ko(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){kd(n,n.return,o)}}64&s&&bl(n),512&s&&Sl(n,n.return);break;case 3:if(Yl(e,n),64&s&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Pr(e,t)}catch(i){kd(n,n.return,i)}}break;case 27:null===t&&4&s&&Rl(n);case 26:case 5:Yl(e,n),null===t&&4&s&&Cl(n),512&s&&Sl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&s&&Ul(e,n);break;case 13:Yl(e,n),4&s&&Vl(e,n),64&s&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}(e,n=Ed.bind(null,n))));break;case 22:if(!(s=null!==n.memoizedState||Al)){t=null!==t&&null!==t.memoizedState||Tl,a=Al;var r=Tl;Al=s,(Tl=t)&&!r?Zl(e,n,!!(8772&n.subtreeFlags)):Yl(e,n),Al=a,Tl=r}break;case 30:break;default:Yl(e,n)}}function Il(e){var t=e.alternate;null!==t&&(e.alternate=null,Il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ol=null,zl=!1;function Bl(e,t,n){for(n=n.child;null!==n;)$l(e,t,n),n=n.sibling}function $l(e,t,n){if(be&&"function"==typeof be.onCommitFiberUnmount)try{be.onCommitFiberUnmount(ye,n)}catch(r){}switch(n.tag){case 26:Tl||jl(n,t),Bl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Tl||jl(n,t);var s=Ol,a=zl;Pu(n.type)&&(Ol=n.stateNode,zl=!1),Bl(e,t,n),Bu(n.stateNode),Ol=s,zl=a;break;case 5:Tl||jl(n,t);case 6:if(s=Ol,a=zl,Ol=null,Bl(e,t,n),zl=a,null!==(Ol=s))if(zl)try{(9===Ol.nodeType?Ol.body:"HTML"===Ol.nodeName?Ol.ownerDocument.body:Ol).removeChild(n.stateNode)}catch(i){kd(n,t,i)}else try{Ol.removeChild(n.stateNode)}catch(i){kd(n,t,i)}break;case 18:null!==Ol&&(zl?(Eu(9===(e=Ol).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):Eu(Ol,n.stateNode));break;case 4:s=Ol,a=zl,Ol=n.stateNode.containerInfo,zl=!0,Bl(e,t,n),Ol=s,zl=a;break;case 0:case 11:case 14:case 15:yl(2,n,t),Tl||yl(4,n,t),Bl(e,t,n);break;case 1:Tl||(jl(n,t),"function"==typeof(s=n.stateNode).componentWillUnmount&&wl(n,t,s)),Bl(e,t,n);break;case 21:Bl(e,t,n);break;case 22:Tl=(s=Tl)||null!==n.memoizedState,Bl(e,t,n),Tl=s;break;default:Bl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gh(e)}catch(n){kd(t,t.return,n)}}}function Vl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gh(e)}catch(n){kd(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var s=Rd.bind(null,e,t);t.then(s,s)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Pu(l.type)){Ol=l.stateNode,zl=!1;break e}break;case 5:Ol=l.stateNode,zl=!1;break e;case 3:case 4:Ol=l.stateNode.containerInfo,zl=!0;break e}l=l.return}if(null===Ol)throw Error(s(160));$l(i,o,r),Ol=null,zl=!1,null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Gl=null;function Kl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Wl(e),4&a&&(yl(3,e,e.return),vl(3,e),yl(5,e,e.return));break;case 1:Hl(t,e),Wl(e),512&a&&(Tl||null===n||jl(n,n.return)),64&a&&Al&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var r=Gl;if(Hl(t,e),Wl(e),512&a&&(Tl||null===n||jl(n,n.return)),4&a){var i=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(a){case"title":(!(i=r.getElementsByTagName("title")[0])||i[Ye]||i[Ve]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=r.createElement(a),r.head.insertBefore(i,r.querySelector("head > title"))),pu(i,a,n),i[Ve]=e,nt(i),a=i;break e;case"link":var o=ah("link","href",r).get(a+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}pu(i=r.createElement(a),a,n),r.head.appendChild(i);break;case"meta":if(o=ah("meta","content",r).get(a+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}pu(i=r.createElement(a),a,n),r.head.appendChild(i);break;default:throw Error(s(468,a))}i[Ve]=e,nt(i),a=i}e.stateNode=a}else rh(r,e.type,e.stateNode);else e.stateNode=Ju(r,a,e.memoizedProps);else i!==a?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===a?rh(r,e.type,e.stateNode):Ju(r,a,e.memoizedProps)):null===a&&null!==e.stateNode&&kl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Wl(e),512&a&&(Tl||null===n||jl(n,n.return)),null!==n&&4&a&&kl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Wl(e),512&a&&(Tl||null===n||jl(n,n.return)),32&e.flags){r=e.stateNode;try{Nt(r,"")}catch(f){kd(e,e.return,f)}}4&a&&null!=e.stateNode&&kl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&a&&(Ml=!0);break;case 6:if(Hl(t,e),Wl(e),4&a){if(null===e.stateNode)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(f){kd(e,e.return,f)}}break;case 3:if(sh=null,r=Gl,Gl=Vu(t.containerInfo),Hl(t,e),Gl=r,Wl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(f){kd(e,e.return,f)}Ml&&(Ml=!1,Ql(e));break;case 4:a=Gl,Gl=Vu(e.stateNode.containerInfo),Hl(t,e),Wl(e),Gl=a;break;case 12:default:Hl(t,e),Wl(e);break;case 31:case 19:Hl(t,e),Wl(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,ql(e,a)));break;case 13:Hl(t,e),Wl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Dc=de()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,ql(e,a)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=Al,u=Tl;if(Al=d||r,Tl=u||c,Hl(t,e),Tl=u,Al=d,Wl(e),8192&a)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||Al||Tl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,r)"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"==typeof m?"":(""+m).trim()}}catch(f){kd(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(f){kd(c,c.return,f)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;r?Ru(p,!0):Ru(c.stateNode,!1)}catch(f){kd(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,ql(e,n))));case 30:case 21:}}function Wl(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(Nl(a)){n=a;break}a=a.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var r=n.stateNode;El(e,_l(e),r);break;case 5:var i=n.stateNode;32&n.flags&&(Nt(i,""),n.flags&=-33),El(e,_l(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;Pl(e,_l(e),o);break;default:throw Error(s(161))}}catch(l){kd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Fl(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Xl(t);break;case 1:jl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&wl(t,t.return,n),Xl(t);break;case 27:Bu(t.stateNode);case 26:case 5:jl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Zl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,a=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:Zl(a,r,n),vl(4,r);break;case 1:if(Zl(a,r,n),"function"==typeof(a=(s=r).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){kd(s,s.return,c)}if(null!==(a=(s=r).updateQueue)){var o=s.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)_r(l[a],o)}catch(c){kd(s,s.return,c)}}n&&64&i&&bl(r),Sl(r,r.return);break;case 27:Rl(r);case 26:case 5:Zl(a,r,n),n&&null===s&&4&i&&Cl(r),Sl(r,r.return);break;case 12:Zl(a,r,n);break;case 31:Zl(a,r,n),n&&4&i&&Ul(a,r);break;case 13:Zl(a,r,n),n&&4&i&&Vl(a,r);break;case 22:null===r.memoizedState&&Zl(a,r,n),Sl(r,r.return);break;case 30:break;default:Zl(a,r,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ua(n))}function ec(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e))}function tc(e,t,n,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nc(e,t,n,s),t=t.sibling}function nc(e,t,n,s){var a=t.flags;switch(t.tag){case 0:case 11:case 15:tc(e,t,n,s),2048&a&&vl(9,t);break;case 1:case 31:case 13:default:tc(e,t,n,s);break;case 3:tc(e,t,n,s),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e)));break;case 12:if(2048&a){tc(e,t,n,s),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,o=r.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){kd(t,t.return,l)}}else tc(e,t,n,s);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,null!==t.memoizedState?2&r._visibility?tc(e,t,n,s):ac(e,t):2&r._visibility?tc(e,t,n,s):(r._visibility|=2,sc(e,t,n,s,!!(10256&t.subtreeFlags)||!1)),2048&a&&Jl(i,t);break;case 24:tc(e,t,n,s),2048&a&&ec(t.alternate,t)}}function sc(e,t,n,s,a){for(a=a&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var r=e,i=t,o=n,l=s,c=i.flags;switch(i.tag){case 0:case 11:case 15:sc(r,i,o,l,a),vl(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?sc(r,i,o,l,a):ac(r,i):(d._visibility|=2,sc(r,i,o,l,a)),a&&2048&c&&Jl(i.alternate,i);break;case 24:sc(r,i,o,l,a),a&&2048&c&&ec(i.alternate,i);break;default:sc(r,i,o,l,a)}t=t.sibling}}function ac(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,s=t,a=s.flags;switch(s.tag){case 22:ac(n,s),2048&a&&Jl(s.alternate,s);break;case 24:ac(n,s),2048&a&&ec(s.alternate,s);break;default:ac(n,s)}t=t.sibling}}var rc=8192;function ic(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)oc(e,t,n),e=e.sibling}function oc(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,s){if(!("stylesheet"!==n.type||"string"==typeof s.media&&!1===matchMedia(s.media).matches||4&n.state.loading)){if(null===n.instance){var a=Wu(s.href),r=t.querySelector(Qu(a));if(r)return null!==(t=r._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=lh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,void nt(r);r=t.ownerDocument||t,s=Yu(s),(a=$u.get(a))&&th(s,a),nt(r=r.createElement("link"));var i=r;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),pu(r,"link",s),n.instance=r}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=lh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var s=Gl;Gl=Vu(e.stateNode.containerInfo),ic(e,t,n),Gl=s;break;case 22:null===e.memoizedState&&(null!==(s=e.alternate)&&null!==s.memoizedState?(s=rc,rc=16777216,ic(e,t,n),rc=s):ic(e,t,n))}}function lc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function cc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];Ll=s,hc(s,e)}lc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)dc(e),e=e.sibling}function dc(e){switch(e.tag){case 0:case 11:case 15:cc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:cc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):cc(e)}}function uc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];Ll=s,hc(s,e)}lc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function hc(e,t){for(;null!==Ll;){var n=Ll;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var s=n.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:Ua(n.memoizedState.cache)}if(null!==(s=n.child))s.return=n,Ll=s;else e:for(n=e;null!==Ll;){var a=(s=Ll).sibling,r=s.return;if(Il(s),s===n){Ll=null;break e}if(null!==a){a.return=r,Ll=a;break e}Ll=r}}}var mc={getCacheForType:function(e){var t=Da(Ba),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Da(Ba).controller.signal}},pc="function"==typeof WeakMap?WeakMap:Map,fc=0,gc=null,xc=null,vc=0,yc=0,bc=null,wc=!1,Sc=!1,jc=!1,Cc=0,kc=0,Nc=0,_c=0,Pc=0,Ec=0,Rc=0,Ac=null,Tc=null,Mc=!1,Dc=0,Lc=0,Fc=1/0,Ic=null,Oc=null,zc=0,Bc=null,$c=null,Uc=0,Vc=0,qc=null,Hc=null,Gc=0,Kc=null;function Wc(){return 2&fc&&0!==vc?vc&-vc:null!==F.T?qd():Be()}function Qc(){if(0===Ec)if(536870912&vc&&!ma)Ec=536870912;else{var e=Ne;!(3932160&(Ne<<=1))&&(Ne=262144),Ec=e}return null!==(e=Dr.current)&&(e.flags|=32),Ec}function Yc(e,t,n){(e!==gc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(sd(e,0),ed(e,vc,Ec,!1)),De(e,n),2&fc&&e===gc||(e===gc&&(!(2&fc)&&(_c|=n),4===kc&&ed(e,vc,Ec,!1)),Id(e))}function Xc(e,t,n){if(6&fc)throw Error(s(327));for(var a=!n&&!(127&t)&&0===(t&e.expiredLanes)||Re(e,t),r=a?function(e,t){var n=fc;fc|=2;var a=id(),r=od();gc!==e||vc!==t?(Ic=null,Fc=de()+500,sd(e,t)):Sc=Re(e,t);e:for(;;)try{if(0!==yc&&null!==xc){t=xc;var i=bc;t:switch(yc){case 1:yc=0,bc=null,pd(e,t,i,1);break;case 2:case 9:if(sr(i)){yc=0,bc=null,md(t);break}t=function(){2!==yc&&9!==yc||gc!==e||(yc=7),Id(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:sr(i)?(yc=0,bc=null,md(t)):(yc=0,bc=null,pd(e,t,i,7));break;case 5:var o=null;switch(xc.tag){case 26:o=xc.memoizedState;case 5:case 27:var l=xc;if(o?ih(o):l.stateNode.complete){yc=0,bc=null;var c=l.sibling;if(null!==c)xc=c;else{var d=l.return;null!==d?(xc=d,fd(d)):xc=null}break t}}yc=0,bc=null,pd(e,t,i,5);break;case 6:yc=0,bc=null,pd(e,t,i,6);break;case 8:nd(),kc=6;break e;default:throw Error(s(462))}}ud();break}catch(u){ad(e,u)}return Na=ka=null,F.H=a,F.A=r,fc=n,null!==xc?0:(gc=null,vc=0,Ts(),kc)}(e,t):cd(e,t,!0),i=a;;){if(0===r){Sc&&!a&&ed(e,t,0,!1);break}if(n=e.current.alternate,!i||Jc(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=Ac;var c=l.current.memoizedState.isDehydrated;if(c&&(sd(l,o).flags|=256),2!==(o=cd(l,o,!1))){if(jc&&!c){l.errorRecoveryDisabledLanes|=i,_c|=i,r=4;break e}i=Tc,Tc=r,null!==i&&(null===Tc?Tc=i:Tc.push.apply(Tc,i))}r=o}if(i=!1,2!==r)continue}}if(1===r){sd(e,0),ed(e,t,0,!0);break}e:{switch(a=e,i=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:ed(a,t,Ec,!wc);break e;case 2:Tc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(r=Dc+300-de())){if(ed(a,t,Ec,!wc),0!==Ee(a,0,!0))break e;Uc=t,a.timeoutHandle=ju(Zc.bind(null,a,n,Tc,Ic,Mc,t,Ec,_c,Rc,wc,i,"Throttled",-0,0),r)}else Zc(a,n,Tc,Ic,Mc,t,Ec,_c,Rc,wc,i,null,-0,0)}break}r=cd(e,t,!1),i=!1}Id(e)}function Zc(e,t,n,s,a,r,i,o,l,c,d,u,h,m){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||!(16785408&~u)){oc(t,r,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var p=(62914560&r)===r?Dc-de():(4194048&r)===r?Lc-de():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&dh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var s=setTimeout(function(){if(e.stylesheets&&dh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===oh&&(oh=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var a=n[s],r=a.transferSize,i=a.initiatorType,o=a.duration;if(r&&o&&fu(i)){for(i=0,o=a.responseEnd,s+=1;s<n.length;s++){var l=n[s],c=l.startTime;if(c>o)break;var d=l.transferSize,u=l.initiatorType;d&&fu(u)&&(i+=d*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--s,t+=8*(r+i)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&dh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>oh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(a)}}:null}(u,p)))return Uc=r,e.cancelPendingCommit=p(xd.bind(null,e,t,r,n,s,a,i,o,l,d,u,null,h,m)),void ed(e,r,i,!c)}xd(e,t,r,n,s,a,i,o,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var s=0;s<n.length;s++){var a=n[s],r=a.getSnapshot;a=a.value;try{if(!es(r(),a))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ed(e,t,n,s){t&=~Pc,t&=~_c,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var a=t;0<a;){var r=31-Se(a),i=1<<r;s[r]=-1,a&=~i}0!==n&&Le(e,n,t)}function td(){return!!(6&fc)||(Od(0),!1)}function nd(){if(null!==xc){if(0===yc)var e=xc.return;else Na=ka=null,li(e=xc),cr=null,dr=0,e=xc;for(;null!==e;)xl(e.alternate,e),e=e.return;xc=null}}function sd(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,nd(),gc=e,xc=n=Us(e.current,null),vc=t,yc=0,bc=null,wc=!1,Sc=Re(e,t),jc=!1,Rc=Ec=Pc=_c=Nc=kc=0,Tc=Ac=null,Mc=!1,8&t&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var a=31-Se(s),r=1<<a;t|=e[a],s&=~r}return Cc=t,Ts(),n}function ad(e,t){qr=null,F.H=xo,t===Ja||t===tr?(t=or(),yc=3):t===er?(t=or(),yc=4):yc=t===Do?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,bc=t,null===xc&&(kc=1,Eo(e,Ys(t,e.current)))}function rd(){var e=Dr.current;return null===e||((4194048&vc)===vc?null===Lr:!!((62914560&vc)===vc||536870912&vc)&&e===Lr)}function id(){var e=F.H;return F.H=xo,null===e?xo:e}function od(){var e=F.A;return F.A=mc,e}function ld(){kc=4,wc||(4194048&vc)!==vc&&null!==Dr.current||(Sc=!0),!(134217727&Nc)&&!(134217727&_c)||null===gc||ed(gc,vc,Ec,!1)}function cd(e,t,n){var s=fc;fc|=2;var a=id(),r=od();gc===e&&vc===t||(Ic=null,sd(e,t)),t=!1;var i=kc;e:for(;;)try{if(0!==yc&&null!==xc){var o=xc,l=bc;switch(yc){case 8:nd(),i=6;break e;case 3:case 2:case 9:case 6:null===Dr.current&&(t=!0);var c=yc;if(yc=0,bc=null,pd(e,o,l,c),n&&Sc){i=0;break e}break;default:c=yc,yc=0,bc=null,pd(e,o,l,c)}}dd(),i=kc;break}catch(d){ad(e,d)}return t&&e.shellSuspendCounter++,Na=ka=null,fc=s,F.H=a,F.A=r,null===xc&&(gc=null,vc=0,Ts()),i}function dd(){for(;null!==xc;)hd(xc)}function ud(){for(;null!==xc&&!le();)hd(xc)}function hd(e){var t=ll(e.alternate,e,Cc);e.memoizedProps=e.pendingProps,null===t?fd(e):xc=t}function md(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,vc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,vc);break;case 5:li(t);default:xl(n,t),t=ll(n,t=xc=Vs(t,Cc),Cc)}e.memoizedProps=e.pendingProps,null===t?fd(e):xc=t}function pd(e,t,n,a){Na=ka=null,li(t),cr=null,dr=0;var r=t.return;try{if(function(e,t,n,a,r){if(n.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){if(null!==(t=n.alternate)&&Aa(t,n,r,!0),null!==(n=Dr.current)){switch(n.tag){case 31:case 13:return null===Lr?ld():null===n.alternate&&0===kc&&(kc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===nr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),Nd(e,a,r)),!1;case 22:return n.flags|=65536,a===nr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),Nd(e,a,r)),!1}throw Error(s(435,n.tag))}return Nd(e,a,r),ld(),!1}if(ma)return null!==(t=Dr.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,a!==ga&&ja(Ys(e=Error(s(422),{cause:a}),n))):(a!==ga&&ja(Ys(t=Error(s(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,a=Ys(a,n),jr(e,r=Ao(e.stateNode,a,r)),4!==kc&&(kc=2)),!1;var i=Error(s(520),{cause:a});if(i=Ys(i,n),null===Ac?Ac=[i]:Ac.push(i),4!==kc&&(kc=2),null===t)return!0;a=Ys(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,jr(n,e=Ao(n.stateNode,a,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Oc&&Oc.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,Mo(r=To(r),e,n,a),jr(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,vc))return kc=1,Eo(e,Ys(n,e.current)),void(xc=null)}catch(i){if(null!==r)throw xc=r,i;return kc=1,Eo(e,Ys(n,e.current)),void(xc=null)}32768&t.flags?(ma||1===a?e=!0:Sc||536870912&vc?e=!1:(wc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=Dr.current)&&13===a.tag&&(a.flags|=16384))),gd(t,e)):fd(t)}function fd(e){var t=e;do{if(32768&t.flags)return void gd(t,wc);e=t.return;var n=fl(t.alternate,t,Cc);if(null!==n)return void(xc=n);if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===kc&&(kc=5)}function gd(e,t){do{var n=gl(e.alternate,e);if(null!==n)return n.flags&=32767,void(xc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(xc=e);xc=e=n}while(null!==e);kc=6,xc=null}function xd(e,t,n,a,r,i,o,l,c){e.cancelPendingCommit=null;do{Sd()}while(0!==zc);if(6&fc)throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(i=t.lanes|t.childLanes,function(e,t,n,s,a,r){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-Se(n),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==s&&Le(e,s,0),0!==r&&0===a&&0!==e.tag&&(e.suspendedLanes|=r&~(i&~t))}(e,n,i|=As,o,l,c),e===gc&&(xc=gc=null,vc=0),$c=t,Bc=e,Uc=n,Vc=i,qc=r,Hc=a,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,ie(pe,function(){return jd(),null})):(e.callbackNode=null,e.callbackPriority=0),a=!!(13878&t.flags),13878&t.subtreeFlags||a){a=F.T,F.T=null,r=I.p,I.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,gu=wh,is(e=rs(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==i||0!==a&&3!==h.nodeType||(c=o+a),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===r&&(l=o),m===i&&++u===a&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xu={focusedElem:e,selectionRange:n},wh=!1,Ll=t;null!==Ll;)if(e=(t=Ll).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ll=e;else for(;null!==Ll;){switch(i=(t=Ll).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,a=n.stateNode;try{var f=ko(n.type,r);e=a.getSnapshotBeforeUpdate(f,i),a.__reactInternalSnapshotBeforeUpdate=e}catch(x){kd(n,n.return,x)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Au(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Au(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Ll=e;break}Ll=t.return}}(e,t)}finally{fc=o,I.p=r,F.T=a}}zc=1,vd(),yd(),bd()}}function vd(){if(1===zc){zc=0;var e=Bc,t=$c,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=F.T,F.T=null;var s=I.p;I.p=2;var a=fc;fc|=4;try{Kl(t,e);var r=xu,i=rs(e.containerInfo),o=r.focusedElem,l=r.selectionRange;if(i!==o&&o&&o.ownerDocument&&as(o.ownerDocument.documentElement,o)){if(null!==l&&is(o)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var u=o.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=o.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(i=g,g=f,f=i);var x=ss(o,f),v=ss(o,g);if(x&&v&&(1!==m.rangeCount||m.anchorNode!==x.node||m.anchorOffset!==x.offset||m.focusNode!==v.node||m.focusOffset!==v.offset)){var y=u.createRange();y.setStart(x.node,x.offset),m.removeAllRanges(),f>g?(m.addRange(y),m.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),m.addRange(y))}}}}for(u=[],m=o;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<u.length;o++){var b=u[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}wh=!!gu,xu=gu=null}finally{fc=a,I.p=s,F.T=n}}e.current=t,zc=2}}function yd(){if(2===zc){zc=0;var e=Bc,t=$c,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=F.T,F.T=null;var s=I.p;I.p=2;var a=fc;fc|=4;try{Fl(e,t.alternate,t)}finally{fc=a,I.p=s,F.T=n}}zc=3}}function bd(){if(4===zc||3===zc){zc=0,ce();var e=Bc,t=$c,n=Uc,s=Hc;10256&t.subtreeFlags||10256&t.flags?zc=5:(zc=0,$c=Bc=null,wd(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Oc=null),ze(n),t=t.stateNode,be&&"function"==typeof be.onCommitFiberRoot)try{be.onCommitFiberRoot(ye,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==s){t=F.T,a=I.p,I.p=2,F.T=null;try{for(var r=e.onRecoverableError,i=0;i<s.length;i++){var o=s[i];r(o.value,{componentStack:o.stack})}}finally{F.T=t,I.p=a}}3&Uc&&Sd(),Id(e),a=e.pendingLanes,261930&n&&42&a?e===Kc?Gc++:(Gc=0,Kc=e):Gc=0,Od(0)}}function wd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ua(t)))}function Sd(){return vd(),yd(),bd(),jd()}function jd(){if(5!==zc)return!1;var e=Bc,t=Vc;Vc=0;var n=ze(Uc),a=F.T,r=I.p;try{I.p=32>n?32:n,F.T=null,n=qc,qc=null;var i=Bc,o=Uc;if(zc=0,$c=Bc=null,Uc=0,6&fc)throw Error(s(331));var l=fc;if(fc|=4,dc(i.current),nc(i,i.current,o,n),fc=l,Od(0,!1),be&&"function"==typeof be.onPostCommitFiberRoot)try{be.onPostCommitFiberRoot(ye,i)}catch(c){}return!0}finally{I.p=r,F.T=a,wd(e,t)}}function Cd(e,t,n){t=Ys(n,t),null!==(e=wr(e,t=Ao(e.stateNode,t,2),2))&&(De(e,2),Id(e))}function kd(e,t,n){if(3===e.tag)Cd(e,e,n);else for(;null!==t;){if(3===t.tag){Cd(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===Oc||!Oc.has(s))){e=Ys(n,e),null!==(s=wr(t,n=To(2),2))&&(Mo(n,s,t,e),De(s,2),Id(s));break}}t=t.return}}function Nd(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new pc;var a=new Set;s.set(t,a)}else void 0===(a=s.get(t))&&(a=new Set,s.set(t,a));a.has(n)||(jc=!0,a.add(n),e=_d.bind(null,e,t,n),t.then(e,e))}function _d(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gc===e&&(vc&n)===n&&(4===kc||3===kc&&(62914560&vc)===vc&&300>de()-Dc?!(2&fc)&&sd(e,0):Pc|=n,Rc===vc&&(Rc=0)),Id(e)}function Pd(e,t){0===t&&(t=Te()),null!==(e=Ls(e,t))&&(De(e,t),Id(e))}function Ed(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pd(e,n)}function Rd(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==a&&a.delete(t),Pd(e,n)}var Ad=null,Td=null,Md=!1,Dd=!1,Ld=!1,Fd=0;function Id(e){e!==Td&&null===e.next&&(null===Td?Ad=Td=e:Td=Td.next=e),Dd=!0,Md||(Md=!0,Nu(function(){6&fc?ie(he,zd):Bd()}))}function Od(e,t){if(!Ld&&Dd){Ld=!0;do{for(var n=!1,s=Ad;null!==s;){if(0!==e){var a=s.pendingLanes;if(0===a)var r=0;else{var i=s.suspendedLanes,o=s.pingedLanes;r=(1<<31-Se(42|e)+1)-1,r=201326741&(r&=a&~(i&~o))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,Vd(s,r))}else r=vc,!(3&(r=Ee(s,s===gc?r:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||Re(s,r)||(n=!0,Vd(s,r));s=s.next}}while(n);Ld=!1}}function zd(){Bd()}function Bd(){Dd=Md=!1;var e=0;0!==Fd&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Su&&(Su=e,!0);return Su=null,!1}()&&(e=Fd);for(var t=de(),n=null,s=Ad;null!==s;){var a=s.next,r=$d(s,t);0===r?(s.next=null,null===n?Ad=a:n.next=a,null===a&&(Td=n)):(n=s,(0!==e||3&r)&&(Dd=!0)),s=a}0!==zc&&5!==zc||Od(e),0!==Fd&&(Fd=0)}function $d(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var i=31-Se(r),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&s)||(a[i]=Ae(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(n=vc,n=Ee(e,e===(t=gc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),s=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&oe(s),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Re(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==s&&oe(s),ze(n)){case 2:case 8:n=me;break;case 32:default:n=pe;break;case 268435456:n=ge}return s=Ud.bind(null,e),n=ie(n,s),e.callbackPriority=t,e.callbackNode=n,t}return null!==s&&null!==s&&oe(s),e.callbackPriority=2,e.callbackNode=null,2}function Ud(e,t){if(0!==zc&&5!==zc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Sd()&&e.callbackNode!==n)return null;var s=vc;return 0===(s=Ee(e,e===gc?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,s,t),$d(e,de()),null!=e.callbackNode&&e.callbackNode===n?Ud.bind(null,e):null)}function Vd(e,t){if(Sd())return null;Xc(e,t,!0)}function qd(){if(0===Fd){var e=Ha;0===e&&(e=ke,!(261888&(ke<<=1))&&(ke=256)),Fd=e}return Fd}function Hd(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Mt(""+e)}function Gd(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Kd=0;Kd<Ns.length;Kd++){var Wd=Ns[Kd];_s(Wd.toLowerCase(),"on"+(Wd[0].toUpperCase()+Wd.slice(1)))}_s(vs,"onAnimationEnd"),_s(ys,"onAnimationIteration"),_s(bs,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(ws,"onTransitionRun"),_s(Ss,"onTransitionStart"),_s(js,"onTransitionCancel"),_s(Cs,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qd));function Xd(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&a.isPropagationStopped())break e;r=o,a.currentTarget=c;try{r(a)}catch(d){Ps(d)}a.currentTarget=null,r=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==r&&a.isPropagationStopped())break e;r=o,a.currentTarget=c;try{r(a)}catch(d){Ps(d)}a.currentTarget=null,r=l}}}}function Zd(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var s=e+"__bubble";n.has(s)||(nu(t,e,2,!1),n.add(s))}function Jd(e,t,n){var s=0;t&&(s|=4),nu(n,e,s,t)}var eu="_reactListening"+Math.random().toString(36).slice(2);function tu(e){if(!e[eu]){e[eu]=!0,st.forEach(function(t){"selectionchange"!==t&&(Yd.has(t)||Jd(t,!1,e),Jd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[eu]||(t[eu]=!0,Jd("selectionchange",!1,t))}}function nu(e,t,n,s){switch(Ph(t)){case 2:var a=Sh;break;case 8:a=jh;break;default:a=Ch}n=a.bind(null,t,n,e),a=void 0,!qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),s?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function su(e,t,n,s,a){var i=s;if(!(1&t||2&t||null===s))e:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var l=s.stateNode.containerInfo;if(l===a)break;if(4===o)for(o=s.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==l;){if(null===(o=Ze(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){s=i=o;continue e}l=l.parentNode}}s=s.return}$t(function(){var s=i,a=Ft(n),o=[];e:{var l=ks.get(e);if(void 0!==l){var c=an,d=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=bn;break;case"focusin":d="focus",c=un;break;case"focusout":d="blur",c=un;break;case"beforeblur":case"afterblur":c=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Sn;break;case vs:case ys:case bs:c=hn;break;case Cs:c=jn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=Cn;break;case"copy":case"cut":case"paste":c=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=kn}var u=!!(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==l?l+"Capture":null:l;u=[];for(var p,f=s;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Ut(f,m))&&u.push(au(f,g,p)),h)break;f=f.return}0<u.length&&(l=new c(l,d,null,n,a),o.push({event:l,listeners:u}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Lt||!(d=n.relatedTarget||n.fromElement)||!Ze(d)&&!d[He])&&(c||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=s,null!==(d=(d=n.relatedTarget||n.toElement)?Ze(d):null)&&(h=r(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=s),c!==d)){if(u=cn,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=wn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?l:et(c),p=null==d?l:et(d),(l=new u(g,f+"leave",c,n,a)).target=h,l.relatedTarget=p,g=null,Ze(a)===s&&((u=new u(m,f+"enter",d,n,a)).target=p,u.relatedTarget=h,g=u),h=g,c&&d)e:{for(u=iu,f=d,p=0,g=m=c;g;g=u(g))p++;g=0;for(var x=f;x;x=u(x))g++;for(;0<p-g;)m=u(m),p--;for(;0<g-p;)f=u(f),g--;for(;p--;){if(m===f||null!==f&&m===f.alternate){u=m;break e}m=u(m),f=u(f)}u=null}else u=null;null!==c&&ou(o,l,c,u,!1),null!==d&&null!==h&&ou(o,h,d,u,!0)}if("select"===(c=(l=s?et(s):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var v=Vn;else if(In(l))if(qn)v=Jn;else{v=Xn;var y=Yn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?s&&Rt(s.elementType)&&(v=Vn):v=Zn;switch(v&&(v=v(e,s))?On(o,v,n,a):(y&&y(e,l,s),"focusout"===e&&s&&"number"===l.type&&null!=s.memoizedProps.value&&St(l,"number",l.value)),y=s?et(s):window,e){case"focusin":(In(y)||"true"===y.contentEditable)&&(ls=y,cs=s,ds=null);break;case"focusout":ds=cs=ls=null;break;case"mousedown":us=!0;break;case"contextmenu":case"mouseup":case"dragend":us=!1,hs(o,n,a);break;case"selectionchange":if(os)break;case"keydown":case"keyup":hs(o,n,a)}var b;if(_n)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ln?Mn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Rn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==w?"onCompositionEnd"===w&&Ln&&(b=Qt()):(Kt="value"in(Gt=a)?Gt.value:Gt.textContent,Ln=!0)),0<(y=ru(s,w)).length&&(w=new pn(w,e,null,n,a),o.push({event:w,listeners:y}),b?w.data=b:null!==(b=Dn(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(Tn=!0,An);case"textInput":return(e=t.data)===An&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!_n&&Mn(e,t)?(e=Qt(),Wt=Kt=Gt=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=ru(s,"onBeforeInput")).length&&(y=new pn("onBeforeInput","beforeinput",null,n,a),o.push({event:y,listeners:w}),y.data=b)),function(e,t,n,s,a){if("submit"===t&&n&&n.stateNode===a){var r=Hd((a[qe]||null).action),i=s.submitter;i&&null!==(t=(t=i[qe]||null)?Hd(t.formAction):i.getAttribute("formAction"))&&(r=t,i=null);var o=new an("action","action",null,s,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==Fd){var e=i?Gd(a,i):new FormData(a);no(n,{pending:!0,data:e,method:a.method,action:r},null,e)}}else"function"==typeof r&&(o.preventDefault(),e=i?Gd(a,i):new FormData(a),no(n,{pending:!0,data:e,method:a.method,action:r},r,e))},currentTarget:a}]})}}(o,e,s,n,a)}Xd(o,t)})}function au(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ru(e,t){for(var n=t+"Capture",s=[];null!==e;){var a=e,r=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===r||(null!=(a=Ut(e,n))&&s.unshift(au(e,a,r)),null!=(a=Ut(e,t))&&s.push(au(e,a,r))),3===e.tag)return s;e=e.return}return[]}function iu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ou(e,t,n,s,a){for(var r=t._reactName,i=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===s)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=Ut(n,r))&&i.unshift(au(n,c,l)):a||null!=(c=Ut(n,r))&&i.push(au(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var lu=/\r\n?/g,cu=/\u0000|\uFFFD/g;function du(e){return("string"==typeof e?e:""+e).replace(lu,"\n").replace(cu,"")}function uu(e,t){return t=du(t),du(e)===t}function hu(e,t,n,a,r,i){switch(n){case"children":"string"==typeof a?"body"===t||"textarea"===t&&""===a||Nt(e,a):("number"==typeof a||"bigint"==typeof a)&&"body"!==t&&Nt(e,""+a);break;case"className":ut(e,"class",a);break;case"tabIndex":ut(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(e,n,a);break;case"style":Et(e,a,i);break;case"data":if("object"!==t){ut(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"==typeof a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Mt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"==typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===n?("input"!==t&&hu(e,t,"name",r.name,r,null),hu(e,t,"formEncType",r.formEncType,r,null),hu(e,t,"formMethod",r.formMethod,r,null),hu(e,t,"formTarget",r.formTarget,r,null)):(hu(e,t,"encType",r.encType,r,null),hu(e,t,"method",r.method,r,null),hu(e,t,"target",r.target,r,null))),null==a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=Mt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=Dt);break;case"onScroll":null!=a&&Zd("scroll",e);break;case"onScrollEnd":null!=a&&Zd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(s(61));if(null!=(n=a.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"muted":e.muted=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"==typeof a||"boolean"==typeof a||"symbol"==typeof a){e.removeAttribute("xlink:href");break}n=Mt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"==typeof a||"symbol"==typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Zd("beforetoggle",e),Zd("toggle",e),dt(e,"popover",a);break;case"xlinkActuate":ht(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ht(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ht(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ht(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ht(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ht(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ht(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ht(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ht(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":dt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&dt(e,n=At.get(n)||n,a)}}function mu(e,t,n,a,r,i){switch(n){case"style":Et(e,a,i);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("__html"in a))throw Error(s(61));if(null!=(n=a.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"==typeof a?Nt(e,a):("number"==typeof a||"bigint"==typeof a)&&Nt(e,""+a);break;case"onScroll":null!=a&&Zd("scroll",e);break;case"onScrollEnd":null!=a&&Zd("scrollend",e);break;case"onClick":null!=a&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:at.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"==typeof(i=null!=(i=e[qe]||null)?i[n]:null)&&e.removeEventListener(t,i,r),"function"!=typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):dt(e,n,a):("function"!=typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,r)))}}function pu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zd("error",e),Zd("load",e);var a,r=!1,i=!1;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(null!=o)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:hu(e,t,a,o,n,null)}}return i&&hu(e,t,"srcSet",n.srcSet,n,null),void(r&&hu(e,t,"src",n.src,n,null));case"input":Zd("invalid",e);var l=a=o=i=null,c=null,d=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(null!=u)switch(r){case"name":i=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(s(137,t));break;default:hu(e,t,r,u,n,null)}}return void wt(e,a,l,c,d,o,i,!1);case"select":for(i in Zd("invalid",e),r=o=a=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":a=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:hu(e,t,i,l,n,null)}return t=a,n=o,e.multiple=!!r,void(null!=t?jt(e,!!r,t,!1):null!=n&&jt(e,!!r,n,!0));case"textarea":for(o in Zd("invalid",e),a=i=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":i=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:hu(e,t,o,l,n,null)}return void kt(e,r,i,a);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!=typeof r&&"symbol"!=typeof r;else hu(e,t,c,r,n,null);return;case"dialog":Zd("beforetoggle",e),Zd("toggle",e),Zd("cancel",e),Zd("close",e);break;case"iframe":case"object":Zd("load",e);break;case"video":case"audio":for(r=0;r<Qd.length;r++)Zd(Qd[r],e);break;case"image":Zd("error",e),Zd("load",e);break;case"details":Zd("toggle",e);break;case"embed":case"source":case"link":Zd("error",e),Zd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(r=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:hu(e,t,d,r,n,null)}return;default:if(Rt(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(r=n[u])&&mu(e,t,u,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&hu(e,t,l,r,n,null))}function fu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gu=null,xu=null;function vu(e){return 9===e.nodeType?e:e.ownerDocument}function yu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wu(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Su=null;var ju="function"==typeof setTimeout?setTimeout:void 0,Cu="function"==typeof clearTimeout?clearTimeout:void 0,ku="function"==typeof Promise?Promise:void 0,Nu="function"==typeof queueMicrotask?queueMicrotask:void 0!==ku?function(e){return ku.resolve(null).then(e).catch(_u)}:ju;function _u(e){setTimeout(function(){throw e})}function Pu(e){return"head"===e}function Eu(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===s)return e.removeChild(a),void Gh(t);s--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)s++;else if("html"===n)Bu(e.ownerDocument.documentElement);else if("head"===n){Bu(n=e.ownerDocument.head);for(var r=n.firstChild;r;){var i=r.nextSibling,o=r.nodeName;r[Ye]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===r.rel.toLowerCase()||n.removeChild(r),r=i}}else"body"===n&&Bu(e.ownerDocument.body);n=a}while(n);Gh(t)}function Ru(e,t){var n=e;e=0;do{var s=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=s}while(n)}function Au(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Au(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Tu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}function Mu(e){return"$?"===e.data||"$~"===e.data}function Du(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Fu=null;function Iu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Lu(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ou(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function zu(e,t,n){switch(t=vu(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Bu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var $u=new Map,Uu=new Set;function Vu(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qu=I.d;I.d={f:function(){var e=qu.f(),t=td();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?ao(t):qu.r(e)},D:function(e){qu.D(e),Gu("dns-prefetch",e,null)},C:function(e,t){qu.C(e,t),Gu("preconnect",e,t)},L:function(e,t,n){qu.L(e,t,n);var s=Hu;if(s&&e&&t){var a='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+yt(n.imageSizes)+'"]')):a+='[href="'+yt(e)+'"]';var r=a;switch(t){case"style":r=Wu(e);break;case"script":r=Xu(e)}$u.has(r)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),$u.set(r,e),null!==s.querySelector(a)||"style"===t&&s.querySelector(Qu(r))||"script"===t&&s.querySelector(Zu(r))||(pu(t=s.createElement("link"),"link",e),nt(t),s.head.appendChild(t)))}},m:function(e,t){qu.m(e,t);var n=Hu;if(n&&e){var s=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+yt(s)+'"][href="'+yt(e)+'"]',r=a;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Xu(e)}if(!$u.has(r)&&(e=d({rel:"modulepreload",href:e},t),$u.set(r,e),null===n.querySelector(a))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zu(r)))return}pu(s=n.createElement("link"),"link",e),nt(s),n.head.appendChild(s)}}},X:function(e,t){qu.X(e,t);var n=Hu;if(n&&e){var s=tt(n).hoistableScripts,a=Xu(e),r=s.get(a);r||((r=n.querySelector(Zu(a)))||(e=d({src:e,async:!0},t),(t=$u.get(a))&&nh(e,t),nt(r=n.createElement("script")),pu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(a,r))}},S:function(e,t,n){qu.S(e,t,n);var s=Hu;if(s&&e){var a=tt(s).hoistableStyles,r=Wu(e);t=t||"default";var i=a.get(r);if(!i){var o={loading:0,preload:null};if(i=s.querySelector(Qu(r)))o.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=$u.get(r))&&th(e,n);var l=i=s.createElement("link");nt(l),pu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,eh(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:o},a.set(r,i)}}},M:function(e,t){qu.M(e,t);var n=Hu;if(n&&e){var s=tt(n).hoistableScripts,a=Xu(e),r=s.get(a);r||((r=n.querySelector(Zu(a)))||(e=d({src:e,async:!0,type:"module"},t),(t=$u.get(a))&&nh(e,t),nt(r=n.createElement("script")),pu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(a,r))}}};var Hu="undefined"==typeof document?null:document;function Gu(e,t,n){var s=Hu;if(s&&"string"==typeof t&&t){var a=yt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),Uu.has(a)||(Uu.add(a),e={rel:e,crossOrigin:n,href:t},null===s.querySelector(a)&&(pu(t=s.createElement("link"),"link",e),nt(t),s.head.appendChild(t)))}}function Ku(e,t,n,a){var r,i,o,l,c=(c=W.current)?Vu(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Wu(n.href),(a=(n=tt(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Wu(n.href);var d=tt(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Qu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),$u.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$u.set(e,n),d||(r=c,i=e,o=n,l=u.state,r.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=r.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),pu(i,"link",o),nt(i),r.head.appendChild(i))))),t&&null===a)throw Error(s(528,""));return u}if(t&&null!==a)throw Error(s(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Xu(n),(a=(n=tt(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Wu(e){return'href="'+yt(e)+'"'}function Qu(e){return'link[rel="stylesheet"]['+e+"]"}function Yu(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Xu(e){return'[src="'+yt(e)+'"]'}function Zu(e){return"script[async]"+e}function Ju(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(a)return t.instance=a,nt(a),a;var r=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return nt(a=(e.ownerDocument||e).createElement("style")),pu(a,"style",r),eh(a,n.precedence,e),t.instance=a;case"stylesheet":r=Wu(n.href);var i=e.querySelector(Qu(r));if(i)return t.state.loading|=4,t.instance=i,nt(i),i;a=Yu(n),(r=$u.get(r))&&th(a,r),nt(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),pu(i,"link",a),t.state.loading|=4,eh(i,n.precedence,e),t.instance=i;case"script":return i=Xu(n.src),(r=e.querySelector(Zu(i)))?(t.instance=r,nt(r),r):(a=n,(r=$u.get(i))&&nh(a=d({},n),r),nt(r=(e=e.ownerDocument||e).createElement("script")),pu(r,"link",a),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,eh(a,n.precedence,e));return t.instance}function eh(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=s.length?s[s.length-1]:null,r=a,i=0;i<s.length;i++){var o=s[i];if(o.dataset.precedence===t)r=o;else if(r!==a)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function nh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var sh=null;function ah(e,t,n){if(null===sh){var s=new Map,a=sh=new Map;a.set(n,s)}else(s=(a=sh).get(n))||(s=new Map,a.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var r=n[a];if(!(r[Ye]||r[Ve]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var i=r.getAttribute(t)||"";i=e+i;var o=s.get(i);o?o.push(r):s.set(i,[r])}}return s}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var oh=0;function lh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)dh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ch=null;function dh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ch=new Map,t.forEach(uh,e),ch=null,lh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=ch.get(e);if(n)var s=n.get(null);else{n=new Map,ch.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<a.length;r++){var i=a[r];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),s=i)}s&&n.set(null,s)}i=(a=t.instance).getAttribute("data-precedence"),(r=n.get(i)||s)===s&&n.set(null,a),n.set(i,a),this.count++,s=lh.bind(this),a.addEventListener("load",s),a.addEventListener("error",s),r?r.parentNode.insertBefore(a,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var hh={$$typeof:y,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function mh(e,t,n,s,a,r,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function ph(e,t,n,s,a,r,i,o,l,c,d,u){return e=new mh(e,t,n,i,l,c,d,u,o),t=1,!0===r&&(t|=24),r=Bs(3,null,null,t),e.current=r,r.stateNode=e,(t=$a()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:t},vr(r),e}function fh(e){return e?e=Os:Os}function gh(e,t,n,s,a,r){a=fh(a),null===s.context?s.context=a:s.pendingContext=a,(s=br(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(s.callback=r),null!==(n=wr(e,s,t))&&(Yc(n,0,t),Sr(n,e,t))}function xh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function vh(e,t){xh(e,t),(e=e.alternate)&&xh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Ls(e,67108864);null!==t&&Yc(t,0,67108864),vh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Wc(),n=Ls(e,t=Oe(t));null!==n&&Yc(n,0,t),vh(e,t)}}var wh=!0;function Sh(e,t,n,s){var a=F.T;F.T=null;var r=I.p;try{I.p=2,Ch(e,t,n,s)}finally{I.p=r,F.T=a}}function jh(e,t,n,s){var a=F.T;F.T=null;var r=I.p;try{I.p=8,Ch(e,t,n,s)}finally{I.p=r,F.T=a}}function Ch(e,t,n,s){if(wh){var a=kh(s);if(null===a)su(e,t,s,Nh,n),Ih(e,s);else if(function(e,t,n,s,a){switch(t){case"focusin":return Rh=Oh(Rh,e,t,n,s,a),!0;case"dragenter":return Ah=Oh(Ah,e,t,n,s,a),!0;case"mouseover":return Th=Oh(Th,e,t,n,s,a),!0;case"pointerover":var r=a.pointerId;return Mh.set(r,Oh(Mh.get(r)||null,e,t,n,s,a)),!0;case"gotpointercapture":return r=a.pointerId,Dh.set(r,Oh(Dh.get(r)||null,e,t,n,s,a)),!0}return!1}(a,e,t,n,s))s.stopPropagation();else if(Ih(e,s),4&t&&-1<Fh.indexOf(e)){for(;null!==a;){var r=Je(a);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var i=Pe(r.pendingLanes);if(0!==i){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-Se(i);o.entanglements[1]|=l,i&=~l}Id(r),!(6&fc)&&(Fc=de()+500,Od(0))}}break;case 31:case 13:null!==(o=Ls(r,2))&&Yc(o,0,2),td(),vh(r,2)}if(null===(r=kh(s))&&su(e,t,s,Nh,n),r===a)break;a=r}null!==a&&s.stopPropagation()}else su(e,t,s,null,n)}}function kh(e){return _h(e=Ft(e))}var Nh=null;function _h(e){if(Nh=null,null!==(e=Ze(e))){var t=r(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=i(t)))return e;e=null}else if(31===n){if(null!==(e=o(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nh=e,null}function Ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case he:return 2;case me:return 8;case pe:case fe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Eh=!1,Rh=null,Ah=null,Th=null,Mh=new Map,Dh=new Map,Lh=[],Fh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ih(e,t){switch(e){case"focusin":case"focusout":Rh=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":Mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function Oh(e,t,n,s,a,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[a]},null!==t&&(null!==(t=Je(t))&&yh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function zh(e){var t=Ze(e.target);if(null!==t){var n=r(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=i(n)))return e.blockedOn=t,void $e(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=o(n)))return e.blockedOn=t,void $e(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=kh(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&yh(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);Lt=s,n.target.dispatchEvent(s),Lt=null,t.shift()}return!0}function $h(e,t,n){Bh(e)&&n.delete(t)}function Uh(){Eh=!1,null!==Rh&&Bh(Rh)&&(Rh=null),null!==Ah&&Bh(Ah)&&(Ah=null),null!==Th&&Bh(Th)&&(Th=null),Mh.forEach($h),Dh.forEach($h)}function Vh(t,n){t.blockedOn===n&&(t.blockedOn=null,Eh||(Eh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Uh)))}var qh=null;function Hh(t){qh!==t&&(qh=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qh===t&&(qh=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],a=t[e+2];if("function"!=typeof s){if(null===_h(s||n))continue;break}var r=Je(n);null!==r&&(t.splice(e,3),e-=3,no(r,{pending:!0,data:a,method:n.method,action:s},s,a))}}))}function Gh(e){function t(t){return Vh(t,e)}null!==Rh&&Vh(Rh,e),null!==Ah&&Vh(Ah,e),null!==Th&&Vh(Th,e),Mh.forEach(t),Dh.forEach(t);for(var n=0;n<Lh.length;n++){var s=Lh[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Lh.length&&null===(n=Lh[0]).blockedOn;)zh(n),null===n.blockedOn&&Lh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(s=0;s<n.length;s+=3){var a=n[s],r=n[s+1],i=a[qe]||null;if("function"==typeof r)i||Hh(n);else if(i){var o=null;if(r&&r.hasAttribute("formAction")){if(a=r,i=r[qe]||null)o=i.formAction;else if(null!==_h(a))continue}else o=i.action;"function"==typeof o?n[s+1]=o:(n.splice(s,3),s-=3),Hh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var s=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Wh(e){this._internalRoot=e}function Qh(e){this._internalRoot=e}Qh.prototype.render=Wh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));gh(t.current,Wc(),e,t,null,null)},Qh.prototype.unmount=Wh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),td(),t[He]=null}},Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lh.length&&0!==t&&t<Lh[n].priority;n++);Lh.splice(n,0,e),0===n&&zh(e)}};var Yh=t.version;if("19.2.3"!==Yh)throw Error(s(527,Yh,"19.2.3"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=r(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(a=i.return)){n=a;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return l(i),e;if(o===a)return l(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==a.return)n=i,a=o;else{for(var c=!1,d=i.child;d;){if(d===n){c=!0,n=i,a=o;break}if(d===a){c=!0,a=i,n=o;break}d=d.sibling}if(!c){for(d=o.child;d;){if(d===n){c=!0,n=o,a=i;break}if(d===a){c=!0,a=o,n=i;break}d=d.sibling}if(!c)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?c(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{ye=Zh.inject(Xh),be=Zh}catch(em){}}return b.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,r="",i=No,o=_o,l=Po;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=ph(e,1,!1,null,0,n,r,null,i,o,l,Kh),e[He]=t.current,tu(e),new Wh(t)},b.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var r=!1,i="",o=No,l=_o,c=Po,d=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(d=n.formState)),(t=ph(e,1,!0,t,0,r,i,d,o,l,c,Kh)).context=fh(null),n=t.current,(i=br(r=Oe(r=Wc()))).callback=null,wr(n,i,r),n=r,t.current.lanes=n,De(t,n),Id(t),e[He]=t.current,tu(e),new Qh(t)},b.version="19.2.3",b}const M=n((_||(_=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),y.exports=T()),y.exports)),D=new WeakMap,L=new WeakMap,F={current:[]};let I=!1,O=0;const z=new Set,B=new Map;function $(e){for(const t of e){if(F.current.includes(t))continue;F.current.push(t),t.recompute();const e=L.get(t);if(e)for(const t of e){const e=D.get(t);(null==e?void 0:e.length)&&$(e)}}}function U(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function V(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function q(e){if(O>0&&!B.has(e)&&B.set(e,e.prevState),z.add(e),!(O>0||I))try{for(I=!0;z.size>0;){const e=Array.from(z);z.clear();for(const t of e){const e=B.get(t)??t.prevState;t.prevState=e,U(t)}for(const t of e){const e=D.get(t);e&&(F.current.push(t),$(e))}for(const t of e){const e=D.get(t);if(e)for(const t of e)V(t)}}}finally{I=!1,F.current=[],B.clear()}}function H(e){O++;try{e()}finally{if(O--,0===O){const e=z.values().next().value;e&&q(e)}}}let G=class{constructor(e,t){this.listeners=new Set,this.subscribe=e=>{var t,n;this.listeners.add(e);const s=null==(n=null==(t=this.options)?void 0:t.onSubscribe)?void 0:n.call(t,e,this);return()=>{this.listeners.delete(e),null==s||s()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,n,s;this.prevState=this.state,(null==(t=this.options)?void 0:t.updateFn)?this.state=this.options.updateFn(this.prevState)(e):!function(e){return"function"==typeof e}(e)?this.state=e:this.state=e(this.prevState),null==(s=null==(n=this.options)?void 0:n.onUpdate)||s.call(n),q(this)}};const K="__TSR_index",W="popstate",Q="beforeunload";function Y(e,t){t||(t={});const n=J();return{...t,key:n,__TSR_key:n,[K]:e}}function X(e){const t="undefined"!=typeof document?window:void 0,n=t.history.pushState,s=t.history.replaceState;let a=[];const r=()=>a,i=()=>Z(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);if(!t.history.state?.__TSR_key&&!t.history.state?.key){const e=J();t.history.replaceState({[K]:0,key:e,__TSR_key:e},"")}let o,l=i(),c=!1,d=!1,u=!1,h=!1;let m,p;const f=()=>{m&&(b._ignoreSubscribers=!0,(m.isPush?t.history.pushState:t.history.replaceState)(m.state,"",m.href),b._ignoreSubscribers=!1,m=void 0,p=void 0,o=void 0)},g=(e,t,n)=>{const s=t;p||(o=l),l=Z(t,n),m={href:s,state:n,isPush:m?.isPush||"push"===e},p||(p=Promise.resolve().then(()=>f()))},x=e=>{l=i(),b.notify({type:e})},v=async()=>{if(d)return void(d=!1);const e=i(),n=e.state[K]-l.state[K],s=-1===n,a=!(1===n)&&!s||c;c=!1;const o=a?"GO":s?"BACK":"FORWARD",h=a?{type:"GO",index:n}:{type:s?"BACK":"FORWARD"};if(u)u=!1;else{const n=r();if("undefined"!=typeof document&&n.length)for(const s of n){if(await s.blockerFn({currentLocation:l,nextLocation:e,action:o}))return d=!0,t.history.go(1),void b.notify(h)}}l=i(),b.notify(h)},y=e=>{if(h)return void(h=!1);let t=!1;const n=r();if("undefined"!=typeof document&&n.length)for(const s of n){const e=s.enableBeforeUnload??!0;if(!0===e){t=!0;break}if("function"==typeof e&&!0===e()){t=!0;break}}return t?(e.preventDefault(),e.returnValue=""):void 0},b=function(e){let t=e.getLocation();const n=new Set,s=s=>{t=e.getLocation(),n.forEach(e=>e({location:t,action:s}))},a=n=>{e.notifyOnIndexChange??1?s(n):t=e.getLocation()},r=async({task:n,navigateOpts:s,...a})=>{if(s?.ignoreBlocker)return void n();const r=e.getBlockers?.()??[],i="PUSH"===a.type||"REPLACE"===a.type;if("undefined"!=typeof document&&r.length&&i)for(const o of r){const n=Z(a.path,a.state);if(await o.blockerFn({currentLocation:t,nextLocation:n,action:a.type}))return void e.onBlocked?.()}n()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:e=>(n.add(e),()=>{n.delete(e)}),push:(n,a,i)=>{const o=t.state[K];a=Y(o+1,a),r({task:()=>{e.pushState(n,a),s({type:"PUSH"})},navigateOpts:i,type:"PUSH",path:n,state:a})},replace:(n,a,i)=>{const o=t.state[K];a=Y(o,a),r({task:()=>{e.replaceState(n,a),s({type:"REPLACE"})},navigateOpts:i,type:"REPLACE",path:n,state:a})},go:(t,n)=>{r({task:()=>{e.go(t),a({type:"GO",index:t})},navigateOpts:n,type:"GO"})},back:t=>{r({task:()=>{e.back(t?.ignoreBlocker??!1),a({type:"BACK"})},navigateOpts:t,type:"BACK"})},forward:t=>{r({task:()=>{e.forward(t?.ignoreBlocker??!1),a({type:"FORWARD"})},navigateOpts:t,type:"FORWARD"})},canGoBack:()=>0!==t.state[K],createHref:t=>e.createHref(t),block:t=>{if(!e.setBlockers)return()=>{};const n=e.getBlockers?.()??[];return e.setBlockers([...n,t]),()=>{const n=e.getBlockers?.()??[];e.setBlockers?.(n.filter(e=>e!==t))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:s}}({getLocation:()=>l,getLength:()=>t.history.length,pushState:(e,t)=>g("push",e,t),replaceState:(e,t)=>g("replace",e,t),back:e=>(e&&(u=!0),h=!0,t.history.back()),forward:e=>{e&&(u=!0),h=!0,t.history.forward()},go:e=>{c=!0,t.history.go(e)},createHref:e=>e,flush:f,destroy:()=>{t.history.pushState=n,t.history.replaceState=s,t.removeEventListener(Q,y,{capture:!0}),t.removeEventListener(W,v)},onBlocked:()=>{o&&l!==o&&(l=o)},getBlockers:r,setBlockers:e=>a=e,notifyOnIndexChange:!1});return t.addEventListener(Q,y,{capture:!0}),t.addEventListener(W,v),t.history.pushState=function(...e){const s=n.apply(t.history,e);return b._ignoreSubscribers||x("PUSH"),s},t.history.replaceState=function(...e){const n=s.apply(t.history,e);return b._ignoreSubscribers||x("REPLACE"),n},b}function Z(e,t){const n=function(e){let t=e.replace(/[\x00-\x1f\x7f]/g,"");return t.startsWith("//")&&(t="/"+t.replace(/^\/+/,"")),t}(e),s=n.indexOf("#"),a=n.indexOf("?"),r=J();return{href:n,pathname:n.substring(0,s>0?a>0?Math.min(s,a):s:a>0?a:n.length),hash:s>-1?n.substring(s):"",search:a>-1?n.slice(a,-1===s?void 0:s):"",state:t||{[K]:0,key:r,__TSR_key:r}}}function J(){return(Math.random()+1).toString(36).substring(7)}function ee(e){return e[e.length-1]}function te(e,t){return"function"==typeof e?e(t):e}const ne=Object.prototype.hasOwnProperty;function se(e,t){if(e===t)return e;const n=t,s=oe(e)&&oe(n);if(!(s||re(e)&&re(n)))return n;const a=s?e:ae(e);if(!a)return n;const r=s?n:ae(n);if(!r)return n;const i=a.length,o=r.length,l=s?new Array(o):{};let c=0;for(let d=0;d<o;d++){const t=s?d:r[d],a=e[t],o=n[t];if(a===o){l[t]=a,(s?d<i:ne.call(e,t))&&c++;continue}if(null===a||null===o||"object"!=typeof a||"object"!=typeof o){l[t]=o;continue}const u=se(a,o);l[t]=u,u===a&&c++}return i===o&&c===i?e:l}function ae(e){const t=[],n=Object.getOwnPropertyNames(e);for(const a of n){if(!Object.prototype.propertyIsEnumerable.call(e,a))return!1;t.push(a)}const s=Object.getOwnPropertySymbols(e);for(const a of s){if(!Object.prototype.propertyIsEnumerable.call(e,a))return!1;t.push(a)}return t}function re(e){if(!ie(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!ie(n)&&!!n.hasOwnProperty("isPrototypeOf")}function ie(e){return"[object Object]"===Object.prototype.toString.call(e)}function oe(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function le(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let s=0,a=e.length;s<a;s++)if(!le(e[s],t[s],n))return!1;return!0}if(re(e)&&re(t)){const s=n?.ignoreUndefined??!0;if(n?.partial){for(const a in t)if(!(s&&void 0===t[a]||le(e[a],t[a],n)))return!1;return!0}let a=0;if(s)for(const t in e)void 0!==e[t]&&a++;else a=Object.keys(e).length;let r=0;for(const i in t)if((!s||void 0!==t[i])&&(r++,r>a||!le(e[i],t[i],n)))return!1;return a===r}return!1}function ce(e){let t,n;const s=new Promise((e,s)=>{t=e,n=s});return s.status="pending",s.resolve=n=>{s.status="resolved",s.value=n,t(n),e?.(n)},s.reject=e=>{s.status="rejected",n(e)},s}function de(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)}function ue(e){let t;try{t=decodeURI(e)}catch{t=e.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}return function(e){return e.replace(/[\x00-\x1f\x7f]/g,"")}(t)}function he(e,t){if(!e)return e;const n=/%25|%5C/gi;let s,a=0,r="";for(;null!==(s=n.exec(e));)r+=ue(e.slice(a,s.index))+s[0],a=n.lastIndex;return r+=ue(a?e.slice(a):e),r.startsWith("//")&&(r="/"+r.replace(/^\/+/,"")),r}function me(e,t){if(!e)throw new Error("Invariant failed")}function pe(e){const t=new Map;let n,s;const a=e=>{e.next&&(e.prev?(e.prev.next=e.next,e.next.prev=e.prev,e.next=void 0,s&&(s.next=e,e.prev=s)):(e.next.prev=void 0,n=e.next,e.next=void 0,s&&(e.prev=s,s.next=e)),s=e)};return{get(e){const n=t.get(e);if(n)return a(n),n.value},set(r,i){if(t.size>=e&&n){const e=n;t.delete(e.key),e.next&&(n=e.next,e.next.prev=void 0),e===s&&(s=void 0)}const o=t.get(r);if(o)o.value=i,a(o);else{const e={key:r,value:i,prev:s};s&&(s.next=e),s=e,n||(n=e),t.set(r,e)}},clear(){t.clear(),n=void 0,s=void 0}}}const fe=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,ge=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,xe=/^([^{]*)\{\$\}([^}]*)$/;function ve(e,t,n=new Uint16Array(6)){const s=e.indexOf("/",t),a=-1===s?e.length:s,r=e.substring(t,a);if(!r||!r.includes("$"))return n[0]=0,n[1]=t,n[2]=t,n[3]=a,n[4]=a,n[5]=a,n;if("$"===r){const s=e.length;return n[0]=2,n[1]=t,n[2]=t,n[3]=s,n[4]=s,n[5]=s,n}if(36===r.charCodeAt(0))return n[0]=1,n[1]=t,n[2]=t+1,n[3]=a,n[4]=a,n[5]=a,n;const i=r.match(xe);if(i){const s=i[1].length;return n[0]=2,n[1]=t+s,n[2]=t+s+1,n[3]=t+s+2,n[4]=t+s+3,n[5]=e.length,n}const o=r.match(ge);if(o){const e=o[1],s=o[2],r=o[3],i=e.length;return n[0]=3,n[1]=t+i,n[2]=t+i+3,n[3]=t+i+3+s.length,n[4]=a-r.length,n[5]=a,n}const l=r.match(fe);if(l){const e=l[1],s=l[2],r=l[3],i=e.length;return n[0]=1,n[1]=t+i,n[2]=t+i+2,n[3]=t+i+2+s.length,n[4]=a-r.length,n[5]=a,n}return n[0]=0,n[1]=t,n[2]=t,n[3]=a,n[4]=a,n[5]=a,n}function ye(e,t,n,s,a,r,i){i?.(n);let o=s;{const s=n.fullPath??n.from,i=s.length,l=n.options?.caseSensitive??e;for(;o<i;){const e=ve(s,o,t);let i;const c=o,d=e[5];o=d+1,r++;switch(e[0]){case 0:{const t=s.substring(e[2],e[3]);if(l){const e=a.static?.get(t);if(e)i=e;else{a.static??=new Map;const e=Se(n.fullPath??n.from);e.parent=a,e.depth=r,i=e,a.static.set(t,e)}}else{const e=t.toLowerCase(),s=a.staticInsensitive?.get(e);if(s)i=s;else{a.staticInsensitive??=new Map;const t=Se(n.fullPath??n.from);t.parent=a,t.depth=r,i=t,a.staticInsensitive.set(e,t)}}break}case 1:{const t=s.substring(c,e[1]),o=s.substring(e[4],d),u=l&&!(!t&&!o),h=t?u?t:t.toLowerCase():void 0,m=o?u?o:o.toLowerCase():void 0,p=a.dynamic?.find(e=>e.caseSensitive===u&&e.prefix===h&&e.suffix===m);if(p)i=p;else{const e=je(1,n.fullPath??n.from,u,h,m);i=e,e.depth=r,e.parent=a,a.dynamic??=[],a.dynamic.push(e)}break}case 3:{const t=s.substring(c,e[1]),o=s.substring(e[4],d),u=l&&!(!t&&!o),h=t?u?t:t.toLowerCase():void 0,m=o?u?o:o.toLowerCase():void 0,p=a.optional?.find(e=>e.caseSensitive===u&&e.prefix===h&&e.suffix===m);if(p)i=p;else{const e=je(3,n.fullPath??n.from,u,h,m);i=e,e.parent=a,e.depth=r,a.optional??=[],a.optional.push(e)}break}case 2:{const t=s.substring(c,e[1]),o=s.substring(e[4],d),u=l&&!(!t&&!o),h=t?u?t:t.toLowerCase():void 0,m=o?u?o:o.toLowerCase():void 0,p=je(2,n.fullPath??n.from,u,h,m);i=p,p.parent=a,p.depth=r,a.wildcard??=[],a.wildcard.push(p)}}a=i}const c=(n.path||!n.children)&&!n.isRoot;if(c&&s.endsWith("/")){const e=Se(n.fullPath??n.from);e.kind=4,e.parent=a,r++,e.depth=r,a.index=e,a=e}c&&!a.route&&(a.route=n,a.fullPath=n.fullPath??n.from)}if(n.children)for(const l of n.children)ye(e,t,l,o,a,r,i)}function be(e,t){if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function we(e){if(e.static)for(const t of e.static.values())we(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())we(t);if(e.dynamic?.length){e.dynamic.sort(be);for(const t of e.dynamic)we(t)}if(e.optional?.length){e.optional.sort(be);for(const t of e.optional)we(t)}if(e.wildcard?.length){e.wildcard.sort(be);for(const t of e.wildcard)we(t)}}function Se(e){return{kind:0,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null}}function je(e,t,n,s,a){return{kind:e,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,caseSensitive:n,prefix:s,suffix:a}}function Ce(e,t,n=!1){const s=e.split("/"),a=function(e,t,n,s){if("/"===e&&n.index)return{node:n.index,skipped:0};const a=!ee(t),r=a&&"/"!==e,i=t.length-(a?1:0),o=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let l=null,c=null,d=null;for(;o.length;){const e=o.pop();let{node:n,index:a,skipped:u,depth:h,statics:m,dynamics:p,optionals:f}=e;s&&n.route&&4!==n.kind&&ke(c,e)&&(c=e);const g=a===i;if(g&&(n.route&&!r&&ke(d,e)&&(d=e),!n.optional&&!n.wildcard&&!n.index))continue;const x=g?void 0:t[a];let v;if(g&&n.index){const e={node:n.index,index:a,skipped:u,depth:h+1,statics:m,dynamics:p,optionals:f};if(m===i&&!p&&!f&&!u)return e;ke(d,e)&&(d=e)}if(n.wildcard&&ke(l,e))for(const s of n.wildcard){const{prefix:e,suffix:n}=s;if(e){if(g)continue;if(!(s.caseSensitive?x:v??=x.toLowerCase()).startsWith(e))continue}if(n){if(g)continue;const e=t.slice(a).join("/").slice(-n.length);if((s.caseSensitive?e:e.toLowerCase())!==n)continue}l={node:s,index:i,skipped:u,depth:h,statics:m,dynamics:p,optionals:f};break}if(n.optional){const e=u|1<<h,t=h+1;for(let s=n.optional.length-1;s>=0;s--){const r=n.optional[s];o.push({node:r,index:a,skipped:e,depth:t,statics:m,dynamics:p,optionals:f})}if(!g)for(let s=n.optional.length-1;s>=0;s--){const e=n.optional[s],{prefix:r,suffix:i}=e;if(r||i){const t=e.caseSensitive?x:v??=x.toLowerCase();if(r&&!t.startsWith(r))continue;if(i&&!t.endsWith(i))continue}o.push({node:e,index:a+1,skipped:u,depth:t,statics:m,dynamics:p,optionals:f+1})}}if(!g&&n.dynamic&&x)for(let t=n.dynamic.length-1;t>=0;t--){const e=n.dynamic[t],{prefix:s,suffix:r}=e;if(s||r){const t=e.caseSensitive?x:v??=x.toLowerCase();if(s&&!t.startsWith(s))continue;if(r&&!t.endsWith(r))continue}o.push({node:e,index:a+1,skipped:u,depth:h+1,statics:m,dynamics:p+1,optionals:f})}if(!g&&n.staticInsensitive){const e=n.staticInsensitive.get(v??=x.toLowerCase());e&&o.push({node:e,index:a+1,skipped:u,depth:h+1,statics:m+1,dynamics:p,optionals:f})}if(!g&&n.static){const e=n.static.get(x);e&&o.push({node:e,index:a+1,skipped:u,depth:h+1,statics:m+1,dynamics:p,optionals:f})}}if(d&&l)return ke(l,d)?d:l;if(d)return d;if(l)return l;if(s&&c){let n=c.index;for(let e=0;e<c.index;e++)n+=t[e].length;const s=n===e.length?"/":e.slice(n);return{node:c.node,skipped:c.skipped,"**":decodeURIComponent(s)}}return null}(e,s,t,n);if(!a)return null;const r=function(e,t,n){const s=function(e){const t=Array(e.depth+1);do{t[e.depth]=e,e=e.parent}while(e);return t}(n.node);let a=null;const r={};for(let i=0,o=0,l=0;o<s.length;i++,o++,l++){const c=s[o],d=t[i],u=l;if(d&&(l+=d.length),1===c.kind){a??=n.node.fullPath.split("/");const e=a[o],t=c.prefix?.length??0;if(123===e.charCodeAt(t)){const n=c.suffix?.length??0,s=e.substring(t+2,e.length-n-1),a=d.substring(t,d.length-n);r[s]=decodeURIComponent(a)}else{r[e.substring(1)]=decodeURIComponent(d)}}else if(3===c.kind){if(n.skipped&1<<o){i--;continue}a??=n.node.fullPath.split("/");const e=a[o],t=c.prefix?.length??0,s=c.suffix?.length??0,l=e.substring(t+3,e.length-s-1),u=c.suffix||c.prefix?d.substring(t,d.length-s):d;u&&(r[l]=decodeURIComponent(u))}else if(2===c.kind){const t=c,n=e.substring(u+(t.prefix?.length??0),e.length-(t.suffix?.length??0)),s=decodeURIComponent(n);r["*"]=s,r._splat=s;break}}return r}(e,s,a);"**"in a&&(r["**"]=a["**"]);return{route:a.node.route,params:r}}function ke(e,t){return!e||(t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((4===t.node.kind)>(4===e.node.kind)||4===t.node.kind==(4===e.node.kind)&&t.depth>e.depth))))}function Ne(e){return _e(e.filter(e=>void 0!==e).join("/"))}function _e(e){return e.replace(/\/{2,}/g,"/")}function Pe(e){return"/"===e?e:e.replace(/^\/{1,}/,"")}function Ee(e){const t=e.length;return t>1&&"/"===e[t-1]?e.replace(/\/{1,}$/,""):e}function Re(e){return Ee(Pe(e))}function Ae(e,t){return e?.endsWith("/")&&"/"!==e&&e!==`${t}/`?e.slice(0,-1):e}function Te(e,t,n){const s=t[e];return"string"!=typeof s?s:"_splat"===e?encodeURI(s):function(e,t){let n=encodeURIComponent(e);if(t)for(const[s,a]of t)n=n.replaceAll(s,a);return n}(s,n)}function Me({path:e,params:t,decodeCharMap:n}){let s=!1;const a={};if(!e||"/"===e)return{interpolatedPath:"/",usedParams:a,isMissingParams:s};if(!e.includes("$"))return{interpolatedPath:e,usedParams:a,isMissingParams:s};const r=e.length;let i,o=0,l="";for(;o<r;){const r=o;i=ve(e,r,i);const c=i[5];if(o=c+1,r===c)continue;const d=i[0];if(0!==d){if(2===d){const o=t._splat;a._splat=o,a["*"]=o;const d=e.substring(r,i[1]),u=e.substring(i[4],c);if(!o){s=!0,(d||u)&&(l+="/"+d+u);continue}l+="/"+d+Te("_splat",t,n)+u;continue}if(1===d){const o=e.substring(i[2],i[3]);s||o in t||(s=!0),a[o]=t[o];const d=e.substring(r,i[1]),u=e.substring(i[4],c);l+="/"+d+(Te(o,t,n)??"undefined")+u;continue}if(3===d){const s=e.substring(i[2],i[3]),o=t[s];if(null==o)continue;a[s]=o;const d=e.substring(r,i[1]),u=e.substring(i[4],c);l+="/"+d+(Te(s,t,n)??"")+u;continue}}else l+="/"+e.substring(r,c)}e.endsWith("/")&&(l+="/");return{usedParams:a,interpolatedPath:l||"/",isMissingParams:s}}function De(e){return!!e?.isNotFound}const Le="tsr-scroll-restoration-v1_3";const Fe=function(){const e=function(){try{if("undefined"!=typeof window&&"object"==typeof window.sessionStorage)return window.sessionStorage}catch{}}();if(!e)return null;const t=e.getItem(Le);let n=t?JSON.parse(t):{};return{state:n,set:t=>{n=te(t,n)||n;try{e.setItem(Le,JSON.stringify(n))}catch{}}}}(),Ie=e=>e.state.__TSR_key||e.href;let Oe=!1;function ze({storageKey:e,key:t,behavior:n,shouldScrollRestoration:s,scrollToTopSelectors:a,location:r}){let i;try{i=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(l){return}const o=i[t||window.history.state?.__TSR_key];Oe=!0;e:{if(s&&o&&Object.keys(o).length>0){for(const e in o){const t=o[e];if("window"===e)window.scrollTo({top:t.scrollY,left:t.scrollX,behavior:n});else if(e){const n=document.querySelector(e);n&&(n.scrollLeft=t.scrollX,n.scrollTop=t.scrollY)}}break e}const e=(r??window.location).hash.split("#",2)[1];if(e){const t=window.history.state?.__hashScrollIntoViewOptions??!0;if(t){const n=document.getElementById(e);n&&n.scrollIntoView(t)}break e}const t={top:0,left:0,behavior:n};if(window.scrollTo(t),a)for(const n of a){if("window"===n)continue;const e="function"==typeof n?n():document.querySelector(n);e&&e.scrollTo(t)}}Oe=!1}function Be(e,t){if(!Fe&&!e.isServer)return;if((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!Fe)return;e.isScrollRestorationSetup=!0,Oe=!1;const n=e.options.getScrollRestorationKey||Ie;window.history.scrollRestoration="manual";const s=t=>{if(Oe||!e.isScrollRestoring)return;let s="";if(t.target===document||t.target===window)s="window";else{const e=t.target.getAttribute("data-scroll-restoration-id");s=e?`[data-scroll-restoration-id="${e}"]`:function(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}(t.target)}const a=n(e.state.location);Fe.set(e=>{const t=e[a]||={},n=t[s]||={};if("window"===s)n.scrollX=window.scrollX||0,n.scrollY=window.scrollY||0;else if(s){const e=document.querySelector(s);e&&(n.scrollX=e.scrollLeft||0,n.scrollY=e.scrollTop||0)}return e})};"undefined"!=typeof document&&document.addEventListener("scroll",((e,t)=>{let n;return(...s)=>{n||(n=setTimeout(()=>{e(...s),n=null},t))}})(s,100),!0),e.subscribe("onRendered",t=>{const s=n(t.toLocation);if(e.resetNextScroll){if("function"==typeof e.options.scrollRestoration){if(!e.options.scrollRestoration({location:e.latestLocation}))return}ze({storageKey:Le,key:s,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&Fe.set(e=>(e[s]||={},e))}else e.resetNextScroll=!0})}function $e(e){return e?"false"!==e&&("true"===e||(0*+e==0&&+e+""===e?+e:e)):""}const Ue=(Ve=JSON.parse,e=>{"?"===e[0]&&(e=e.substring(1));const t=function(e){const t=new URLSearchParams(e),n={};for(const[s,a]of t.entries()){const e=n[s];null==e?n[s]=$e(a):Array.isArray(e)?e.push($e(a)):n[s]=[e,$e(a)]}return n}(e);for(const s in t){const e=t[s];if("string"==typeof e)try{t[s]=Ve(e)}catch(n){}}return t});var Ve;const qe=function(e,t){const n="function"==typeof t;function s(s){if("object"==typeof s&&null!==s)try{return e(s)}catch(a){}else if(n&&"string"==typeof s)try{return t(s),e(s)}catch(a){}return s}return e=>{const t=function(e,t=String){const n=new URLSearchParams;for(const s in e){const a=e[s];void 0!==a&&n.set(s,t(a))}return n.toString()}(e,s);return t?`?${t}`:""}}(JSON.stringify,JSON.parse);const He="__root__";function Ge(e){return e instanceof Response&&!!e.options}const Ke=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},We=(e,t)=>!(!e.preload||e.router.state.matches.some(e=>e.id===t)),Qe=(e,t,n=!0)=>{const s={...e.router.options.context??{}},a=n?t:t-1;for(let r=0;r<=a;r++){const t=e.matches[r];if(!t)continue;const n=e.router.getMatch(t.id);n&&Object.assign(s,n.__routeContext,n.__beforeLoadContext)}return s},Ye=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),me(n.options.notFoundComponent);const s=e.matches.find(e=>e.routeId===n.id);me(s,n.id),e.updateMatch(s.id,e=>({...e,status:"notFound",error:t,isFetching:!1})),"BEFORE_LOAD"===t.routerCode&&n.parentRoute&&(t.routeId=n.parentRoute.id,Ye(e,t))},Xe=(e,t,n)=>{if(Ge(n)||De(n)){if(Ge(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const s=Ge(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,e=>({...e,status:s,isFetching:!1,error:n})),De(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw Ge(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n)):(Ye(e,n),n)}},Ze=(e,t)=>{const n=e.router.getMatch(t);return!(e.router.isServer||!n._nonReactive.dehydrated)||!(!e.router.isServer||!1!==n.ssr)},Je=(e,t,n,s)=>{const{id:a,routeId:r}=e.matches[t],i=e.router.looseRoutesById[r];if(n instanceof Promise)throw n;n.routerCode=s,e.firstBadMatchIndex??=t,Xe(e,e.router.getMatch(a),n);try{i.options.onError?.(n)}catch(o){n=o,Xe(e,e.router.getMatch(a),n)}e.updateMatch(a,e=>(e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loadPromise?.resolve(),{...e,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},et=(e,t,n,s)=>{if(void 0!==s._nonReactive.pendingTimeout)return;const a=n.options.pendingMs??e.router.options.defaultPendingMs;if(!(!e.onReady||e.router.isServer||We(e,t)||!(n.options.loader||n.options.beforeLoad||ct(n))||"number"!=typeof a||a===1/0||!(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const t=setTimeout(()=>{Ke(e)},a);s._nonReactive.pendingTimeout=t}},tt=(e,t)=>{const{id:n,routeId:s}=e.matches[t],a=e.router.looseRoutesById[s],r=()=>((e,t,n,s)=>{const a=e.router.getMatch(t),r=a._nonReactive.loadPromise;a._nonReactive.loadPromise=ce(()=>{r?.resolve()});const{paramsError:i,searchError:o}=a;i&&Je(e,n,i,"PARSE_PARAMS"),o&&Je(e,n,o,"VALIDATE_SEARCH"),et(e,t,s,a);const l=new AbortController,c=e.matches[n-1]?.id,d=c?e.router.getMatch(c):void 0;d?.context??e.router.options.context;let u=!1;const h=()=>{u||(u=!0,e.updateMatch(t,e=>({...e,isFetching:"beforeLoad",fetchCount:e.fetchCount+1,abortController:l})))},m=()=>{a._nonReactive.beforeLoadPromise?.resolve(),a._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,e=>({...e,isFetching:!1}))};if(!s.options.beforeLoad)return void H(()=>{h(),m()});a._nonReactive.beforeLoadPromise=ce();const p={...Qe(e,n,!1),...a.__routeContext},{search:f,params:g,cause:x}=a,v=We(e,t),y={search:f,abortController:l,params:g,preload:v,context:p,location:e.location,navigate:t=>e.router.navigate({...t,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:v?"preload":x,matches:e.matches,...e.router.options.additionalContext},b=s=>{void 0!==s?((Ge(s)||De(s))&&(h(),Je(e,n,s,"BEFORE_LOAD")),H(()=>{h(),e.updateMatch(t,e=>({...e,__beforeLoadContext:s})),m()})):H(()=>{h(),m()})};let w;try{if(w=s.options.beforeLoad(y),de(w))return h(),w.catch(t=>{Je(e,n,t,"BEFORE_LOAD")}).then(b)}catch(S){h(),Je(e,n,S,"BEFORE_LOAD")}b(w)})(e,n,t,a),i=()=>{if(Ze(e,n))return;const t=((e,t,n)=>{const s=e.router.getMatch(t);if(!s._nonReactive.beforeLoadPromise&&!s._nonReactive.loaderPromise)return;et(e,t,n,s);const a=()=>{const n=e.router.getMatch(t);!n.preload||"redirected"!==n.status&&"notFound"!==n.status||Xe(e,n,n.error)};return s._nonReactive.beforeLoadPromise?s._nonReactive.beforeLoadPromise.then(a):a()})(e,n,a);return de(t)?t.then(r):r()};return(()=>{if(e.router.isServer){const s=((e,t,n,s)=>{const a=e.router.getMatch(t),r=e.matches[n-1]?.id,i=r?e.router.getMatch(r):void 0;if(e.router.isShell())return void(a.ssr=s.id===He);if(!1===i?.ssr)return void(a.ssr=!1);const o=e=>!0===e&&"data-only"===i?.ssr?"data-only":e,l=e.router.options.defaultSsr??!0;if(void 0===s.options.ssr)return void(a.ssr=o(l));if("function"!=typeof s.options.ssr)return void(a.ssr=o(s.options.ssr));const{search:c,params:d}=a,u={search:lt(c,a.searchError),params:lt(d,a.paramsError),location:e.location,matches:e.matches.map(e=>({index:e.index,pathname:e.pathname,fullPath:e.fullPath,staticData:e.staticData,id:e.id,routeId:e.routeId,search:lt(e.search,e.searchError),params:lt(e.params,e.paramsError),ssr:e.ssr}))},h=s.options.ssr(u);if(de(h))return h.then(e=>{a.ssr=o(e??l)});a.ssr=o(h??l)})(e,n,t,a);if(de(s))return s.then(i)}return i()})()},nt=(e,t,n)=>{const s=e.router.getMatch(t);if(!s)return;if(!n.options.head&&!n.options.scripts&&!n.options.headers)return;const a={matches:e.matches,match:s,params:s.params,loaderData:s.loaderData};return Promise.all([n.options.head?.(a),n.options.scripts?.(a),n.options.headers?.(a)]).then(([e,t,n])=>{const s=e?.meta,a=e?.links,r=e?.scripts,i=e?.styles;return{meta:s,links:a,headScripts:r,headers:n,scripts:t,styles:i}})},st=(e,t,n,s)=>{const a=e.matchPromises[n-1],{params:r,loaderDeps:i,abortController:o,cause:l}=e.router.getMatch(t),c=Qe(e,n),d=We(e,t);return{params:r,deps:i,preload:!!d,parentMatchPromise:a,abortController:o,context:c,location:e.location,navigate:t=>e.router.navigate({...t,_fromLocation:e.location}),cause:d?"preload":l,route:s,...e.router.options.additionalContext}},at=async(e,t,n,s)=>{try{const i=e.router.getMatch(t);try{e.router.isServer&&!0!==i.ssr||ot(s);const a=s.options.loader?.(st(e,t,n,s)),r=s.options.loader&&de(a);if(!!(r||s._lazyPromise||s._componentsPromise||s.options.head||s.options.scripts||s.options.headers||i._nonReactive.minPendingPromise)&&e.updateMatch(t,e=>({...e,isFetching:"loader"})),s.options.loader){const n=r?await a:a;Xe(e,e.router.getMatch(t),n),void 0!==n&&e.updateMatch(t,e=>({...e,loaderData:n}))}s._lazyPromise&&await s._lazyPromise;const o=i._nonReactive.minPendingPromise;o&&await o,s._componentsPromise&&await s._componentsPromise,e.updateMatch(t,e=>({...e,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(a){let n=a;const o=i._nonReactive.minPendingPromise;o&&await o,De(a)&&await(s.options.notFoundComponent?.preload?.()),Xe(e,e.router.getMatch(t),a);try{s.options.onError?.(a)}catch(r){n=r,Xe(e,e.router.getMatch(t),r)}e.updateMatch(t,e=>({...e,error:n,status:"error",isFetching:!1}))}}catch(i){const n=e.router.getMatch(t);n&&(n._nonReactive.loaderPromise=void 0),Xe(e,n,i)}},rt=async(e,t)=>{const{id:n,routeId:s}=e.matches[t];let a=!1,r=!1;const i=e.router.looseRoutesById[s],o=()=>{e.updateMatch(n,n=>({...n,context:Qe(e,t)}))};if(Ze(e,n)){if(e.router.isServer)return e.router.getMatch(n)}else{const s=e.router.getMatch(n);if(s._nonReactive.loaderPromise){if("success"===s.status&&!e.sync&&!s.preload)return s;await s._nonReactive.loaderPromise;const t=e.router.getMatch(n),a=t._nonReactive.error||t.error;a&&Xe(e,t,a)}else{const l=Date.now()-s.updatedAt,c=We(e,n),d=c?i.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:i.options.staleTime??e.router.options.defaultStaleTime??0,u=i.options.shouldReload,h="function"==typeof u?u(st(e,n,t,i)):u,m=!!c&&!e.router.state.matches.some(e=>e.id===n),p=e.router.getMatch(n);p._nonReactive.loaderPromise=ce(),m!==p.preload&&e.updateMatch(n,e=>({...e,preload:m}));const{status:f,invalid:g}=p;a="success"===f&&(g||(h??l>d)),c&&!1===i.options.preload||(a&&!e.sync?(r=!0,(async()=>{try{await at(e,n,t,i),o();const s=e.router.getMatch(n);s._nonReactive.loaderPromise?.resolve(),s._nonReactive.loadPromise?.resolve(),s._nonReactive.loaderPromise=void 0}catch(s){Ge(s)&&await e.router.navigate(s.options)}})()):("success"!==f||a&&e.sync)&&await at(e,n,t,i))}}const l=e.router.getMatch(n);r||(l._nonReactive.loaderPromise?.resolve(),l._nonReactive.loadPromise?.resolve()),clearTimeout(l._nonReactive.pendingTimeout),l._nonReactive.pendingTimeout=void 0,r||(l._nonReactive.loaderPromise=void 0),l._nonReactive.dehydrated=void 0,r||o();const c=!!r&&l.isFetching;return c!==l.isFetching||!1!==l.invalid?(e.updateMatch(n,e=>({...e,isFetching:c,invalid:!1})),e.router.getMatch(n)):l};async function it(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(e=>e._forcePending)&&Ke(t);try{for(let n=0;n<t.matches.length;n++){const e=tt(t,n);de(e)&&await e}const e=t.firstBadMatchIndex??t.matches.length;for(let n=0;n<e;n++)t.matchPromises.push(rt(t,n));const s=(await Promise.allSettled(t.matchPromises)).filter(e=>"rejected"===e.status).map(e=>e.reason);let a;for(const t of s){if(Ge(t))throw t;!a&&De(t)&&(a=t)}for(const i of t.matches){const{id:e,routeId:s}=i,a=t.router.looseRoutesById[s];try{const n=nt(t,e,a);if(n){const s=await n;t.updateMatch(e,e=>({...e,...s}))}}catch(n){}}if(a)throw a;const r=Ke(t);de(r)&&await r}catch(n){if(De(n)&&!t.preload){const e=Ke(t);throw de(e)&&await e,n}if(Ge(n))throw n}return t.matches}async function ot(e){if(e._lazyLoaded||void 0!==e._lazyPromise||(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...s}=t.options;Object.assign(e.options,s),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&void 0===e._componentsPromise){const t=()=>{const t=[];for(const n of dt){const s=e.options[n]?.preload;s&&t.push(s())}if(t.length)return Promise.all(t).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function lt(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function ct(e){for(const t of dt)if(e.options[t]?.preload)return!0;return!1}const dt=["component","errorComponent","pendingComponent","notFoundComponent"];function ut(e,t){const n=e?.input?.({url:t});if(n){if("string"==typeof n)return new URL(n);if(n instanceof URL)return n}return t}function ht(e,t){const n=e?.output?.({url:t});if(n){if("string"==typeof n)return new URL(n);if(n instanceof URL)return n}return t}function mt(e){const t=e.resolvedLocation,n=e.location;return{fromLocation:t,toLocation:n,pathChanged:t?.pathname!==n.pathname,hrefChanged:t?.href!==n.href,hashChanged:t?.hash!==n.hash}}class pt{constructor(e){this.tempLocationKey=`${Math.round(1e7*Math.random())}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=e=>e(),this.update=e=>{e.notFoundRoute;const t=this.options,n=this.basepath??t?.basepath??"/",s=void 0===this.basepath,a=t?.rewrite;this.options={...t,...e},this.isServer=this.options.isServer??"undefined"==typeof document,this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(e=>[encodeURIComponent(e),e])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=X())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&"null"!==window.origin?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new G({loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:this.latestLocation,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200},{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(e=>!["redirected"].includes(e.status))}}}),Be(this));let r=!1;const i=this.options.basepath??"/",o=this.options.rewrite;if(s||n!==i||a!==o){this.basepath=i;const e=[];""!==Re(i)&&e.push(function(e){const t=Re(e.basepath),n=`/${t}`,s=`${n}/`,a=e.caseSensitive?n:n.toLowerCase(),r=e.caseSensitive?s:s.toLowerCase();return{input:({url:t})=>{const s=e.caseSensitive?t.pathname:t.pathname.toLowerCase();return s===a?t.pathname="/":s.startsWith(r)&&(t.pathname=t.pathname.slice(n.length)),t},output:({url:e})=>(e.pathname=Ne(["/",t,e.pathname]),e)}}({basepath:i})),o&&e.push(o),this.rewrite=0===e.length?void 0:1===e.length?e[0]:function(e){return{input:({url:t})=>{for(const n of e)t=ut(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=ht(e[n],t);return t}}}(e),this.history&&this.updateLatestLocation(),r=!0}r&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),"undefined"!=typeof window&&"CSS"in window&&"function"==typeof window.CSS?.supports&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:e,routesByPath:t,processedTree:n}=function(e,t=!1,n){const s=Se(e.fullPath),a=new Uint16Array(6),r={},i={};let o=0;return ye(t,a,e,1,s,0,e=>{if(n?.(e,o),me(!(e.id in r),String(e.id)),r[e.id]=e,0!==o&&e.path){const n="/"===(t=e.fullPath)?t:t.replace(/\/{1,}$/,"");i[n]&&!e.fullPath.endsWith("/")||(i[n]=e)}var t;o++}),we(s),{processedTree:{segmentTree:s,singleCache:pe(1e3),matchCache:pe(1e3),flatCache:null,masksTree:null},routesById:r,routesByPath:i}}(this.routeTree,this.options.caseSensitive,(e,t)=>{e.init({originalIndex:t})});this.options.routeMasks&&function(e,t){const n=Se("/"),s=new Uint16Array(6);for(const a of e)ye(!1,s,a,1,n,0);we(n),t.masksTree=n,t.flatCache=pe(1e3)}(this.options.routeMasks,n),this.routesById=e,this.routesByPath=t,this.processedTree=n;const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999}),this.routesById[s.id]=s)},this.subscribe=(e,t)=>{const n={eventType:e,fn:t};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=e=>{this.subscribers.forEach(t=>{t.eventType===e.type&&t.fn(e)})},this.parseLocation=(e,t)=>{const n=({href:e,state:n})=>{const s=new URL(e,this.origin),a=ut(this.rewrite,s),r=this.options.parseSearch(a.search),i=this.options.stringifySearch(r);a.search=i;return{href:a.href.replace(a.origin,""),publicHref:e,url:a,pathname:he(a.pathname),searchStr:i,search:se(t?.search,r),hash:a.hash.split("#").reverse()[0]??"",state:se(t?.state,n)}},s=n(e),{__tempLocation:a,__tempKey:r}=s.state;if(a&&(!r||r===this.tempLocationKey)){const e=n(a);return e.state.key=s.state.key,e.state.__TSR_key=s.state.__TSR_key,delete e.state.__tempLocation,{...e,maskedLocation:s}}return s},this.resolvePathCache=pe(1e3),this.resolvePathWithBase=(e,t)=>function({base:e,to:t,trailingSlash:n="never",cache:s}){const a=t.startsWith("/"),r=!a&&"."===t;let i,o,l;if(s){i=a?t:r?e:e+"\0"+t;const n=s.get(i);if(n)return n}if(r)o=e.split("/");else if(a)o=t.split("/");else{for(o=e.split("/");o.length>1&&""===ee(o);)o.pop();const n=t.split("/");for(let e=0,t=n.length;e<t;e++){const s=n[e];""===s?e?e===t-1&&o.push(s):o=[s]:".."===s?o.pop():"."===s||o.push(s)}}o.length>1&&(""===ee(o)?"never"===n&&o.pop():"always"===n&&o.push(""));let c="";for(let u=0;u<o.length;u++){u>0&&(c+="/");const e=o[u];if(!e)continue;l=ve(e,0,l);const t=l[0];if(0===t){c+=e;continue}const n=l[5],s=e.substring(0,l[1]),a=e.substring(l[4],n),r=e.substring(l[2],l[3]);c+=1===t?s||a?`${s}{$${r}}${a}`:`$${r}`:2===t?s||a?`${s}{$}${a}`:"$":`${s}{-$${r}}${a}`}c=_e(c);const d=c||"/";return i&&s&&s.set(i,d),d}({base:e,to:_e(t),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(e,t,n)=>"string"==typeof e?this.matchRoutesInternal({pathname:e,search:t},n):this.matchRoutesInternal(e,t),this.getMatchedRoutes=e=>function({pathname:e,routesById:t,processedTree:n}){const s={},a=Ee(e);let r;const i=function(e,t,n=!1){const s=n?e:`nofuzz\0${e}`,a=t.matchCache.get(s);if(void 0!==a)return a;e||="/";const r=Ce(e,t.segmentTree,n);return r&&(r.branch=function(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}(r.route)),t.matchCache.set(s,r),r}(a,n,!0);i&&(r=i.route,Object.assign(s,i.params));return{matchedRoutes:i?.branch||[t[He]],routeParams:s,foundRoute:r}}({pathname:e,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=e=>{const t=this.getMatch(e);t&&(t.abortController.abort(),clearTimeout(t._nonReactive.pendingTimeout),t._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const e=this.state.matches.filter(e=>"pending"===e.status),t=this.state.matches.filter(e=>"loader"===e.isFetching);new Set([...this.state.pendingMatches??[],...e,...t]).forEach(e=>{this.cancelMatch(e.id)})},this.buildLocation=e=>{const t=(t={})=>{const n=t._fromLocation||this.pendingBuiltLocation||this.latestLocation,s=ee(this.matchRoutes(n,{_buildLocation:!0}));t.from;const a="path"===t.unsafeRelative?n.pathname:t.from??s.fullPath,r=this.resolvePathWithBase(a,"."),i=s.search,o={...s.params},l=t.to?this.resolvePathWithBase(r,`${t.to}`):this.resolvePathWithBase(r,"."),c=!1===t.params||null===t.params?{}:!0===(t.params??!0)?o:Object.assign(o,te(t.params,o)),d=Me({path:l,params:c}).interpolatedPath,u=this.matchRoutes(d,void 0,{_buildLocation:!0}).map(e=>this.looseRoutesById[e.routeId]);if(Object.keys(c).length>0)for(const e of u){const t=e.options.params?.stringify??e.options.stringifyParams;t&&Object.assign(c,t(c))}const h=e.leaveParams?l:he(Me({path:l,params:c,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let m=i;if(e._includeValidateSearch&&this.options.search?.strict){const e={};u.forEach(t=>{if(t.options.validateSearch)try{Object.assign(e,xt(t.options.validateSearch,{...e,...m}))}catch{}}),m=e}m=function({search:e,dest:t,destRoutes:n,_includeValidateSearch:s}){const a=n.reduce((e,t)=>{const n=[];if("search"in t.options)t.options.search?.middlewares&&n.push(...t.options.search.middlewares);else if(t.options.preSearchFilters||t.options.postSearchFilters){const e=({search:e,next:n})=>{let s=e;"preSearchFilters"in t.options&&t.options.preSearchFilters&&(s=t.options.preSearchFilters.reduce((e,t)=>t(e),e));const a=n(s);return"postSearchFilters"in t.options&&t.options.postSearchFilters?t.options.postSearchFilters.reduce((e,t)=>t(e),a):a};n.push(e)}if(s&&t.options.validateSearch){const e=({search:e,next:n})=>{const s=n(e);try{return{...s,...xt(t.options.validateSearch,s)??void 0}}catch{return s}};n.push(e)}return e.concat(n)},[])??[],r=({search:e})=>t.search?!0===t.search?e:te(t.search,e):{};a.push(r);const i=(e,t)=>{if(e>=a.length)return t;return(0,a[e])({search:t,next:t=>i(e+1,t)})};return i(0,e)}({search:m,dest:t,destRoutes:u,_includeValidateSearch:e._includeValidateSearch}),m=se(i,m);const p=this.options.stringifySearch(m),f=!0===t.hash?n.hash:t.hash?te(t.hash,n.hash):void 0,g=f?`#${f}`:"";let x=!0===t.state?n.state:t.state?te(t.state,n.state):{};x=se(n.state,x);const v=`${h}${p}${g}`,y=new URL(v,this.origin),b=ht(this.rewrite,y);return{publicHref:b.pathname+b.search+b.hash,href:v,url:b,pathname:h,search:m,searchStr:p,state:x,hash:f??"",unmaskOnReload:t.unmaskOnReload}},n=(n={},s)=>{const a=t(n);let r=s?t(s):void 0;if(!r){const n={};if(this.options.routeMasks){const i=function(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const s=Ce(e,t.masksTree);return t.flatCache.set(e,s),s}(a.pathname,this.processedTree);if(i){Object.assign(n,i.params);const{from:a,params:o,...l}=i.route,c=!1===o||null===o?{}:!0===(o??!0)?n:Object.assign(n,te(o,n));s={from:e.from,...l,params:c},r=t(s)}}}return r&&(a.maskedLocation=r),a};return e.mask?n(e,{from:e.from,...e.mask}):n(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:t,...n})=>{const s=Ee(this.latestLocation.href)===Ee(n.href),a=this.commitLocationPromise;if(this.commitLocationPromise=ce(()=>{a?.resolve()}),s&&(()=>{const e=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];e.forEach(e=>{n.state[e]=this.latestLocation.state[e]});const t=le(n.state,this.latestLocation.state);return e.forEach(e=>{delete n.state[e]}),t})())this.load();else{let{maskedLocation:s,hashScrollIntoView:a,url:r,...i}=n;s&&(i={...s,state:{...s.state,__tempKey:void 0,__tempLocation:{...i,search:i.searchStr,state:{...i.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(i.unmaskOnReload??this.options.unmaskOnReload)&&(i.state.__tempKey=this.tempLocationKey)),i.state.__hashScrollIntoViewOptions=a??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=e,this.history[n.replace?"replace":"push"](i.publicHref,i.state,{ignoreBlocker:t})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:t,hashScrollIntoView:n,viewTransition:s,ignoreBlocker:a,href:r,...i}={})=>{if(r){const t=this.history.location.state.__TSR_index,n=Z(r,{__TSR_index:e?t:t+1});i.to=n.pathname,i.search=this.options.parseSearch(n.search),i.hash=n.hash.slice(1)}const o=this.buildLocation({...i,_includeValidateSearch:!0});this.pendingBuiltLocation=o;const l=this.commitLocation({...o,viewTransition:s,replace:e,resetScroll:t,hashScrollIntoView:n,ignoreBlocker:a});return Promise.resolve().then(()=>{this.pendingBuiltLocation===o&&(this.pendingBuiltLocation=void 0)}),l},this.navigate=async({to:e,reloadDocument:t,href:n,publicHref:s,...a})=>{let r=!1;if(n)try{new URL(`${n}`),r=!0}catch{}if(r&&!t&&(t=!0),t){if(!n||!s&&!r){const t=this.buildLocation({to:e,...a});n=n??t.url.href,s=s??t.url.href}const t=!r&&s?s:n;if(!a.ignoreBlocker){const e=this.history,t=e.getBlockers?.()??[];for(const n of t)if(n?.blockerFn){if(await n.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}}return a.replace?window.location.replace(t):window.location.href=t,Promise.resolve()}return this.buildAndCommitLocation({...a,href:n,to:e,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const e=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==e.publicHref||e.url.origin!==this.origin){throw function(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&"string"==typeof e.href)try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&null===t.get("Location")&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}({href:this.getParsedLocationHref(e)})}}const e=this.matchRoutes(this.latestLocation);this.__store.setState(t=>({...t,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:e,cachedMatches:t.cachedMatches.filter(t=>!e.some(e=>e.id===t.id))}))},this.load=async e=>{let t,n,s,a;for(s=new Promise(a=>{this.startTransition(async()=>{try{this.beforeLoad();const t=this.latestLocation,n=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...mt({resolvedLocation:n,location:t})}),this.emit({type:"onBeforeLoad",...mt({resolvedLocation:n,location:t})}),await it({router:this,sync:e?.sync,matches:this.state.pendingMatches,location:t,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let e=[],t=[],n=[];H(()=>{this.__store.setState(s=>{const a=s.matches,r=s.pendingMatches||s.matches;return e=a.filter(e=>!r.some(t=>t.id===e.id)),t=r.filter(e=>!a.some(t=>t.id===e.id)),n=r.filter(e=>a.some(t=>t.id===e.id)),{...s,isLoading:!1,loadedAt:Date.now(),matches:r,pendingMatches:void 0,cachedMatches:[...s.cachedMatches,...e.filter(e=>"error"!==e.status&&"notFound"!==e.status)]}}),this.clearExpiredCache()}),[[e,"onLeave"],[t,"onEnter"],[n,"onStay"]].forEach(([e,t])=>{e.forEach(e=>{this.looseRoutesById[e.routeId].options[t]?.(e)})})})})}})}catch(r){Ge(r)?(t=r,this.isServer||this.navigate({...t.options,replace:!0,ignoreBlocker:!0})):De(r)&&(n=r),this.__store.setState(e=>({...e,statusCode:t?t.status:n?404:e.matches.some(e=>"error"===e.status)?500:200,redirect:t}))}this.latestLoadPromise===s&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),a()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()?a=404:this.__store.state.matches.some(e=>"error"===e.status)&&(a=500),void 0!==a&&this.__store.setState(e=>({...e,statusCode:a}))},this.startViewTransition=e=>{const t=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,t&&"undefined"!=typeof document&&"startViewTransition"in document&&"function"==typeof document.startViewTransition){let n;if("object"==typeof t&&this.isViewTransitionTypesSupported){const s=this.latestLocation,a=this.state.resolvedLocation,r="function"==typeof t.types?t.types(mt({resolvedLocation:a,location:s})):t.types;if(!1===r)return void e();n={update:e,types:r}}else n=e;document.startViewTransition(n)}else e()},this.updateMatch=(e,t)=>{this.startTransition(()=>{const n=this.state.pendingMatches?.some(t=>t.id===e)?"pendingMatches":this.state.matches.some(t=>t.id===e)?"matches":this.state.cachedMatches.some(t=>t.id===e)?"cachedMatches":"";n&&this.__store.setState(s=>({...s,[n]:s[n]?.map(n=>n.id===e?t(n):n)}))})},this.getMatch=e=>{const t=t=>t.id===e;return this.state.cachedMatches.find(t)??this.state.pendingMatches?.find(t)??this.state.matches.find(t)},this.invalidate=e=>{const t=t=>e?.filter?.(t)??1?{...t,invalid:!0,...e?.forcePending||"error"===t.status||"notFound"===t.status?{status:"pending",error:void 0}:void 0}:t;return this.__store.setState(e=>({...e,matches:e.matches.map(t),cachedMatches:e.cachedMatches.map(t),pendingMatches:e.pendingMatches?.map(t)})),this.shouldViewTransition=!1,this.load({sync:e?.sync})},this.getParsedLocationHref=e=>{let t=e.url.href;return this.origin&&e.url.origin===this.origin&&(t=t.replace(this.origin,"")||"/"),t},this.resolveRedirect=e=>{if(!e.options.href){const t=this.buildLocation(e.options),n=this.getParsedLocationHref(t);e.options.href=t.href,e.headers.set("Location",n)}return e.headers.get("Location")||e.headers.set("Location",e.options.href),e},this.clearCache=e=>{const t=e?.filter;void 0!==t?this.__store.setState(e=>({...e,cachedMatches:e.cachedMatches.filter(e=>!t(e))})):this.__store.setState(e=>({...e,cachedMatches:[]}))},this.clearExpiredCache=()=>{this.clearCache({filter:e=>{const t=this.looseRoutesById[e.routeId];if(!t.options.loader)return!0;const n=(e.preload?t.options.preloadGcTime??this.options.defaultPreloadGcTime:t.options.gcTime??this.options.defaultGcTime)??3e5;if("error"===e.status)return!0;return Date.now()-e.updatedAt>=n}})},this.loadRouteChunk=ot,this.preloadRoute=async e=>{const t=this.buildLocation(e);let n=this.matchRoutes(t,{throwOnError:!0,preload:!0,dest:e});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(e=>e.id)),a=new Set([...s,...this.state.cachedMatches.map(e=>e.id)]);H(()=>{n.forEach(e=>{a.has(e.id)||this.__store.setState(t=>({...t,cachedMatches:[...t.cachedMatches,e]}))})});try{return n=await it({router:this,matches:n,location:t,preload:!0,updateMatch:(e,t)=>{s.has(e)?n=n.map(n=>n.id===e?t(n):n):this.updateMatch(e,t)}}),n}catch(r){if(Ge(r)){if(r.options.reloadDocument)return;return await this.preloadRoute({...r.options,_fromLocation:t})}return void De(r)}},this.matchRoute=(e,t)=>{const n={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},s=this.buildLocation(n);if(t?.pending&&"pending"!==this.state.status)return!1;const a=(void 0===t?.pending?!this.state.isLoading:t.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,r=function(e,t,n,s,a){e||="/",s||="/";const r=t?`case\0${e}`:e;let i=a.singleCache.get(r);i||(i=Se("/"),ye(t,new Uint16Array(6),{from:e},1,i,0),a.singleCache.set(r,i));return Ce(s,i,n)}(s.pathname,t?.caseSensitive??!1,t?.fuzzy??!1,a.pathname,this.processedTree);return!!r&&(!(e.params&&!le(r.params,e.params,{partial:!0}))&&(t?.includeSearch??1?!!le(a.search,s.search,{partial:!0})&&r.params:r.params))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>"notFound"===e.status||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??qe,parseSearch:e.parseSearch??Ue}),"undefined"!=typeof document&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,t){const n=this.getMatchedRoutes(e.pathname),{foundRoute:s,routeParams:a}=n;let{matchedRoutes:r}=n,i=!1;(s?"/"!==s.path&&a["**"]:Ee(e.pathname))&&(this.options.notFoundRoute?r=[...r,this.options.notFoundRoute]:i=!0);const o=(()=>{if(i){if("root"!==this.options.notFoundMode)for(let e=r.length-1;e>=0;e--){const t=r[e];if(t.children)return t.id}return He}})(),l=[],c=e=>{const t=e?.id;return t?e.context??this.options.context??void 0:this.options.context??void 0};return r.forEach((n,s)=>{const r=l[s-1],[i,d,u]=(()=>{const s=r?.search??e.search,a=r?._strictSearch??void 0;try{const e=xt(n.options.validateSearch,{...s})??void 0;return[{...s,...e},{...a,...e},void 0]}catch(i){let e=i;if(i instanceof ft||(e=new ft(i.message,{cause:i})),t?.throwOnError)throw e;return[s,{},e]}})(),h=n.options.loaderDeps?.({search:i})??"",m=h?JSON.stringify(h):"",{interpolatedPath:p,usedParams:f}=Me({path:n.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),g=n.id+p+m,x=this.getMatch(g),v=this.state.matches.find(e=>e.routeId===n.id),y=x?._strictParams??f;let b;if(!x){const e=n.options.params?.parse??n.options.parseParams;if(e)try{Object.assign(y,e(y))}catch(C){if(b=De(C)||Ge(C)?C:new gt(C.message,{cause:C}),t?.throwOnError)throw b}}Object.assign(a,y);const w=v?"stay":"enter";let S;if(x)S={...x,cause:w,params:v?se(v.params,a):a,_strictParams:y,search:se(v?v.search:x.search,i),_strictSearch:d};else{const e=n.options.loader||n.options.beforeLoad||n.lazyFn||ct(n)?"pending":"success";S={id:g,ssr:this.isServer?void 0:n.options.ssr,index:s,routeId:n.id,params:v?se(v.params,a):a,_strictParams:y,pathname:p,updatedAt:Date.now(),search:v?se(v.search,i):i,_strictSearch:d,searchError:void 0,status:e,isFetching:!1,error:void 0,paramsError:b,__routeContext:void 0,_nonReactive:{loadPromise:ce()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:w,loaderDeps:v?se(v.loaderDeps,h):h,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:n.options.staticData||{},fullPath:n.fullPath}}t?.preload||(S.globalNotFound=o===n.id),S.searchError=u;const j=c(r);S.context={...j,...S.__routeContext,...S.__beforeLoadContext},l.push(S)}),l.forEach((n,s)=>{const a=this.looseRoutesById[n.routeId];if(!this.getMatch(n.id)&&!0!==t?._buildLocation){const t=l[s-1],r=c(t);if(a.options.context){const t={deps:n.loaderDeps,params:n.params,context:r??{},location:e,navigate:t=>this.navigate({...t,_fromLocation:e}),buildLocation:this.buildLocation,cause:n.cause,abortController:n.abortController,preload:!!n.preload,matches:l};n.__routeContext=a.options.context(t)??void 0}n.context={...r,...n.__routeContext,...n.__beforeLoadContext}}}),l}}class ft extends Error{}class gt extends Error{}function xt(e,t){if(null==e)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new ft("Async validation not supported");if(n.issues)throw new ft(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):"function"==typeof e?e(t):{}}class vt{constructor(e){if(this.init=e=>{this.originalIndex=e.originalIndex;const t=this.options,n=!t?.path&&!t?.id;this.parentRoute=this.options.getParentRoute?.(),n?this._path=He:this.parentRoute||me(!1);let s=n?He:t?.path;s&&"/"!==s&&(s=Pe(s));const a=t?.id||s;let r=n?He:Ne([this.parentRoute.id===He?"":this.parentRoute.id,a]);s===He&&(s="/"),r!==He&&(r=Ne(["/",r]));const i=r===He?"/":Ne([this.parentRoute.fullPath,s]);this._path=s,this._id=r,this._fullPath=i,this._to=i},this.addChildren=e=>this._addFileChildren(e),this._addFileChildren=e=>(Array.isArray(e)&&(this.children=e),"object"==typeof e&&null!==e&&(this.children=Object.values(e)),this),this._addFileTypes=()=>this,this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class yt extends vt{constructor(e){super(e)}}function bt(e){const t=e.errorComponent??St;return c.jsx(wt,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:n,reset:s})=>n?p.createElement(t,{error:n,reset:s}):e.children})}class wt extends p.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function St({error:e}){const[t,n]=p.useState(!1);return c.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[c.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),c.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(e=>!e),children:t?"Hide Error":"Show Error"})]}),c.jsx("div",{style:{height:".25rem"}}),t?c.jsx("div",{children:c.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?c.jsx("code",{children:e.message}):null})}):null]})}function jt({children:e,fallback:t=null}){return f.useSyncExternalStore(Ct,()=>!0,()=>!1)?c.jsx(f.Fragment,{children:e}):c.jsx(f.Fragment,{children:t})}function Ct(){return()=>{}}var kt,Nt,_t,Pt,Et={exports:{}},Rt={},At={exports:{}},Tt={};function Mt(){return Nt||(Nt=1,At.exports=function(){if(kt)return Tt;kt=1;var e=m(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,s=e.useEffect,a=e.useLayoutEffect,r=e.useDebugValue;function i(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!t(e,s)}catch(a){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=n({inst:{value:o,getSnapshot:t}}),c=l[0].inst,d=l[1];return a(function(){c.value=o,c.getSnapshot=t,i(c)&&d({inst:c})},[e,o,t]),s(function(){return i(c)&&d({inst:c}),e(function(){i(c)&&d({inst:c})})},[e]),r(o),o};return Tt.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,Tt}()),At.exports}var Dt=(Pt||(Pt=1,Et.exports=function(){if(_t)return Rt;_t=1;var e=m(),t=Mt(),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=t.useSyncExternalStore,a=e.useRef,r=e.useEffect,i=e.useMemo,o=e.useDebugValue;return Rt.useSyncExternalStoreWithSelector=function(e,t,l,c,d){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=i(function(){function e(e){if(!r){if(r=!0,s=e,e=c(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return a=t}return a=e}if(t=a,n(s,e))return t;var i=c(e);return void 0!==d&&d(t,i)?(s=e,t):(s=e,a=i)}var s,a,r=!1,i=void 0===l?null:l;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]},[t,l,c,d]);var m=s(e,u[0],u[1]);return r(function(){h.hasValue=!0,h.value=m},[m]),o(m),m},Rt}()),Et.exports);function Lt(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!t.has(n)||!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Ft(e);if(n.length!==Ft(t).length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!Object.is(e[n[s]],t[n[s]]))return!1;return!0}function Ft(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const It=p.createContext(null);function Ot(){return"undefined"==typeof document?It:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=It,It)}function zt(e){const t=p.useContext(Ot());return t}function Bt(e){const t=zt(),n=e?.router||t,s=p.useRef(void 0);return function(e,t=e=>e,n={}){const s=n.equal??Lt;return Dt.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,s)}(n.__store,t=>{if(e?.select){if(e.structuralSharing??n.options.defaultStructuralSharing){const n=se(s.current,e.select(t));return s.current=n,n}return e.select(t)}return t})}const $t=p.createContext(void 0),Ut=p.createContext(void 0);function Vt(e){const t=p.useContext(e.from?Ut:$t);return Bt({select:n=>{const s=n.matches.find(n=>e.from?e.from===n.routeId:n.id===t);if(me(!((e.shouldThrow??1)&&!s),e.from&&e.from),void 0!==s)return e.select?e.select(s):s},structuralSharing:e.structuralSharing})}function qt(e){return Vt({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function Ht(e){const{select:t,...n}=e;return Vt({...n,select:e=>t?t(e.loaderDeps):e.loaderDeps})}function Gt(e){return Vt({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const n=!1===e.strict?t.params:t._strictParams;return e.select?e.select(n):n}})}function Kt(e){return Vt({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}const Wt="undefined"!=typeof window?p.useLayoutEffect:p.useEffect;function Qt(e){const t=p.useRef({value:e,prev:null}),n=t.current.value;return e!==n&&(t.current={value:e,prev:n}),t.current.prev}function Yt(e){const t=zt();return p.useCallback(n=>t.navigate({...n,from:n.from??e?.from}),[e?.from,t])}function Xt(e){const t=zt(),n=Yt(),s=p.useRef(null);return Wt(()=>{s.current!==e&&(n(e),s.current=e)},[t,e,n]),null}var Zt=A();const Jt=n(Zt);function en(e,t){const n=zt(),[s,a]=p.useState(!1),r=p.useRef(!1),i=function(e){const t=p.useRef(null);return p.useImperativeHandle(e,()=>t.current,[]),t}(t),{activeProps:o,inactiveProps:l,activeOptions:c,to:d,preload:u,preloadDelay:h,hashScrollIntoView:m,replace:f,startTransition:g,resetScroll:x,viewTransition:v,children:y,target:b,disabled:w,style:S,className:j,onClick:C,onFocus:k,onMouseEnter:N,onMouseLeave:_,onTouchStart:P,ignoreBlocker:E,params:R,search:A,hash:T,state:M,mask:D,reloadDocument:L,unsafeRelative:F,from:I,_fromLocation:O,...z}=e,B=Bt({select:e=>e.location.search,structuralSharing:!0}),$=e.from,U=p.useMemo(()=>({...e,from:$}),[n,B,$,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),V=p.useMemo(()=>n.buildLocation({...U}),[n,U]),q=p.useMemo(()=>{if(w)return;let e=V.maskedLocation?V.maskedLocation.url.href:V.url.href,t=!1;return n.origin&&(e.startsWith(n.origin)?e=n.history.createHref(e.replace(n.origin,""))||"/":t=!0),{href:e,external:t}},[w,V.maskedLocation,V.url,n.origin,n.history]),H=p.useMemo(()=>{if(q?.external)return q.href;try{return new URL(d),d}catch{}},[d,q]),G=!e.reloadDocument&&!H&&(u??n.options.defaultPreload),K=h??n.options.defaultPreloadDelay??0,W=Bt({select:e=>{if(H)return!1;if(c?.exact){if(!(t=e.location.pathname,s=V.pathname,a=n.basepath,Ae(t,a)===Ae(s,a)))return!1}else{const t=Ae(e.location.pathname,n.basepath),s=Ae(V.pathname,n.basepath);if(!(t.startsWith(s)&&(t.length===s.length||"/"===t[s.length])))return!1}var t,s,a;if(c?.includeSearch??1){if(!le(e.location.search,V.search,{partial:!c?.exact,ignoreUndefined:!c?.explicitUndefined}))return!1}return!c?.includeHash||e.location.hash===V.hash}}),Q=p.useCallback(()=>{n.preloadRoute({...U}).catch(e=>{})},[n,U]);!function(e,t,n={},s={}){p.useEffect(()=>{if(!e.current||s.disabled||"function"!=typeof IntersectionObserver)return;const a=new IntersectionObserver(([e])=>{t(e)},n);return a.observe(e.current),()=>{a.disconnect()}},[t,n,s.disabled,e])}(i,p.useCallback(e=>{e?.isIntersecting&&Q()},[Q]),ln,{disabled:!(!w&&"viewport"===G)}),p.useEffect(()=>{r.current||w||"render"!==G||(Q(),r.current=!0)},[w,Q,G]);if(H)return{...z,ref:i,href:H,...y&&{children:y},...b&&{target:b},...w&&{disabled:w},...S&&{style:S},...j&&{className:j},...C&&{onClick:C},...k&&{onFocus:k},...N&&{onMouseEnter:N},..._&&{onMouseLeave:_},...P&&{onTouchStart:P}};const Y=e=>{w||G&&Q()},X=Y,Z=W?te(o,{})??nn:tn,J=W?tn:te(l,{})??tn,ee=[j,Z.className,J.className].filter(Boolean).join(" "),ne=(S||Z.style||J.style)&&{...S,...Z.style,...J.style};return{...z,...Z,...J,href:q?.href,ref:i,onClick:cn([C,e=>{const t=e.currentTarget.getAttribute("target"),s=void 0!==b?b:t;if(!(w||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||e.defaultPrevented||s&&"_self"!==s||0!==e.button)){e.preventDefault(),Zt.flushSync(()=>{a(!0)});const t=n.subscribe("onResolved",()=>{t(),a(!1)});n.navigate({...U,replace:f,resetScroll:x,hashScrollIntoView:m,startTransition:g,viewTransition:v,ignoreBlocker:E})}}]),onFocus:cn([k,Y]),onMouseEnter:cn([N,e=>{if(!w&&G)if(K){const t=e.target;if(on.has(t))return;const n=setTimeout(()=>{on.delete(t),Q()},K);on.set(t,n)}else Q()}]),onMouseLeave:cn([_,e=>{if(w||!G||!K)return;const t=e.target,n=on.get(t);n&&(clearTimeout(n),on.delete(t))}]),onTouchStart:cn([P,X]),disabled:!!w,target:b,...ne&&{style:ne},...ee&&{className:ee},...w&&sn,...W&&an,...s&&rn}}const tn={},nn={className:"active"},sn={role:"link","aria-disabled":!0},an={"data-status":"active","aria-current":"page"},rn={"data-transitioning":"transitioning"},on=new WeakMap,ln={rootMargin:"100px"},cn=e=>t=>{for(const n of e)if(n){if(t.defaultPrevented)return;n(t)}},dn=p.forwardRef((e,t)=>{const{_asChild:n,...s}=e,{type:a,ref:r,...i}=en(s,t),o="function"==typeof s.children?s.children({isActive:"active"===i["data-status"]}):s.children;return void 0===n&&delete i.disabled,p.createElement(n||"a",{...i,ref:r},o)});let un=class extends vt{constructor(e){super(e),this.useMatch=e=>Vt({select:e?.select,from:this.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>Vt({...e,from:this.id,select:t=>e?.select?e.select(t.context):t.context}),this.useSearch=e=>Kt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useParams=e=>Gt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useLoaderDeps=e=>Ht({...e,from:this.id}),this.useLoaderData=e=>qt({...e,from:this.id}),this.useNavigate=()=>Yt({from:this.fullPath}),this.Link=f.forwardRef((e,t)=>c.jsx(dn,{ref:t,from:this.fullPath,...e})),this.$$typeof=Symbol.for("react.memo")}};class hn extends yt{constructor(e){super(e),this.useMatch=e=>Vt({select:e?.select,from:this.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>Vt({...e,from:this.id,select:t=>e?.select?e.select(t.context):t.context}),this.useSearch=e=>Kt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useParams=e=>Gt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useLoaderDeps=e=>Ht({...e,from:this.id}),this.useLoaderData=e=>qt({...e,from:this.id}),this.useNavigate=()=>Yt({from:this.fullPath}),this.Link=f.forwardRef((e,t)=>c.jsx(dn,{ref:t,from:this.fullPath,...e})),this.$$typeof=Symbol.for("react.memo")}}function mn(e){return"object"==typeof e?new pn(e,{silent:!0}).createRoute(e):new pn(e,{silent:!0}).createRoute}class pn{constructor(e,t){this.path=e,this.createRoute=e=>{this.silent;const t=function(e){return new un(e)}(e);return t.isRoot=!1,t},this.silent=t?.silent}}class fn{constructor(e){this.useMatch=e=>Vt({select:e?.select,from:this.options.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>Vt({from:this.options.id,select:t=>e?.select?e.select(t.context):t.context}),this.useSearch=e=>Kt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.options.id}),this.useParams=e=>Gt({select:e?.select,structuralSharing:e?.structuralSharing,from:this.options.id}),this.useLoaderDeps=e=>Ht({...e,from:this.options.id}),this.useLoaderData=e=>qt({...e,from:this.options.id}),this.useNavigate=()=>Yt({from:zt().routesById[this.options.id].fullPath}),this.options=e,this.$$typeof=Symbol.for("react.memo")}}function gn(e){return"object"==typeof e?new fn(e):t=>new fn({id:e,...t})}function xn(){const e=zt(),t=p.useRef({router:e,mounted:!1}),[n,s]=p.useState(!1),{hasPendingMatches:a,isLoading:r}=Bt({select:e=>({isLoading:e.isLoading,hasPendingMatches:e.matches.some(e=>"pending"===e.status)}),structuralSharing:!0}),i=Qt(r),o=r||n||a,l=Qt(o),c=r||a,d=Qt(c);return e.startTransition=e=>{s(!0),p.startTransition(()=>{e(),s(!1)})},p.useEffect(()=>{const t=e.history.subscribe(e.load),n=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Ee(e.latestLocation.publicHref)!==Ee(n.publicHref)&&e.commitLocation({...n,replace:!0}),()=>{t()}},[e,e.history]),Wt(()=>{if("undefined"!=typeof window&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0};(async()=>{try{await e.load()}catch(t){}})()},[e]),Wt(()=>{i&&!r&&e.emit({type:"onLoad",...mt(e.state)})},[i,e,r]),Wt(()=>{d&&!c&&e.emit({type:"onBeforeRouteMount",...mt(e.state)})},[c,d,e]),Wt(()=>{if(l&&!o){const t=mt(e.state);e.emit({type:"onResolved",...t}),e.__store.setState(e=>({...e,status:"idle",resolvedLocation:e.location})),t.hrefChanged&&function(e){if("undefined"!=typeof document&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&""!==e.state.location.hash){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}(e)}},[o,l,e]),null}function vn(e){const t=Bt({select:e=>`not-found-${e.location.pathname}-${e.status}`});return c.jsx(bt,{getResetKey:()=>t,onCatch:(t,n)=>{if(!De(t))throw t;e.onCatch?.(t,n)},errorComponent:({error:t})=>{if(De(t))return e.fallback?.(t);throw t},children:e.children})}function yn(){return c.jsx("p",{children:"Not Found"})}function bn(e){return c.jsx(c.Fragment,{children:e.children})}function wn(e,t,n){return t.options.notFoundComponent?c.jsx(t.options.notFoundComponent,{...n}):e.options.defaultNotFoundComponent?c.jsx(e.options.defaultNotFoundComponent,{...n}):c.jsx(yn,{})}function Sn({children:e}){const t=zt();return t.isServer?c.jsx("script",{nonce:t.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:e+";document.currentScript.remove()"}}):null}function jn(){const e=zt();if(!e.isScrollRestoring||!e.isServer)return null;if("function"==typeof e.options.scrollRestoration){if(!e.options.scrollRestoration({location:e.latestLocation}))return null}const t=(e.options.getScrollRestorationKey||Ie)(e.latestLocation),n=t!==Ie(e.latestLocation)?t:void 0,s={storageKey:Le,shouldScrollRestoration:!0};return n&&(s.key=n),c.jsx(Sn,{children:`(${ze.toString()})(${JSON.stringify(s)})`})}const Cn=p.memo(function({matchId:e}){const t=zt(),n=Bt({select:t=>{const n=t.matches.find(t=>t.id===e);return me(n),{routeId:n.routeId,ssr:n.ssr,_displayPending:n._displayPending}},structuralSharing:!0}),s=t.routesById[n.routeId],a=s.options.pendingComponent??t.options.defaultPendingComponent,r=a?c.jsx(a,{}):null,i=s.options.errorComponent??t.options.defaultErrorComponent,o=s.options.onCatch??t.options.defaultOnCatch,l=s.isRoot?s.options.notFoundComponent??t.options.notFoundRoute?.options.component:s.options.notFoundComponent,d=!1===n.ssr||"data-only"===n.ssr,u=(!s.isRoot||s.options.wrapInSuspense||d)&&(s.options.wrapInSuspense??a??(s.options.errorComponent?.preload||d))?p.Suspense:bn,h=i?bt:bn,m=l?vn:bn,f=Bt({select:e=>e.loadedAt}),g=Bt({select:t=>{const n=t.matches.findIndex(t=>t.id===e);return t.matches[n-1]?.routeId}}),x=s.isRoot?s.options.shellComponent??bn:bn;return c.jsxs(x,{children:[c.jsx($t.Provider,{value:e,children:c.jsx(u,{fallback:r,children:c.jsx(h,{getResetKey:()=>f,errorComponent:i||St,onCatch:(e,t)=>{if(De(e))throw e;o?.(e,t)},children:c.jsx(m,{fallback:e=>{if(!l||e.routeId&&e.routeId!==n.routeId||!e.routeId&&!s.isRoot)throw e;return p.createElement(l,e)},children:d||n._displayPending?c.jsx(jt,{fallback:r,children:c.jsx(Nn,{matchId:e})}):c.jsx(Nn,{matchId:e})})})})}),g===He&&t.options.scrollRestoration?c.jsxs(c.Fragment,{children:[c.jsx(kn,{}),c.jsx(jn,{})]}):null]})});function kn(){const e=zt(),t=p.useRef(void 0);return c.jsx("script",{suppressHydrationWarning:!0,ref:n=>{!n||void 0!==t.current&&t.current.href===e.latestLocation.href||(e.emit({type:"onRendered",...mt(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const Nn=p.memo(function({matchId:e}){const t=zt(),{match:n,key:s,routeId:a}=Bt({select:n=>{const s=n.matches.find(t=>t.id===e),a=s.routeId,r=t.routesById[a].options.remountDeps??t.options.defaultRemountDeps,i=r?.({routeId:a,loaderDeps:s.loaderDeps,params:s._strictParams,search:s._strictSearch});return{key:i?JSON.stringify(i):void 0,routeId:a,match:{id:s.id,status:s.status,error:s.error,invalid:s.invalid,_forcePending:s._forcePending,_displayPending:s._displayPending}}},structuralSharing:!0}),r=t.routesById[a],i=p.useMemo(()=>{const e=r.options.component??t.options.defaultComponent;return e?c.jsx(e,{},s):c.jsx(_n,{})},[s,r.options.component,t.options.defaultComponent]);if(n._displayPending)throw t.getMatch(n.id)?._nonReactive.displayPendingPromise;if(n._forcePending)throw t.getMatch(n.id)?._nonReactive.minPendingPromise;if("pending"===n.status){const e=r.options.pendingMinMs??t.options.defaultPendingMinMs;if(e){const s=t.getMatch(n.id);if(s&&!s._nonReactive.minPendingPromise&&!t.isServer){const t=ce();s._nonReactive.minPendingPromise=t,setTimeout(()=>{t.resolve(),s._nonReactive.minPendingPromise=void 0},e)}}throw t.getMatch(n.id)?._nonReactive.loadPromise}if("notFound"===n.status)return me(De(n.error)),wn(t,r,n.error);if("redirected"===n.status)throw me(Ge(n.error)),t.getMatch(n.id)?._nonReactive.loadPromise;if("error"===n.status){if(t.isServer){const e=(r.options.errorComponent??t.options.defaultErrorComponent)||St;return c.jsx(e,{error:n.error,reset:void 0,info:{componentStack:""}})}throw n.error}return i}),_n=p.memo(function(){const e=zt(),t=p.useContext($t),n=Bt({select:e=>e.matches.find(e=>e.id===t)?.routeId}),s=e.routesById[n],a=Bt({select:e=>{const n=e.matches.find(e=>e.id===t);return me(n),n.globalNotFound}}),r=Bt({select:e=>{const n=e.matches,s=n.findIndex(e=>e.id===t);return n[s+1]?.id}}),i=e.options.defaultPendingComponent?c.jsx(e.options.defaultPendingComponent,{}):null;if(a)return wn(e,s,void 0);if(!r)return null;const o=c.jsx(Cn,{matchId:r});return n===He?c.jsx(p.Suspense,{fallback:i,children:o}):o});function Pn(){const e=zt(),t=e.routesById[He].options.pendingComponent??e.options.defaultPendingComponent,n=t?c.jsx(t,{}):null,s=e.isServer||"undefined"!=typeof document&&e.ssr?bn:p.Suspense,a=c.jsxs(s,{fallback:n,children:[!e.isServer&&c.jsx(xn,{}),c.jsx(En,{})]});return e.options.InnerWrap?c.jsx(e.options.InnerWrap,{children:a}):a}function En(){const e=zt(),t=Bt({select:e=>e.matches[0]?.id}),n=Bt({select:e=>e.loadedAt}),s=t?c.jsx(Cn,{matchId:t}):null;return c.jsx($t.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?s:c.jsx(bt,{getResetKey:()=>n,errorComponent:St,onCatch:e=>{e.message||e.toString()},children:s})})}class Rn extends pt{constructor(e){super(e)}}function An({router:e,children:t,...n}){Object.keys(n).length>0&&e.update({...e.options,...n,context:{...e.options.context,...n.context}});const s=Ot(),a=c.jsx(s.Provider,{value:e,children:t});return e.options.Wrap?c.jsx(e.options.Wrap,{children:a}):a}function Tn({router:e,...t}){return c.jsx(An,{router:e,...t,children:c.jsx(Pn,{})})}function Mn(e){return Bt({select:e=>e.location})}"undefined"!=typeof globalThis?(globalThis.createFileRoute=mn,globalThis.createLazyFileRoute=gn):"undefined"!=typeof window&&(window.createFileRoute=mn,window.createLazyFileRoute=gn);var Dn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ln={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Fn=new class{#e=Ln;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}};var In="undefined"==typeof window||"Deno"in globalThis;function On(){}function zn(e){return"number"==typeof e&&e>=0&&e!==1/0}function Bn(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $n(e,t){return"function"==typeof e?e(t):e}function Un(e,t){return"function"==typeof e?e(t):e}function Vn(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:r,queryKey:i,stale:o}=e;if(i)if(s){if(t.queryHash!==Hn(i,t.options))return!1}else if(!Kn(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!a||a===t.state.fetchStatus)&&!(r&&!r(t)))}function qn(e,t){const{exact:n,status:s,predicate:a,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(n){if(Gn(t.options.mutationKey)!==Gn(r))return!1}else if(!Kn(t.options.mutationKey,r))return!1}return(!s||t.state.status===s)&&!(a&&!a(t))}function Hn(e,t){return(t?.queryKeyHashFn||Gn)(e)}function Gn(e){return JSON.stringify(e,(e,t)=>Zn(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function Kn(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>Kn(e[n],t[n])))}var Wn=Object.prototype.hasOwnProperty;function Qn(e,t){if(e===t)return e;const n=Xn(e)&&Xn(t);if(!(n||Zn(e)&&Zn(t)))return t;const s=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),r=a.length,i=n?new Array(r):{};let o=0;for(let l=0;l<r;l++){const r=n?l:a[l],c=e[r],d=t[r];if(c===d){i[r]=c,(n?l<s:Wn.call(e,r))&&o++;continue}if(null===c||null===d||"object"!=typeof c||"object"!=typeof d){i[r]=d;continue}const u=Qn(c,d);i[r]=u,u===c&&o++}return s===r&&o===s?e:i}function Yn(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Xn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zn(e){if(!Jn(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!Jn(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Jn(e){return"[object Object]"===Object.prototype.toString.call(e)}function es(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?Qn(e,t):t}function ts(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function ns(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var ss=Symbol();function as(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==ss?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function rs(e,t){return"function"==typeof e?e(...t):!!e}var is=new class extends Dn{#n;#s;#a;constructor(){super(),this.#a=e=>{if(!In&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#a=e,this.#s?.(),this.#s=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#n!==e&&(this.#n=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#n?this.#n:"hidden"!==globalThis.document?.visibilityState}};function os(){let e,t;const n=new Promise((n,s)=>{e=n,t=s});function s(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{s({status:"fulfilled",value:t}),e(t)},n.reject=e=>{s({status:"rejected",reason:e}),t(e)},n}function ls(e){return e}function cs(e){return{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}}function ds(e,t,n){return{dehydratedAt:Date.now(),state:{...e.state,...void 0!==e.state.data&&{data:t(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,..."pending"===e.state.status&&{promise:(()=>{const s=e.promise?.then(t).catch(e=>n(e)?Promise.reject(new Error("redacted")):Promise.reject(e));return s?.catch(On),s})()},...e.meta&&{meta:e.meta}}}function us(e){return e.state.isPaused}function hs(e){return"success"===e.state.status}function ms(e){return!0}function ps(e,t={}){const n=t.shouldDehydrateMutation??e.getDefaultOptions().dehydrate?.shouldDehydrateMutation??us,s=e.getMutationCache().getAll().flatMap(e=>n(e)?[cs(e)]:[]),a=t.shouldDehydrateQuery??e.getDefaultOptions().dehydrate?.shouldDehydrateQuery??hs,r=t.shouldRedactErrors??e.getDefaultOptions().dehydrate?.shouldRedactErrors??ms,i=t.serializeData??e.getDefaultOptions().dehydrate?.serializeData??ls;return{mutations:s,queries:e.getQueryCache().getAll().flatMap(e=>a(e)?[ds(e,i,r)]:[])}}function fs(e,t,n){if("object"!=typeof t||null===t)return;const s=e.getMutationCache(),a=e.getQueryCache(),r=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??ls,i=t.mutations||[],o=t.queries||[];i.forEach(({state:t,...a})=>{s.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...a},t)}),o.forEach(({queryKey:t,state:s,queryHash:i,meta:o,promise:l,dehydratedAt:c})=>{const d=l?function(e){let t;if(e.then(e=>(t=e,e),On)?.catch(On),void 0!==t)return{data:t}}(l):void 0,u=void 0===s.data?d?.data:s.data,h=void 0===u?u:r(u);let m=a.get(i);const p="pending"===m?.state.status,f="fetching"===m?.state.fetchStatus;if(m){const e=d&&void 0!==c&&c>m.state.dataUpdatedAt;if(s.dataUpdatedAt>m.state.dataUpdatedAt||e){const{fetchStatus:e,...t}=s;m.setState({...t,data:h})}}else m=a.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:t,queryHash:i,meta:o},{...s,data:h,fetchStatus:"idle",status:void 0!==h?"success":s.status});l&&!p&&!f&&(void 0===c||c>m.state.dataUpdatedAt)&&m.fetch(void 0,{initialPromise:Promise.resolve(l).then(r)}).catch(On)})}var gs=function(e){setTimeout(e,0)};var xs=function(){let e=[],t=0,n=e=>{e()},s=e=>{e()},a=gs;const r=s=>{t?e.push(s):a(()=>{n(s)})};return{batch:r=>{let i;t++;try{i=r()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a(()=>{s(()=>{t.forEach(e=>{n(e)})})})})()}return i},batchCalls:e=>(...t)=>{r(()=>{e(...t)})},schedule:r,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{s=e},setScheduler:e=>{a=e}}}(),vs=new class extends Dn{#r=!0;#s;#a;constructor(){super(),this.#a=e=>{if(!In&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#s||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#a=e,this.#s?.(),this.#s=e(this.setOnline.bind(this))}setOnline(e){this.#r!==e&&(this.#r=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#r}};function ys(e){return Math.min(1e3*2**e,3e4)}function bs(e){return"online"!==(e??"online")||vs.isOnline()}var ws=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Ss(e){let t,n=!1,s=0;const a=os(),r=()=>"pending"!==a.status,i=()=>is.isFocused()&&("always"===e.networkMode||vs.isOnline())&&e.canRun(),o=()=>bs(e.networkMode)&&e.canRun(),l=e=>{r()||(t?.(),a.resolve(e))},c=e=>{r()||(t?.(),a.reject(e))},d=()=>new Promise(n=>{t=e=>{(r()||i())&&n(e)},e.onPause?.()}).then(()=>{t=void 0,r()||e.onContinue?.()}),u=()=>{if(r())return;let t;const a=0===s?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{if(r())return;const a=e.retry??(In?0:3),o=e.retryDelay??ys,l="function"==typeof o?o(s,t):o,h=!0===a||"number"==typeof a&&s<a||"function"==typeof a&&a(s,t);var m;!n&&h?(s++,e.onFail?.(s,t),(m=l,new Promise(e=>{Fn.setTimeout(e,m)})).then(()=>i()?void 0:d()).then(()=>{n?c(t):u()})):c(t)})};return{promise:a,status:()=>a.status,cancel:t=>{if(!r()){const n=new ws(t);c(n),e.onCancel?.(n)}},continue:()=>(t?.(),a),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var js=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zn(this.gcTime)&&(this.#i=Fn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(In?1/0:3e5))}clearGcTimeout(){this.#i&&(Fn.clearTimeout(this.#i),this.#i=void 0)}},Cs=class extends js{#o;#l;#c;#d;#u;#h;#m;constructor(e){super(),this.#m=!1,this.#h=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#d=e.client,this.#c=this.#d.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#o=_s(this.options),this.state=e.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#u?.promise}setOptions(e){if(this.options={...this.#h,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=_s(this.options);void 0!==e.data&&(this.setState(Ns(e.data,e.dataUpdatedAt)),this.#o=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#c.remove(this)}setData(e,t){const n=es(this.state.data,e,this.options);return this.#p({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#p({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#u?.promise;return this.#u?.cancel(e),t?t.then(On).catch(On):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some(e=>!1!==Un(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ss||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===$n(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!Bn(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#u?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#u?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#c.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#u&&(this.#m?this.#u.cancel({revert:!0}):this.#u.cancelRetry()),this.scheduleGc()),this.#c.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#p({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#u?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#u)return this.#u.continueRetry(),this.#u.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const n=new AbortController,s=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#m=!0,n.signal)})},a=()=>{const e=as(this.options,t),n=(()=>{const e={client:this.#d,queryKey:this.queryKey,meta:this.meta};return s(e),e})();return this.#m=!1,this.options.persister?this.options.persister(e,n,this):e(n)},r=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#d,state:this.state,fetchFn:a};return s(e),e})();this.options.behavior?.onFetch(r,this),this.#l=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===r.fetchOptions?.meta||this.#p({type:"fetch",meta:r.fetchOptions?.meta}),this.#u=Ss({initialPromise:t?.initialPromise,fn:r.fetchFn,onCancel:e=>{e instanceof ws&&e.revert&&this.setState({...this.#l,fetchStatus:"idle"}),n.abort()},onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:()=>{this.#p({type:"continue"})},retry:r.options.retry,retryDelay:r.options.retryDelay,networkMode:r.options.networkMode,canRun:()=>!0});try{const e=await this.#u.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#c.config.onSuccess?.(e,this),this.#c.config.onSettled?.(e,this.state.error,this),e}catch(i){if(i instanceof ws){if(i.silent)return this.#u.promise;if(i.revert){if(void 0===this.state.data)throw i;return this.state.data}}throw this.#p({type:"error",error:i}),this.#c.config.onError?.(i,this),this.#c.config.onSettled?.(this.state.data,i,this),i}finally{this.scheduleGc()}}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...ks(t.data,this.options),fetchMeta:e.meta??null};case"success":const n={...t,...Ns(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#l=e.manual?n:void 0,n;case"error":const s=e.error;return{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),xs.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#c.notify({query:this,type:"updated",action:e})})}};function ks(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bs(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function Ns(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _s(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,s=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ps=class extends Dn{constructor(e,t){super(),this.options=t,this.#d=e,this.#f=null,this.#g=os(),this.bindMethods(),this.setOptions(t)}#d;#x=void 0;#v=void 0;#y=void 0;#b;#w;#g;#f;#S;#j;#C;#k;#N;#_;#P=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#x.addObserver(this),Es(this.#x,this.options)?this.#E():this.updateResult(),this.#R())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rs(this.#x,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rs(this.#x,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#A(),this.#T(),this.#x.removeObserver(this)}setOptions(e){const t=this.options,n=this.#x;if(this.options=this.#d.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof Un(this.options.enabled,this.#x))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#M(),this.#x.setOptions(this.options),t._defaulted&&!Yn(this.options,t)&&this.#d.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#x,observer:this});const s=this.hasListeners();s&&As(this.#x,n,this.options,t)&&this.#E(),this.updateResult(),!s||this.#x===n&&Un(this.options.enabled,this.#x)===Un(t.enabled,this.#x)&&$n(this.options.staleTime,this.#x)===$n(t.staleTime,this.#x)||this.#D();const a=this.#L();!s||this.#x===n&&Un(this.options.enabled,this.#x)===Un(t.enabled,this.#x)&&a===this.#_||this.#F(a)}getOptimisticResult(e){const t=this.#d.getQueryCache().build(this.#d,e),n=this.createResult(t,e);return function(e,t){if(!Yn(e.getCurrentResult(),t))return!0;return!1}(this,n)&&(this.#y=n,this.#w=this.options,this.#b=this.#x.state),n}getCurrentResult(){return this.#y}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),t?.(n),"promise"===n&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#g.status||this.#g.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,n))})}trackProp(e){this.#P.add(e)}getCurrentQuery(){return this.#x}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#d.defaultQueryOptions(e),n=this.#d.getQueryCache().build(this.#d,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#E({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#y))}#E(e){this.#M();let t=this.#x.fetch(this.options,e);return e?.throwOnError||(t=t.catch(On)),t}#D(){this.#A();const e=$n(this.options.staleTime,this.#x);if(In||this.#y.isStale||!zn(e))return;const t=Bn(this.#y.dataUpdatedAt,e)+1;this.#k=Fn.setTimeout(()=>{this.#y.isStale||this.updateResult()},t)}#L(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#x):this.options.refetchInterval)??!1}#F(e){this.#T(),this.#_=e,!In&&!1!==Un(this.options.enabled,this.#x)&&zn(this.#_)&&0!==this.#_&&(this.#N=Fn.setInterval(()=>{(this.options.refetchIntervalInBackground||is.isFocused())&&this.#E()},this.#_))}#R(){this.#D(),this.#F(this.#L())}#A(){this.#k&&(Fn.clearTimeout(this.#k),this.#k=void 0)}#T(){this.#N&&(Fn.clearInterval(this.#N),this.#N=void 0)}createResult(e,t){const n=this.#x,s=this.options,a=this.#y,r=this.#b,i=this.#w,o=e!==n?e.state:this.#v,{state:l}=e;let c,d={...l},u=!1;if(t._optimisticResults){const a=this.hasListeners(),r=!a&&Es(e,t),i=a&&As(e,n,t,s);(r||i)&&(d={...d,...ks(l.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:m,status:p}=d;c=d.data;let f=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===p){let e;a?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(e=a.data,f=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#C?.state.data,this.#C):t.placeholderData,void 0!==e&&(p="success",c=es(a?.data,e,t),u=!0)}if(t.select&&void 0!==c&&!f)if(a&&c===r?.data&&t.select===this.#S)c=this.#j;else try{this.#S=t.select,c=t.select(c),c=es(a?.data,c,t),this.#j=c,this.#f=null}catch(S){this.#f=S}this.#f&&(h=this.#f,c=this.#j,m=Date.now(),p="error");const g="fetching"===d.fetchStatus,x="pending"===p,v="error"===p,y=x&&g,b=void 0!==c,w={status:p,fetchStatus:d.fetchStatus,isPending:x,isSuccess:"success"===p,isError:v,isInitialLoading:y,isLoading:y,data:c,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>o.dataUpdateCount||d.errorUpdateCount>o.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:v&&!b,isPaused:"paused"===d.fetchStatus,isPlaceholderData:u,isRefetchError:v&&b,isStale:Ts(e,t),refetch:this.refetch,promise:this.#g,isEnabled:!1!==Un(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},s=()=>{const e=this.#g=w.promise=os();t(e)},a=this.#g;switch(a.status){case"pending":e.queryHash===n.queryHash&&t(a);break;case"fulfilled":"error"!==w.status&&w.data===a.value||s();break;case"rejected":"error"===w.status&&w.error===a.reason||s()}}return w}updateResult(){const e=this.#y,t=this.createResult(this.#x,this.options);if(this.#b=this.#x.state,this.#w=this.options,void 0!==this.#b.data&&(this.#C=this.#x),Yn(t,e))return;this.#y=t;this.#I({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!this.#P.size)return!0;const s=new Set(n??this.#P);return this.options.throwOnError&&s.add("error"),Object.keys(this.#y).some(t=>{const n=t;return this.#y[n]!==e[n]&&s.has(n)})})()})}#M(){const e=this.#d.getQueryCache().build(this.#d,this.options);if(e===this.#x)return;const t=this.#x;this.#x=e,this.#v=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#R()}#I(e){xs.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#y)}),this.#d.getQueryCache().notify({query:this.#x,type:"observerResultsUpdated"})})}};function Es(e,t){return function(e,t){return!1!==Un(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Rs(e,t,t.refetchOnMount)}function Rs(e,t,n){if(!1!==Un(t.enabled,e)&&"static"!==$n(t.staleTime,e)){const s="function"==typeof n?n(e):n;return"always"===s||!1!==s&&Ts(e,t)}return!1}function As(e,t,n,s){return(e!==t||!1===Un(s.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&Ts(e,n)}function Ts(e,t){return!1!==Un(t.enabled,e)&&e.isStaleByTime($n(t.staleTime,e))}function Ms(e){return{onFetch:(t,n)=>{const s=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,r=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let n=!1;const c=e=>{!function(e,t,n){let s,a=!1;Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),a||(a=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)})}(e,()=>t.signal,()=>n=!0)},d=as(t.options,t.fetchOptions),u=async(e,s,a)=>{if(n)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const r=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:s,direction:a?"backward":"forward",meta:t.options.meta};return c(e),e})(),i=await d(r),{maxPages:o}=t.options,l=a?ns:ts;return{pages:l(e.pages,i,o),pageParams:l(e.pageParams,s,o)}};if(a&&r.length){const e="backward"===a,t={pages:r,pageParams:i},n=(e?Ls:Ds)(s,t);o=await u(t,n,e)}else{const t=e??r.length;do{const e=0===l?i[0]??s.initialPageParam:Ds(s,o);if(l>0&&null==e)break;o=await u(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function Ds(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function Ls(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Fs=class extends js{#d;#O;#z;#u;constructor(e){super(),this.#d=e.client,this.mutationId=e.mutationId,this.#z=e.mutationCache,this.#O=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#O.includes(e)||(this.#O.push(e),this.clearGcTimeout(),this.#z.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#O=this.#O.filter(t=>t!==e),this.scheduleGc(),this.#z.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#O.length||("pending"===this.state.status?this.scheduleGc():this.#z.remove(this))}continue(){return this.#u?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#p({type:"continue"})},n={client:this.#d,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#u=Ss({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#z.canRun(this)});const s="pending"===this.state.status,a=!this.#u.canStart();try{if(s)t();else{this.#p({type:"pending",variables:e,isPaused:a}),await(this.#z.config.onMutate?.(e,this,n));const t=await(this.options.onMutate?.(e,n));t!==this.state.context&&this.#p({type:"pending",context:t,variables:e,isPaused:a})}const r=await this.#u.start();return await(this.#z.config.onSuccess?.(r,e,this.state.context,this,n)),await(this.options.onSuccess?.(r,e,this.state.context,n)),await(this.#z.config.onSettled?.(r,null,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(r,null,e,this.state.context,n)),this.#p({type:"success",data:r}),r}catch(r){try{await(this.#z.config.onError?.(r,e,this.state.context,this,n))}catch(i){Promise.reject(i)}try{await(this.options.onError?.(r,e,this.state.context,n))}catch(i){Promise.reject(i)}try{await(this.#z.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this,n))}catch(i){Promise.reject(i)}try{await(this.options.onSettled?.(void 0,r,e,this.state.context,n))}catch(i){Promise.reject(i)}throw this.#p({type:"error",error:r}),r}finally{this.#z.runNext(this)}}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),xs.batch(()=>{this.#O.forEach(t=>{t.onMutationUpdate(e)}),this.#z.notify({mutation:this,type:"updated",action:e})})}};var Is=class extends Dn{constructor(e={}){super(),this.config=e,this.#B=new Set,this.#$=new Map,this.#U=0}#B;#$;#U;build(e,t,n){const s=new Fs({client:e,mutationCache:this,mutationId:++this.#U,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){this.#B.add(e);const t=Os(e);if("string"==typeof t){const n=this.#$.get(t);n?n.push(e):this.#$.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#B.delete(e)){const t=Os(e);if("string"==typeof t){const n=this.#$.get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#$.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Os(e);if("string"==typeof t){const n=this.#$.get(t),s=n?.find(e=>"pending"===e.state.status);return!s||s===e}return!0}runNext(e){const t=Os(e);if("string"==typeof t){const n=this.#$.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}return Promise.resolve()}clear(){xs.batch(()=>{this.#B.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#B.clear(),this.#$.clear()})}getAll(){return Array.from(this.#B)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>qn(t,e))}findAll(e={}){return this.getAll().filter(t=>qn(e,t))}notify(e){xs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return xs.batch(()=>Promise.all(e.map(e=>e.continue().catch(On))))}};function Os(e){return e.options.scope?.id}var zs=class extends Dn{#d;#y=void 0;#V;#q;constructor(e,t){super(),this.#d=e,this.setOptions(t),this.bindMethods(),this.#H()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#d.defaultMutationOptions(e),Yn(this.options,t)||this.#d.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#V,observer:this}),t?.mutationKey&&this.options.mutationKey&&Gn(t.mutationKey)!==Gn(this.options.mutationKey)?this.reset():"pending"===this.#V?.state.status&&this.#V.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#V?.removeObserver(this)}onMutationUpdate(e){this.#H(),this.#I(e)}getCurrentResult(){return this.#y}reset(){this.#V?.removeObserver(this),this.#V=void 0,this.#H(),this.#I()}mutate(e,t){return this.#q=t,this.#V?.removeObserver(this),this.#V=this.#d.getMutationCache().build(this.#d,this.options),this.#V.addObserver(this),this.#V.execute(e)}#H(){const e=this.#V?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#y={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#I(e){xs.batch(()=>{if(this.#q&&this.hasListeners()){const n=this.#y.variables,s=this.#y.context,a={client:this.#d,meta:this.options.meta,mutationKey:this.options.mutationKey};if("success"===e?.type){try{this.#q.onSuccess?.(e.data,n,s,a)}catch(t){Promise.reject(t)}try{this.#q.onSettled?.(e.data,null,n,s,a)}catch(t){Promise.reject(t)}}else if("error"===e?.type){try{this.#q.onError?.(e.error,n,s,a)}catch(t){Promise.reject(t)}try{this.#q.onSettled?.(void 0,e.error,n,s,a)}catch(t){Promise.reject(t)}}}this.listeners.forEach(e=>{e(this.#y)})})}},Bs=class extends Dn{constructor(e={}){super(),this.config=e,this.#G=new Map}#G;build(e,t,n){const s=t.queryKey,a=t.queryHash??Hn(s,t);let r=this.get(a);return r||(r=new Cs({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(r)),r}add(e){this.#G.has(e.queryHash)||(this.#G.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#G.get(e.queryHash);t&&(e.destroy(),t===e&&this.#G.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){xs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#G.get(e)}getAll(){return[...this.#G.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>Vn(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>Vn(e,t)):t}notify(e){xs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){xs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){xs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$s=class{#K;#z;#h;#W;#Q;#Y;#X;#Z;constructor(e={}){this.#K=e.queryCache||new Bs,this.#z=e.mutationCache||new Is,this.#h=e.defaultOptions||{},this.#W=new Map,this.#Q=new Map,this.#Y=0}mount(){this.#Y++,1===this.#Y&&(this.#X=is.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#K.onFocus())}),this.#Z=vs.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#K.onOnline())}))}unmount(){this.#Y--,0===this.#Y&&(this.#X?.(),this.#X=void 0,this.#Z?.(),this.#Z=void 0)}isFetching(e){return this.#K.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#z.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#K.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#K.build(this,t),s=n.state.data;return void 0===s?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime($n(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#K.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=this.#K.get(s.queryHash),r=a?.state.data,i=function(e,t){return"function"==typeof e?e(t):e}(t,r);if(void 0!==i)return this.#K.build(this,s).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return xs.batch(()=>this.#K.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#K.get(t.queryHash)?.state}removeQueries(e){const t=this.#K;xs.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=this.#K;return xs.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=xs.batch(()=>this.#K.findAll(e).map(e=>e.cancel(n)));return Promise.all(s).then(On).catch(On)}invalidateQueries(e,t={}){return xs.batch(()=>(this.#K.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=xs.batch(()=>this.#K.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(On)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(s).then(On)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=this.#K.build(this,t);return n.isStaleByTime($n(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(On).catch(On)}fetchInfiniteQuery(e){return e.behavior=Ms(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(On).catch(On)}ensureInfiniteQueryData(e){return e.behavior=Ms(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return vs.isOnline()?this.#z.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#K}getMutationCache(){return this.#z}getDefaultOptions(){return this.#h}setDefaultOptions(e){this.#h=e}setQueryDefaults(e,t){this.#W.set(Gn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#W.values()],n={};return t.forEach(t=>{Kn(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#Q.set(Gn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#Q.values()],n={};return t.forEach(t=>{Kn(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#h.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Hn(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ss&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#h.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#K.clear(),this.#z.clear()}},Us=p.createContext(void 0),Vs=e=>{const t=p.useContext(Us);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},qs=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(Us.Provider,{value:e,children:t})),Hs=p.createContext(!1),Gs=Hs.Provider;var Ks=p.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Ws=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Qs(e,t,n){const s=p.useContext(Hs),a=p.useContext(Ks),r=Vs(),i=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(i);const o=r.getQueryCache().get(i.queryHash);i._optimisticResults=s?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,n=e=>"static"===e?e:Math.max(e??t,t),s=e.staleTime;e.staleTime="function"==typeof s?(...e)=>n(s(...e)):n(s),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(i),((e,t,n)=>{const s=n?.state.error&&"function"==typeof e.throwOnError?rs(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||s)&&(t.isReset()||(e.retryOnMount=!1))})(i,a,o),(e=>{p.useEffect(()=>{e.clearReset()},[e])})(a);const l=!r.getQueryCache().get(i.queryHash),[c]=p.useState(()=>new t(r,i)),d=c.getOptimisticResult(i),u=!s&&!1!==e.subscribed;if(p.useSyncExternalStore(p.useCallback(e=>{const t=u?c.subscribe(xs.batchCalls(e)):On;return c.updateResult(),t},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(i)},[i,c]),((e,t)=>e?.suspense&&t.isPending)(i,d))throw Ws(i,c,a);if((({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&void 0===e.data||rs(n,[e.error,s])))({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:o,suspense:i.suspense}))throw d.error;if(r.getDefaultOptions().queries?._experimental_afterQuery?.(i,d),i.experimental_prefetchInRender&&!In&&((e,t)=>e.isLoading&&e.isFetching&&!t)(d,s)){const e=l?Ws(i,c,a):o?.promise;e?.catch(On).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function Ys(e,t){return Qs(e,Ps)}function Xs(e,t){const n=Vs(),[s]=p.useState(()=>new zs(n,e));p.useEffect(()=>{s.setOptions(e)},[s,e]);const a=p.useSyncExternalStore(p.useCallback(e=>s.subscribe(xs.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),r=p.useCallback((e,t)=>{s.mutate(e,t).catch(On)},[s]);if(a.error&&rs(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:r,mutateAsync:a.mutate}}const Zs={},Js=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=n?.nonce||n?.getAttribute("nonce");s=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in Zs)return;Zs[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,a&&s.setAttribute("nonce",a),document.head.appendChild(s),t?new Promise((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};var ea=function(){return null};function ta(e){try{const t=e.split(".");if(3!==t.length)return null;const n=t[1].replace(/-/g,"+").replace(/_/g,"/"),s=n+"=".repeat((4-n.length%4)%4),a=atob(s);return JSON.parse(a)}catch(t){return null}}function na(e){const t=ta(e);return t&&t.exp?new Date(1e3*t.exp):null}function sa(e,t=0){const n=na(e);if(!n)return!0;return new Date>=new Date(n.getTime()-1e3*t)}function aa(e){const t=na(e);if(!t)return null;const n=new Date,s=t.getTime()-n.getTime();return s>0?s:null}const ra={};class ia{memoryCache=new Map;handlers=new Map;queryClient=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;setQueryClient(e){this.queryClient=e}register(e){switch(e.type){case"localStorage":break;case"memory":this.memoryCache.set(e.key,e)}}get(e,t="localStorage"){switch(t){case"localStorage":{const n=Ga.get(`cache:${e}`);if(!n)return null;if(n.timestamp&&n.ttl){if(Date.now()-n.timestamp>n.ttl)return this.remove(e,t),null}return n.value??null}case"memory":{const n=this.memoryCache.get(e);if(!n)return null;if(n.timestamp&&n.ttl){if(Date.now()-n.timestamp>n.ttl)return this.remove(e,t),null}return n.value}case"react-query":if(!this.queryClient)return null;return this.queryClient.getQueryData(e.split(":"))??null}}set(e,t,n="localStorage",s){const a={key:e,type:n,value:t,timestamp:Date.now(),ttl:s};switch(n){case"localStorage":Ga.set(`cache:${e}`,a);break;case"memory":this.memoryCache.set(e,a);break;case"react-query":if(this.queryClient){const n=e.includes(":")?e.split(":"):[e];this.queryClient.setQueryData(n,t)}}}remove(e,t){t?this.removeByType(e,t):(this.removeByType(e,"localStorage"),this.removeByType(e,"memory"),this.removeByType(e,"react-query"))}removeByType(e,t){switch(t){case"localStorage":Ga.remove(`cache:${e}`);break;case"memory":this.memoryCache.delete(e);break;case"react-query":if(this.queryClient){const t=e.includes(":")?e.split(":"):[e];this.queryClient.removeQueries({queryKey:t})}}}clear(e,t){e?this.clearByPattern(e,t):this.clearAll()}clearByPattern(e,t){const n="string"==typeof e?new RegExp(e.replace("*",".*")):e;(t?[t]:["localStorage","memory","react-query"]).forEach(e=>{switch(e){case"localStorage":{const e=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s?.startsWith("cache:")&&n.test(s)&&e.push(s)}e.forEach(e=>{const t=e.replace("cache:","");this.remove(t,"localStorage")});break}case"memory":{const e=[];this.memoryCache.forEach((t,s)=>{n.test(s)&&e.push(s)}),e.forEach(e=>this.remove(e,"memory"));break}case"react-query":this.queryClient&&this.queryClient.removeQueries({predicate:e=>{const t=Array.isArray(e.queryKey)?e.queryKey.join(":"):String(e.queryKey);return n.test(t)}})}})}clearAll(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n?.startsWith("cache:")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),this.memoryCache.clear(),this.queryClient&&this.queryClient.clear()}onInvalidate(e,t){return this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),()=>{const n=this.handlers.get(e);if(n){const s=n.indexOf(t);s>-1&&n.splice(s,1),0===n.length&&this.handlers.delete(e)}}}async handleInvalidation(e){if(e.cacheKey){this.remove(e.cacheKey,e.cacheType);const t=this.handlers.get(e.cacheKey)||[];for(const n of t)await n(e)}if(e.cachePattern){this.clear(e.cachePattern,e.cacheType);const t=new RegExp(e.cachePattern.replace("*",".*"));for(const[n,s]of this.handlers.entries())if(t.test(n)||t.test(e.cachePattern))for(const t of s)await t(e)}e.cacheKey||e.cachePattern||"global"===e.scope&&this.clearAll()}connect(e){if(this.isConnected)return;"true"===ra?.VITE_ENABLE_CACHE_BROADCAST&&setTimeout(()=>{this.connectWebSocket(e)},0)}connectWebSocket(e){const t=e||`${ra?.VITE_API_BASE_URL||"http://localhost:8000"}/ws/cache-invalidate`.replace("http://","ws://").replace("https://","wss://");try{const n=new WebSocket(t);let s=!0;const a=setTimeout(()=>{this.isConnected||(s=!1)},1e3);n.onopen=()=>{clearTimeout(a),s=!1,this.isConnected=!0,this.reconnectAttempts=0},n.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleInvalidation(t)}catch(t){}},n.onerror=()=>{this.isConnected=!1,clearTimeout(a),0===this.reconnectAttempts&&s&&setTimeout(()=>this.connectSSE(e),100)},n.onclose=e=>{clearTimeout(a),this.isConnected=!1,1006===e.code&&0===this.reconnectAttempts&&s||this.reconnectAttempts>0&&this.reconnectAttempts<this.maxReconnectAttempts&&this.attemptReconnect()}}catch(n){this.connectSSE(e)}}connectSSE(e){const t=e||`${ra?.VITE_API_BASE_URL||"http://localhost:8000"}/api/v1/cache/invalidate/stream`;try{const e=new EventSource(t);let n=!1;const s=setTimeout(()=>{n||(e.close(),this.isConnected=!1)},2e3);e.onopen=()=>{clearTimeout(s),n=!0,this.isConnected=!0,this.reconnectAttempts=0},e.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleInvalidation(t)}catch(t){}},e.onerror=()=>{clearTimeout(s),this.isConnected=!1,(n||0!==this.reconnectAttempts)&&n&&this.reconnectAttempts<this.maxReconnectAttempts?(e.close(),this.attemptReconnect()):e.close()}}catch(n){this.isConnected=!1}}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.reconnectAttempts<=this.maxReconnectAttempts&&this.connect()},e)}disconnect(){this.isConnected=!1}getStats(){let e=0;for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n?.startsWith("cache:")&&e++}return{memoryCacheSize:this.memoryCache.size,localStorageCacheSize:e,isConnected:this.isConnected}}}const oa=new ia,la=Object.freeze(Object.defineProperty({__proto__:null,CacheManager:ia,cacheManager:oa},Symbol.toStringTag,{value:"Module"})),ca={SESSION_CONFIG:"session:config",AUTH_TOKEN:"auth:token",REFRESH_TOKEN:"auth:refresh_token",USER_PROFILE:"user:profile",USERS_LIST:"users:list",USER_DETAIL:"user:detail",USER_ACTIVITY:"user:activity",REACT_QUERY_CACHE:"react-query:cache",APP_TABS:"app:tabs",SCROLL_POSITIONS:"app:scroll:positions",COMMAND_PALETTE_RECENT:"ui:command-palette:recent",THEME:"app:theme",LOCALE:"app:locale",USER_PREFERENCES:"user:preferences"},da={ALL_SESSION:"session:*",ALL_USERS:"users:*",ALL_USER_DETAILS:"user:detail:*",ALL_USER_ACTIVITY:"user:activity:*",ALL_AUTH:"auth:*",ALL_UI:"ui:*"},ua=[{key:ca.SESSION_CONFIG,type:"localStorage",ttl:36e5,description:"Session configuration from server",invalidateOn:[da.ALL_SESSION,"auth:logout"]},{key:ca.USERS_LIST,type:"react-query",description:"List of users",invalidateOn:["users:create","users:update","users:delete"]},{key:ca.USER_DETAIL,type:"react-query",description:"Individual user details",invalidateOn:["user:update","user:delete"]},{key:ca.USER_ACTIVITY,type:"react-query",description:"User activity logs",invalidateOn:["user:update","user:activity:new"]},{key:ca.REACT_QUERY_CACHE,type:"localStorage",description:"React Query persisted cache",invalidateOn:["auth:logout","auth:login"]},{key:ca.APP_TABS,type:"localStorage",description:"Open tabs state",invalidateOn:["auth:logout"]},{key:ca.SCROLL_POSITIONS,type:"localStorage",description:"Scroll positions",invalidateOn:["auth:logout"]},{key:ca.COMMAND_PALETTE_RECENT,type:"localStorage",description:"Command palette recent searches",invalidateOn:["auth:logout"]},{key:ca.USER_PREFERENCES,type:"localStorage",ttl:31536e6,description:"User preferences (UI settings, data display preferences, etc.)"}];function ha(){ua.forEach(e=>{oa.register({key:e.key,type:e.type,ttl:e.ttl,invalidateOn:e.invalidateOn})}),oa.onInvalidate("auth:logout",async e=>{if(oa.clear(da.ALL_SESSION),oa.clear(da.ALL_AUTH),oa.clear(da.ALL_USERS),oa.clear(da.ALL_USER_DETAILS),oa.clear(da.ALL_USER_ACTIVITY),oa.clear(da.ALL_UI),"react-query"===e.cacheType||!e.cacheType){const{cacheManager:e}=await Js(async()=>{const{cacheManager:e}=await Promise.resolve().then(()=>la);return{cacheManager:e}},void 0);e.queryClient&&e.queryClient.clear()}}),oa.onInvalidate("user:update",async e=>{const t=e.metadata?.userId;t&&(oa.remove(`${ca.USER_DETAIL}:${t}`),oa.remove(`${ca.USER_ACTIVITY}:${t}`)),oa.clear(da.ALL_USERS)}),oa.onInvalidate("users:create",async()=>{oa.clear(da.ALL_USERS)}),oa.onInvalidate("users:delete",async e=>{const t=e.metadata?.userId;t&&(oa.remove(`${ca.USER_DETAIL}:${t}`),oa.remove(`${ca.USER_ACTIVITY}:${t}`)),oa.clear(da.ALL_USERS)})}const ma={BASE_URL:"http://localhost:8000",ENDPOINTS:{AUTH:{LOGIN:"/api/v1/auth/token"},USERS:{FETCH:"/api/v1/users"},ROLES:"/api/v1/roles",GROUPS:"/api/v1/groups",SALES:{CUSTOMERS:"/api/v1/sales/customers",BOOKINGS:"/api/v1/sales/bookings"},TICKETING:{VENUES:"/api/v1/ticketing/venues",EVENTS:"/api/v1/ticketing/events"}}},pa="en",fa={defaultOptions:{queries:{retry:3,staleTime:3e5,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}}},ga="auth_token",xa="refresh_token",va="locale",ya="session_config";let ba=null,wa=null,Sa=!1,ja=[];let Ca=null,ka=!1;function Na(){Ca=Date.now()+3e3}function _a(e){ka=e}function Pa(){if(!Ca)return!1;return!(Date.now()>Ca)||(Ca=null,!1)}function Ea(e){ba=e}function Ra(e){wa=e}const Aa=(e,t=null)=>{ja.forEach(n=>{e?n.reject(e):n.resolve(t)}),ja=[]};class Ta extends Error{status;statusText;constructor(e,t,n){super(Ta.parseErrorMessage(n||t)),this.name="ApiError",this.status=e,this.statusText=t,Object.defineProperty(this,"status",{enumerable:!0,value:e,writable:!1}),Object.defineProperty(this,"statusText",{enumerable:!0,value:t,writable:!1})}static parseErrorMessage(e){try{const t=JSON.parse(e);if(void 0!==t.detail&&null!==t.detail){const e=t.detail;if("string"==typeof e)return e;if(Array.isArray(e)){return e.map(e=>String(e&&"object"==typeof e&&"msg"in e?e.msg:e)).filter(Boolean).join(" ")||"Validation error"}}return t.message?t.message:t.error?.message?t.error.message:t.error?.detail?t.error.detail:e}catch{return e}}isAuthError(){return 401===this.status||403===this.status}isPermissionError(){return 403===this.status&&(this.message.includes("Permission")&&this.message.includes("required"))}toString(){return`${this.name} [${this.status} ${this.statusText}]: ${this.message}`}}let Ma=null,Da=null;async function La(e,t={}){const{requiresAuth:n=!1,...s}=t,a=`${ma.BASE_URL}${e}`,r={...s.headers};if(s.body instanceof FormData||(r["Content-Type"]="application/json"),n){const e=Ga.get(ga);e&&(r.Authorization=`Bearer ${e}`)}const i=await fetch(a,{...s,headers:r});if(!i.ok){const s=await i.text(),a=["/api/v1/sessions/config"].some(t=>e.includes(t)),r=new Ta(i.status,i.statusText,s);if(!a||404!==i.status&&401!==i.status||(r._silent=!0),401===r.status&&n&&!Sa&&Ma){if(Ga.get(xa)){if(Sa)return new Promise((e,t)=>{ja.push({resolve:e,reject:t})}).then(()=>La(e,t));Sa=!0;try{const n=await Ma();return Aa(null,n.access_token),Sa=!1,La(e,t)}catch(o){throw Aa(o,null),Sa=!1,Da&&Da(),!ba||Pa()||ka||ba(),r}}else!ba||Pa()||ka||ba()}throw 401!==r.status||!ba||Pa()||ka||ba(),403!==r.status||r.isPermissionError()||!wa||Pa()||ka||wa(r.message),r}if(204!==i.status)return i.json()}const Fa={get:(e,t)=>La(e,{...t,method:"GET"}),post:(e,t,n)=>La(e,{...n,method:"POST",body:JSON.stringify(t)}),patch:(e,t,n)=>La(e,{...n,method:"PATCH",body:JSON.stringify(t)}),put:(e,t,n)=>La(e,{...n,method:"PUT",body:JSON.stringify(t)}),delete:(e,t)=>La(e,{...t,method:"DELETE"}),postForm:(e,t,n)=>La(e,{...n,method:"POST",body:t})};async function Ia(){return Fa.get("/api/v1/user-preferences/",{requiresAuth:!0})}class Oa{CACHE_KEY=ca.USER_PREFERENCES;CACHE_TTL=31536e6;SYNC_METADATA_KEY=`${ca.USER_PREFERENCES}:metadata`;SYNC_DEBOUNCE_MS=2e3;MAX_BATCH_SIZE=10;syncTimeout=null;pendingChanges=new Set;isDirty=!1;isOnline="undefined"==typeof navigator||navigator.onLine;isInitialized=!1;syncInProgress=!1;constructor(){"undefined"!=typeof window&&(window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),window.addEventListener("beforeunload",()=>{this.isDirty&&this.isOnline&&this.syncNow(!0)}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.isDirty&&this.isOnline&&this.syncNow()}))}handleOnline(){this.isOnline=!0,this.isDirty&&this.syncNow().catch(e=>{})}handleOffline(){this.isOnline=!1,this.cancelPendingSync()}hasCache(){const e=oa.get(this.CACHE_KEY,"localStorage");return null!==e&&Object.keys(e||{}).length>0}async initialize(e=!1){if(this.isInitialized&&!e)return;const t=this.hasCache();if(t&&!e)return this.isOnline&&this.syncToServerIfNeeded().catch(e=>{}),void(this.isInitialized=!0);if(this.isOnline)try{const e=await Ia();if(e?.preferences){const t=e.preferences,n=this.getAll();if(this.isDirty&&Object.keys(n).length>0){const e=this.deepMerge(t,n);oa.set(this.CACHE_KEY,e,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.scheduleSync()}else oa.set(this.CACHE_KEY,t,"localStorage",this.CACHE_TTL),this.isDirty=!1,this.pendingChanges.clear();this.saveSyncMetadata()}else t||oa.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL)}catch(n){t||oa.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL)}else t||oa.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL);this.isInitialized=!0}async syncToServerIfNeeded(){if(this.isOnline&&this.isDirty&&!this.syncInProgress)try{await this.syncNow()}catch(e){}}saveSyncMetadata(){const e={lastSync:Date.now(),isDirty:this.isDirty};oa.set(this.SYNC_METADATA_KEY,e,"localStorage",this.CACHE_TTL)}getAll(){const e=oa.get(this.CACHE_KEY,"localStorage");return e||this.isInitialized?e||{}:(oa.set(this.CACHE_KEY,{},"localStorage",this.CACHE_TTL),{})}async getAllFromBackend(){if(!this.isOnline)return this.getAll();try{const e=await Ia();if(e?.preferences){const t=e.preferences,n=this.getAll();if(this.isDirty&&Object.keys(n).length>0){const e=this.deepMerge(t,n);return oa.set(this.CACHE_KEY,e,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.scheduleSync(),e}return oa.set(this.CACHE_KEY,t,"localStorage",this.CACHE_TTL),this.isDirty=!1,this.pendingChanges.clear(),this.saveSyncMetadata(),t}return this.getAll()}catch(e){return this.getAll()}}scheduleSync(){this.syncTimeout&&clearTimeout(this.syncTimeout),this.pendingChanges.size>=this.MAX_BATCH_SIZE?this.syncNow():this.syncTimeout=setTimeout(()=>{this.syncNow()},this.SYNC_DEBOUNCE_MS)}async syncNow(e=!1){if(this.syncTimeout&&(clearTimeout(this.syncTimeout),this.syncTimeout=null),this.isDirty&&0!==this.pendingChanges.size&&this.isOnline)if(this.syncInProgress)setTimeout(()=>this.syncNow(e),100);else{this.syncInProgress=!0;try{const e=this.getAll();await this.performSync(e),this.isDirty=!1,this.pendingChanges.clear(),this.saveSyncMetadata()}catch(t){t instanceof TypeError&&t.message.includes("fetch")&&(this.isOnline=!1)}finally{this.syncInProgress=!1}}}async performSync(e){await async function(e){return Fa.put("/api/v1/user-preferences/",{preferences:e},{requiresAuth:!0})}(e)}markDirty(e){this.isDirty=!0;const t=e.join(".");this.pendingChanges.add(t),this.scheduleSync()}get(...e){let t=this.getAll();for(const n of e){if(!t||"object"!=typeof t||!(n in t))return;t=t[n]}return t}set(e,t){const n=Array.isArray(e)?e:e.split("."),s=this.getAll();let a=s;for(let r=0;r<n.length-1;r++){const e=n[r];a[e]&&"object"==typeof a[e]||(a[e]={}),a=a[e]}a[n[n.length-1]]=t,oa.set(this.CACHE_KEY,s,"localStorage",this.CACHE_TTL),this.markDirty(n)}async setAsync(e,t){const n=Array.isArray(e)?e:e.split("."),s=this.getAll();let a=s;for(let r=0;r<n.length-1;r++){const e=n[r];a[e]&&"object"==typeof a[e]||(a[e]={}),a=a[e]}a[n[n.length-1]]=t,oa.set(this.CACHE_KEY,s,"localStorage",this.CACHE_TTL),this.markDirty(n),await this.syncNow()}remove(...e){if(0===e.length)return;const t=this.getAll();let n=t;for(let s=0;s<e.length-1;s++){const t=e[s];if(!n[t]||"object"!=typeof n[t])return;n=n[t]}delete n[e[e.length-1]],oa.set(this.CACHE_KEY,t,"localStorage",this.CACHE_TTL),this.markDirty(e)}async removeAsync(...e){0!==e.length&&(this.remove(...e),await this.syncNow())}clear(){oa.remove(this.CACHE_KEY,"localStorage"),this.isDirty=!0,this.pendingChanges.clear(),this.pendingChanges.add("*"),this.scheduleSync()}async clearAsync(){oa.remove(this.CACHE_KEY,"localStorage"),this.isDirty=!0,this.pendingChanges.clear(),this.pendingChanges.add("*"),await this.syncNow()}update(e){const t=this.getAll(),n=this.deepMerge(t,e);oa.set(this.CACHE_KEY,n,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.pendingChanges.add("*"),this.scheduleSync()}async updateAsync(e){const t=this.getAll(),n=this.deepMerge(t,e);oa.set(this.CACHE_KEY,n,"localStorage",this.CACHE_TTL),this.isDirty=!0,this.pendingChanges.add("*"),await this.syncNow()}deepMerge(e,t){const n={...e};for(const s in t)t[s]&&"object"==typeof t[s]&&!Array.isArray(t[s])?n[s]=this.deepMerge(e[s]||{},t[s]):n[s]=t[s];return n}getDataListView(e){return this.get("ui","dataListView",e)}setDataListView(e,t){this.set(["ui","dataListView",e],t)}async setDataListViewAsync(e,t){await this.setAsync(["ui","dataListView",e],t)}getStoreLocationView(){return this.get("ui","storeLocationView")}setStoreLocationView(e){this.set(["ui","storeLocationView"],e)}async setStoreLocationViewAsync(e){await this.setAsync(["ui","storeLocationView"],e)}async flush(){this.isOnline&&await this.syncNow()}isCurrentlyOnline(){return this.isOnline}clearCache(){oa.remove(this.CACHE_KEY,"localStorage"),oa.remove(this.SYNC_METADATA_KEY,"localStorage"),this.isDirty=!1,this.pendingChanges.clear(),this.isInitialized=!1,this.cancelPendingSync()}hasPendingChanges(){return this.isDirty&&this.pendingChanges.size>0}getPendingChangesCount(){return this.pendingChanges.size}cancelPendingSync(){this.syncTimeout&&(clearTimeout(this.syncTimeout),this.syncTimeout=null)}}const za=new Oa,Ba="ui-density";function $a(){const[e,t]=p.useState(()=>function(){if("undefined"==typeof window)return"normal";try{const e=localStorage.getItem(Ba);if(!e||"undefined"===e||"null"===e)return"normal";let t;try{t=JSON.parse(e)}catch{t=e}if("normal"===t||"compact"===t)return t}catch{}return"normal"}());return p.useEffect(()=>{const e=e=>{const n=e;if(n.detail?.density){const e=n.detail.density;"normal"!==e&&"compact"!==e||t(e)}},n=e=>{if(e.key===Ba&&e.newValue){let n;try{n=JSON.parse(e.newValue)}catch{n=e.newValue}"normal"!==n&&"compact"!==n||t(n)}};return window.addEventListener("density-preference-changed",e),window.addEventListener("storage",n),()=>{window.removeEventListener("density-preference-changed",e),window.removeEventListener("storage",n)}},[]),{density:e,isCompact:"compact"===e}}function Ua(){const{isCompact:e}=$a();return{textSize:e?"text-xs":"text-sm",textSizeSmall:e?"text-xs":"text-sm",textSizeLabel:e?"text-xs":"text-sm",textSizeCardTitle:e?"text-lg":"text-2xl",textSizeCardDescription:e?"text-xs":"text-sm",inputHeight:e?"h-7":"h-10",searchInputHeight:e?"h-7":"h-10",buttonHeight:e?"h-7":"h-10",buttonHeightSmall:e?"h-7":"h-9",paddingContainer:e?"p-4":"p-6",paddingForm:e?"p-4":"p-6",paddingCell:e?"px-2":"px-3",paddingRow:e?"py-1":"py-2",paddingCard:e?"p-4":"p-6",paddingCardHeader:e?"p-4":"p-6",paddingCardContent:e?"p-4 pt-0":"p-6 pt-0",paddingCardFooter:e?"p-4 pt-0":"p-6 pt-0",gapForm:e?"gap-4":"gap-6",gapFormItem:e?"gap-1.5":"gap-2",gapButtonGroup:e?"gap-2":"gap-3",gapCard:e?"gap-2":"gap-3",spacingFormSection:e?"space-y-4":"space-y-6",spacingFormItem:e?"space-y-1.5":"space-y-2",spacingCard:e?"space-y-2":"space-y-3",iconSize:e?"h-3 w-3":"h-4 w-4",iconSizeSmall:e?"h-3 w-3":"h-3.5 w-3.5"}}function Va(){const{isCompact:e}=$a();return e}const qa=(e,t="en-US")=>{const n="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"long",day:"numeric"}).format(n)};function Ha(){try{return"undefined"!=typeof window&&void 0!==window.localStorage&&null!==window.localStorage}catch{return!1}}const Ga={get:(e,t)=>{if(!Ha())return t??null;try{const n=window.localStorage.getItem(e);return n&&"undefined"!==n&&"null"!==n?JSON.parse(n):t??null}catch(n){try{window.localStorage.removeItem(e)}catch{}return t??null}},set:(e,t)=>{if(Ha())try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){}},remove:e=>{if(Ha())try{window.localStorage.removeItem(e)}catch(t){}},clear:()=>{if(Ha())try{window.localStorage.clear()}catch(e){}},removeMatching:e=>{if(Ha())try{const t="string"==typeof e?new RegExp(e):e,n=[];for(let e=0;e<window.localStorage.length;e++){const s=window.localStorage.key(e);s&&t.test(s)&&n.push(s)}n.forEach(e=>window.localStorage.removeItem(e))}catch(t){}}},Ka=Object.freeze(Object.defineProperty({__proto__:null,CACHE_KEYS:ca,CACHE_PATTERNS:da,CacheManager:ia,UserPreferencesManager:Oa,cacheManager:oa,decodeJWTPayload:ta,formatDate:qa,getTimeUntilExpiration:aa,getTokenExpiration:na,initializeCacheRegistry:ha,isTokenExpired:sa,storage:Ga,useDensity:$a,useDensityStyles:Ua,useIsCompact:Va,userPreferences:za},Symbol.toStringTag,{value:"Module"})),Wa=p.createContext({theme:"system",resolvedTheme:"light",setTheme:()=>null}),Qa=e=>"undefined"==typeof window?"light":"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e,Ya=e=>{if("undefined"==typeof window)return;const t=window.document.documentElement;if(t.classList.remove("light","dark"),"system"===e){const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return void t.classList.add(e)}t.classList.add(e)};function Xa({children:e,defaultTheme:t="system",storageKey:n="ui-theme",...s}){const a=(()=>{if("undefined"==typeof window)return t;const e=Ga.get(n)||t;return Ya(e),e})(),[r,i]=p.useState(a),[o,l]=p.useState(()=>Qa(a));p.useLayoutEffect(()=>{Ya(r),l(Qa(r))},[r]),p.useEffect(()=>{if("system"!==r||"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{"system"===Ga.get(n)&&(Ya("system"),l(Qa("system")))};return e.addEventListener?e.addEventListener("change",t):e.addListener(t),()=>{e.removeEventListener?e.removeEventListener("change",t):e.removeListener(t)}},[r,n]);const d={theme:r,resolvedTheme:o,setTheme:e=>{Ga.set(n,e),Ya(e),i(e)}};return c.jsx(Wa.Provider,{...s,value:d,children:e})}const Za=p.createContext({density:"normal",setDensity:()=>null});function Ja({children:e,defaultDensity:t="normal",storageKey:n="ui-density",...s}){const[a,r]=p.useState(()=>Ga.get(n)||t);p.useEffect(()=>{const e=e=>{const t=e;if(t.detail?.density){const e=t.detail.density;"normal"!==e&&"compact"!==e||e===a||r(e)}},t=e=>{if(e.key===n&&e.newValue)try{let t;try{t=JSON.parse(e.newValue)}catch{t=e.newValue}"normal"!==t&&"compact"!==t||t===a||r(t)}catch{}};return window.addEventListener("density-preference-changed",e),window.addEventListener("storage",t),()=>{window.removeEventListener("density-preference-changed",e),window.removeEventListener("storage",t)}},[n,a]);const i={density:a,setDensity:e=>{Ga.set(n,e),r(e),window.dispatchEvent(new CustomEvent("density-preference-changed",{detail:{density:e}}))}};return c.jsx(Za.Provider,{...s,value:i,children:e})}const er={};function tr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];rr(t[0])&&er[t[0]]||(rr(t[0])&&(er[t[0]]=new Date),function(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];rr(t[0])&&(t[0]=`react-i18next:: ${t[0]}`)}}(...t))}const nr=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},sr=(e,t,n)=>{e.loadNamespaces(t,nr(e,n))},ar=(e,t,n,s)=>{rr(n)&&(n=[n]),n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,nr(e,s))},rr=e=>"string"==typeof e,ir=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,or={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},lr=e=>or[e];let cr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(ir,lr)};let dr;const ur={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cr={...cr,...e}}(e.options.react),(e=>{dr=e})(e)}},hr=p.createContext();class mr{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const pr=(e,t,n,s)=>e.getFixedT(t,n,s),fr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n}=t,{i18n:s,defaultNS:a}=p.useContext(hr)||{},r=n||s||dr;if(r&&!r.reportNamespaces&&(r.reportNamespaces=new mr),!r){tr("You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return rr(t)?t:"object"==typeof(n=t)&&null!==n&&rr(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}r.options.react&&void 0!==r.options.react.wait&&tr("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...cr,...r.options.react,...t},{useSuspense:o,keyPrefix:l}=i;let c=a||r.options&&r.options.defaultNS;c=rr(c)?[c]:c||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(c);const d=(r.isInitialized||r.initializedStoreOnce)&&c.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e))return!1}}):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=t.languages[0],a=!!t.options&&t.options.fallbackLng,r=t.languages[t.languages.length-1];if("cimode"===s.toLowerCase())return!0;const i=(e,n)=>{const s=t.services.backendConnector.state[`${e}|${n}`];return-1===s||2===s};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e)||!t.hasResourceBundle(s,e)&&t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages)&&(!i(s,e)||a&&!i(r,e)))}(e,t,n):(tr("i18n.languages were undefined or empty",t.languages),!0)}(e,r,i)),u=((e,t,n,s)=>p.useCallback(pr(e,t,n,s),[e,t,n,s]))(r,t.lng||null,"fallback"===i.nsMode?c:c[0],l),h=()=>u,m=()=>pr(r,t.lng||null,"fallback"===i.nsMode?c:c[0],l),[f,g]=p.useState(h);let x=c.join();t.lng&&(x=`${t.lng}${x}`);const v=((e,t)=>{const n=p.useRef();return p.useEffect(()=>{n.current=e},[e,t]),n.current})(x),y=p.useRef(!0);p.useEffect(()=>{const{bindI18n:e,bindI18nStore:n}=i;y.current=!0,d||o||(t.lng?ar(r,t.lng,c,()=>{y.current&&g(m)}):sr(r,c,()=>{y.current&&g(m)})),d&&v&&v!==x&&y.current&&g(m);const s=()=>{y.current&&g(m)};return e&&r&&r.on(e,s),n&&r&&r.store.on(n,s),()=>{y.current=!1,e&&r&&e.split(" ").forEach(e=>r.off(e,s)),n&&r&&n.split(" ").forEach(e=>r.store.off(e,s))}},[r,x]),p.useEffect(()=>{y.current&&d&&g(h)},[r,l,d]);const b=[f,r,d];if(b.t=f,b.i18n=r,b.ready=d,d)return b;if(!d&&!o)return b;throw new Promise(e=>{t.lng?ar(r,t.lng,c,()=>e()):sr(r,c,()=>e())})};function gr(e){let{i18n:t,defaultNS:n,children:s}=e;const a=p.useMemo(()=>({i18n:t,defaultNS:n}),[t,n]);return p.createElement(hr.Provider,{value:a},s)}const xr=e=>"string"==typeof e,vr=()=>{let e,t;const n=new Promise((n,s)=>{e=n,t=s});return n.resolve=e,n.reject=t,n},yr=e=>null==e?"":""+e,br=/###/g,wr=e=>e&&e.indexOf("###")>-1?e.replace(br,"."):e,Sr=e=>!e||xr(e),jr=(e,t,n)=>{const s=xr(t)?t.split("."):t;let a=0;for(;a<s.length-1;){if(Sr(e))return{};const t=wr(s[a]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++a}return Sr(e)?{}:{obj:e,k:wr(s[a])}},Cr=(e,t,n)=>{const{obj:s,k:a}=jr(e,t,Object);if(void 0!==s||1===t.length)return void(s[a]=n);let r=t[t.length-1],i=t.slice(0,t.length-1),o=jr(e,i,Object);for(;void 0===o.obj&&i.length;)r=`${i[i.length-1]}.${r}`,i=i.slice(0,i.length-1),o=jr(e,i,Object),o&&o.obj&&void 0!==o.obj[`${o.k}.${r}`]&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=n},kr=(e,t)=>{const{obj:n,k:s}=jr(e,t);if(n)return n[s]},Nr=(e,t,n)=>{for(const s in t)"__proto__"!==s&&"constructor"!==s&&(s in e?xr(e[s])||e[s]instanceof String||xr(t[s])||t[s]instanceof String?n&&(e[s]=t[s]):Nr(e[s],t[s],n):e[s]=t[s]);return e},_r=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Pr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Er=e=>xr(e)?e.replace(/[&<>"'\/]/g,e=>Pr[e]):e;const Rr=[" ",",","?","!",";"],Ar=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),Tr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const s=t.split(n);let a=e;for(let r=0;r<s.length;){if(!a||"object"!=typeof a)return;let e,t="";for(let i=r;i<s.length;++i)if(i!==r&&(t+=n),t+=s[i],e=a[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&i<s.length-1)continue;r+=i-r+1;break}a=e}return a},Mr=e=>e&&e.replace("_","-"),Dr={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]}};class Lr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Dr,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(xr(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Lr(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Lr(this.logger,e)}}var Fr=new Lr;class Ir{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,s]=e;for(let a=0;a<s;a++)t(...n)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[s,a]=t;for(let r=0;r<a;r++)s.apply(s,[e,...n])})}}}class Or extends Ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,r=void 0!==s.ignoreJSONStructure?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let i;e.indexOf(".")>-1?i=e.split("."):(i=[e,t],n&&(Array.isArray(n)?i.push(...n):xr(n)&&a?i.push(...n.split(a)):i.push(n)));const o=kr(this.data,i);return!o&&!t&&!n&&e.indexOf(".")>-1&&(e=i[0],t=i[1],n=i.slice(2).join(".")),!o&&r&&xr(n)?Tr(this.data&&this.data[e]&&this.data[e][t],n,a):o}addResource(e,t,n,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator;let i=[e,t];n&&(i=i.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(i=e.split("."),s=t,t=i[1]),this.addNamespaces(t),Cr(this.data,i,s),a.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const a in n)(xr(n[a])||Array.isArray(n[a]))&&this.addResource(e,t,a,n[a],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),s=n,n=t,t=i[1]),this.addNamespaces(t);let o=kr(this.data,i)||{};r.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?Nr(o,n,a):o={...o,...n},Cr(this.data,i,o),r.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var zr={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,a){return e.forEach(e=>{this.processors[e]&&(t=this.processors[e].process(t,n,s,a))}),t}};const Br={};class $r extends Ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s;super(),n=e,s=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{n[e]&&(s[e]=n[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Fr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const r=n&&e.indexOf(n)>-1,i=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const s=Rr.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===s.length)return!0;const a=Ar.getRegExp(`(${s.map(e=>"?"===e?"\\?":e).join("|")})`);let r=!a.test(e);if(!r){const t=e.indexOf(n);t>0&&!a.test(e.substring(0,t))&&(r=!0)}return r})(e,n,s));if(r&&!i){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:xr(a)?[a]:a};const r=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(r[0])>-1)&&(a=r.shift()),e=r.join(s)}return{key:e,namespaces:xr(a)?[a]:a}}translate(e,t,n){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const s=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,a=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:r,namespaces:i}=this.extractFromKey(e[e.length-1],t),o=i[i.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return s?{res:`${o}${e}${r}`,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(t)}:`${o}${e}${r}`}return s?{res:r,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(t)}:r}const d=this.resolve(e,t);let u=d&&d.res;const h=d&&d.usedKey||r,m=d&&d.exactUsedKey||r,p=Object.prototype.toString.apply(u),f=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!xr(u)&&"boolean"!=typeof u&&"number"!=typeof u;if(!(g&&u&&x&&["[object Number]","[object Function]","[object RegExp]"].indexOf(p)<0)||xr(f)&&Array.isArray(u))if(g&&xr(f)&&Array.isArray(u))u=u.join(f),u&&(u=this.extendTranslation(u,e,t,n));else{let s=!1,i=!1;const c=void 0!==t.count&&!xr(t.count),h=$r.hasDefaultValue(t),m=c?this.pluralResolver.getSuffix(l,t.count,t):"",p=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",f=c&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=f&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${m}`]||t[`defaultValue${p}`]||t.defaultValue;!this.isValidLookup(u)&&h&&(s=!0,u=g),this.isValidLookup(u)||(i=!0,u=r);const x=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:u,v=h&&g!==u&&this.options.updateMissing;if(i||s||v){if(this.logger.log(v?"updateKey":"missingKey",l,o,r,v?g:u),a){const e=this.resolve(r,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const s=(e,n,s)=>{const a=h&&s!==u?s:x;this.options.missingKeyHandler?this.options.missingKeyHandler(e,o,n,a,v,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,o,n,a,v,t),this.emit("missingKey",e,o,n,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach(e=>{const n=this.pluralResolver.getSuffixes(e,t);f&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach(n=>{s([e],r+n,t[`defaultValue${n}`]||g)})}):s(e,r,g))}u=this.extendTranslation(u,e,t,d,n),i&&u===r&&this.options.appendNamespaceToMissingKey&&(u=`${o}:${r}`),(i||s)&&this.options.parseMissingKeyHandler&&(u="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${o}:${r}`:r,s?u:void 0):this.options.parseMissingKeyHandler(u))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,u,{...t,ns:i}):`key '${r} (${this.language})' returned an object instead of string.`;return s?(d.res=e,d.usedParams=this.getUsedParamsDetails(t),d):e}if(a){const e=Array.isArray(u),n=e?[]:{},s=e?m:h;for(const r in u)if(Object.prototype.hasOwnProperty.call(u,r)){const e=`${s}${a}${r}`;n[r]=this.translate(e,{...t,joinArrays:!1,ns:i}),n[r]===e&&(n[r]=u[r])}u=n}}return s?(d.res=u,d.usedParams=this.getUsedParamsDetails(t),d):u}extendTranslation(e,t,n,s,a){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const i=xr(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(i){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let l=n.replace&&!xr(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||s.usedLng,n),i){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&s&&s.res&&(n.lng=this.language||s.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return a&&a[0]===s[0]&&!n.context?(r.logger.warn(`It seems you are nesting recursively key: ${s[0]} in key: ${t[0]}`),null):r.translate(...s,t)},n)),n.interpolation&&this.interpolator.reset()}const i=n.postProcess||this.options.postProcess,o=xr(i)?[i]:i;return null!=e&&o&&o.length&&!1!==n.applyPostProcessor&&(e=zr.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,s,a,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xr(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,i),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==i.count&&!xr(i.count),u=d&&!i.ordinal&&0===i.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==i.context&&(xr(i.context)||"number"==typeof i.context)&&""!==i.context,m=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);c.forEach(e=>{this.isValidLookup(t)||(r=e,!Br[`${m[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(r)&&(Br[`${m[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${m.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(n=>{if(this.isValidLookup(t))return;a=n;const r=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,n,e,i);else{let e;d&&(e=this.pluralResolver.getSuffix(n,i.count,i));const t=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(r.push(l+e),i.ordinal&&0===e.indexOf(s)&&r.push(l+e.replace(s,this.options.pluralSeparator)),u&&r.push(l+t)),h){const n=`${l}${this.options.contextSeparator}${i.context}`;r.push(n),d&&(r.push(n+e),i.ordinal&&0===e.indexOf(s)&&r.push(n+e.replace(s,this.options.pluralSeparator)),u&&r.push(n+t))}}let o;for(;o=r.pop();)this.isValidLookup(t)||(s=o,t=this.getResource(n,e,o,i))}))})}),{res:t,usedKey:n,exactUsedKey:s,usedLng:a,usedNS:r}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!xr(e.replace);let s=n?e.replace:e;if(n&&void 0!==e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const e of t)delete s[e]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const Ur=e=>e.charAt(0).toUpperCase()+e.slice(1);class Vr{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Fr.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Mr(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Mr(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(xr(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(t){}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let s=e.split("-");return this.options.lowerCaseLng?s=s.map(e=>e.toLowerCase()):2===s.length?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),n.indexOf(s[1].toLowerCase())>-1&&(s[1]=Ur(s[1].toLowerCase()))):3===s.length&&(s[0]=s[0].toLowerCase(),2===s[1].length&&(s[1]=s[1].toUpperCase()),"sgn"!==s[0]&&2===s[2].length&&(s[2]=s[2].toUpperCase()),n.indexOf(s[1].toLowerCase())>-1&&(s[1]=Ur(s[1].toLowerCase())),n.indexOf(s[2].toLowerCase())>-1&&(s[2]=Ur(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),xr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],a=e=>{e&&(this.isSupportedCode(e)?s.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return xr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):xr(e)&&a(this.formatLanguageCode(e)),n.forEach(e=>{s.indexOf(e)<0&&a(this.formatLanguageCode(e))}),s}}let qr=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Hr={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const Gr=["v1","v2","v3"],Kr=["v4"],Wr={zero:0,one:1,two:2,few:3,many:4,other:5};class Qr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Fr.create("pluralResolver"),this.options.compatibilityJSON&&!Kr.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return qr.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:Hr[t.fc]}})}),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const s=Mr("dev"===e?"en":e),a=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:s,type:a});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let i;try{i=new Intl.PluralRules(s,{type:a})}catch(n){if(!e.match(/-|_/))return;const s=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(s,t)}return this.pluralRulesCache[r]=i,i}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((e,t)=>Wr[e]-Wr[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):n.numbers.map(n=>this.getSuffix(e,n,t)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getRule(e,n);return s?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:this.getSuffixRetroCompatible(s,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let s=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===s?s="plural":1===s&&(s=""));const a=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return"v1"===this.options.compatibilityJSON?1===s?"":"number"==typeof s?`_plural_${s.toString()}`:a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?a():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Gr.includes(this.options.compatibilityJSON)}}const Yr=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,n)=>{const s=kr(e,n);return void 0!==s?s:kr(t,n)})(e,t,n);return!r&&a&&xr(n)&&(r=Tr(e,n,s),void 0===r&&(r=Tr(t,n,s))),r},Xr=e=>e.replace(/\$/g,"$$$$");class Zr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Fr.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:a,prefixEscaped:r,suffix:i,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:m,nestingSuffixEscaped:p,nestingOptionsSeparator:f,maxReplaces:g,alwaysFormat:x}=e.interpolation;this.escape=void 0!==t?t:Er,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==s&&s,this.prefix=a?_r(a):r||"{{",this.suffix=i?_r(i):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?_r(u):h||_r("$t("),this.nestingSuffix=m?_r(m):p||_r(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==x&&x,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let a,r,i;const o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const a=Yr(t,o,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(a,void 0,n,{...s,...t,interpolationkey:e}):a}const a=e.split(this.formatSeparator),r=a.shift().trim(),i=a.join(this.formatSeparator).trim();return this.format(Yr(t,o,r,this.options.keySeparator,this.options.ignoreJSONStructure),i,n,{...s,...t,interpolationkey:r})};this.resetRegExp();const c=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,d=s&&s.interpolation&&void 0!==s.interpolation.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Xr(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Xr(this.escape(e)):Xr(e)}].forEach(t=>{for(i=0;a=t.regex.exec(e);){const n=a[1].trim();if(r=l(n),void 0===r)if("function"==typeof c){const t=c(e,a,s);r=xr(t)?t:""}else if(s&&Object.prototype.hasOwnProperty.call(s,n))r="";else{if(d){r=a[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),r=""}else xr(r)||this.useRawValueToEscape||(r=yr(r));const o=t.safeValue(r);if(e=e.replace(a[0],o),d?(t.regex.lastIndex+=r.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,i++,i>=this.maxReplaces)break}}),e}nest(e,t){let n,s,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const s=e.split(new RegExp(`${n}[ ]*{`));let r=`{${s[1]}`;e=s[0],r=this.interpolate(r,a);const i=r.match(/'/g),o=r.match(/"/g);(i&&i.length%2==0&&!o||o.length%2!=0)&&(r=r.replace(/'/g,'"'));try{a=JSON.parse(r),t&&(a={...t,...a})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${n}${r}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];a={...r},a=a.replace&&!xr(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map(e=>e.trim());n[1]=e.shift(),o=e,l=!0}if(s=t(i.call(this,n[1].trim(),a),a),s&&n[0]===e&&!xr(s))return s;xr(s)||(s=yr(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),l&&(s=o.reduce((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const Jr=e=>{const t={};return(n,s,a)=>{let r=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(r={...r,[a.interpolationkey]:void 0});const i=s+JSON.stringify(r);let o=t[i];return o||(o=e(Mr(s),a),t[i]=o),o(n)}};class ei{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Fr.create("formatter"),this.options=e,this.formats={number:Jr((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:Jr((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:Jr((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:Jr((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:Jr((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Jr(t)}format(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(e=>e.indexOf(")")>-1)){const e=a.findIndex(e=>e.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,e)].join(this.formatSeparator)}return a.reduce((e,t)=>{const{formatName:a,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const a=s[1].substring(0,s[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(e=>{if(e){const[t,...s]=e.split(":"),a=s.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();n[r]||(n[r]=a),"false"===a&&(n[r]=!1),"true"===a&&(n[r]=!0),isNaN(a)||(n[r]=parseInt(a,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[a]){let t=e;try{const i=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},o=i.locale||i.lng||s.locale||s.lng||n;t=this.formats[a](e,o,{...r,...s,...i})}catch(i){this.logger.warn(i)}return t}return this.logger.warn(`there was no format function for ${a}`),e},e)}}class ti extends Ir{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Fr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,s.backend,s)}queueLoad(e,t,n,s){const a={},r={},i={},o={};return e.forEach(e=>{let s=!0;t.forEach(t=>{const i=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[i]=2:this.state[i]<0||(1===this.state[i]?void 0===r[i]&&(r[i]=!0):(this.state[i]=1,s=!1,void 0===r[i]&&(r[i]=!0),void 0===a[i]&&(a[i]=!0),void 0===o[t]&&(o[t]=!0)))}),s||(i[e]=!0)}),(Object.keys(a).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(a),pending:Object.keys(r),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const s=e.split("|"),a=s[0],r=s[1];t&&this.emit("failedLoading",a,r,t),!t&&n&&this.store.addResourceBundle(a,r,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const i={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:s,k:a}=jr(e,t,Object);s[a]=s[a]||[],s[a].push(n)})(n.loaded,[a],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{i[e]||(i[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===i[e][t]&&(i[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:a,callback:r});this.readingCalls++;const i=(i,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}i&&o&&s<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,s+1,2*a,r)},a):r(i,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,i);try{const n=o(e,t);n&&"function"==typeof n.then?n.then(e=>i(null,e)).catch(i):i(null,n)}catch(l){i(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();xr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),xr(t)&&(t=[t]);const a=this.queueLoad(e,t,n,s);if(!a.toLoad.length)return a.pending.length||s(),null;a.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),s=n[0],a=n[1];this.read(s,a,"read",void 0,void 0,(n,r)=>{n&&this.logger.warn(`${t}loading namespace ${a} for language ${s} failed`,n),!n&&r&&this.logger.log(`${t}loaded namespace ${a} for language ${s}`,r),this.loaded(e,n,r)})}saveMissing(e,t,n,s,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const l={...r,isUpdate:a},c=this.backend.create.bind(this.backend);if(c.length<6)try{let a;a=5===c.length?c(e,t,n,s,l):c(e,t,n,s),a&&"function"==typeof a.then?a.then(e=>i(null,e)).catch(i):i(null,a)}catch(o){i(o)}else c(e,t,n,s,i,l)}e&&e[0]&&this.store.addResource(e[0],t,n,s)}}}const ni=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),xr(e[1])&&(t.defaultValue=e[1]),xr(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),si=e=>(xr(e.ns)&&(e.ns=[e.ns]),xr(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),xr(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),ai=()=>{};class ri extends Ir{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=si(e),this.services={},this.logger=Fr,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(xr(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=ni();this.options={...s,...this.options,...si(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?Fr.init(a(this.modules.logger),this.options):Fr.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=ei);const n=new Vr(this.options);this.store=new Or(this.options.resources,this.options);const r=this.services;r.logger=Fr,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new Qr(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(r.formatter=a(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new Zr(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new ti(a(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];e.emit(t,...s)}),this.modules.languageDetector&&(r.languageDetector=a(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=a(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new $r(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];e.emit(t,...s)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=ai),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const r=vr(),i=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?i():setTimeout(i,0),r}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ai;const n=xr(e)?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],s=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)s(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>s(e))}this.options.preload&&this.options.preload.forEach(e=>s(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,n){const s=vr();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=ai),this.services.backendConnector.reload(e,t,e=>{s.resolve(),n(e)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&zr.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=vr();this.emit("languageChanging",e);const a=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},r=(e,r)=>{r?(a(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),t&&t(e,function(){return n.t(...arguments)})},i=t=>{e||t||!this.services.languageDetector||(t=[]);const n=xr(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||a(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,e=>{r(e,n)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),s}getFixedT(e,t,n){var s=this;const a=function(e,t){let r;if("object"!=typeof t){for(var i=arguments.length,o=new Array(i>2?i-2:0),l=2;l<i;l++)o[l-2]=arguments[l];r=s.options.overloadTranslationOptionHandler([e,t].concat(o))}else r={...t};r.lng=r.lng||a.lng,r.lngs=r.lngs||a.lngs,r.ns=r.ns||a.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||a.keyPrefix);const c=s.options.keySeparator||".";let d;return d=r.keyPrefix&&Array.isArray(e)?e.map(e=>`${r.keyPrefix}${c}${e}`):r.keyPrefix?`${r.keyPrefix}${c}${e}`:e,s.t(d,r)};return xr(e)?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=n,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const r=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!r(n,e)||s&&!r(a,e)))}loadNamespaces(e,t){const n=vr();return this.options.ns?(xr(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=vr();xr(e)&&(e=[e]);const s=this.options.preload||[],a=e.filter(e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return a.length?(this.options.preload=s.concat(a),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new Vr(ni());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new ri(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ai;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},a=new ri(s);void 0===e.debug&&void 0===e.prefix||(a.logger=a.logger.clone(e));return["store","services","language"].forEach(e=>{a[e]=this[e]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n&&(a.store=new Or(this.store.data,s),a.services.resourceStore=a.store),a.translator=new $r(a.services,s),a.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];a.emit(e,...n)}),a.init(s,t),a.translator.options=s,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ii=ri.createInstance();ii.createInstance=ri.createInstance,ii.createInstance,ii.dir,ii.init,ii.loadResources,ii.reloadResources,ii.use,ii.changeLanguage,ii.getFixedT,ii.t,ii.exists,ii.setDefaultNamespace,ii.hasLoadedNamespace,ii.loadNamespaces,ii.loadLanguages;const oi={en:{translation:{common:{welcome:"Welcome",home:"Home",dashboard:"Dashboard",settings:"Settings",profile:"Profile",logout:"Logout",login:"Login",register:"Register",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",create:"Create",search:"Search",loading:"Loading...",error:"Error",success:"Success",noData:"No data available",add:"Add",items:"items",actions:"Actions",errorOccurred:"An error occurred",noItems:"No items found",comingSoon:"Coming soon",none:"None",expandMenu:"Expand menu",collapseMenu:"Collapse menu"},theme:{light:"Light",dark:"Dark",system:"System",toggle:"Toggle theme"},language:{select:"Select language",en:"English",fr:"French",es:"Spanish"},auth:{email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password?",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",logoutSuccess:"You have been logged out successfully",authenticationRequired:"Authentication Required",authenticationRequiredMessage:"You need to be logged in to access this page. Please sign in to continue.",noAccount:"Don't have an account?",signUp:"Sign up",signupComingSoon:"Sign up functionality will be available soon."},pages:{home:{title:"Welcome to Hello Ticket",subtitle:"A ticket brokerage system with best practices",getStarted:"Get Started"},dashboard:{title:"Dashboard",overview:"Overview",statistics:"Statistics"},profile:{title:"Profile",subtitle:"Manage your account information and settings",loading:"Loading your profile...",error:"Failed to load profile information",contactInfo:"Contact Information",accountInfo:"Account Information",additionalInfo:"Additional Information",email:"Email",username:"Username",userId:"User ID",role:"Role",tenantId:"Tenant ID",displayName:"Display Name",accountStatus:"Account Status",active:"Active"},login:{title:"Welcome Back",subtitle:"Sign in to your account to continue",usernameLabel:"Username or Email",usernamePlaceholder:"Enter your username or email",passwordLabel:"Password",passwordPlaceholder:"Enter your password",forgotPassword:"Forgot password?",submit:"Sign In",loggingIn:"Signing in...",noAccount:"Don't have an account?",signUp:"Sign up",success:"Login successful",successDescription:"Welcome back!",error:"Login failed",capsLockOn:"Caps Lock is on",errors:{usernameRequired:"Username or email is required",passwordRequired:"Password is required",passwordTooShort:"Password must be at least 8 characters",invalidCredentials:"Invalid username or password"}},notFound:{title:"Page Not Found",message:"The page you're looking for doesn't exist or has been moved.",goHome:"Go to Home",goBack:"Go Back"},settings:{title:"Settings",subtitle:"Manage your account settings and preferences",menu:{profile:"Profile",profileDesc:"Manage your profile information",account:"Account",accountDesc:"Manage account settings",notifications:"Notifications",notificationsDesc:"Configure notifications",appearance:"Appearance",appearanceDesc:"Customize look and feel",language:"Language",languageDesc:"Choose your language",security:"Security",securityDesc:"Password and security",companyAddresses:"Company Addresses",companyAddressesDesc:"Manage company addresses and locations"},profile:{title:"Profile Settings",description:"Update your profile information",name:"Full Name",username:"Username",email:"Email Address",bio:"Bio",bioPlaceholder:"Tell us about yourself..."},account:{title:"Account Settings",description:"Manage your account preferences",accountStatus:"Account Status",accountStatusDesc:"Your account is currently active",active:"Active",cacheManagement:"Cache Management",cacheManagementDesc:"Clear cached data and refresh application state",enableQueryCache:"Enable Query Cache",enableQueryCacheDesc:"Enable backend query result caching for faster performance",enableReactQueryCache:"Enable React Query Cache",enableReactQueryCacheDesc:"Enable frontend React Query caching for faster performance",queryCacheEnabled:"Query Cache Enabled",queryCacheEnabledDesc:"Backend query caching has been enabled",queryCacheDisabled:"Query Cache Disabled",queryCacheDisabledDesc:"Backend query caching has been disabled",reactQueryCacheEnabled:"React Query Cache Enabled",reactQueryCacheEnabledDesc:"Frontend React Query caching has been enabled",reactQueryCacheDisabled:"React Query Cache Disabled",reactQueryCacheDisabledDesc:"Frontend React Query caching has been disabled",preferenceUpdateError:"Preference Update Failed",preferenceUpdateErrorDesc:"Failed to update preference. Please try again.",clearCache:"Clear Cache",invalidateAllQueries:"Invalidate All Queries",cacheCleared:"Cache Cleared",cacheClearedDesc:"All cached data has been successfully cleared",cacheClearError:"Cache Clear Failed",cacheClearErrorDesc:"Failed to clear cache. Please try again.",queriesInvalidated:"Queries Invalidated",queriesInvalidatedDesc:"All React Query queries have been invalidated and will refetch on next access",queriesInvalidateError:"Query Invalidation Failed",queriesInvalidateErrorDesc:"Failed to invalidate queries. Please try again.",dangerZone:"Danger Zone",dangerZoneDesc:"Irreversible and destructive actions",deleteAccount:"Delete Account"},appearance:{title:"Appearance Settings",description:"Customize the look and feel of the application",themeMode:"Theme Mode",interfaceSettings:"Interface Settings",interfaceSettingsDesc:"Customize interface elements",enableTabs:"Enable Tabs",enableTabsDesc:"Show in-app tabs for multitasking and task preservation",tabPosition:"Tab Position",tabPositionSeparate:"Separate Bar",tabPositionSeparateDesc:"Tabs in their own bar below header",tabPositionInline:"Inline Header",tabPositionInlineDesc:"Tabs integrated into header for more space"},language:{title:"Language Settings",description:"Choose your preferred language"},notifications:{title:"Notification Settings",description:"Manage how you receive notifications",emailNotifications:"Email Notifications",emailNotificationsDesc:"Receive email notifications for important updates",pushNotifications:"Push Notifications",pushNotificationsDesc:"Receive push notifications in your browser",marketingEmails:"Marketing Emails",marketingEmailsDesc:"Receive emails about new features and offers",securityAlerts:"Security Alerts",securityAlertsDesc:"Get notified about security-related activities"},security:{title:"Security Settings",description:"Manage your password and security options",changePassword:"Change Password",changePasswordDesc:"Update your password regularly to keep your account secure",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm New Password",updatePassword:"Update Password",twoFactor:"Two-Factor Authentication",twoFactorDesc:"Add an extra layer of security to your account",enableTwoFactor:"Enable Two-Factor Authentication"}}}}},fr:{translation:{common:{welcome:"Bienvenue",home:"Accueil",dashboard:"Tableau de bord",settings:"Paramtres",profile:"Profil",logout:"Dconnexion",login:"Connexion",register:"S'inscrire",save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",create:"Crer",search:"Rechercher",loading:"Chargement...",error:"Erreur",success:"Succs",noData:"Aucune donne disponible",expandMenu:"Dvelopper le menu",collapseMenu:"Rduire le menu"},theme:{light:"Clair",dark:"Sombre",system:"Systme",toggle:"Changer le thme"},language:{select:"Slectionner la langue",en:"Anglais",fr:"Franais",es:"Espagnol"},auth:{email:"Email",password:"Mot de passe",confirmPassword:"Confirmer le mot de passe",forgotPassword:"Mot de passe oubli ?",dontHaveAccount:"Vous n'avez pas de compte ?",alreadyHaveAccount:"Vous avez dj un compte ?",logoutSuccess:"Vous avez t dconnect avec succs",authenticationRequired:"Authentification requise",authenticationRequiredMessage:"Vous devez tre connect pour accder  cette page. Veuillez vous connecter pour continuer.",noAccount:"Vous n'avez pas de compte ?",signUp:"S'inscrire",signupComingSoon:"La fonctionnalit d'inscription sera bientt disponible."},pages:{home:{title:"Bienvenue sur Truths",subtitle:"Une application React moderne avec les meilleures pratiques",getStarted:"Commencer"},dashboard:{title:"Tableau de bord",overview:"Aperu",statistics:"Statistiques"},profile:{title:"Profil",subtitle:"Grez les informations et les paramtres de votre compte",loading:"Chargement de votre profil...",error:"chec du chargement des informations du profil",contactInfo:"Informations de contact",accountInfo:"Informations du compte",additionalInfo:"Informations supplmentaires",email:"Email",username:"Nom d'utilisateur",userId:"ID utilisateur",role:"Rle",tenantId:"ID locataire",displayName:"Nom d'affichage",accountStatus:"Statut du compte",active:"Actif"},login:{title:"Bon retour",subtitle:"Connectez-vous  votre compte pour continuer",usernameLabel:"Nom d'utilisateur ou Email",usernamePlaceholder:"Entrez votre nom d'utilisateur ou email",passwordLabel:"Mot de passe",passwordPlaceholder:"Entrez votre mot de passe",forgotPassword:"Mot de passe oubli ?",submit:"Se connecter",loggingIn:"Connexion en cours...",noAccount:"Vous n'avez pas de compte ?",signUp:"S'inscrire",success:"Connexion russie",successDescription:"Bon retour !",error:"chec de la connexion",capsLockOn:"Vrrouillage des majuscules activ",errors:{usernameRequired:"Le nom d'utilisateur ou l'email est requis",passwordRequired:"Le mot de passe est requis",passwordTooShort:"Le mot de passe doit contenir au moins 8 caractres",invalidCredentials:"Nom d'utilisateur ou mot de passe invalide"}},notFound:{title:"Page introuvable",message:"La page que vous recherchez n'existe pas ou a t dplace.",goHome:"Aller  l'accueil",goBack:"Retour"},settings:{title:"Paramtres",subtitle:"Grez les paramtres et prfrences de votre compte",menu:{profile:"Profil",profileDesc:"Grer vos informations de profil",account:"Compte",accountDesc:"Grer les paramtres du compte",notifications:"Notifications",notificationsDesc:"Configurer les notifications",appearance:"Apparence",appearanceDesc:"Personnaliser l'apparence",language:"Langue",languageDesc:"Choisir votre langue",security:"Scurit",securityDesc:"Mot de passe et scurit",companyAddresses:"Adresses de l'entreprise",companyAddressesDesc:"Grer les adresses et emplacements de l'entreprise"},profile:{title:"Paramtres du profil",description:"Mettez  jour vos informations de profil",name:"Nom complet",username:"Nom d'utilisateur",email:"Adresse e-mail",bio:"Biographie",bioPlaceholder:"Parlez-nous de vous..."},account:{title:"Paramtres du compte",description:"Grez les prfrences de votre compte",accountStatus:"Statut du compte",accountStatusDesc:"Votre compte est actuellement actif",active:"Actif",dangerZone:"Zone dangereuse",dangerZoneDesc:"Actions irrversibles et destructrices",deleteAccount:"Supprimer le compte"},appearance:{title:"Paramtres d'apparence",description:"Personnalisez l'apparence de l'application",themeMode:"Mode thme"},language:{title:"Paramtres de langue",description:"Choisissez votre langue prfre"},notifications:{title:"Paramtres de notification",description:"Grez la faon dont vous recevez les notifications",emailNotifications:"Notifications par e-mail",emailNotificationsDesc:"Recevoir des notifications par e-mail pour les mises  jour importantes",pushNotifications:"Notifications push",pushNotificationsDesc:"Recevoir des notifications push dans votre navigateur",marketingEmails:"E-mails marketing",marketingEmailsDesc:"Recevoir des e-mails sur les nouvelles fonctionnalits et offres",securityAlerts:"Alertes de scurit",securityAlertsDesc:"tre notifi des activits lies  la scurit"},security:{title:"Paramtres de scurit",description:"Grez votre mot de passe et vos options de scurit",changePassword:"Changer le mot de passe",changePasswordDesc:"Mettez  jour votre mot de passe rgulirement pour scuriser votre compte",currentPassword:"Mot de passe actuel",newPassword:"Nouveau mot de passe",confirmPassword:"Confirmer le nouveau mot de passe",updatePassword:"Mettre  jour le mot de passe",twoFactor:"Authentification  deux facteurs",twoFactorDesc:"Ajoutez une couche de scurit supplmentaire  votre compte",enableTwoFactor:"Activer l'authentification  deux facteurs"}}}}},es:{translation:{common:{welcome:"Bienvenido",home:"Inicio",dashboard:"Panel",settings:"Configuracin",profile:"Perfil",logout:"Cerrar sesin",login:"Iniciar sesin",register:"Registrarse",save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",create:"Crear",search:"Buscar",loading:"Cargando...",error:"Error",success:"xito",noData:"No hay datos disponibles",expandMenu:"Expandir men",collapseMenu:"Contraer men"},theme:{light:"Claro",dark:"Oscuro",system:"Sistema",toggle:"Cambiar tema"},language:{select:"Seleccionar idioma",en:"Ingls",fr:"Francs",es:"Espaol"},auth:{email:"Correo electrnico",password:"Contrasea",confirmPassword:"Confirmar contrasea",forgotPassword:"Olvidaste tu contrasea?",dontHaveAccount:"No tienes una cuenta?",alreadyHaveAccount:"Ya tienes una cuenta?",logoutSuccess:"Has cerrado sesin exitosamente",authenticationRequired:"Autenticacin requerida",authenticationRequiredMessage:"Debes iniciar sesin para acceder a esta pgina. Por favor, inicia sesin para continuar.",noAccount:"No tienes una cuenta?",signUp:"Regstrate",signupComingSoon:"La funcionalidad de registro estar disponible pronto."},pages:{home:{title:"Bienvenido a Truths",subtitle:"Una aplicacin React moderna con mejores prcticas",getStarted:"Comenzar"},dashboard:{title:"Panel",overview:"Resumen",statistics:"Estadsticas"},profile:{title:"Perfil",subtitle:"Administra la informacin y configuracin de tu cuenta",loading:"Cargando tu perfil...",error:"Error al cargar la informacin del perfil",contactInfo:"Informacin de Contacto",accountInfo:"Informacin de la Cuenta",additionalInfo:"Informacin Adicional",email:"Correo electrnico",username:"Usuario",userId:"ID de usuario",role:"Rol",tenantId:"ID de inquilino",displayName:"Nombre para mostrar",accountStatus:"Estado de la cuenta",active:"Activo"},login:{title:"Bienvenido de nuevo",subtitle:"Inicia sesin en tu cuenta para continuar",usernameLabel:"Usuario o Correo electrnico",usernamePlaceholder:"Ingresa tu usuario o correo electrnico",passwordLabel:"Contrasea",passwordPlaceholder:"Ingresa tu contrasea",forgotPassword:"Olvidaste tu contrasea?",submit:"Iniciar sesin",loggingIn:"Iniciando sesin...",noAccount:"No tienes una cuenta?",signUp:"Regstrate",success:"Inicio de sesin exitoso",successDescription:"Bienvenido de nuevo!",error:"Error al iniciar sesin",capsLockOn:"Bloq Mays est activado",errors:{usernameRequired:"El usuario o correo electrnico es requerido",passwordRequired:"La contrasea es requerida",passwordTooShort:"La contrasea debe tener al menos 8 caracteres",invalidCredentials:"Usuario o contrasea invlidos"}},notFound:{title:"Pgina no encontrada",message:"La pgina que buscas no existe o ha sido movida.",goHome:"Ir al inicio",goBack:"Volver"},settings:{title:"Configuracin",subtitle:"Administra la configuracin y preferencias de tu cuenta",menu:{profile:"Perfil",profileDesc:"Administrar informacin del perfil",account:"Cuenta",accountDesc:"Administrar configuracin de cuenta",notifications:"Notificaciones",notificationsDesc:"Configurar notificaciones",appearance:"Apariencia",appearanceDesc:"Personalizar apariencia",language:"Idioma",languageDesc:"Elegir tu idioma",security:"Seguridad",securityDesc:"Contrasea y seguridad",companyAddresses:"Direcciones de la empresa",companyAddressesDesc:"Administrar direcciones y ubicaciones de la empresa"},profile:{title:"Configuracin del perfil",description:"Actualiza tu informacin de perfil",name:"Nombre completo",username:"Nombre de usuario",email:"Correo electrnico",bio:"Biografa",bioPlaceholder:"Cuntanos sobre ti..."},account:{title:"Configuracin de cuenta",description:"Administra las preferencias de tu cuenta",accountStatus:"Estado de la cuenta",accountStatusDesc:"Tu cuenta est actualmente activa",active:"Activa",dangerZone:"Zona de peligro",dangerZoneDesc:"Acciones irreversibles y destructivas",deleteAccount:"Eliminar cuenta"},appearance:{title:"Configuracin de apariencia",description:"Personaliza la apariencia de la aplicacin",themeMode:"Modo de tema"},language:{title:"Configuracin de idioma",description:"Elige tu idioma preferido"},notifications:{title:"Configuracin de notificaciones",description:"Administra cmo recibes notificaciones",emailNotifications:"Notificaciones por correo",emailNotificationsDesc:"Recibir notificaciones por correo para actualizaciones importantes",pushNotifications:"Notificaciones push",pushNotificationsDesc:"Recibir notificaciones push en tu navegador",marketingEmails:"Correos de marketing",marketingEmailsDesc:"Recibir correos sobre nuevas funciones y ofertas",securityAlerts:"Alertas de seguridad",securityAlertsDesc:"Recibir notificaciones sobre actividades de seguridad"},security:{title:"Configuracin de seguridad",description:"Administra tu contrasea y opciones de seguridad",changePassword:"Cambiar contrasea",changePasswordDesc:"Actualiza tu contrasea regularmente para mantener tu cuenta segura",currentPassword:"Contrasea actual",newPassword:"Nueva contrasea",confirmPassword:"Confirmar nueva contrasea",updatePassword:"Actualizar contrasea",twoFactor:"Autenticacin de dos factores",twoFactorDesc:"Agrega una capa adicional de seguridad a tu cuenta",enableTwoFactor:"Activar autenticacin de dos factores"}}}}}};function li({children:e}){return c.jsx(gr,{i18n:ii,children:e})}ii.use(ur).init({resources:oi,lng:Ga.get(va)||pa,fallbackLng:pa,interpolation:{escapeValue:!1}});class ci extends Error{constructor(e,t,n){super(e),this.type=t,this.lockedUntil=n,this.name="AuthenticationError"}}const di={async login(e){const t=new URLSearchParams;t.append("username",e.username),t.append("password",e.password);const n=`${ma.BASE_URL.replace(/\/$/,"")}${ma.ENDPOINTS.AUTH.LOGIN}`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!s.ok){let e,t="Login failed",n="unknown";const a=await s.text();try{const e=JSON.parse(a);t=e.detail||e.message||t}catch{t=a||t}if(t.includes("locked until")){n="locked";const s=t.match(/locked until (.+)/i);s&&(e=s[1].trim())}else n=t.toLowerCase().includes("account is inactive")||t.toLowerCase().includes("inactive")?"inactive":"invalid_credentials";throw new ci(t,n,e)}const a=await s.json();if(Ga&&"function"==typeof Ga.remove&&(Ga.remove("REACT_QUERY_OFFLINE_CACHE"),Ga.remove("app_tabs"),Ga.remove("scroll_positions")),!Ga||"function"!=typeof Ga.set)throw new Error("Storage utility is not available");return Ga.set(ga,a.access_token),Ga.set(xa,a.refresh_token),Ga.set("last_username",e.username),_a(!1),Na(),za.initialize().catch(e=>{}),a},async logout(){const e=Ga.get(xa);Ga.remove(ga),Ga.remove(xa),Ga.remove("must_change_password");const{cacheManager:t,CACHE_KEYS:n}=await Js(async()=>{const{cacheManager:e,CACHE_KEYS:t}=await Promise.resolve().then(()=>Ka);return{cacheManager:e,CACHE_KEYS:t}},void 0);t.remove(n.SESSION_CONFIG);try{const{getSessionMonitor:e}=await Js(async()=>{const{getSessionMonitor:e}=await Promise.resolve().then(()=>rL);return{getSessionMonitor:e}},void 0),t=e();t&&t.clearSessionConfigCache()}catch{}if(t.handleInvalidation({type:"invalidate",cachePattern:"auth:*"}),e)try{await Fa.post("/api/v1/auth/logout",{refresh_token:e},{requiresAuth:!1})}catch(s){}},logoutSync(){Ga.remove(ga),Ga.remove(xa),Ga.remove("must_change_password");try{const e="session:config";Ga.remove(`cache:${e}`)}catch{}},getCurrentUser:async()=>Fa.get("/api/v1/auth/me",{requiresAuth:!0}),isAuthenticated:()=>!!Ga.get(ga),getAccessToken:()=>Ga.get(ga),async refreshToken(){const e=Ga.get(xa);if(!e)throw new Error("No refresh token available");const t=await Fa.post("/api/v1/auth/refresh",{refresh_token:e},{requiresAuth:!1});return Ga.set(ga,t.access_token),Ga.set(xa,t.refresh_token),t},async changePassword(e){await Fa.post("/api/v1/auth/change-password",e,{requiresAuth:!0})},getMustChangePassword:()=>Ga.get("must_change_password")??!1,setMustChangePassword(e){Ga.set("must_change_password",e)},clearMustChangePassword(){Ga.remove("must_change_password")}};var ui,hi;function mi(e,t){return"function"==typeof e?e(t):e}function pi(e,t){return n=>{t.setState(t=>({...t,[e]:mi(n,t[e])}))}}function fi(e){return e instanceof Function}function gi(e,t,n){let s,a=[];return r=>{let i;n.key&&n.debug&&(i=Date.now());const o=e(r);if(!(o.length!==a.length||o.some((e,t)=>a[t]!==e)))return s;let l;if(a=o,n.key&&n.debug&&(l=Date.now()),s=t(...o),null==n||null==n.onChange||n.onChange(s),n.key&&n.debug&&null!=n&&n.debug()){Math.round(100*(Date.now()-i)),Math.round(100*(Date.now()-l))}return s}}function xi(e,t,n,s){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:s}}ui=di.refreshToken,hi=di.logoutSync,Ma=ui,Da=hi;const vi="debugHeaders";function yi(e,t,n){var s;let a={id:null!=(s=n.id)?s:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(a),e},getContext:()=>({table:e,header:a,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(a,e)}),a}const bi={createTable:e=>{e.getHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>{var r,i;const o=null!=(r=null==s?void 0:s.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[],l=null!=(i=null==a?void 0:a.map(e=>n.find(t=>t.id===e)).filter(Boolean))?i:[];return wi(t,[...o,...n.filter(e=>!(null!=s&&s.includes(e.id)||null!=a&&a.includes(e.id))),...l],e)},xi(e.options,vi)),e.getCenterHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>wi(t,n=n.filter(e=>!(null!=s&&s.includes(e.id)||null!=a&&a.includes(e.id))),e,"center"),xi(e.options,vi)),e.getLeftHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,s)=>{var a;return wi(t,null!=(a=null==s?void 0:s.map(e=>n.find(t=>t.id===e)).filter(Boolean))?a:[],e,"left")},xi(e.options,vi)),e.getRightHeaderGroups=gi(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,s)=>{var a;return wi(t,null!=(a=null==s?void 0:s.map(e=>n.find(t=>t.id===e)).filter(Boolean))?a:[],e,"right")},xi(e.options,vi)),e.getFooterGroups=gi(()=>[e.getHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getLeftFooterGroups=gi(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getCenterFooterGroups=gi(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getRightFooterGroups=gi(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),xi(e.options,vi)),e.getFlatHeaders=gi(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getLeftFlatHeaders=gi(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getCenterFlatHeaders=gi(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getRightFlatHeaders=gi(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),xi(e.options,vi)),e.getCenterLeafHeaders=gi(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),xi(e.options,vi)),e.getLeftLeafHeaders=gi(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),xi(e.options,vi)),e.getRightLeafHeaders=gi(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),xi(e.options,vi)),e.getLeafHeaders=gi(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var s,a,r,i,o,l;return[...null!=(s=null==(a=e[0])?void 0:a.headers)?s:[],...null!=(r=null==(i=t[0])?void 0:i.headers)?r:[],...null!=(o=null==(l=n[0])?void 0:l.headers)?o:[]].map(e=>e.getLeafHeaders()).flat()},xi(e.options,vi))}};function wi(e,t,n,s){var a,r;let i=0;const o=function(e,t){void 0===t&&(t=1),i=Math.max(i,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&o(e.columns,t+1)},0)};o(e);let l=[];const c=(e,t)=>{const a={depth:t,id:[s,`${t}`].filter(Boolean).join("_"),headers:[]},r=[];e.forEach(e=>{const i=[...r].reverse()[0];let o,l=!1;if(e.column.depth===a.depth&&e.column.parent?o=e.column.parent:(o=e.column,l=!0),i&&(null==i?void 0:i.column)===o)i.subHeaders.push(e);else{const a=yi(n,o,{id:[s,t,o.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:l,placeholderId:l?`${r.filter(e=>e.column===o).length}`:void 0,depth:t,index:r.length});a.subHeaders.push(e),r.push(a)}a.headers.push(e),e.headerGroup=a}),l.push(a),t>0&&c(r,t-1)},d=t.map((e,t)=>yi(n,e,{depth:i,index:t}));c(d,i-1),l.reverse();const u=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,s=[0];e.subHeaders&&e.subHeaders.length?(s=[],u(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:a}=e;t+=n,s.push(a)})):t=1;return n+=Math.min(...s),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return u(null!=(a=null==(r=l[0])?void 0:r.headers)?a:[]),l}const Si=(e,t,n,s,a,r,i)=>{let o={id:t,index:s,original:n,depth:a,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(o._valuesCache.hasOwnProperty(t))return o._valuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?(o._valuesCache[t]=n.accessorFn(o.original,s),o._valuesCache[t]):void 0},getUniqueValues:t=>{if(o._uniqueValuesCache.hasOwnProperty(t))return o._uniqueValuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?n.columnDef.getUniqueValues?(o._uniqueValuesCache[t]=n.columnDef.getUniqueValues(o.original,s),o._uniqueValuesCache[t]):(o._uniqueValuesCache[t]=[o.getValue(t)],o._uniqueValuesCache[t]):void 0},renderValue:t=>{var n;return null!=(n=o.getValue(t))?n:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>function(e,t){const n=[],s=e=>{e.forEach(e=>{n.push(e);const a=t(e);null!=a&&a.length&&s(a)})};return s(e),n}(o.subRows,e=>e.subRows),getParentRow:()=>o.parentId?e.getRow(o.parentId,!0):void 0,getParentRows:()=>{let e=[],t=o;for(;;){const n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:gi(()=>[e.getAllLeafColumns()],t=>t.map(t=>function(e,t,n,s){const a={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(s),renderValue:()=>{var t;return null!=(t=a.getValue())?t:e.options.renderFallbackValue},getContext:gi(()=>[e,n,t,a],(e,t,n,s)=>({table:e,column:t,row:n,cell:s,getValue:s.getValue,renderValue:s.renderValue}),xi(e.options,"debugCells"))};return e._features.forEach(s=>{null==s.createCell||s.createCell(a,n,t,e)},{}),a}(e,o,t,t.id)),xi(e.options,"debugRows")),_getAllCellsByColumnId:gi(()=>[o.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),xi(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const t=e._features[l];null==t||null==t.createRow||t.createRow(o,e)}return o},ji={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Ci=(e,t,n)=>{var s,a;const r=null==n||null==(s=n.toString())?void 0:s.toLowerCase();return Boolean(null==(a=e.getValue(t))||null==(a=a.toString())||null==(a=a.toLowerCase())?void 0:a.includes(r))};Ci.autoRemove=e=>Di(e);const ki=(e,t,n)=>{var s;return Boolean(null==(s=e.getValue(t))||null==(s=s.toString())?void 0:s.includes(n))};ki.autoRemove=e=>Di(e);const Ni=(e,t,n)=>{var s;return(null==(s=e.getValue(t))||null==(s=s.toString())?void 0:s.toLowerCase())===(null==n?void 0:n.toLowerCase())};Ni.autoRemove=e=>Di(e);const _i=(e,t,n)=>{var s;return null==(s=e.getValue(t))?void 0:s.includes(n)};_i.autoRemove=e=>Di(e);const Pi=(e,t,n)=>!n.some(n=>{var s;return!(null!=(s=e.getValue(t))&&s.includes(n))});Pi.autoRemove=e=>Di(e)||!(null!=e&&e.length);const Ei=(e,t,n)=>n.some(n=>{var s;return null==(s=e.getValue(t))?void 0:s.includes(n)});Ei.autoRemove=e=>Di(e)||!(null!=e&&e.length);const Ri=(e,t,n)=>e.getValue(t)===n;Ri.autoRemove=e=>Di(e);const Ai=(e,t,n)=>e.getValue(t)==n;Ai.autoRemove=e=>Di(e);const Ti=(e,t,n)=>{let[s,a]=n;const r=e.getValue(t);return r>=s&&r<=a};Ti.resolveFilterValue=e=>{let[t,n]=e,s="number"!=typeof t?parseFloat(t):t,a="number"!=typeof n?parseFloat(n):n,r=null===t||Number.isNaN(s)?-1/0:s,i=null===n||Number.isNaN(a)?1/0:a;if(r>i){const e=r;r=i,i=e}return[r,i]},Ti.autoRemove=e=>Di(e)||Di(e[0])&&Di(e[1]);const Mi={includesString:Ci,includesStringSensitive:ki,equalsString:Ni,arrIncludes:_i,arrIncludesAll:Pi,arrIncludesSome:Ei,equals:Ri,weakEquals:Ai,inNumberRange:Ti};function Di(e){return null==e||""===e}const Li={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:pi("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=null==n?void 0:n.getValue(e.id);return"string"==typeof s?Mi.includesString:"number"==typeof s?Mi.inNumberRange:"boolean"==typeof s||null!==s&&"object"==typeof s?Mi.equals:Array.isArray(s)?Mi.arrIncludes:Mi.weakEquals},e.getFilterFn=()=>{var n,s;return fi(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(s=t.options.filterFns)?void 0:s[e.columnDef.filterFn])?n:Mi[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,s,a;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(s=t.options.enableColumnFilters)||s)&&(null==(a=t.options.enableFilters)||a)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,s;return null!=(n=null==(s=t.getState().columnFilters)?void 0:s.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{const s=e.getFilterFn(),a=null==t?void 0:t.find(t=>t.id===e.id),r=mi(n,a?a.value:void 0);var i;if(Fi(s,r,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];const o={id:e.id,value:r};var l;return a?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?o:t))?l:[]:null!=t&&t.length?[...t,o]:[o]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var s;return null==(s=mi(t,e))?void 0:s.filter(e=>{const t=n.find(t=>t.id===e.id);if(t){if(Fi(t.getFilterFn(),e.value,t))return!1}return!0})})},e.resetColumnFilters=t=>{var n,s;e.setColumnFilters(t?[]:null!=(n=null==(s=e.initialState)?void 0:s.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Fi(e,t,n){return!(!e||!e.autoRemove)&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}const Ii={sum:(e,t,n)=>n.reduce((t,n)=>{const s=n.getValue(e);return t+("number"==typeof s?s:0)},0),min:(e,t,n)=>{let s;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(s>n||void 0===s&&n>=n)&&(s=n)}),s},max:(e,t,n)=>{let s;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(s<n||void 0===s&&n>=n)&&(s=n)}),s},extent:(e,t,n)=>{let s,a;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(void 0===s?n>=n&&(s=a=n):(s>n&&(s=n),a<n&&(a=n)))}),[s,a]},mean:(e,t)=>{let n=0,s=0;if(t.forEach(t=>{let a=t.getValue(e);null!=a&&(a=+a)>=a&&(++n,s+=a)}),n)return s/n},median:(e,t)=>{if(!t.length)return;const n=t.map(t=>t.getValue(e));if(s=n,!Array.isArray(s)||!s.every(e=>"number"==typeof e))return;var s;if(1===n.length)return n[0];const a=Math.floor(n.length/2),r=n.sort((e,t)=>e-t);return n.length%2!=0?r[a]:(r[a-1]+r[a])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},Oi={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:pi("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,s;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(s=t.options.enableGrouping)||s)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=null==n?void 0:n.getValue(e.id);return"number"==typeof s?Ii.sum:"[object Date]"===Object.prototype.toString.call(s)?Ii.extent:void 0},e.getAggregationFn=()=>{var n,s;if(!e)throw new Error;return fi(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(s=t.options.aggregationFns)?void 0:s[e.columnDef.aggregationFn])?n:Ii[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,s;e.setGrouping(t?[]:null!=(n=null==(s=e.initialState)?void 0:s.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const s=t.getColumn(n);return null!=s&&s.columnDef.getGroupingValue?(e._groupingValuesCache[n]=s.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,s)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=n.subRows)||!t.length)}}};const zi={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:pi("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=gi(e=>[Hi(t,e)],t=>t.findIndex(t=>t.id===e.id),xi(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var s;return(null==(s=Hi(t,n)[0])?void 0:s.id)===e.id},e.getIsLastColumn=n=>{var s;const a=Hi(t,n);return(null==(s=a[a.length-1])?void 0:s.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=gi(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>s=>{let a=[];if(null!=e&&e.length){const t=[...e],n=[...s];for(;n.length&&t.length;){const e=t.shift(),s=n.findIndex(t=>t.id===e);s>-1&&a.push(n.splice(s,1)[0])}a=[...a,...n]}else a=s;return function(e,t,n){if(null==t||!t.length||!n)return e;const s=e.filter(e=>!t.includes(e.id));return"remove"===n?s:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...s]}(a,t,n)},xi(e.options,"debugTable"))}},Bi={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:pi("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const s=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,a,r,i,o,l;return"right"===n?{left:(null!=(r=null==e?void 0:e.left)?r:[]).filter(e=>!(null!=s&&s.includes(e))),right:[...(null!=(i=null==e?void 0:e.right)?i:[]).filter(e=>!(null!=s&&s.includes(e))),...s]}:"left"===n?{left:[...(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=s&&s.includes(e))),...s],right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=s&&s.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=s&&s.includes(e))),right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=s&&s.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,s,a;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(s=null!=(a=t.options.enableColumnPinning)?a:t.options.enablePinning)||s)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(e=>e.id),{left:s,right:a}=t.getState().columnPinning,r=n.some(e=>null==s?void 0:s.includes(e)),i=n.some(e=>null==a?void 0:a.includes(e));return r?"left":!!i&&"right"},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();return a?null!=(n=null==(s=t.getState().columnPinning)||null==(s=s[a])?void 0:s.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=gi(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{const s=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!s.includes(e.column.id))},xi(t.options,"debugRows")),e.getLeftVisibleCells=gi(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),xi(t.options,"debugRows")),e.getRightVisibleCells=gi(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),xi(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,s;return e.setColumnPinning(t?{left:[],right:[]}:null!=(n=null==(s=e.initialState)?void 0:s.columnPinning)?n:{left:[],right:[]})},e.getIsSomeColumnsPinned=t=>{var n;const s=e.getState().columnPinning;var a,r;return t?Boolean(null==(n=s[t])?void 0:n.length):Boolean((null==(a=s.left)?void 0:a.length)||(null==(r=s.right)?void 0:r.length))},e.getLeftLeafColumns=gi(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),xi(e.options,"debugColumns")),e.getRightLeafColumns=gi(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),xi(e.options,"debugColumns")),e.getCenterLeafColumns=gi(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{const s=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!s.includes(e.id))},xi(e.options,"debugColumns"))}};const $i={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ui={getDefaultColumnDef:()=>$i,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:pi("columnSizing",e),onColumnSizingInfoChange:pi("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,s,a;const r=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:$i.minSize,null!=(s=null!=r?r:e.columnDef.size)?s:$i.size),null!=(a=e.columnDef.maxSize)?a:$i.maxSize)},e.getStart=gi(e=>[e,Hi(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),xi(t.options,"debugColumns")),e.getAfter=gi(e=>[e,Hi(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),xi(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...s}=t;return s})},e.getCanResize=()=>{var n,s;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(s=t.options.enableColumnResizing)||s)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0;const n=e=>{var s;e.subHeaders.length?e.subHeaders.forEach(n):t+=null!=(s=e.column.getSize())?s:0};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{const s=t.getColumn(e.column.id),a=null==s?void 0:s.getCanResize();return r=>{if(!s||!a)return;if(null==r.persist||r.persist(),qi(r)&&r.touches&&r.touches.length>1)return;const i=e.getSize(),o=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[s.id,s.getSize()]],l=qi(r)?Math.round(r.touches[0].clientX):r.clientX,c={},d=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var s,a;const r="rtl"===t.options.columnResizeDirection?-1:1,i=(n-(null!=(s=null==e?void 0:e.startOffset)?s:0))*r,o=Math.max(i/(null!=(a=null==e?void 0:e.startSize)?a:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;c[t]=Math.round(100*Math.max(n+n*o,0))/100}),{...e,deltaOffset:i,deltaPercentage:o}}),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing(e=>({...e,...c})))},u=e=>d("move",e),h=e=>{d("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=n||("undefined"!=typeof document?document:null);const p={moveHandler:e=>u(e.clientX),upHandler:e=>{null==m||m.removeEventListener("mousemove",p.moveHandler),null==m||m.removeEventListener("mouseup",p.upHandler),h(e.clientX)}},f={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(e.touches[0].clientX),!1),upHandler:e=>{var t;null==m||m.removeEventListener("touchmove",f.moveHandler),null==m||m.removeEventListener("touchend",f.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),h(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof Vi)return Vi;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(t){e=!1}return Vi=e,Vi}()&&{passive:!1};qi(r)?(null==m||m.addEventListener("touchmove",f.moveHandler,g),null==m||m.addEventListener("touchend",f.upHandler,g)):(null==m||m.addEventListener("mousemove",p.moveHandler,g),null==m||m.addEventListener("mouseup",p.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:l,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:s.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(n=e.initialState.columnSizingInfo)?n:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}};let Vi=null;function qi(e){return"touchstart"===e.type}function Hi(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Gi={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:pi("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();const s={...n},a=e.getPreGroupedRowModel().flatRows;return t?a.forEach(e=>{e.getCanSelect()&&(s[e.id]=!0)}):a.forEach(e=>{delete s[e.id]}),s})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const s=void 0!==t?t:!e.getIsAllPageRowsSelected(),a={...n};return e.getRowModel().rows.forEach(t=>{Ki(a,t.id,s,!0,e)}),a}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=gi(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Wi(e,n):{rows:[],flatRows:[],rowsById:{}},xi(e.options,"debugTable")),e.getFilteredSelectedRowModel=gi(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Wi(e,n):{rows:[],flatRows:[],rowsById:{}},xi(e.options,"debugTable")),e.getGroupedSelectedRowModel=gi(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Wi(e,n):{rows:[],flatRows:[],rowsById:{}},xi(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let s=Boolean(t.length&&Object.keys(n).length);return s&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(s=!1),s},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState();let s=!!t.length;return s&&t.some(e=>!n[e.id])&&(s=!1),s},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,s)=>{const a=e.getIsSelected();t.setRowSelection(r=>{var i;if(n=void 0!==n?n:!a,e.getCanSelect()&&a===n)return r;const o={...r};return Ki(o,e.id,n,null==(i=null==s?void 0:s.selectChildren)||i,t),o})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Qi(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return"some"===Yi(e,n)},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return"all"===Yi(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var s;t&&e.toggleSelected(null==(s=n.target)?void 0:s.checked)}}}},Ki=(e,t,n,s,a)=>{var r;const i=a.getRow(t,!0);n?(i.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),i.getCanSelect()&&(e[t]=!0)):delete e[t],s&&null!=(r=i.subRows)&&r.length&&i.getCanSelectSubRows()&&i.subRows.forEach(t=>Ki(e,t.id,n,s,a))};function Wi(e,t){const n=e.getState().rowSelection,s=[],a={},r=function(e,t){return e.map(e=>{var t;const i=Qi(e,n);if(i&&(s.push(e),a[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:r(e.subRows)}),i)return e}).filter(Boolean)};return{rows:r(t.rows),flatRows:s,rowsById:a}}function Qi(e,t){var n;return null!=(n=t[e.id])&&n}function Yi(e,t,n){var s;if(null==(s=e.subRows)||!s.length)return!1;let a=!0,r=!1;return e.subRows.forEach(e=>{if((!r||a)&&(e.getCanSelect()&&(Qi(e,t)?r=!0:a=!1),e.subRows&&e.subRows.length)){const n=Yi(e,t);"all"===n?r=!0:"some"===n?(r=!0,a=!1):a=!1}}),a?"all":!!r&&"some"}const Xi=/([0-9]+)/gm;function Zi(e,t){return e===t?0:e>t?1:-1}function Ji(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function eo(e,t){const n=e.split(Xi).filter(Boolean),s=t.split(Xi).filter(Boolean);for(;n.length&&s.length;){const e=n.shift(),t=s.shift(),a=parseInt(e,10),r=parseInt(t,10),i=[a,r].sort();if(isNaN(i[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(i[1]))return isNaN(a)?-1:1;if(a>r)return 1;if(r>a)return-1}}return n.length-s.length}const to={alphanumeric:(e,t,n)=>eo(Ji(e.getValue(n)).toLowerCase(),Ji(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>eo(Ji(e.getValue(n)),Ji(t.getValue(n))),text:(e,t,n)=>Zi(Ji(e.getValue(n)).toLowerCase(),Ji(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>Zi(Ji(e.getValue(n)),Ji(t.getValue(n))),datetime:(e,t,n)=>{const s=e.getValue(n),a=t.getValue(n);return s>a?1:s<a?-1:0},basic:(e,t,n)=>Zi(e.getValue(n),t.getValue(n))},no=[bi,{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:pi("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,s;const a=e.columns;return null==(n=a.length?a.some(e=>e.getIsVisible()):null==(s=t.getState().columnVisibility)?void 0:s[e.id])||n},e.getCanHide=()=>{var n,s;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(s=t.options.enableHiding)||s)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=gi(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),xi(t.options,"debugRows")),e.getVisibleCells=gi(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],xi(t.options,"debugRows"))},createTable:e=>{const t=(t,n)=>gi(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),xi(e.options,"debugColumns"));e.getVisibleFlatColumns=t(0,()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t(0,()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t(0,()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t(0,()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t(0,()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},zi,Bi,ji,Li,{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:pi("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const s=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof s||"number"==typeof s}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,s,a,r;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(s=t.options.enableGlobalFilter)||s)&&(null==(a=t.options.enableFilters)||a)&&(null==(r=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||r)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Mi.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:s}=e.options;return fi(s)?s:"auto"===s?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[s])?t:Mi[s]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:pi("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const t of n){const n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return to.datetime;if("string"==typeof n&&(s=!0,n.split(Xi).length>1))return to.alphanumeric}return s?to.text:to.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,s;if(!e)throw new Error;return fi(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(s=t.options.sortingFns)?void 0:s[e.columnDef.sortingFn])?n:to[e.columnDef.sortingFn]},e.toggleSorting=(n,s)=>{const a=e.getNextSortingOrder(),r=null!=n;t.setSorting(i=>{const o=null==i?void 0:i.find(t=>t.id===e.id),l=null==i?void 0:i.findIndex(t=>t.id===e.id);let c,d=[],u=r?n:"desc"===a;var h;(c=null!=i&&i.length&&e.getCanMultiSort()&&s?o?"toggle":"add":null!=i&&i.length&&l!==i.length-1?"replace":o?"toggle":"replace","toggle"===c&&(r||a||(c="remove")),"add"===c)?(d=[...i,{id:e.id,desc:u}],d.splice(0,d.length-(null!=(h=t.options.maxMultiSortColCount)?h:Number.MAX_SAFE_INTEGER))):d="toggle"===c?i.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===c?i.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return d})},e.getFirstSortDir=()=>{var n,s;return(null!=(n=null!=(s=e.columnDef.sortDescFirst)?s:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var s,a;const r=e.getFirstSortDir(),i=e.getIsSorted();return i?!!(i===r||null!=(s=t.options.enableSortingRemoval)&&!s||n&&null!=(a=t.options.enableMultiRemove)&&!a)&&("desc"===i?"asc":"desc"):r},e.getCanSort=()=>{var n,s;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(s=t.options.enableSorting)||s)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,s;return null!=(n=null!=(s=e.columnDef.enableMultiSort)?s:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const s=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!s&&(s.desc?"desc":"asc")},e.getSortIndex=()=>{var n,s;return null!=(n=null==(s=t.getState().sorting)?void 0:s.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return s=>{n&&(null==s.persist||s.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(s))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,s;e.setSorting(t?[]:null!=(n=null==(s=e.initialState)?void 0:s.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Oi,{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:pi("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var s,a;if(t){if(null!=(s=null!=(a=e.options.autoResetAll)?a:e.options.autoResetExpanded)?s:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}}else e._queue(()=>{t=!0})},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,s;e.setExpanded(t?{}:null!=(n=null==(s=e.initialState)?void 0:s.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{const t=e.getState().expanded;return"boolean"==typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some(e=>!e.getIsExpanded())},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{const n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(s=>{var a;const r=!0===s||!(null==s||!s[e.id]);let i={};if(!0===s?Object.keys(t.getRowModel().rowsById).forEach(e=>{i[e]=!0}):i=s,n=null!=(a=n)?a:!r,!r&&n)return{...i,[e.id]:!0};if(r&&!n){const{[e.id]:t,...n}=i;return n}return s})},e.getIsExpanded=()=>{var n;const s=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===s||(null==s?void 0:s[e.id]))},e.getCanExpand=()=>{var n,s,a;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(s=t.options.enableExpanding)||s)&&!(null==(a=e.subRows)||!a.length)},e.getIsAllParentsExpanded=()=>{let n=!0,s=e;for(;n&&s.parentId;)s=t.getRow(s.parentId,!0),n=s.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:pi("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var s,a;if(t){if(null!=(s=null!=(a=e.options.autoResetAll)?a:e.options.autoResetPageIndex)?s:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}}else e._queue(()=>{t=!0})},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>mi(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(n=e.initialState.pagination)?n:{pageIndex:0,pageSize:10})},e.setPageIndex=t=>{e.setPagination(n=>{let s=mi(t,n.pageIndex);const a=void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,a)),{...n,pageIndex:s}})},e.resetPageIndex=t=>{var n,s;e.setPageIndex(t?0:null!=(n=null==(s=e.initialState)||null==(s=s.pagination)?void 0:s.pageIndex)?n:0)},e.resetPageSize=t=>{var n,s;e.setPageSize(t?10:null!=(n=null==(s=e.initialState)||null==(s=s.pagination)?void 0:s.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{const n=Math.max(1,mi(t,e.pageSize)),s=e.pageSize*e.pageIndex,a=Math.floor(s/n);return{...e,pageIndex:a,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var s;let a=mi(t,null!=(s=e.options.pageCount)?s:-1);return"number"==typeof a&&(a=Math.max(-1,a)),{...n,pageCount:a}}),e.getPageOptions=gi(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map((e,t)=>t)),t},xi(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return-1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:{top:[],bottom:[]},...e}),getDefaultOptions:e=>({onRowPinningChange:pi("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,s,a)=>{const r=s?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],i=a?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],o=new Set([...i,e.id,...r]);t.setRowPinning(e=>{var t,s,a,r,i,l;return"bottom"===n?{top:(null!=(a=null==e?void 0:e.top)?a:[]).filter(e=>!(null!=o&&o.has(e))),bottom:[...(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)]}:"top"===n?{top:[...(null!=(i=null==e?void 0:e.top)?i:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)],bottom:(null!=(l=null==e?void 0:e.bottom)?l:[]).filter(e=>!(null!=o&&o.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=o&&o.has(e))),bottom:(null!=(s=null==e?void 0:e.bottom)?s:[]).filter(e=>!(null!=o&&o.has(e)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=t.options;return"function"==typeof s?s(e):null==(n=null!=s?s:a)||n},e.getIsPinned=()=>{const n=[e.id],{top:s,bottom:a}=t.getState().rowPinning,r=n.some(e=>null==s?void 0:s.includes(e)),i=n.some(e=>null==a?void 0:a.includes(e));return r?"top":!!i&&"bottom"},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();if(!a)return-1;const r=null==(n="top"===a?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(s=null==r?void 0:r.indexOf(e.id))?s:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,s;return e.setRowPinning(t?{top:[],bottom:[]}:null!=(n=null==(s=e.initialState)?void 0:s.rowPinning)?n:{top:[],bottom:[]})},e.getIsSomeRowsPinned=t=>{var n;const s=e.getState().rowPinning;var a,r;return t?Boolean(null==(n=s[t])?void 0:n.length):Boolean((null==(a=s.top)?void 0:a.length)||(null==(r=s.bottom)?void 0:r.length))},e._getPinnedRows=(t,n,s)=>{var a;return(null==(a=e.options.keepPinnedRows)||a?(null!=n?n:[]).map(t=>{const n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:s}))},e.getTopRows=gi(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),xi(e.options,"debugRows")),e.getBottomRows=gi(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),xi(e.options,"debugRows")),e.getCenterRows=gi(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{const s=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!s.has(e.id))},xi(e.options,"debugRows"))}},Gi,Ui];function so(e){var t,n;const s=[...no,...null!=(t=e._features)?t:[]];let a={_features:s};const r=a._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(a)),{});let i={...null!=(n=e.initialState)?n:{}};a._features.forEach(e=>{var t;i=null!=(t=null==e.getInitialState?void 0:e.getInitialState(i))?t:i});const o=[];let l=!1;const c={_features:s,options:{...r,...e},initialState:i,_queue:e=>{o.push(e),l||(l=!0,Promise.resolve().then(()=>{for(;o.length;)o.shift()();l=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{a.setState(a.initialState)},setOptions:e=>{const t=mi(e,a.options);var n;a.options=(n=t,a.options.mergeOptions?a.options.mergeOptions(r,n):{...r,...n})},getState:()=>a.options.state,setState:e=>{null==a.options.onStateChange||a.options.onStateChange(e)},_getRowId:(e,t,n)=>{var s;return null!=(s=null==a.options.getRowId?void 0:a.options.getRowId(e,t,n))?s:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?a.getPrePaginationRowModel():a.getRowModel()).rowsById[e];if(!n&&(n=a.getCoreRowModel().rowsById[e],!n))throw new Error;return n},_getDefaultColumnDef:gi(()=>[a.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...a._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},xi(e,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:gi(()=>[a._getColumnDefs()],e=>{const t=function(e,n,s){return void 0===s&&(s=0),e.map(e=>{const r=function(e,t,n,s){var a,r;const i={...e._getDefaultColumnDef(),...t},o=i.accessorKey;let l,c=null!=(a=null!=(r=i.id)?r:o?"function"==typeof String.prototype.replaceAll?o.replaceAll(".","_"):o.replace(/\./g,"_"):void 0)?a:"string"==typeof i.header?i.header:void 0;if(i.accessorFn?l=i.accessorFn:o&&(l=o.includes(".")?e=>{let t=e;for(const s of o.split(".")){var n;t=null==(n=t)?void 0:n[s]}return t}:e=>e[i.accessorKey]),!c)throw new Error;let d={id:`${String(c)}`,accessorFn:l,parent:s,depth:n,columnDef:i,columns:[],getFlatColumns:gi(()=>[!0],()=>{var e;return[d,...null==(e=d.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},xi(e.options,"debugColumns")),getLeafColumns:gi(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=d.columns)&&t.length?e(d.columns.flatMap(e=>e.getLeafColumns())):[d]},xi(e.options,"debugColumns"))};for(const u of e._features)null==u.createColumn||u.createColumn(d,e);return d}(a,e,s,n),i=e;return r.columns=i.columns?t(i.columns,r,s+1):[],r})};return t(e)},xi(e,"debugColumns")),getAllFlatColumns:gi(()=>[a.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),xi(e,"debugColumns")),_getAllFlatColumnsById:gi(()=>[a.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),xi(e,"debugColumns")),getAllLeafColumns:gi(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),xi(e,"debugColumns")),getColumn:e=>a._getAllFlatColumnsById()[e]};Object.assign(a,c);for(let d=0;d<a._features.length;d++){const e=a._features[d];null==e||null==e.createTable||e.createTable(a)}return a}function ao(e,t,n){return n.options.filterFromLeafRows?function(e,t,n){var s;const a=[],r={},i=null!=(s=n.options.maxLeafRowFilterDepth)?s:100,o=function(e,s){void 0===s&&(s=0);const l=[];for(let d=0;d<e.length;d++){var c;let u=e[d];const h=Si(n,u.id,u.original,u.index,u.depth,0,u.parentId);if(h.columnFilters=u.columnFilters,null!=(c=u.subRows)&&c.length&&s<i){if(h.subRows=o(u.subRows,s+1),u=h,t(u)&&!h.subRows.length){l.push(u),r[u.id]=u,a.push(u);continue}if(t(u)||h.subRows.length){l.push(u),r[u.id]=u,a.push(u);continue}}else u=h,t(u)&&(l.push(u),r[u.id]=u,a.push(u))}return l};return{rows:o(e),flatRows:a,rowsById:r}}(e,t,n):function(e,t,n){var s;const a=[],r={},i=null!=(s=n.options.maxLeafRowFilterDepth)?s:100,o=function(e,s){void 0===s&&(s=0);const l=[];for(let d=0;d<e.length;d++){let u=e[d];if(t(u)){var c;if(null!=(c=u.subRows)&&c.length&&s<i){const e=Si(n,u.id,u.original,u.index,u.depth,0,u.parentId);e.subRows=o(u.subRows,s+1),u=e}l.push(u),a.push(u),r[u.id]=u}}return l};return{rows:o(e),flatRows:a,rowsById:r}}(e,t,n)}function ro(e,t){return e?function(e){return"function"==typeof e&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}(n=e)||"function"==typeof n||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(n)?p.createElement(e,t):e:null;var n}function io(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=io(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function oo(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=io(e))&&(s&&(s+=" "),s+=t);return s}const lo=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,co=oo,uo=(e,t)=>n=>{var s;if(null==(null==t?void 0:t.variants))return co(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:a,defaultVariants:r}=t,i=Object.keys(a).map(e=>{const t=null==n?void 0:n[e],s=null==r?void 0:r[e];if(null===t)return null;const i=lo(t)||lo(s);return a[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,s]=t;return void 0===s||(e[n]=s),e},{}),l=null==t||null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:n,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...r,...o}[t]):{...r,...o}[t]===n})?[...e,n,s]:e},[]);return co(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},ho=e=>{const t=go(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),mo(n,t)||fo(e)},getConflictingClassGroupIds:(e,t)=>{const a=n[e]||[];return t&&s[e]?[...a,...s[e]]:a}}},mo=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?mo(e.slice(1),s):void 0;if(a)return a;if(0===t.validators.length)return;const r=e.join("-");return t.validators.find(({validator:e})=>e(r))?.classGroupId},po=/^\[(.+)\]$/,fo=e=>{if(po.test(e)){const t=po.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},go=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return bo(Object.entries(e.classGroups),n).forEach(([e,n])=>{xo(n,s,e,t)}),s},xo=(e,t,n,s)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:vo(t,e)).classGroupId=n)}if("function"==typeof e)return yo(e)?void xo(e(s),t,n,s):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,a])=>{xo(a,vo(t,e),n,s)})})},vo=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},yo=e=>e.isThemeGetter,bo=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,wo=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(a,r)=>{n.set(a,r),t++,t>e&&(t=0,s=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=s.get(e))?(a(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):a(e,t)}}},So=e=>{const{separator:t,experimentalParseClassName:n}=e,s=1===t.length,a=t[0],r=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(s||e.slice(u,u+r)===t)){n.push(e.slice(l,u)),l=u+r;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:n,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},jo=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Co=/\s+/;function ko(){let e,t,n=0,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=No(e))&&(s&&(s+=" "),s+=t);return s}const No=e=>{if("string"==typeof e)return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=No(e[s]))&&(n&&(n+=" "),n+=t);return n};function _o(e,...t){let n,s,a,r=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:wo(e.cacheSize),parseClassName:So(e),...ho(e)}))(l),s=n.cache.get,a=n.cache.set,r=i,i(o)};function i(e){const t=s(e);if(t)return t;const r=((e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=t,r=[],i=e.trim().split(Co);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=n(e);let h=Boolean(u),m=s(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=s(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=jo(t).join(":"),f=c?p+"!":p,g=f+m;if(r.includes(g))continue;r.push(g);const x=a(m,h);for(let n=0;n<x.length;++n){const e=x[n];r.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return a(e,r),r}return function(){return r(ko.apply(null,arguments))}}const Po=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Eo=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ro=/^\d+\/\d+$/,Ao=new Set(["px","full","screen"]),To=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Mo=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Do=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Lo=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Io=e=>zo(e)||Ao.has(e)||Ro.test(e),Oo=e=>Zo(e,"length",Jo),zo=e=>Boolean(e)&&!Number.isNaN(Number(e)),Bo=e=>Zo(e,"number",zo),$o=e=>Boolean(e)&&Number.isInteger(Number(e)),Uo=e=>e.endsWith("%")&&zo(e.slice(0,-1)),Vo=e=>Eo.test(e),qo=e=>To.test(e),Ho=new Set(["length","size","percentage"]),Go=e=>Zo(e,Ho,el),Ko=e=>Zo(e,"position",el),Wo=new Set(["image","url"]),Qo=e=>Zo(e,Wo,nl),Yo=e=>Zo(e,"",tl),Xo=()=>!0,Zo=(e,t,n)=>{const s=Eo.exec(e);return!!s&&(s[1]?"string"==typeof t?s[1]===t:t.has(s[1]):n(s[2]))},Jo=e=>Mo.test(e)&&!Do.test(e),el=()=>!1,tl=e=>Lo.test(e),nl=e=>Fo.test(e),sl=_o(()=>{const e=Po("colors"),t=Po("spacing"),n=Po("blur"),s=Po("brightness"),a=Po("borderColor"),r=Po("borderRadius"),i=Po("borderSpacing"),o=Po("borderWidth"),l=Po("contrast"),c=Po("grayscale"),d=Po("hueRotate"),u=Po("invert"),h=Po("gap"),m=Po("gradientColorStops"),p=Po("gradientColorStopPositions"),f=Po("inset"),g=Po("margin"),x=Po("opacity"),v=Po("padding"),y=Po("saturate"),b=Po("scale"),w=Po("sepia"),S=Po("skew"),j=Po("space"),C=Po("translate"),k=()=>["auto",Vo,t],N=()=>[Vo,t],_=()=>["",Io,Oo],P=()=>["auto",zo,Vo],E=()=>["","0",Vo],R=()=>[zo,Vo];return{cacheSize:500,separator:":",theme:{colors:[Xo],spacing:[Io,Oo],blur:["none","",qo,Vo],brightness:R(),borderColor:[e],borderRadius:["none","","full",qo,Vo],borderSpacing:N(),borderWidth:_(),contrast:R(),grayscale:E(),hueRotate:R(),invert:E(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[Uo,Oo],inset:k(),margin:k(),opacity:R(),padding:N(),saturate:R(),scale:R(),sepia:E(),skew:R(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Vo]}],container:["container"],columns:[{columns:[qo]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Vo]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$o,Vo]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Vo]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",$o,Vo]}],"grid-cols":[{"grid-cols":[Xo]}],"col-start-end":[{col:["auto",{span:["full",$o,Vo]},Vo]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Xo]}],"row-start-end":[{row:["auto",{span:[$o,Vo]},Vo]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Vo]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Vo]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Vo,t]}],"min-w":[{"min-w":[Vo,t,"min","max","fit"]}],"max-w":[{"max-w":[Vo,t,"none","full","min","max","fit","prose",{screen:[qo]},qo]}],h:[{h:[Vo,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Vo,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Vo,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Vo,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qo,Oo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Bo]}],"font-family":[{font:[Xo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Vo]}],"line-clamp":[{"line-clamp":["none",zo,Bo]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Io,Vo]}],"list-image":[{"list-image":["none",Vo]}],"list-style-type":[{list:["none","disc","decimal",Vo]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Io,Oo]}],"underline-offset":[{"underline-offset":["auto",Io,Vo]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vo]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vo]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ko]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Go]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Qo]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Io,Vo]}],"outline-w":[{outline:[Io,Oo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Io,Oo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qo,Yo]}],"shadow-color":[{shadow:[Xo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",qo,Vo]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Vo]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",Vo]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",Vo]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[$o,Vo]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Vo]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vo]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vo]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Io,Oo,Bo]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function al(...e){return sl(oo(e))}const rl=uo("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});p.forwardRef(({className:e,variant:t,...n},s)=>c.jsx("div",{ref:s,role:"alert",className:al(rl({variant:t}),e),...n})).displayName="Alert";p.forwardRef(({className:e,...t},n)=>c.jsx("h5",{ref:n,className:al("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";function il(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function ol(...e){return t=>{let n=!1;const s=e.map(e=>{const s=il(e,t);return n||"function"!=typeof s||(n=!0),s});if(n)return()=>{for(let t=0;t<s.length;t++){const n=s[t];"function"==typeof n?n():il(e[t],null)}}}}function ll(...e){return p.useCallback(ol(...e),e)}p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("text-sm [&_p]:leading-relaxed",e),...t})).displayName="AlertDescription";var cl=Symbol.for("react.lazy"),dl=g[" use ".trim().toString()];function ul(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===cl&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function hl(e){const t=pl(e),n=p.forwardRef((e,n)=>{let{children:s,...a}=e;ul(s)&&"function"==typeof dl&&(s=dl(s._payload));const r=p.Children.toArray(s),i=r.find(gl);if(i){const e=i.props.children,s=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...a,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,s):null})}return c.jsx(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}var ml=hl("Slot");function pl(e){const t=p.forwardRef((e,t)=>{let{children:n,...s}=e;if(ul(n)&&"function"==typeof dl&&(n=dl(n._payload)),p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const s in t){const a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==p.Fragment&&(a.ref=t?ol(t,e):e),p.cloneElement(n,a)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fl=Symbol("radix.slottable");function gl(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===fl}const xl=uo("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),vl=p.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},r)=>{const i=function(){let e=null;try{const t=require("@truths/utils");t&&t.useDensityStyles&&(e=t.useDensityStyles())}catch{}return e}(),o=s?ml:"button";let l="";return i&&("default"===n||void 0===n?l=i.buttonHeight:"sm"===n?l=i.buttonHeightSmall:"icon"===n&&(l=i.buttonHeight)),c.jsx(o,{className:al(xl({variant:t,size:n}),l&&"[&]:h-auto",l,e),ref:r,...a})});function yl(){let e=null;try{const t=require("@truths/utils");t&&"function"==typeof t.useDensityStyles&&(e=t.useDensityStyles())}catch{}return e}vl.displayName="Button";const bl=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("rounded-lg border bg-card text-card-foreground shadow-sm transition-shadow",e),...t}));bl.displayName="Card";const wl=p.forwardRef(({className:e,...t},n)=>{const s=yl(),a=s?.paddingCardHeader||"p-6";return c.jsx("div",{ref:n,className:al("flex flex-col space-y-1.5",a,e),...t})});wl.displayName="CardHeader";const Sl=p.forwardRef(({className:e,...t},n)=>{const s=yl(),a=s?.textSizeCardTitle||"text-2xl";return c.jsx("h3",{ref:n,className:al("font-semibold leading-none tracking-tight",a,e),...t})});Sl.displayName="CardTitle";const jl=p.forwardRef(({className:e,...t},n)=>{const s=yl(),a=s?.textSizeCardDescription||"text-sm";return c.jsx("p",{ref:n,className:al("text-muted-foreground",a,e),...t})});jl.displayName="CardDescription";const Cl=p.forwardRef(({className:e,...t},n)=>{const s=yl(),a=s?.paddingCardContent||"p-6 pt-0";return c.jsx("div",{ref:n,className:al(a,e),...t})});Cl.displayName="CardContent";p.forwardRef(({className:e,...t},n)=>{const s=yl(),a=s?.paddingCardFooter||"p-6 pt-0";return c.jsx("div",{ref:n,className:al("flex items-center",a,e),...t})}).displayName="CardFooter";const kl=p.forwardRef(({className:e,type:t,...n},s)=>{const a=function(){let e=null;try{const t=require("@truths/utils");t&&t.useDensityStyles&&(e=t.useDensityStyles())}catch{}return e}(),r=a?.inputHeight||"h-10",i=a?.textSize||"text-sm";return c.jsx("input",{type:t,className:al("flex w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:font-medium placeholder:text-muted-foreground placeholder:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",r,i,"file:text-sm",e),ref:s,...n})});kl.displayName="Input";p.forwardRef(({className:e,children:t,orientation:n,...s},a)=>{const r="vertical"===n||p.Children.toArray(t).some(e=>{if(p.isValidElement(e)){const t=e.type;return"InputGroupTextarea"===("object"==typeof t&&null!==t?t?.displayName:null)||e.props?.children&&p.isValidElement(e.props.children)&&"textarea"===e.props.children.type}return!1});return c.jsx("div",{ref:a,className:al("flex border rounded-md overflow-hidden",r?"flex-col":"items-center",e),...s,children:t})}).displayName="InputGroup";p.forwardRef(({className:e,...t},n)=>c.jsx("input",{ref:n,className:al("flex h-10 flex-1 border-0 bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),...t})).displayName="InputGroupInput";p.forwardRef(({className:e,align:t="start",...n},s)=>{const a="block-end"===t,r="end"===t||"inline-end"===t;return c.jsx("div",{ref:s,className:al("flex items-center px-3 py-2 text-sm text-muted-foreground bg-muted/50",a?"border-t w-full":r?"border-l":"border-r",e),...n})}).displayName="InputGroupAddon";p.forwardRef(({className:e,...t},n)=>c.jsx("span",{ref:n,className:al("text-sm text-muted-foreground",e),...t})).displayName="InputGroupText";p.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{ref:n,className:al("flex min-h-[80px] w-full flex-1 border-0 bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 resize-none",e),...t})).displayName="InputGroupTextarea";var Nl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=hl(`Primitive.${t}`),s=p.forwardRef((e,s)=>{const{asChild:a,...r}=e,i=a?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),_l=p.forwardRef((e,t)=>c.jsx(Nl.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));_l.displayName="Label";var Pl=_l;const El=p.forwardRef(({className:e,"data-invalid":t,...n},s)=>c.jsx("div",{ref:s,"data-invalid":t,className:al("space-y-2",e),...n}));El.displayName="Field";p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("space-y-4",e),...t})).displayName="FieldGroup";const Rl=p.forwardRef(({className:e,...t},n)=>c.jsx(Pl,{ref:n,className:al("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));Rl.displayName="FieldLabel";p.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:al("text-sm text-muted-foreground",e),...t})).displayName="FieldDescription";const Al=p.forwardRef(({className:e,errors:t,children:n,...s},a)=>{if(!t&&!n)return null;const r=t?t.map(e=>"string"==typeof e?e:e?.message||""):[];return 0!==r.length||n?c.jsx("p",{ref:a,className:al("text-sm font-medium text-destructive",e),...s,children:n||r.join(", ")}):null});Al.displayName="FieldError";const Tl=p.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{className:al("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Tl.displayName="Textarea";const Ml=uo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Dl=p.forwardRef(({className:e,...t},n)=>c.jsx(Pl,{ref:n,className:al(Ml(),e),...t}));Dl.displayName=Pl.displayName;const Ll=({onSubmit:e,children:t,...n})=>c.jsx("form",{onSubmit:e,...n,children:t}),Fl=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("space-y-2",e),...t}));Fl.displayName="FormItem";const Il=p.forwardRef(({className:e,...t},n)=>c.jsx(Pl,{ref:n,className:al("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));Il.displayName="FormLabel";const Ol=p.forwardRef(({...e},t)=>c.jsx("div",{ref:t,...e}));Ol.displayName="FormControl";const zl=p.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:al("text-sm text-muted-foreground",e),...t}));zl.displayName="FormDescription";const Bl=p.forwardRef(({className:e,children:t,...n},s)=>t?c.jsx("p",{ref:s,className:al("text-sm font-medium text-destructive",e),...n,children:t}):null);function $l(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ul(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),!1===n||!s.defaultPrevented)return t?.(s)}}function Vl(e,t=[]){let n=[];const s=()=>{const t=n.map(e=>p.createContext(e));return function(n){const s=n?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...n,[e]:s}}),[n,s])}};return s.scopeName=e,[function(t,s){const a=p.createContext(s),r=n.length;n=[...n,s];const i=t=>{const{scope:n,children:s,...i}=t,o=n?.[e]?.[r]||a,l=p.useMemo(()=>i,Object.values(i));return c.jsx(o.Provider,{value:l,children:s})};return i.displayName=t+"Provider",[i,function(n,i){const o=i?.[e]?.[r]||a,l=p.useContext(o);if(l)return l;if(void 0!==s)return s;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},ql(s,...t)]}function ql(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const s=n.reduce((t,{useScope:n,scopeName:s})=>({...t,...n(e)[`__scope${s}`]}),{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function Hl(e){const t=Gl(e),n=p.forwardRef((e,n)=>{const{children:s,...a}=e,r=p.Children.toArray(s),i=r.find(Wl);if(i){const e=i.props.children,s=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...a,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,s):null})}return c.jsx(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}function Gl(e){const t=p.forwardRef((e,t)=>{const{children:n,...s}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const s in t){const a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==p.Fragment&&(a.ref=t?ol(t,e):e),p.cloneElement(n,a)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Bl.displayName="FormMessage";var Kl=Symbol("radix.slottable");function Wl(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Kl}function Ql(e){const t=e+"CollectionProvider",[n,s]=Vl(t),[a,r]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:n}=e,s=f.useRef(null),r=f.useRef(new Map).current;return c.jsx(a,{scope:t,itemMap:r,collectionRef:s,children:n})};i.displayName=t;const o=e+"CollectionSlot",l=Hl(o),d=f.forwardRef((e,t)=>{const{scope:n,children:s}=e,a=ll(t,r(o,n).collectionRef);return c.jsx(l,{ref:a,children:s})});d.displayName=o;const u=e+"CollectionItemSlot",h="data-radix-collection-item",m=Hl(u),p=f.forwardRef((e,t)=>{const{scope:n,children:s,...a}=e,i=f.useRef(null),o=ll(t,i),l=r(u,n);return f.useEffect(()=>(l.itemMap.set(i,{ref:i,...a}),()=>{l.itemMap.delete(i)})),c.jsx(m,{[h]:"",ref:o,children:s})});return p.displayName=u,[{Provider:i,Slot:d,ItemSlot:p},function(t){const n=r(e+"CollectionConsumer",t);return f.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},s]}var Yl=p.createContext(void 0);function Xl(e){const t=p.useContext(Yl);return e||t||"ltr"}function Zl(e){const t=Jl(e),n=p.forwardRef((e,n)=>{const{children:s,...a}=e,r=p.Children.toArray(s),i=r.find(tc);if(i){const e=i.props.children,s=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...a,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,s):null})}return c.jsx(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}function Jl(e){const t=p.forwardRef((e,t)=>{const{children:n,...s}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const s in t){const a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==p.Fragment&&(a.ref=t?ol(t,e):e),p.cloneElement(n,a)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ec=Symbol("radix.slottable");function tc(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ec}var nc=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=Zl(`Primitive.${t}`),s=p.forwardRef((e,s)=>{const{asChild:a,...r}=e,i=a?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function sc(e,t){e&&Zt.flushSync(()=>e.dispatchEvent(t))}function ac(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...e)=>t.current?.(...e),[])}var rc,ic="dismissableLayer.update",oc="dismissableLayer.pointerDownOutside",lc="dismissableLayer.focusOutside",cc=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:r,onInteractOutside:i,onDismiss:o,...l}=e,d=p.useContext(cc),[u,h]=p.useState(null),m=u?.ownerDocument??globalThis?.document,[,f]=p.useState({}),g=ll(t,e=>h(e)),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),b=u?x.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,j=function(e,t=globalThis?.document){const n=ac(e),s=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const e=e=>{if(e.target&&!s.current){let s=function(){mc(oc,n,r,{discrete:!0})};const r={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=s,t.addEventListener("click",a.current,{once:!0})):s()}else t.removeEventListener("click",a.current);s.current=!1},r=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}(e=>{const t=e.target,n=[...d.branches].some(e=>e.contains(t));S&&!n&&(a?.(e),i?.(e),e.defaultPrevented||o?.())},m),C=function(e,t=globalThis?.document){const n=ac(e),s=p.useRef(!1);return p.useEffect(()=>{const e=e=>{if(e.target&&!s.current){mc(lc,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(r?.(e),i?.(e),e.defaultPrevented||o?.())},m);return function(e,t=globalThis?.document){const n=ac(e);p.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{b===d.layers.size-1&&(s?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},m),p.useEffect(()=>{if(u)return n&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(rc=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),hc(),()=>{n&&1===d.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=rc)}},[u,m,n,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),hc())},[u,d]),p.useEffect(()=>{const e=()=>f({});return document.addEventListener(ic,e),()=>document.removeEventListener(ic,e)},[]),c.jsx(nc.div,{...l,ref:g,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:Ul(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Ul(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ul(e.onPointerDownCapture,j.onPointerDownCapture)})});dc.displayName="DismissableLayer";var uc=p.forwardRef((e,t)=>{const n=p.useContext(cc),s=p.useRef(null),a=ll(t,s);return p.useEffect(()=>{const e=s.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),c.jsx(nc.div,{...e,ref:a})});function hc(){const e=new CustomEvent(ic);document.dispatchEvent(e)}function mc(e,t,n,{discrete:s}){const a=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?sc(a,r):a.dispatchEvent(r)}uc.displayName="DismissableLayerBranch";var pc=dc,fc=uc,gc=0;function xc(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??vc()),document.body.insertAdjacentElement("beforeend",e[1]??vc()),gc++,()=>{1===gc&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),gc--}},[])}function vc(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var yc="focusScope.autoFocusOnMount",bc="focusScope.autoFocusOnUnmount",wc={bubbles:!1,cancelable:!0},Sc=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:r,...i}=e,[o,l]=p.useState(null),d=ac(a),u=ac(r),h=p.useRef(null),m=ll(t,e=>l(e)),f=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(s){let e=function(e){if(f.paused||!o)return;const t=e.target;o.contains(t)?h.current=t:Nc(h.current,{select:!0})},t=function(e){if(f.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||Nc(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Nc(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const s=new MutationObserver(n);return o&&s.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),s.disconnect()}}},[s,o,f.paused]),p.useEffect(()=>{if(o){_c.add(f);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(yc,wc);o.addEventListener(yc,d),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Nc(s,{select:t}),document.activeElement!==n)return}((e=jc(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Nc(o))}return()=>{o.removeEventListener(yc,d),setTimeout(()=>{const e=new CustomEvent(bc,wc);o.addEventListener(bc,u),o.dispatchEvent(e),e.defaultPrevented||Nc(t??document.body,{select:!0}),o.removeEventListener(bc,u),_c.remove(f)},0)}}var e},[o,d,u,f]);const g=p.useCallback(e=>{if(!n&&!s)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){const t=e.currentTarget,[s,r]=function(e){const t=jc(e),n=Cc(t,e),s=Cc(t.reverse(),e);return[n,s]}(t);s&&r?e.shiftKey||a!==r?e.shiftKey&&a===s&&(e.preventDefault(),n&&Nc(r,{select:!0})):(e.preventDefault(),n&&Nc(s,{select:!0})):a===t&&e.preventDefault()}},[n,s,f.paused]);return c.jsx(nc.div,{tabIndex:-1,...i,ref:m,onKeyDown:g})});function jc(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Cc(e,t){for(const n of e)if(!kc(n,{upTo:t}))return n}function kc(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Nc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Sc.displayName="FocusScope";var _c=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=Pc(e,t),e.unshift(t)},remove(t){e=Pc(e,t),e[0]?.resume()}}}();function Pc(e,t){const n=[...e],s=n.indexOf(t);return-1!==s&&n.splice(s,1),n}var Ec=globalThis?.document?p.useLayoutEffect:()=>{},Rc=g[" useId ".trim().toString()]||(()=>{}),Ac=0;function Tc(e){const[t,n]=p.useState(Rc());return Ec(()=>{n(e=>e??String(Ac++))},[e]),t?`radix-${t}`:""}const Mc=["top","right","bottom","left"],Dc=Math.min,Lc=Math.max,Fc=Math.round,Ic=Math.floor,Oc=e=>({x:e,y:e}),zc={left:"right",right:"left",bottom:"top",top:"bottom"},Bc={start:"end",end:"start"};function $c(e,t,n){return Lc(e,Dc(t,n))}function Uc(e,t){return"function"==typeof e?e(t):e}function Vc(e){return e.split("-")[0]}function qc(e){return e.split("-")[1]}function Hc(e){return"x"===e?"y":"x"}function Gc(e){return"y"===e?"height":"width"}const Kc=new Set(["top","bottom"]);function Wc(e){return Kc.has(Vc(e))?"y":"x"}function Qc(e){return Hc(Wc(e))}function Yc(e){return e.replace(/start|end/g,e=>Bc[e])}const Xc=["left","right"],Zc=["right","left"],Jc=["top","bottom"],ed=["bottom","top"];function td(e,t,n,s){const a=qc(e);let r=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Zc:Xc:t?Xc:Zc;case"left":case"right":return t?Jc:ed;default:return[]}}(Vc(e),"start"===n,s);return a&&(r=r.map(e=>e+"-"+a),t&&(r=r.concat(r.map(Yc)))),r}function nd(e){return e.replace(/left|right|bottom|top/g,e=>zc[e])}function sd(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ad(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function rd(e,t,n){let{reference:s,floating:a}=e;const r=Wc(t),i=Qc(t),o=Gc(i),l=Vc(t),c="y"===r,d=s.x+s.width/2-a.width/2,u=s.y+s.height/2-a.height/2,h=s[o]/2-a[o]/2;let m;switch(l){case"top":m={x:d,y:s.y-a.height};break;case"bottom":m={x:d,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:u};break;case"left":m={x:s.x-a.width,y:u};break;default:m={x:s.x,y:s.y}}switch(qc(t)){case"start":m[i]-=h*(n&&c?-1:1);break;case"end":m[i]+=h*(n&&c?-1:1)}return m}async function id(e,t){var n;void 0===t&&(t={});const{x:s,y:a,platform:r,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=Uc(t,e),p=sd(m),f=o[h?"floating"===u?"reference":"floating":u],g=ad(await r.getClippingRect({element:null==(n=await(null==r.isElement?void 0:r.isElement(f)))||n?f:f.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:s,y:a,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(o.floating)),y=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},b=ad(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-b.top+p.top)/y.y,bottom:(b.bottom-g.bottom+p.bottom)/y.y,left:(g.left-b.left+p.left)/y.x,right:(b.right-g.right+p.right)/y.x}}function od(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ld(e){return Mc.some(t=>e[t]>=0)}const cd=new Set(["left","top"]);function dd(){return"undefined"!=typeof window}function ud(e){return pd(e)?(e.nodeName||"").toLowerCase():"#document"}function hd(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function md(e){var t;return null==(t=(pd(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function pd(e){return!!dd()&&(e instanceof Node||e instanceof hd(e).Node)}function fd(e){return!!dd()&&(e instanceof Element||e instanceof hd(e).Element)}function gd(e){return!!dd()&&(e instanceof HTMLElement||e instanceof hd(e).HTMLElement)}function xd(e){return!(!dd()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof hd(e).ShadowRoot)}const vd=new Set(["inline","contents"]);function yd(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Ad(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!vd.has(a)}const bd=new Set(["table","td","th"]);function wd(e){return bd.has(ud(e))}const Sd=[":popover-open",":modal"];function jd(e){return Sd.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const Cd=["transform","translate","scale","rotate","perspective"],kd=["transform","translate","scale","rotate","perspective","filter"],Nd=["paint","layout","strict","content"];function _d(e){const t=Pd(),n=fd(e)?Ad(e):e;return Cd.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||kd.some(e=>(n.willChange||"").includes(e))||Nd.some(e=>(n.contain||"").includes(e))}function Pd(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Ed=new Set(["html","body","#document"]);function Rd(e){return Ed.has(ud(e))}function Ad(e){return hd(e).getComputedStyle(e)}function Td(e){return fd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Md(e){if("html"===ud(e))return e;const t=e.assignedSlot||e.parentNode||xd(e)&&e.host||md(e);return xd(t)?t.host:t}function Dd(e){const t=Md(e);return Rd(t)?e.ownerDocument?e.ownerDocument.body:e.body:gd(t)&&yd(t)?t:Dd(t)}function Ld(e,t,n){var s;void 0===t&&(t=[]),void 0===n&&(n=!0);const a=Dd(e),r=a===(null==(s=e.ownerDocument)?void 0:s.body),i=hd(a);if(r){const e=Fd(i);return t.concat(i,i.visualViewport||[],yd(a)?a:[],e&&n?Ld(e):[])}return t.concat(a,Ld(a,[],n))}function Fd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Id(e){const t=Ad(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=gd(e),r=a?e.offsetWidth:n,i=a?e.offsetHeight:s,o=Fc(n)!==r||Fc(s)!==i;return o&&(n=r,s=i),{width:n,height:s,$:o}}function Od(e){return fd(e)?e:e.contextElement}function zd(e){const t=Od(e);if(!gd(t))return Oc(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:r}=Id(t);let i=(r?Fc(n.width):n.width)/s,o=(r?Fc(n.height):n.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const Bd=Oc(0);function $d(e){const t=hd(e);return Pd()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Bd}function Ud(e,t,n,s){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),r=Od(e);let i=Oc(1);t&&(s?fd(s)&&(i=zd(s)):i=zd(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==hd(e))&&t}(r,n,s)?$d(r):Oc(0);let l=(a.left+o.x)/i.x,c=(a.top+o.y)/i.y,d=a.width/i.x,u=a.height/i.y;if(r){const e=hd(r),t=s&&fd(s)?hd(s):s;let n=e,a=Fd(n);for(;a&&s&&t!==n;){const e=zd(a),t=a.getBoundingClientRect(),s=Ad(a),r=t.left+(a.clientLeft+parseFloat(s.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(s.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=r,c+=i,n=hd(a),a=Fd(n)}}return ad({width:d,height:u,x:l,y:c})}function Vd(e,t){const n=Td(e).scrollLeft;return t?t.left+n:Ud(md(e)).left+n}function qd(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Vd(e,n),y:n.top+t.scrollTop}}const Hd=new Set(["absolute","fixed"]);function Gd(e,t,n){let s;if("viewport"===t)s=function(e,t){const n=hd(e),s=md(e),a=n.visualViewport;let r=s.clientWidth,i=s.clientHeight,o=0,l=0;if(a){r=a.width,i=a.height;const e=Pd();(!e||e&&"fixed"===t)&&(o=a.offsetLeft,l=a.offsetTop)}const c=Vd(s);if(c<=0){const e=s.ownerDocument,t=e.body,n=getComputedStyle(t),a="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,i=Math.abs(s.clientWidth-t.clientWidth-a);i<=25&&(r-=i)}else c<=25&&(r+=c);return{width:r,height:i,x:o,y:l}}(e,n);else if("document"===t)s=function(e){const t=md(e),n=Td(e),s=e.ownerDocument.body,a=Lc(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=Lc(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+Vd(e);const o=-n.scrollTop;return"rtl"===Ad(s).direction&&(i+=Lc(t.clientWidth,s.clientWidth)-a),{width:a,height:r,x:i,y:o}}(md(e));else if(fd(t))s=function(e,t){const n=Ud(e,!0,"fixed"===t),s=n.top+e.clientTop,a=n.left+e.clientLeft,r=gd(e)?zd(e):Oc(1);return{width:e.clientWidth*r.x,height:e.clientHeight*r.y,x:a*r.x,y:s*r.y}}(t,n);else{const n=$d(e);s={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return ad(s)}function Kd(e,t){const n=Md(e);return!(n===t||!fd(n)||Rd(n))&&("fixed"===Ad(n).position||Kd(n,t))}function Wd(e,t,n){const s=gd(t),a=md(t),r="fixed"===n,i=Ud(e,!0,r,t);let o={scrollLeft:0,scrollTop:0};const l=Oc(0);function c(){l.x=Vd(a)}if(s||!s&&!r)if(("body"!==ud(t)||yd(a))&&(o=Td(t)),s){const e=Ud(t,!0,r,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&c();r&&!s&&a&&c();const d=!a||s||r?Oc(0):qd(a,o);return{x:i.left+o.scrollLeft-l.x-d.x,y:i.top+o.scrollTop-l.y-d.y,width:i.width,height:i.height}}function Qd(e){return"static"===Ad(e).position}function Yd(e,t){if(!gd(e)||"fixed"===Ad(e).position)return null;if(t)return t(e);let n=e.offsetParent;return md(e)===n&&(n=n.ownerDocument.body),n}function Xd(e,t){const n=hd(e);if(jd(e))return n;if(!gd(e)){let t=Md(e);for(;t&&!Rd(t);){if(fd(t)&&!Qd(t))return t;t=Md(t)}return n}let s=Yd(e,t);for(;s&&wd(s)&&Qd(s);)s=Yd(s,t);return s&&Rd(s)&&Qd(s)&&!_d(s)?n:s||function(e){let t=Md(e);for(;gd(t)&&!Rd(t);){if(_d(t))return t;if(jd(t))return null;t=Md(t)}return null}(e)||n}const Zd={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const r="fixed"===a,i=md(s),o=!!t&&jd(t.floating);if(s===i||o&&r)return n;let l={scrollLeft:0,scrollTop:0},c=Oc(1);const d=Oc(0),u=gd(s);if((u||!u&&!r)&&(("body"!==ud(s)||yd(i))&&(l=Td(s)),gd(s))){const e=Ud(s);c=zd(s),d.x=e.x+s.clientLeft,d.y=e.y+s.clientTop}const h=!i||u||r?Oc(0):qd(i,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:md,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const r=[..."clippingAncestors"===n?jd(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let s=Ld(e,[],!1).filter(e=>fd(e)&&"body"!==ud(e)),a=null;const r="fixed"===Ad(e).position;let i=r?Md(e):e;for(;fd(i)&&!Rd(i);){const t=Ad(i),n=_d(i);n||"fixed"!==t.position||(a=null),(r?!n&&!a:!n&&"static"===t.position&&a&&Hd.has(a.position)||yd(i)&&!n&&Kd(e,i))?s=s.filter(e=>e!==i):a=t,i=Md(i)}return t.set(e,s),s}(t,this._c):[].concat(n),s],i=r[0],o=r.reduce((e,n)=>{const s=Gd(t,n,a);return e.top=Lc(s.top,e.top),e.right=Dc(s.right,e.right),e.bottom=Dc(s.bottom,e.bottom),e.left=Lc(s.left,e.left),e},Gd(t,i,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Xd,getElementRects:async function(e){const t=this.getOffsetParent||Xd,n=this.getDimensions,s=await n(e.floating);return{reference:Wd(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Id(e);return{width:t,height:n}},getScale:zd,isElement:fd,isRTL:function(e){return"rtl"===Ad(e).direction}};function Jd(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function eu(e,t,n,s){void 0===s&&(s={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=s,c=Od(e),d=a||r?[...c?Ld(c):[],...Ld(t)]:[];d.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),r&&e.addEventListener("resize",n)});const u=c&&o?function(e,t){let n,s=null;const a=md(e);function r(){var e;clearTimeout(n),null==(e=s)||e.disconnect(),s=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),r();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:m}=c;if(o||t(),!h||!m)return;const p={rootMargin:-Ic(u)+"px "+-Ic(a.clientWidth-(d+h))+"px "+-Ic(a.clientHeight-(u+m))+"px "+-Ic(d)+"px",threshold:Lc(0,Dc(1,l))||1};let f=!0;function g(t){const s=t[0].intersectionRatio;if(s!==l){if(!f)return i();s?i(!1,s):n=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==s||Jd(c,e.getBoundingClientRect())||i(),f=!1}try{s=new IntersectionObserver(g,{...p,root:a.ownerDocument})}catch(x){s=new IntersectionObserver(g,p)}s.observe(e)}(!0),r}(c,n):null;let h,m=-1,p=null;i&&(p=new ResizeObserver(e=>{let[s]=e;s&&s.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let f=l?Ud(e):null;return l&&function t(){const s=Ud(e);f&&!Jd(f,s)&&n();f=s,h=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{a&&e.removeEventListener("scroll",n),r&&e.removeEventListener("resize",n)}),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const tu=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:r,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:s,elements:a}=e,r=await(null==s.isRTL?void 0:s.isRTL(a.floating)),i=Vc(n),o=qc(n),l="y"===Wc(n),c=cd.has(i)?-1:1,d=r&&l?-1:1,u=Uc(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(m="end"===o?-1*p:p),l?{x:m*d,y:h*c}:{x:h*c,y:m*d}}(t,e);return i===(null==(n=o.offset)?void 0:n.placement)&&null!=(s=o.arrow)&&s.alignmentOffset?{}:{x:a+l.x,y:r+l.y,data:{...l,placement:i}}}}},nu=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:r=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Uc(e,t),c={x:n,y:s},d=await id(t,l),u=Wc(Vc(a)),h=Hc(u);let m=c[h],p=c[u];if(r){const e="y"===h?"bottom":"right";m=$c(m+d["y"===h?"top":"left"],m,m-d[e])}if(i){const e="y"===u?"bottom":"right";p=$c(p+d["y"===u?"top":"left"],p,p-d[e])}const f=o.fn({...t,[h]:m,[u]:p});return{...f,data:{x:f.x-n,y:f.y-s,enabled:{[h]:r,[u]:i}}}}}},su=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:r,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...g}=Uc(e,t);if(null!=(n=r.arrow)&&n.alignmentOffset)return{};const x=Vc(a),v=Wc(o),y=Vc(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!f?[nd(o)]:function(e){const t=nd(e);return[Yc(e),t,Yc(t)]}(o)),S="none"!==p;!h&&S&&w.push(...td(o,f,p,b));const j=[o,...w],C=await id(t,g),k=[];let N=(null==(s=r.flip)?void 0:s.overflows)||[];if(d&&k.push(C[x]),u){const e=function(e,t,n){void 0===n&&(n=!1);const s=qc(e),a=Qc(e),r=Gc(a);let i="x"===a?s===(n?"end":"start")?"right":"left":"start"===s?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=nd(i)),[i,nd(i)]}(a,i,b);k.push(C[e[0]],C[e[1]])}if(N=[...N,{placement:a,overflows:k}],!k.every(e=>e<=0)){var _,P;const e=((null==(_=r.flip)?void 0:_.index)||0)+1,t=j[e];if(t){if(!("alignment"===u&&v!==Wc(t))||N.every(e=>Wc(e.placement)!==v||e.overflows[0]>0))return{data:{index:e,overflows:N},reset:{placement:t}}}let n=null==(P=N.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:P.placement;if(!n)switch(m){case"bestFit":{var E;const e=null==(E=N.filter(e=>{if(S){const t=Wc(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:E[0];e&&(n=e);break}case"initialPlacement":n=o}if(a!==n)return{reset:{placement:n}}}return{}}}},au=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:r,platform:i,elements:o}=t,{apply:l=()=>{},...c}=Uc(e,t),d=await id(t,c),u=Vc(a),h=qc(a),m="y"===Wc(a),{width:p,height:f}=r.floating;let g,x;"top"===u||"bottom"===u?(g=u,x=h===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(x=u,g="end"===h?"top":"bottom");const v=f-d.top-d.bottom,y=p-d.left-d.right,b=Dc(f-d[g],v),w=Dc(p-d[x],y),S=!t.middlewareData.shift;let j=b,C=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(C=y),null!=(s=t.middlewareData.shift)&&s.enabled.y&&(j=v),S&&!h){const e=Lc(d.left,0),t=Lc(d.right,0),n=Lc(d.top,0),s=Lc(d.bottom,0);m?C=p-2*(0!==e||0!==t?e+t:Lc(d.left,d.right)):j=f-2*(0!==n||0!==s?n+s:Lc(d.top,d.bottom))}await l({...t,availableWidth:C,availableHeight:j});const k=await i.getDimensions(o.floating);return p!==k.width||f!==k.height?{reset:{rects:!0}}:{}}}},ru=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=Uc(e,t);switch(s){case"referenceHidden":{const e=od(await id(t,{...a,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:ld(e)}}}case"escaped":{const e=od(await id(t,{...a,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:ld(e)}}}default:return{}}}}},iu=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:r,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=Uc(e,t)||{};if(null==c)return{};const u=sd(d),h={x:n,y:s},m=Qc(a),p=Gc(m),f=await i.getDimensions(c),g="y"===m,x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=r.reference[p]+r.reference[m]-h[m]-r.floating[p],w=h[m]-r.reference[m],S=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let j=S?S[y]:0;j&&await(null==i.isElement?void 0:i.isElement(S))||(j=o.floating[y]||r.floating[p]);const C=b/2-w/2,k=j/2-f[p]/2-1,N=Dc(u[x],k),_=Dc(u[v],k),P=N,E=j-f[p]-_,R=j/2-f[p]/2+C,A=$c(P,R,E),T=!l.arrow&&null!=qc(a)&&R!==A&&r.reference[p]/2-(R<P?N:_)-f[p]/2<0,M=T?R<P?R-P:R-E:0;return{[m]:h[m]+M,data:{[m]:A,centerOffset:R-A-M,...T&&{alignmentOffset:M}},reset:T}}}),ou=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:r,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Uc(e,t),d={x:n,y:s},u=Wc(a),h=Hc(u);let m=d[h],p=d[u];const f=Uc(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const e="y"===h?"height":"width",t=r.reference[h]-r.floating[e]+g.mainAxis,n=r.reference[h]+r.reference[e]-g.mainAxis;m<t?m=t:m>n&&(m=n)}if(c){var x,v;const e="y"===h?"width":"height",t=cd.has(Vc(a)),n=r.reference[u]-r.floating[e]+(t&&(null==(x=i.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),s=r.reference[u]+r.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);p<n?p=n:p>s&&(p=s)}return{[h]:m,[u]:p}}}},lu=(e,t,n)=>{const s=new Map,a={platform:Zd,...n},r={...a.platform,_c:s};return(async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:r=[],platform:i}=n,o=r.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:u}=rd(c,s,l),h=s,m={},p=0;for(let f=0;f<o.length;f++){const{name:n,fn:r}=o[f],{x:g,y:x,data:v,reset:y}=await r({x:d,y:u,initialPlacement:s,placement:h,strategy:a,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,m={...m,[n]:{...m[n],...v}},y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):y.rects),({x:d,y:u}=rd(c,h,l))),f=-1)}return{x:d,y:u,placement:h,strategy:a,middlewareData:m}})(e,t,{...a,platform:r})};var cu="undefined"!=typeof document?p.useLayoutEffect:function(){};function du(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;0!==s--;)if(!du(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;0!==s--;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;0!==s--;){const n=a[s];if(("_owner"!==n||!e.$$typeof)&&!du(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function uu(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function hu(e,t){const n=uu(e);return Math.round(t*n)/n}function mu(e){const t=p.useRef(e);return cu(()=>{t.current=e}),t}const pu=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:s}="function"==typeof e?e(t):e;return n&&(a=n,{}.hasOwnProperty.call(a,"current"))?null!=n.current?iu({element:n.current,padding:s}).fn(t):{}:n?iu({element:n,padding:s}).fn(t):{};var a}}),fu=(e,t)=>({...tu(e),options:[e,t]}),gu=(e,t)=>({...nu(e),options:[e,t]}),xu=(e,t)=>({...ou(e),options:[e,t]}),vu=(e,t)=>({...su(e),options:[e,t]}),yu=(e,t)=>({...au(e),options:[e,t]}),bu=(e,t)=>({...ru(e),options:[e,t]}),wu=(e,t)=>({...pu(e),options:[e,t]});var Su=p.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...r}=e;return c.jsx(nc.svg,{...r,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});Su.displayName="Arrow";var ju=Su;function Cu(e){const[t,n]=p.useState(void 0);return Ec(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const s=t[0];let a,r;if("borderBoxSize"in s){const e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,r=t.blockSize}else a=e.offsetWidth,r=e.offsetHeight;n({width:a,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var ku="Popper",[Nu,_u]=Vl(ku),[Pu,Eu]=Nu(ku),Ru=e=>{const{__scopePopper:t,children:n}=e,[s,a]=p.useState(null);return c.jsx(Pu,{scope:t,anchor:s,onAnchorChange:a,children:n})};Ru.displayName=ku;var Au="PopperAnchor",Tu=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,r=Eu(Au,n),i=p.useRef(null),o=ll(t,i),l=p.useRef(null);return p.useEffect(()=>{const e=l.current;l.current=s?.current||i.current,e!==l.current&&r.onAnchorChange(l.current)}),s?null:c.jsx(nc.div,{...a,ref:o})});Tu.displayName=Au;var Mu="PopperContent",[Du,Lu]=Nu(Mu),Fu=p.forwardRef((e,t)=>{const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:r="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:g,...x}=e,v=Eu(Mu,n),[y,b]=p.useState(null),w=ll(t,e=>b(e)),[S,j]=p.useState(null),C=Cu(S),k=C?.width??0,N=C?.height??0,_=s+("center"!==r?"-"+r:""),P="number"==typeof u?u:{top:0,right:0,bottom:0,left:0,...u},E=Array.isArray(d)?d:[d],R=E.length>0,A={padding:P,boundary:E.filter(Bu),altBoundary:R},{refs:T,floatingStyles:M,placement:D,isPositioned:L,middlewareData:F}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:r,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(s);du(h,s)||m(s);const[f,g]=p.useState(null),[x,v]=p.useState(null),y=p.useCallback(e=>{e!==j.current&&(j.current=e,g(e))},[]),b=p.useCallback(e=>{e!==C.current&&(C.current=e,v(e))},[]),w=r||f,S=i||x,j=p.useRef(null),C=p.useRef(null),k=p.useRef(d),N=null!=l,_=mu(l),P=mu(a),E=mu(c),R=p.useCallback(()=>{if(!j.current||!C.current)return;const e={placement:t,strategy:n,middleware:h};P.current&&(e.platform=P.current),lu(j.current,C.current,e).then(e=>{const t={...e,isPositioned:!1!==E.current};A.current&&!du(k.current,t)&&(k.current=t,Zt.flushSync(()=>{u(t)}))})},[h,t,n,P,E]);cu(()=>{!1===c&&k.current.isPositioned&&(k.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[c]);const A=p.useRef(!1);cu(()=>(A.current=!0,()=>{A.current=!1}),[]),cu(()=>{if(w&&(j.current=w),S&&(C.current=S),w&&S){if(_.current)return _.current(w,S,R);R()}},[w,S,R,_,N]);const T=p.useMemo(()=>({reference:j,floating:C,setReference:y,setFloating:b}),[y,b]),M=p.useMemo(()=>({reference:w,floating:S}),[w,S]),D=p.useMemo(()=>{const e={position:n,left:0,top:0};if(!M.floating)return e;const t=hu(M.floating,d.x),s=hu(M.floating,d.y);return o?{...e,transform:"translate("+t+"px, "+s+"px)",...uu(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:s}},[n,o,M.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:R,refs:T,elements:M,floatingStyles:D}),[d,R,T,M,D])}({strategy:"fixed",placement:_,whileElementsMounted:(...e)=>eu(...e,{animationFrame:"always"===f}),elements:{reference:v.anchor},middleware:[fu({mainAxis:a+N,alignmentAxis:i}),l&&gu({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?xu():void 0,...A}),l&&vu({...A}),yu({...A,apply:({elements:e,rects:t,availableWidth:n,availableHeight:s})=>{const{width:a,height:r}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${n}px`),i.setProperty("--radix-popper-available-height",`${s}px`),i.setProperty("--radix-popper-anchor-width",`${a}px`),i.setProperty("--radix-popper-anchor-height",`${r}px`)}}),S&&wu({element:S,padding:o}),$u({arrowWidth:k,arrowHeight:N}),m&&bu({strategy:"referenceHidden",...A})]}),[I,O]=Uu(D),z=ac(g);Ec(()=>{L&&z?.()},[L,z]);const B=F.arrow?.x,$=F.arrow?.y,U=0!==F.arrow?.centerOffset,[V,q]=p.useState();return Ec(()=>{y&&q(window.getComputedStyle(y).zIndex)},[y]),c.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:L?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:V,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(Du,{scope:n,placedSide:I,onArrowChange:j,arrowX:B,arrowY:$,shouldHideArrow:U,children:c.jsx(nc.div,{"data-side":I,"data-align":O,...x,ref:w,style:{...x.style,animation:L?void 0:"none"}})})})});Fu.displayName=Mu;var Iu="PopperArrow",Ou={top:"bottom",right:"left",bottom:"top",left:"right"},zu=p.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,a=Lu(Iu,n),r=Ou[a.placedSide];return c.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:c.jsx(ju,{...s,ref:t,style:{...s.style,display:"block"}})})});function Bu(e){return null!==e}zu.displayName=Iu;var $u=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:s,middlewareData:a}=t,r=0!==a.arrow?.centerOffset,i=r?0:e.arrowWidth,o=r?0:e.arrowHeight,[l,c]=Uu(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(a.arrow?.x??0)+i/2,h=(a.arrow?.y??0)+o/2;let m="",p="";return"bottom"===l?(m=r?d:`${u}px`,p=-o+"px"):"top"===l?(m=r?d:`${u}px`,p=`${s.floating.height+o}px`):"right"===l?(m=-o+"px",p=r?d:`${h}px`):"left"===l&&(m=`${s.floating.width+o}px`,p=r?d:`${h}px`),{data:{x:m,y:p}}}});function Uu(e){const[t,n="center"]=e.split("-");return[t,n]}var Vu=Ru,qu=Tu,Hu=Fu,Gu=zu,Ku=p.forwardRef((e,t)=>{const{container:n,...s}=e,[a,r]=p.useState(!1);Ec(()=>r(!0),[]);const i=n||a&&globalThis?.document?.body;return i?Jt.createPortal(c.jsx(nc.div,{...s,ref:t}),i):null});function Wu(e){const t=Qu(e),n=p.forwardRef((e,n)=>{const{children:s,...a}=e,r=p.Children.toArray(s),i=r.find(Xu);if(i){const e=i.props.children,s=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...a,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,s):null})}return c.jsx(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}function Qu(e){const t=p.forwardRef((e,t)=>{const{children:n,...s}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const s in t){const a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==p.Fragment&&(a.ref=t?ol(t,e):e),p.cloneElement(n,a)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Ku.displayName="Portal";var Yu=Symbol("radix.slottable");function Xu(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Yu}var Zu=g[" useInsertionEffect ".trim().toString()]||Ec;function Ju({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,r,i]=function({defaultProp:e,onChange:t}){const[n,s]=p.useState(e),a=p.useRef(n),r=p.useRef(t);return Zu(()=>{r.current=t},[t]),p.useEffect(()=>{a.current!==n&&(r.current?.(n),a.current=n)},[n,a]),[n,s,r]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:a;{const t=p.useRef(void 0!==e);p.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,s])}const c=p.useCallback(t=>{if(o){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&i.current?.(n)}else r(t)},[o,e,r,i]);return[l,c]}function eh(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var th=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),nh=p.forwardRef((e,t)=>c.jsx(nc.span,{...e,ref:t,style:{...th,...e.style}}));nh.displayName="VisuallyHidden";var sh=nh,ah=new WeakMap,rh=new WeakMap,ih={},oh=0,lh=function(e){return e&&(e.host||lh(e.parentNode))},ch=function(e,t,n,s){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=lh(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);ih[n]||(ih[n]=new WeakMap);var r=ih[n],i=[],o=new Set,l=new Set(a),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};a.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(s),a=null!==t&&"false"!==t,l=(ah.get(e)||0)+1,c=(r.get(e)||0)+1;ah.set(e,l),r.set(e,c),i.push(e),1===l&&a&&rh.set(e,!0),1===c&&e.setAttribute(n,"true"),a||e.setAttribute(s,"true")}catch(u){}})};return d(t),o.clear(),oh++,function(){i.forEach(function(e){var t=ah.get(e)-1,a=r.get(e)-1;ah.set(e,t),r.set(e,a),t||(rh.has(e)||e.removeAttribute(s),rh.delete(e)),a||e.removeAttribute(n)}),--oh||(ah=new WeakMap,ah=new WeakMap,rh=new WeakMap,ih={})}},dh=function(e,t,n){void 0===n&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),ch(s,a,n,"aria-hidden")):function(){return null}},uh=function(){return uh=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},uh.apply(this,arguments)};function hh(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n}"function"==typeof SuppressedError&&SuppressedError;var mh="right-scroll-bar-position",ph="width-before-scroll-bar";function fh(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var gh="undefined"!=typeof window?p.useLayoutEffect:p.useEffect,xh=new WeakMap;function vh(e,t){var n,s,a,r=(n=null,s=function(t){return e.forEach(function(e){return fh(e,t)})},(a=p.useState(function(){return{value:n,callback:s,facade:{get current(){return a.value},set current(e){var t=a.value;t!==e&&(a.value=e,a.callback(e,t))}}}})[0]).callback=s,a.facade);return gh(function(){var t=xh.get(r);if(t){var n=new Set(t),s=new Set(e),a=r.current;n.forEach(function(e){s.has(e)||fh(e,null)}),s.forEach(function(e){n.has(e)||fh(e,a)})}xh.set(r,e)},[e]),r}function yh(e){return e}var bh=function(e){var t=e.sideCar,n=hh(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return p.createElement(s,uh({},n))};bh.isSideCarExport=!0;var wh=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=yh);var n=[],s=!1;return{read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,s);return n.push(a),function(){n=n.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(s=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){s=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var r=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(r)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=uh({async:!0,ssr:!1},e),t}(),Sh=function(){},jh=p.forwardRef(function(e,t){var n=p.useRef(null),s=p.useState({onScrollCapture:Sh,onWheelCapture:Sh,onTouchMoveCapture:Sh}),a=s[0],r=s[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,h=e.sideCar,m=e.noRelative,f=e.noIsolation,g=e.inert,x=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,b=e.gapMode,w=hh(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,j=vh([n,t]),C=uh(uh({},w),a);return p.createElement(p.Fragment,null,d&&p.createElement(S,{sideCar:wh,removeScrollBar:c,shards:u,noRelative:m,noIsolation:f,inert:g,setCallbacks:r,allowPinchZoom:!!x,lockRef:n,gapMode:b}),i?p.cloneElement(p.Children.only(o),uh(uh({},C),{ref:j})):p.createElement(y,uh({},C,{className:l,ref:j}),o))});jh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},jh.classNames={fullWidth:ph,zeroRight:mh};function Ch(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var kh=function(){var e=0,t=null;return{add:function(n){var s,a;0==e&&(t=Ch())&&(a=n,(s=t).styleSheet?s.styleSheet.cssText=a:s.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Nh=function(){var e,t=(e=kh(),function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,s=e.dynamic;return t(n,s),null}},_h={left:0,top:0,right:0,gap:0},Ph=function(e){return parseInt(e||"",10)||0},Eh=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return _h;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],s=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[Ph(n),Ph(s),Ph(a)]}(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},Rh=Nh(),Ah="data-scroll-locked",Th=function(e,t,n,s){var a=e.left,r=e.top,i=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(s,";\n   padding-right: ").concat(o,"px ").concat(s,";\n  }\n  body[").concat(Ah,"] {\n    overflow: hidden ").concat(s,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(s,";"),"margin"===n&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(r,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(s,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(mh," {\n    right: ").concat(o,"px ").concat(s,";\n  }\n  \n  .").concat(ph," {\n    margin-right: ").concat(o,"px ").concat(s,";\n  }\n  \n  .").concat(mh," .").concat(mh," {\n    right: 0 ").concat(s,";\n  }\n  \n  .").concat(ph," .").concat(ph," {\n    margin-right: 0 ").concat(s,";\n  }\n  \n  body[").concat(Ah,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},Mh=function(){var e=parseInt(document.body.getAttribute(Ah)||"0",10);return isFinite(e)?e:0},Dh=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=void 0===s?"margin":s;p.useEffect(function(){return document.body.setAttribute(Ah,(Mh()+1).toString()),function(){var e=Mh()-1;e<=0?document.body.removeAttribute(Ah):document.body.setAttribute(Ah,e.toString())}},[]);var r=p.useMemo(function(){return Eh(a)},[a]);return p.createElement(Rh,{styles:Th(r,!t,a,n?"":"!important")})},Lh=!1;if("undefined"!=typeof window)try{var Fh=Object.defineProperty({},"passive",{get:function(){return Lh=!0,!0}});window.addEventListener("test",Fh,Fh),window.removeEventListener("test",Fh,Fh)}catch(wW){Lh=!1}var Ih=!!Lh&&{passive:!1},Oh=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},zh=function(e,t){var n=t.ownerDocument,s=t;do{if("undefined"!=typeof ShadowRoot&&s instanceof ShadowRoot&&(s=s.host),Bh(e,s)){var a=$h(e,s);if(a[1]>a[2])return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Bh=function(e,t){return"v"===e?function(e){return Oh(e,"overflowY")}(t):function(e){return Oh(e,"overflowX")}(t)},$h=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Uh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Vh=function(e){return[e.deltaX,e.deltaY]},qh=function(e){return e&&"current"in e?e.current:e},Hh=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Gh=0,Kh=[];function Wh(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Qh=(Yh=function(e){var t=p.useRef([]),n=p.useRef([0,0]),s=p.useRef(),a=p.useState(Gh++)[0],r=p.useState(Nh)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=function(e,t,n){if(n||2===arguments.length)for(var s,a=0,r=t.length;a<r;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(qh),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=p.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var a,r=Uh(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-r[0],c="deltaY"in e?e.deltaY:o[1]-r[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=window.getSelection(),m=h&&h.anchorNode;if(m&&(m===d||m.contains(d)))return!1;var p=zh(u,d);if(!p)return!0;if(p?a=u:(a="v"===u?"h":"v",p=zh(u,d)),!p)return!1;if(!s.current&&"changedTouches"in e&&(l||c)&&(s.current=a),!a)return!0;var f=s.current||a;return function(e,t,n,s){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),r=a*s,i=n.target,o=t.contains(i),l=!1,c=r>0,d=0,u=0;do{if(!i)break;var h=$h(e,i),m=h[0],p=h[1]-h[2]-a*m;(m||p)&&Bh(e,i)&&(d+=p,u+=m);var f=i.parentNode;i=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!o&&i!==document.body||o&&(t.contains(i)||t===i));return(c&&Math.abs(d)<1||!c&&Math.abs(u)<1)&&(l=!0),l}(f,t,e,"h"===f?l:c)},[]),l=p.useCallback(function(e){var n=e;if(Kh.length&&Kh[Kh.length-1]===r){var s="deltaY"in n?Vh(n):Uh(n),a=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,a=s,t[0]===a[0]&&t[1]===a[1]);var t,a})[0];if(a&&a.should)n.cancelable&&n.preventDefault();else if(!a){var l=(i.current.shards||[]).map(qh).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!i.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=p.useCallback(function(e,n,s,a){var r={name:e,delta:n,target:s,should:a,shadowParent:Wh(s)};t.current.push(r),setTimeout(function(){t.current=t.current.filter(function(e){return e!==r})},1)},[]),d=p.useCallback(function(e){n.current=Uh(e),s.current=void 0},[]),u=p.useCallback(function(t){c(t.type,Vh(t),t.target,o(t,e.lockRef.current))},[]),h=p.useCallback(function(t){c(t.type,Uh(t),t.target,o(t,e.lockRef.current))},[]);p.useEffect(function(){return Kh.push(r),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ih),document.addEventListener("touchmove",l,Ih),document.addEventListener("touchstart",d,Ih),function(){Kh=Kh.filter(function(e){return e!==r}),document.removeEventListener("wheel",l,Ih),document.removeEventListener("touchmove",l,Ih),document.removeEventListener("touchstart",d,Ih)}},[]);var m=e.removeScrollBar,f=e.inert;return p.createElement(p.Fragment,null,f?p.createElement(r,{styles:Hh(a)}):null,m?p.createElement(Dh,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},wh.useMedium(Yh),bh);var Yh,Xh=p.forwardRef(function(e,t){return p.createElement(jh,uh({},e,{ref:t,sideCar:Qh}))});Xh.classNames=jh.classNames;var Zh=[" ","Enter","ArrowUp","ArrowDown"],Jh=[" ","Enter"],em="Select",[tm,nm,sm]=Ql(em),[am]=Vl(em,[sm,_u]),rm=_u(),[im,om]=am(em),[lm,cm]=am(em),dm=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:r,value:i,defaultValue:o,onValueChange:l,dir:d,name:u,autoComplete:h,disabled:m,required:f,form:g}=e,x=rm(t),[v,y]=p.useState(null),[b,w]=p.useState(null),[S,j]=p.useState(!1),C=Xl(d),[k,N]=Ju({prop:s,defaultProp:a??!1,onChange:r,caller:em}),[_,P]=Ju({prop:i,defaultProp:o,onChange:l,caller:em}),E=p.useRef(null),R=!v||(g||!!v.closest("form")),[A,T]=p.useState(new Set),M=Array.from(A).map(e=>e.props.value).join(";");return c.jsx(Vu,{...x,children:c.jsxs(im,{required:f,scope:t,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Tc(),value:_,onValueChange:P,open:k,onOpenChange:N,dir:C,triggerPointerDownPosRef:E,disabled:m,children:[c.jsx(tm.Provider,{scope:t,children:c.jsx(lm,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:p.useCallback(e=>{T(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),R?c.jsxs(Ym,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:_,onChange:e=>P(e.target.value),disabled:m,form:g,children:[void 0===_?c.jsx("option",{value:""}):null,Array.from(A)]},M):null]})})};dm.displayName=em;var um="SelectTrigger",hm=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,r=rm(n),i=om(um,n),o=i.disabled||s,l=ll(t,i.onTriggerChange),d=nm(n),u=p.useRef("touch"),[h,m,f]=Zm(e=>{const t=d().filter(e=>!e.disabled),n=t.find(e=>e.value===i.value),s=Jm(t,e,n);void 0!==s&&i.onValueChange(s.value)}),g=e=>{o||(i.onOpenChange(!0),f()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return c.jsx(qu,{asChild:!0,...r,children:c.jsx(nc.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Xm(i.value)?"":void 0,...a,ref:l,onClick:Ul(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&g(e)}),onPointerDown:Ul(a.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:Ul(a.onKeyDown,e=>{const t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||Zh.includes(e.key)&&(g(),e.preventDefault())})})})});hm.displayName=um;var mm="SelectValue",pm=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:r,placeholder:i="",...o}=e,l=om(mm,n),{onValueNodeHasChildrenChange:d}=l,u=void 0!==r,h=ll(t,l.onValueNodeChange);return Ec(()=>{d(u)},[d,u]),c.jsx(nc.span,{...o,ref:h,style:{pointerEvents:"none"},children:Xm(l.value)?c.jsx(c.Fragment,{children:i}):r})});pm.displayName=mm;var fm=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return c.jsx(nc.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});fm.displayName="SelectIcon";var gm=e=>c.jsx(Ku,{asChild:!0,...e});gm.displayName="SelectPortal";var xm="SelectContent",vm=p.forwardRef((e,t)=>{const n=om(xm,e.__scopeSelect),[s,a]=p.useState();if(Ec(()=>{a(new DocumentFragment)},[]),!n.open){const t=s;return t?Zt.createPortal(c.jsx(bm,{scope:e.__scopeSelect,children:c.jsx(tm.Slot,{scope:e.__scopeSelect,children:c.jsx("div",{children:e.children})})}),t):null}return c.jsx(jm,{...e,ref:t})});vm.displayName=xm;var ym=10,[bm,wm]=am(xm),Sm=Wu("SelectContent.RemoveScroll"),jm=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:r,onPointerDownOutside:i,side:o,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v,...y}=e,b=om(xm,n),[w,S]=p.useState(null),[j,C]=p.useState(null),k=ll(t,e=>S(e)),[N,_]=p.useState(null),[P,E]=p.useState(null),R=nm(n),[A,T]=p.useState(!1),M=p.useRef(!1);p.useEffect(()=>{if(w)return dh(w)},[w]),xc();const D=p.useCallback(e=>{const[t,...n]=R().map(e=>e.ref.current),[s]=n.slice(-1),a=document.activeElement;for(const r of e){if(r===a)return;if(r?.scrollIntoView({block:"nearest"}),r===t&&j&&(j.scrollTop=0),r===s&&j&&(j.scrollTop=j.scrollHeight),r?.focus(),document.activeElement!==a)return}},[R,j]),L=p.useCallback(()=>D([N,w]),[D,N,w]);p.useEffect(()=>{A&&L()},[A,L]);const{onOpenChange:F,triggerPointerDownPosRef:I}=b;p.useEffect(()=>{if(w){let e={x:0,y:0};const t=t=>{e={x:Math.abs(Math.round(t.pageX)-(I.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(I.current?.y??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():w.contains(n.target)||F(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[w,F,I]),p.useEffect(()=>{const e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);const[O,z]=Zm(e=>{const t=R().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),s=Jm(t,e,n);s&&setTimeout(()=>s.ref.current.focus())}),B=p.useCallback((e,t,n)=>{const s=!M.current&&!n;(void 0!==b.value&&b.value===t||s)&&(_(e),s&&(M.current=!0))},[b.value]),$=p.useCallback(()=>w?.focus(),[w]),U=p.useCallback((e,t,n)=>{const s=!M.current&&!n;(void 0!==b.value&&b.value===t||s)&&E(e)},[b.value]),V="popper"===s?km:Cm,q=V===km?{side:o,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v}:{};return c.jsx(bm,{scope:n,content:w,viewport:j,onViewportChange:C,itemRefCallback:B,selectedItem:N,onItemLeave:$,itemTextRefCallback:U,focusSelectedItem:L,selectedItemText:P,position:s,isPositioned:A,searchRef:O,children:c.jsx(Xh,{as:Sm,allowPinchZoom:!0,children:c.jsx(Sc,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Ul(a,e=>{b.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:c.jsx(dc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:c.jsx(V,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault(),...y,...q,onPlaced:()=>T(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ul(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||z(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,s=t.indexOf(n);t=t.slice(s+1)}setTimeout(()=>D(t)),e.preventDefault()}})})})})})})});jm.displayName="SelectContentImpl";var Cm=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,r=om(xm,n),i=wm(xm,n),[o,l]=p.useState(null),[d,u]=p.useState(null),h=ll(t,e=>u(e)),m=nm(n),f=p.useRef(!1),g=p.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=i,w=p.useCallback(()=>{if(r.trigger&&r.valueNode&&o&&d&&x&&v&&y){const e=r.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),n=r.valueNode.getBoundingClientRect(),a=y.getBoundingClientRect();if("rtl"!==r.dir){const s=a.left-t.left,r=n.left-s,i=e.left-r,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-ym,u=$l(r,[ym,Math.max(ym,d-c)]);o.style.minWidth=l+"px",o.style.left=u+"px"}else{const s=t.right-a.right,r=window.innerWidth-n.right-s,i=window.innerWidth-e.right-r,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-ym,u=$l(r,[ym,Math.max(ym,d-c)]);o.style.minWidth=l+"px",o.style.right=u+"px"}const i=m(),l=window.innerHeight-2*ym,c=x.scrollHeight,u=window.getComputedStyle(d),h=parseInt(u.borderTopWidth,10),p=parseInt(u.paddingTop,10),g=parseInt(u.borderBottomWidth,10),b=h+p+c+parseInt(u.paddingBottom,10)+g,w=Math.min(5*v.offsetHeight,b),S=window.getComputedStyle(x),j=parseInt(S.paddingTop,10),C=parseInt(S.paddingBottom,10),k=e.top+e.height/2-ym,N=l-k,_=v.offsetHeight/2,P=h+p+(v.offsetTop+_),E=b-P;if(P<=k){const e=i.length>0&&v===i[i.length-1].ref.current;o.style.bottom="0px";const t=d.clientHeight-x.offsetTop-x.offsetHeight,n=P+Math.max(N,_+(e?C:0)+t+g);o.style.height=n+"px"}else{const e=i.length>0&&v===i[0].ref.current;o.style.top="0px";const t=Math.max(k,h+x.offsetTop+(e?j:0)+_)+E;o.style.height=t+"px",x.scrollTop=P-k+x.offsetTop}o.style.margin=`${ym}px 0`,o.style.minHeight=w+"px",o.style.maxHeight=l+"px",s?.(),requestAnimationFrame(()=>f.current=!0)}},[m,r.trigger,r.valueNode,o,d,x,v,y,r.dir,s]);Ec(()=>w(),[w]);const[S,j]=p.useState();Ec(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const C=p.useCallback(e=>{e&&!0===g.current&&(w(),b?.(),g.current=!1)},[w,b]);return c.jsx(Nm,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:c.jsx(nc.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Cm.displayName="SelectItemAlignedPosition";var km=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=ym,...r}=e,i=rm(n);return c.jsx(Hu,{...i,...r,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});km.displayName="SelectPopperPosition";var[Nm,_m]=am(xm,{}),Pm="SelectViewport",Em=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,r=wm(Pm,n),i=_m(Pm,n),o=ll(t,r.onViewportChange),l=p.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(tm.Slot,{scope:n,children:c.jsx(nc.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ul(a.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:s}=i;if(s?.current&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const s=window.innerHeight-2*ym,a=parseFloat(n.style.minHeight),r=parseFloat(n.style.height),i=Math.max(a,r);if(i<s){const a=i+e,r=Math.min(s,a),o=a-r;n.style.height=r+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});Em.displayName=Pm;var Rm="SelectGroup",[Am,Tm]=am(Rm);p.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Tc();return c.jsx(Am,{scope:n,id:a,children:c.jsx(nc.div,{role:"group","aria-labelledby":a,...s,ref:t})})}).displayName=Rm;var Mm="SelectLabel",Dm=p.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Tm(Mm,n);return c.jsx(nc.div,{id:a.id,...s,ref:t})});Dm.displayName=Mm;var Lm="SelectItem",[Fm,Im]=am(Lm),Om=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:r,...i}=e,o=om(Lm,n),l=wm(Lm,n),d=o.value===s,[u,h]=p.useState(r??""),[m,f]=p.useState(!1),g=ll(t,e=>l.itemRefCallback?.(e,s,a)),x=Tc(),v=p.useRef("touch"),y=()=>{a||(o.onValueChange(s),o.onOpenChange(!1))};if(""===s)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(Fm,{scope:n,value:s,disabled:a,textId:x,isSelected:d,onItemTextChange:p.useCallback(e=>{h(t=>t||(e?.textContent??"").trim())},[]),children:c.jsx(tm.ItemSlot,{scope:n,value:s,disabled:a,textValue:u,children:c.jsx(nc.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:g,onFocus:Ul(i.onFocus,()=>f(!0)),onBlur:Ul(i.onBlur,()=>f(!1)),onClick:Ul(i.onClick,()=>{"mouse"!==v.current&&y()}),onPointerUp:Ul(i.onPointerUp,()=>{"mouse"===v.current&&y()}),onPointerDown:Ul(i.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:Ul(i.onPointerMove,e=>{v.current=e.pointerType,a?l.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ul(i.onPointerLeave,e=>{e.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:Ul(i.onKeyDown,e=>{""!==l.searchRef?.current&&" "===e.key||(Jh.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});Om.displayName=Lm;var zm="SelectItemText",Bm=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...r}=e,i=om(zm,n),o=wm(zm,n),l=Im(zm,n),d=cm(zm,n),[u,h]=p.useState(null),m=ll(t,e=>h(e),l.onItemTextChange,e=>o.itemTextRefCallback?.(e,l.value,l.disabled)),f=u?.textContent,g=p.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=d;return Ec(()=>(x(g),()=>v(g)),[x,v,g]),c.jsxs(c.Fragment,{children:[c.jsx(nc.span,{id:l.textId,...r,ref:m}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Zt.createPortal(r.children,i.valueNode):null]})});Bm.displayName=zm;var $m="SelectItemIndicator",Um=p.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return Im($m,n).isSelected?c.jsx(nc.span,{"aria-hidden":!0,...s,ref:t}):null});Um.displayName=$m;var Vm="SelectScrollUpButton",qm=p.forwardRef((e,t)=>{const n=wm(Vm,e.__scopeSelect),s=_m(Vm,e.__scopeSelect),[a,r]=p.useState(!1),i=ll(t,s.onScrollButtonChange);return Ec(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;r(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),a?c.jsx(Km,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});qm.displayName=Vm;var Hm="SelectScrollDownButton",Gm=p.forwardRef((e,t)=>{const n=wm(Hm,e.__scopeSelect),s=_m(Hm,e.__scopeSelect),[a,r]=p.useState(!1),i=ll(t,s.onScrollButtonChange);return Ec(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;r(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),a?c.jsx(Km,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Gm.displayName=Hm;var Km=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,r=wm("SelectScrollButton",n),i=p.useRef(null),o=nm(n),l=p.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),Ec(()=>{const e=o().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[o]),c.jsx(nc.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ul(a.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(s,50))}),onPointerMove:Ul(a.onPointerMove,()=>{r.onItemLeave?.(),null===i.current&&(i.current=window.setInterval(s,50))}),onPointerLeave:Ul(a.onPointerLeave,()=>{l()})})}),Wm=p.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return c.jsx(nc.div,{"aria-hidden":!0,...s,ref:t})});Wm.displayName="SelectSeparator";var Qm="SelectArrow";p.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=rm(n),r=om(Qm,n),i=wm(Qm,n);return r.open&&"popper"===i.position?c.jsx(Gu,{...a,...s,ref:t}):null}).displayName=Qm;var Ym=p.forwardRef(({__scopeSelect:e,value:t,...n},s)=>{const a=p.useRef(null),r=ll(s,a),i=eh(t);return p.useEffect(()=>{const e=a.current;if(!e)return;const n=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&s){const n=new Event("change",{bubbles:!0});s.call(e,t),e.dispatchEvent(n)}},[i,t]),c.jsx(nc.select,{...n,style:{...th,...n.style},ref:r,defaultValue:t})});function Xm(e){return""===e||void 0===e}function Zm(e){const t=ac(e),n=p.useRef(""),s=p.useRef(0),a=p.useCallback(e=>{const a=n.current+e;t(a),function e(t){n.current=t,window.clearTimeout(s.current),""!==t&&(s.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),r=p.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,r]}function Jm(e,t,n){const s=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let r=(i=e,o=Math.max(a,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===s.length&&(r=r.filter(e=>e!==n));const l=r.find(e=>e.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}Ym.displayName="SelectBubbleInput";var ep=dm,tp=hm,np=pm,sp=fm,ap=gm,rp=vm,ip=Em,op=Dm,lp=Om,cp=Bm,dp=Um,up=qm,hp=Gm,mp=Wm;const pp=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},fp=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),gp=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var xp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vp=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:r,iconNode:i,...o},l)=>p.createElement("svg",{ref:l,...xp,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:fp("lucide",a),...!r&&!gp(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>p.createElement(e,t)),...Array.isArray(r)?r:[r]])),yp=(e,t)=>{const n=p.forwardRef(({className:n,...s},a)=>{return p.createElement(vp,{ref:a,iconNode:t,className:fp(`lucide-${r=pp(e),r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...s});var r});return n.displayName=pp(e),n},bp=yp("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),wp=yp("align-center-vertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"M8 10H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h4",key:"14d6g8"}],["path",{d:"M16 10h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4",key:"1e2lrw"}],["path",{d:"M8 20H7a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2h1",key:"1fkdwx"}],["path",{d:"M16 14h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-1",key:"1euafb"}]]),Sp=yp("align-end-vertical",[["rect",{width:"16",height:"6",x:"2",y:"4",rx:"2",key:"10wcwx"}],["rect",{width:"9",height:"6",x:"9",y:"14",rx:"2",key:"4p5bwg"}],["path",{d:"M22 22V2",key:"12ipfv"}]]),jp=yp("align-start-vertical",[["rect",{width:"9",height:"6",x:"6",y:"14",rx:"2",key:"lpm2y7"}],["rect",{width:"16",height:"6",x:"6",y:"4",rx:"2",key:"rdj6ps"}],["path",{d:"M2 2v20",key:"1ivd8o"}]]),Cp=yp("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),kp=yp("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Np=yp("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),_p=yp("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Pp=yp("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ep=yp("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Rp=yp("boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]),Ap=yp("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Tp=yp("brush-cleaning",[["path",{d:"m16 22-1-4",key:"1ow2iv"}],["path",{d:"M19 14a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2h-3a1 1 0 0 1-1-1V4a2 2 0 0 0-4 0v5a1 1 0 0 1-1 1H6a2 2 0 0 0-2 2v1a1 1 0 0 0 1 1",key:"11gii7"}],["path",{d:"M19 14H5l-1.973 6.767A1 1 0 0 0 4 22h16a1 1 0 0 0 .973-1.233z",key:"bju7h4"}],["path",{d:"m8 22 1-4",key:"s3unb"}]]),Mp=yp("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),Dp=yp("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),Lp=yp("cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]),Fp=yp("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),Ip=yp("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Op=yp("camera-off",[["path",{d:"M14.564 14.558a3 3 0 1 1-4.122-4.121",key:"1rnrzw"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20 20H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 .819-.175",key:"1x3arw"}],["path",{d:"M9.695 4.024A2 2 0 0 1 10.004 4h3.993a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v7.344",key:"1i84u0"}]]),zp=yp("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Bp=yp("case-upper",[["path",{d:"M15 11h4.5a1 1 0 0 1 0 5h-4a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h3a1 1 0 0 1 0 5",key:"nxs35"}],["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}]]),$p=yp("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Up=yp("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Vp=yp("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qp=yp("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Hp=yp("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Gp=yp("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Kp=yp("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Wp=yp("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),Qp=yp("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),Yp=yp("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Xp=yp("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Zp=yp("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Jp=yp("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),ef=yp("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),tf=yp("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),nf=yp("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),sf=yp("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),af=yp("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]),rf=yp("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),of=yp("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),lf=yp("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),cf=yp("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),df=yp("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),uf=yp("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),hf=yp("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),mf=yp("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pf=yp("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ff=yp("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),gf=yp("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),xf=yp("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),vf=yp("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),yf=yp("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),bf=yp("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),wf=yp("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Sf=yp("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),jf=yp("hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]),Cf=yp("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),kf=yp("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),Nf=yp("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),_f=yp("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Pf=yp("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),Ef=yp("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Rf=yp("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Af=yp("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),Tf=yp("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Mf=yp("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Df=yp("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Lf=yp("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]),Ff=yp("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),If=yp("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Of=yp("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),zf=yp("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Bf=yp("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),$f=yp("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Uf=yp("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Vf=yp("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),qf=yp("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),Hf=yp("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),Gf=yp("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),Kf=yp("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),Wf=yp("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),Qf=yp("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),Yf=yp("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Xf=yp("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),Zf=yp("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]),Jf=yp("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),eg=yp("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),tg=yp("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),ng=yp("panel-top",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]]),sg=yp("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),ag=yp("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),rg=yp("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),ig=yp("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),og=yp("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),lg=yp("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),cg=yp("pin-off",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),dg=yp("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),ug=yp("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),hg=yp("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),mg=yp("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),pg=yp("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),fg=yp("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),gg=yp("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),xg=yp("rows-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]),vg=yp("ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),yg=yp("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),bg=yp("scan-barcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]),wg=yp("scan-search",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]]),Sg=yp("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),jg=yp("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cg=yp("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),kg=yp("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Ng=yp("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),_g=yp("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Pg=yp("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]),Eg=yp("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Rg=yp("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Ag=yp("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Tg=yp("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Mg=yp("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Dg=yp("star-off",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Lg=yp("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Fg=yp("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]),Ig=yp("stretch-horizontal",[["rect",{width:"20",height:"6",x:"2",y:"4",rx:"2",key:"qdearl"}],["rect",{width:"20",height:"6",x:"2",y:"14",rx:"2",key:"1xrn6j"}]]),Og=yp("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),zg=yp("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Bg=yp("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]),$g=yp("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]),Ug=yp("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]),Vg=yp("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),qg=yp("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Hg=yp("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Gg=yp("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Kg=yp("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Wg=yp("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Qg=yp("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Yg=yp("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Xg=yp("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]),Zg=yp("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Jg=yp("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ex=yp("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),tx=yp("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),nx=yp("warehouse",[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]]),sx=yp("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ax=yp("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rx=yp("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ix=yp("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);if("undefined"!=typeof window&&!window.__selectA11yFixApplied){window.__selectA11yFixApplied=!0,document.addEventListener("focusin",e=>{const t=e.target;"SELECT"===t.tagName&&"true"===t.getAttribute("aria-hidden")&&(e.preventDefault(),e.stopPropagation(),t.blur())},!0);const e=()=>{document.querySelectorAll('select[aria-hidden="true"]').forEach(e=>{e.tabIndex=-1,"inert"in e&&(e.inert=!0)})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e();new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["aria-hidden"]})}const ox=ep,lx=np,cx=p.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(tp,{ref:s,className:al("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,c.jsx(sp,{asChild:!0,children:c.jsx(Vp,{className:"h-4 w-4 opacity-50"})})]}));cx.displayName=tp.displayName;const dx=p.forwardRef(({className:e,...t},n)=>c.jsx(up,{ref:n,className:al("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(Gp,{className:"h-4 w-4"})}));dx.displayName=up.displayName;const ux=p.forwardRef(({className:e,...t},n)=>c.jsx(hp,{ref:n,className:al("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(Vp,{className:"h-4 w-4"})}));ux.displayName=hp.displayName;const hx=p.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>c.jsx(ap,{children:c.jsxs(rp,{ref:a,className:al("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[c.jsx(dx,{}),c.jsx(ip,{className:al("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),c.jsx(ux,{})]})}));hx.displayName=rp.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(op,{ref:n,className:al("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=op.displayName;const mx=p.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(lp,{ref:s,className:al("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(dp,{children:c.jsx(Up,{className:"h-4 w-4"})})}),c.jsx(cp,{children:t})]}));mx.displayName=lp.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(mp,{ref:n,className:al("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=mp.displayName;var px="Switch",[fx]=Vl(px),[gx,xx]=fx(px),vx=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:r,required:i,disabled:o,value:l="on",onCheckedChange:d,form:u,...h}=e,[m,f]=p.useState(null),g=ll(t,e=>f(e)),x=p.useRef(!1),v=!m||(u||!!m.closest("form")),[y,b]=Ju({prop:a,defaultProp:r??!1,onChange:d,caller:px});return c.jsxs(gx,{scope:n,checked:y,disabled:o,children:[c.jsx(nc.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Sx(y),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:g,onClick:Ul(e.onClick,e=>{b(e=>!e),v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),v&&c.jsx(wx,{control:m,bubbles:!x.current,name:s,value:l,checked:y,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});vx.displayName=px;var yx="SwitchThumb",bx=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=xx(yx,n);return c.jsx(nc.span,{"data-state":Sx(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});bx.displayName=yx;var wx=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...a},r)=>{const i=p.useRef(null),o=ll(i,r),l=eh(n),d=Cu(t);return p.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&a){const t=new Event("click",{bubbles:s});a.call(e,n),e.dispatchEvent(t)}},[l,n,s]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Sx(e){return e?"checked":"unchecked"}wx.displayName="SwitchBubbleInput";var jx=vx,Cx=bx;const kx=p.forwardRef(({className:e,...t},n)=>c.jsx(jx,{className:al("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:c.jsx(Cx,{className:al("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kx.displayName=jx.displayName;var Nx=["PageUp","PageDown"],_x=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Px={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ex="Slider",[Rx,Ax,Tx]=Ql(Ex),[Mx]=Vl(Ex,[Tx]),[Dx,Lx]=Mx(Ex),Fx=p.forwardRef((e,t)=>{const{name:n,min:s=0,max:a=100,step:r=1,orientation:i="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:d=[s],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:g,...x}=e,v=p.useRef(new Set),y=p.useRef(0),b="horizontal"===i?zx:Bx,[w=[],S]=Ju({prop:u,defaultProp:d,onChange:e=>{const t=[...v.current];t[y.current]?.focus(),h(e)}}),j=p.useRef(w);function C(e,t,{commit:n}={commit:!1}){const i=function(e){return(String(e).split(".")[1]||"").length}(r),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-s)/r)*r+s,i),c=$l(o,[s,a]);S((e=[])=>{const s=function(e=[],t,n){const s=[...e];return s[n]=t,s.sort((e,t)=>e-t)}(e,c,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(s,l*r)){y.current=s.indexOf(c);const t=String(s)!==String(e);return t&&n&&m(s),t?s:e}return e})}return c.jsx(Dx,{scope:e.__scopeSlider,name:n,disabled:o,min:s,max:a,valueIndexToChangeRef:y,thumbs:v.current,values:w,orientation:i,form:g,children:c.jsx(Rx.Provider,{scope:e.__scopeSlider,children:c.jsx(Rx.Slot,{scope:e.__scopeSlider,children:c.jsx(b,{"aria-disabled":o,"data-disabled":o?"":void 0,...x,ref:t,onPointerDown:Ul(x.onPointerDown,()=>{o||(j.current=w)}),min:s,max:a,inverted:f,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),s=Math.min(...n);return n.indexOf(s)}(w,e);C(e,t)},onSlideMove:o?void 0:function(e){C(e,y.current)},onSlideEnd:o?void 0:function(){const e=j.current[y.current];w[y.current]!==e&&m(w)},onHomeKeyDown:()=>!o&&C(s,0,{commit:!0}),onEndKeyDown:()=>!o&&C(a,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const n=Nx.includes(e.key)||e.shiftKey&&_x.includes(e.key)?10:1,s=y.current;C(w[s]+r*n*t,s,{commit:!0})}}})})})})});Fx.displayName=Ex;var[Ix,Ox]=Mx(Ex,{startEdge:"left",endEdge:"right",size:"width",direction:1}),zx=p.forwardRef((e,t)=>{const{min:n,max:s,dir:a,inverted:r,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:d,...u}=e,[h,m]=p.useState(null),f=ll(t,e=>m(e)),g=p.useRef(void 0),x=Xl(a),v="ltr"===x,y=v&&!r||!v&&r;function b(e){const t=g.current||h.getBoundingClientRect(),a=Xx([0,t.width],y?[n,s]:[s,n]);return g.current=t,a(e-t.left)}return c.jsx(Ix,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:c.jsx($x,{dir:x,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=b(e.clientX);i?.(t)},onSlideMove:e=>{const t=b(e.clientX);o?.(t)},onSlideEnd:()=>{g.current=void 0,l?.()},onStepKeyDown:e=>{const t=Px[y?"from-left":"from-right"].includes(e.key);d?.({event:e,direction:t?-1:1})}})})}),Bx=p.forwardRef((e,t)=>{const{min:n,max:s,inverted:a,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onStepKeyDown:l,...d}=e,u=p.useRef(null),h=ll(t,u),m=p.useRef(void 0),f=!a;function g(e){const t=m.current||u.current.getBoundingClientRect(),a=Xx([0,t.height],f?[s,n]:[n,s]);return m.current=t,a(e-t.top)}return c.jsx(Ix,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:c.jsx($x,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=g(e.clientY);r?.(t)},onSlideMove:e=>{const t=g(e.clientY);i?.(t)},onSlideEnd:()=>{m.current=void 0,o?.()},onStepKeyDown:e=>{const t=Px[f?"from-bottom":"from-top"].includes(e.key);l?.({event:e,direction:t?-1:1})}})})}),$x=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:a,onSlideEnd:r,onHomeKeyDown:i,onEndKeyDown:o,onStepKeyDown:l,...d}=e,u=Lx(Ex,n);return c.jsx(nc.span,{...d,ref:t,onKeyDown:Ul(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):Nx.concat(_x).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:Ul(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():s(e)}),onPointerMove:Ul(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:Ul(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(e))})})}),Ux="SliderTrack",Vx=p.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=Lx(Ux,n);return c.jsx(nc.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});Vx.displayName=Ux;var qx="SliderRange",Hx=p.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=Lx(qx,n),r=Ox(qx,n),i=ll(t,p.useRef(null)),o=a.values.length,l=a.values.map(e=>Yx(e,a.min,a.max)),d=o>1?Math.min(...l):0,u=100-Math.max(...l);return c.jsx(nc.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:i,style:{...e.style,[r.startEdge]:d+"%",[r.endEdge]:u+"%"}})});Hx.displayName=qx;var Gx="SliderThumb",Kx=p.forwardRef((e,t)=>{const n=Ax(e.__scopeSlider),[s,a]=p.useState(null),r=ll(t,e=>a(e)),i=p.useMemo(()=>s?n().findIndex(e=>e.ref.current===s):-1,[n,s]);return c.jsx(Wx,{...e,ref:r,index:i})}),Wx=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:a,...r}=e,i=Lx(Gx,n),o=Ox(Gx,n),[l,d]=p.useState(null),u=ll(t,e=>d(e)),h=!l||(i.form||!!l.closest("form")),m=Cu(l),f=i.values[s],g=void 0===f?0:Yx(f,i.min,i.max),x=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(s,i.values.length),v=m?.[o.size],y=v?function(e,t,n){const s=e/2,a=Xx([0,50],[0,s]);return(s-a(t)*n)*n}(v,g,o.direction):0;return p.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${g}% + ${y}px)`},children:[c.jsx(Rx.ItemSlot,{scope:e.__scopeSlider,children:c.jsx(nc.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":i.min,"aria-valuenow":f,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...r,ref:u,style:void 0===f?{display:"none"}:e.style,onFocus:Ul(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})})}),h&&c.jsx(Qx,{name:a??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:f},s)]})});Kx.displayName=Gx;var Qx=p.forwardRef(({__scopeSlider:e,value:t,...n},s)=>{const a=p.useRef(null),r=ll(a,s),i=eh(t);return p.useEffect(()=>{const e=a.current;if(!e)return;const n=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&s){const n=new Event("input",{bubbles:!0});s.call(e,t),e.dispatchEvent(n)}},[i,t]),c.jsx(nc.input,{style:{display:"none"},...n,ref:r,defaultValue:t})});function Yx(e,t,n){return $l(100/(n-t)*(e-t),[0,100])}function Xx(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}Qx.displayName="RadioBubbleInput";var Zx=Fx,Jx=Vx,ev=Hx,tv=Kx;function nv(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const s=n.reduce((t,{useScope:n,scopeName:s})=>({...t,...n(e)[`__scope${s}`]}),{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}p.forwardRef(({className:e,...t},n)=>c.jsxs(Zx,{ref:n,className:al("relative flex w-full touch-none select-none items-center",e),...t,children:[c.jsx(Jx,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:c.jsx(ev,{className:"absolute h-full bg-primary"})}),c.jsx(tv,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})).displayName=Zx.displayName;var sv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=hl(`Primitive.${t}`),s=p.forwardRef((e,s)=>{const{asChild:a,...r}=e,i=a?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),av="Progress",[rv]=function(e,t=[]){let n=[];const s=()=>{const t=n.map(e=>p.createContext(e));return function(n){const s=n?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...n,[e]:s}}),[n,s])}};return s.scopeName=e,[function(t,s){const a=p.createContext(s);a.displayName=t+"Context";const r=n.length;n=[...n,s];const i=t=>{const{scope:n,children:s,...i}=t,o=n?.[e]?.[r]||a,l=p.useMemo(()=>i,Object.values(i));return c.jsx(o.Provider,{value:l,children:s})};return i.displayName=t+"Provider",[i,function(n,i){const o=i?.[e]?.[r]||a,l=p.useContext(o);if(l)return l;if(void 0!==s)return s;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},nv(s,...t)]}(av),[iv,ov]=rv(av),lv=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:r=uv,...i}=e;(a||0===a)&&pv(a);const o=pv(a)?a:100;null!==s&&fv(s,o);const l=fv(s,o)?s:null,d=mv(l)?r(l,o):void 0;return c.jsx(iv,{scope:n,value:l,max:o,children:c.jsx(sv.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":mv(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":hv(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});lv.displayName=av;var cv="ProgressIndicator",dv=p.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=ov(cv,n);return c.jsx(sv.div,{"data-state":hv(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});function uv(e,t){return`${Math.round(e/t*100)}%`}function hv(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function mv(e){return"number"==typeof e}function pv(e){return mv(e)&&!isNaN(e)&&e>0}function fv(e,t){return mv(e)&&!isNaN(e)&&e<=t&&e>=0}dv.displayName=cv;var gv=lv,xv=dv;const vv=p.forwardRef(({className:e,value:t,...n},s)=>c.jsx(gv,{ref:s,className:al("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:c.jsx(xv,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function yv({className:e,...t}){return c.jsx("div",{className:al("animate-pulse rounded-md bg-muted",e),...t})}vv.displayName=gv.displayName;var bv="rovingFocusGroup.onEntryFocus",wv={bubbles:!1,cancelable:!0},Sv="RovingFocusGroup",[jv,Cv,kv]=Ql(Sv),[Nv,_v]=Vl(Sv,[kv]),[Pv,Ev]=Nv(Sv),Rv=p.forwardRef((e,t)=>c.jsx(jv.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(jv.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(Av,{...e,ref:t})})}));Rv.displayName=Sv;var Av=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:r,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=p.useRef(null),f=ll(t,m),g=Xl(r),[x,v]=Ju({prop:i,defaultProp:o??null,onChange:l,caller:Sv}),[y,b]=p.useState(!1),w=ac(d),S=Cv(n),j=p.useRef(!1),[C,k]=p.useState(0);return p.useEffect(()=>{const e=m.current;if(e)return e.addEventListener(bv,w),()=>e.removeEventListener(bv,w)},[w]),c.jsx(Pv,{scope:n,orientation:s,dir:g,loop:a,currentTabStopId:x,onItemFocus:p.useCallback(e=>v(e),[v]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:p.useCallback(()=>k(e=>e-1),[]),children:c.jsx(nc.div,{tabIndex:y||0===C?-1:0,"data-orientation":s,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:Ul(e.onMouseDown,()=>{j.current=!0}),onFocus:Ul(e.onFocus,e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(bv,wv);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=S().filter(e=>e.focusable);Lv([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),u)}}j.current=!1}),onBlur:Ul(e.onBlur,()=>b(!1))})})}),Tv="RovingFocusGroupItem",Mv=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:r,children:i,...o}=e,l=Tc(),d=r||l,u=Ev(Tv,n),h=u.currentTabStopId===d,m=Cv(n),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:x}=u;return p.useEffect(()=>{if(s)return f(),()=>g()},[s,f,g]),c.jsx(jv.ItemSlot,{scope:n,id:d,focusable:s,active:a,children:c.jsx(nc.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Ul(e.onMouseDown,e=>{s?u.onItemFocus(d):e.preventDefault()}),onFocus:Ul(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Ul(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const s=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(s)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)?void 0:Dv[s]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const r=a.indexOf(e.currentTarget);a=u.loop?(s=r+1,(n=a).map((e,t)=>n[(s+t)%n.length])):a.slice(r+1)}setTimeout(()=>Lv(a))}var n,s}),children:"function"==typeof i?i({isCurrentTabStop:h,hasTabStop:null!=x}):i})})});Mv.displayName=Tv;var Dv={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Lv(e,t=!1){const n=document.activeElement;for(const s of e){if(s===n)return;if(s.focus({preventScroll:t}),document.activeElement!==n)return}}var Fv=Rv,Iv=Mv;var Ov=e=>{const{present:t,children:n}=e,s=function(e){const[t,n]=p.useState(),s=p.useRef(null),a=p.useRef(e),r=p.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return p.useReducer((e,n)=>t[e][n]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const e=zv(s.current);r.current="mounted"===o?e:"none"},[o]),Ec(()=>{const t=s.current,n=a.current;if(n!==e){const s=r.current,i=zv(t);if(e)l("MOUNT");else if("none"===i||"none"===t?.display)l("UNMOUNT");else{l(n&&s!==i?"ANIMATION_OUT":"UNMOUNT")}a.current=e}},[e,l]),Ec(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=r=>{const i=zv(s.current).includes(CSS.escape(r.animationName));if(r.target===t&&i&&(l("ANIMATION_END"),!a.current)){const s=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=s)})}},o=e=>{e.target===t&&(r.current=zv(s.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:p.useCallback(e=>{s.current=e?getComputedStyle(e):null,n(e)},[])}}(t),a="function"==typeof n?n({present:s.isPresent}):p.Children.only(n),r=ll(s.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a));return"function"==typeof n||s.isPresent?p.cloneElement(a,{ref:r}):null};function zv(e){return e?.animationName||"none"}Ov.displayName="Presence";var Bv="Tabs",[$v]=Vl(Bv,[_v]),Uv=_v(),[Vv,qv]=$v(Bv),Hv=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:r,orientation:i="horizontal",dir:o,activationMode:l="automatic",...d}=e,u=Xl(o),[h,m]=Ju({prop:s,onChange:a,defaultProp:r??"",caller:Bv});return c.jsx(Vv,{scope:n,baseId:Tc(),value:h,onValueChange:m,orientation:i,dir:u,activationMode:l,children:c.jsx(nc.div,{dir:u,"data-orientation":i,...d,ref:t})})});Hv.displayName=Bv;var Gv="TabsList",Kv=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,r=qv(Gv,n),i=Uv(n);return c.jsx(Fv,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:s,children:c.jsx(nc.div,{role:"tablist","aria-orientation":r.orientation,...a,ref:t})})});Kv.displayName=Gv;var Wv="TabsTrigger",Qv=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...r}=e,i=qv(Wv,n),o=Uv(n),l=Zv(i.baseId,s),d=Jv(i.baseId,s),u=s===i.value;return c.jsx(Iv,{asChild:!0,...o,focusable:!a,active:u,children:c.jsx(nc.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...r,ref:t,onMouseDown:Ul(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:Ul(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:Ul(e.onFocus,()=>{const e="manual"!==i.activationMode;u||a||!e||i.onValueChange(s)})})})});Qv.displayName=Wv;var Yv="TabsContent",Xv=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:r,...i}=e,o=qv(Yv,n),l=Zv(o.baseId,s),d=Jv(o.baseId,s),u=s===o.value,h=p.useRef(u);return p.useEffect(()=>{const e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),c.jsx(Ov,{present:a||u,children:({present:n})=>c.jsx(nc.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:n&&r})})});function Zv(e,t){return`${e}-trigger-${t}`}function Jv(e,t){return`${e}-content-${t}`}Xv.displayName=Yv;var ey=Kv,ty=Qv,ny=Xv;const sy=Hv,ay=p.forwardRef(({className:e,...t},n)=>c.jsx(ey,{ref:n,className:al("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ay.displayName=ey.displayName;const ry=p.forwardRef(({className:e,...t},n)=>c.jsx(ty,{ref:n,className:al("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ry.displayName=ty.displayName;const iy=p.forwardRef(({className:e,...t},n)=>c.jsx(ny,{ref:n,className:al("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));function oy(e){const t=ly(e),n=p.forwardRef((e,n)=>{const{children:s,...a}=e,r=p.Children.toArray(s),i=r.find(dy);if(i){const e=i.props.children,s=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...a,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,s):null})}return c.jsx(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}function ly(e){const t=p.forwardRef((e,t)=>{const{children:n,...s}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const s in t){const a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==p.Fragment&&(a.ref=t?ol(t,e):e),p.cloneElement(n,a)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}iy.displayName=ny.displayName;var cy=Symbol("radix.slottable");function dy(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===cy}var uy="Dialog",[hy,my]=Vl(uy),[py,fy]=hy(uy),gy=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:r,modal:i=!0}=e,o=p.useRef(null),l=p.useRef(null),[d,u]=Ju({prop:s,defaultProp:a??!1,onChange:r,caller:uy});return c.jsx(py,{scope:t,triggerRef:o,contentRef:l,contentId:Tc(),titleId:Tc(),descriptionId:Tc(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(e=>!e),[u]),modal:i,children:n})};gy.displayName=uy;var xy="DialogTrigger",vy=p.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=fy(xy,n),r=ll(t,a.triggerRef);return c.jsx(nc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Oy(a.open),...s,ref:r,onClick:Ul(e.onClick,a.onOpenToggle)})});vy.displayName=xy;var yy="DialogPortal",[by,wy]=hy(yy,{forceMount:void 0}),Sy=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,r=fy(yy,t);return c.jsx(by,{scope:t,forceMount:n,children:p.Children.map(s,e=>c.jsx(Ov,{present:n||r.open,children:c.jsx(Ku,{asChild:!0,container:a,children:e})}))})};Sy.displayName=yy;var jy="DialogOverlay",Cy=p.forwardRef((e,t)=>{const n=wy(jy,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,r=fy(jy,e.__scopeDialog);return r.modal?c.jsx(Ov,{present:s||r.open,children:c.jsx(Ny,{...a,ref:t})}):null});Cy.displayName=jy;var ky=oy("DialogOverlay.RemoveScroll"),Ny=p.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=fy(jy,n);return c.jsx(Xh,{as:ky,allowPinchZoom:!0,shards:[a.contentRef],children:c.jsx(nc.div,{"data-state":Oy(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),_y="DialogContent",Py=p.forwardRef((e,t)=>{const n=wy(_y,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,r=fy(_y,e.__scopeDialog);return c.jsx(Ov,{present:s||r.open,children:r.modal?c.jsx(Ey,{...a,ref:t}):c.jsx(Ry,{...a,ref:t})})});Py.displayName=_y;var Ey=p.forwardRef((e,t)=>{const n=fy(_y,e.__scopeDialog),s=p.useRef(null),a=ll(t,n.contentRef,s);return p.useEffect(()=>{const e=s.current;if(e)return dh(e)},[]),c.jsx(Ay,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ul(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ul(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Ul(e.onFocusOutside,e=>e.preventDefault())})}),Ry=p.forwardRef((e,t)=>{const n=fy(_y,e.__scopeDialog),s=p.useRef(!1),a=p.useRef(!1);return c.jsx(Ay,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||n.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),Ay=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:r,...i}=e,o=fy(_y,n),l=p.useRef(null),d=ll(t,l);return xc(),c.jsxs(c.Fragment,{children:[c.jsx(Sc,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:r,children:c.jsx(dc,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Oy(o.open),...i,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(Uy,{titleId:o.titleId}),c.jsx(Vy,{contentRef:l,descriptionId:o.descriptionId})]})]})}),Ty="DialogTitle",My=p.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=fy(Ty,n);return c.jsx(nc.h2,{id:a.titleId,...s,ref:t})});My.displayName=Ty;var Dy="DialogDescription",Ly=p.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=fy(Dy,n);return c.jsx(nc.p,{id:a.descriptionId,...s,ref:t})});Ly.displayName=Dy;var Fy="DialogClose",Iy=p.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=fy(Fy,n);return c.jsx(nc.button,{type:"button",...s,ref:t,onClick:Ul(e.onClick,()=>a.onOpenChange(!1))})});function Oy(e){return e?"open":"closed"}Iy.displayName=Fy;var zy="DialogTitleWarning",[By,$y]=function(e,t){const n=p.createContext(t),s=e=>{const{children:t,...s}=e,a=p.useMemo(()=>s,Object.values(s));return c.jsx(n.Provider,{value:a,children:t})};return s.displayName=e+"Provider",[s,function(s){const a=p.useContext(n);if(a)return a;if(void 0!==t)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}]}(zy,{contentName:_y,titleName:Ty,docsSlug:"dialog"}),Uy=({titleId:e})=>{const t=$y(zy),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},Vy=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$y("DialogDescriptionWarning").contentName}}.`;return p.useEffect(()=>{const n=e.current?.getAttribute("aria-describedby");if(t&&n){document.getElementById(t)}},[n,e,t]),null},qy=gy,Hy=vy,Gy=Sy,Ky=Cy,Wy=Py,Qy=My,Yy=Ly,Xy=Iy;const Zy=qy,Jy=Gy,eb=p.forwardRef(({className:e,...t},n)=>c.jsx(Ky,{ref:n,className:al("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));eb.displayName=Ky.displayName;const tb=p.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(Jy,{children:[c.jsx(eb,{}),c.jsxs(Wy,{ref:s,className:al("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,c.jsxs(Xy,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(ax,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tb.displayName=Wy.displayName;const nb=({className:e,...t})=>c.jsx("div",{className:al("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nb.displayName="DialogHeader";const sb=({className:e,...t})=>c.jsx("div",{className:al("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});sb.displayName="DialogFooter";const ab=p.forwardRef(({className:e,...t},n)=>c.jsx(Qy,{ref:n,className:al("text-lg font-semibold leading-none tracking-tight",e),...t}));ab.displayName=Qy.displayName;const rb=p.forwardRef(({className:e,...t},n)=>c.jsx(Yy,{ref:n,className:al("text-sm text-muted-foreground",e),...t}));rb.displayName=Yy.displayName;var ib=Symbol("radix.slottable");function ob(e){const t=({children:e})=>c.jsx(c.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=ib,t}var lb="AlertDialog",[cb]=Vl(lb,[my]),db=my(),ub=e=>{const{__scopeAlertDialog:t,...n}=e,s=db(t);return c.jsx(qy,{...s,...n,modal:!0})};ub.displayName=lb;p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=db(n);return c.jsx(Hy,{...a,...s,ref:t})}).displayName="AlertDialogTrigger";var hb=e=>{const{__scopeAlertDialog:t,...n}=e,s=db(t);return c.jsx(Gy,{...s,...n})};hb.displayName="AlertDialogPortal";var mb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=db(n);return c.jsx(Ky,{...a,...s,ref:t})});mb.displayName="AlertDialogOverlay";var pb="AlertDialogContent",[fb,gb]=cb(pb),xb=ob("AlertDialogContent"),vb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,r=db(n),i=p.useRef(null),o=ll(t,i),l=p.useRef(null);return c.jsx(By,{contentName:pb,titleName:yb,docsSlug:"alert-dialog",children:c.jsx(fb,{scope:n,cancelRef:l,children:c.jsxs(Wy,{role:"alertdialog",...r,...a,ref:o,onOpenAutoFocus:Ul(a.onOpenAutoFocus,e=>{e.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[c.jsx(xb,{children:s}),c.jsx(Nb,{contentRef:i})]})})})});vb.displayName=pb;var yb="AlertDialogTitle",bb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=db(n);return c.jsx(Qy,{...a,...s,ref:t})});bb.displayName=yb;var wb="AlertDialogDescription",Sb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=db(n);return c.jsx(Yy,{...a,...s,ref:t})});Sb.displayName=wb;var jb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=db(n);return c.jsx(Xy,{...a,...s,ref:t})});jb.displayName="AlertDialogAction";var Cb="AlertDialogCancel",kb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=gb(Cb,n),r=db(n),i=ll(t,a);return c.jsx(Xy,{...r,...s,ref:i})});kb.displayName=Cb;var Nb=({contentRef:e})=>{const t=`\`${pb}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${pb}\` by passing a \`${wb}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${pb}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))},[t,e]),null},_b=mb,Pb=vb,Eb=jb,Rb=kb,Ab=bb,Tb=Sb;const Mb=ub,Db=hb,Lb=p.forwardRef(({className:e,...t},n)=>c.jsx(_b,{className:al("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Lb.displayName=_b.displayName;const Fb=p.forwardRef(({className:e,...t},n)=>c.jsxs(Db,{children:[c.jsx(Lb,{}),c.jsx(Pb,{ref:n,className:al("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Fb.displayName=Pb.displayName;const Ib=({className:e,...t})=>c.jsx("div",{className:al("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ib.displayName="AlertDialogHeader";const Ob=({className:e,...t})=>c.jsx("div",{className:al("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ob.displayName="AlertDialogFooter";const zb=p.forwardRef(({className:e,...t},n)=>c.jsx(Ab,{ref:n,className:al("text-lg font-semibold",e),...t}));zb.displayName=Ab.displayName;const Bb=p.forwardRef(({className:e,children:t,...n},s)=>c.jsx(Tb,{asChild:!0,...n,children:c.jsx("div",{ref:s,className:al("text-sm text-muted-foreground",e),children:t})}));Bb.displayName=Tb.displayName;const $b=p.forwardRef(({className:e,...t},n)=>c.jsx(Eb,{ref:n,className:al("",e),...t}));$b.displayName=Eb.displayName;const Ub=p.forwardRef(({className:e,...t},n)=>c.jsx(Rb,{ref:n,className:al("",e),...t}));function Vb(e){const t=qb(e),n=p.forwardRef((e,n)=>{const{children:s,...a}=e,r=p.Children.toArray(s),i=r.find(Gb);if(i){const e=i.props.children,s=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...a,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,s):null})}return c.jsx(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}function qb(e){const t=p.forwardRef((e,t)=>{const{children:n,...s}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const s in t){const a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==p.Fragment&&(a.ref=t?ol(t,e):e),p.cloneElement(n,a)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Ub.displayName=Rb.displayName;var Hb=Symbol("radix.slottable");function Gb(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Hb}var Kb=["Enter"," "],Wb=["ArrowUp","PageDown","End"],Qb=["ArrowDown","PageUp","Home",...Wb],Yb={ltr:[...Kb,"ArrowRight"],rtl:[...Kb,"ArrowLeft"]},Xb={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zb="Menu",[Jb,ew,tw]=Ql(Zb),[nw,sw]=Vl(Zb,[tw,_u,_v]),aw=_u(),rw=_v(),[iw,ow]=nw(Zb),[lw,cw]=nw(Zb),dw=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:r,modal:i=!0}=e,o=aw(t),[l,d]=p.useState(null),u=p.useRef(!1),h=ac(r),m=Xl(a);return p.useEffect(()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),c.jsx(Vu,{...o,children:c.jsx(iw,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:d,children:c.jsx(lw,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:i,children:s})})})};dw.displayName=Zb;var uw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=aw(n);return c.jsx(qu,{...a,...s,ref:t})});uw.displayName="MenuAnchor";var hw="MenuPortal",[mw,pw]=nw(hw,{forceMount:void 0}),fw=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,r=ow(hw,t);return c.jsx(mw,{scope:t,forceMount:n,children:c.jsx(Ov,{present:n||r.open,children:c.jsx(Ku,{asChild:!0,container:a,children:s})})})};fw.displayName=hw;var gw="MenuContent",[xw,vw]=nw(gw),yw=p.forwardRef((e,t)=>{const n=pw(gw,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,r=ow(gw,e.__scopeMenu),i=cw(gw,e.__scopeMenu);return c.jsx(Jb.Provider,{scope:e.__scopeMenu,children:c.jsx(Ov,{present:s||r.open,children:c.jsx(Jb.Slot,{scope:e.__scopeMenu,children:i.modal?c.jsx(bw,{...a,ref:t}):c.jsx(ww,{...a,ref:t})})})})}),bw=p.forwardRef((e,t)=>{const n=ow(gw,e.__scopeMenu),s=p.useRef(null),a=ll(t,s);return p.useEffect(()=>{const e=s.current;if(e)return dh(e)},[]),c.jsx(jw,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ul(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ww=p.forwardRef((e,t)=>{const n=ow(gw,e.__scopeMenu);return c.jsx(jw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Sw=Vb("MenuContent.ScrollLock"),jw=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:g,...x}=e,v=ow(gw,n),y=cw(gw,n),b=aw(n),w=rw(n),S=ew(n),[j,C]=p.useState(null),k=p.useRef(null),N=ll(t,k,v.onContentChange),_=p.useRef(0),P=p.useRef(""),E=p.useRef(0),R=p.useRef(null),A=p.useRef("right"),T=p.useRef(0),M=g?Xh:p.Fragment,D=g?{as:Sw,allowPinchZoom:!0}:void 0,L=e=>{const t=P.current+e,n=S().filter(e=>!e.disabled),s=document.activeElement,a=n.find(e=>e.ref.current===s)?.textValue,r=function(e,t,n){const s=t.length>1&&Array.from(t).every(e=>e===t[0]),a=s?t[0]:t,r=n?e.indexOf(n):-1;let i=(o=e,l=Math.max(r,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===a.length&&(i=i.filter(e=>e!==n));const c=i.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}(n.map(e=>e.textValue),t,a),i=n.find(e=>e.textValue===r)?.ref.current;!function e(t){P.current=t,window.clearTimeout(_.current),""!==t&&(_.current=window.setTimeout(()=>e(""),1e3))}(t),i&&setTimeout(()=>i.focus())};p.useEffect(()=>()=>window.clearTimeout(_.current),[]),xc();const F=p.useCallback(e=>A.current===R.current?.side&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:s}=e;let a=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const e=t[r],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>s!=u>s&&n<(d-l)*(s-c)/(u-c)+l&&(a=!a)}return a}(n,t)}(e,R.current?.area),[]);return c.jsx(xw,{scope:n,searchRef:P,onItemEnter:p.useCallback(e=>{F(e)&&e.preventDefault()},[F]),onItemLeave:p.useCallback(e=>{F(e)||(k.current?.focus(),C(null))},[F]),onTriggerLeave:p.useCallback(e=>{F(e)&&e.preventDefault()},[F]),pointerGraceTimerRef:E,onPointerGraceIntentChange:p.useCallback(e=>{R.current=e},[]),children:c.jsx(M,{...D,children:c.jsx(Sc,{asChild:!0,trapped:a,onMountAutoFocus:Ul(r,e=>{e.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:c.jsx(dc,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:c.jsx(Fv,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:s,currentTabStopId:j,onCurrentTabStopIdChange:C,onEntryFocus:Ul(l,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(Hu,{role:"menu","aria-orientation":"vertical","data-state":Xw(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...x,ref:N,style:{outline:"none",...x.style},onKeyDown:Ul(x.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,s=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&s&&L(e.key));const a=k.current;if(e.target!==a)return;if(!Qb.includes(e.key))return;e.preventDefault();const r=S().filter(e=>!e.disabled).map(e=>e.ref.current);Wb.includes(e.key)&&r.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(r)}),onBlur:Ul(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(_.current),P.current="")}),onPointerMove:Ul(e.onPointerMove,eS(e=>{const t=e.target,n=T.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>T.current?"right":"left";A.current=t,T.current=e.clientX}}))})})})})})})});yw.displayName=gw;var Cw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return c.jsx(nc.div,{role:"group",...s,ref:t})});Cw.displayName="MenuGroup";var kw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return c.jsx(nc.div,{...s,ref:t})});kw.displayName="MenuLabel";var Nw="MenuItem",_w="menu.itemSelect",Pw=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,r=p.useRef(null),i=cw(Nw,e.__scopeMenu),o=vw(Nw,e.__scopeMenu),l=ll(t,r),d=p.useRef(!1);return c.jsx(Ew,{...a,ref:l,disabled:n,onClick:Ul(e.onClick,()=>{const e=r.current;if(!n&&e){const t=new CustomEvent(_w,{bubbles:!0,cancelable:!0});e.addEventListener(_w,e=>s?.(e),{once:!0}),sc(e,t),t.defaultPrevented?d.current=!1:i.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),d.current=!0},onPointerUp:Ul(e.onPointerUp,e=>{d.current||e.currentTarget?.click()}),onKeyDown:Ul(e.onKeyDown,e=>{const t=""!==o.searchRef.current;n||t&&" "===e.key||Kb.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});Pw.displayName=Nw;var Ew=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...r}=e,i=vw(Nw,n),o=rw(n),l=p.useRef(null),d=ll(t,l),[u,h]=p.useState(!1),[m,f]=p.useState("");return p.useEffect(()=>{const e=l.current;e&&f((e.textContent??"").trim())},[r.children]),c.jsx(Jb.ItemSlot,{scope:n,disabled:s,textValue:a??m,children:c.jsx(Iv,{asChild:!0,...o,focusable:!s,children:c.jsx(nc.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...r,ref:d,onPointerMove:Ul(e.onPointerMove,eS(e=>{if(s)i.onItemLeave(e);else if(i.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Ul(e.onPointerLeave,eS(e=>i.onItemLeave(e))),onFocus:Ul(e.onFocus,()=>h(!0)),onBlur:Ul(e.onBlur,()=>h(!1))})})})}),Rw=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return c.jsx(Ow,{scope:e.__scopeMenu,checked:n,children:c.jsx(Pw,{role:"menuitemcheckbox","aria-checked":Zw(n)?"mixed":n,...a,ref:t,"data-state":Jw(n),onSelect:Ul(a.onSelect,()=>s?.(!!Zw(n)||!n),{checkForDefaultPrevented:!1})})})});Rw.displayName="MenuCheckboxItem";var Aw="MenuRadioGroup",[Tw,Mw]=nw(Aw,{value:void 0,onValueChange:()=>{}}),Dw=p.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,r=ac(s);return c.jsx(Tw,{scope:e.__scopeMenu,value:n,onValueChange:r,children:c.jsx(Cw,{...a,ref:t})})});Dw.displayName=Aw;var Lw="MenuRadioItem",Fw=p.forwardRef((e,t)=>{const{value:n,...s}=e,a=Mw(Lw,e.__scopeMenu),r=n===a.value;return c.jsx(Ow,{scope:e.__scopeMenu,checked:r,children:c.jsx(Pw,{role:"menuitemradio","aria-checked":r,...s,ref:t,"data-state":Jw(r),onSelect:Ul(s.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Fw.displayName=Lw;var Iw="MenuItemIndicator",[Ow,zw]=nw(Iw,{checked:!1}),Bw=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,r=zw(Iw,n);return c.jsx(Ov,{present:s||Zw(r.checked)||!0===r.checked,children:c.jsx(nc.span,{...a,ref:t,"data-state":Jw(r.checked)})})});Bw.displayName=Iw;var $w=p.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return c.jsx(nc.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});$w.displayName="MenuSeparator";var Uw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=aw(n);return c.jsx(Gu,{...a,...s,ref:t})});Uw.displayName="MenuArrow";var Vw="MenuSub",[qw,Hw]=nw(Vw),Gw=e=>{const{__scopeMenu:t,children:n,open:s=!1,onOpenChange:a}=e,r=ow(Vw,t),i=aw(t),[o,l]=p.useState(null),[d,u]=p.useState(null),h=ac(a);return p.useEffect(()=>(!1===r.open&&h(!1),()=>h(!1)),[r.open,h]),c.jsx(Vu,{...i,children:c.jsx(iw,{scope:t,open:s,onOpenChange:h,content:d,onContentChange:u,children:c.jsx(qw,{scope:t,contentId:Tc(),triggerId:Tc(),trigger:o,onTriggerChange:l,children:n})})})};Gw.displayName=Vw;var Kw="MenuSubTrigger",Ww=p.forwardRef((e,t)=>{const n=ow(Kw,e.__scopeMenu),s=cw(Kw,e.__scopeMenu),a=Hw(Kw,e.__scopeMenu),r=vw(Kw,e.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=r,d={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),c.jsx(uw,{asChild:!0,...d,children:c.jsx(Ew,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Xw(n.open),...e,ref:ol(t,a.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ul(e.onPointerMove,eS(t=>{r.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||i.current||(r.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ul(e.onPointerLeave,eS(e=>{u();const t=n.content?.getBoundingClientRect();if(t){const s=n.content?.dataset.side,a="right"===s,i=a?-5:5,l=t[a?"left":"right"],c=t[a?"right":"left"];r.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:l,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:l,y:t.bottom}],side:s}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(e),e.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:Ul(e.onKeyDown,t=>{const a=""!==r.searchRef.current;e.disabled||a&&" "===t.key||Yb[s.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())})})})});Ww.displayName=Kw;var Qw="MenuSubContent",Yw=p.forwardRef((e,t)=>{const n=pw(gw,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,r=ow(gw,e.__scopeMenu),i=cw(gw,e.__scopeMenu),o=Hw(Qw,e.__scopeMenu),l=p.useRef(null),d=ll(t,l);return c.jsx(Jb.Provider,{scope:e.__scopeMenu,children:c.jsx(Ov,{present:s||r.open,children:c.jsx(Jb.Slot,{scope:e.__scopeMenu,children:c.jsx(jw,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{i.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Ul(e.onFocusOutside,e=>{e.target!==o.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:Ul(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:Ul(e.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),n=Xb[i.dir].includes(e.key);t&&n&&(r.onOpenChange(!1),o.trigger?.focus(),e.preventDefault())})})})})})});function Xw(e){return e?"open":"closed"}function Zw(e){return"indeterminate"===e}function Jw(e){return Zw(e)?"indeterminate":e?"checked":"unchecked"}function eS(e){return t=>"mouse"===t.pointerType?e(t):void 0}Yw.displayName=Qw;var tS=dw,nS=uw,sS=fw,aS=yw,rS=Cw,iS=kw,oS=Pw,lS=Rw,cS=Dw,dS=Fw,uS=Bw,hS=$w,mS=Uw,pS=Gw,fS=Ww,gS=Yw,xS="DropdownMenu",[vS]=Vl(xS,[sw]),yS=sw(),[bS,wS]=vS(xS),SS=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:r,onOpenChange:i,modal:o=!0}=e,l=yS(t),d=p.useRef(null),[u,h]=Ju({prop:a,defaultProp:r??!1,onChange:i,caller:xS});return c.jsx(bS,{scope:t,triggerId:Tc(),triggerRef:d,contentId:Tc(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(e=>!e),[h]),modal:o,children:c.jsx(tS,{...l,open:u,onOpenChange:h,dir:s,modal:o,children:n})})};SS.displayName=xS;var jS="DropdownMenuTrigger",CS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,r=wS(jS,n),i=yS(n);return c.jsx(nS,{asChild:!0,...i,children:c.jsx(nc.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:ol(t,r.triggerRef),onPointerDown:Ul(e.onPointerDown,e=>{s||0!==e.button||!1!==e.ctrlKey||(r.onOpenToggle(),r.open||e.preventDefault())}),onKeyDown:Ul(e.onKeyDown,e=>{s||(["Enter"," "].includes(e.key)&&r.onOpenToggle(),"ArrowDown"===e.key&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});CS.displayName=jS;var kS=e=>{const{__scopeDropdownMenu:t,...n}=e,s=yS(t);return c.jsx(sS,{...s,...n})};kS.displayName="DropdownMenuPortal";var NS="DropdownMenuContent",_S=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=wS(NS,n),r=yS(n),i=p.useRef(!1);return c.jsx(aS,{id:a.contentId,"aria-labelledby":a.triggerId,...r,...s,ref:t,onCloseAutoFocus:Ul(e.onCloseAutoFocus,e=>{i.current||a.triggerRef.current?.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:Ul(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,s=2===t.button||n;a.modal&&!s||(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_S.displayName=NS;p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(rS,{...a,...s,ref:t})}).displayName="DropdownMenuGroup";var PS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(iS,{...a,...s,ref:t})});PS.displayName="DropdownMenuLabel";var ES=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(oS,{...a,...s,ref:t})});ES.displayName="DropdownMenuItem";var RS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(lS,{...a,...s,ref:t})});RS.displayName="DropdownMenuCheckboxItem";var AS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(cS,{...a,...s,ref:t})});AS.displayName="DropdownMenuRadioGroup";var TS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(dS,{...a,...s,ref:t})});TS.displayName="DropdownMenuRadioItem";var MS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(uS,{...a,...s,ref:t})});MS.displayName="DropdownMenuItemIndicator";var DS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(hS,{...a,...s,ref:t})});DS.displayName="DropdownMenuSeparator";p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(mS,{...a,...s,ref:t})}).displayName="DropdownMenuArrow";var LS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(fS,{...a,...s,ref:t})});LS.displayName="DropdownMenuSubTrigger";var FS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=yS(n);return c.jsx(gS,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FS.displayName="DropdownMenuSubContent";var IS=kS,OS=_S,zS=PS,BS=ES,$S=RS,US=TS,VS=MS,qS=DS,HS=LS,GS=FS;const KS=SS,WS=CS,QS=e=>{const{__scopeDropdownMenu:t,children:n,open:s,onOpenChange:a,defaultOpen:r}=e,i=yS(t),[o,l]=Ju({prop:s,defaultProp:r??!1,onChange:a,caller:"DropdownMenuSub"});return c.jsx(pS,{...i,open:o,onOpenChange:l,children:n})},YS=AS,XS=p.forwardRef(({className:e,inset:t,children:n,...s},a)=>c.jsxs(HS,{ref:a,className:al("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,c.jsx(Hp,{className:"ml-auto h-4 w-4"})]}));XS.displayName=HS.displayName;const ZS=p.forwardRef(({className:e,...t},n)=>c.jsx(GS,{ref:n,className:al("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ZS.displayName=GS.displayName;const JS=p.forwardRef(({className:e,sideOffset:t=4,...n},s)=>c.jsx(IS,{children:c.jsx(OS,{ref:s,sideOffset:t,className:al("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));JS.displayName=OS.displayName;const ej=p.forwardRef(({className:e,inset:t,...n},s)=>c.jsx(BS,{ref:s,className:al("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ej.displayName=BS.displayName;const tj=p.forwardRef(({className:e,children:t,checked:n,...s},a)=>c.jsxs($S,{ref:a,className:al("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(VS,{children:c.jsx(Up,{className:"h-4 w-4"})})}),t]}));tj.displayName=$S.displayName;const nj=p.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(US,{ref:s,className:al("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(VS,{children:c.jsx(tf,{className:"h-2 w-2 fill-current"})})}),t]}));nj.displayName=US.displayName;const sj=p.forwardRef(({className:e,inset:t,...n},s)=>c.jsx(zS,{ref:s,className:al("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));sj.displayName=zS.displayName;const aj=p.forwardRef(({className:e,...t},n)=>c.jsx(qS,{ref:n,className:al("-mx-1 my-1 h-px bg-muted",e),...t}));aj.displayName=qS.displayName;var rj="ContextMenu",[ij]=Vl(rj,[sw]),oj=sw(),[lj,cj]=ij(rj),dj=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:s,dir:a,modal:r=!0}=e,[i,o]=p.useState(!1),l=oj(t),d=ac(s),u=p.useCallback(e=>{o(e),d(e)},[d]);return c.jsx(lj,{scope:t,open:i,onOpenChange:u,modal:r,children:c.jsx(tS,{...l,dir:a,open:i,onOpenChange:u,modal:r,children:n})})};dj.displayName=rj;var uj="ContextMenuTrigger",hj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:s=!1,...a}=e,r=cj(uj,n),i=oj(n),o=p.useRef({x:0,y:0}),l=p.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),d=p.useRef(0),u=p.useCallback(()=>window.clearTimeout(d.current),[]),h=e=>{o.current={x:e.clientX,y:e.clientY},r.onOpenChange(!0)};return p.useEffect(()=>u,[u]),p.useEffect(()=>{s&&u()},[s,u]),c.jsxs(c.Fragment,{children:[c.jsx(nS,{...i,virtualRef:l}),c.jsx(nc.span,{"data-state":r.open?"open":"closed","data-disabled":s?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:s?e.onContextMenu:Ul(e.onContextMenu,e=>{u(),h(e),e.preventDefault()}),onPointerDown:s?e.onPointerDown:Ul(e.onPointerDown,Cj(e=>{u(),d.current=window.setTimeout(()=>h(e),700)})),onPointerMove:s?e.onPointerMove:Ul(e.onPointerMove,Cj(u)),onPointerCancel:s?e.onPointerCancel:Ul(e.onPointerCancel,Cj(u)),onPointerUp:s?e.onPointerUp:Ul(e.onPointerUp,Cj(u))})]})});hj.displayName=uj;var mj=e=>{const{__scopeContextMenu:t,...n}=e,s=oj(t);return c.jsx(sS,{...s,...n})};mj.displayName="ContextMenuPortal";var pj="ContextMenuContent",fj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=cj(pj,n),r=oj(n),i=p.useRef(!1);return c.jsx(aS,{...r,...s,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),!t.defaultPrevented&&i.current&&t.preventDefault(),i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||a.modal||(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fj.displayName=pj;p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(rS,{...a,...s,ref:t})}).displayName="ContextMenuGroup";var gj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(iS,{...a,...s,ref:t})});gj.displayName="ContextMenuLabel";var xj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(oS,{...a,...s,ref:t})});xj.displayName="ContextMenuItem";var vj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(lS,{...a,...s,ref:t})});vj.displayName="ContextMenuCheckboxItem";p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(cS,{...a,...s,ref:t})}).displayName="ContextMenuRadioGroup";var yj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(dS,{...a,...s,ref:t})});yj.displayName="ContextMenuRadioItem";var bj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(uS,{...a,...s,ref:t})});bj.displayName="ContextMenuItemIndicator";var wj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(hS,{...a,...s,ref:t})});wj.displayName="ContextMenuSeparator";p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(mS,{...a,...s,ref:t})}).displayName="ContextMenuArrow";var Sj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(fS,{...a,...s,ref:t})});Sj.displayName="ContextMenuSubTrigger";var jj=p.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,a=oj(n);return c.jsx(gS,{...a,...s,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});function Cj(e){return t=>"mouse"!==t.pointerType?e(t):void 0}jj.displayName="ContextMenuSubContent";var kj=mj,Nj=fj,_j=gj,Pj=xj,Ej=vj,Rj=yj,Aj=bj,Tj=wj,Mj=Sj,Dj=jj;const Lj=dj,Fj=hj;p.forwardRef(({className:e,inset:t,children:n,...s},a)=>c.jsxs(Mj,{ref:a,className:al("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,c.jsx(Hp,{className:"ml-auto h-4 w-4"})]})).displayName=Mj.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(Dj,{ref:n,className:al("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=Dj.displayName;const Ij=p.forwardRef(({className:e,...t},n)=>c.jsx(kj,{children:c.jsx(Nj,{ref:n,className:al("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-0.5 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));Ij.displayName=Nj.displayName;const Oj=p.forwardRef(({className:e,inset:t,...n},s)=>c.jsx(Pj,{ref:s,className:al("relative flex cursor-default select-none items-center rounded-sm px-2 py-1 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Oj.displayName=Pj.displayName;p.forwardRef(({className:e,children:t,checked:n,...s},a)=>c.jsxs(Ej,{ref:a,className:al("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(Aj,{children:c.jsx(Up,{className:"h-4 w-4"})})}),t]})).displayName=Ej.displayName;p.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(Rj,{ref:s,className:al("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(Aj,{children:c.jsx(tf,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=Rj.displayName;p.forwardRef(({className:e,inset:t,...n},s)=>c.jsx(_j,{ref:s,className:al("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n})).displayName=_j.displayName;const zj=p.forwardRef(({className:e,...t},n)=>c.jsx(Tj,{ref:n,className:al("-mx-1 my-1 h-px bg-border",e),...t}));zj.displayName=Tj.displayName;var Bj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=hl(`Primitive.${t}`),s=p.forwardRef((e,s)=>{const{asChild:a,...r}=e,i=a?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),$j="horizontal",Uj=["horizontal","vertical"],Vj=p.forwardRef((e,t)=>{const{decorative:n,orientation:s=$j,...a}=e,r=function(e){return Uj.includes(e)}(s)?s:$j,i=n?{role:"none"}:{"aria-orientation":"vertical"===r?r:void 0,role:"separator"};return c.jsx(Bj.div,{"data-orientation":r,...i,...a,ref:t})});Vj.displayName="Separator";var qj=Vj;const Hj=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>c.jsx(qj,{ref:a,decorative:n,orientation:t,className:al("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...s}));function Gj(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const s=n.reduce((t,{useScope:n,scopeName:s})=>({...t,...n(e)[`__scope${s}`]}),{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}Hj.displayName=qj.displayName;var Kj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=hl(`Primitive.${t}`),s=p.forwardRef((e,s)=>{const{asChild:a,...r}=e,i=a?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...r,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),Wj=Mt();function Qj(){return()=>{}}var Yj="Avatar",[Xj]=function(e,t=[]){let n=[];const s=()=>{const t=n.map(e=>p.createContext(e));return function(n){const s=n?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...n,[e]:s}}),[n,s])}};return s.scopeName=e,[function(t,s){const a=p.createContext(s);a.displayName=t+"Context";const r=n.length;n=[...n,s];const i=t=>{const{scope:n,children:s,...i}=t,o=n?.[e]?.[r]||a,l=p.useMemo(()=>i,Object.values(i));return c.jsx(o.Provider,{value:l,children:s})};return i.displayName=t+"Provider",[i,function(n,i){const o=i?.[e]?.[r]||a,l=p.useContext(o);if(l)return l;if(void 0!==s)return s;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Gj(s,...t)]}(Yj),[Zj,Jj]=Xj(Yj),eC=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[a,r]=p.useState("idle");return c.jsx(Zj,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:r,children:c.jsx(Kj.span,{...s,ref:t})})});eC.displayName=Yj;var tC="AvatarImage",nC=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...r}=e,i=Jj(tC,n),o=function(e,{referrerPolicy:t,crossOrigin:n}){const s=Wj.useSyncExternalStore(Qj,()=>!0,()=>!1),a=p.useRef(null),r=s?(a.current||(a.current=new window.Image),a.current):null,[i,o]=p.useState(()=>rC(r,e));return Ec(()=>{o(rC(r,e))},[r,e]),Ec(()=>{const e=e=>()=>{o(e)};if(!r)return;const s=e("loaded"),a=e("error");return r.addEventListener("load",s),r.addEventListener("error",a),t&&(r.referrerPolicy=t),"string"==typeof n&&(r.crossOrigin=n),()=>{r.removeEventListener("load",s),r.removeEventListener("error",a)}},[r,n,t]),i}(s,r),l=ac(e=>{a(e),i.onImageLoadingStatusChange(e)});return Ec(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?c.jsx(Kj.img,{...r,ref:t,src:s}):null});nC.displayName=tC;var sC="AvatarFallback",aC=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...a}=e,r=Jj(sC,n),[i,o]=p.useState(void 0===s);return p.useEffect(()=>{if(void 0!==s){const e=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(e)}},[s]),i&&"loaded"!==r.imageLoadingStatus?c.jsx(Kj.span,{...a,ref:t}):null});function rC(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}aC.displayName=sC;var iC=eC,oC=nC,lC=aC;const cC=p.forwardRef(({className:e,...t},n)=>c.jsx(iC,{ref:n,className:al("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));cC.displayName=iC.displayName;const dC=p.forwardRef(({className:e,...t},n)=>c.jsx(oC,{ref:n,className:al("aspect-square h-full w-full",e),...t}));dC.displayName=oC.displayName;const uC=p.forwardRef(({className:e,...t},n)=>c.jsx(lC,{ref:n,className:al("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));uC.displayName=lC.displayName;const hC=uo("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function mC({className:e,variant:t,...n}){return c.jsx("div",{className:al(hC({variant:t}),e),...n})}const pC=p.forwardRef(({className:e,...t},n)=>c.jsx("kbd",{ref:n,className:al("pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100 shadow-sm",e),...t}));pC.displayName="Kbd";var fC="Checkbox",[gC]=Vl(fC),[xC,vC]=gC(fC);function yC(e){const{__scopeCheckbox:t,checked:n,children:s,defaultChecked:a,disabled:r,form:i,name:o,onCheckedChange:l,required:d,value:u="on",internal_do_not_use_render:h}=e,[m,f]=Ju({prop:n,defaultProp:a??!1,onChange:l,caller:fC}),[g,x]=p.useState(null),[v,y]=p.useState(null),b=p.useRef(!1),w=!g||(!!i||!!g.closest("form")),S={checked:m,disabled:r,setChecked:f,control:g,setControl:x,name:o,form:i,value:u,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:!PC(a)&&a,isFormControl:w,bubbleInput:v,setBubbleInput:y};return c.jsx(xC,{scope:t,...S,children:_C(h)?h(S):s})}var bC="CheckboxTrigger",wC=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...s},a)=>{const{control:r,value:i,disabled:o,checked:l,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:g}=vC(bC,e),x=ll(a,u),v=p.useRef(l);return p.useEffect(()=>{const e=r?.form;if(e){const t=()=>h(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[r,h]),c.jsx(nc.button,{type:"button",role:"checkbox","aria-checked":PC(l)?"mixed":l,"aria-required":d,"data-state":EC(l),"data-disabled":o?"":void 0,disabled:o,value:i,...s,ref:x,onKeyDown:Ul(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:Ul(n,e=>{h(e=>!!PC(e)||!e),g&&f&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})})});wC.displayName=bC;var SC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:r,required:i,disabled:o,value:l,onCheckedChange:d,form:u,...h}=e;return c.jsx(yC,{__scopeCheckbox:n,checked:a,defaultChecked:r,disabled:o,required:i,onCheckedChange:d,name:s,form:u,value:l,internal_do_not_use_render:({isFormControl:e})=>c.jsxs(c.Fragment,{children:[c.jsx(wC,{...h,ref:t,__scopeCheckbox:n}),e&&c.jsx(NC,{__scopeCheckbox:n})]})})});SC.displayName=fC;var jC="CheckboxIndicator",CC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...a}=e,r=vC(jC,n);return c.jsx(Ov,{present:s||PC(r.checked)||!0===r.checked,children:c.jsx(nc.span,{"data-state":EC(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});CC.displayName=jC;var kC="CheckboxBubbleInput",NC=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:r,defaultChecked:i,required:o,disabled:l,name:d,value:u,form:h,bubbleInput:m,setBubbleInput:f}=vC(kC,e),g=ll(n,f),x=eh(r),v=Cu(s);p.useEffect(()=>{const e=m;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,s=!a.current;if(x!==r&&n){const t=new Event("click",{bubbles:s});e.indeterminate=PC(r),n.call(e,!PC(r)&&r),e.dispatchEvent(t)}},[m,x,r,a]);const y=p.useRef(!PC(r)&&r);return c.jsx(nc.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??y.current,required:o,disabled:l,name:d,value:u,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _C(e){return"function"==typeof e}function PC(e){return"indeterminate"===e}function EC(e){return PC(e)?"indeterminate":e?"checked":"unchecked"}NC.displayName=kC;const RC=p.forwardRef(({className:e,...t},n)=>c.jsx(SC,{ref:n,className:al("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:c.jsx(CC,{className:al("flex items-center justify-center text-current"),children:c.jsx(Up,{className:"h-4 w-4"})})}));RC.displayName=SC.displayName;var AC="ToastProvider",[TC,MC,DC]=Ql("Toast"),[LC]=Vl("Toast",[DC]),[FC,IC]=LC(AC),OC=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:r=50,children:i}=e,[o,l]=p.useState(null),[d,u]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return n.trim(),c.jsx(TC.Provider,{scope:t,children:c.jsx(FC,{scope:t,label:n,duration:s,swipeDirection:a,swipeThreshold:r,toastCount:d,viewport:o,onViewportChange:l,onToastAdd:p.useCallback(()=>u(e=>e+1),[]),onToastRemove:p.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:i})})};OC.displayName=AC;var zC="ToastViewport",BC=["F8"],$C="toast.viewportPause",UC="toast.viewportResume",VC=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=BC,label:a="Notifications ({hotkey})",...r}=e,i=IC(zC,n),o=MC(n),l=p.useRef(null),d=p.useRef(null),u=p.useRef(null),h=p.useRef(null),m=ll(t,h,i.onViewportChange),f=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;p.useEffect(()=>{const e=e=>{0!==s.length&&s.every(t=>e[t]||e.code===t)&&h.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),p.useEffect(()=>{const e=l.current,t=h.current;if(g&&e&&t){const n=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent($C);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},s=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(UC);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},a=t=>{!e.contains(t.relatedTarget)&&s()},r=()=>{e.contains(document.activeElement)||s()};return e.addEventListener("focusin",n),e.addEventListener("focusout",a),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",r),window.addEventListener("blur",n),window.addEventListener("focus",s),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",r),window.removeEventListener("blur",n),window.removeEventListener("focus",s)}}},[g,i.isClosePausedRef]);const x=p.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,s=[n,...ok(n)];return"forwards"===e?s:s.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return p.useEffect(()=>{const e=h.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,s=t.shiftKey;if(t.target===e&&s)return void d.current?.focus();const a=x({tabbingDirection:s?"backwards":"forwards"}),r=a.findIndex(e=>e===n);lk(a.slice(r+1))?t.preventDefault():s?d.current?.focus():u.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,x]),c.jsxs(fc,{ref:l,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&c.jsx(HC,{ref:d,onFocusFromOutsideViewport:()=>{lk(x({tabbingDirection:"forwards"}))}}),c.jsx(TC.Slot,{scope:n,children:c.jsx(nc.ol,{tabIndex:-1,...r,ref:m})}),g&&c.jsx(HC,{ref:u,onFocusFromOutsideViewport:()=>{lk(x({tabbingDirection:"backwards"}))}})]})});VC.displayName=zC;var qC="ToastFocusProxy",HC=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...a}=e,r=IC(qC,n);return c.jsx(nh,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:e=>{const t=e.relatedTarget;!r.viewport?.contains(t)&&s()}})});HC.displayName=qC;var GC="Toast",KC=p.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:a,onOpenChange:r,...i}=e,[o,l]=Ju({prop:s,defaultProp:a??!0,onChange:r,caller:GC});return c.jsx(Ov,{present:n||o,children:c.jsx(YC,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:ac(e.onPause),onResume:ac(e.onResume),onSwipeStart:Ul(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ul(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:Ul(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ul(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});KC.displayName=GC;var[WC,QC]=LC(GC,{onClose(){}}),YC=p.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:a,open:r,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...g}=e,x=IC(GC,n),[v,y]=p.useState(null),b=ll(t,e=>y(e)),w=p.useRef(null),S=p.useRef(null),j=a||x.duration,C=p.useRef(0),k=p.useRef(j),N=p.useRef(0),{onToastAdd:_,onToastRemove:P}=x,E=ac(()=>{const e=v?.contains(document.activeElement);e&&x.viewport?.focus(),i()}),R=p.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(N.current),C.current=(new Date).getTime(),N.current=window.setTimeout(E,e))},[E]);p.useEffect(()=>{const e=x.viewport;if(e){const t=()=>{R(k.current),d?.()},n=()=>{const e=(new Date).getTime()-C.current;k.current=k.current-e,window.clearTimeout(N.current),l?.()};return e.addEventListener($C,n),e.addEventListener(UC,t),()=>{e.removeEventListener($C,n),e.removeEventListener(UC,t)}}},[x.viewport,j,l,d,R]),p.useEffect(()=>{r&&!x.isClosePausedRef.current&&R(j)},[r,j,x.isClosePausedRef,R]),p.useEffect(()=>(_(),()=>P()),[_,P]);const A=p.useMemo(()=>v?ak(v):null,[v]);return x.viewport?c.jsxs(c.Fragment,{children:[A&&c.jsx(XC,{__scopeToast:n,role:"status","aria-live":"foreground"===s?"assertive":"polite",children:A}),c.jsx(WC,{scope:n,onClose:E,children:Zt.createPortal(c.jsx(TC.ItemSlot,{scope:n,children:c.jsx(pc,{asChild:!0,onEscapeKeyDown:Ul(o,()=>{x.isFocusedToastEscapeKeyDownRef.current||E(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(nc.li,{tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":x.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ul(e.onKeyDown,e=>{"Escape"===e.key&&(o?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:Ul(e.onPointerDown,e=>{0===e.button&&(w.current={x:e.clientX,y:e.clientY})}),onPointerMove:Ul(e.onPointerMove,e=>{if(!w.current)return;const t=e.clientX-w.current.x,n=e.clientY-w.current.y,s=Boolean(S.current),a=["left","right"].includes(x.swipeDirection),r=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,i=a?r(0,t):0,o=a?0:r(0,n),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};s?(S.current=c,rk("toast.swipeMove",h,d,{discrete:!1})):ik(c,x.swipeDirection,l)?(S.current=c,rk("toast.swipeStart",u,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(w.current=null)}),onPointerUp:Ul(e.onPointerUp,e=>{const t=S.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),S.current=null,w.current=null,t){const n=e.currentTarget,s={originalEvent:e,delta:t};ik(t,x.swipeDirection,x.swipeThreshold)?rk("toast.swipeEnd",f,s,{discrete:!0}):rk("toast.swipeCancel",m,s,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),XC=e=>{const{__scopeToast:t,children:n,...s}=e,a=IC(GC,t),[r,i]=p.useState(!1),[o,l]=p.useState(!1);return function(e=()=>{}){const t=ac(e);Ec(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>i(!0)),p.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:c.jsx(Ku,{asChild:!0,children:c.jsx(nh,{...s,children:r&&c.jsxs(c.Fragment,{children:[a.label," ",n]})})})},ZC=p.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return c.jsx(nc.div,{...s,ref:t})});ZC.displayName="ToastTitle";var JC=p.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return c.jsx(nc.div,{...s,ref:t})});JC.displayName="ToastDescription";var ek=p.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?c.jsx(sk,{altText:n,asChild:!0,children:c.jsx(nk,{...s,ref:t})}):null});ek.displayName="ToastAction";var tk="ToastClose",nk=p.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,a=QC(tk,n);return c.jsx(sk,{asChild:!0,children:c.jsx(nc.button,{type:"button",...s,ref:t,onClick:Ul(e.onClick,a.onClose)})})});nk.displayName=tk;var sk=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...a}=e;return c.jsx(nc.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function ak(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,s=""===e.dataset.radixToastAnnounceExclude;if(!n)if(s){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...ak(e))}}),t}function rk(e,t,n,{discrete:s}){const a=n.originalEvent.currentTarget,r=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?sc(a,r):a.dispatchEvent(r)}var ik=(e,t,n=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),r=s>a;return"left"===t||"right"===t?r&&s>n:!r&&a>n};function ok(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function lk(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var ck=VC,dk=KC,uk=ZC,hk=JC,mk=ek,pk=nk;const fk=OC,gk=p.forwardRef(({className:e,...t},n)=>c.jsx(ck,{ref:n,className:al("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));gk.displayName=ck.displayName;const xk=uo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),vk=p.forwardRef(({className:e,variant:t,...n},s)=>c.jsx(dk,{ref:s,className:al(xk({variant:t}),e),...n}));vk.displayName=dk.displayName;p.forwardRef(({className:e,...t},n)=>c.jsx(mk,{ref:n,className:al("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=mk.displayName;const yk=p.forwardRef(({className:e,...t},n)=>c.jsx(pk,{ref:n,className:al("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:c.jsx(ax,{className:"h-4 w-4"})}));yk.displayName=pk.displayName;const bk=p.forwardRef(({className:e,...t},n)=>c.jsx(uk,{ref:n,className:al("text-sm font-semibold",e),...t}));bk.displayName=uk.displayName;const wk=p.forwardRef(({className:e,...t},n)=>c.jsx(hk,{ref:n,className:al("text-sm opacity-90",e),...t}));wk.displayName=hk.displayName;let Sk=0;const jk=new Map,Ck=e=>{if(jk.has(e))return;const t=setTimeout(()=>{jk.delete(e),Pk({type:"REMOVE_TOAST",toastId:e})},1e6);jk.set(e,t)},kk=(e,t)=>{switch(t.type){case"ADD_TOAST":return e.toasts.some(e=>{const n=String(e.title||""),s=String(e.description||""),a=String(t.toast.title||""),r=String(t.toast.description||"");return n===a&&s===r&&e.variant===t.toast.variant})?e:{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Ck(n):e.toasts.forEach(e=>{Ck(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Nk=[];let _k={toasts:[]};function Pk(e){_k=kk(_k,e),Nk.forEach(e=>{e(_k)})}function Ek({...e}){const t=(Sk=(Sk+1)%Number.MAX_SAFE_INTEGER,Sk.toString());return Pk({type:"ADD_TOAST",toast:{...e,id:t}}),{id:t,dismiss:()=>Pk({type:"DISMISS_TOAST",toastId:t}),update:e=>Pk({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Rk(){const[e,t]=p.useState(_k);return p.useEffect(()=>(Nk.push(t),()=>{const e=Nk.indexOf(t);e>-1&&Nk.splice(e,1)}),[]),{...e,toast:Ek,dismiss:e=>Pk({type:"DISMISS_TOAST",toastId:e})}}function Ak(){const{toasts:e}=Rk();return c.jsxs(fk,{children:[e.map(function({id:e,title:t,description:n,action:s,...a}){return c.jsxs(vk,{...a,children:[c.jsxs("div",{className:"grid gap-1",children:[t&&c.jsx(bk,{children:t}),n&&c.jsx(wk,{children:n})]}),s,c.jsx(yk,{})]},e)}),c.jsx(gk,{})]})}var Tk=.999,Mk=/[\\\/_+.#"@\[\(\{&]/,Dk=/[\\\/_+.#"@\[\(\{&]/g,Lk=/[\s-]/,Fk=/[\s-]/g;function Ik(e,t,n,s,a,r,i){if(r===t.length)return a===e.length?1:.99;var o=`${a},${r}`;if(void 0!==i[o])return i[o];for(var l,c,d,u,h=s.charAt(r),m=n.indexOf(h,a),p=0;m>=0;)(l=Ik(e,t,n,s,m+1,r+1,i))>p&&(m===a?l*=1:Mk.test(e.charAt(m-1))?(l*=.8,(d=e.slice(a,m-1).match(Dk))&&a>0&&(l*=Math.pow(Tk,d.length))):Lk.test(e.charAt(m-1))?(l*=.9,(u=e.slice(a,m-1).match(Fk))&&a>0&&(l*=Math.pow(Tk,u.length))):(l*=.17,a>0&&(l*=Math.pow(Tk,m-a))),e.charAt(m)!==t.charAt(r)&&(l*=.9999)),(l<.1&&n.charAt(m-1)===s.charAt(r+1)||s.charAt(r+1)===s.charAt(r)&&n.charAt(m-1)!==s.charAt(r))&&(.1*(c=Ik(e,t,n,s,m+1,r+2,i))>l&&(l=.1*c)),l>p&&(p=l),m=n.indexOf(h,m+1);return i[o]=p,p}function Ok(e){return e.toLowerCase().replace(Fk," ")}function zk(e,t,n){return Ik(e=n&&n.length>0?""+(e+" "+n.join(" ")):e,t,Ok(e),Ok(t),0,0,{})}var Bk='[cmdk-group=""]',$k='[cmdk-group-items=""]',Uk='[cmdk-item=""]',Vk=`${Uk}:not([aria-disabled="true"])`,qk="cmdk-item-select",Hk="data-value",Gk=(e,t,n)=>zk(e,t,n),Kk=p.createContext(void 0),Wk=()=>p.useContext(Kk),Qk=p.createContext(void 0),Yk=()=>p.useContext(Qk),Xk=p.createContext(void 0),Zk=p.forwardRef((e,t)=>{let n=hN(()=>{var t,n;return{search:"",value:null!=(n=null!=(t=e.value)?t:e.defaultValue)?n:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=hN(()=>new Set),a=hN(()=>new Map),r=hN(()=>new Map),i=hN(()=>new Set),o=dN(e),{label:l,children:c,value:d,onValueChange:u,filter:h,shouldFilter:m,loop:f,disablePointerSelection:g=!1,vimBindings:x=!0,...v}=e,y=Tc(),b=Tc(),w=Tc(),S=p.useRef(null),j=fN();uN(()=>{if(void 0!==d){let e=d.trim();n.current.value=e,C.emit()}},[d]),uN(()=>{j(6,R)},[]);let C=p.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>n.current,setState:(e,t,s)=>{var a,r,i,l;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)E(),_(),j(1,P);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(w);e?e.focus():null==(a=document.getElementById(y))||a.focus()}if(j(7,()=>{var e;n.current.selectedItemId=null==(e=A())?void 0:e.id,C.emit()}),s||j(5,R),void 0!==(null==(r=o.current)?void 0:r.value)){let e=null!=t?t:"";return void(null==(l=(i=o.current).onValueChange)||l.call(i,e))}}C.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),k=p.useMemo(()=>({value:(e,t,s)=>{var a;t!==(null==(a=r.current.get(e))?void 0:a.value)&&(r.current.set(e,{value:t,keywords:s}),n.current.filtered.items.set(e,N(t,s)),j(2,()=>{_(),C.emit()}))},item:(e,t)=>(s.current.add(e),t&&(a.current.has(t)?a.current.get(t).add(e):a.current.set(t,new Set([e]))),j(3,()=>{E(),_(),n.current.value||P(),C.emit()}),()=>{r.current.delete(e),s.current.delete(e),n.current.filtered.items.delete(e);let t=A();j(4,()=>{E(),(null==t?void 0:t.getAttribute("id"))===e&&P(),C.emit()})}),group:e=>(a.current.has(e)||a.current.set(e,new Set),()=>{r.current.delete(e),a.current.delete(e)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:y,inputId:w,labelId:b,listInnerRef:S}),[]);function N(e,t){var s,a;let r=null!=(a=null==(s=o.current)?void 0:s.filter)?a:Gk;return e?r(e,n.current.search,t):0}function _(){if(!n.current.search||!1===o.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let s=a.current.get(n),r=0;s.forEach(t=>{let n=e.get(t);r=Math.max(n,r)}),t.push([n,r])});let s=S.current;T().sort((t,n)=>{var s,a;let r=t.getAttribute("id"),i=n.getAttribute("id");return(null!=(s=e.get(i))?s:0)-(null!=(a=e.get(r))?a:0)}).forEach(e=>{let t=e.closest($k);t?t.appendChild(e.parentElement===t?e:e.closest(`${$k} > *`)):s.appendChild(e.parentElement===s?e:e.closest(`${$k} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let n=null==(t=S.current)?void 0:t.querySelector(`${Bk}[${Hk}="${encodeURIComponent(e[0])}"]`);null==n||n.parentElement.appendChild(n)})}function P(){let e=T().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(Hk);C.setState("value",t||void 0)}function E(){var e,t,i,l;if(!n.current.search||!1===o.current.shouldFilter)return void(n.current.filtered.count=s.current.size);n.current.filtered.groups=new Set;let c=0;for(let a of s.current){let s=N(null!=(t=null==(e=r.current.get(a))?void 0:e.value)?t:"",null!=(l=null==(i=r.current.get(a))?void 0:i.keywords)?l:[]);n.current.filtered.items.set(a,s),s>0&&c++}for(let[s,r]of a.current)for(let e of r)if(n.current.filtered.items.get(e)>0){n.current.filtered.groups.add(s);break}n.current.filtered.count=c}function R(){var e,t,n;let s=A();s&&((null==(e=s.parentElement)?void 0:e.firstChild)===s&&(null==(n=null==(t=s.closest(Bk))?void 0:t.querySelector('[cmdk-group-heading=""]'))||n.scrollIntoView({block:"nearest"})),s.scrollIntoView({block:"nearest"}))}function A(){var e;return null==(e=S.current)?void 0:e.querySelector(`${Uk}[aria-selected="true"]`)}function T(){var e;return Array.from((null==(e=S.current)?void 0:e.querySelectorAll(Vk))||[])}function M(e){let t=T()[e];t&&C.setState("value",t.getAttribute(Hk))}function D(e){var t;let n=A(),s=T(),a=s.findIndex(e=>e===n),r=s[a+e];null!=(t=o.current)&&t.loop&&(r=a+e<0?s[s.length-1]:a+e===s.length?s[0]:s[a+e]),r&&C.setState("value",r.getAttribute(Hk))}function L(e){let t,n=A(),s=null==n?void 0:n.closest(Bk);for(;s&&!t;)s=e>0?lN(s,Bk):cN(s,Bk),t=null==s?void 0:s.querySelector(Vk);t?C.setState("value",t.getAttribute(Hk)):D(e)}let F=()=>M(T().length-1),I=e=>{e.preventDefault(),e.metaKey?F():e.altKey?L(1):D(1)},O=e=>{e.preventDefault(),e.metaKey?M(0):e.altKey?L(-1):D(-1)};return p.createElement(nc.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=v.onKeyDown)||t.call(v,e);let n=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!n)switch(e.key){case"n":case"j":x&&e.ctrlKey&&I(e);break;case"ArrowDown":I(e);break;case"p":case"k":x&&e.ctrlKey&&O(e);break;case"ArrowUp":O(e);break;case"Home":e.preventDefault(),M(0);break;case"End":e.preventDefault(),F();break;case"Enter":{e.preventDefault();let t=A();if(t){let e=new Event(qk);t.dispatchEvent(e)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:xN},l),gN(e,e=>p.createElement(Qk.Provider,{value:C},p.createElement(Kk.Provider,{value:k},e))))}),Jk=p.forwardRef((e,t)=>{var n,s;let a=Tc(),r=p.useRef(null),i=p.useContext(Xk),o=Wk(),l=dN(e),c=null!=(s=null==(n=l.current)?void 0:n.forceMount)?s:null==i?void 0:i.forceMount;uN(()=>{if(!c)return o.item(a,null==i?void 0:i.id)},[c]);let d=pN(a,r,[e.value,e.children,r],e.keywords),u=Yk(),h=mN(e=>e.value&&e.value===d.current),m=mN(e=>!(!c&&!1!==o.filter())||(!e.search||e.filtered.items.get(a)>0));function f(){var e,t;g(),null==(t=(e=l.current).onSelect)||t.call(e,d.current)}function g(){u.setState("value",d.current,!0)}if(p.useEffect(()=>{let t=r.current;if(t&&!e.disabled)return t.addEventListener(qk,f),()=>t.removeEventListener(qk,f)},[m,e.onSelect,e.disabled]),!m)return null;let{disabled:x,value:v,onSelect:y,forceMount:b,keywords:w,...S}=e;return p.createElement(nc.div,{ref:ol(r,t),...S,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||o.getDisablePointerSelection()?void 0:g,onClick:x?void 0:f},e.children)}),eN=p.forwardRef((e,t)=>{let{heading:n,children:s,forceMount:a,...r}=e,i=Tc(),o=p.useRef(null),l=p.useRef(null),c=Tc(),d=Wk(),u=mN(e=>!(!a&&!1!==d.filter())||(!e.search||e.filtered.groups.has(i)));uN(()=>d.group(i),[]),pN(i,o,[e.value,e.heading,l]);let h=p.useMemo(()=>({id:i,forceMount:a}),[a]);return p.createElement(nc.div,{ref:ol(o,t),...r,"cmdk-group":"",role:"presentation",hidden:!u||void 0},n&&p.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),gN(e,e=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},p.createElement(Xk.Provider,{value:h},e))))}),tN=p.forwardRef((e,t)=>{let{alwaysRender:n,...s}=e,a=p.useRef(null),r=mN(e=>!e.search);return n||r?p.createElement(nc.div,{ref:ol(a,t),...s,"cmdk-separator":"",role:"separator"}):null}),nN=p.forwardRef((e,t)=>{let{onValueChange:n,...s}=e,a=null!=e.value,r=Yk(),i=mN(e=>e.search),o=mN(e=>e.selectedItemId),l=Wk();return p.useEffect(()=>{null!=e.value&&r.setState("search",e.value)},[e.value]),p.createElement(nc.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:i,onChange:e=>{a||r.setState("search",e.target.value),null==n||n(e.target.value)}})}),sN=p.forwardRef((e,t)=>{let{children:n,label:s="Suggestions",...a}=e,r=p.useRef(null),i=p.useRef(null),o=mN(e=>e.selectedItemId),l=Wk();return p.useEffect(()=>{if(i.current&&r.current){let e,t=i.current,n=r.current,s=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;n.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return s.observe(t),()=>{cancelAnimationFrame(e),s.unobserve(t)}}},[]),p.createElement(nc.div,{ref:ol(r,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":s,id:l.listId},gN(e,e=>p.createElement("div",{ref:ol(i,l.listInnerRef),"cmdk-list-sizer":""},e)))}),aN=p.forwardRef((e,t)=>{let{open:n,onOpenChange:s,overlayClassName:a,contentClassName:r,container:i,...o}=e;return p.createElement(qy,{open:n,onOpenChange:s},p.createElement(Gy,{container:i},p.createElement(Ky,{"cmdk-overlay":"",className:a}),p.createElement(Wy,{"aria-label":e.label,"cmdk-dialog":"",className:r},p.createElement(Zk,{ref:t,...o}))))}),rN=p.forwardRef((e,t)=>mN(e=>0===e.filtered.count)?p.createElement(nc.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),iN=p.forwardRef((e,t)=>{let{progress:n,children:s,label:a="Loading...",...r}=e;return p.createElement(nc.div,{ref:t,...r,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},gN(e,e=>p.createElement("div",{"aria-hidden":!0},e)))}),oN=Object.assign(Zk,{List:sN,Item:Jk,Input:nN,Group:eN,Separator:tN,Dialog:aN,Empty:rN,Loading:iN});function lN(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function cN(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function dN(e){let t=p.useRef(e);return uN(()=>{t.current=e}),t}var uN="undefined"==typeof window?p.useEffect:p.useLayoutEffect;function hN(e){let t=p.useRef();return void 0===t.current&&(t.current=e()),t}function mN(e){let t=Yk(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function pN(e,t,n,s=[]){let a=p.useRef(),r=Wk();return uN(()=>{var i;let o=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),l=s.map(e=>e.trim());r.value(e,o,l),null==(i=t.current)||i.setAttribute(Hk,o),a.current=o}),a}var fN=()=>{let[e,t]=p.useState(),n=hN(()=>new Map);return uN(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,s)=>{n.current.set(e,s),t({})}};function gN({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},n(t.props.children)):n(t)}var xN={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const vN=p.forwardRef(({className:e,...t},n)=>c.jsx(oN,{ref:n,className:al("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));vN.displayName=oN.displayName;const yN=({children:e,...t})=>c.jsx(Zy,{...t,children:c.jsxs(tb,{className:"overflow-hidden p-0 shadow-lg",children:[c.jsx(ab,{className:"sr-only",children:"Command Palette"}),c.jsx(rb,{className:"sr-only",children:"Search and execute commands, navigate to pages, or perform quick actions."}),c.jsx(vN,{shouldFilter:!1,className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:e})]})}),bN=p.forwardRef(({className:e,...t},n)=>{const[s,a]=p.useState(!0);return p.useEffect(()=>{const e=setTimeout(()=>a(!1),100);return()=>clearTimeout(e)},[]),c.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[c.jsx(Sg,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),c.jsx(oN.Input,{ref:n,name:`search-${Math.random().toString(36).substring(7)}`,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,"data-1p-ignore":!0,"data-lpignore":"true","data-form-type":"other",readOnly:s,onFocus:e=>{a(!1),t.onFocus?.(e)},className:al("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})});bN.displayName=oN.Input.displayName;const wN=p.forwardRef(({className:e,...t},n)=>c.jsx(oN.List,{ref:n,className:al("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));wN.displayName=oN.List.displayName;const SN=p.forwardRef((e,t)=>c.jsx(oN.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));SN.displayName=oN.Empty.displayName;const jN=p.forwardRef(({className:e,...t},n)=>c.jsx(oN.Group,{ref:n,className:al("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));jN.displayName=oN.Group.displayName;const CN=p.forwardRef(({className:e,...t},n)=>c.jsx(oN.Separator,{ref:n,className:al("-mx-1 h-px bg-border",e),...t}));CN.displayName=oN.Separator.displayName;const kN=p.forwardRef(({className:e,...t},n)=>c.jsx(oN.Item,{ref:n,className:al("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",e),...t}));kN.displayName=oN.Item.displayName;const NN=({className:e,...t})=>c.jsx("span",{className:al("ml-auto text-xs tracking-widest text-muted-foreground",e),...t});NN.displayName="CommandShortcut";var _N="NavigationMenu",[PN,EN,RN]=Ql(_N),[AN,TN,MN]=Ql(_N),[DN]=Vl(_N,[RN,MN]),[LN,FN]=DN(_N),[IN,ON]=DN(_N),zN=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:s,onValueChange:a,defaultValue:r,delayDuration:i=200,skipDelayDuration:o=300,orientation:l="horizontal",dir:d,...u}=e,[h,m]=p.useState(null),f=ll(t,e=>m(e)),g=Xl(d),x=p.useRef(0),v=p.useRef(0),y=p.useRef(0),[b,w]=p.useState(!0),[S,j]=Ju({prop:s,onChange:e=>{const t=o>0;""!==e?(window.clearTimeout(y.current),t&&w(!1)):(window.clearTimeout(y.current),y.current=window.setTimeout(()=>w(!0),o)),a?.(e)},defaultProp:r??"",caller:_N}),C=p.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>j(""),150)},[j]),k=p.useCallback(e=>{window.clearTimeout(v.current),j(e)},[j]),N=p.useCallback(e=>{S===e?window.clearTimeout(v.current):x.current=window.setTimeout(()=>{window.clearTimeout(v.current),j(e)},i)},[S,j,i]);return p.useEffect(()=>()=>{window.clearTimeout(x.current),window.clearTimeout(v.current),window.clearTimeout(y.current)},[]),c.jsx($N,{scope:n,isRootMenu:!0,value:S,dir:g,orientation:l,rootNavigationMenu:h,onTriggerEnter:e=>{window.clearTimeout(x.current),b?N(e):k(e)},onTriggerLeave:()=>{window.clearTimeout(x.current),C()},onContentEnter:()=>window.clearTimeout(v.current),onContentLeave:C,onItemSelect:e=>{j(t=>t===e?"":e)},onItemDismiss:()=>j(""),children:c.jsx(nc.nav,{"aria-label":"Main","data-orientation":l,dir:g,...u,ref:f})})});zN.displayName=_N;var BN="NavigationMenuSub";p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:s,onValueChange:a,defaultValue:r,orientation:i="horizontal",...o}=e,l=FN(BN,n),[d,u]=Ju({prop:s,onChange:a,defaultProp:r??"",caller:BN});return c.jsx($N,{scope:n,isRootMenu:!1,value:d,dir:l.dir,orientation:i,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:e=>u(e),onItemSelect:e=>u(e),onItemDismiss:()=>u(""),children:c.jsx(nc.div,{"data-orientation":i,...o,ref:t})})}).displayName=BN;var $N=e=>{const{scope:t,isRootMenu:n,rootNavigationMenu:s,dir:a,orientation:r,children:i,value:o,onItemSelect:l,onItemDismiss:d,onTriggerEnter:u,onTriggerLeave:h,onContentEnter:m,onContentLeave:f}=e,[g,x]=p.useState(null),[v,y]=p.useState(new Map),[b,w]=p.useState(null);return c.jsx(LN,{scope:t,isRootMenu:n,rootNavigationMenu:s,value:o,previousValue:eh(o),baseId:Tc(),dir:a,orientation:r,viewport:g,onViewportChange:x,indicatorTrack:b,onIndicatorTrackChange:w,onTriggerEnter:ac(u),onTriggerLeave:ac(h),onContentEnter:ac(m),onContentLeave:ac(f),onItemSelect:ac(l),onItemDismiss:ac(d),onViewportContentChange:p.useCallback((e,t)=>{y(n=>(n.set(e,t),new Map(n)))},[]),onViewportContentRemove:p.useCallback(e=>{y(t=>t.has(e)?(t.delete(e),new Map(t)):t)},[]),children:c.jsx(PN.Provider,{scope:t,children:c.jsx(IN,{scope:t,items:v,children:i})})})},UN="NavigationMenuList",VN=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...s}=e,a=FN(UN,n),r=c.jsx(nc.ul,{"data-orientation":a.orientation,...s,ref:t});return c.jsx(nc.div,{style:{position:"relative"},ref:a.onIndicatorTrackChange,children:c.jsx(PN.Slot,{scope:n,children:a.isRootMenu?c.jsx(c_,{asChild:!0,children:r}):r})})});VN.displayName=UN;var qN="NavigationMenuItem",[HN,GN]=DN(qN),KN=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:s,...a}=e,r=Tc(),i=s||r||"LEGACY_REACT_AUTO_VALUE",o=p.useRef(null),l=p.useRef(null),d=p.useRef(null),u=p.useRef(()=>{}),h=p.useRef(!1),m=p.useCallback((e="start")=>{if(o.current){u.current();const t=h_(o.current);t.length&&m_("start"===e?t:t.reverse())}},[]),f=p.useCallback(()=>{if(o.current){const e=h_(o.current);e.length&&(u.current=function(e){return e.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}),()=>{e.forEach(e=>{const t=e.dataset.tabindex;e.setAttribute("tabindex",t)})}}(e))}},[]);return c.jsx(HN,{scope:n,value:i,triggerRef:l,contentRef:o,focusProxyRef:d,wasEscapeCloseRef:h,onEntryKeyDown:m,onFocusProxyEnter:m,onRootContentClose:f,onContentFocusOutside:f,children:c.jsx(nc.li,{...a,ref:t})})});KN.displayName=qN;var WN="NavigationMenuTrigger",QN=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,disabled:s,...a}=e,r=FN(WN,e.__scopeNavigationMenu),i=GN(WN,e.__scopeNavigationMenu),o=p.useRef(null),l=ll(o,i.triggerRef,t),d=g_(r.baseId,i.value),u=x_(r.baseId,i.value),h=p.useRef(!1),m=p.useRef(!1),f=i.value===r.value;return c.jsxs(c.Fragment,{children:[c.jsx(PN.ItemSlot,{scope:n,value:i.value,children:c.jsx(u_,{asChild:!0,children:c.jsx(nc.button,{id:d,disabled:s,"data-disabled":s?"":void 0,"data-state":f_(f),"aria-expanded":f,"aria-controls":u,...a,ref:l,onPointerEnter:Ul(e.onPointerEnter,()=>{m.current=!1,i.wasEscapeCloseRef.current=!1}),onPointerMove:Ul(e.onPointerMove,v_(()=>{s||m.current||i.wasEscapeCloseRef.current||h.current||(r.onTriggerEnter(i.value),h.current=!0)})),onPointerLeave:Ul(e.onPointerLeave,v_(()=>{s||(r.onTriggerLeave(),h.current=!1)})),onClick:Ul(e.onClick,()=>{r.onItemSelect(i.value),m.current=f}),onKeyDown:Ul(e.onKeyDown,e=>{const t={horizontal:"ArrowDown",vertical:"rtl"===r.dir?"ArrowLeft":"ArrowRight"}[r.orientation];f&&e.key===t&&(i.onEntryKeyDown(),e.preventDefault())})})})}),f&&c.jsxs(c.Fragment,{children:[c.jsx(sh,{"aria-hidden":!0,tabIndex:0,ref:i.focusProxyRef,onFocus:e=>{const t=i.contentRef.current,n=e.relatedTarget,s=n===o.current,a=t?.contains(n);!s&&a||i.onFocusProxyEnter(s?"start":"end")}}),r.viewport&&c.jsx("span",{"aria-owns":u})]})]})});QN.displayName=WN;var YN="navigationMenu.linkSelect",XN=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,active:s,onSelect:a,...r}=e;return c.jsx(u_,{asChild:!0,children:c.jsx(nc.a,{"data-active":s?"":void 0,"aria-current":s?"page":void 0,...r,ref:t,onClick:Ul(e.onClick,e=>{const t=e.target,n=new CustomEvent(YN,{bubbles:!0,cancelable:!0});if(t.addEventListener(YN,e=>a?.(e),{once:!0}),sc(t,n),!n.defaultPrevented&&!e.metaKey){sc(t,new CustomEvent(a_,{bubbles:!0,cancelable:!0}))}},{checkForDefaultPrevented:!1})})})});XN.displayName="NavigationMenuLink";var ZN="NavigationMenuIndicator",JN=p.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=FN(ZN,e.__scopeNavigationMenu),r=Boolean(a.value);return a.indicatorTrack?Jt.createPortal(c.jsx(Ov,{present:n||r,children:c.jsx(e_,{...s,ref:t})}),a.indicatorTrack):null});JN.displayName=ZN;var e_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...s}=e,a=FN(ZN,n),r=EN(n),[i,o]=p.useState(null),[l,d]=p.useState(null),u="horizontal"===a.orientation,h=Boolean(a.value);p.useEffect(()=>{const e=r(),t=e.find(e=>e.value===a.value)?.ref.current;t&&o(t)},[r,a.value]);const m=()=>{i&&d({size:u?i.offsetWidth:i.offsetHeight,offset:u?i.offsetLeft:i.offsetTop})};return p_(i,m),p_(a.indicatorTrack,m),l?c.jsx(nc.div,{"aria-hidden":!0,"data-state":h?"visible":"hidden","data-orientation":a.orientation,...s,ref:t,style:{position:"absolute",...u?{left:0,width:l.size+"px",transform:`translateX(${l.offset}px)`}:{top:0,height:l.size+"px",transform:`translateY(${l.offset}px)`},...s.style}}):null}),t_="NavigationMenuContent",n_=p.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=FN(t_,e.__scopeNavigationMenu),r=GN(t_,e.__scopeNavigationMenu),i=ll(r.contentRef,t),o=r.value===a.value,l={value:r.value,triggerRef:r.triggerRef,focusProxyRef:r.focusProxyRef,wasEscapeCloseRef:r.wasEscapeCloseRef,onContentFocusOutside:r.onContentFocusOutside,onRootContentClose:r.onRootContentClose,...s};return a.viewport?c.jsx(s_,{forceMount:n,...l,ref:i}):c.jsx(Ov,{present:n||o,children:c.jsx(r_,{"data-state":f_(o),...l,ref:i,onPointerEnter:Ul(e.onPointerEnter,a.onContentEnter),onPointerLeave:Ul(e.onPointerLeave,v_(a.onContentLeave)),style:{pointerEvents:!o&&a.isRootMenu?"none":void 0,...l.style}})})});n_.displayName=t_;var s_=p.forwardRef((e,t)=>{const n=FN(t_,e.__scopeNavigationMenu),{onViewportContentChange:s,onViewportContentRemove:a}=n;return Ec(()=>{s(e.value,{ref:t,...e})},[e,t,s]),Ec(()=>()=>a(e.value),[e.value,a]),null}),a_="navigationMenu.rootContentDismiss",r_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:s,triggerRef:a,focusProxyRef:r,wasEscapeCloseRef:i,onRootContentClose:o,onContentFocusOutside:l,...d}=e,u=FN(t_,n),h=p.useRef(null),m=ll(h,t),f=g_(u.baseId,s),g=x_(u.baseId,s),x=EN(n),v=p.useRef(null),{onItemDismiss:y}=u;p.useEffect(()=>{const e=h.current;if(u.isRootMenu&&e){const t=()=>{y(),o(),e.contains(document.activeElement)&&a.current?.focus()};return e.addEventListener(a_,t),()=>e.removeEventListener(a_,t)}},[u.isRootMenu,e.value,a,y,o]);const b=p.useMemo(()=>{const e=x().map(e=>e.value);"rtl"===u.dir&&e.reverse();const t=e.indexOf(u.value),n=e.indexOf(u.previousValue),a=s===u.value,r=n===e.indexOf(s);if(!a&&!r)return v.current;const i=(()=>{if(t!==n){if(a&&-1!==n)return t>n?"from-end":"from-start";if(r&&-1!==t)return t>n?"to-start":"to-end"}return null})();return v.current=i,i},[u.previousValue,u.value,u.dir,x,s]);return c.jsx(c_,{asChild:!0,children:c.jsx(dc,{id:g,"aria-labelledby":f,"data-motion":b,"data-orientation":u.orientation,...d,ref:m,disableOutsidePointerEvents:!1,onDismiss:()=>{const e=new Event(a_,{bubbles:!0,cancelable:!0});h.current?.dispatchEvent(e)},onFocusOutside:Ul(e.onFocusOutside,e=>{l();const t=e.target;u.rootNavigationMenu?.contains(t)&&e.preventDefault()}),onPointerDownOutside:Ul(e.onPointerDownOutside,e=>{const t=e.target,n=x().some(e=>e.ref.current?.contains(t)),s=u.isRootMenu&&u.viewport?.contains(t);(n||s||!u.isRootMenu)&&e.preventDefault()}),onKeyDown:Ul(e.onKeyDown,e=>{const t=e.altKey||e.ctrlKey||e.metaKey;if("Tab"===e.key&&!t){const t=h_(e.currentTarget),n=document.activeElement,s=t.findIndex(e=>e===n);m_(e.shiftKey?t.slice(0,s).reverse():t.slice(s+1,t.length))?e.preventDefault():r.current?.focus()}}),onEscapeKeyDown:Ul(e.onEscapeKeyDown,e=>{i.current=!0})})})}),i_="NavigationMenuViewport",o_=p.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=FN(i_,e.__scopeNavigationMenu),r=Boolean(a.value);return c.jsx(Ov,{present:n||r,children:c.jsx(l_,{...s,ref:t})})});o_.displayName=i_;var l_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,children:s,...a}=e,r=FN(i_,n),i=ll(t,r.onViewportChange),o=ON(t_,e.__scopeNavigationMenu),[l,d]=p.useState(null),[u,h]=p.useState(null),m=l?l?.width+"px":void 0,f=l?l?.height+"px":void 0,g=Boolean(r.value),x=g?r.value:r.previousValue;return p_(u,()=>{u&&d({width:u.offsetWidth,height:u.offsetHeight})}),c.jsx(nc.div,{"data-state":f_(g),"data-orientation":r.orientation,...a,ref:i,style:{pointerEvents:!g&&r.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":m,"--radix-navigation-menu-viewport-height":f,...a.style},onPointerEnter:Ul(e.onPointerEnter,r.onContentEnter),onPointerLeave:Ul(e.onPointerLeave,v_(r.onContentLeave)),children:Array.from(o.items).map(([e,{ref:t,forceMount:n,...s}])=>{const a=x===e;return c.jsx(Ov,{present:n||a,children:c.jsx(r_,{...s,ref:ol(t,e=>{a&&e&&h(e)})})},e)})})}),c_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...s}=e,a=FN("FocusGroup",n);return c.jsx(AN.Provider,{scope:n,children:c.jsx(AN.Slot,{scope:n,children:c.jsx(nc.div,{dir:a.dir,...s,ref:t})})})}),d_=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],u_=p.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...s}=e,a=TN(n),r=FN("FocusGroupItem",n);return c.jsx(AN.ItemSlot,{scope:n,children:c.jsx(nc.button,{...s,ref:t,onKeyDown:Ul(e.onKeyDown,e=>{if(["Home","End",...d_].includes(e.key)){let t=a().map(e=>e.ref.current);if(["rtl"===r.dir?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(e.key)&&t.reverse(),d_.includes(e.key)){const n=t.indexOf(e.currentTarget);t=t.slice(n+1)}setTimeout(()=>m_(t)),e.preventDefault()}})})})});function h_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function m_(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}function p_(e,t){const n=ac(t);Ec(()=>{let t=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(t),s.unobserve(e)}}},[e,n])}function f_(e){return e?"open":"closed"}function g_(e,t){return`${e}-trigger-${t}`}function x_(e,t){return`${e}-content-${t}`}function v_(e){return t=>"mouse"===t.pointerType?e(t):void 0}var y_=zN,b_=VN,w_=KN,S_=QN,j_=XN,C_=JN,k_=n_,N_=o_;const __=p.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(y_,{ref:s,className:al("relative z-10 flex max-w-max flex-1 items-center justify-center",e),...n,children:[t,c.jsx(D_,{})]}));__.displayName=y_.displayName;const P_=p.forwardRef(({className:e,...t},n)=>c.jsx(b_,{ref:n,className:al("group flex flex-1 list-none items-center justify-center space-x-1",e),...t}));P_.displayName=b_.displayName;const E_=w_,R_=uo("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),A_=p.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(S_,{ref:s,className:al(R_(),"group",e),...n,children:[t," ",c.jsx(Vp,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));A_.displayName=S_.displayName;const T_=p.forwardRef(({className:e,...t},n)=>c.jsx(k_,{ref:n,className:al("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",e),...t}));T_.displayName=k_.displayName;const M_=j_,D_=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{className:al("absolute left-0 top-full flex justify-center"),children:c.jsx(N_,{className:al("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",e),ref:n,...t})}));D_.displayName=N_.displayName;function L_(e){const t=F_(e),n=p.forwardRef((e,n)=>{const{children:s,...a}=e,r=p.Children.toArray(s),i=r.find(O_);if(i){const e=i.props.children,s=r.map(t=>t===i?p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null:t);return c.jsx(t,{...a,ref:n,children:p.isValidElement(e)?p.cloneElement(e,void 0,s):null})}return c.jsx(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}function F_(e){const t=p.forwardRef((e,t)=>{const{children:n,...s}=e;if(p.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const s in t){const a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==p.Fragment&&(a.ref=t?ol(t,e):e),p.cloneElement(n,a)}return p.Children.count(n)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}p.forwardRef(({className:e,...t},n)=>c.jsx(C_,{ref:n,className:al("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",e),...t,children:c.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})})).displayName=C_.displayName;var I_=Symbol("radix.slottable");function O_(e){return p.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===I_}var z_="Popover",[B_]=Vl(z_,[_u]),$_=_u(),[U_,V_]=B_(z_),q_=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:a,onOpenChange:r,modal:i=!1}=e,o=$_(t),l=p.useRef(null),[d,u]=p.useState(!1),[h,m]=Ju({prop:s,defaultProp:a??!1,onChange:r,caller:z_});return c.jsx(Vu,{...o,children:c.jsx(U_,{scope:t,contentId:Tc(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:i,children:n})})};q_.displayName=z_;var H_="PopoverAnchor";p.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=V_(H_,n),r=$_(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=a;return p.useEffect(()=>(i(),()=>o()),[i,o]),c.jsx(qu,{...r,...s,ref:t})}).displayName=H_;var G_="PopoverTrigger",K_=p.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=V_(G_,n),r=$_(n),i=ll(t,a.triggerRef),o=c.jsx(nc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":rP(a.open),...s,ref:i,onClick:Ul(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:c.jsx(qu,{asChild:!0,...r,children:o})});K_.displayName=G_;var W_="PopoverPortal",[Q_,Y_]=B_(W_,{forceMount:void 0}),X_=e=>{const{__scopePopover:t,forceMount:n,children:s,container:a}=e,r=V_(W_,t);return c.jsx(Q_,{scope:t,forceMount:n,children:c.jsx(Ov,{present:n||r.open,children:c.jsx(Ku,{asChild:!0,container:a,children:s})})})};X_.displayName=W_;var Z_="PopoverContent",J_=p.forwardRef((e,t)=>{const n=Y_(Z_,e.__scopePopover),{forceMount:s=n.forceMount,...a}=e,r=V_(Z_,e.__scopePopover);return c.jsx(Ov,{present:s||r.open,children:r.modal?c.jsx(tP,{...a,ref:t}):c.jsx(nP,{...a,ref:t})})});J_.displayName=Z_;var eP=L_("PopoverContent.RemoveScroll"),tP=p.forwardRef((e,t)=>{const n=V_(Z_,e.__scopePopover),s=p.useRef(null),a=ll(t,s),r=p.useRef(!1);return p.useEffect(()=>{const e=s.current;if(e)return dh(e)},[]),c.jsx(Xh,{as:eP,allowPinchZoom:!0,children:c.jsx(sP,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ul(e.onCloseAutoFocus,e=>{e.preventDefault(),r.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Ul(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,s=2===t.button||n;r.current=s},{checkForDefaultPrevented:!1}),onFocusOutside:Ul(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),nP=p.forwardRef((e,t)=>{const n=V_(Z_,e.__scopePopover),s=p.useRef(!1),a=p.useRef(!1);return c.jsx(sP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||n.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),sP=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:r,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...h}=e,m=V_(Z_,n),p=$_(n);return xc(),c.jsx(Sc,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:r,children:c.jsx(dc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:c.jsx(Hu,{"data-state":rP(m.open),role:"dialog",id:m.contentId,...p,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),aP="PopoverClose";p.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=V_(aP,n);return c.jsx(nc.button,{type:"button",...s,ref:t,onClick:Ul(e.onClick,()=>a.onOpenChange(!1))})}).displayName=aP;function rP(e){return e?"open":"closed"}p.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=$_(n);return c.jsx(Gu,{...a,...s,ref:t})}).displayName="PopoverArrow";var iP=X_,oP=J_;const lP=q_,cP=K_,dP=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},a)=>c.jsx(iP,{children:c.jsx(oP,{ref:a,align:t,sideOffset:n,className:al("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));dP.displayName=oP.displayName;const uP=qy,hP=Xy,mP=Gy,pP=p.forwardRef(({className:e,...t},n)=>c.jsx(Ky,{ref:n,className:al("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));pP.displayName=Ky.displayName;const fP=p.forwardRef(({side:e="right",className:t,children:n,...s},a)=>c.jsxs(mP,{children:[c.jsx(pP,{}),c.jsxs(Wy,{ref:a,className:al("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out","top"===e&&"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top","bottom"===e&&"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","left"===e&&"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm","right"===e&&"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm",t),...s,children:[n,c.jsxs(hP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(ax,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fP.displayName=Wy.displayName;const gP=({className:e,...t})=>c.jsx("div",{className:al("flex flex-col space-y-2 text-center sm:text-left",e),...t});gP.displayName="SheetHeader";const xP=({className:e,...t})=>c.jsx("div",{className:al("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});xP.displayName="SheetFooter";const vP=p.forwardRef(({className:e,...t},n)=>c.jsx(Qy,{ref:n,className:al("text-lg font-semibold text-foreground",e),...t}));vP.displayName=Qy.displayName;const yP=p.forwardRef(({className:e,...t},n)=>c.jsx(Yy,{ref:n,className:al("text-sm text-muted-foreground",e),...t}));yP.displayName=Yy.displayName;const bP=p.forwardRef(({className:e,onClick:t,...n},s)=>c.jsx("div",{ref:s,className:al("flex items-center gap-4 p-4 rounded-lg border bg-card transition-colors",t&&"cursor-pointer hover:bg-accent/50",e),onClick:t,...n}));bP.displayName="Item";const wP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("flex-shrink-0",e),...t}));wP.displayName="ItemMedia";const SP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("flex-1 min-w-0",e),...t}));SP.displayName="ItemContent";const jP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("text-sm font-medium text-foreground",e),...t}));jP.displayName="ItemTitle";const CP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("text-sm text-muted-foreground mt-1",e),...t}));CP.displayName="ItemDescription";const kP=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:al("flex items-center gap-2 flex-shrink-0",e),...t}));function NP({items:e,selectedItems:t,searchQuery:n,onSearchQueryChange:s,onToggleItem:a,onClear:r,label:i="Filters",searchPlaceholder:o="Search filters...",emptyText:l="No results found.",clearLabel:d="Clear filters",buttonClassName:u,popoverContentClassName:h,maxLabelLength:m=8,badgeCount:p,children:f,align:g="start"}){const x=!!f,v=p??t?.size??0,y=x||0===v?i:1===v?(()=>{const e=Array.from(t??[])[0]??"";return m>0?e.slice(0,m):e})():`${v}`;return c.jsxs(lP,{children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",className:al("h-8 gap-2 px-4 shadow-sm border-dashed",u),children:[c.jsx(Lf,{className:"h-4 w-4"}),y,v>0&&c.jsx("div",{className:"bg-primary text-primary-foreground text-[10px] rounded-full h-4 w-4 grid place-items-center ml-1 font-bold",children:v})]})}),c.jsx(dP,{className:al(x?"p-0":"w-[250px] p-0",h),align:g,children:x?f:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:o,value:n??"",onValueChange:s??(()=>{})}),c.jsxs(wN,{children:[c.jsx(SN,{children:l}),c.jsx(jN,{children:(e??[]).map(e=>{const n=t?.has(e)??!1;return c.jsxs(kN,{onSelect:()=>a?.(e),children:[c.jsx("div",{className:al("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",n?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:c.jsx(Up,{className:"h-3 w-3"})}),c.jsx("span",{children:e})]},e)})}),v>0&&r&&c.jsxs(c.Fragment,{children:[c.jsx(Hj,{}),c.jsx(jN,{children:c.jsx(kN,{onSelect:r,className:"justify-center text-center",children:d})})]})]})]})})]})}function _P({column:e,title:t,options:n,onFilterChange:s}){const a=e?.getFacetedUniqueValues(),r=new Set(e?.getFilterValue());return c.jsxs(lP,{children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",size:"sm",className:al("h-8 px-2 text-xs","whitespace-nowrap border-dashed"),children:[c.jsx(Jp,{className:al("h-3 w-3","mr-1")}),t,r?.size>0&&c.jsxs(c.Fragment,{children:[c.jsx(Hj,{orientation:"vertical",className:"mx-2 h-4"}),c.jsx(mC,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:r.size}),c.jsx("div",{className:"hidden space-x-1 lg:flex",children:r.size>2?c.jsxs(mC,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[r.size," selected"]}):n.filter(e=>r.has(e.value)).map(e=>c.jsx(mC,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:e.label},e.value))})]})]})}),c.jsx(dP,{className:"w-[200px] p-0",align:"start",children:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:t}),c.jsxs(wN,{children:[c.jsx(SN,{children:"No results found."}),c.jsx(jN,{children:n.map(t=>{const n=r.has(t.value);return c.jsxs(kN,{onSelect:()=>{n?r.delete(t.value):r.add(t.value);const a=Array.from(r),i=a.length?a:void 0;e?.setFilterValue(i),s&&s(i)},children:[c.jsx("div",{className:al("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",n?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:c.jsx(Up,{})}),t.icon&&c.jsx(t.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),c.jsx("span",{children:t.label}),a?.get(t.value)&&c.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:a.get(t.value)})]},t.value)})}),r.size>0&&c.jsxs(c.Fragment,{children:[c.jsx(CN,{}),c.jsx(jN,{children:c.jsx(kN,{onSelect:()=>{e?.setFilterValue(void 0),s&&s(void 0)},className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function PP({table:e,density:t,onDensityChange:n}){return c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsxs(vl,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex items-center gap-2",children:[c.jsx(Cg,{className:"h-3.5 w-3.5"}),"View"]})}),c.jsxs(JS,{align:"end",className:"w-[180px]",children:[c.jsx(sj,{children:"View Options"}),c.jsx(aj,{}),c.jsxs(QS,{children:[c.jsxs(XS,{children:[c.jsx(xg,{className:"mr-2 h-3.5 w-3.5"}),"Density"]}),c.jsx(ZS,{children:c.jsxs(YS,{value:t,onValueChange:n,children:[c.jsxs(nj,{value:"compact",children:[c.jsx(Ug,{className:"mr-2 h-3.5 w-3.5"}),"Compact"]}),c.jsxs(nj,{value:"comfortable",children:[c.jsx(Ig,{className:"mr-2 h-3.5 w-3.5"}),"Comfortable"]}),c.jsxs(nj,{value:"spacious",children:[c.jsx(Ff,{className:"mr-2 h-3.5 w-3.5"}),"Spacious"]})]})})]}),c.jsxs(QS,{children:[c.jsxs(XS,{children:[c.jsx(af,{className:"mr-2 h-3.5 w-3.5"}),"Columns"]}),c.jsxs(ZS,{className:"w-[200px]",children:[c.jsx(sj,{children:"Toggle columns"}),c.jsx(aj,{}),e.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()).map(e=>c.jsx(tj,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:t=>e.toggleVisibility(!!t),children:e.columnDef.header||e.id},e.id))]})]})]})]})}kP.displayName="ItemActions";const EP=p.forwardRef(function({table:e,globalFilter:t,onGlobalFilterChange:n,onCreate:s,onExport:a,onFilterClick:r,hasActiveFilters:i=!1,onResetFilters:o,loading:l=!1,customActions:d,filterDefs:u=[],density:h,onDensityChange:m},f){const g=p.useRef(null);p.useImperativeHandle(f,()=>({focusSearch:()=>{g.current?.focus(),g.current?.select()}}));const x=""!==t.trim()||i||e.getState().columnFilters.length>0;return c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-1.5 overflow-hidden min-w-0",children:[c.jsxs("div",{className:"relative flex-shrink-0",style:{width:"240px"},children:[l?c.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 z-10",children:c.jsx(If,{className:"h-3 w-3 text-muted-foreground animate-spin"})}):c.jsx(Sg,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground"}),c.jsx(kl,{ref:g,type:"search",placeholder:"Search all columns...",value:t??"",onChange:e=>n(e.target.value),className:al("h-8 pl-8 pr-2 text-xs","w-full focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none")})]}),c.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[r&&c.jsxs(vl,{variant:"outline",size:"sm",className:al("h-8 px-2 text-xs","whitespace-nowrap"),onClick:r,children:[c.jsx(yf,{className:al("h-3 w-3","mr-1",i&&"fill-current")}),"Filters"]}),u.map(t=>{const n=e.getColumn(t.columnId);return n?c.jsx(_P,{column:n,title:t.title,options:t.options},t.columnId):null}),x&&c.jsxs(vl,{variant:"outline",size:"sm",className:al("h-8 px-2 text-xs","whitespace-nowrap"),onClick:()=>{n(""),e.resetColumnFilters(),o?.()},title:"Reset all filters",children:[c.jsx(ax,{className:al("h-3 w-3","mr-1")}),"Reset"]})]})]}),c.jsxs("div",{className:al("flex items-center gap-1.5 flex-shrink-0"),children:[d,s&&c.jsxs(vl,{variant:"default",size:"sm",className:al("h-8 px-2 text-xs"),onClick:s,children:[c.jsx(hg,{className:al("h-3 w-3","mr-1")}),"New"]}),c.jsxs(vl,{variant:"outline",size:"sm",onClick:()=>{a?a():function(e,t="enterprise-data.csv"){const n=e.map(e=>Object.values(e).join(",")).join("\n"),s=new Blob([n],{type:"text/csv"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=t,r.click()}(e.getFilteredRowModel().rows.map(e=>e.original))},className:al("h-8 px-2 text-xs"),children:[c.jsx(df,{className:al("h-3 w-3","mr-1")}),"Export"]}),c.jsx(PP,{table:e,density:h,onDensityChange:m})]})]})});EP.displayName="TableToolbar";const RP=p.forwardRef(function({title:e,description:t,table:n,globalFilter:s,onGlobalFilterChange:a,onCreate:r,onExport:i,onFilterClick:o,hasActiveFilters:l=!1,onResetFilters:d,onStatusFilterChange:u,manualFiltering:h=!1,loading:m=!1,compact:p=!0,customActions:f,filterDefs:g,density:x="comfortable",onDensityChange:v=()=>{}},y){const b=Ua(),w=b.textSizeCardTitle,S=b.textSizeCardDescription;return c.jsxs("div",{className:al("flex flex-col mt-4",b.gapCard),children:[c.jsxs("div",{className:al("flex items-center",b.gapCard),children:[c.jsx(Sl,{className:al(w,"font-semibold"),children:e}),t&&c.jsx(jl,{className:al(S,"text-muted-foreground"),children:t})]}),c.jsx(EP,{ref:y,table:n,globalFilter:s,onGlobalFilterChange:a,onCreate:r,onExport:i,onFilterClick:o,hasActiveFilters:l,onResetFilters:d,manualFiltering:h,loading:m,customActions:f,filterDefs:g,density:x,onDensityChange:v})]})});function AP({table:e,enableRowSelection:t=!1,enableColumnResizing:n=!0,compact:s=!0}){const[a,r]=p.useState(null),i=Ua(),o=s?"py-1":"py-2",l=s?"px-2.5":"px-3.5",d=i.textSize;return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:al("w-full border-collapse",d,!n&&"table-auto"),style:{width:"100%"},children:[c.jsx("colgroup",{children:e.getAllColumns().map(e=>{const t=e.columnDef,s=e.getSize();return"actions"===e.id||"action"===e.id||"actions"===t.id||"action"===t.id?c.jsx("col",{style:{width:"1%",minWidth:"50px",maxWidth:"100px"}},e.id):c.jsx("col",{style:{minWidth:n?`${s}px`:t.minSize?`${t.minSize}px`:void 0,width:n?void 0:t.size?`${t.size}px`:void 0,maxWidth:t.maxSize?`${t.maxSize}px`:void 0}},e.id)})}),c.jsx("thead",{className:"bg-muted/40 sticky top-0 z-10 border-b border-border",children:e.getHeaderGroups().map(s=>c.jsx("tr",{children:s.headers.map((i,d)=>{const u=0===d;s.headers.length;const h=a===i.id,m="actions"===i.column.id||"action"===i.column.id||"actions"===i.column.columnDef.id||"action"===i.column.columnDef.id;return c.jsx("th",{className:al(l,o,"text-left font-semibold text-muted-foreground bg-muted/10","relative leading-tight","antialiased",h&&"bg-muted/60",m&&"sticky right-0 bg-muted/40 z-20",m&&"opacity-0",n&&i.column.getCanResize()&&h&&"cursor-col-resize"),style:{width:n&&!m?i.getSize():void 0,position:m?"sticky":void 0},children:i.isPlaceholder?null:c.jsxs("div",{className:"flex items-center gap-1.5 relative",children:[t&&u&&c.jsx(RC,{checked:e.getIsSomeRowsSelected()?"indeterminate":e.getIsAllRowsSelected(),onCheckedChange:t=>{e.toggleAllRowsSelected("indeterminate"!==t&&!!t)},className:"h-3.5 w-3.5","aria-label":"Select all rows"}),c.jsxs("div",{className:al("flex items-center gap-1.5 flex-1 min-w-0",i.column.getCanSort()&&"cursor-pointer select-none hover:text-foreground",!i.column.getCanSort()&&"cursor-default"),onClick:i.column.getToggleSortingHandler(),children:[c.jsx("span",{className:"truncate",children:ro(i.column.columnDef.header,i.getContext())}),i.column.getCanSort()&&i.column.getIsSorted()&&c.jsx("span",{className:"flex-shrink-0",children:{asc:c.jsx(Gp,{className:"h-3 w-3 text-primary"}),desc:c.jsx(Vp,{className:"h-3 w-3 text-primary"})}[i.column.getIsSorted()]})]}),n&&i.column.getCanResize()&&c.jsx("div",{onMouseDown:i.getResizeHandler(),onTouchStart:i.getResizeHandler(),onMouseEnter:()=>r(i.id),onMouseLeave:()=>r(null),className:al("absolute right-0 top-0 h-full w-1 cursor-col-resize touch-none select-none","hover:bg-primary/50 transition-colors z-30",h&&"bg-primary"),style:{cursor:"col-resize",width:"6px",marginRight:"-3px",pointerEvents:"auto"}})]})},i.id)})},s.id))}),c.jsx("tbody",{children:0===e.getRowModel().rows.length?c.jsx("tr",{children:c.jsx("td",{colSpan:e.getAllColumns().length,className:al(l,o,"text-center text-muted-foreground","leading-relaxed","antialiased"),children:"No data available"})}):e.getRowModel().rows.map((e,n)=>{const s=e.getIsSelected(),a=e.getVisibleCells()[e.getVisibleCells().length-1];return"actions"===a?.column.id||"action"===a?.column.id||"actions"===a?.column.columnDef.id||a?.column.columnDef.id,c.jsx("tr",{className:al("border-b border-border/10 transition-colors group","hover:bg-muted/30",s&&"bg-primary/5 hover:bg-primary/10",n%2==0?"bg-background":"bg-muted/10"),children:e.getVisibleCells().map((a,r)=>{const i=0===r;e.getVisibleCells().length;const u="actions"===a.column.id||"action"===a.column.id||"actions"===a.column.columnDef.id||"action"===a.column.columnDef.id;return c.jsx("td",{className:al(l,o,d,"text-foreground","leading-normal","font-normal","antialiased",u&&al("sticky right-0 z-10 transition-opacity",n%2==0?"bg-background":"bg-muted/10"),u&&al("opacity-0 group-hover:opacity-100")),style:{position:u?"sticky":void 0},children:t&&i?c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(RC,{checked:s,onCheckedChange:t=>{e.toggleSelected(!!t)},className:"h-3.5 w-3.5","aria-label":`Select row ${n+1}`,onClick:e=>e.stopPropagation()}),c.jsx("span",{className:"flex-1 min-w-0 leading-normal",children:ro(a.column.columnDef.cell,a.getContext())})]}):c.jsx("div",{className:"truncate leading-normal",children:ro(a.column.columnDef.cell,a.getContext())})},a.id)})},e.id)})})]})})}function TP({table:e,totalCount:t,manualPagination:n,onPageSizeChange:s}){const a="text-xs",r="h-6 w-6",i="h-3 w-3";return c.jsxs("div",{className:al("flex items-center justify-between border-t border-border bg-muted/10","px-3 py-1.5"),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:al(a,"text-muted-foreground leading-none"),children:["Page ",e.getState().pagination.pageIndex+1," of"," ",e.getPageCount()," "," ","number"==typeof t?t:e.getFilteredRowModel().rows.length," ","number"==typeof t&&1===t?"row":"rows"]}),c.jsx("select",{value:e.getState().pagination.pageSize,onChange:t=>{const a=Number(t.target.value);e.setPageSize(a),n&&s&&(e.setPageIndex(0),s(a))},className:al(a,"h-6 border border-border rounded-md px-2 bg-background leading-none","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-1"),"aria-label":"Rows per page",children:[10,20,50,100,200].map(e=>c.jsxs("option",{value:e,children:[e," per page"]},e))})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(vl,{variant:"outline",size:"sm",onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),className:al(r,"p-0 flex items-center justify-center"),"aria-label":"First page",children:c.jsx(Kp,{className:i})}),c.jsx(vl,{variant:"outline",size:"sm",onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),className:al(r,"p-0 flex items-center justify-center"),"aria-label":"Previous page",children:c.jsx(qp,{className:i})}),c.jsx(vl,{variant:"outline",size:"sm",onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),className:al(r,"p-0 flex items-center justify-center"),"aria-label":"Next page",children:c.jsx(Hp,{className:i})}),c.jsx(vl,{variant:"outline",size:"sm",onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),className:al(r,"p-0 flex items-center justify-center"),"aria-label":"Last page",children:c.jsx(Wp,{className:i})})]})]})}function MP({table:e,selectedCount:t,customActions:n}){const s=Ua();return c.jsxs("div",{className:al("flex items-center justify-between",s.paddingCell,s.paddingRow,"bg-primary/5 border-b border-border",s.textSize),children:[c.jsxs("div",{className:al("flex items-center",s.gapButtonGroup),children:[c.jsxs("span",{className:"font-medium text-foreground",children:[t," ",1===t?"row":"rows"," selected"]}),n&&c.jsx("div",{className:al("flex items-center",s.gapButtonGroup),children:n})]}),c.jsxs(vl,{variant:"ghost",size:"sm",onClick:()=>{e.toggleAllRowsSelected(!1)},className:al(s.buttonHeightSmall,s.textSizeSmall),"aria-label":"Clear selection",children:[c.jsx(ax,{className:al(s.iconSize,"mr-1")}),"Clear"]})]})}function DP({children:e,align:t="left",className:n}){const s=Ua();return c.jsx("div",{className:al({left:"text-left",right:"text-right w-full",center:"text-center"}[t],s.textSizeLabel,n),children:e})}function LP(e){const{accessorKey:t,header:n,size:s=150,cellClassName:a="text-foreground truncate block",headerAlign:r="left",cell:i,fallback:o="-",additionalOptions:l={}}=e,d="string"==typeof n?c.jsx(DP,{align:r,children:n}):c.jsx(DP,{align:r,children:n()});return{accessorKey:t,header:()=>d,cell:i||(e=>{const t=e.getValue();return c.jsx("span",{className:a,children:null!=t&&""!==t?t:o})}),size:s,...l}}function FP(e){const{accessorKey:t,header:n,size:s=180,cellClassName:a="",headerAlign:r="left",cell:i,fallback:o="-",formatOptions:l={dateStyle:"short",timeStyle:"short"},additionalOptions:d={}}=e,u="string"==typeof n?c.jsx(DP,{align:r,children:n}):c.jsx(DP,{align:r,children:n()});return{accessorKey:t,header:()=>u,cell:i||(e=>{const t=e.getValue();if(null==t||""===t)return c.jsx("span",{className:a,children:o});try{const e=t instanceof Date?t:new Date(t);if(isNaN(e.getTime()))return c.jsx("span",{className:a,children:o});const n=e.toLocaleString(void 0,l);return c.jsx("span",{className:a,children:n})}catch{return c.jsx("span",{className:a,children:o})}}),size:s,...d}}function IP(e){const{accessorKey:t,header:n,size:s=100,cellClassName:a="font-medium truncate block",headerAlign:r="left",cell:i,additionalOptions:o={}}=e,l="string"==typeof n?c.jsx(DP,{align:r,children:n}):c.jsx(DP,{align:r,children:n()});return{accessorKey:t,header:()=>l,cell:i||(e=>c.jsx("span",{className:a,children:e.getValue()})),size:s,...o}}function OP(e){const{getDisplayName:t,getAvatar:n,getInitials:s,header:a,size:r,showAvatar:i=!0,onClick:o,renderIndicators:l,headerAlign:d="left",additionalOptions:u={}}=e,h="string"==typeof a?c.jsx(DP,{align:d,children:a}):c.jsx(DP,{align:d,children:a()}),m=i?250:200,p=({displayName:e,avatarUrl:t,initials:n,showAvatar:s,onClick:a,renderIndicators:r,row:i})=>{const o=Ua();return s?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cC,{className:"h-6 w-6 flex-shrink-0",children:t?c.jsx("img",{src:t,alt:e,className:"h-full w-full object-cover"}):c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted text-[10px] font-medium",children:n})}),c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx("button",{type:"button",className:"text-left hover:underline flex-1 min-w-0",onClick:a,children:c.jsx("div",{className:"min-w-0 flex-1",children:c.jsx("div",{className:al("font-medium truncate hover:underline text-primary hover:text-primary",o.textSize),children:e})})}),r&&c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:r(i)})]})]}):c.jsxs("button",{type:"button",className:al("group font-medium truncate hover:underline text-left transition-colors group-hover:text-primary flex items-center gap-2 w-full",o.textSize),onClick:a,children:[c.jsx("span",{className:"flex-1 min-w-0 truncate",children:e}),r&&c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:r(i)})]})};return{id:"string"==typeof a?a.toLowerCase().replace(/\s+/g,"-"):"identified",accessorFn:e=>t(e),header:()=>h,cell:e=>{const a=e.row.original,r=t(a),d=n?.(a),u=s?s(a):(e=>{const t=e.trim().split(/\s+/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():t[0].length>=2?t[0].slice(0,2).toUpperCase():t[0][0]?.toUpperCase()||"?"})(r);return c.jsx(p,{displayName:r,avatarUrl:d,initials:u,showAvatar:i,onClick:e=>{e.stopPropagation(),o?.(a,e)},renderIndicators:l,row:a})},size:r??m,...u}}function zP(e={}){const{header:t="Actions",size:n=180,actions:s=[],customActions:a,additionalOptions:r={}}=e,i="string"==typeof t?c.jsx(DP,{align:"right",children:t}):c.jsx(DP,{align:"right",children:t()});return{id:"actions",header:()=>i,cell:e=>{const t=e.row.original;if(a)return c.jsx("div",{className:"flex items-center justify-end gap-0.5",children:a(t)});const n=s.filter(e=>!e.showWhen||e.showWhen(t));return c.jsx("div",{className:"flex items-center justify-end gap-0.5",children:n.map((e,n)=>{const s=e.icon,a=!!e.disabledWhen&&e.disabledWhen(t),r="function"==typeof e.title?e.title(t):e.title||"",i=e.variant||"ghost",o=e.size||"sm",l="destructive"===i?"h-7 w-7 p-0 text-destructive hover:text-destructive hover:bg-destructive/10 transition-colors":"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors";return c.jsx(vl,{variant:i,size:o,onClick:n=>{n.stopPropagation(),e.onClick(t,n)},disabled:a,className:e.className||l,title:r,children:c.jsx(s,{className:"h-3 w-3"})},n)})})},size:n,...r}}RP.displayName="TableHeader";const BP=[IP({accessorKey:"id",header:"ID",size:80,cellClassName:"font-mono"}),LP({accessorKey:"name",header:"Name",size:150,cellClassName:"font-medium truncate block"}),LP({accessorKey:"email",header:"Email",size:200}),LP({accessorKey:"department",header:"Department",size:120,cellClassName:"truncate block"}),LP({accessorKey:"status",header:"Status",size:100,cell:e=>{const t=e.getValue();return c.jsx(mC,{variant:{active:"default",inactive:"secondary",pending:"outline"}[t],className:"text-xs",children:t})},additionalOptions:{filterFn:(e,t,n)=>n.includes(e.getValue(t))}}),LP({accessorKey:"revenue",header:"Revenue",size:120,cell:e=>c.jsxs("span",{className:"font-mono",children:["$",e.getValue().toLocaleString()]})}),LP({accessorKey:"createdAt",header:"Created",size:100,cell:e=>c.jsx("span",{children:new Date(e.getValue()).toLocaleDateString()})}),LP({accessorKey:"lastLogin",header:"Last Login",size:100,cell:e=>c.jsx("span",{children:new Date(e.getValue()).toLocaleDateString()})})];function $P({data:e=[],columns:t,title:n="Data Table",description:s="High-density data display with advanced features",useDefaultColumns:a=!0,onCreate:r,onFilterClick:i,hasActiveFilters:o=!1,onResetFilters:l,onSearch:d,onStatusFilterChange:u,manualFiltering:h=!1,loading:m=!1,serverPagination:f,onPageChange:g,manualPagination:x=!1,onPageSizeChange:v,enableRowSelection:y=!1,enableColumnResizing:b=!0,compact:w,onRowSelectionChange:S,bulkActions:j,emptyState:C,customActions:k,viewId:N,filterDefs:_}){const[P,E]=p.useState(""),R=p.useRef(null),A=p.useRef(d),T=p.useRef(null),M=p.useRef(null),D=(e,t)=>{const[n,s]=p.useState(()=>{if(!N)return t;try{const n=localStorage.getItem(`datatable-view-${N}-${e}`);return n?JSON.parse(n):t}catch(n){return t}});return p.useEffect(()=>{if(N)try{localStorage.setItem(`datatable-view-${N}-${e}`,JSON.stringify(n))}catch(t){}},[N,e,n]),[n,s]},[L,F]=D("visibility",{}),[I,O]=D("sorting",[]),z=Va(),[B,$]=D("density",z?"compact":"comfortable"),U=void 0!==w?w:"compact"===B,[V,q]=p.useState({}),[H,G]=p.useState({});p.useEffect(()=>{A.current=d},[d]),p.useEffect(()=>{if(A.current&&h)return R.current&&clearTimeout(R.current),""===P?void A.current(P):(R.current=setTimeout(()=>{A.current?.(P)},500),()=>{R.current&&clearTimeout(R.current)})},[P,h]);const K=e=>{E(e),d&&!h&&d(e)},W=function(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=p.useState(()=>({current:so(t)})),[s,a]=p.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...s,...e.state},onStateChange:t=>{a(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:e,columns:t||(a?BP:[]),state:{globalFilter:P,columnVisibility:L,rowSelection:V,columnSizing:H,sorting:I,...x&&f?{pagination:{pageIndex:Math.max(0,(f.page||1)-1),pageSize:f.pageSize??50}}:{}},onGlobalFilterChange:K,onColumnVisibilityChange:F,onRowSelectionChange:q,onColumnSizingChange:G,onSortingChange:O,enableRowSelection:y,enableColumnResizing:b,columnResizeMode:"onChange",...x&&(g||v)?{onPaginationChange:e=>{const t=x&&f?{pageIndex:Math.max(0,f.page-1),pageSize:f.pageSize}:{pageIndex:0,pageSize:50},n="function"==typeof e?e(t):e,s=n.pageIndex??0,a=n.pageSize??t.pageSize;g&&s!==t.pageIndex&&g(Math.max(1,s+1)),v&&a!==t.pageSize&&v(a)}}:{},getCoreRowModel:e=>gi(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(t,a,r){void 0===a&&(a=0);const i=[];for(let l=0;l<t.length;l++){const c=Si(e,e._getRowId(t[l],l,r),t[l],l,a,0,null==r?void 0:r.id);var o;n.flatRows.push(c),n.rowsById[c.id]=c,i.push(c),e.options.getSubRows&&(c.originalSubRows=e.options.getSubRows(t[l],l),null!=(o=c.originalSubRows)&&o.length&&(c.subRows=s(c.originalSubRows,a+1,c)))}return i};return n.rows=s(t),n},xi(e.options,"debugTable",0,()=>e._autoResetPageIndex())),...x?{}:{getPaginationRowModel:e=>gi(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{if(!n.rows.length)return n;const{pageSize:s,pageIndex:a}=t;let{rows:r,flatRows:i,rowsById:o}=n;const l=s*a,c=l+s;let d;r=r.slice(l,c),d=e.options.paginateExpandedRows?{rows:r,flatRows:i,rowsById:o}:function(e){const t=[],n=e=>{var s;t.push(e),null!=(s=e.subRows)&&s.length&&e.getIsExpanded()&&e.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}({rows:r,flatRows:i,rowsById:o}),d.flatRows=[];const u=e=>{d.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return d.rows.forEach(u),d},xi(e.options,"debugTable"))},getSortedRowModel:e=>gi(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||null==t||!t.length)return n;const s=e.getState().sorting,a=[],r=s.filter(t=>{var n;return null==(n=e.getColumn(t.id))?void 0:n.getCanSort()}),i={};r.forEach(t=>{const n=e.getColumn(t.id);n&&(i[t.id]={sortUndefined:n.columnDef.sortUndefined,invertSorting:n.columnDef.invertSorting,sortingFn:n.getSortingFn()})});const o=e=>{const t=e.map(e=>({...e}));return t.sort((e,t)=>{for(let s=0;s<r.length;s+=1){var n;const a=r[s],o=i[a.id],l=o.sortUndefined,c=null!=(n=null==a?void 0:a.desc)&&n;let d=0;if(l){const n=void 0===e.getValue(a.id),s=void 0===t.getValue(a.id);if(n||s){if("first"===l)return n?-1:1;if("last"===l)return n?1:-1;d=n&&s?0:n?l:-l}}if(0===d&&(d=o.sortingFn(e,t,a.id)),0!==d)return c&&(d*=-1),o.invertSorting&&(d*=-1),d}return e.index-t.index}),t.forEach(e=>{var t;a.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=o(e.subRows))}),t};return{rows:o(n.rows),flatRows:a,rowsById:n.rowsById}},xi(e.options,"debugTable",0,()=>e._autoResetPageIndex())),...h?{}:{getFilteredRowModel:e=>gi(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,s)=>{if(!t.rows.length||(null==n||!n.length)&&!s){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}const a=[],r=[];(null!=n?n:[]).forEach(t=>{var n;const s=e.getColumn(t.id);if(!s)return;const r=s.getFilterFn();r&&a.push({id:t.id,filterFn:r,resolvedValue:null!=(n=null==r.resolveFilterValue?void 0:r.resolveFilterValue(t.value))?n:t.value})});const i=(null!=n?n:[]).map(e=>e.id),o=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());let c,d;s&&o&&l.length&&(i.push("__global__"),l.forEach(e=>{var t;r.push({id:e.id,filterFn:o,resolvedValue:null!=(t=null==o.resolveFilterValue?void 0:o.resolveFilterValue(s))?t:s})}));for(let e=0;e<t.flatRows.length;e++){const n=t.flatRows[e];if(n.columnFilters={},a.length)for(let e=0;e<a.length;e++){c=a[e];const t=c.id;n.columnFilters[t]=c.filterFn(n,t,c.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(r.length){for(let e=0;e<r.length;e++){d=r[e];const t=d.id;if(d.filterFn(n,t,d.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return ao(t.rows,e=>{for(let t=0;t<i.length;t++)if(!1===e.columnFilters[i[t]])return!1;return!0},e)},xi(e.options,"debugTable",0,()=>e._autoResetPageIndex())),getFacetedRowModel:(e,t)=>gi(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,s,a)=>{if(!n.rows.length||(null==s||!s.length)&&!a)return n;const r=[...s.map(e=>e.id).filter(e=>e!==t),a?"__global__":void 0].filter(Boolean);return ao(n.rows,e=>{for(let t=0;t<r.length;t++)if(!1===e.columnFilters[r[t]])return!1;return!0},e)},xi(e.options,"debugTable")),getFacetedUniqueValues:(e,t)=>gi(()=>{var n;return[null==(n=e.getColumn(t))?void 0:n.getFacetedRowModel()]},e=>{if(!e)return new Map;let n=new Map;for(let a=0;a<e.flatRows.length;a++){const r=e.flatRows[a].getUniqueValues(t);for(let e=0;e<r.length;e++){const t=r[e];var s;n.has(t)?n.set(t,(null!=(s=n.get(t))?s:0)+1):n.set(t,1)}}return n},xi(e.options,"debugTable"))},manualFiltering:h,manualPagination:x,...x&&f?.totalPages?{pageCount:Math.max(1,f.totalPages)}:{},initialState:{pagination:{pageSize:f?.pageSize??50}}});p.useEffect(()=>{if(S&&y){const e=W.getSelectedRowModel().rows.map(e=>e.original);S(e)}},[V,S,y]),p.useEffect(()=>{const e=e=>{const t=document.activeElement,n=T.current&&t&&T.current.contains(t),s=t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("[role='dialog']")||t.closest("[role='combobox']")||t.closest("[role='listbox']"));!n||s||!M.current||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||"Enter"===e.key||" "===e.key||"Tab"===e.key||"Escape"===e.key||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].includes(e.key)||M.current.focusSearch()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);const Q=y?W.getSelectedRowModel().rows.length:0,Y=p.useMemo(()=>{const e=[..._||[]];return u&&!e.find(e=>"status"===e.columnId)&&e.push({columnId:"status",title:"Status",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Pending",value:"pending"}]}),e},[_,u]);p.useEffect(()=>{if(h&&u){const e=W.getState().columnFilters.find(e=>"status"===e.id),t=e?.value;Array.isArray(t)&&t.length>0&&t[0]}},[W.getState().columnFilters,h,u]);const X=p.useRef(void 0),Z=W.getState().columnFilters;return p.useEffect(()=>{if(!h||!u)return;const e=Z.find(e=>"status"===e.id),t=e?.value,n=Array.isArray(t)&&t.length>0?t[0]:void 0;n!==X.current&&(X.current=n,u(n))},[Z,h,u]),c.jsxs(bl,{ref:T,className:"w-full px-4 py-4",children:[c.jsx(RP,{ref:M,title:n,description:s,table:W,globalFilter:P,onGlobalFilterChange:K,onCreate:r,onFilterClick:i,hasActiveFilters:o,onResetFilters:l,manualFiltering:h,loading:m,customActions:k,filterDefs:Y,density:B,onDensityChange:$}),y&&Q>0&&c.jsx(MP,{table:W,selectedCount:Q,customActions:j}),c.jsxs(Cl,{children:[c.jsx(AP,{table:W,enableRowSelection:y,enableColumnResizing:b,compact:U}),0===W.getRowModel().rows.length&&!m&&C&&c.jsx("div",{className:"py-8",children:C})]}),c.jsx(TP,{table:W,totalCount:f?.total,manualPagination:x,onPageSizeChange:v,compact:U})]})}function UP({items:e,gridColsClass:t,renderItem:n,showActions:s,customActions:a,onEdit:r,onDelete:i,onItemClick:o,badges:l=[],stats:d=[]}){const u=Ua();return c.jsx("div",{className:t,children:e.map(e=>{if(n)return c.jsx(f.Fragment,{children:n(e)},e.id);const t=s&&(a||r||i);return c.jsx("div",{className:al("group flex flex-col rounded-lg border bg-card transition-colors hover:bg-accent/50",u.paddingCard,o&&"cursor-pointer"),onClick:()=>o?.(e),children:c.jsxs("div",{className:al("flex-1",u.spacingCard),children:[c.jsxs("div",{className:al("flex items-start justify-between",u.gapCard),children:[c.jsxs("div",{className:al("flex-1 min-w-0",u.spacingFormItem),children:[c.jsx("h4",{className:al("font-medium text-foreground",u.textSize),children:e.name}),e.description&&c.jsx("p",{className:al("text-muted-foreground line-clamp-2",u.textSize),children:e.description})]}),l.some(t=>t.condition(e))&&c.jsx("div",{className:al("flex items-center flex-wrap flex-shrink-0",u.gapFormItem),children:l.filter(t=>t.condition(e)).map(e=>c.jsx(mC,{variant:e.variant||"secondary",className:"text-xs",children:e.label},e.key))})]}),(d.length>0||t)&&c.jsxs("div",{className:al("flex flex-wrap items-center justify-between pt-2 border-t border-border/40",u.gapCard),children:[d.length>0&&c.jsx("div",{className:al("flex flex-wrap items-center text-muted-foreground",u.gapCard,u.textSizeSmall),children:d.filter(e=>!1!==e.show).map((t,n)=>{const s=(e=>{const t=e.toLowerCase();return t.includes("user")||t.includes("member")?c.jsx(tx,{className:"h-3 w-3 text-muted-foreground"}):t.includes("permission")||t.includes("access")?c.jsx(pf,{className:"h-3 w-3 text-muted-foreground"}):t.includes("role")||t.includes("group")?c.jsx(lf,{className:"h-3 w-3 text-muted-foreground"}):null})(t.key);return c.jsxs("div",{className:al("flex items-center",u.gapFormItem),children:[s&&c.jsx("span",{className:"flex-shrink-0",children:s}),c.jsx("span",{className:al("font-semibold text-foreground",u.textSize),children:t.value(e)}),c.jsx("span",{className:al("text-muted-foreground font-normal",u.textSizeSmall),children:t.label}),n<d.filter(e=>!1!==e.show).length-1&&c.jsx("span",{className:"w-px h-3 bg-border/60 mx-0.5"})]},t.key)})}),t&&c.jsx("div",{className:"flex items-center gap-1 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:a?a(e):c.jsxs(c.Fragment,{children:[r&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>r(e),className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Tg,{className:"h-3.5 w-3.5"})}),i&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>i(e),className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(Hg,{className:"h-3.5 w-3.5"})})]})})]})]})},e.id)})})}function VP({items:e,renderItem:t,showActions:n,customActions:s,onEdit:a,onDelete:r,onItemClick:i,badges:o=[],stats:l=[]}){const d=Ua();return c.jsx("div",{className:d.spacingCard,children:e.map(e=>{if(t)return c.jsx(f.Fragment,{children:t(e)},e.id);const u=n&&(s||a||r);return c.jsx("div",{className:al("group rounded-lg border bg-card transition-colors hover:bg-accent/50",d.paddingCard,i&&"cursor-pointer"),onClick:()=>i?.(e),children:c.jsx("div",{className:al("flex items-start justify-between",d.gapForm),children:c.jsxs("div",{className:al("flex-1 min-w-0",d.spacingFormItem),children:[c.jsxs("div",{className:al("flex items-start justify-between mb-1",d.gapCard),children:[c.jsx("h4",{className:al("font-medium text-foreground",d.textSize),children:e.name}),o.some(t=>t.condition(e))&&c.jsx("div",{className:al("flex items-center flex-wrap flex-shrink-0",d.gapFormItem),children:o.filter(t=>t.condition(e)).map(e=>c.jsx(mC,{variant:e.variant||"secondary",className:"text-xs",children:e.label},e.key))})]}),e.description&&c.jsx("p",{className:al("text-muted-foreground mb-2",d.textSize),children:e.description}),c.jsxs("div",{className:al("flex flex-wrap items-center justify-between pt-2 border-t border-border/40",d.gapCard),children:[l.length>0&&c.jsx("div",{className:al("flex flex-wrap items-center text-muted-foreground",d.gapCard,d.textSizeSmall),children:l.filter(e=>!1!==e.show).map(t=>c.jsxs("div",{className:al("flex items-center",d.gapFormItem),children:[c.jsx("span",{className:al("font-semibold text-foreground",d.textSize),children:t.value(e)}),c.jsx("span",{className:al("text-muted-foreground font-normal",d.textSizeSmall),children:t.label})]},t.key))}),u&&c.jsx("div",{className:"flex items-center gap-1 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:s?s(e):c.jsxs(c.Fragment,{children:[a&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>a(e),className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Tg,{className:"h-3.5 w-3.5"})}),r&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>r(e),className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(Hg,{className:"h-3.5 w-3.5"})})]})})]})]})})},e.id)})})}function qP({className:e,items:t=[],loading:n=!1,error:s=null,searchable:a=!0,searchPlaceholder:r="Search...",title:i,description:o,stats:l=[],badges:d=[],showActions:u=!0,showCreateButton:h=!1,createButtonLabel:m="Create",onCreate:f,onItemClick:g,onEdit:x,onDelete:v,onSearch:y,customActions:b,renderItem:w,loadingMessage:S="Loading...",emptyMessage:j="No items found",errorMessage:C,gridCols:k={default:1,md:2,lg:3},viewMode:N,defaultViewMode:_="card",onViewModeChange:P,showViewToggle:E=!0,renderCalendarView:R}){const[A,T]=p.useState(""),M=p.useMemo(()=>(i||e||"default").toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),[i,e]),D=p.useMemo(()=>{if(N)return N;return za.getDataListView(M)||_},[M,_,N]),[L,F]=p.useState(D),I=N??L;p.useEffect(()=>{!N&&L&&"calendar"!==L&&za.setDataListView(M,L)},[L,N,M]);const O=e=>{N||(F(e),"calendar"!==e&&za.setDataListView(M,e)),P?.(e)},z=c.jsxs("div",{className:"flex items-center border border-border/60 rounded-md p-0.5 bg-muted/30",children:[c.jsx(vl,{variant:"card"===I?"default":"ghost",size:"sm",onClick:()=>O("card"),className:"h-8 px-2.5",title:"Card view",children:c.jsx(Df,{className:"h-3.5 w-3.5"})}),c.jsx(vl,{variant:"calendar"===I?"default":"ghost",size:"sm",onClick:()=>O("calendar"),className:"h-8 px-2.5",title:"Calendar view",children:c.jsx(Ip,{className:"h-3.5 w-3.5"})})]}),B=A?t.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())||e.description?.toLowerCase().includes(A.toLowerCase())):t,$=al("grid gap-4",k.default&&{1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5",6:"grid-cols-6"}[k.default],k.md&&{1:"md:grid-cols-1",2:"md:grid-cols-2",3:"md:grid-cols-3",4:"md:grid-cols-4",5:"md:grid-cols-5",6:"md:grid-cols-6"}[k.md],k.lg&&{1:"lg:grid-cols-1",2:"lg:grid-cols-2",3:"lg:grid-cols-3",4:"lg:grid-cols-4",5:"lg:grid-cols-5",6:"lg:grid-cols-6"}[k.lg]);return c.jsxs("div",{children:[(i||o)&&c.jsxs("div",{className:"space-y-1",children:[i&&c.jsx("h3",{className:"text-base font-semibold text-foreground",children:i}),o&&c.jsx("p",{className:"text-xs text-muted-foreground",children:o})]}),c.jsxs("div",{className:"flex items-center gap-2.5",children:[a&&c.jsx(kl,{placeholder:r,value:A,onChange:e=>{return t=e.target.value,T(t),void y?.(t);var t},className:"h-9 text-sm flex-1 max-w-sm"}),E&&z,h&&f&&c.jsx(vl,{size:"sm",onClick:f,className:"h-9",children:"string"==typeof m?m:m||"Create"})]}),s&&c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:C||s.message}),n&&c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),c.jsx("span",{className:"text-muted-foreground",children:S})]})}),!n&&!s&&0===B.length&&c.jsx("div",{className:"py-12 text-center text-muted-foreground",children:j}),!n&&B.length>0&&c.jsx(c.Fragment,{children:"calendar"===I&&R?R():"card"===I?c.jsx(UP,{items:B,gridColsClass:$,renderItem:w,showActions:u,customActions:b,onEdit:x,onDelete:v,onItemClick:g,badges:d,stats:l}):c.jsx(VP,{items:B,renderItem:w,showActions:u,customActions:b,onEdit:x,onDelete:v,onItemClick:g,badges:d,stats:l})})]})}function HP(e){return{id:e.id,...void 0!==e.tenant_id&&{tenant_id:e.tenant_id},name:e.name,address_type:e.address_type,street:e.street??null,city:e.city??null,state:e.state??null,postal_code:e.postal_code??null,country:e.country??null,is_default:e.is_default,notes:e.notes??null,created_at:e.created_at,updated_at:e.updated_at}}class GP{config;constructor(e){this.config=e}getEndpoint(){return this.config.endpoints?.["company-addresses"]||"/api/v1/company-addresses"}async fetchCompanyAddresses(e){const{apiClient:t}=this.config,n=this.getEndpoint(),s=new URLSearchParams;void 0!==e?.skip&&s.append("skip",e.skip.toString()),void 0!==e?.limit&&s.append("limit",e.limit.toString()),e?.address_type&&s.append("address_type",e.address_type);const a=s.toString()?`${n}?${s.toString()}`:n,r=await t.get(a,{requiresAuth:!0});return{data:(r.items??[]).map(HP),pagination:{page:Math.floor((e?.skip||0)/(e?.limit||50))+1,pageSize:e?.limit??50,total:r.items?.length??0,totalPages:r.has_next?Math.ceil((r.items?.length??0)/(e?.limit||50))+1:Math.ceil((r.items?.length??0)/(e?.limit||50))}}}async fetchCompanyAddress(e){const{apiClient:t}=this.config,n=this.getEndpoint();return HP(await t.get(`${n}/${e}`,{requiresAuth:!0}))}async createCompanyAddress(e){const{apiClient:t}=this.config,n=this.getEndpoint();return HP(await t.post(n,e,{requiresAuth:!0}))}async updateCompanyAddress(e,t){const{apiClient:n}=this.config,s=this.getEndpoint();return HP(await n.put(`${s}/${e}`,t,{requiresAuth:!0}))}async deleteCompanyAddress(e){const{apiClient:t}=this.config,n=this.getEndpoint();await t.delete(`${n}/${e}`,{requiresAuth:!0})}}const KP="/api/v1/upload/",WP=()=>"undefined"!=typeof window&&Ga.get(ga)||"",QP={async uploadFile(e){const t=WP();if(!t)throw new Error("Authentication required. Please log in to upload files.");const n=new FormData;n.append("file",e);const s=await fetch(`${KP}`,{method:"POST",body:n,headers:{Authorization:`Bearer ${t}`}});if(!s.ok){const e=await s.text();if(401===s.status)throw new Error("Authentication failed. Please log in again.");throw new Error(`Upload failed: ${e||s.statusText}`)}const a=await s.json();return a.url&&(a.url=(e=>{if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.startsWith("/"))return`${"".replace(/\/$/,"")}${e}`;return e})(a.url)),a},async uploadImage(e){if(!e.type.startsWith("image/"))throw new Error("File must be an image");return this.uploadFile(e)},async deleteFile(e){const t=WP();if(!t)throw new Error("Authentication required. Please log in to delete files.");const n=await fetch(`${KP}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!n.ok){const e=await n.text();if(401===n.status)throw new Error("Authentication failed. Please log in again.");throw new Error(`Delete failed: ${e||n.statusText}`)}}};class YP{config;apiClient;constructor(e){this.config=e,this.apiClient=e.apiClient}getEndpoint(e="attachments"){return this.config.endpoints?.[e]||{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}[e]}async getAttachmentsForEntity(e,t,n){const s=new URLSearchParams;n&&s.append("attachment_type",n);const a=`${this.getEndpoint("entityAttachments")}/${e}/${t}${s.toString()?`?${s.toString()}`:""}`;return await this.apiClient.get(a,{requiresAuth:!0})}async linkAttachment(e,t,n){await this.apiClient.post(`${this.getEndpoint("entityAttachments")}/${e}/${t}`,n,{requiresAuth:!0})}async unlinkAttachment(e,t,n){await this.apiClient.delete(`${this.getEndpoint("entityAttachments")}/${e}/${t}/${n}`,{requiresAuth:!0})}async setAttachments(e,t,n){return await this.apiClient.put(`${this.getEndpoint("entityAttachments")}/${e}/${t}`,n,{requiresAuth:!0})}async getProfilePhoto(e,t){return await this.apiClient.get(`${this.getEndpoint("profilePhoto")}/${e}/${t}/profile-photo`,{requiresAuth:!0})}async setProfilePhoto(e,t,n){return await this.apiClient.put(`${this.getEndpoint("profilePhoto")}/${e}/${t}/profile-photo`,n,{requiresAuth:!0})}async removeProfilePhoto(e,t){await this.apiClient.delete(`${this.getEndpoint("profilePhoto")}/${e}/${t}/profile-photo`,{requiresAuth:!0})}}class XP{static async getAnalytics(e){const t=new URLSearchParams;e?.start_date&&t.append("start_date",e.start_date),e?.end_date&&t.append("end_date",e.end_date);const n=t.toString(),s="/api/v1/dashboard/analytics"+(n?`?${n}`:"");return await Fa.get(s)}static async getEventAnalytics(e,t){const n=new URLSearchParams;t?.start_date&&n.append("start_date",t.start_date),t?.end_date&&n.append("end_date",t.end_date);const s=n.toString(),a=`/api/v1/dashboard/analytics/events/${e}${s?`?${s}`:""}`;return await Fa.get(a)}static async getRevenueAnalytics(e){const t=new URLSearchParams;e?.start_date&&t.append("start_date",e.start_date),e?.end_date&&t.append("end_date",e.end_date),e?.group_by&&t.append("group_by",e.group_by);const n=t.toString(),s="/api/v1/dashboard/analytics/revenue"+(n?`?${n}`:"");return await Fa.get(s)}static formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}static formatPercentage(e){return`${e>=0?"+":""}${e.toFixed(1)}%`}static formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}static getStatusColor(e){switch(e.toLowerCase()){case"active":case"published":case"confirmed":case"completed":return"default";case"draft":case"pending":return"outline";case"cancelled":case"failed":return"destructive";default:return"secondary"}}}const ZP="/api/v1/shared/tags";class JP{config;constructor(e){this.config=e}async getOrCreateTags(e,t){const n={tag_names:e.filter(e=>e&&e.trim()),entity_type:t};return(await this.config.apiClient.post(`${ZP}/get-or-create`,n,{requiresAuth:!0})).tag_ids}async searchTags(e){const t=new URLSearchParams;e.entity_type&&t.append("entity_type",e.entity_type),e.search&&t.append("search",e.search),void 0!==e.is_active&&t.append("is_active",String(e.is_active)),void 0!==e.skip&&t.append("skip",String(e.skip)),void 0!==e.limit&&t.append("limit",String(e.limit));const n=`${ZP}${t.toString()?`?${t.toString()}`:""}`;return this.config.apiClient.get(n,{requiresAuth:!0})}async getEntityTags(e,t){return this.config.apiClient.get(`${ZP}/entity/${e}/${t}`,{requiresAuth:!0})}async setEntityTags(e,t,n){const s={tag_ids:n};return this.config.apiClient.post(`${ZP}/entity/${e}/${t}/tags`,s,{requiresAuth:!0})}async createTag(e){return this.config.apiClient.post(ZP,e,{requiresAuth:!0})}async getTagById(e){return this.config.apiClient.get(`${ZP}/${e}`,{requiresAuth:!0})}async updateTag(e,t){return this.config.apiClient.put(`${ZP}/${e}`,t,{requiresAuth:!0})}async deleteTag(e){return this.config.apiClient.delete(`${ZP}/${e}`,{requiresAuth:!0})}async getAvailableTagsForEntity(e,t,n,s){const a=new URLSearchParams;n&&a.append("search",n),s&&a.append("limit",String(s));const r=`${ZP}/entity/${e}/${t}/available${a.toString()?`?${a.toString()}`:""}`;return this.config.apiClient.get(r,{requiresAuth:!0})}async manageEntityTags(e,t,n){const s={tag_names:n.filter(e=>e&&e.trim())};return this.config.apiClient.post(`${ZP}/entity/${e}/${t}/manage`,s,{requiresAuth:!0})}}class eE{apiClient;baseUrl;constructor(e){this.apiClient=e.apiClient,this.baseUrl=e.baseUrl||"/api/v1"}async getAuditLogs(e){const t=new URLSearchParams;t.set("entity_type",e.entity_type),t.set("entity_id",e.entity_id),e.limit&&t.set("limit",e.limit.toString()),e.skip&&t.set("skip",e.skip.toString()),e.event_types?.length&&t.set("event_types",e.event_types.join(",")),e.severities?.length&&t.set("severities",e.severities.join(",")),e.user_email&&t.set("user_email",e.user_email),e.date_from&&t.set("start_date",e.date_from),e.date_to&&t.set("end_date",e.date_to),e.search&&t.set("search",e.search),e.sort_by&&t.set("sort_by",e.sort_by),e.sort_order&&t.set("sort_order",e.sort_order);const n=`${this.baseUrl}/audit/user-activity?${t.toString()}`;return await this.apiClient.get(n,{requiresAuth:!0})}async getEntityAuditLogs(e,t,n={}){const s=this.filtersToParams(e,t,n.filters||{},n.limit||50,n.skip||0,n.sortBy,n.sortOrder);return this.getAuditLogs(s)}filtersToParams(e,t,n,s=50,a=0,r,i){return{entity_type:e,entity_id:t,limit:s,skip:a,event_types:n.eventTypes,severities:n.severities,user_email:n.userEmail,date_from:n.dateFrom,date_to:n.dateTo,search:n.search,sort_by:r,sort_order:i}}}const tE=p.createContext(null);function nE({children:e,config:t}){const n=p.useMemo(()=>new eE(t),[t.apiClient,t.baseUrl]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(tE.Provider,{value:s,children:e})}function sE(e,t,n={},s={}){const{autoLoad:a=!0,limit:r=50}=s,i=function(){const e=p.useContext(tE);if(!e)throw new Error("useAuditService must be used within AuditProvider");return e.service}(),o=p.useRef(s.sortBy),l=p.useRef(s.sortOrder),c=p.useRef(e),d=p.useRef(t),u=p.useRef(r),h=p.useRef(n);o.current=s.sortBy,l.current=s.sortOrder,c.current=e,d.current=t,u.current=r,h.current=n;const[m,f]=p.useState([]),[g,x]=p.useState(!1),[v,y]=p.useState(null),[b,w]=p.useState(!1),[S,j]=p.useState(0),C=p.useRef(0),k=p.useRef(!1),N=p.useRef(!1),_=p.useCallback(async(e=h.current,t=!1)=>{if(!N.current)try{N.current=!0,x(!0),y(null);const n=t?0:C.current,s=await i.getEntityAuditLogs(c.current,d.current,{limit:u.current,skip:n,filters:e,sortBy:o.current,sortOrder:l.current});f(e=>t?s.items:[...e,...s.items]),w(s.has_next),j(s.total),C.current=n+s.items.length}catch(wW){const t=wW instanceof Error?wW.message:"Failed to load audit logs";y(t)}finally{N.current=!1,x(!1)}},[i]),P=p.useCallback(()=>{!N.current&&b&&_(h.current,!1)},[b,_]),E=p.useCallback(()=>{C.current=0,_(h.current,!0)},[_]);return p.useEffect(()=>{a&&!k.current&&(k.current=!0,_(h.current,!0))},[a,_]),{logs:m,loading:g,error:v,hasMore:b,total:S,loadLogs:_,loadMore:P,refresh:E}}function aE(e){const t=new URLSearchParams;for(const[n,s]of Object.entries(e))if(null!=s)if(Array.isArray(s)){const e=JSON.stringify(s);t.append(n,e)}else"object"==typeof s?t.append(n,JSON.stringify(s)):t.append(n,String(s));return t.toString().length}function rE(e,t={}){const{maxQueryStringSize:n=1500,alwaysPostForArrays:s=!1,sensitiveKeys:a=["password","token","secret","key","auth","credential"]}=t;if(0===Object.keys(e).length)return!1;if(Object.keys(e).some(e=>a.some(t=>e.toLowerCase().includes(t))))return!0;if(function(e){return Object.values(e).some(e=>Array.isArray(e)?e.length>5:"object"==typeof e&&null!==e)}(e)){if(s)return!0;return aE(e)>n}return aE(e)>n}const iE={create:{label:"Created",icon:hg,variant:"default",description:"Entity was created"},update:{label:"Updated",icon:rg,variant:"secondary",description:"Entity was modified"},delete:{label:"Deleted",icon:Hg,variant:"destructive",description:"Entity was deleted"},read:{label:"Viewed",icon:mf,variant:"outline",description:"Entity was accessed"},login:{label:"Login",icon:Jg,variant:"default",description:"User logged in"},logout:{label:"Logout",icon:Jg,variant:"outline",description:"User logged out"}},oE={low:{label:"Low",variant:"outline",icon:_f},medium:{label:"Medium",variant:"secondary",icon:$p},high:{label:"High",variant:"destructive",icon:Wg},critical:{label:"Critical",variant:"destructive",icon:Yp}};function lE({entityType:e,entityId:t,title:n="Audit Logs",description:s="Activity history for this entity",limit:a=50,showLoadMore:r=!0,className:i,loading:o=!1,error:l,onLoadMore:d,hasMore:u=!1,showFilters:h=!0,showRefresh:m=!0,onRefresh:g,filters:x,onFiltersChange:v,showSorting:y=!0,sorting:b,onSortingChange:w,logs:S}){const[j,C]=p.useState(new Set),[k,N]=p.useState(!1),[_,P]=p.useState(x||{}),[E,R]=p.useState(x||{}),[A,T]=p.useState(b||{field:"event_timestamp",direction:"desc"}),{logs:M,loading:D,hasMore:L,loadMore:F,refresh:I,loadLogs:O}=sE(e,t,_,{autoLoad:!S,limit:a,sortBy:A.field,sortOrder:A.direction}),z=void 0!==o?o:D,B=void 0!==u?u:L,$=S||M||[],U=p.useCallback(e=>{C(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),V=p.useCallback(()=>{g?g():S||I()},[g,S,I]),q=p.useCallback(e=>{R(t=>({...t,...e}))},[]),H=p.useCallback(()=>{P(E),N(!1),v&&v(E),!S&&O&&O(E,!0)},[E,v,S,O]),G=f.useRef(A);f.useEffect(()=>{const e=G.current.field!==A.field||G.current.direction!==A.direction;!S&&e&&(G.current=A,I())},[A,S,I]);const K=p.useCallback(()=>{const e={};R(e),P(e),N(!1),v&&v(e),!S&&O&&O(e,!0)},[v,S,O]),W=Object.values(_).some(e=>Array.isArray(e)?e.length>0:Boolean(e));return c.jsxs(bl,{className:al("w-full",i),children:[c.jsx(wl,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx($p,{className:"h-5 w-5"}),c.jsxs("div",{children:[c.jsx(Sl,{className:"text-lg",children:n}),c.jsx(jl,{children:s})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[h&&c.jsxs(lP,{open:k,onOpenChange:e=>{N(e),e&&R(_)},children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",size:"sm",className:"h-8",children:[c.jsx(yf,{className:"h-4 w-4 mr-1"}),"Filters",W&&c.jsx(mC,{variant:"secondary",className:"ml-1 h-4 w-4 p-0 text-xs",children:"!"})]})}),c.jsx(dP,{className:"w-80",align:"end",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"font-medium",children:"Filter Audit Logs"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(vl,{variant:"ghost",size:"sm",onClick:K,className:"h-7 px-2 text-xs",children:"Clear"}),c.jsx(vl,{variant:"default",size:"sm",onClick:H,className:"h-7 px-3 text-xs",children:"Apply"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Event Types"}),c.jsxs(ox,{value:E.eventTypes&&E.eventTypes.length>0?E.eventTypes.join(","):"all-types",onValueChange:e=>{e&&""!==e&&q({eventTypes:"all-types"===e?[]:e.split(",")})},children:[c.jsx(cx,{children:c.jsx(lx,{placeholder:"All event types"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"all-types",children:"All event types"}),c.jsx(mx,{value:"create",children:"Created"}),c.jsx(mx,{value:"update",children:"Updated"}),c.jsx(mx,{value:"delete",children:"Deleted"}),c.jsx(mx,{value:"read",children:"Viewed"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Severity"}),c.jsxs(ox,{value:E.severities&&E.severities.length>0?E.severities.join(","):"all-severities",onValueChange:e=>{e&&""!==e&&q({severities:"all-severities"===e?[]:e.split(",")})},children:[c.jsx(cx,{children:c.jsx(lx,{placeholder:"All severities"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"all-severities",children:"All severities"}),c.jsx(mx,{value:"low",children:"Low"}),c.jsx(mx,{value:"medium",children:"Medium"}),c.jsx(mx,{value:"high",children:"High"}),c.jsx(mx,{value:"critical",children:"Critical"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"User Email"}),c.jsx(kl,{placeholder:"Filter by user email...",value:E.userEmail||"",onChange:e=>q({userEmail:e.target.value}),className:"h-8"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"From Date"}),c.jsx(kl,{type:"date",value:E.dateFrom||"",onChange:e=>q({dateFrom:e.target.value}),className:"h-8"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"To Date"}),c.jsx(kl,{type:"date",value:E.dateTo||"",onChange:e=>q({dateTo:e.target.value}),className:"h-8"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Search Description"}),c.jsx(kl,{placeholder:"Search in descriptions...",value:E.search||"",onChange:e=>q({search:e.target.value}),className:"h-8"})]})]})})]}),y&&c.jsxs(ox,{value:`${A.field}-${A.direction}`,onValueChange:e=>{const[t,n]=e.split("-"),s={field:t,direction:n};T(s),w&&w(s)},children:[c.jsx(cx,{className:"w-48 h-8",children:c.jsx(lx,{placeholder:"Sort by..."})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"event_timestamp-desc",children:"Event Time (Newest)"}),c.jsx(mx,{value:"event_timestamp-asc",children:"Event Time (Oldest)"}),c.jsx(mx,{value:"event_type-asc",children:"Event Type (A-Z)"}),c.jsx(mx,{value:"event_type-desc",children:"Event Type (Z-A)"}),c.jsx(mx,{value:"severity-desc",children:"Severity (High-Low)"}),c.jsx(mx,{value:"severity-asc",children:"Severity (Low-High)"}),c.jsx(mx,{value:"user_email-asc",children:"User (A-Z)"}),c.jsx(mx,{value:"user_email-desc",children:"User (Z-A)"}),c.jsx(mx,{value:"description-asc",children:"Description (A-Z)"}),c.jsx(mx,{value:"description-desc",children:"Description (Z-A)"})]})]}),m&&c.jsx(vl,{variant:"outline",size:"sm",onClick:V,disabled:o,className:"h-8",children:c.jsx(fg,{className:al("h-4 w-4",o&&"animate-spin")})})]})]})}),c.jsxs(Cl,{children:[l&&c.jsxs("div",{className:"flex items-center gap-2 p-4 text-sm text-destructive bg-destructive/10 rounded-md",children:[c.jsx(Yp,{className:"h-4 w-4"}),l]}),c.jsx(cE,{logs:$,loading:z,expandedRows:j,onToggleRowExpansion:U}),r&&B&&!z&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx(vl,{variant:"outline",onClick:()=>{d?d():S||F()},children:"Load More"})})]})]})}function cE({logs:e,loading:t,expandedRows:n,onToggleRowExpansion:s}){const a=e||[];return t?c.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>c.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[c.jsx(yv,{className:"h-8 w-8 rounded"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(yv,{className:"h-4 w-3/4"}),c.jsx(yv,{className:"h-3 w-1/2"})]}),c.jsx(yv,{className:"h-6 w-16"})]},t))}):0===a.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx($p,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Audit Logs"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"There are no audit logs available for this entity yet. Activity will appear here as actions are performed."})]}):c.jsx("div",{className:"h-[600px] overflow-y-auto",children:c.jsx("div",{className:"space-y-2",children:a.map(e=>c.jsx(dE,{log:e,expanded:n.has(e.event_id),onToggleExpansion:()=>s(e.event_id)},e.event_id))})})}function dE({log:e,expanded:t,onToggleExpansion:n}){const s=iE[e.event_type]||{label:e.event_type,variant:"outline"},a=oE[e.severity]||{label:e.severity,variant:"outline"},r=s.icon,i=a.icon,o=e.old_values||e.new_values||e.changed_fields||e.metadata;return c.jsxs("div",{className:"border rounded-lg bg-card",children:[c.jsxs("div",{className:"flex items-center gap-4 p-4 cursor-pointer hover:bg-muted/50 transition-colors",onClick:o?n:void 0,children:[c.jsx("div",{className:"flex-shrink-0",children:r&&c.jsx("div",{className:"p-2 bg-muted rounded-md",children:c.jsx(r,{className:"h-4 w-4"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx("p",{className:"text-sm font-medium",children:e.description}),c.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[c.jsx(mC,{variant:s.variant,className:"text-xs",children:s.label}),c.jsxs(mC,{variant:a.variant,className:"text-xs",children:[i&&c.jsx(i,{className:"h-3 w-3 mr-1"}),a.label]})]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(sf,{className:"h-3 w-3"}),e.event_timestamp?(e=>{try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(","," at")}catch{return e}})(e.event_timestamp):"Unknown time"]}),e.ip_address&&c.jsxs("span",{className:"truncate",children:["IP: ",e.ip_address]})]}),e.user_email&&c.jsxs("span",{className:"truncate",children:["by ",e.user_email]})]})]}),o&&c.jsx(vl,{variant:"ghost",size:"sm",className:"flex-shrink-0 p-1",children:t?c.jsx(Vp,{className:"h-4 w-4"}):c.jsx(Hp,{className:"h-4 w-4"})})]}),t&&o&&c.jsxs("div",{className:"px-4 pb-4 border-t bg-muted/20",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.old_values&&Object.keys(e.old_values).length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-2 text-destructive",children:"Before"}),c.jsx("pre",{className:"text-xs bg-destructive/10 p-2 rounded border overflow-x-auto",children:JSON.stringify(e.old_values,null,2)})]}),e.new_values&&Object.keys(e.new_values).length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-2 text-green-700",children:"After"}),c.jsx("pre",{className:"text-xs bg-green-50 p-2 rounded border overflow-x-auto",children:JSON.stringify(e.new_values,null,2)})]})]}),e.changed_fields&&e.changed_fields.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Changed Fields"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:e.changed_fields.map(e=>c.jsx(mC,{variant:"outline",className:"text-xs",children:e},e))})]}),e.metadata&&Object.keys(e.metadata).length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Additional Details"}),c.jsx("pre",{className:"text-xs bg-muted p-2 rounded border overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]})]})}function uE({title:e,value:t,change:n,changeType:s="neutral",icon:a,description:r,className:i=""}){const o=Ua();return c.jsxs(bl,{className:i,children:[c.jsxs(wl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(Sl,{className:al("font-medium",o.textSizeCardDescription),children:e}),a]}),c.jsxs(Cl,{children:[c.jsx("div",{className:al("font-bold",o.textSizeCardTitle),children:t}),void 0!==n&&c.jsxs("div",{className:al("flex items-center",o.textSizeSmall,(()=>{switch(s){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-muted-foreground"}})()),children:[(()=>{switch(s){case"positive":return c.jsx(Kg,{className:"h-4 w-4"});case"negative":return c.jsx(Gg,{className:"h-4 w-4"});default:return null}})(),c.jsxs("span",{className:"ml-1",children:[n>0?"+":"",n,"% from last month"]})]}),r&&c.jsx("p",{className:al("text-muted-foreground mt-1",o.textSizeSmall),children:r})]})]})}function hE({title:e="Recent Activity",activities:t,maxItems:n=10,className:s=""}){const a=Ua(),r=e=>{switch(e){case"success":return c.jsx(Xp,{className:"h-4 w-4 text-green-600"});case"warning":return c.jsx(Yp,{className:"h-4 w-4 text-yellow-600"});case"error":return c.jsx(Yp,{className:"h-4 w-4 text-red-600"});default:return c.jsx(bp,{className:"h-4 w-4 text-blue-600"})}},i=t.slice(0,n);return c.jsxs(bl,{className:s,children:[c.jsx(wl,{children:c.jsx(Sl,{className:al("font-medium",a.textSizeCardDescription),children:e})}),c.jsx(Cl,{children:c.jsx("div",{className:a.spacingFormSection,children:i.map(e=>c.jsxs("div",{className:al("flex items-start",a.gapCard),children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r(e.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:al("font-medium",a.textSize),children:e.title}),c.jsx("p",{className:al("text-muted-foreground",a.textSizeSmall),children:e.description}),c.jsxs("div",{className:al("flex items-center mt-1",a.gapCard),children:[c.jsx("span",{className:al("text-muted-foreground",a.textSizeSmall),children:e.timestamp}),e.user&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:al("text-muted-foreground",a.textSizeSmall),children:""}),c.jsx("span",{className:al("text-muted-foreground",a.textSizeSmall),children:e.user})]})]})]})]},e.id))})})]})}class mE extends p.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?c.jsx(yN,{open:!0,onOpenChange:()=>{},children:c.jsxs("div",{className:"p-6 text-center",children:[c.jsx(Yp,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Something went wrong"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"The command palette encountered an error. Please try refreshing the page."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}}function pE({dataType:e,scope:t,onSelect:n,dataQueries:s}){const a=Yt();return 0!==e.data.length||e.isLoading||e.isError?c.jsx(jN,{heading:`${e.name} ${t===e.scope?"(scoped)":""}`,children:e.isError?c.jsxs(kN,{disabled:!0,className:"flex flex-col items-start gap-2 p-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-4 rounded-full bg-red-100 flex items-center justify-center",children:c.jsx("span",{className:"text-red-600 text-xs",children:"!"})}),c.jsxs("span",{className:"text-sm text-red-600 font-medium",children:["Failed to load ",e.name.toLowerCase()]})]}),c.jsx("div",{className:"text-xs text-muted-foreground ml-6",children:e.error instanceof Error?e.error.message:"Network error or server unavailable"}),c.jsx("button",{onClick:t=>{t.stopPropagation();const n=s[e.key];n?.refetch&&n.refetch()},className:"ml-6 text-xs text-blue-600 hover:text-blue-800 underline",children:"Try again"})]}):e.isLoading?c.jsxs(kN,{disabled:!0,children:[c.jsx(If,{className:"mr-2 h-4 w-4 animate-spin"}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Searching ",e.name.toLowerCase(),"..."]})]}):e.data.map(t=>e.renderItem(t,()=>n(()=>{if(e.navigateTo){const n=String(t?.id??"");let s=e.navigateTo;s.includes("$id")||s.includes(":id")?s=s.replace(/\$id|:id/g,n):n&&(s=s.endsWith("/")?`${s}${n}`:`${s}/${n}`),a({to:s})}})))},e.key):null}function fE({search:e,onValueChange:t,scope:n,autocomplete:s,isOnline:a}){return c.jsxs("div",{className:"relative",children:[c.jsx(bN,{placeholder:"all"===n?"Type a command or search... (try: users:, employees:, bookings:, nav:)":`Searching in ${n}...`,value:e,onValueChange:t,className:"w-full pr-20"}),c.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 right-0 flex items-center gap-2 pointer-events-none z-10",children:[!a&&c.jsxs(mC,{variant:"destructive",className:"text-[10px] px-3 py-1.5 leading-none bg-red-100 text-red-700 shadow-sm font-medium rounded-lg ring-1 ring-red-100/20",children:[c.jsx(sx,{className:"h-3 w-3 mr-1"}),"Offline"]}),s&&s!==e&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-3 py-1.5 shadow-sm rounded-md border border-gray-200/60",children:[c.jsx("span",{className:"text-xs text-gray-700 font-medium",children:s}),c.jsx("kbd",{className:"text-[9px] text-gray-700 bg-gray-50 ml-1 border border-gray-200 rounded-sm px-2 py-0.5 font-mono font-medium shadow-sm",children:"Tab"})]})}),"all"!==n&&!(s&&s!==e)&&a&&c.jsx(mC,{variant:"secondary",className:"text-[10px] px-3 py-1.5 leading-none bg-gradient-to-r from-violet-100 to-purple-100 text-violet-700 shadow-sm font-medium rounded-lg ring-1 ring-violet-100/20 hover:scale-105 transition-transform duration-200",children:n})]})]})}function gE({isOnline:e,dataTypes:t}){return c.jsx(SN,{children:c.jsx("div",{className:"py-6 text-center text-sm",children:e?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-muted-foreground",children:"No results found."}),c.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Try using scope modifiers like"," ",c.jsx("code",{className:"text-primary",children:"nav:"}),","," ",c.jsx("code",{className:"text-primary",children:"action:"}),","," ",t.slice(0,3).map((e,n)=>c.jsxs(p.Fragment,{children:[c.jsxs("code",{className:"text-primary",children:[e.key,":"]}),n<Math.min(2,t.length-1)&&", "]},e.key)),t.length>3&&", or more..."]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[c.jsx(sx,{className:"h-5 w-5 text-red-500"}),c.jsx("p",{className:"text-red-600 font-medium",children:"You're offline"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Check your internet connection to search for data"})]})})})}function xE({search:e,scope:t,isOnline:n,recentSearches:s,suggestions:a,filteredNavigation:r,filteredActions:i,filteredDataTypes:o,dataTypes:l,dataQueries:d,onRecentSelect:u,onClearRecentSearches:h,onSearchChange:m,onSelect:f}){const g=Yt();return c.jsxs(wN,{children:[c.jsx(gE,{isOnline:n,dataTypes:l}),!e&&s.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs(jN,{heading:"Recent Searches",children:[c.jsxs("div",{className:"flex items-center justify-between px-2 mb-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Your recent searches"}),c.jsx("button",{onClick:h,className:"text-xs text-muted-foreground hover:text-foreground",children:"Clear"})]}),s.map((e,t)=>c.jsxs(kN,{value:e.query,onSelect:()=>u(e),children:[c.jsx(Cf,{className:"mr-2 h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm",children:e.query}),e.scope&&"all"!==e.scope&&c.jsx(mC,{variant:"outline",className:"ml-2 text-[10px]",children:e.scope})]},`recent-${t}`))]}),c.jsx(CN,{})]}),!e&&a.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(jN,{heading:"Suggestions",children:a.map((e,t)=>c.jsxs(kN,{value:e.text,onSelect:()=>m(e.text),children:[c.jsx(Sg,{className:"mr-2 h-4 w-4 text-muted-foreground"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-mono",children:e.text}),c.jsx("span",{className:"text-xs text-muted-foreground",children:e.description})]})]},`suggestion-${t}`))}),c.jsx(CN,{})]}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(jN,{heading:"Navigation",children:r.map(e=>{const t=e.icon,n=[e.parentLabel,e.description].filter(Boolean).join("  ");return c.jsxs(kN,{value:e.value,onSelect:()=>f(()=>g({to:e.path})),className:"flex items-center gap-3",children:[c.jsx(t,{className:"h-4 w-4 flex-shrink-0"}),c.jsxs("div",{className:"flex flex-1 flex-col",children:[c.jsx("span",{className:"text-sm font-medium text-foreground",children:e.label}),n?c.jsx("span",{className:"text-xs text-muted-foreground",children:n}):null]}),e.shortcut?c.jsx(NN,{children:e.shortcut}):null]},e.value)})}),(i.length>0||o.some(e=>e.data.length>0))&&c.jsx(CN,{})]}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(jN,{heading:"Actions "+("actions"===t?"(scoped)":""),children:i.map(e=>{const t=e.icon;return c.jsxs(kN,{value:e.value,onSelect:()=>f(e.action),children:[c.jsx(t,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:e.label})]},e.value)})}),o.some(e=>e.data.length>0)&&c.jsx(CN,{})]}),o.map(e=>c.jsx(pE,{dataType:e,scope:t,onSelect:f,dataQueries:d},e.key)),!e&&c.jsx("div",{className:"border-t p-3 bg-muted/50",children:c.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.jsx("span",{className:"font-medium",children:"Pro tip:"})," Use scope modifiers like ",c.jsx("code",{className:"text-primary",children:"nav:"}),","," ",c.jsx("code",{className:"text-primary",children:"action:"}),","," ",l.slice(0,3).map((e,t)=>c.jsxs(p.Fragment,{children:[c.jsxs("code",{className:"text-primary",children:[e.key,":"]}),t<Math.min(2,l.length-1)&&", "]},e.key)),l.length>3&&", or more..."," to filter results"]})})]})}function vE(){return"undefined"!=typeof navigator&&/Mac|iPhone|iPad|iPod/.test(navigator.userAgent)?"":"Ctrl"}function yE({open:e,onOpenChange:t,dataTypes:n,userId:s,navigationItems:a,quickActions:r}){const i=Yt(),o=function(){const[e,t]=p.useState("undefined"==typeof navigator||navigator.onLine);return p.useEffect(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e}(),[l,d]=p.useState(""),[u,h]=p.useState("all"),[m,f]=p.useState([]),[g,x]=p.useState(""),[v,y]=p.useState(""),b=p.useCallback(()=>s?`command-palette-recent-${s}`:"command-palette-recent",[s]);p.useEffect(()=>{const e=setTimeout(()=>{y(l)},300);return()=>clearTimeout(e)},[l]),p.useEffect(()=>{const e=l.toLowerCase().trim();n.some(t=>e===`${t.key}:`)&&v!==l&&y(l)},[l,n,v]),p.useEffect(()=>{if(e){const e=b(),t=Ga.get(e)||[];f(t)}},[e,b]),p.useEffect(()=>{const e=l.toLowerCase();if(e.startsWith("nav:"))h("navigation");else if(e.startsWith("action:"))h("actions");else{const t=n.find(t=>e.startsWith(`${t.key}:`));h(t?t.scope:"all")}},[l,n]);const w=p.useMemo(()=>{const e=l.toLowerCase(),t=["nav:","action:"];for(const n of t)if(e.startsWith(n))return l.slice(n.length).trim();for(const s of n){const t=`${s.key}:`;if(e.startsWith(t))return l.slice(t.length).trim()}return l.trim()},[l,n]),S=p.useCallback((e,t)=>{if(!e.trim())return;const n=[{query:e,timestamp:Date.now(),scope:t},...m.filter(t=>t.query!==e)].slice(0,5);f(n);const s=b();Ga.set(s,n)},[m,b]),j=p.useMemo(()=>{const e=v.toLowerCase(),t=["nav:","action:"];for(const n of t)if(e.startsWith(n))return v.slice(n.length).trim();for(const s of n){const t=`${s.key}:`;if(e.startsWith(t))return v.slice(t.length).trim()}return v.trim()},[v,n]),[C,k]=p.useState({});p.useEffect(()=>{(async()=>{const e={};for(const s of n)s.fetcher&&u===s.scope&&o?e[s.key]={data:[],isLoading:!0,error:null,isError:!1}:s.fetcher&&(e[s.key]={data:[],isLoading:!1,error:null,isError:!1});k(e);for(const s of n)if(s.fetcher&&u===s.scope&&o){const e=j.trim();if(!e){k(e=>({...e,[s.key]:{data:[],isLoading:!1,error:null,isError:!1}}));continue}try{const t=await s.fetcher(e);k(e=>({...e,[s.key]:{data:t.slice(0,10),isLoading:!1,error:null,isError:!1}}))}catch(t){k(e=>({...e,[s.key]:{data:[],isLoading:!1,error:t,isError:!0}}))}}})()},[n,j,u,o]);const N=p.useMemo(()=>a??function(){const e=vE();return[{icon:kf,label:"Home",value:"nav-home",path:"/",shortcut:`${e}H`},{icon:Mf,label:"Dashboard",value:"nav-dashboard",path:"/dashboard",shortcut:`${e}D`},{icon:tx,label:"Users",value:"nav-users",path:"/users",shortcut:`${e}U`},{icon:jg,label:"Settings",value:"nav-settings",path:"/settings",shortcut:`${e},`}]}(),[a]),_=p.useMemo(()=>r??function(e){return[{icon:Jg,label:"Add New User",value:"action-add-user",action:()=>{e&&e({to:"/users?action=create"})}},{icon:pf,label:"View Reports",value:"action-reports",action:()=>{}}]}(i),[r,i]),P=p.useMemo(()=>n.map(e=>{const t=C[e.key],n=t?.data||[],s=t?.isLoading||!1,a=t?.error,r=t?.isError||!1;return{...e,data:u===e.scope||"all"===u&&!w?n.slice(0,10):[],isLoading:(u===e.scope||"all"===u&&!w)&&s,error:u===e.scope||"all"===u&&!w?a:null,isError:(u===e.scope||"all"===u&&!w)&&r}}),[n,C,u,w]),E=p.useMemo(()=>{if("all"!==u&&"navigation"!==u)return[];if("navigation"===u&&!w)return N;if(!w)return N;const e=w.toLowerCase();return N.filter(t=>{if([t.label,t.description,t.parentLabel,t.path,t.value,...t.keywords||[]].filter(Boolean).join(" ").toLowerCase().includes(e))return!0;if(t.keywords){if(t.keywords.some(t=>t.toLowerCase().includes(e)||e.includes(t.toLowerCase())))return!0}return!1})},[w,u,N]),R=p.useMemo(()=>{if("all"!==u&&"actions"!==u)return[];if("actions"===u&&!w)return _;if(!w&&"all"===u)return _;const e=w.toLowerCase();return _.filter(t=>{if(t.label.toLowerCase().includes(e))return!0;if(t.keywords){if(t.keywords.some(t=>t.toLowerCase().includes(e)||e.includes(t.toLowerCase())))return!0}return!!t.value.toLowerCase().includes(e)})},[w,u,_]);p.useEffect(()=>{if(!l)return void x("");const e=l.toLowerCase(),t=[{prefix:"nav:",full:"nav:"},{prefix:"action:",full:"action:"},...n.map(e=>({prefix:`${e.key}:`,full:`${e.key}:`}))];for(const{prefix:n,full:a}of t)if(n.startsWith(e)&&e.length<n.length)return void x(a);if(!u||"all"===u||"navigation"===u)for(const n of N){if(n.label.toLowerCase().startsWith(e)&&e.length>=2)return void x(n.label)}const s=n.find(e=>e.scope===u);if(s&&C[s.key]&&j.length>=2){const e=(C[s.key].data||[]).filter(e=>s.getSearchValue(e).toLowerCase().startsWith(j.toLowerCase()));if(1===e.length){const t=e[0],n=s.getSearchValue(t),a=l.slice(0,l.length-j.length);return void x(a+n)}}x("")},[l,j,u,N,n,C]),p.useEffect(()=>{const t=e=>{"Tab"===e.key&&g&&g!==l&&(e.preventDefault(),d(g),y(g))};if(e)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,g,l]);const A=p.useMemo(()=>l.length>0?[]:[{text:"nav:dashboard",description:"Navigate to dashboard"},{text:"action:add",description:"Show add actions"},...n.slice(0,4).map(e=>({text:`${e.key}:example`,description:`Search ${e.name.toLowerCase()} for 'example'`}))],[l,n]);return c.jsx(mE,{children:c.jsxs(yN,{open:e,onOpenChange:t,children:[c.jsx(fE,{search:l,onValueChange:d,scope:u,autocomplete:g,isOnline:o}),c.jsx(xE,{search:l,scope:u,isOnline:o,recentSearches:m,suggestions:A,filteredNavigation:E,filteredActions:R,filteredDataTypes:P,dataTypes:n,dataQueries:C,onRecentSelect:e=>{d(e.query)},onClearRecentSearches:()=>{f([]);const e=b();Ga.remove(e)},onSearchChange:d,onSelect:e=>{S(l,u),d(""),t(!1),e()}})]})})}function bE({children:e}){return c.jsx(pC,{children:e})}function wE({shortcut:e}){const t="undefined"!=typeof window&&/Mac|iPhone|iPod|iPad/i.test(navigator.platform),n=Ua();return c.jsxs("div",{className:al("flex items-center gap-1.5 text-muted-foreground flex-shrink-0",n.textSizeSmall),children:[c.jsxs("span",{className:"text-muted-foreground whitespace-nowrap",children:[e.label,":"]}),c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.metaOrCtrl&&c.jsx(bE,{children:t?"":"Ctrl"}),e.shift&&c.jsx(bE,{children:"Shift"}),e.keys.map((e,t)=>c.jsx(bE,{children:"Enter"===e?"":"Delete"===e||"Backspace"===e?"":"Escape"===e?"Esc":e},t))]})]})}function SE({open:e,onClose:t,title:n,children:s,footer:a,maxWidth:r="800px",showClearButton:i=!0,showCancelButton:o=!0,showSubmitButton:l=!0,loading:d=!1,onSubmit:u,onClear:h,onCancel:m,className:g,contentClassName:x,shortcuts:v=[],showShortcutsHint:y=!0,formSelector:b,autoSubmitShortcut:w=!0,autoClearShortcut:S=!0,onEscape:j,preventEscClose:C=!1}){const k=Ua(),N=Va(),_=p.useRef(null),P=Array.isArray(a),E=P?a:null,R=P?null:a,A=p.useCallback(()=>{if(u)return void u();let e=null;b?"object"==typeof b&&"current"in b?e=b.current:"string"==typeof b&&(e=document.querySelector(b)):_.current&&(e=_.current.querySelector("form")),e&&e.requestSubmit()},[u,b]),T=C?[]:[{label:"Close",keys:["Escape"]}],M=[];(w||u)&&M.push({label:"Submit",keys:["Enter"],metaOrCtrl:!0}),S&&h&&M.push({label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0});const D=[...T,...M,...v||[]];return p.useEffect(()=>{if(!e)return;const n=e=>{if("Escape"===e.key)return C?(e.preventDefault(),void e.stopPropagation()):j?(j(e),e.preventDefault(),void e.stopPropagation()):(e.preventDefault(),void(d||t()));if((w||u)&&("Enter"===e.key||"Enter"===e.code)&&(e.metaKey||e.ctrlKey)&&!e.shiftKey)return e.preventDefault(),void(d||A());if(S&&h&&(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(d||h())}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,d,t,w,S,h,A,j,C]),e?Zt.createPortal(c.jsx("div",{className:"fixed !top-0 !left-0 !right-0 !bottom-0 z-50 bg-background/80 backdrop-blur-sm !m-0 !p-0",style:{margin:0,padding:0,top:0,left:0,right:0,bottom:0},children:c.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 z-50 h-screen w-screen bg-background",style:{margin:0,padding:0,top:0,left:0,right:0,bottom:0},children:c.jsxs("div",{className:`flex flex-col h-full ${g||""}`,children:[c.jsx("div",{className:"flex-shrink-0 border-b bg-background w-full",children:c.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-2",children:[c.jsx("h2",{className:"text-lg font-semibold text-foreground truncate",children:n}),c.jsxs(vl,{variant:"ghost",size:"sm",onClick:t,className:"h-6 w-6 p-0 hover:bg-accent flex-shrink-0",disabled:d,title:"Close (Esc)",children:[c.jsx(ax,{className:"h-3 w-3"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto bg-muted/30",children:c.jsx("div",{ref:_,className:`mx-auto w-full ${x||""}`,style:{maxWidth:r,marginTop:"8px"},children:s})}),R||(E||i||o||l)&&c.jsx("div",{className:"flex-shrink-0 border-t bg-background",children:c.jsx("div",{className:al(N?"px-4":"px-6","py-3"),children:c.jsxs("div",{className:al("flex items-center justify-between max-w-4xl mx-auto",k.gapButtonGroup),children:[y&&D.length>0&&c.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded-md bg-muted/50 border border-border/50",children:[c.jsx(Rf,{className:al("text-muted-foreground flex-shrink-0",k.iconSizeSmall)}),c.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:D.map((e,t)=>c.jsxs(f.Fragment,{children:[c.jsx(wE,{shortcut:e}),t<D.length-1&&c.jsx("span",{className:al("text-muted-foreground/50 flex-shrink-0 mx-0.5",k.textSizeSmall),children:""})]},t))})]}),c.jsx("div",{className:al("flex",k.gapButtonGroup),children:E?E.map((e,t)=>c.jsx(vl,{type:e.type||"button",variant:e.variant||"default",onClick:e.onClick,disabled:e.disabled??d,className:al(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted",e.className),children:e.label},t)):c.jsxs(c.Fragment,{children:[i&&h&&c.jsx(vl,{type:"button",variant:"outline",onClick:h,disabled:d,className:al(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted"),children:"Clear"}),o&&m&&c.jsx(vl,{type:"button",variant:"outline",onClick:m,disabled:d,className:al(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted"),children:"Cancel"}),l&&u&&c.jsx(vl,{type:"submit",variant:"default",onClick:e=>{e?.preventDefault(),u()},disabled:d,className:al(k.buttonHeightSmall,k.textSizeSmall,"px-3 font-medium border-border hover:bg-muted",d&&"cursor-not-allowed"),children:"Submit"})]})})]})})})]})})}),document.body):null}function jE({open:e,onOpenChange:t,title:n,description:s,confirmAction:a,cancelAction:r,footer:i,className:o,headerClassName:l,footerClassName:d,confirmText:u,confirmTextLabel:h="Type to confirm",confirmTextPlaceholder:m}){const[f,g]=p.useState(""),x=p.useId();p.useEffect(()=>{e||g("")},[e]);const v=()=>{if(r?.onClick){const e=r.onClick();e instanceof Promise?e.finally(()=>{r.disabled||t(!1)}):r.disabled||t(!1)}else t(!1)},y=()=>{if(a?.onClick){a.onClick()instanceof Promise||a.disabled||t(!1)}else t(!1)},b={label:"Cancel",variant:"outline",onClick:v,...r},w=!u||f.toLowerCase()===u.toLowerCase(),S={label:"Confirm",variant:"default",onClick:y,...a},j=S.disabled||S.loading||!!u&&!w,C=p.useRef(null),k=p.useRef(null),{isCompact:N}=$a(),_={...Ua(),paddingCell:N?"px-2 py-1.5":"px-3 py-2"};return p.useEffect(()=>{if(!e)return;const t=e=>{if(!("Enter"!==e.key||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)){const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;const n=document.activeElement;if((n===C.current||C.current?.contains(n)||"BUTTON"===n.tagName&&n.hasAttribute("data-cancel-button")||n.closest('[role="alertdialog"]')&&n.closest("[data-cancel-button]"))&&b){if(!(b.disabled||b.loading||S?.loading))return e.preventDefault(),e.stopPropagation(),void v()}if(S?.disabled||S?.loading)return;e.preventDefault(),e.stopPropagation(),y()}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,S,b]),c.jsx(Mb,{open:e,onOpenChange:t,children:c.jsxs(Fb,{className:al(_.paddingContainer,o),children:[c.jsxs(Ib,{className:al(_.spacingFormItem,l),children:[c.jsx(zb,{className:al(N?"text-base":"text-lg","font-semibold"),children:n}),s&&c.jsx(Bb,{className:al(_.textSizeSmall,"[&>p]:mb-0"),children:s})]}),u&&c.jsxs("div",{className:al(_.spacingFormItem,"px-6"),children:[c.jsx(Dl,{htmlFor:x,className:al(_.textSizeSmall),children:h}),c.jsx(kl,{id:x,type:"text",value:f,onChange:e=>g(e.target.value),placeholder:m||`Type "${u}" to confirm`,className:al(_.inputHeight,"mt-1.5"),autoFocus:!0})]}),void 0!==i?c.jsx(Ob,{className:al(_.gapButtonGroup,d),children:i}):c.jsxs(Ob,{className:al(_.gapButtonGroup,d),children:[b&&c.jsx(Ub,{asChild:!0,children:c.jsx(vl,{ref:C,"data-cancel-button":"true",variant:b.variant||"outline",disabled:b.disabled||b.loading||S?.loading,onClick:v,className:al(_.buttonHeightSmall,_.paddingCell,_.textSizeSmall,"font-medium",b.className),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[b?.loading?c.jsx(If,{className:al(_.iconSizeSmall,"animate-spin")}):c.jsx(ax,{className:_.iconSizeSmall}),c.jsx("span",{children:b.loading?"Loading...":b.label})]})})}),S&&c.jsx($b,{asChild:!0,children:c.jsx(vl,{ref:k,variant:S.variant||"default",disabled:j,onClick:y,className:al(_.buttonHeightSmall,_.paddingCell,_.textSizeSmall,"font-medium",S.className),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[S?.loading?c.jsx(If,{className:al(_.iconSizeSmall,"animate-spin")}):"delete"===S?.type||"destructive"===S?.variant?c.jsx(Hg,{className:_.iconSizeSmall}):c.jsx(Up,{className:_.iconSizeSmall}),c.jsx("span",{children:S.loading?"Loading...":S.label})]})})})]})]})})}const CE=f.forwardRef(({className:e,...t},n)=>{const s=Ua();return c.jsx(vl,{ref:n,className:al(s.buttonHeightSmall,s.paddingCell,s.textSizeSmall,"font-medium",e),...t})});function kE({open:e,onOpenChange:t,title:n="Session Expired",description:s="Your session has timed out. Please log in again to continue your work.",initialUsername:a="",onBeforeLogin:r,onLogin:i,onAfterLogin:o}){const l=p.useRef(null),[d,u]=p.useState(!1),[h,m]=p.useState({username:"",password:""}),[f,g]=p.useState({}),{isCompact:x}=$a(),v=Ua();p.useEffect(()=>{if(e&&(m({username:a||"",password:""}),g({}),a)){const e=setTimeout(()=>l.current?.focus(),100);return()=>clearTimeout(e)}},[e,a]);return c.jsx(Zy,{open:e,onOpenChange:t,modal:!0,children:c.jsxs(tb,{className:al("sm:max-w-md",v.paddingContainer),style:{zIndex:9999},onEscapeKeyDown:e=>e.preventDefault(),onPointerDownOutside:e=>e.preventDefault(),children:[c.jsxs(nb,{className:v.spacingFormItem,children:[c.jsxs("div",{className:al("flex items-center gap-3 mb-2",v.gapFormItem),children:[c.jsx("div",{className:al("rounded-full bg-destructive/10 flex items-center justify-center",x?"h-10 w-10":"h-12 w-12"),children:c.jsx(Yp,{className:al("text-destructive",x?"h-5 w-5":"h-6 w-6")})}),c.jsx(ab,{className:al(x?"text-lg":"text-xl","font-semibold"),children:n})]}),c.jsx(rb,{className:v.textSizeSmall,children:s})]}),c.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g({});const n={};if(h.username.trim()||(n.username="Username or email is required"),h.password||(n.password="Password is required"),Object.keys(n).length>0)g(n);else{u(!0);try{r&&await r(),await i(h),o&&await o(),Ek({title:"Welcome back!",description:"You have been successfully logged in."}),m({username:"",password:""}),t(!1)}catch(s){const e=s instanceof Error?s.message:"Login failed";g({general:e}),Ek({title:"Login Failed",description:e,variant:"destructive"})}finally{u(!1)}}},className:al("mt-4",v.spacingFormSection),children:[f.general&&c.jsx("div",{className:al("rounded-md bg-destructive/10 text-destructive",v.paddingCell,v.textSizeSmall),children:f.general}),c.jsxs("div",{className:v.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"session-username",className:v.textSizeLabel,children:"Username or Email"}),c.jsx(kl,{id:"session-username",type:"text",placeholder:"Enter your username or email",value:h.username,onChange:e=>m(t=>({...t,username:e.target.value})),disabled:d,className:al(f.username?"border-destructive":"",v.inputHeight,v.textSize),autoComplete:"username"}),f.username&&c.jsx("p",{className:al("text-destructive",v.textSizeSmall),children:f.username})]}),c.jsxs("div",{className:v.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"session-password",className:v.textSizeLabel,children:"Password"}),c.jsx(kl,{ref:l,id:"session-password",type:"password",placeholder:"Enter your password",value:h.password,onChange:e=>m(t=>({...t,password:e.target.value})),disabled:d,className:al(f.password?"border-destructive":"",v.inputHeight,v.textSize),autoComplete:"current-password"}),f.password&&c.jsx("p",{className:al("text-destructive",v.textSizeSmall),children:f.password})]}),c.jsxs("div",{className:al("flex flex-col-reverse sm:flex-row sm:justify-end pt-2",v.gapButtonGroup),children:[c.jsx(vl,{type:"button",variant:"outline",onClick:()=>{m({username:"",password:""}),g({}),t(!1)},disabled:d,className:al(v.buttonHeightSmall,v.paddingCell,v.textSizeSmall),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(ax,{className:v.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx(vl,{type:"submit",disabled:d,className:al(v.buttonHeightSmall,v.paddingCell,v.textSizeSmall),children:c.jsx("span",{className:"flex items-center gap-1.5",children:d?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:al(v.iconSizeSmall,"animate-spin")}),c.jsx("span",{children:"Logging in..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Bf,{className:v.iconSizeSmall}),c.jsx("span",{children:"Log In"})]})})})]})]})]})})}CE.displayName="DialogAction";const NE=p.forwardRef(({className:e,leftIcon:t,error:n=!1,capsLockMessage:s="Caps Lock is on",onKeyDown:a,onKeyUp:r,...i},o)=>{const[l,d]=p.useState(!1),[u,h]=p.useState(!1),m=p.useCallback(e=>{h(e.getModifierState("CapsLock"))},[]),f=p.useCallback(e=>{m(e),a?.(e)},[m,a]),g=p.useCallback(e=>{m(e),r?.(e)},[m,r]);return c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"relative",children:[t||u?c.jsx("div",{className:al("absolute left-3 top-1/2 -translate-y-1/2",u?"text-destructive":"text-muted-foreground"),...u?{title:s,role:"status","aria-live":"polite","aria-label":s}:{},children:u?c.jsx(Bp,{className:"h-4 w-4 animate-pulse"}):t}):null,c.jsx(kl,{ref:o,type:l?"text":"password",className:al(t||u?"pl-10":void 0,"pr-10",n?"border-destructive":void 0,e),onKeyDown:f,onKeyUp:g,...i}),c.jsx("button",{type:"button",onClick:()=>d(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",tabIndex:-1,children:l?c.jsx(hf,{className:"h-4 w-4"}):c.jsx(mf,{className:"h-4 w-4"})})]})})});function _E({label:e,htmlFor:t,error:n,helperText:s,required:a=!1,children:r,className:i}){return c.jsxs("div",{className:al("space-y-2",i),children:[e&&c.jsxs(Dl,{htmlFor:t,children:[e,a&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),r,s&&!n&&c.jsx("p",{className:"text-xs text-muted-foreground",children:s}),n&&c.jsx("p",{className:"text-sm text-destructive",children:n})]})}NE.displayName="PasswordInput";const PE=p.forwardRef(({className:e,leftIcon:t,error:n=!1,...s},a)=>c.jsxs("div",{className:"relative",children:[t&&c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",children:t}),c.jsx(kl,{ref:a,className:al(t?"pl-10":void 0,n?"border-destructive":void 0,e),...s})]}));function EE({placeholder:e="Search...",className:t,...n}){return c.jsxs("div",{className:"relative",children:[c.jsx(Sg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(kl,{type:"text",placeholder:e,className:al("pl-10",t),...n})]})}PE.displayName="InputWithIcon";var RE=e=>"checkbox"===e.type,AE=e=>e instanceof Date,TE=e=>null==e;const ME=e=>"object"==typeof e;var DE=e=>!TE(e)&&!Array.isArray(e)&&ME(e)&&!AE(e),LE=e=>DE(e)&&e.target?RE(e.target)?e.target.checked:e.target.value:e,FE=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),IE="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function OE(e){if(e instanceof Date)return new Date(e);const t="undefined"!=typeof FileList&&e instanceof FileList;if(IE&&(e instanceof Blob||t))return e;const n=Array.isArray(e);if(!(n||DE(e)&&(e=>{const t=e.constructor&&e.constructor.prototype;return DE(t)&&t.hasOwnProperty("isPrototypeOf")})(e)))return e;const s=n?[]:Object.create(Object.getPrototypeOf(e));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=OE(e[a]));return s}var zE=e=>/^\w*$/.test(e),BE=e=>void 0===e,$E=e=>Array.isArray(e)?e.filter(Boolean):[],UE=e=>$E(e.replace(/["|']|\]/g,"").split(/\.|\[/)),VE=(e,t,n)=>{if(!t||!DE(e))return n;const s=(zE(t)?[t]:UE(t)).reduce((e,t)=>TE(e)?e:e[t],e);return BE(s)||s===e?BE(e[t])?n:e[t]:s},qE=e=>"boolean"==typeof e,HE=e=>"function"==typeof e,GE=(e,t,n)=>{let s=-1;const a=zE(t)?[t]:UE(t),r=a.length,i=r-1;for(;++s<r;){const t=a[s];let r=n;if(s!==i){const n=e[t];r=DE(n)||Array.isArray(n)?n:isNaN(+a[s+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=r,e=e[t]}};const KE="blur",WE="focusout",QE="change",YE="onBlur",XE="onChange",ZE="onSubmit",JE="onTouched",eR="all",tR="max",nR="min",sR="maxLength",aR="minLength",rR="pattern",iR="required",oR="validate",lR=f.createContext(null);lR.displayName="HookFormContext";const cR=()=>f.useContext(lR),dR=e=>{const{children:t,...n}=e;return f.createElement(lR.Provider,{value:n},t)};var uR=(e,t,n,s=!0)=>{const a={defaultValues:t._defaultValues};for(const r in e)Object.defineProperty(a,r,{get:()=>{const a=r;return t._proxyFormState[a]!==eR&&(t._proxyFormState[a]=!s||eR),n&&(n[a]=!0),e[a]}});return a};const hR="undefined"!=typeof window?f.useLayoutEffect:f.useEffect;var mR=e=>"string"==typeof e,pR=(e,t,n,s,a)=>mR(e)?(s&&t.watch.add(e),VE(n,e,a)):Array.isArray(e)?e.map(e=>(s&&t.watch.add(e),VE(n,e))):(s&&(t.watchAll=!0),n),fR=e=>TE(e)||!ME(e);function gR(e,t,n=new WeakSet){if(fR(e)||fR(t))return Object.is(e,t);if(AE(e)&&AE(t))return Object.is(e.getTime(),t.getTime());const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const r of s){const s=e[r];if(!a.includes(r))return!1;if("ref"!==r){const e=t[r];if(AE(s)&&AE(e)||DE(s)&&DE(e)||Array.isArray(s)&&Array.isArray(e)?!gR(s,e,n):!Object.is(s,e))return!1}}return!0}function xR(e){const t=cR(),{name:n,disabled:s,control:a=t.control,shouldUnregister:r,defaultValue:i,exact:o=!0}=e,l=FE(a._names.array,n),c=f.useMemo(()=>VE(a._formValues,n,VE(a._defaultValues,n,i)),[a,n,i]),d=function(e){const t=cR(),{control:n=t.control,name:s,defaultValue:a,disabled:r,exact:i,compute:o}=e||{},l=f.useRef(a),c=f.useRef(o),d=f.useRef(void 0),u=f.useRef(n),h=f.useRef(s);c.current=o;const[m,p]=f.useState(()=>{const e=n._getWatch(s,l.current);return c.current?c.current(e):e}),g=f.useCallback(e=>{const t=pR(s,n._names,e||n._formValues,!1,l.current);return c.current?c.current(t):t},[n._formValues,n._names,s]),x=f.useCallback(e=>{if(!r){const t=pR(s,n._names,e||n._formValues,!1,l.current);if(c.current){const e=c.current(t);gR(e,d.current)||(p(e),d.current=e)}else p(t)}},[n._formValues,n._names,r,s]);hR(()=>(u.current===n&&gR(h.current,s)||(u.current=n,h.current=s,x()),n._subscribe({name:s,formState:{values:!0},exact:i,callback:e=>{x(e.values)}})),[n,i,s,x]),f.useEffect(()=>n._removeUnmounted());const v=u.current!==n,y=h.current,b=f.useMemo(()=>{if(r)return null;const e=!v&&!gR(y,s);return v||e?g():null},[r,v,s,y,g]);return null!==b?b:m}({control:a,name:n,defaultValue:c,exact:o}),u=function(e){const t=cR(),{control:n=t.control,disabled:s,name:a,exact:r}=e||{},[i,o]=f.useState(n._formState),l=f.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return hR(()=>n._subscribe({name:a,formState:l.current,exact:r,callback:e=>{!s&&o({...n._formState,...e})}}),[a,s,r]),f.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),f.useMemo(()=>uR(i,n,l.current,!1),[i,n])}({control:a,name:n,exact:o}),h=f.useRef(e),m=f.useRef(void 0),p=f.useRef(a.register(n,{...e.rules,value:d,...qE(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const g=f.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!VE(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!VE(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!VE(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!VE(u.validatingFields,n)},error:{enumerable:!0,get:()=>VE(u.errors,n)}}),[u,n]),x=f.useCallback(e=>p.current.onChange({target:{value:LE(e),name:n},type:QE}),[n]),v=f.useCallback(()=>p.current.onBlur({target:{value:VE(a._formValues,n),name:n},type:KE}),[n,a._formValues]),y=f.useCallback(e=>{const t=VE(a._fields,n);t&&t._f&&e&&(t._f.ref={focus:()=>HE(e.focus)&&e.focus(),select:()=>HE(e.select)&&e.select(),setCustomValidity:t=>HE(e.setCustomValidity)&&e.setCustomValidity(t),reportValidity:()=>HE(e.reportValidity)&&e.reportValidity()})},[a._fields,n]),b=f.useMemo(()=>({name:n,value:d,...qE(s)||u.disabled?{disabled:u.disabled||s}:{},onChange:x,onBlur:v,ref:y}),[n,s,u.disabled,x,v,y,d]);return f.useEffect(()=>{const e=a._options.shouldUnregister||r,t=m.current;t&&t!==n&&!l&&a.unregister(t),a.register(n,{...h.current.rules,...qE(h.current.disabled)?{disabled:h.current.disabled}:{}});const s=(e,t)=>{const n=VE(a._fields,e);n&&n._f&&(n._f.mount=t)};if(s(n,!0),e){const e=OE(VE(a._options.defaultValues,n,h.current.defaultValue));GE(a._defaultValues,n,e),BE(VE(a._formValues,n))&&GE(a._formValues,n,e)}return!l&&a.register(n),m.current=n,()=>{(l?e&&!a._state.action:e)?a.unregister(n):s(n,!1)}},[n,a,l,r]),f.useEffect(()=>{a._setDisabledField({disabled:s,name:n})},[s,n,a]),f.useMemo(()=>({field:b,formState:u,fieldState:g}),[b,u,g])}const vR=e=>e.render(xR(e));var yR=(e,t,n,s,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:a||!0}}:{},bR=e=>Array.isArray(e)?e:[e],wR=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function SR(e,t){const n={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],r=t[s];if(a&&DE(a)&&r){const e=SR(a,r);DE(e)&&(n[s]=e)}else e[s]&&(n[s]=r)}return n}var jR=e=>DE(e)&&!Object.keys(e).length,CR=e=>"file"===e.type,kR=e=>{if(!IE)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},NR=e=>"select-multiple"===e.type,_R=e=>"radio"===e.type,PR=e=>kR(e)&&e.isConnected;function ER(e,t){const n=Array.isArray(t)?t:zE(t)?[t]:UE(t),s=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=BE(e)?s++:e[t[s++]];return e}(e,n),a=n.length-1,r=n[a];return s&&delete s[r],0!==a&&(DE(s)&&jR(s)||Array.isArray(s)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!BE(e[t]))return!1;return!0}(s))&&ER(e,n.slice(0,-1)),e}function RR(e){return Array.isArray(e)||DE(e)&&!(e=>{for(const t in e)if(HE(e[t]))return!0;return!1})(e)}function AR(e,t={}){for(const n in e){const s=e[n];RR(s)?(t[n]=Array.isArray(s)?[]:{},AR(s,t[n])):BE(s)||(t[n]=!0)}return t}function TR(e,t,n){n||(n=AR(t));for(const s in e){const a=e[s];if(RR(a))BE(t)||fR(n[s])?n[s]=AR(a,Array.isArray(a)?[]:{}):TR(a,TE(t)?{}:t[s],n[s]);else{const e=t[s];n[s]=!gR(a,e)}}return n}const MR={value:!1,isValid:!1},DR={value:!0,isValid:!0};var LR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!BE(e[0].attributes.value)?BE(e[0].value)||""===e[0].value?DR:{value:e[0].value,isValid:!0}:DR:MR}return MR},FR=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>BE(e)?e:t?""===e?NaN:e?+e:e:n&&mR(e)?new Date(e):s?s(e):e;const IR={isValid:!1,value:null};var OR=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,IR):IR;function zR(e){const t=e.ref;return CR(t)?t.files:_R(t)?OR(e.refs).value:NR(t)?[...t.selectedOptions].map(({value:e})=>e):RE(t)?LR(e.refs).value:FR(BE(t.value)?e.ref.value:t.value,e)}var BR=e=>e instanceof RegExp,$R=e=>BE(e)?e:BR(e)?e.source:DE(e)?BR(e.value)?e.value.source:e.value:e,UR=e=>({isOnSubmit:!e||e===ZE,isOnBlur:e===YE,isOnChange:e===XE,isOnAll:e===eR,isOnTouch:e===JE});const VR="AsyncFunction";var qR=e=>!!e&&!!e.validate&&!!(HE(e.validate)&&e.validate.constructor.name===VR||DE(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===VR)),HR=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const GR=(e,t,n,s)=>{for(const a of n||Object.keys(e)){const n=VE(e,a);if(n){const{_f:e,...r}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!s)return!0;if(e.ref&&t(e.ref,e.name)&&!s)return!0;if(GR(r,t))break}else if(DE(r)&&GR(r,t))break}}};function KR(e,t,n){const s=VE(e,n);if(s||zE(n))return{error:s,name:n};const a=n.split(".");for(;a.length;){const s=a.join("."),r=VE(t,s),i=VE(e,s);if(r&&!Array.isArray(r)&&n!==s)return{name:n};if(i&&i.type)return{name:s,error:i};if(i&&i.root&&i.root.type)return{name:`${s}.root`,error:i.root};a.pop()}return{name:n}}var WR=(e,t,n)=>{const s=bR(VE(e,n));return GE(s,"root",t[n]),GE(e,n,s),e};function QR(e,t,n="validate"){if(mR(e)||Array.isArray(e)&&e.every(mR)||qE(e)&&!e)return{type:n,message:mR(e)?e:"",ref:t}}var YR=e=>DE(e)&&!BR(e)?e:{value:e,message:""},XR=async(e,t,n,s,a,r)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:m,validate:p,name:f,valueAsNumber:g,mount:x}=e._f,v=VE(n,f);if(!x||t.has(f))return{};const y=o?o[0]:i,b=e=>{a&&y.reportValidity&&(y.setCustomValidity(qE(e)?"":e||""),y.reportValidity())},w={},S=_R(i),j=RE(i),C=S||j,k=(g||CR(i))&&BE(i.value)&&BE(v)||kR(i)&&""===i.value||""===v||Array.isArray(v)&&!v.length,N=yR.bind(null,f,s,w),_=(e,t,n,s=sR,a=aR)=>{const r=e?t:n;w[f]={type:e?s:a,message:r,ref:i,...N(e?s:a,r)}};if(r?!Array.isArray(v)||!v.length:l&&(!C&&(k||TE(v))||qE(v)&&!v||j&&!LR(o).isValid||S&&!OR(o).isValid)){const{value:e,message:t}=mR(l)?{value:!!l,message:l}:YR(l);if(e&&(w[f]={type:iR,message:t,ref:y,...N(iR,t)},!s))return b(t),w}if(!(k||TE(u)&&TE(h))){let e,t;const n=YR(h),a=YR(u);if(TE(v)||isNaN(v)){const s=i.valueAsDate||new Date(v),r=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;mR(n.value)&&v&&(e=o?r(v)>r(n.value):l?v>n.value:s>new Date(n.value)),mR(a.value)&&v&&(t=o?r(v)<r(a.value):l?v<a.value:s<new Date(a.value))}else{const s=i.valueAsNumber||(v?+v:v);TE(n.value)||(e=s>n.value),TE(a.value)||(t=s<a.value)}if((e||t)&&(_(!!e,n.message,a.message,tR,nR),!s))return b(w[f].message),w}if((c||d)&&!k&&(mR(v)||r&&Array.isArray(v))){const e=YR(c),t=YR(d),n=!TE(e.value)&&v.length>+e.value,a=!TE(t.value)&&v.length<+t.value;if((n||a)&&(_(n,e.message,t.message),!s))return b(w[f].message),w}if(m&&!k&&mR(v)){const{value:e,message:t}=YR(m);if(BR(e)&&!v.match(e)&&(w[f]={type:rR,message:t,ref:i,...N(rR,t)},!s))return b(t),w}if(p)if(HE(p)){const e=QR(await p(v,n),y);if(e&&(w[f]={...e,...N(oR,e.message)},!s))return b(e.message),w}else if(DE(p)){let e={};for(const t in p){if(!jR(e)&&!s)break;const a=QR(await p[t](v,n),y,t);a&&(e={...a,...N(t,a.message)},b(a.message),s&&(w[f]=e))}if(!jR(e)&&(w[f]={ref:y,...e},!s))return w}return b(!0),w};const ZR={mode:ZE,reValidateMode:XE,shouldFocusError:!0};function JR(e={}){let t,n={...ZR,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:HE(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},a={},r=(DE(n.defaultValues)||DE(n.values))&&OE(n.defaultValues||n.values)||{},i=n.shouldUnregister?{}:OE(r),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={...d};let h={...u};const m={array:wR(),state:wR()},p=n.criteriaMode===eR,f=async e=>{if(!o.keepIsValid&&!n.disabled&&(u.isValid||h.isValid||e)){let e;n.resolver?(e=jR((await b()).errors),g()):e=await w(a,!0),e!==s.isValid&&m.state.next({isValid:e})}},g=(e,t)=>{!n.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?GE(s.validatingFields,e,t):ER(s.validatingFields,e))}),m.state.next({validatingFields:s.validatingFields,isValidating:!jR(s.validatingFields)}))},x=(e,t,n,s)=>{const l=VE(a,e);if(l){const a=VE(i,e,BE(n)?VE(r,e):n);BE(a)||s&&s.defaultChecked||t?GE(i,e,t?a:zR(l._f)):C(e,a),o.mount&&!o.action&&f()}},v=(e,t,a,i,o)=>{let l=!1,c=!1;const d={name:e};if(!n.disabled){if(!a||i){(u.isDirty||h.isDirty)&&(c=s.isDirty,s.isDirty=d.isDirty=S(),l=c!==d.isDirty);const n=gR(VE(r,e),t);c=!!VE(s.dirtyFields,e),n?ER(s.dirtyFields,e):GE(s.dirtyFields,e,!0),d.dirtyFields=s.dirtyFields,l=l||(u.dirtyFields||h.dirtyFields)&&c!==!n}if(a){const t=VE(s.touchedFields,e);t||(GE(s.touchedFields,e,a),d.touchedFields=s.touchedFields,l=l||(u.touchedFields||h.touchedFields)&&t!==a)}l&&o&&m.state.next(d)}return l?d:{}},y=(e,a,r,i)=>{const o=VE(s.errors,e),l=(u.isValid||h.isValid)&&qE(a)&&s.isValid!==a;var d;if(n.delayError&&r?(d=()=>((e,t)=>{GE(s.errors,e,t),m.state.next({errors:s.errors})})(e,r),t=e=>{clearTimeout(c),c=setTimeout(d,e)},t(n.delayError)):(clearTimeout(c),t=null,r?GE(s.errors,e,r):ER(s.errors,e)),(r?!gR(o,r):o)||!jR(i)||l){const t={...i,...l&&qE(a)?{isValid:a}:{},errors:s.errors,name:e};s={...s,...t},m.state.next(t)}},b=async e=>{g(e,!0);const t=await n.resolver(i,n.context,((e,t,n,s)=>{const a={};for(const r of e){const e=VE(t,r);e&&GE(a,r,e._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:s}})(e||l.mount,a,n.criteriaMode,n.shouldUseNativeValidation));return t},w=async(t,a,r={valid:!0})=>{for(const o in t){const c=t[o];if(c){const{_f:t,...o}=c;if(t){const o=l.array.has(t.name),d=c._f&&qR(c._f);d&&u.validatingFields&&g([t.name],!0);const h=await XR(c,l.disabled,i,p,n.shouldUseNativeValidation&&!a,o);if(d&&u.validatingFields&&g([t.name]),h[t.name]&&(r.valid=!1,a||e.shouldUseNativeValidation))break;!a&&(VE(h,t.name)?o?WR(s.errors,h,t.name):GE(s.errors,t.name,h[t.name]):ER(s.errors,t.name))}!jR(o)&&await w(o,a,r)}}return r.valid},S=(e,t)=>!n.disabled&&(e&&t&&GE(i,e,t),!gR(R(),r)),j=(e,t,n)=>pR(e,l,{...o.mount?i:BE(t)?r:mR(e)?{[e]:t}:t},n,t),C=(e,t,n={})=>{const s=VE(a,e);let r=t;if(s){const n=s._f;n&&(!n.disabled&&GE(i,e,FR(t,n)),r=kR(n.ref)&&TE(t)?"":t,NR(n.ref)?[...n.ref.options].forEach(e=>e.selected=r.includes(e.value)):n.refs?RE(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(r)?e.checked=!!r.find(t=>t===e.value):e.checked=r===e.value||!!r)}):n.refs.forEach(e=>e.checked=e.value===r):CR(n.ref)?n.ref.value="":(n.ref.value=r,n.ref.type||m.state.next({name:e,values:OE(i)})))}(n.shouldDirty||n.shouldTouch)&&v(e,r,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&E(e)},k=(e,t,n)=>{for(const s in t){if(!t.hasOwnProperty(s))return;const r=t[s],i=e+"."+s,o=VE(a,i);(l.array.has(e)||DE(r)||o&&!o._f)&&!AE(r)?k(i,r,n):C(i,r,n)}},N=(e,t,n={})=>{const c=VE(a,e),d=l.array.has(e),p=OE(t);GE(i,e,p),d?(m.array.next({name:e,values:OE(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&n.shouldDirty&&m.state.next({name:e,dirtyFields:TR(r,i),isDirty:S(e,p)})):!c||c._f||TE(p)?C(e,p,n):k(e,p,n),HR(e,l)?m.state.next({...s,name:e,values:OE(i)}):m.state.next({name:o.mount?e:void 0,values:OE(i)})},_=async e=>{o.mount=!0;const r=e.target;let c=r.name,d=!0;const x=VE(a,c),S=e=>{d=Number.isNaN(e)||AE(e)&&isNaN(e.getTime())||gR(e,VE(i,c,e))},j=UR(n.mode),C=UR(n.reValidateMode);if(x){let o,k;const N=r.type?zR(x._f):LE(e),_=e.type===KE||e.type===WE,P=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(x._f)&&!n.resolver&&!VE(s.errors,c)&&!x._f.deps||((e,t,n,s,a)=>!a.isOnAll&&(!n&&a.isOnTouch?!(t||e):(n?s.isOnBlur:a.isOnBlur)?!e:!(n?s.isOnChange:a.isOnChange)||e))(_,VE(s.touchedFields,c),s.isSubmitted,C,j),R=HR(c,l,_);GE(i,c,N),_?r&&r.readOnly||(x._f.onBlur&&x._f.onBlur(e),t&&t(0)):x._f.onChange&&x._f.onChange(e);const A=v(c,N,_),T=!jR(A)||R;if(!_&&m.state.next({name:c,type:e.type,values:OE(i)}),P)return(u.isValid||h.isValid)&&("onBlur"===n.mode?_&&f():_||f()),T&&m.state.next({name:c,...R?{}:A});if(!_&&R&&m.state.next({...s}),n.resolver){const{errors:e}=await b([c]);if(g([c]),S(N),d){const t=KR(s.errors,a,c),n=KR(e,a,t.name||c);o=n.error,c=n.name,k=jR(e)}}else g([c],!0),o=(await XR(x,l.disabled,i,p,n.shouldUseNativeValidation))[c],g([c]),S(N),d&&(o?k=!1:(u.isValid||h.isValid)&&(k=await w(a,!0)));d&&(x._f.deps&&(!Array.isArray(x._f.deps)||x._f.deps.length>0)&&E(x._f.deps),y(c,k,o,A))}},P=(e,t)=>{if(VE(s.errors,t)&&e.focus)return e.focus(),1},E=async(e,t={})=>{let r,i;const o=bR(e);if(n.resolver){const t=await(async e=>{const{errors:t}=await b(e);if(g(e),e)for(const n of e){const e=VE(t,n);e?GE(s.errors,n,e):ER(s.errors,n)}else s.errors=t;return t})(BE(e)?e:o);r=jR(t),i=e?!o.some(e=>VE(t,e)):r}else e?(i=(await Promise.all(o.map(async e=>{const t=VE(a,e);return await w(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||s.isValid)&&f()):i=r=await w(a);return m.state.next({...!mR(e)||(u.isValid||h.isValid)&&r!==s.isValid?{}:{name:e},...n.resolver||!e?{isValid:r}:{},errors:s.errors}),t.shouldFocus&&!i&&GR(a,P,e?o:l.mount),i},R=(e,t)=>{let n={...o.mount?i:r};return t&&(n=SR(t.dirtyFields?s.dirtyFields:s.touchedFields,n)),BE(e)?n:mR(e)?VE(n,e):e.map(e=>VE(n,e))},A=(e,t)=>({invalid:!!VE((t||s).errors,e),isDirty:!!VE((t||s).dirtyFields,e),error:VE((t||s).errors,e),isValidating:!!VE(s.validatingFields,e),isTouched:!!VE((t||s).touchedFields,e)}),T=(e,t,n)=>{const r=(VE(a,e,{_f:{}})._f||{}).ref,i=VE(s.errors,e)||{},{ref:o,message:l,type:c,...d}=i;GE(s.errors,e,{...d,...t,ref:r}),m.state.next({name:e,errors:s.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()},M=e=>m.state.subscribe({next:t=>{var n,a,o;n=e.name,a=t.name,o=e.exact,n&&a&&n!==a&&!bR(n).some(e=>e&&(o?e===a:e.startsWith(a)||a.startsWith(e)))||!((e,t,n,s)=>{n(e);const{name:a,...r}=e;return jR(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find(e=>t[e]===(!s||eR))})(t,e.formState||u,$,e.reRenderRoot)||e.callback({values:{...i},...s,...t,defaultValues:r})}}).unsubscribe,D=(e,t={})=>{for(const o of e?bR(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(ER(a,o),ER(i,o)),!t.keepError&&ER(s.errors,o),!t.keepDirty&&ER(s.dirtyFields,o),!t.keepTouched&&ER(s.touchedFields,o),!t.keepIsValidating&&ER(s.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&ER(r,o);m.state.next({values:OE(i)}),m.state.next({...s,...t.keepDirty?{isDirty:S()}:{}}),!t.keepIsValid&&f()},L=({disabled:e,name:t})=>{(qE(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},F=(e,t={})=>{let s=VE(a,e);const i=qE(t.disabled)||qE(n.disabled);return GE(a,e,{...s||{},_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),s?L({disabled:qE(t.disabled)?t.disabled:n.disabled,name:e}):x(e,!0,t.value),{...i?{disabled:t.disabled||n.disabled}:{},...n.progressive?{required:!!t.required,min:$R(t.min),max:$R(t.max),minLength:$R(t.minLength),maxLength:$R(t.maxLength),pattern:$R(t.pattern)}:{},name:e,onChange:_,onBlur:_,ref:i=>{if(i){F(e,t),s=VE(a,e);const n=BE(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>_R(e)||RE(e))(n),l=s._f.refs||[];if(o?l.find(e=>e===n):n===s._f.ref)return;GE(a,e,{_f:{...s._f,...o?{refs:[...l.filter(PR),n,...Array.isArray(VE(r,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),x(e,!1,void 0,n)}else s=VE(a,e,{}),s._f&&(s._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!FE(l.array,e)||!o.action)&&l.unMount.add(e)}}},I=()=>n.shouldFocusError&&GR(a,P,l.mount),O=(e,t)=>async r=>{let o;r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let c=OE(i);if(m.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await b();g(),s.errors=e,c=OE(t)}else await w(a);if(l.disabled.size)for(const e of l.disabled)ER(c,e);if(ER(s.errors,"root"),jR(s.errors)){m.state.next({errors:{}});try{await e(c,r)}catch(d){o=d}}else t&&await t({...s.errors},r),I(),setTimeout(I);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jR(s.errors)&&!o,submitCount:s.submitCount+1,errors:s.errors}),o)throw o},z=(e,t={})=>{const c=e?OE(e):r,d=OE(c),h=jR(e),p=h?r:d;if(t.keepDefaultValues||(r=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(TR(r,i))]);for(const t of Array.from(e)){const e=VE(s.dirtyFields,t),n=VE(i,t),a=VE(p,t);e&&!BE(n)?GE(p,t,n):e||BE(a)||N(t,a)}}else{if(IE&&BE(e))for(const e of l.mount){const t=VE(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(kR(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)N(e,VE(p,e));else a={}}i=n.shouldUnregister?t.keepDefaultValues?OE(r):{}:OE(p),m.array.next({values:{...p}}),m.state.next({values:{...p}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!n.shouldUnregister&&!jR(p),o.watch=!!n.shouldUnregister,o.keepIsValid=!!t.keepIsValid,o.action=!1,t.keepErrors||(s.errors={}),m.state.next({submitCount:t.keepSubmitCount?s.submitCount:0,isDirty:!h&&(t.keepDirty?s.isDirty:!(!t.keepDefaultValues||gR(e,r))),isSubmitted:!!t.keepIsSubmitted&&s.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&i?TR(r,i):s.dirtyFields:t.keepDefaultValues&&e?TR(r,e):t.keepDirty?s.dirtyFields:{},touchedFields:t.keepTouched?s.touchedFields:{},errors:t.keepErrors?s.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1,defaultValues:r})},B=(e,t)=>z(HE(e)?e(i):e,{...n.resetOptions,...t}),$=e=>{s={...s,...e}},U={control:{register:F,unregister:D,getFieldState:A,handleSubmit:O,setError:T,_subscribe:M,_runSchema:b,_updateIsValidating:g,_focusError:I,_getWatch:j,_getDirty:S,_setValid:f,_setFieldArray:(e,t=[],l,c,d=!0,p=!0)=>{if(c&&l&&!n.disabled){if(o.action=!0,p&&Array.isArray(VE(a,e))){const t=l(VE(a,e),c.argA,c.argB);d&&GE(a,e,t)}if(p&&Array.isArray(VE(s.errors,e))){const t=l(VE(s.errors,e),c.argA,c.argB);d&&GE(s.errors,e,t),((e,t)=>{!$E(VE(e,t)).length&&ER(e,t)})(s.errors,e)}if((u.touchedFields||h.touchedFields)&&p&&Array.isArray(VE(s.touchedFields,e))){const t=l(VE(s.touchedFields,e),c.argA,c.argB);d&&GE(s.touchedFields,e,t)}(u.dirtyFields||h.dirtyFields)&&(s.dirtyFields=TR(r,i)),m.state.next({name:e,isDirty:S(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else GE(i,e,t)},_setDisabledField:L,_setErrors:e=>{s.errors=e,m.state.next({errors:s.errors,isValid:!1})},_getFieldArray:e=>$E(VE(o.mount?i:r,e,n.shouldUnregister?VE(r,e,[]):[])),_reset:z,_resetDefaultValues:()=>HE(n.defaultValues)&&n.defaultValues().then(e=>{B(e,n.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=VE(a,e);t&&(t._f.refs?t._f.refs.every(e=>!PR(e)):!PR(t._f.ref))&&D(e)}l.unMount=new Set},_disableForm:e=>{qE(e)&&(m.state.next({disabled:e}),GR(a,(t,n)=>{const s=VE(a,n);s&&(t.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(t=>{t.disabled=s._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:u,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return r},get _names(){return l},set _names(e){l=e},get _formState(){return s},get _options(){return n},set _options(e){n={...n,...e}}},subscribe:e=>(o.mount=!0,h={...h,...e.formState},M({...e,formState:{...d,...e.formState}})),trigger:E,register:F,handleSubmit:O,watch:(e,t)=>HE(e)?m.state.subscribe({next:n=>"values"in n&&e(j(void 0,t),n)}):j(e,t,!0),setValue:N,getValues:R,reset:B,resetField:(e,t={})=>{VE(a,e)&&(BE(t.defaultValue)?N(e,OE(VE(r,e))):(N(e,t.defaultValue),GE(r,e,OE(t.defaultValue))),t.keepTouched||ER(s.touchedFields,e),t.keepDirty||(ER(s.dirtyFields,e),s.isDirty=t.defaultValue?S(e,OE(VE(r,e))):S()),t.keepError||(ER(s.errors,e),u.isValid&&f()),m.state.next({...s}))},clearErrors:e=>{e&&bR(e).forEach(e=>ER(s.errors,e)),m.state.next({errors:e?s.errors:{}})},unregister:D,setError:T,setFocus:(e,t={})=>{const n=VE(a,e),s=n&&n._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&setTimeout(()=>{e.focus(),t.shouldSelect&&HE(e.select)&&e.select()})}},getFieldState:A};return{...U,formControl:U}}var eA=()=>{if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(16*Math.random()+e)%16|0;return("x"==t?n:3&n|8).toString(16)})},tA=(e,t,n={})=>n.shouldFocus||BE(n.shouldFocus)?n.focusName||`${e}.${BE(n.focusIndex)?t:n.focusIndex}.`:"",nA=(e,t)=>[...e,...bR(t)],sA=e=>Array.isArray(e)?e.map(()=>{}):void 0;function aA(e,t,n){return[...e.slice(0,t),...bR(n),...e.slice(t)]}var rA=(e,t,n)=>Array.isArray(e)?(BE(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],iA=(e,t)=>[...bR(t),...bR(e)];var oA=(e,t)=>BE(t)?[]:function(e,t){let n=0;const s=[...e];for(const a of t)s.splice(a-n,1),n++;return $E(s).length?s:[]}(e,bR(t).sort((e,t)=>e-t)),lA=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]},cA=(e,t,n)=>(e[t]=n,e);function dA(e){const t=cR(),{control:n=t.control,name:s,keyName:a="id",shouldUnregister:r,rules:i}=e,[o,l]=f.useState(n._getFieldArray(s)),c=f.useRef(n._getFieldArray(s).map(eA)),d=f.useRef(!1);n._names.array.add(s),f.useMemo(()=>i&&o.length>=0&&n.register(s,i),[n,s,o.length,i]),hR(()=>n._subjects.array.subscribe({next:({values:e,name:t})=>{if(t===s||!t){const t=VE(e,s);Array.isArray(t)&&(l(t),c.current=t.map(eA))}}}).unsubscribe,[n,s]);const u=f.useCallback(e=>{d.current=!0,n._setFieldArray(s,e)},[n,s]);return f.useEffect(()=>{if(n._state.action=!1,HR(s,n._names)&&n._subjects.state.next({...n._formState}),d.current&&(!UR(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!UR(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([s]).then(e=>{n._updateIsValidating([s]);const t=VE(e.errors,s),a=VE(n._formState.errors,s);(a?!t&&a.type||t&&(a.type!==t.type||a.message!==t.message):t&&t.type)&&(t?GE(n._formState.errors,s,t):ER(n._formState.errors,s),n._subjects.state.next({errors:n._formState.errors}))});else{const e=VE(n._fields,s);!e||!e._f||UR(n._options.reValidateMode).isOnSubmit&&UR(n._options.mode).isOnSubmit||XR(e,n._names.disabled,n._formValues,n._options.criteriaMode===eR,n._options.shouldUseNativeValidation,!0).then(e=>!jR(e)&&n._subjects.state.next({errors:WR(n._formState.errors,e,s)}))}n._subjects.state.next({name:s,values:OE(n._formValues)}),n._names.focus&&GR(n._fields,(e,t)=>{if(n._names.focus&&t.startsWith(n._names.focus)&&e.focus)return e.focus(),1}),n._names.focus="",n._setValid(),d.current=!1},[o,s,n]),f.useEffect(()=>(!VE(n._formValues,s)&&n._setFieldArray(s),()=>{n._options.shouldUnregister||r?n.unregister(s):((e,t)=>{const s=VE(n._fields,e);s&&s._f&&(s._f.mount=t)})(s,!1)}),[s,n,a,r]),{swap:f.useCallback((e,t)=>{const a=n._getFieldArray(s);lA(a,e,t),lA(c.current,e,t),u(a),l(a),n._setFieldArray(s,a,lA,{argA:e,argB:t},!1)},[u,s,n]),move:f.useCallback((e,t)=>{const a=n._getFieldArray(s);rA(a,e,t),rA(c.current,e,t),u(a),l(a),n._setFieldArray(s,a,rA,{argA:e,argB:t},!1)},[u,s,n]),prepend:f.useCallback((e,t)=>{const a=bR(OE(e)),r=iA(n._getFieldArray(s),a);n._names.focus=tA(s,0,t),c.current=iA(c.current,a.map(eA)),u(r),l(r),n._setFieldArray(s,r,iA,{argA:sA(e)})},[u,s,n]),append:f.useCallback((e,t)=>{const a=bR(OE(e)),r=nA(n._getFieldArray(s),a);n._names.focus=tA(s,r.length-1,t),c.current=nA(c.current,a.map(eA)),u(r),l(r),n._setFieldArray(s,r,nA,{argA:sA(e)})},[u,s,n]),remove:f.useCallback(e=>{const t=oA(n._getFieldArray(s),e);c.current=oA(c.current,e),u(t),l(t),!Array.isArray(VE(n._fields,s))&&GE(n._fields,s,void 0),n._setFieldArray(s,t,oA,{argA:e})},[u,s,n]),insert:f.useCallback((e,t,a)=>{const r=bR(OE(t)),i=aA(n._getFieldArray(s),e,r);n._names.focus=tA(s,e,a),c.current=aA(c.current,e,r.map(eA)),u(i),l(i),n._setFieldArray(s,i,aA,{argA:e,argB:sA(t)})},[u,s,n]),update:f.useCallback((e,t)=>{const a=OE(t),r=cA(n._getFieldArray(s),e,a);c.current=[...r].map((t,n)=>t&&n!==e?c.current[n]:eA()),u(r),l([...r]),n._setFieldArray(s,r,cA,{argA:e,argB:a},!0,!1)},[u,s,n]),replace:f.useCallback(e=>{const t=bR(OE(e));c.current=t.map(eA),u([...t]),l([...t]),n._setFieldArray(s,[...t],e=>e,{},!0,!1)},[u,s,n]),fields:f.useMemo(()=>o.map((e,t)=>({...e,[a]:c.current[t]||eA()})),[o,a])}}function uA(e={}){const t=f.useRef(void 0),n=f.useRef(void 0),[s,a]=f.useState({isDirty:!1,isValidating:!1,isLoading:HE(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:HE(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!HE(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:n,...a}=JR(e);t.current={...a,formState:s}}const r=t.current.control;return r._options=e,hR(()=>{const e=r._subscribe({formState:r._proxyFormState,callback:()=>a({...r._formState}),reRenderRoot:!0});return a(e=>({...e,isReady:!0})),r._formState.isReady=!0,e},[r]),f.useEffect(()=>r._disableForm(e.disabled),[r,e.disabled]),f.useEffect(()=>{e.mode&&(r._options.mode=e.mode),e.reValidateMode&&(r._options.reValidateMode=e.reValidateMode)},[r,e.mode,e.reValidateMode]),f.useEffect(()=>{e.errors&&(r._setErrors(e.errors),r._focusError())},[r,e.errors]),f.useEffect(()=>{e.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,e.shouldUnregister]),f.useEffect(()=>{if(r._proxyFormState.isDirty){const e=r._getDirty();e!==s.isDirty&&r._subjects.state.next({isDirty:e})}},[r,s.isDirty]),f.useEffect(()=>{var t;e.values&&!gR(e.values,n.current)?(r._reset(e.values,{keepFieldsRef:!0,...r._options.resetOptions}),(null===(t=r._options.resetOptions)||void 0===t?void 0:t.keepIsValid)||r._setValid(),n.current=e.values,a(e=>({...e}))):r._resetDefaultValues()},[r,e.values]),f.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),t.current.formState=uR(s,r),t.current}function hA({name:e,label:t,placeholder:n,type:s="text",required:a=!1,disabled:r=!1,readOnly:i=!1,helperText:o,autoComplete:l,maxLength:d,minLength:u,pattern:h,className:m,errorMessage:p,control:f}){let g,x={};if(f)g=f;else{const e=cR();g=e.control,x=e.formState.errors}const v=x[e],y=!!v,b=p||v?.message;return c.jsxs(El,{"data-invalid":y,children:[t&&c.jsxs(Rl,{htmlFor:e,children:[t,a&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(vR,{name:e,control:g,render:({field:t})=>c.jsx(kl,{...t,id:e,type:s,placeholder:n,disabled:r,readOnly:i,autoComplete:l,maxLength:d,minLength:u,pattern:h,className:al(y&&"border-destructive",i&&"cursor-not-allowed bg-muted text-muted-foreground",m),"aria-invalid":y,"aria-describedby":b||o?`${e}-${b?"error":"helper"}`:void 0})}),o&&!b&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:o}),b&&c.jsx(Al,{id:`${e}-error`,children:b})]})}function mA({name:e,label:t,placeholder:n,required:s=!1,disabled:a=!1,readOnly:r=!1,min:i,max:o,step:l,helperText:d,className:u,errorMessage:h,allowDecimals:m=!0,control:p}){let f,g={};if(p)f=p;else{const e=cR();f=e.control,g=e.formState.errors}const x=g[e],v=!!x,y=h||x?.message;return c.jsxs(El,{"data-invalid":v,children:[t&&c.jsxs(Rl,{htmlFor:e,children:[t,s&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(vR,{name:e,control:f,render:({field:t})=>c.jsx(kl,{...t,id:e,type:"number",placeholder:n,disabled:a,readOnly:r,min:i,max:o,step:l||(m?"any":1),className:al(v&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",u),"aria-invalid":v,"aria-describedby":y||d?`${e}-${y?"error":"helper"}`:void 0,onChange:e=>{const n=e.target.value;""!==n&&isNaN(Number(n))||t.onChange(""===n?void 0:Number(n))},value:t.value??""})}),d&&!y&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:d}),y&&c.jsx(Al,{id:`${e}-error`,children:y})]})}function pA({name:e,label:t,placeholder:n,required:s=!1,disabled:a=!1,readOnly:r=!1,min:i,max:o,helperText:l,className:d,errorMessage:u,control:h}){let m,p={};if(h)m=h;else{const e=cR();m=e.control,p=e.formState.errors}const f=p[e],g=!!f,x=u||f?.message;return c.jsxs(El,{"data-invalid":g,children:[t&&c.jsxs(Rl,{htmlFor:e,children:[t,s&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(vR,{name:e,control:m,render:({field:t})=>c.jsx(kl,{...t,id:e,type:"date",placeholder:n,disabled:a,readOnly:r,min:i,max:o,className:al(g&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",d),"aria-invalid":g,"aria-describedby":x||l?`${e}-${x?"error":"helper"}`:void 0,value:t.value||""})}),l&&!x&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:l}),x&&c.jsx(Al,{id:`${e}-error`,children:x})]})}function fA({name:e,label:t,placeholder:n,required:s=!1,disabled:a=!1,readOnly:r=!1,min:i,max:o,step:l=60,helperText:d,className:u,errorMessage:h,control:m}){let p,f={};if(m)p=m;else{const e=cR();p=e.control,f=e.formState.errors}const g=f[e],x=!!g,v=h||g?.message;return c.jsxs(El,{"data-invalid":x,children:[t&&c.jsxs(Rl,{htmlFor:e,children:[t,s&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(vR,{name:e,control:p,render:({field:t})=>c.jsx(kl,{...t,id:e,type:"datetime-local",placeholder:n,disabled:a,readOnly:r,min:i,max:o,step:l,className:al(x&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",u),"aria-invalid":x,"aria-describedby":v||d?`${e}-${v?"error":"helper"}`:void 0,value:t.value||""})}),d&&!v&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:d}),v&&c.jsx(Al,{id:`${e}-error`,children:v})]})}function gA({name:e,label:t,placeholder:n="Select an option",options:s,required:a=!1,disabled:r=!1,helperText:i,className:o,errorMessage:l,allowClear:d=!1,clearLabel:u="None",control:h}){let m,p={};if(h)m=h;else{const e=cR();m=e.control,p=e.formState.errors}const f=p[e],g=!!f,x=l||f?.message;return c.jsxs(El,{"data-invalid":g,children:[t&&c.jsxs(Rl,{htmlFor:e,children:[t,a&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c.jsx(vR,{name:e,control:m,render:({field:t})=>c.jsxs(ox,{value:t.value||"",onValueChange:e=>{d&&"__clear__"===e?t.onChange(void 0):t.onChange(e)},disabled:r,children:[c.jsx(cx,{id:e,className:al(g&&"border-destructive",o),"aria-invalid":g,"aria-describedby":x||i?`${e}-${x?"error":"helper"}`:void 0,children:c.jsx(lx,{placeholder:n})}),c.jsxs(hx,{children:[d&&c.jsx(mx,{value:"__clear__",children:u}),s.map(e=>c.jsx(mx,{value:e.value,disabled:e.disabled,children:e.label},e.value))]})]})}),i&&!x&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:i}),x&&c.jsx(Al,{id:`${e}-error`,children:x})]})}const xA="/api/v1/ai";function vA(){const[e,t]=p.useState(!1),[n,s]=p.useState(null);return{improve:p.useCallback(async(e,n="default")=>{if(!e?.trim())return null;s(null),t(!0);try{return(await async function(e){return Fa.post(`${xA}/improve-text`,e,{requiresAuth:!0})}({text:e.trim(),mode:n})).improvedText??null}catch(a){const e=a&&"object"==typeof a&&"message"in a?String(a.message):"Failed to improve text";return s(e),null}finally{t(!1)}},[]),loading:e,error:n}}function yA({value:e,onImproved:t,mode:n="default",disabled:s=!1,className:a,label:r="Improve with AI",size:i="sm"}){const{improve:o,loading:l,error:d}=vA(),u="icon"===i;return c.jsxs("div",{className:al("flex flex-col gap-1",u&&"w-fit items-end",a),children:[c.jsxs(vl,{type:"button",variant:"outline",size:u?"icon":"sm",disabled:s||l||!e?.trim(),onClick:async()=>{const s=await o(e,n);null!=s&&t(s)},className:al("group transition-all duration-200 ease-out","hover:border-primary/50 hover:bg-primary/5 hover:shadow-sm","active:scale-[0.99] focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",u?"size-8 shrink-0 rounded-full hover:scale-105 active:scale-95 disabled:hover:scale-100":"gap-2"),"aria-label":u?"Improve with AI":void 0,children:[l?c.jsx(If,{className:"h-4 w-4 animate-spin text-primary"}):c.jsx(Rg,{className:"h-4 w-4 text-primary transition-transform duration-200 ease-out group-hover:rotate-12 group-hover:scale-110"}),!u&&(l?"Improving":r)]}),d&&c.jsx("p",{className:"text-xs text-destructive animate-in fade-in-0 slide-in-from-top-1 duration-200",role:"alert",children:d})]})}function bA({formType:e,currentValues:t,fieldHints:n}){const[s,a]=p.useState(!1),[r,i]=p.useState(null),o=p.useCallback(()=>i(null),[]);return{suggest:p.useCallback(async s=>{i(null),a(!0);try{return(await async function(e){return Fa.post(`${xA}/form-suggest`,e,{requiresAuth:!0})}({formType:e,currentValues:t??{},fieldHints:n,userPrompt:s?.trim()||void 0})).suggestedValues??{}}catch(r){return i(function(e){if(e instanceof Error&&e.message)return e.message;if(e&&"object"==typeof e&&"message"in e&&e.message){const t=e.message;if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e=>"string"==typeof e?e:String(e)).join(" ")}const t=e,n=t?.response?.data??t?.data;if(n&&"object"==typeof n){const e=n;if("string"==typeof e.detail)return e.detail;if(Array.isArray(e.detail))return e.detail.map(e=>String(e&&"object"==typeof e&&"msg"in e?e.msg:e)).filter(Boolean).join(" ")||"Validation error";if("string"==typeof e.message)return e.message}return"Failed to get suggestions"}(r)),{}}finally{a(!1)}},[e,t,n]),loading:s,error:r,clearError:o}}function wA({formType:e,currentValues:t,fieldHints:n,onSuggest:s,disabled:a=!1,className:r,label:i="Suggest with AI"}){const[o,l]=p.useState(!1),[d,u]=p.useState(""),h=p.useRef(null),{suggest:m,loading:f,error:g,clearError:x}=bA({formType:e,currentValues:t,fieldHints:n}),v=async()=>{const e=await m(d);Object.keys(e).length>0&&(s(e),l(!1),u(""))},y=()=>{const e=h.current;e&&(e.style.height="auto",e.style.height=`${Math.min(Math.max(e.scrollHeight,80),280)}px`)};return p.useEffect(()=>{o&&y()},[o,d]),c.jsx("div",{className:al("flex flex-col gap-1",r),children:c.jsxs(Zy,{open:o,onOpenChange:e=>{f||(l(e),e||(u(""),x()))},children:[c.jsxs(vl,{type:"button",variant:"outline",size:"sm",disabled:a,onClick:()=>l(!0),className:al("group w-full gap-2 transition-all duration-200 ease-out","hover:border-primary/50 hover:bg-primary/5 hover:shadow-sm","active:scale-[0.99] focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[c.jsx(Rg,{className:"h-4 w-4 transition-transform duration-200 ease-out group-hover:rotate-12 group-hover:scale-110"}),i]}),c.jsxs(tb,{className:"sm:max-w-xl duration-300",onPointerDownOutside:e=>f&&e.preventDefault(),onEscapeKeyDown:e=>f&&e.preventDefault(),children:[c.jsxs(nb,{className:"space-y-1.5",children:[c.jsx(ab,{className:"tracking-tight",children:i}),c.jsx(rb,{className:"text-muted-foreground/90",children:"Add optional instructions to guide the suggestions (e.g. tone, focus, or style). Leave blank for general suggestions."})]}),c.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[g&&c.jsx("p",{className:"text-sm text-destructive rounded-md bg-destructive/10 border border-destructive/20 px-3 py-2",role:"alert",children:g}),c.jsxs("div",{className:al("flex flex-col rounded-xl border border-input bg-muted/30 p-4","focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:bg-background","transition-all duration-200 ease-out"),children:[c.jsx(Tl,{ref:h,id:"suggest-ai-prompt",placeholder:"Describe what you want... (e.g. 'Keep it professional, focus on accessibility')",className:al("min-h-[80px] max-h-[280px] w-full resize-none overflow-y-auto rounded-lg border-0 bg-transparent py-0 pl-0 pr-0","text-base text-foreground placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50","transition-[height] duration-150 ease-out"),value:d,onChange:e=>{u(e.target.value),requestAnimationFrame(y)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},disabled:f}),c.jsx("div",{className:"flex justify-end pt-3",children:c.jsx(vl,{type:"button",size:"icon",className:al("group size-8 rounded-full bg-primary text-primary-foreground shrink-0","transition-all duration-200 ease-out","hover:bg-primary/90 hover:scale-105 hover:shadow-md","active:scale-95 disabled:opacity-50 disabled:hover:scale-100"),onClick:v,disabled:f||!d.trim(),children:f?c.jsx(If,{className:"size-4 animate-spin"}):c.jsx(Np,{className:"size-4 transition-transform duration-200 group-hover:-translate-y-0.5"})})})]})]})]})]})})}function SA({name:e,label:t,placeholder:n,required:s=!1,disabled:a=!1,readOnly:r=!1,rows:i=4,maxLength:o,minLength:l,helperText:d,className:u,errorMessage:h,showImproveButton:m=!1,control:p}){let f,g={};if(p)f=p;else{const e=cR();f=e.control,g=e.formState.errors}const x=g[e],v=!!x,y=h||x?.message;return c.jsxs(El,{"data-invalid":v,children:[(t||m&&!r)&&c.jsxs("div",{className:"flex items-center gap-2",children:[t&&c.jsxs(Rl,{htmlFor:e,children:[t,s&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),m&&!r&&c.jsx(vR,{name:e,control:f,render:({field:e})=>c.jsx(yA,{value:e.value??"",onImproved:e.onChange,disabled:a,size:"icon",className:"shrink-0"})})]}),c.jsx(vR,{name:e,control:f,render:({field:t})=>c.jsx(Tl,{...t,id:e,placeholder:n,disabled:a,readOnly:r,rows:i,maxLength:o,minLength:l,className:al("flex-1 min-w-0 w-full",v&&"border-destructive",r&&"cursor-not-allowed bg-muted text-muted-foreground",u),"aria-invalid":v,"aria-describedby":y||d?`${e}-${y?"error":"helper"}`:void 0})}),d&&!y&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:d}),y&&c.jsx(Al,{id:`${e}-error`,children:y})]})}function jA({name:e,label:t,required:n=!1,disabled:s=!1,helperText:a,className:r,errorMessage:i,description:o,control:l}){let d,u={};if(l)d=l;else{const e=cR();d=e.control,u=e.formState.errors}const h=u[e],m=!!h,p=i||h?.message;return c.jsxs(El,{"data-invalid":m,className:al("space-y-2",r),children:[c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(vR,{name:e,control:d,render:({field:t})=>c.jsx(RC,{id:e,checked:t.value||!1,onCheckedChange:e=>{t.onChange(!0===e)},disabled:s,"aria-invalid":m,"aria-describedby":p||a||o?`${e}-${p?"error":a?"helper":"description"}`:void 0,className:al(m&&"border-destructive")})}),c.jsxs("div",{className:"space-y-1 leading-none",children:[t&&c.jsxs(Rl,{htmlFor:e,className:"cursor-pointer font-normal",children:[t,n&&c.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),o&&c.jsx("p",{id:`${e}-description`,className:"text-sm text-muted-foreground",children:o})]})]}),a&&!p&&c.jsx("p",{id:`${e}-helper`,className:"text-xs text-muted-foreground",children:a}),p&&c.jsx(Al,{id:`${e}-error`,children:p})]})}function CA({title:e,description:t,actions:n,className:s}){return c.jsxs("div",{className:al("flex justify-between items-start mb-6",s),children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:e}),t&&c.jsx("p",{className:"text-muted-foreground mt-2",children:t})]}),n&&c.jsx("div",{className:"flex gap-2",children:n})]})}function kA({actions:e,maxVisibleActions:t=2,customActions:n,className:s,size:a="sm"}){const r=[],i=[];return e.forEach(e=>{"button"===e.display?r.push(e):"dropdown-item"===e.display?i.push(e):r.length<t?r.push(e):i.push(e)}),0!==e.length||n?c.jsxs("div",{className:al("flex items-center gap-3",s),children:[(r.length>0||n)&&c.jsxs("div",{className:"flex items-center gap-2",children:[r.map(e=>c.jsxs(vl,{variant:e.variant||"outline",size:a,className:"h-8 px-2 text-xs",onClick:e.onClick,disabled:e.disabled,children:[e.icon&&c.jsx("span",{className:"mr-1 flex items-center [&_svg]:h-3 [&_svg]:w-3",children:e.icon}),e.label]},e.id)),n]}),i.length>0&&c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs","aria-label":"More actions",children:c.jsx(uf,{className:"h-3 w-3"})})}),c.jsx(JS,{align:"end",className:"w-56",children:i.map(e=>c.jsxs(ej,{onClick:e.onClick,disabled:e.disabled,children:[e.icon&&c.jsx("span",{className:"mr-2 flex items-center [&_svg]:h-3.5 [&_svg]:w-3.5",children:e.icon}),e.label]},e.id))})]})]}):null}function NA({item:e,customActions:t,actions:n=[],className:s,size:a="sm",showOnHover:r=!0}){const i=t,o=n.filter(e=>!1!==e.show);if(!i&&0===o.length)return null;const l="sm"===a?"h-7 w-7":"h-8 w-8",d="sm"===a?"h-3.5 w-3.5":"h-4 w-4";return c.jsx("div",{className:al("flex items-center gap-1",r&&"opacity-0 group-hover:opacity-100 transition-opacity",s),onClick:e=>e.stopPropagation(),children:t?t(e):o.map(t=>c.jsx("button",{onClick:n=>{n.stopPropagation(),t.onClick(e)},className:al(`${l} p-0 rounded-md hover:bg-primary/10 hover:text-primary transition-colors flex items-center justify-center`,t.className),title:t.title,children:c.jsx("span",{className:`flex items-center [&_svg]:${d}`,children:t.icon})},t.id))})}function _A({message:e,className:t}){return c.jsxs("div",{className:al("flex items-center gap-2 p-3 text-sm text-destructive bg-destructive/10 rounded-md",t),children:[c.jsx(Yp,{className:"h-4 w-4 flex-shrink-0"}),c.jsx("span",{children:e})]})}const PA=(e,t,n)=>{if(e&&"reportValidity"in e){const s=VE(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},EA=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?PA(s.ref,n,e):s&&s.refs&&s.refs.forEach(t=>PA(t,n,e))}},RA=(e,t)=>{t.shouldUseNativeValidation&&EA(e,t);const n={};for(const s in e){const a=VE(t.fields,s),r=Object.assign(e[s]||{},{ref:a&&a.ref});if(AA(t.names||Object.keys(e),s)){const e=Object.assign({},VE(n,s));GE(e,"root",r),GE(n,s,e)}else GE(n,s,r)}return n},AA=(e,t)=>{const n=TA(t);return e.some(e=>TA(e).match(`^${n}\\.\\d+`))};function TA(e){return e.replace(/\]|\[/g,"")}function MA(e,t,n){function s(n,s){var a;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(a=n._zod).traits??(a.traits=new Set),n._zod.traits.add(e),t(n,s);for(const e in i.prototype)e in n||Object.defineProperty(n,e,{value:i.prototype[e].bind(n)});n._zod.constr=i,n._zod.def=s}const a=n?.Parent??Object;class r extends a{}function i(e){var t;const a=n?.Parent?new r:this;s(a,e),(t=a._zod).deferred??(t.deferred=[]);for(const n of a._zod.deferred)n();return a}return Object.defineProperty(r,"name",{value:e}),Object.defineProperty(i,"init",{value:s}),Object.defineProperty(i,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class DA extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const LA={};function FA(e){return LA}function IA(e,t){return"bigint"==typeof t?t.toString():t}const OA=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function zA(e){return"string"==typeof e?e:e?.message}function BA(e,t,n){const s={...e,path:e.path??[]};if(!e.message){const a=zA(e.inst?._zod.def?.error?.(e))??zA(t?.error?.(e))??zA(n.customError?.(e))??zA(n.localeError?.(e))??"Invalid input";s.message=a}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}const $A=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,IA,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},UA=MA("$ZodError",$A),VA=MA("$ZodError",$A,{Parent:Error}),qA=(e=>(t,n,s,a)=>{const r=s?Object.assign(s,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new DA;if(i.issues.length){const t=new(a?.Err??e)(i.issues.map(e=>BA(e,r,FA())));throw OA(t,a?.callee),t}return i.value})(VA),HA=(e=>async(t,n,s,a)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},r);if(i instanceof Promise&&(i=await i),i.issues.length){const t=new(a?.Err??e)(i.issues.map(e=>BA(e,r,FA())));throw OA(t,a?.callee),t}return i.value})(VA);function GA(e,t){try{var n=e()}catch(s){return t(s)}return n&&n.then?n.then(void 0,t):n}function KA(e,t){for(var n={};e.length;){var s=e[0],a=s.code,r=s.message,i=s.path.join(".");if(!n[i])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];n[i]={message:o.message,type:o.code}}else n[i]={message:r,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[s.code];n[i]=yR(i,t,n,a,c?[].concat(c,s.message):s.message)}e.shift()}return n}function WA(e,t){for(var n={};e.length;){var s=e[0],a=s.code,r=s.message,i=s.path.join(".");if(!n[i])if("invalid_union"===s.code&&s.errors.length>0){var o=s.errors[0][0];n[i]={message:o.message,type:o.code}}else n[i]={message:r,type:a};if("invalid_union"===s.code&&s.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[s.code];n[i]=yR(i,t,n,a,c?[].concat(c,s.message):s.message)}e.shift()}return n}function QA(e,t,n){if(void 0===n&&(n={}),"_def"in(s=e)&&"object"==typeof s._def&&"typeName"in s._def)return function(a,r,i){try{return Promise.resolve(GA(function(){return Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](a,t)).then(function(e){return i.shouldUseNativeValidation&&EA({},i),{errors:{},values:n.raw?Object.assign({},a):e}})},function(e){if(t=e,Array.isArray(null==t?void 0:t.issues))return{values:{},errors:RA(KA(e.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};var t;throw e}))}catch(s){return Promise.reject(s)}};var s;if(function(e){return"_zod"in e&&"object"==typeof e._zod}(e))return function(a,r,i){try{return Promise.resolve(GA(function(){return Promise.resolve(("sync"===n.mode?qA:HA)(e,a,t)).then(function(e){return i.shouldUseNativeValidation&&EA({},i),{errors:{},values:n.raw?Object.assign({},a):e}})},function(e){if(e instanceof UA)return{values:{},errors:RA(WA(e.issues,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};throw e}))}catch(s){return Promise.reject(s)}};throw new Error("Invalid input: not a Zod schema")}var YA,XA,ZA;(XA=YA||(YA={})).assertEqual=e=>{},XA.assertIs=function(e){},XA.assertNever=function(e){throw new Error},XA.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},XA.getValidEnumValues=e=>{const t=XA.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const s of t)n[s]=e[s];return XA.objectValues(n)},XA.objectValues=e=>XA.objectKeys(e).map(function(t){return e[t]}),XA.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},XA.find=(e,t)=>{for(const n of e)if(t(n))return n},XA.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,XA.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},XA.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(ZA||(ZA={})).mergeShapes=(e,t)=>({...e,...t});const JA=YA.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eT=e=>{switch(typeof e){case"undefined":return JA.undefined;case"string":return JA.string;case"number":return Number.isNaN(e)?JA.nan:JA.number;case"boolean":return JA.boolean;case"function":return JA.function;case"bigint":return JA.bigint;case"symbol":return JA.symbol;case"object":return Array.isArray(e)?JA.array:null===e?JA.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?JA.promise:"undefined"!=typeof Map&&e instanceof Map?JA.map:"undefined"!=typeof Set&&e instanceof Set?JA.set:"undefined"!=typeof Date&&e instanceof Date?JA.date:JA.object;default:return JA.unknown}},tT=YA.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class nT extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},s=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(s);else if("invalid_return_type"===a.code)s(a.returnTypeError);else if("invalid_arguments"===a.code)s(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,s=0;for(;s<a.path.length;){const n=a.path[s];s===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],s++}}};return s(this),n}static assert(e){if(!(e instanceof nT))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,YA.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const s of this.issues)if(s.path.length>0){const n=s.path[0];t[n]=t[n]||[],t[n].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}nT.create=e=>new nT(e);const sT=(e,t)=>{let n;switch(e.code){case tT.invalid_type:n=e.received===JA.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case tT.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,YA.jsonStringifyReplacer)}`;break;case tT.unrecognized_keys:n=`Unrecognized key(s) in object: ${YA.joinValues(e.keys,", ")}`;break;case tT.invalid_union:n="Invalid input";break;case tT.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${YA.joinValues(e.options)}`;break;case tT.invalid_enum_value:n=`Invalid enum value. Expected ${YA.joinValues(e.options)}, received '${e.received}'`;break;case tT.invalid_arguments:n="Invalid function arguments";break;case tT.invalid_return_type:n="Invalid function return type";break;case tT.invalid_date:n="Invalid date";break;case tT.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:YA.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case tT.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case tT.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case tT.custom:n="Invalid input";break;case tT.invalid_intersection_types:n="Intersection results could not be merged";break;case tT.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case tT.not_finite:n="Number must be finite";break;default:n=t.defaultError,YA.assertNever(e)}return{message:n}};let aT=sT;function rT(e,t){const n=aT,s=(e=>{const{data:t,path:n,errorMaps:s,issueData:a}=e,r=[...n,...a.path||[]],i={...a,path:r};if(void 0!==a.message)return{...a,path:r,message:a.message};let o="";const l=s.filter(e=>!!e).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return{...a,path:r,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===sT?void 0:sT].filter(e=>!!e)});e.common.issues.push(s)}class iT{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if("aborted"===s.status)return oT;"dirty"===s.status&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const e=await s.key,t=await s.value;n.push({key:e,value:t})}return iT.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:t,value:a}=s;if("aborted"===t.status)return oT;if("aborted"===a.status)return oT;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!s.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const oT=Object.freeze({status:"aborted"}),lT=e=>({status:"dirty",value:e}),cT=e=>({status:"valid",value:e}),dT=e=>"aborted"===e.status,uT=e=>"dirty"===e.status,hT=e=>"valid"===e.status,mT=e=>"undefined"!=typeof Promise&&e instanceof Promise;var pT,fT;(fT=pT||(pT={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},fT.toString=e=>"string"==typeof e?e:e?.message;class gT{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xT=(e,t)=>{if(hT(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new nT(e.common.issues);return this._error=t,this._error}}};function vT(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:a}=e;if(t&&(n||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{const{message:r}=e;return"invalid_enum_value"===t.code?{message:r??a.defaultError}:void 0===a.data?{message:r??s??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:r??n??a.defaultError}},description:a}}class yT{get description(){return this._def.description}_getType(e){return eT(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:eT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new iT,ctx:{common:e.parent.common,data:e.data,parsedType:eT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(mT(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eT(e)},s=this._parseSync({data:e,path:n.path,parent:n});return xT(n,s)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eT(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return hT(n)?{value:n.value}:{issues:t.common.issues}}catch(wW){wW?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>hT(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eT(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(mT(s)?s:Promise.resolve(s));return xT(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,s)=>{const a=e(t),r=()=>s.addIssue({code:tT.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(r(),!1)):!!a||(r(),!1)})}refinement(e,t){return this._refinement((n,s)=>!!e(n)||(s.addIssue("function"==typeof t?t(n,s):t),!1))}_refinement(e){return new xM({schema:this,typeName:NM.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return vM.create(this,this._def)}nullable(){return yM.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nM.create(this)}promise(){return gM.create(this,this._def)}or(e){return rM.create([this,e],this._def)}and(e){return oM.create(this,e,this._def)}transform(e){return new xM({...vT(this._def),schema:this,typeName:NM.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new bM({...vT(this._def),innerType:this,defaultValue:t,typeName:NM.ZodDefault})}brand(){return new jM({typeName:NM.ZodBranded,type:this,...vT(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new wM({...vT(this._def),innerType:this,catchValue:t,typeName:NM.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return CM.create(this,e)}readonly(){return kM.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bT=/^c[^\s-]{8,}$/i,wT=/^[0-9a-z]+$/,ST=/^[0-9A-HJKMNP-TV-Z]{26}$/i,jT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CT=/^[a-z0-9_-]{21}$/i,kT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,NT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_T=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let PT;const ET=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,AT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,DT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,LT="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",FT=new RegExp(`^${LT}$`);function IT(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function OT(e){return new RegExp(`^${IT(e)}$`)}function zT(e){let t=`${LT}T${IT(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function BT(e,t){return!("v4"!==t&&t||!ET.test(e))||!("v6"!==t&&t||!AT.test(e))}function $T(e,t){if(!kT.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(s));return"object"==typeof a&&null!==a&&((!("typ"in a)||"JWT"===a?.typ)&&(!!a.alg&&(!t||a.alg===t)))}catch{return!1}}function UT(e,t){return!("v4"!==t&&t||!RT.test(e))||!("v6"!==t&&t||!TT.test(e))}class VT extends yT{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==JA.string){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.string,received:t.parsedType}),oT}const t=new iT;let n;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const a=e.data.length>s.value,r=e.data.length<s.value;(a||r)&&(n=this._getOrReturnCtx(e,n),a?rT(n,{code:tT.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):r&&rT(n,{code:tT.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)_T.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"email",code:tT.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)PT||(PT=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),PT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"emoji",code:tT.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)jT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"uuid",code:tT.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)CT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"nanoid",code:tT.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)bT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"cuid",code:tT.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)wT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"cuid2",code:tT.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)ST.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"ulid",code:tT.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),rT(n,{validation:"url",code:tT.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"regex",code:tT.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){zT(s).test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else if("date"===s.kind){FT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.invalid_string,validation:"date",message:s.message}),t.dirty())}else if("time"===s.kind){OT(s).test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.invalid_string,validation:"time",message:s.message}),t.dirty())}else"duration"===s.kind?NT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"duration",code:tT.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?BT(e.data,s.version)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"ip",code:tT.invalid_string,message:s.message}),t.dirty()):"jwt"===s.kind?$T(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"jwt",code:tT.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?UT(e.data,s.version)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"cidr",code:tT.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?MT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"base64",code:tT.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?DT.test(e.data)||(n=this._getOrReturnCtx(e,n),rT(n,{validation:"base64url",code:tT.invalid_string,message:s.message}),t.dirty()):YA.assertNever(s);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:tT.invalid_string,...pT.errToObj(n)})}_addCheck(e){return new VT({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pT.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pT.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pT.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pT.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pT.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pT.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pT.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pT.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pT.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pT.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pT.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pT.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pT.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...pT.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...pT.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pT.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...pT.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...pT.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...pT.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...pT.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...pT.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...pT.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...pT.errToObj(t)})}nonempty(e){return this.min(1,pT.errToObj(e))}trim(){return new VT({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new VT({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new VT({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function qT(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=n>s?n:s;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}VT.create=e=>new VT({checks:[],typeName:NM.ZodString,coerce:e?.coerce??!1,...vT(e)});class HT extends yT{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==JA.number){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.number,received:t.parsedType}),oT}let t;const n=new iT;for(const s of this._def.checks)if("int"===s.kind)YA.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty())}else"multipleOf"===s.kind?0!==qT(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.not_finite,message:s.message}),n.dirty()):YA.assertNever(s);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,pT.toString(t))}gt(e,t){return this.setLimit("min",e,!1,pT.toString(t))}lte(e,t){return this.setLimit("max",e,!0,pT.toString(t))}lt(e,t){return this.setLimit("max",e,!1,pT.toString(t))}setLimit(e,t,n,s){return new HT({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:pT.toString(s)}]})}_addCheck(e){return new HT({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pT.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pT.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pT.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pT.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pT.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:pT.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:pT.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pT.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pT.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&YA.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}HT.create=e=>new HT({checks:[],typeName:NM.ZodNumber,coerce:e?.coerce||!1,...vT(e)});class GT extends yT{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==JA.bigint)return this._getInvalidInput(e);let t;const n=new iT;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),rT(t,{code:tT.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):YA.assertNever(s);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.bigint,received:t.parsedType}),oT}gte(e,t){return this.setLimit("min",e,!0,pT.toString(t))}gt(e,t){return this.setLimit("min",e,!1,pT.toString(t))}lte(e,t){return this.setLimit("max",e,!0,pT.toString(t))}lt(e,t){return this.setLimit("max",e,!1,pT.toString(t))}setLimit(e,t,n,s){return new GT({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:pT.toString(s)}]})}_addCheck(e){return new GT({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pT.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pT.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pT.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pT.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:pT.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}GT.create=e=>new GT({checks:[],typeName:NM.ZodBigInt,coerce:e?.coerce??!1,...vT(e)});class KT extends yT{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==JA.boolean){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.boolean,received:t.parsedType}),oT}return cT(e.data)}}KT.create=e=>new KT({typeName:NM.ZodBoolean,coerce:e?.coerce||!1,...vT(e)});class WT extends yT{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==JA.date){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.date,received:t.parsedType}),oT}if(Number.isNaN(e.data.getTime())){return rT(this._getOrReturnCtx(e),{code:tT.invalid_date}),oT}const t=new iT;let n;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),rT(n,{code:tT.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):YA.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new WT({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:pT.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:pT.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}WT.create=e=>new WT({checks:[],coerce:e?.coerce||!1,typeName:NM.ZodDate,...vT(e)});class QT extends yT{_parse(e){if(this._getType(e)!==JA.symbol){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.symbol,received:t.parsedType}),oT}return cT(e.data)}}QT.create=e=>new QT({typeName:NM.ZodSymbol,...vT(e)});class YT extends yT{_parse(e){if(this._getType(e)!==JA.undefined){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.undefined,received:t.parsedType}),oT}return cT(e.data)}}YT.create=e=>new YT({typeName:NM.ZodUndefined,...vT(e)});class XT extends yT{_parse(e){if(this._getType(e)!==JA.null){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.null,received:t.parsedType}),oT}return cT(e.data)}}XT.create=e=>new XT({typeName:NM.ZodNull,...vT(e)});class ZT extends yT{constructor(){super(...arguments),this._any=!0}_parse(e){return cT(e.data)}}ZT.create=e=>new ZT({typeName:NM.ZodAny,...vT(e)});class JT extends yT{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cT(e.data)}}JT.create=e=>new JT({typeName:NM.ZodUnknown,...vT(e)});class eM extends yT{_parse(e){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.never,received:t.parsedType}),oT}}eM.create=e=>new eM({typeName:NM.ZodNever,...vT(e)});class tM extends yT{_parse(e){if(this._getType(e)!==JA.undefined){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.void,received:t.parsedType}),oT}return cT(e.data)}}tM.create=e=>new tM({typeName:NM.ZodVoid,...vT(e)});class nM extends yT{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==JA.array)return rT(t,{code:tT.invalid_type,expected:JA.array,received:t.parsedType}),oT;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(e||a)&&(rT(t,{code:e?tT.too_big:tT.too_small,minimum:a?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(rT(t,{code:tT.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(rT(t,{code:tT.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>s.type._parseAsync(new gT(t,e,t.path,n)))).then(e=>iT.mergeArray(n,e));const a=[...t.data].map((e,n)=>s.type._parseSync(new gT(t,e,t.path,n)));return iT.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new nM({...this._def,minLength:{value:e,message:pT.toString(t)}})}max(e,t){return new nM({...this._def,maxLength:{value:e,message:pT.toString(t)}})}length(e,t){return new nM({...this._def,exactLength:{value:e,message:pT.toString(t)}})}nonempty(e){return this.min(1,e)}}function sM(e){if(e instanceof aM){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=vM.create(sM(s))}return new aM({...e._def,shape:()=>t})}return e instanceof nM?new nM({...e._def,type:sM(e.element)}):e instanceof vM?vM.create(sM(e.unwrap())):e instanceof yM?yM.create(sM(e.unwrap())):e instanceof lM?lM.create(e.items.map(e=>sM(e))):e}nM.create=(e,t)=>new nM({type:e,minLength:null,maxLength:null,exactLength:null,typeName:NM.ZodArray,...vT(t)});class aM extends yT{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=YA.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==JA.object){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.object,received:t.parsedType}),oT}const{status:t,ctx:n}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),r=[];if(!(this._def.catchall instanceof eM&&"strip"===this._def.unknownKeys))for(const o in n.data)a.includes(o)||r.push(o);const i=[];for(const o of a){const e=s[o],t=n.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new gT(n,t,n.path,o)),alwaysSet:o in n.data})}if(this._def.catchall instanceof eM){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of r)i.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)r.length>0&&(rT(n,{code:tT.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const s=n.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new gT(n,s,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const n=await t.key,s=await t.value;e.push({key:n,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>iT.mergeObjectSync(t,e)):iT.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return pT.errToObj,new aM({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{const s=this._def.errorMap?.(t,n).message??n.defaultError;return"unrecognized_keys"===t.code?{message:pT.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new aM({...this._def,unknownKeys:"strip"})}passthrough(){return new aM({...this._def,unknownKeys:"passthrough"})}extend(e){return new aM({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new aM({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:NM.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new aM({...this._def,catchall:e})}pick(e){const t={};for(const n of YA.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new aM({...this._def,shape:()=>t})}omit(e){const t={};for(const n of YA.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new aM({...this._def,shape:()=>t})}deepPartial(){return sM(this)}partial(e){const t={};for(const n of YA.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}return new aM({...this._def,shape:()=>t})}required(e){const t={};for(const n of YA.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof vM;)e=e._def.innerType;t[n]=e}return new aM({...this._def,shape:()=>t})}keyof(){return mM(YA.objectKeys(this.shape))}}aM.create=(e,t)=>new aM({shape:()=>e,unknownKeys:"strip",catchall:eM.create(),typeName:NM.ZodObject,...vT(t)}),aM.strictCreate=(e,t)=>new aM({shape:()=>e,unknownKeys:"strict",catchall:eM.create(),typeName:NM.ZodObject,...vT(t)}),aM.lazycreate=(e,t)=>new aM({shape:e,unknownKeys:"strip",catchall:eM.create(),typeName:NM.ZodObject,...vT(t)});class rM extends yT{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const s of e)if("dirty"===s.result.status)return t.common.issues.push(...s.ctx.common.issues),s.result;const n=e.map(e=>new nT(e.ctx.common.issues));return rT(t,{code:tT.invalid_union,unionErrors:n}),oT});{let e;const s=[];for(const r of n){const n={...t,common:{...t.common,issues:[]},parent:null},a=r._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&s.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=s.map(e=>new nT(e));return rT(t,{code:tT.invalid_union,unionErrors:a}),oT}}get options(){return this._def.options}}function iM(e,t){const n=eT(e),s=eT(t);if(e===t)return{valid:!0,data:e};if(n===JA.object&&s===JA.object){const n=YA.objectKeys(t),s=YA.objectKeys(e).filter(e=>-1!==n.indexOf(e)),a={...e,...t};for(const r of s){const n=iM(e[r],t[r]);if(!n.valid)return{valid:!1};a[r]=n.data}return{valid:!0,data:a}}if(n===JA.array&&s===JA.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let s=0;s<e.length;s++){const a=iM(e[s],t[s]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===JA.date&&s===JA.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}rM.create=(e,t)=>new rM({options:e,typeName:NM.ZodUnion,...vT(t)});class oM extends yT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(e,s)=>{if(dT(e)||dT(s))return oT;const a=iM(e.value,s.value);return a.valid?((uT(e)||uT(s))&&t.dirty(),{status:t.value,value:a.data}):(rT(n,{code:tT.invalid_intersection_types}),oT)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>s(e,t)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}oM.create=(e,t,n)=>new oM({left:e,right:t,typeName:NM.ZodIntersection,...vT(n)});class lM extends yT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==JA.array)return rT(n,{code:tT.invalid_type,expected:JA.array,received:n.parsedType}),oT;if(n.data.length<this._def.items.length)return rT(n,{code:tT.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),oT;!this._def.rest&&n.data.length>this._def.items.length&&(rT(n,{code:tT.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new gT(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(s).then(e=>iT.mergeArray(t,e)):iT.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new lM({...this._def,rest:e})}}lM.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lM({items:e,typeName:NM.ZodTuple,rest:null,...vT(t)})};class cM extends yT{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==JA.map)return rT(n,{code:tT.invalid_type,expected:JA.map,received:n.parsedType}),oT;const s=this._def.keyType,a=this._def.valueType,r=[...n.data.entries()].map(([e,t],r)=>({key:s._parse(new gT(n,e,n.path,[r,"key"])),value:a._parse(new gT(n,t,n.path,[r,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of r){const s=await n.key,a=await n.value;if("aborted"===s.status||"aborted"===a.status)return oT;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of r){const s=n.key,a=n.value;if("aborted"===s.status||"aborted"===a.status)return oT;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}}}cM.create=(e,t,n)=>new cM({valueType:t,keyType:e,typeName:NM.ZodMap,...vT(n)});class dM extends yT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==JA.set)return rT(n,{code:tT.invalid_type,expected:JA.set,received:n.parsedType}),oT;const s=this._def;null!==s.minSize&&n.data.size<s.minSize.value&&(rT(n,{code:tT.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&n.data.size>s.maxSize.value&&(rT(n,{code:tT.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function r(e){const n=new Set;for(const s of e){if("aborted"===s.status)return oT;"dirty"===s.status&&t.dirty(),n.add(s.value)}return{status:t.value,value:n}}const i=[...n.data.values()].map((e,t)=>a._parse(new gT(n,e,n.path,t)));return n.common.async?Promise.all(i).then(e=>r(e)):r(i)}min(e,t){return new dM({...this._def,minSize:{value:e,message:pT.toString(t)}})}max(e,t){return new dM({...this._def,maxSize:{value:e,message:pT.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}dM.create=(e,t)=>new dM({valueType:e,minSize:null,maxSize:null,typeName:NM.ZodSet,...vT(t)});class uM extends yT{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}uM.create=(e,t)=>new uM({getter:e,typeName:NM.ZodLazy,...vT(t)});class hM extends yT{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return rT(t,{received:t.data,code:tT.invalid_literal,expected:this._def.value}),oT}return{status:"valid",value:e.data}}get value(){return this._def.value}}function mM(e,t){return new pM({values:e,typeName:NM.ZodEnum,...vT(t)})}hM.create=(e,t)=>new hM({value:e,typeName:NM.ZodLiteral,...vT(t)});class pM extends yT{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return rT(t,{expected:YA.joinValues(n),received:t.parsedType,code:tT.invalid_type}),oT}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return rT(t,{received:t.data,code:tT.invalid_enum_value,options:n}),oT}return cT(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return pM.create(e,{...this._def,...t})}exclude(e,t=this._def){return pM.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}pM.create=mM;class fM extends yT{_parse(e){const t=YA.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==JA.string&&n.parsedType!==JA.number){const e=YA.objectValues(t);return rT(n,{expected:YA.joinValues(e),received:n.parsedType,code:tT.invalid_type}),oT}if(this._cache||(this._cache=new Set(YA.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=YA.objectValues(t);return rT(n,{received:n.data,code:tT.invalid_enum_value,options:e}),oT}return cT(e.data)}get enum(){return this._def.values}}fM.create=(e,t)=>new fM({values:e,typeName:NM.ZodNativeEnum,...vT(t)});class gM extends yT{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==JA.promise&&!1===t.common.async)return rT(t,{code:tT.invalid_type,expected:JA.promise,received:t.parsedType}),oT;const n=t.parsedType===JA.promise?t.data:Promise.resolve(t.data);return cT(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}gM.create=(e,t)=>new gM({type:e,typeName:NM.ZodPromise,...vT(t)});class xM extends yT{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===NM.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:e=>{rT(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===s.type){const e=s.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return oT;const s=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===s.status?oT:"dirty"===s.status||"dirty"===t.value?lT(s.value):s});{if("aborted"===t.value)return oT;const s=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===s.status?oT:"dirty"===s.status||"dirty"===t.value?lT(s.value):s}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===s.status?oT:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?oT:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===s.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!hT(e))return oT;const r=s.transform(e.value,a);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>hT(e)?Promise.resolve(s.transform(e.value,a)).then(e=>({status:t.value,value:e})):oT)}YA.assertNever(s)}}xM.create=(e,t,n)=>new xM({schema:e,typeName:NM.ZodEffects,effect:t,...vT(n)}),xM.createWithPreprocess=(e,t,n)=>new xM({schema:t,effect:{type:"preprocess",transform:e},typeName:NM.ZodEffects,...vT(n)});class vM extends yT{_parse(e){return this._getType(e)===JA.undefined?cT(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vM.create=(e,t)=>new vM({innerType:e,typeName:NM.ZodOptional,...vT(t)});class yM extends yT{_parse(e){return this._getType(e)===JA.null?cT(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yM.create=(e,t)=>new yM({innerType:e,typeName:NM.ZodNullable,...vT(t)});class bM extends yT{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===JA.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}bM.create=(e,t)=>new bM({innerType:e,typeName:NM.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...vT(t)});class wM extends yT{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return mT(s)?s.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new nT(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new nT(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}wM.create=(e,t)=>new wM({innerType:e,typeName:NM.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...vT(t)});class SM extends yT{_parse(e){if(this._getType(e)!==JA.nan){const t=this._getOrReturnCtx(e);return rT(t,{code:tT.invalid_type,expected:JA.nan,received:t.parsedType}),oT}return{status:"valid",value:e.data}}}SM.create=e=>new SM({typeName:NM.ZodNaN,...vT(e)});class jM extends yT{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class CM extends yT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?oT:"dirty"===e.status?(t.dirty(),lT(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?oT:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new CM({in:e,out:t,typeName:NM.ZodPipeline})}}class kM extends yT{_parse(e){const t=this._def.innerType._parse(e),n=e=>(hT(e)&&(e.value=Object.freeze(e.value)),e);return mT(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}var NM,_M;kM.create=(e,t)=>new kM({innerType:e,typeName:NM.ZodReadonly,...vT(t)}),(_M=NM||(NM={})).ZodString="ZodString",_M.ZodNumber="ZodNumber",_M.ZodNaN="ZodNaN",_M.ZodBigInt="ZodBigInt",_M.ZodBoolean="ZodBoolean",_M.ZodDate="ZodDate",_M.ZodSymbol="ZodSymbol",_M.ZodUndefined="ZodUndefined",_M.ZodNull="ZodNull",_M.ZodAny="ZodAny",_M.ZodUnknown="ZodUnknown",_M.ZodNever="ZodNever",_M.ZodVoid="ZodVoid",_M.ZodArray="ZodArray",_M.ZodObject="ZodObject",_M.ZodUnion="ZodUnion",_M.ZodDiscriminatedUnion="ZodDiscriminatedUnion",_M.ZodIntersection="ZodIntersection",_M.ZodTuple="ZodTuple",_M.ZodRecord="ZodRecord",_M.ZodMap="ZodMap",_M.ZodSet="ZodSet",_M.ZodFunction="ZodFunction",_M.ZodLazy="ZodLazy",_M.ZodLiteral="ZodLiteral",_M.ZodEnum="ZodEnum",_M.ZodEffects="ZodEffects",_M.ZodNativeEnum="ZodNativeEnum",_M.ZodOptional="ZodOptional",_M.ZodNullable="ZodNullable",_M.ZodDefault="ZodDefault",_M.ZodCatch="ZodCatch",_M.ZodPromise="ZodPromise",_M.ZodBranded="ZodBranded",_M.ZodPipeline="ZodPipeline",_M.ZodReadonly="ZodReadonly";const PM=VT.create,EM=HT.create;GT.create;const RM=KT.create;WT.create,eM.create,nM.create;const AM=aM.create;rM.create,oM.create,lM.create;const TM=hM.create;pM.create;const MM=fM.create;gM.create,vM.create,yM.create;const DM=e=>HT.create({...e,coerce:!0}),LM=["United States","United Kingdom","Canada","Australia","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Portugal","Greece","Ireland","Japan","China","India","South Korea","Singapore","Malaysia","Thailand","Indonesia","Philippines","Vietnam","Brazil","Mexico","Argentina","Chile","Colombia","Peru","South Africa","Egypt","Nigeria","Kenya","United Arab Emirates","Saudi Arabia","Israel","Turkey","Russia","Ukraine","Czech Republic","Hungary","Romania","Bulgaria","New Zealand","Other"],FM=AM({name:PM().optional(),street:PM().optional(),city:PM().optional(),state:PM().optional(),postal_code:PM().optional(),country:PM().optional(),address_type:PM().optional(),is_default:RM(),notes:PM().optional()});function IM({onSubmit:e,defaultValues:t,defaultAddressType:n,addressTypes:s,addressTypeLabels:a,onCancel:r}){const i=!!t,{register:o,handleSubmit:l,control:d,watch:u,formState:{errors:h,isSubmitting:m}}=uA({resolver:QA(FM),defaultValues:{name:t?.name??"",street:t?.street??"",city:t?.city??"",state:t?.state??"",postal_code:t?.postal_code??"",country:t?.country??"",address_type:t?.address_type||n||s[0],is_default:t?.is_default??!1,notes:t?.notes??""}}),p=u("address_type"),f=e=>a?.[e]||e.charAt(0).toUpperCase()+e.slice(1);return c.jsxs("form",{onSubmit:l(async t=>{if(!i&&!t.address_type)return;const n={name:t.name?.trim()||void 0,street:t.street?.trim()||void 0,city:t.city?.trim()||void 0,state:t.state?.trim()||void 0,postal_code:t.postal_code?.trim()||void 0,country:t.country?.trim()||void 0,address_type:t.address_type,is_default:t.is_default,notes:t.notes?.trim()||void 0};await e(n)}),className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs(El,{"data-invalid":!!h.name,children:[c.jsx(Rl,{htmlFor:"name",children:"Address Name"}),c.jsx(kl,{id:"name",...o("name"),placeholder:"e.g., Main Office, Warehouse, Headquarters",disabled:m,className:al(h.name&&"border-destructive")}),h.name?c.jsx(Al,{children:h.name.message}):c.jsx(Al,{className:"text-xs text-muted-foreground",children:"Optional: A descriptive name to identify this address"})]}),!i&&c.jsxs(El,{"data-invalid":!!h.address_type,children:[c.jsx(Rl,{htmlFor:"address_type",children:"Address Type"}),c.jsx(vR,{name:"address_type",control:d,render:({field:e})=>c.jsxs(ox,{value:e.value,onValueChange:e.onChange,disabled:m,children:[c.jsx(cx,{id:"address_type",className:al(h.address_type&&"border-destructive"),children:c.jsx(lx,{})}),c.jsx(hx,{children:s.map(e=>c.jsx(mx,{value:e,children:f(e)},e))})]})}),h.address_type&&c.jsx(Al,{children:h.address_type.message})]}),c.jsxs(El,{className:"md:col-span-2","data-invalid":!!h.street,children:[c.jsx(Rl,{htmlFor:"street",children:"Street Address"}),c.jsx(kl,{id:"street",...o("street"),placeholder:"Enter street address",disabled:m,className:al(h.street&&"border-destructive")}),h.street&&c.jsx(Al,{children:h.street.message})]}),c.jsxs(El,{"data-invalid":!!h.city,children:[c.jsx(Rl,{htmlFor:"city",children:"City"}),c.jsx(kl,{id:"city",...o("city"),placeholder:"Enter city",disabled:m,className:al(h.city&&"border-destructive")}),h.city&&c.jsx(Al,{children:h.city.message})]}),c.jsxs(El,{"data-invalid":!!h.state,children:[c.jsx(Rl,{htmlFor:"state",children:"State/Province"}),c.jsx(kl,{id:"state",...o("state"),placeholder:"Enter state or province",disabled:m,className:al(h.state&&"border-destructive")}),h.state&&c.jsx(Al,{children:h.state.message})]}),c.jsxs(El,{"data-invalid":!!h.postal_code,children:[c.jsx(Rl,{htmlFor:"postal_code",children:"Postal Code"}),c.jsx(kl,{id:"postal_code",...o("postal_code"),placeholder:"Enter postal code",disabled:m,className:al(h.postal_code&&"border-destructive")}),h.postal_code&&c.jsx(Al,{children:h.postal_code.message})]}),c.jsxs(El,{"data-invalid":!!h.country,children:[c.jsx(Rl,{htmlFor:"country",children:"Country"}),c.jsx(vR,{name:"country",control:d,render:({field:e})=>c.jsxs(ox,{value:e.value||void 0,onValueChange:t=>e.onChange(t||""),disabled:m,children:[c.jsx(cx,{id:"country",className:al(h.country&&"border-destructive"),children:c.jsx(lx,{placeholder:"Select country"})}),c.jsx(hx,{children:LM.map(e=>c.jsx(mx,{value:e,children:e},e))})]})}),h.country&&c.jsx(Al,{children:h.country.message})]}),c.jsx(El,{children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(vR,{name:"is_default",control:d,render:({field:e})=>c.jsx(RC,{id:"is_default",checked:e.value,onCheckedChange:t=>e.onChange("indeterminate"!==t&&t),disabled:m})}),c.jsxs(Rl,{htmlFor:"is_default",className:"cursor-pointer",children:["Set as default"," ",p?f(p):""," address"]})]})})]}),c.jsxs(El,{"data-invalid":!!h.notes,children:[c.jsx(Rl,{htmlFor:"notes",children:"Notes"}),c.jsx(Tl,{id:"notes",...o("notes"),placeholder:"Additional notes (optional)",rows:3,disabled:m,className:al(h.notes&&"border-destructive")}),h.notes&&c.jsx(Al,{children:h.notes.message})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx(vl,{type:"button",variant:"outline",onClick:r,disabled:m,children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:m,children:m?"Saving...":i?"Update Address":"Add Address"})]})]})}function OM(e){const t=[];return e.street&&t.push(e.street),e.city&&t.push(e.city),e.state&&t.push(e.state),e.postal_code&&t.push(e.postal_code),e.country&&t.push(e.country),t.length>0?t.join(", "):"No address details"}function zM({address:e,formatAddressTypeLabel:t,onEdit:n,onDelete:s,onSetDefault:a}){return c.jsx(bl,{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(mC,{variant:e.is_default?"default":"secondary",children:(r=e.address_type,t?t(r):r.charAt(0).toUpperCase()+r.slice(1))}),e.is_default&&c.jsxs(mC,{variant:"outline",className:"flex items-center gap-1",children:[c.jsx(Lg,{className:"h-3 w-3"}),"Default"]})]}),e.name&&c.jsx("p",{className:"text-sm font-semibold mb-1",children:e.name}),c.jsx("p",{className:"text-sm",children:OM(e)}),e.notes&&c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e.notes})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!e.is_default&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:a,title:"Set as default",children:c.jsx(Dg,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"ghost",size:"sm",onClick:n,title:"Edit",children:c.jsx(Tg,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"ghost",size:"sm",onClick:s,disabled:e.is_default,title:e.is_default?"Cannot delete default address":"Delete",children:c.jsx(Hg,{className:"h-4 w-4"})})]})]})});var r}function BM({entityId:e,service:t,config:n,onAddressesChanged:s,addDialogOpen:a,onAddDialogOpenChange:r}){const[i,o]=p.useState([]),[l,d]=p.useState(!1),[u,h]=p.useState(!1),m=a??u,f=r??h,[g,x]=p.useState(!1),[v,y]=p.useState(!1),[b,w]=p.useState(null),[S,j]=p.useState(null),{toast:C}=Rk(),k=e=>n.getAddressId?n.getAddressId(e):e.id,N=e=>n.formatAddressTypeLabel?n.formatAddressTypeLabel(e):n.addressTypeLabels?.[e]||e.charAt(0).toUpperCase()+e.slice(1),_=async()=>{d(!0);try{const n=await t.listAddresses(e);o(n)}catch(n){C({title:"Error",description:n instanceof Error?n.message:"Failed to load addresses",variant:"destructive"})}finally{d(!1)}};p.useEffect(()=>{e&&_()},[e]);const P=n.addressTypes.reduce((e,t)=>(e[t]=i.filter(e=>e.address_type===t),e),{}),E=n.defaultAddressType||n.addressTypes[0],R=n.entityLabel||"entity";return c.jsxs("div",{className:"space-y-6",children:[c.jsx(Zy,{open:m,onOpenChange:f,children:c.jsxs(tb,{className:"max-w-2xl",children:[c.jsx(nb,{children:c.jsxs(ab,{children:["Add ",N(E)," Address"]})}),c.jsx(IM,{onSubmit:async n=>{try{if(!("address_type"in n)||!n.address_type)throw new Error("Address type is required");await t.createAddress(e,n),C({title:"Success",description:"Address added successfully"}),f(!1),await _(),s?.()}catch(a){throw C({title:"Error",description:a instanceof Error?a.message:"Failed to add address",variant:"destructive"}),a}},defaultAddressType:E,addressTypes:n.addressTypes,addressTypeLabels:n.addressTypeLabels,onCancel:()=>f(!1)})]})}),l?c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading addresses..."}):0===i.length?c.jsx(bl,{className:"p-6",children:c.jsxs("div",{className:"text-center text-muted-foreground",children:["No addresses found. Add a"," ",N(E).toLowerCase()," address to get started."]})}):c.jsx("div",{className:"space-y-6",children:n.addressTypes.map(n=>{const a=P[n];return 0===a.length?null:c.jsxs("div",{children:[c.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:[N(n)," Addresses"]}),c.jsx("div",{className:"space-y-3",children:a.map(n=>c.jsx(zM,{address:n,formatAddressTypeLabel:N,onEdit:()=>{j(n),x(!0)},onDelete:()=>{var e;(e=n).is_default?C({title:"Cannot Delete",description:"Default addresses cannot be deleted. Please set another address as default first, or edit this address instead.",variant:"destructive"}):(w(e),y(!0))},onSetDefault:()=>(async n=>{try{await t.setDefaultAddress(e,n),C({title:"Success",description:"Default address updated successfully"}),await _(),s?.()}catch(a){C({title:"Error",description:a instanceof Error?a.message:"Failed to set default address",variant:"destructive"})}})(k(n))},k(n)))})]},n)})}),S&&c.jsx(Zy,{open:g,onOpenChange:e=>{x(e),e||j(null)},children:c.jsxs(tb,{className:"max-w-2xl",children:[c.jsx(nb,{children:c.jsx(ab,{children:"Edit Address"})}),c.jsx(IM,{onSubmit:n=>(async(n,a)=>{try{await t.updateAddress(e,n,a),C({title:"Success",description:"Address updated successfully"}),x(!1),j(null),await _(),s?.()}catch(r){throw C({title:"Error",description:r instanceof Error?r.message:"Failed to update address",variant:"destructive"}),r}})(k(S),n),defaultValues:{name:S.name,street:S.street,city:S.city,state:S.state,postal_code:S.postal_code,country:S.country,address_type:S.address_type,is_default:S.is_default,notes:S.notes||void 0},addressTypes:n.addressTypes,addressTypeLabels:n.addressTypeLabels,onCancel:()=>{x(!1),j(null)}})]})}),c.jsx(jE,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:"Delete Address",description:b?c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{children:"Are you sure you want to delete this address?"}),b.name&&c.jsx("p",{className:"text-sm font-semibold",children:b.name}),c.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:OM(b)}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:["This action cannot be undone. The address will be removed from this ",R,"."]})]}):void 0,confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(b)try{await t.deleteAddress(e,k(b)),C({title:"Success",description:"Address deleted successfully"}),y(!1),w(null),await _(),s?.()}catch(n){C({title:"Error",description:n instanceof Error?n.message:"Failed to delete address",variant:"destructive"})}}},cancelAction:{label:"Cancel",onClick:()=>{y(!1),w(null)}}})]})}const $M=p.forwardRef(({className:e,variant:t="default",children:n,...s},a)=>c.jsx(ay,{ref:a,className:al("underline"===t?"inline-flex h-auto items-center gap-4 border-b border-border mb-4 bg-transparent p-0":"inline-flex h-auto gap-1 bg-muted/30 p-1 mb-2 rounded-lg border",e),...s,children:n}));$M.displayName="CustomTabsList";const UM=p.forwardRef(({className:e,variant:t="default",icon:n,children:s,...a},r)=>{const i=c.jsxs("span",{className:"flex items-center gap-2",children:[n&&c.jsx(n,{className:"h-4 w-4"}),s]});return"underline"===t?c.jsx(ry,{ref:r,className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","border-transparent text-muted-foreground hover:text-foreground","data-[state=active]:border-primary data-[state=active]:text-primary","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",e),...a,children:i}):c.jsx(ry,{ref:r,className:al("h-7 px-3 text-xs font-medium rounded-md bg-transparent text-muted-foreground transition-all","hover:text-foreground hover:bg-muted/50","data-[state=active]:bg-muted data-[state=active]:text-foreground data-[state=active]:shadow-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",e),...a,children:i})});UM.displayName="CustomTabsTrigger";const VM=p.forwardRef(({className:e,children:t,...n},s)=>c.jsx(iy,{ref:s,className:al("mt-0 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n,children:t}));function qM({defaultValue:e,value:t,onValueChange:n,items:s,variant:a="default",className:r,listClassName:i,triggerClassName:o,contentClassName:l,children:d}){const u=void 0!==t?{value:t,onValueChange:n,className:r}:{defaultValue:e,onValueChange:n,className:r};return c.jsx(sy,{...u,children:s?c.jsxs(c.Fragment,{children:[c.jsx($M,{variant:a,className:i,children:s.map(e=>c.jsx(UM,{value:e.value,variant:a,icon:e.icon,disabled:e.disabled,className:o,children:e.label},e.value))}),s.map(e=>c.jsx(VM,{value:e.value,className:l,children:e.content},e.value))]}):d})}function HM({tabs:e,defaultValue:t,value:n,onValueChange:s,className:a,tabClassName:r,contentClassName:i,children:o}){const[l,d]=p.useState(n||t||e[0]?.value||""),u=void 0!==n?n:l;return p.useEffect(()=>{void 0!==n&&n!==l&&d(n)},[n,l]),c.jsxs("div",{className:al("",a),children:[c.jsx("div",{className:"border-b mb-4",children:c.jsx("div",{className:"flex gap-4",children:e.map(e=>{const t=e.icon,a=u===e.value;return c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors",a?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground",e.disabled&&"pointer-events-none opacity-50",r),onClick:()=>{return!e.disabled&&(t=e.value,void 0===n&&d(t),void s?.(t));var t},disabled:e.disabled,children:c.jsxs("span",{className:"flex items-center gap-2",children:[t&&c.jsx(t,{className:"h-4 w-4"}),e.label]})},e.value)})})}),c.jsx("div",{className:al("mt-0",i),children:o?.(u)})]})}function GM(e,t){let n=e.tabs.find(e=>e.path===t||e.path===t+"/");return n||(n=e.tabs.find(e=>{if(!e.path.includes("$"))return!1;const n=e.path.replace(/\$[^/]+/g,"[^/]+");return new RegExp(`^${n}$`).test(t)}),n||null)}function KM({title:e,className:t,children:n,showBorder:s=!1}){return c.jsxs("div",{className:al(s&&"pt-2 border-t",t),children:[e&&c.jsx("h4",{className:"text-sm font-medium mb-3",children:e}),n]})}function WM({label:e,value:t,render:n,preserveWhitespace:s=!1,linkType:a="none",dataType:r="auto",className:i,labelClassName:o,valueClassName:l,icon:d,span:u,hideIfEmpty:h=!0}){if(h&&null==t)return null;if(h&&"string"==typeof t&&""===t.trim())return null;const m=f.isValidElement(t);let p;p=n?n(t):m?t:function(e,t="auto"){if(null==e)return"N/A";if(e instanceof Date)return e.toLocaleString();if("string"===t||"email"===t||"phone"===t||"url"===t)return String(e||"");if("date"===t){if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}return String(e)}if("string"==typeof e){const n=e.trim();if(!n)return"N/A";if("auto"===t&&function(e){if(!e||e.length<6)return!1;if(/[\s\-\+\(\)]/.test(e))return!1;if(e.includes("@"))return!1;if(e.includes("://")||e.includes("www."))return!1;if(/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?)?$/.test(e))return!0;if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{4}$/.test(e))return!0;if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{4}$/.test(e))return!0;if(/^\d{1,2}:\d{2}(:\d{2})?$/.test(e))return!0;const t=e.toLowerCase();return!!["january","february","march","april","may","june","july","august","september","october","november","december","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].some(e=>t.includes(e))}(n)){const e=new Date(n);if(!Number.isNaN(e.getTime()))return e.toLocaleString()}return n}if("number"==typeof e||"boolean"==typeof e)return String(e);try{return JSON.stringify(e)}catch{return String(e)}}(t,r);const g="none"!==a&&!m&&"string"==typeof t&&""!==t.trim(),x="email"===a?`mailto:${t}`:"tel"===a?`tel:${t}`:"external"===a?t:void 0,v="external"===a?{target:"_blank",rel:"noopener noreferrer"}:{};return c.jsxs("div",{className:u,children:[e&&c.jsxs("dt",{className:al("text-sm font-medium flex items-center gap-1",o),children:[d&&c.jsx(d,{className:"h-3 w-3"}),e]}),c.jsx("dd",{className:al("mt-1 text-sm",!m&&!g&&"text-muted-foreground",s&&"whitespace-pre-wrap",l,i),children:g?c.jsx("a",{href:x,...v,className:"text-primary hover:underline",children:p}):p})]})}function QM({title:e,icon:t,columns:n=3,className:s,gridClassName:a,children:r,conditional:i=!0}){const o=f.Children.toArray(r).filter(e=>null!=e);if(i&&0===o.length)return null;const l={1:"grid gap-4 md:grid-cols-1",2:"grid gap-4 md:grid-cols-2",3:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",4:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"}[n];return c.jsxs("div",{className:s,children:[e&&c.jsxs("h3",{className:al("mb-4 text-sm font-medium text-muted-foreground uppercase tracking-wider",t&&"flex items-center gap-2"),children:[t&&c.jsx(t,{className:"h-4 w-4"}),e]}),c.jsx("div",{className:al(l,a),children:r})]})}function YM({value:e,onChange:t,onSave:n,isSaving:s=!1,disabled:a=!1,editable:r=!0,maxLength:i=2e3,label:o="Notes",description:l,placeholder:d="Enter notes...",rows:u=10,className:h}){const[m,f]=p.useState(!1);return c.jsxs(bl,{className:al("p-4",h),children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx(Dl,{className:"text-sm font-medium",children:o}),l&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l})]}),r&&c.jsx(vl,{type:"button",size:"sm",onClick:()=>f(!0),disabled:s||a,children:s?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Note"})]}),c.jsxs("div",{children:[c.jsx(Tl,{value:e,onChange:e=>t(e.target.value),placeholder:d,rows:u,maxLength:i,disabled:s||a||!r,className:"resize-none"}),c.jsxs("div",{className:"text-xs text-muted-foreground text-right mt-1",children:[e.length,"/",i," characters"]})]})]}),c.jsx(jE,{open:m,onOpenChange:f,title:"Save Note",description:"Are you sure you want to save changes to the note?",confirmAction:{label:"Save",onClick:()=>{n(),f(!1)}},cancelAction:{label:"Cancel",onClick:()=>f(!1)}})]})}function XM(){return XM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},XM.apply(null,arguments)}function ZM(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;n[s]=e[s]}return n}function JM(e){var t=p.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(e){n[e]=function(){var n;return(n=t.fn[e]).call.apply(n,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function eD(e){return p.useReducer(function(e,t){return XM({},e,"function"==typeof t?t(e):t)},e)}VM.displayName="CustomTabsContent";var tD=p.createContext(void 0),nD="cubic-bezier(0.25, 0.8, 0.25, 1)",sD=20,aD="undefined"!=typeof window&&"ontouchstart"in window,rD=function(e,t,n){return Math.max(Math.min(e,n),t)},iD=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),rD(e,1*(1-n),Math.max(6,t)*(1+n))},oD="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?p.useEffect:p.useLayoutEffect;function lD(e,t,n){var s=p.useRef(t);s.current=t,p.useEffect(function(){function t(e){s.current(e)}return e&&window.addEventListener(e,t,n),function(){e&&window.removeEventListener(e,t)}},[e])}var cD=["container"];function dD(e){var t=e.container,n=void 0===t?document.body:t,s=ZM(e,cD);return Zt.createPortal(f.createElement("div",XM({},s)),n)}function uD(e){return f.createElement("svg",XM({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function hD(e){return f.createElement("svg",XM({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function mD(e){return f.createElement("svg",XM({width:"44",height:"44",viewBox:"0 0 768 768"},e),f.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function pD(){return p.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function fD(e){var t=e.touches[0],n=t.clientX,s=t.clientY;if(e.touches.length>=2){var a=e.touches[1],r=a.clientX,i=a.clientY;return[(n+r)/2,(s+i)/2,Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2))]}return[n,s,0]}var gD=function(e,t,n,s){var a,r=n*t,i=(r-s)/2,o=e;return r<=s?(a=1,o=0):e>0&&i-e<=0?(a=2,o=i):e<0&&i+e<=0&&(a=3,o=-i),[a,o]};function xD(e,t,n,s,a,r,i,o,l,c){void 0===i&&(i=innerWidth/2),void 0===o&&(o=innerHeight/2),void 0===l&&(l=0),void 0===c&&(c=0);var d=gD(e,r,n,innerWidth)[0],u=gD(t,r,s,innerHeight),h=innerWidth/2,m=innerHeight/2;return{x:i-r/a*(i-(h+e))-h+(s/n>=3&&n*r===innerWidth?0:d?l/2:l),y:o-r/a*(o-(m+t))-m+(u[0]?c/2:c),lastCX:i,lastCY:o}}function vD(e,t,n){var s=e%180!=0;return s?[n,t,s]:[t,n,s]}function yD(e,t,n){var s=vD(n,innerWidth,innerHeight),a=s[0],r=s[1],i=0,o=a,l=r,c=e/t*r,d=t/e*a;return e<a&&t<r?(o=e,l=t):e<a&&t>=r?o=c:e>=a&&t<r||e/t>a/r?l=d:t/e>=3&&!s[2]?i=((l=d)-r)/2:o=c,{width:o,height:l,x:0,y:i,pause:!0}}function bD(e,t){var n=t.leading,s=void 0!==n&&n,a=t.maxWait,r=t.wait,i=void 0===r?a||0:r,o=p.useRef(e);o.current=e;var l=p.useRef(0),c=p.useRef(),d=function(){return c.current&&clearTimeout(c.current)},u=p.useCallback(function(){var e=[].slice.call(arguments),t=Date.now();function n(){l.current=t,d(),o.current.apply(null,e)}var r=l.current,u=t-r;if(0===r&&(s&&n(),l.current=t),void 0!==a){if(u>a)return void n()}else u<i&&(l.current=t);d(),c.current=setTimeout(function(){n(),l.current=0},i)},[i,a,s]);return u.cancel=d,u}var wD=function(e,t,n){return jD(e,t,n,100,function(e){return e},function(){return jD(t,e,n)})},SD=function(e){return 1-Math.pow(1-e,4)};function jD(e,t,n,s,a,r){void 0===s&&(s=400),void 0===a&&(a=SD);var i=t-e;if(0!==i){var o=Date.now(),l=0,c=function(){var t=Math.min(1,(Date.now()-o)/s);n(e+a(t)*i)&&t<1?d():(cancelAnimationFrame(l),t>=1&&r&&r())};d()}function d(){l=requestAnimationFrame(c)}}var CD={T:0,L:0,W:0,H:0,FIT:void 0},kD=function(){var e=p.useRef(!1);return p.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},ND=["className"];function _D(e){var t=e.className,n=void 0===t?"":t,s=ZM(e,ND);return f.createElement("div",XM({className:"PhotoView__Spinner "+n},s),f.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},f.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),f.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var PD=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function ED(e){var t=e.src,n=e.loaded,s=e.broken,a=e.className,r=e.onPhotoLoad,i=e.loadingElement,o=e.brokenElement,l=ZM(e,PD),c=kD();return t&&!s?f.createElement(f.Fragment,null,f.createElement("img",XM({className:"PhotoView__Photo"+(a?" "+a:""),src:t,onLoad:function(e){var t=e.target;c.current&&r({loaded:!0,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight})},onError:function(){c.current&&r({broken:!0})},draggable:!1,alt:""},l)),!n&&(i?f.createElement("span",{className:"PhotoView__icon"},i):f.createElement(_D,{className:"PhotoView__icon"}))):o?f.createElement("span",{className:"PhotoView__icon"},"function"==typeof o?o({src:t}):o):null}var RD={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function AD(e){var t=e.item,n=t.src,s=t.render,a=t.width,r=void 0===a?0:a,i=t.height,o=void 0===i?0:i,l=t.originRef,c=e.visible,d=e.speed,u=e.easing,h=e.wrapClassName,m=e.className,g=e.style,x=e.loadingElement,v=e.brokenElement,y=e.onPhotoTap,b=e.onMaskTap,w=e.onReachMove,S=e.onReachUp,j=e.onPhotoResize,C=e.isActive,k=e.expose,N=eD(RD),_=N[0],P=N[1],E=p.useRef(0),R=kD(),A=_.naturalWidth,T=void 0===A?r:A,M=_.naturalHeight,D=void 0===M?o:M,L=_.width,F=void 0===L?r:L,I=_.height,O=void 0===I?o:I,z=_.loaded,B=void 0===z?!n:z,$=_.broken,U=_.x,V=_.y,q=_.touched,H=_.stopRaf,G=_.maskTouched,K=_.rotate,W=_.scale,Q=_.CX,Y=_.CY,X=_.lastX,Z=_.lastY,J=_.lastCX,ee=_.lastCY,te=_.lastScale,ne=_.touchTime,se=_.touchLength,ae=_.pause,re=_.reach,ie=JM({onScale:function(e){return oe(iD(e))},onRotate:function(e){K!==e&&(k({rotate:e}),P(XM({rotate:e},yD(T,D,e))))}});function oe(e,t,n){W!==e&&(k({scale:e}),P(XM({scale:e},xD(U,V,F,O,W,e,t,n),e<=1&&{x:0,y:0})))}var le=bD(function(e,t,n){if(void 0===n&&(n=0),(q||G)&&C){var s=vD(K,F,O),a=s[0],r=s[1];if(0===n&&0===E.current){var i=Math.abs(e-Q)<=20,o=Math.abs(t-Y)<=20;if(i&&o)return void P({lastCX:e,lastCY:t});E.current=i?t>Y?3:2:1}var l,c=e-J,d=t-ee;if(0===n){var u=gD(c+X,W,a,innerWidth)[0],h=gD(d+Z,W,r,innerHeight);p=E.current,f=u,g=h[0],x=re,void 0!==(l=f&&1===p||"x"===x?"x":g&&p>1||"y"===x?"y":void 0)&&w(l,e,t,W)}if("x"===l||G)return void P({reach:"x"});var m=iD(W+(n-se)/100/2*W,T/F,.2);k({scale:m}),P(XM({touchLength:n,reach:l,scale:m},xD(U,V,F,O,W,m,e,t,c,d)))}var p,f,g,x},{maxWait:8});function ce(e){return!H&&!q&&(R.current&&P(XM({},e,{pause:c})),R.current)}var de,ue,he,me,pe,fe,ge,xe,ve=(pe=function(e){return ce({x:e})},fe=function(e){return ce({y:e})},ge=function(e){return R.current&&(k({scale:e}),P({scale:e})),!q&&R.current},xe=JM({X:function(e){return pe(e)},Y:function(e){return fe(e)},S:function(e){return ge(e)}}),function(e,t,n,s,a,r,i,o,l,c,d){var u=vD(c,a,r),h=u[0],m=u[1],p=gD(e,o,h,innerWidth),f=p[0],g=p[1],x=gD(t,o,m,innerHeight),v=x[0],y=x[1],b=Date.now()-d;if(b>=200||o!==i||Math.abs(l-i)>1){var w=xD(e,t,a,r,i,o),S=w.x,j=w.y,C=f?g:S!==e?S:null,k=v?y:j!==t?j:null;return null!==C&&jD(e,C,xe.X),null!==k&&jD(t,k,xe.Y),void(o!==i&&jD(i,o,xe.S))}var N=(e-n)/b,_=(t-s)/b,P=Math.sqrt(Math.pow(N,2)+Math.pow(_,2)),E=!1,R=!1;!function(n){var s,a=n,r=0,o=0,l=function(o){s||(s=o);var l=o-s,u=Math.sign(n),p=-.001*u,g=Math.sign(-a)*Math.pow(a,2)*2e-4,x=a*l+(p+g)*Math.pow(l,2)/2;r+=x,s=o,u*(a+=(p+g)*l)<=0?d():function(n){var s=e+n*(N/P),a=t+n*(_/P),r=gD(s,i,h,innerWidth),o=r[0],l=r[1],c=gD(a,i,m,innerHeight),d=c[0],u=c[1];if(o&&!E&&(E=!0,f?jD(s,l,xe.X):wD(l,s+(s-l),xe.X)),d&&!R&&(R=!0,v?jD(a,u,xe.Y):wD(u,a+(a-u),xe.Y)),E&&R)return!1;var p=E||xe.X(l),g=R||xe.Y(u);return p&&g}(r)?c():d()};function c(){o=requestAnimationFrame(l)}function d(){cancelAnimationFrame(o)}c()}(P)}),ye=(de=y,ue=function(e,t){re||oe(1!==W?1:Math.max(2,T/F),e,t)},he=p.useRef(0),me=bD(function(){he.current=0,de.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var e=[].slice.call(arguments);he.current+=1,me.apply(void 0,e),he.current>=2&&(me.cancel(),he.current=0,ue.apply(void 0,e))});function be(e,t){if(E.current=0,(q||G)&&C){P({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var n=iD(W,T/F);if(ve(U,V,X,Z,F,O,W,n,te,K,ne),S(e,t),Q===e&&Y===t){if(q)return void ye(e,t);G&&b(e,t)}}}function we(e,t,n){void 0===n&&(n=0),P({touched:!0,CX:e,CY:t,lastCX:e,lastCY:t,lastX:U,lastY:V,lastScale:W,touchLength:n,touchTime:Date.now()})}function Se(e){P({maskTouched:!0,CX:e.clientX,CY:e.clientY,lastX:U,lastY:V})}lD(aD?void 0:"mousemove",function(e){e.preventDefault(),le(e.clientX,e.clientY)}),lD(aD?void 0:"mouseup",function(e){be(e.clientX,e.clientY)}),lD(aD?"touchmove":void 0,function(e){e.preventDefault();var t=fD(e);le.apply(void 0,t)},{passive:!1}),lD(aD?"touchend":void 0,function(e){var t=e.changedTouches[0];be(t.clientX,t.clientY)},{passive:!1}),lD("resize",bD(function(){B&&!q&&(P(yD(T,D,K)),j())},{maxWait:8})),oD(function(){C&&k(XM({scale:W,rotate:K},ie))},[C]);var je,Ce,ke,Ne,_e,Pe,Ee,Re,Ae,Te,Me,De,Le,Fe,Ie,Oe,ze,Be,$e,Ue,Ve,qe,He,Ge,Ke,We,Qe,Ye,Xe,Ze,Je,et,tt,nt,st=(je=c,Ce=l,ke=B,Ne=U,_e=V,Te=function(e){return P({pause:e})},Me=Pe=F,De=Ee=O,Le=Re=W,Fe=Ae=d,Ie=Te,Oe=p.useRef(!1),ze=eD({lead:!0,scale:Le}),Be=ze[0],$e=Be.lead,Ue=Be.scale,Ve=ze[1],qe=bD(function(e){try{return Ie(!0),Ve({lead:!1,scale:e}),Promise.resolve()}catch(t){return Promise.reject(t)}},{wait:Fe}),oD(function(){Oe.current?(Ie(!1),Ve({lead:!0}),qe(Le)):Oe.current=!0},[Le]),Ge=(He=$e?[Me*Ue,De*Ue,Le/Ue]:[Me*Le,De*Le,1])[0],Ke=He[1],We=He[2],Qe=function(e,t,n,s,a){var r=p.useState(CD),i=r[0],o=r[1],l=p.useState(0),c=l[0],d=l[1],u=p.useRef(),h=JM({OK:function(){return e&&d(4)}});function m(e){a(!1),d(e)}return p.useEffect(function(){if(u.current||(u.current=Date.now()),n){if(function(e,t){var n=e&&e.current;if(n&&1===n.nodeType){var s=n.getBoundingClientRect();t({T:s.top,L:s.left,W:s.width,H:s.height,FIT:"IMG"===n.tagName?getComputedStyle(n).objectFit:void 0})}}(t,o),e)return Date.now()-u.current<250?(d(1),requestAnimationFrame(function(){d(2),requestAnimationFrame(function(){return m(3)})}),void setTimeout(h.OK,s)):void d(4);m(5)}},[e,n]),[c,i]}(je,Ce,ke,Ae,Te),Ye=Qe[0],Xe=Qe[1],Ze=Xe.W,Je=Xe.FIT,et=innerWidth/2,tt=innerHeight/2,[(nt=Ye<3||Ye>4)?Ze?Xe.L:et:Ne+(et-Pe*Re/2),nt?Ze?Xe.T:tt:_e+(tt-Ee*Re/2),Ge,nt&&Je?Ge*(Xe.H/Ze):Ke,0===Ye?We:nt?Ze/(Pe*Re)||.01:We,nt?Je?1:0:1,Ye,Je]),at=st[4],rt=st[6],it="transform "+d+"ms "+u,ot={className:m,onMouseDown:aD?void 0:function(e){e.stopPropagation(),0===e.button&&we(e.clientX,e.clientY,0)},onTouchStart:aD?function(e){e.stopPropagation(),we.apply(void 0,fD(e))}:void 0,onWheel:function(e){if(!re){var t=iD(W-e.deltaY/100/2,T/F);P({stopRaf:!0}),oe(t,e.clientX,e.clientY)}},style:{width:st[2]+"px",height:st[3]+"px",opacity:st[5],objectFit:4===rt?void 0:st[7],transform:K?"rotate("+K+"deg)":void 0,transition:rt>2?it+", opacity "+d+"ms ease, height "+(rt<4?d/2:rt>4?d:0)+"ms "+u:void 0}};return f.createElement("div",{className:"PhotoView__PhotoWrap"+(h?" "+h:""),style:g,onMouseDown:!aD&&C?Se:void 0,onTouchStart:aD&&C?function(e){return Se(e.touches[0])}:void 0},f.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+at+", 0, 0, "+at+", "+st[0]+", "+st[1]+")",transition:q||ae?void 0:it,willChange:C?"transform":void 0}},n?f.createElement(ED,XM({src:n,loaded:B,broken:$},ot,{onPhotoLoad:function(e){P(XM({},e,e.loaded&&yD(e.naturalWidth||0,e.naturalHeight||0,K)))},loadingElement:x,brokenElement:v})):s&&s({attrs:ot,scale:at,rotate:K})))}var TD={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function MD(e){var t,n,s,a,r,i,o=e.loop,l=void 0===o?3:o,c=e.speed,d=e.easing,u=e.photoClosable,h=e.maskClosable,m=void 0===h||h,g=e.maskOpacity,x=void 0===g?1:g,v=e.pullClosable,y=void 0===v||v,b=e.bannerVisible,w=void 0===b||b,S=e.overlayRender,j=e.toolbarRender,C=e.className,k=e.maskClassName,N=e.photoClassName,_=e.photoWrapClassName,P=e.loadingElement,E=e.brokenElement,R=e.images,A=e.index,T=void 0===A?0:A,M=e.onIndexChange,D=e.visible,L=e.onClose,F=e.afterClose,I=e.portalContainer,O=eD(TD),z=O[0],B=O[1],$=p.useState(0),U=$[0],V=$[1],q=z.x,H=z.touched,G=z.pause,K=z.lastCX,W=z.lastCY,Q=z.bg,Y=void 0===Q?x:Q,X=z.lastBg,Z=z.overlay,J=z.minimal,ee=z.scale,te=z.rotate,ne=z.onScale,se=z.onRotate,ae=e.hasOwnProperty("index"),re=ae?T:U,ie=ae?M:V,oe=p.useRef(re),le=R.length,ce=R[re],de="boolean"==typeof l?l:le>l,ue=(t=D,n=F,s=p.useReducer(function(e){return!e},!1)[1],a=p.useRef(0),r=function(e){var n=p.useRef(e);function s(e){n.current=e}return p.useMemo(function(){var e;e=s,t?(e(t),a.current=1):a.current=2},[e]),[n.current,s]}(t),i=r[1],[r[0],a.current,function(){s(),2===a.current&&(i(!1),n&&n()),a.current=0}]),he=ue[0],me=ue[1],pe=ue[2];oD(function(){if(he)return B({pause:!0,x:re*-(innerWidth+sD)}),void(oe.current=re);B(TD)},[he]);var fe=JM({close:function(e){se&&se(0),B({overlay:!0,lastBg:Y}),L(e)},changeIndex:function(e,t){void 0===t&&(t=!1);var n=de?oe.current+(e-re):e,s=le-1,a=rD(n,0,s),r=de?n:a,i=innerWidth+sD;B({touched:!1,lastCX:void 0,lastCY:void 0,x:-i*r,pause:t}),oe.current=r,ie&&ie(de?e<0?s:e>s?0:e:a)}}),ge=fe.close,xe=fe.changeIndex;function ve(e){return e?ge():B({overlay:!Z})}function ye(){B({x:-(innerWidth+sD)*re,lastCX:void 0,lastCY:void 0,pause:!0}),oe.current=re}function be(e,t,n,s){"x"===e?function(e){if(void 0!==K){var t=e-K,n=t;!de&&(0===re&&t>0||re===le-1&&t<0)&&(n=t/2),B({touched:!0,lastCX:K,x:-(innerWidth+sD)*oe.current+n,pause:!1})}else B({touched:!0,lastCX:e,x:q,pause:!1})}(t):"y"===e&&function(e,t){if(void 0!==W){var n=null===x?null:rD(x,.01,x-Math.abs(e-W)/100/4);B({touched:!0,lastCY:W,bg:1===t?n:x,minimal:1===t})}else B({touched:!0,lastCY:e,bg:Y,minimal:!0})}(n,s)}function we(e,t){var n=e-(null!=K?K:e),s=t-(null!=W?W:t),a=!1;if(n<-40)xe(re+1);else if(n>40)xe(re-1);else{var r=-(innerWidth+sD)*oe.current;Math.abs(s)>100&&J&&y&&(a=!0,ge()),B({touched:!1,x:r,lastCX:void 0,lastCY:void 0,bg:x,overlay:!!a||Z})}}lD("keydown",function(e){if(D)switch(e.key){case"ArrowLeft":xe(re-1,!0);break;case"ArrowRight":xe(re+1,!0);break;case"Escape":ge()}});var Se=function(e,t,n){return p.useMemo(function(){var s=e.length;return n?e.concat(e).concat(e).slice(s+t-1,s+t+2):e.slice(Math.max(t-1,0),Math.min(t+2,s+1))},[e,t,n])}(R,re,de);if(!he)return null;var je=Z&&!me,Ce=D?Y:X,ke=ne&&se&&{images:R,index:re,visible:D,onClose:ge,onIndexChange:xe,overlayVisible:je,overlay:ce&&ce.overlay,scale:ee,rotate:te,onScale:ne,onRotate:se},Ne=c?c(me):400,_e=d?d(me):nD,Pe=c?c(3):600,Ee=d?d(3):nD;return f.createElement(dD,{className:"PhotoView-Portal"+(je?"":" PhotoView-Slider__clean")+(D?"":" PhotoView-Slider__willClose")+(C?" "+C:""),role:"dialog",onClick:function(e){return e.stopPropagation()},container:I},D&&f.createElement(pD,null),f.createElement("div",{className:"PhotoView-Slider__Backdrop"+(k?" "+k:"")+(1===me?" PhotoView-Slider__fadeIn":2===me?" PhotoView-Slider__fadeOut":""),style:{background:Ce?"rgba(0, 0, 0, "+Ce+")":void 0,transitionTimingFunction:_e,transitionDuration:(H?0:Ne)+"ms",animationDuration:Ne+"ms"},onAnimationEnd:pe}),w&&f.createElement("div",{className:"PhotoView-Slider__BannerWrap"},f.createElement("div",{className:"PhotoView-Slider__Counter"},re+1," / ",le),f.createElement("div",{className:"PhotoView-Slider__BannerRight"},j&&ke&&j(ke),f.createElement(uD,{className:"PhotoView-Slider__toolbarIcon",onClick:ge}))),Se.map(function(e,t){var n=de||0!==re?oe.current-1+t:re+t;return f.createElement(AD,{key:de?e.key+"/"+e.src+"/"+n:e.key,item:e,speed:Ne,easing:_e,visible:D,onReachMove:be,onReachUp:we,onPhotoTap:function(){return ve(u)},onMaskTap:function(){return ve(m)},wrapClassName:_,className:N,style:{left:(innerWidth+sD)*n+"px",transform:"translate3d("+q+"px, 0px, 0)",transition:H||G?void 0:"transform "+Pe+"ms "+Ee},loadingElement:P,brokenElement:E,onPhotoResize:ye,isActive:oe.current===n,expose:B})}),!aD&&w&&f.createElement(f.Fragment,null,(de||0!==re)&&f.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return xe(re-1,!0)}},f.createElement(hD,null)),(de||re+1<le)&&f.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return xe(re+1,!0)}},f.createElement(mD,null))),S&&ke&&f.createElement("div",{className:"PhotoView-Slider__Overlay"},S(ke)))}var DD=["children","onIndexChange","onVisibleChange"],LD={images:[],visible:!1,index:0};function FD(e){var t=e.children,n=e.onIndexChange,s=e.onVisibleChange,a=ZM(e,DD),r=eD(LD),i=r[0],o=r[1],l=p.useRef(0),c=i.images,d=i.visible,u=i.index,h=JM({nextId:function(){return l.current+=1},update:function(e){var t=c.findIndex(function(t){return t.key===e.key});if(t>-1){var n=c.slice();return n.splice(t,1,e),void o({images:n})}o(function(t){return{images:t.images.concat(e)}})},remove:function(e){o(function(t){var n=t.images.filter(function(t){return t.key!==e});return{images:n,index:Math.min(n.length-1,u)}})},show:function(e){var t=c.findIndex(function(t){return t.key===e});o({visible:!0,index:t}),s&&s(!0,t,i)}}),m=JM({close:function(){o({visible:!1}),s&&s(!1,u,i)},changeIndex:function(e){o({index:e}),n&&n(e,i)}}),g=p.useMemo(function(){return XM({},i,h)},[i,h]);return f.createElement(tD.Provider,{value:g},t,f.createElement(MD,XM({images:c,visible:d,index:u,onIndexChange:m.changeIndex,onClose:m.close},a)))}var ID=function(e){var t,n,s=e.src,a=e.render,r=e.overlay,i=e.width,o=e.height,l=e.triggers,c=void 0===l?["onClick"]:l,d=e.children,u=p.useContext(tD),h=(t=function(){return u.nextId()},(n=p.useRef({sign:!1,fn:void 0}).current).sign||(n.sign=!0,n.fn=t()),n.fn),m=p.useRef(null);p.useImperativeHandle(null==d?void 0:d.ref,function(){return m.current}),p.useEffect(function(){return function(){u.remove(h)}},[]);var f=JM({render:function(e){return a&&a(e)},show:function(e,t){u.show(h),function(e,t){if(d){var n=d.props[e];n&&n(t)}}(e,t)}}),g=p.useMemo(function(){var e={};return c.forEach(function(t){e[t]=f.show.bind(null,t)}),e},[]);return p.useEffect(function(){u.update({key:h,src:s,originRef:m,render:f.render,overlay:r,width:i,height:o})},[s]),d?p.Children.only(p.cloneElement(d,XM({},g,{ref:m}))):null};function OD({images:e,isLoading:t=!1,isUploading:n=!1,onUpload:s,onDelete:a,onToggleBanner:r,readOnly:i=!1,renderOverlay:o,className:l}){const[d,u]=p.useState(null);return c.jsxs("div",{className:al("space-y-2",l),children:[!i&&c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("input",{id:"gallery-image-upload-input",type:"file",accept:"image/*",multiple:!0,onChange:s,className:"hidden",disabled:n||t,"aria-label":"Upload images"})}),t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading images..."})}):0===e.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(Nf,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No images uploaded yet"}),!i&&c.jsxs(Dl,{htmlFor:"gallery-image-upload-input-empty",className:"cursor-pointer",children:[c.jsx(vl,{type:"button",variant:"outline",size:"sm",disabled:n,asChild:!0,children:c.jsx("span",{children:n?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Qg,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})}),c.jsx("input",{id:"gallery-image-upload-input-empty",type:"file",accept:"image/*",multiple:!0,onChange:s,className:"hidden",disabled:n,"aria-label":"Upload images"})]})]}):c.jsx(FD,{children:c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.map(e=>c.jsx(bl,{className:"overflow-hidden flex flex-col aspect-square w-full h-full",onMouseEnter:()=>u(e.id),onMouseLeave:()=>u(null),children:c.jsxs("div",{className:"relative w-full h-full bg-muted group",children:[e.url?c.jsx(ID,{src:e.url,children:c.jsx("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover cursor-pointer"})}):c.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-none",children:c.jsx(Nf,{className:"w-4 h-4 text-muted-foreground"})}),o?o(e,d===e.id):c.jsxs(c.Fragment,{children:[e.isBanner&&c.jsxs("div",{className:"absolute top-0.5 left-0.5 bg-primary text-primary-foreground px-1 py-0.5 rounded text-[10px] font-bold flex items-center gap-0.5 shadow-lg z-30 border border-primary/20 pointer-events-none",children:[c.jsx(Lg,{className:"h-2 w-2 fill-current"}),c.jsx("span",{className:"hidden sm:inline",children:"Banner"})]}),!i&&c.jsxs("div",{className:al("absolute bottom-0 right-0 flex items-center justify-end gap-0.5 p-0.5 transition-opacity duration-200",d===e.id?"opacity-100":"opacity-0 pointer-events-none"),children:[r&&c.jsx(vl,{type:"button",variant:"secondary",size:"sm",onClick:t=>{t.stopPropagation(),r(e)},className:"h-5 w-5 p-0 bg-background hover:bg-background border border-border shadow-md pointer-events-auto",title:e.isBanner?"Unset Banner":"Set as Banner",children:c.jsx(Lg,{className:al("h-2.5 w-2.5",e.isBanner&&"fill-current")})}),a&&c.jsx(vl,{type:"button",variant:"destructive",size:"sm",onClick:t=>{t.stopPropagation(),a(e)},className:"h-5 w-5 p-0 bg-destructive hover:bg-destructive text-destructive-foreground opacity-100 hover:opacity-100 shadow-md pointer-events-auto",title:"Delete Image",children:c.jsx(Hg,{className:"h-2.5 w-2.5"})})]})]})]})},e.id)),!i&&c.jsxs(Dl,{htmlFor:"gallery-image-upload-input-grid",className:"cursor-pointer",children:[c.jsx(bl,{className:"flex flex-col items-center justify-center aspect-square w-full h-full bg-muted/50 hover:bg-muted transition-colors border-dashed",children:n?c.jsx(If,{className:"h-6 w-6 text-muted-foreground animate-spin"}):c.jsx(Qg,{className:"h-6 w-6 text-muted-foreground"})}),c.jsx("input",{id:"gallery-image-upload-input-grid",type:"file",accept:"image/*",multiple:!0,onChange:s,className:"hidden",disabled:n,"aria-label":"Upload images"})]})]})})]})}function zD({data:e,title:t,height:n=200,className:s=""}){const a=e.length>0?Math.max(...e.map(e=>e.value)):0,r=n-40;return 0===e.length?c.jsxs(bl,{className:s,children:[t&&c.jsx(wl,{children:c.jsx(Sl,{className:"text-lg",children:t})}),c.jsx(Cl,{children:c.jsx("div",{style:{height:n},className:"w-full flex items-center justify-center text-muted-foreground",children:"No data available"})})]}):c.jsxs(bl,{className:s,children:[t&&c.jsx(wl,{children:c.jsx(Sl,{className:"text-lg",children:t})}),c.jsx(Cl,{children:c.jsx("div",{style:{height:n},className:"w-full",children:c.jsx("svg",{width:"100%",height:r,className:"overflow-visible",children:e.map((t,n)=>{const s=a>0?t.value/a*(r-20):0,i=Math.max(20,100/e.length-2),o=100*n/e.length,l=r-s-20;return c.jsxs("g",{children:[c.jsx("rect",{x:`${o}%`,y:l,width:`${i}%`,height:s,fill:t.color||`hsl(${360*n/e.length}, 70%, 50%)`,className:"transition-all hover:opacity-80"}),c.jsx("text",{x:`${o+i/2}%`,y:l-5,textAnchor:"middle",className:"text-xs fill-muted-foreground",children:t.value}),c.jsx("text",{x:`${o+i/2}%`,y:r,textAnchor:"middle",className:"text-xs fill-muted-foreground",transform:`rotate(45, ${o+i/2}%, ${r})`,children:t.label.length>10?`${t.label.slice(0,10)}...`:t.label})]},t.label)})})})})]})}function BD({data:e,title:t,height:n=200,color:s="#3b82f6",className:a=""}){const r=e.map(e=>e.value),i=r.length>0?Math.max(...r):0,o=r.length>0?Math.min(...r):0,l=n-40;if(0===e.length)return c.jsxs(bl,{className:a,children:[t&&c.jsx(wl,{children:c.jsx(Sl,{className:"text-lg",children:t})}),c.jsx(Cl,{children:c.jsx("div",{style:{height:n},className:"w-full flex items-center justify-center text-muted-foreground",children:"No data available"})})]});const d=i-o,u=0===d?1:d,h=e.length>1?e.map((t,n)=>{const s=n/(e.length-1)*100,a=0===d?.5:(t.value-o)/u;return`${0===n?"M":"L"} ${s} ${l-a*(l-20)-10}`}).join(" "):`M 0 ${l/2} L 100 ${l/2}`;return c.jsxs(bl,{className:a,children:[t&&c.jsx(wl,{children:c.jsx(Sl,{className:"text-lg",children:t})}),c.jsx(Cl,{children:c.jsx("div",{style:{height:n},className:"w-full",children:c.jsxs("svg",{width:"100%",height:l,className:"overflow-visible",children:[[0,.25,.5,.75,1].map(e=>{const t=l-e*(l-30)-10;return c.jsxs("g",{children:[c.jsx("line",{x1:"0",y1:t,x2:"100%",y2:t,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"2,2"}),c.jsx("text",{x:"-5",y:t+3,textAnchor:"end",className:"text-xs fill-muted-foreground",children:Math.round(o+u*e)})]},e)}),e.length>0&&c.jsx("path",{d:h,fill:"none",stroke:s,strokeWidth:"2",className:"transition-all"}),e.map((t,n)=>{const a=e.length>1?n/(e.length-1)*100:50,r=0===d?.5:(t.value-o)/u,i=l-r*(l-20)-10;return c.jsx("circle",{cx:a,cy:i,r:"4",fill:s,className:"hover:r-6 transition-all cursor-pointer",children:c.jsxs("title",{children:[t.label,": ",t.value]})},n)}),e.filter((t,n)=>n%Math.ceil(Math.max(1,e.length/5))===0).map((t,n)=>{const s=e.indexOf(t),a=e.length>1?s/(e.length-1)*100:50;return c.jsx("text",{x:a,y:l+10,textAnchor:"middle",className:"text-xs fill-muted-foreground",children:t.label.length>8?`${t.label.slice(0,8)}...`:t.label},n)})]})})})]})}function $D({data:e,title:t,height:n=200,className:s=""}){const a=e.reduce((e,t)=>e+t.value,0),r=Math.min(n/2-20,80),i=n/2,o=n/2;let l=-90;return c.jsxs(bl,{className:s,children:[t&&c.jsx(wl,{children:c.jsx(Sl,{className:"text-lg",children:t})}),c.jsx(Cl,{children:c.jsxs("div",{style:{height:n},className:"w-full flex items-center justify-center",children:[c.jsxs("svg",{width:n,height:n,children:[e.map((t,n)=>{const s=360*(t.value/a),d=l+s,u=l*Math.PI/180,h=d*Math.PI/180,m=i+r*Math.cos(u),p=o+r*Math.sin(u),f=i+r*Math.cos(h),g=o+r*Math.sin(h),x=[`M ${i} ${o}`,`L ${m} ${p}`,`A ${r} ${r} 0 ${s>180?1:0} 1 ${f} ${g}`,"Z"].join(" ");l=d;const v=t.color||`hsl(${360*n/e.length}, 70%, 50%)`;return c.jsx("path",{d:x,fill:v,className:"hover:opacity-80 transition-all cursor-pointer"},t.label)}),c.jsx("text",{x:i,y:o-5,textAnchor:"middle",className:"text-sm font-semibold",children:"Total"}),c.jsx("text",{x:i,y:o+15,textAnchor:"middle",className:"text-lg font-bold",children:a})]}),c.jsx("div",{className:"ml-6 space-y-2",children:e.map((t,n)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color||`hsl(${360*n/e.length}, 70%, 50%)`}}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.label,": ",t.value," (",(t.value/a*100).toFixed(1),"%)"]})]},t.label))})]})})]})}function UD({open:e,onOpenChange:t,entityId:n,entityName:s,entityType:a,initialTags:r=[],tagService:i,onSave:o,loading:l=!1}){const[d,u]=p.useState(r),[h,m]=p.useState([]),[g,x]=p.useState(""),[v,y]=p.useState(!1),[b,w]=p.useState(!1),S=f.useRef(null),[j,C]=p.useState(void 0);p.useEffect(()=>{e&&n&&N()},[e,n]);const k=JSON.stringify(r||[]);p.useEffect(()=>{e&&(u(JSON.parse(k)),x(""),y(!1))},[e,k]),p.useEffect(()=>{v&&S.current&&C(S.current.offsetWidth)},[v]);const N=p.useCallback(async()=>{if(n){w(!0);try{const e=await i.getAvailableTagsForEntity(a,n,g||void 0,200);m(e.items)}catch(e){}finally{w(!1)}}},[n,a,i,g]);p.useEffect(()=>{if(v){const e=setTimeout(()=>{N()},300);return()=>clearTimeout(e)}},[g,v,N]);const _=p.useCallback(e=>{d.includes(e)||u([...d,e]),x(""),y(!1)},[d]),P=p.useCallback(e=>{u(d.filter(t=>t!==e))},[d]),E=p.useCallback(()=>{const e=g.trim();e&&!d.includes(e)&&(u([...d,e]),x(""),y(!1))},[g,d]),R=p.useCallback(async()=>{await o(d),t(!1)},[d,o,t]),A=p.useMemo(()=>{const e=r||[];return d.length!==e.length||d.some(t=>!e.includes(t))},[d,r]),T=p.useMemo(()=>{if(!g.trim())return h;const e=g.toLowerCase();return h.filter(t=>t.name.toLowerCase().includes(e)&&!d.includes(t.name))},[h,g,d]),M=p.useMemo(()=>{if(!g.trim())return!1;const e=g.trim().toLowerCase();return!h.some(t=>t.name.toLowerCase()===e)},[g,h]),{attachedTags:D,unattachedTags:L}=p.useMemo(()=>{const e=[],t=[];return T.forEach(n=>{n.is_attached?e.push(n):t.push(n)}),{attachedTags:e,unattachedTags:t}},[T]);return c.jsx(Zy,{open:e,onOpenChange:t,children:c.jsxs(tb,{className:"sm:max-w-[650px]",children:[c.jsxs(nb,{children:[c.jsxs(ab,{className:"flex items-center gap-2",children:[c.jsx(zg,{className:"h-5 w-5"}),"Manage Tags"]}),c.jsxs(rb,{children:["Add or remove tags for ",c.jsx("span",{className:"font-medium",children:s}),". Select existing tags or create new ones by typing."]})]}),c.jsxs("div",{className:"space-y-6 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Add Tags"}),c.jsx("div",{ref:S,className:"w-full",children:c.jsxs(lP,{open:v,onOpenChange:y,children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",role:"combobox","aria-expanded":v,className:"w-full justify-between h-11",disabled:l||b,children:[c.jsx("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:b?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:"h-4 w-4 animate-spin text-muted-foreground"}),c.jsx("span",{className:"text-muted-foreground",children:"Loading tags..."})]}):d.length>0?c.jsxs(c.Fragment,{children:[c.jsx(zg,{className:"h-4 w-4 text-muted-foreground shrink-0"}),c.jsxs("span",{className:"text-sm font-medium",children:[d.length," ",1===d.length?"tag":"tags"," selected"]})]}):c.jsx("span",{className:"text-muted-foreground",children:g||"Search or create tags..."})}),c.jsx(Qp,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),c.jsx(dP,{className:"p-0",align:"start",style:j?{width:`${j}px`}:void 0,children:c.jsxs(vN,{shouldFilter:!1,children:[c.jsx(bN,{placeholder:"Search tags or type to create new...",value:g,onValueChange:x}),c.jsx(wN,{children:b?c.jsxs("div",{className:"py-6 text-center",children:[c.jsx(If,{className:"h-5 w-5 animate-spin mx-auto text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading tags..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(SN,{children:M&&g.trim()?c.jsx("div",{className:"py-2 px-4",children:c.jsxs(vl,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:E,children:[c.jsx(hg,{className:"mr-2 h-4 w-4"}),'Create "',g.trim(),'"']})}):c.jsxs("div",{className:"py-6 text-center text-sm text-muted-foreground",children:[c.jsx(zg,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No tags found."}),c.jsx("p",{className:"text-xs mt-1",children:"Type to create a new tag"})]})}),D.length>0&&c.jsx(jN,{heading:"Currently Attached",children:D.map(e=>c.jsxs(kN,{value:e.name,onSelect:()=>_(e.name),className:al("cursor-pointer",d.includes(e.name)&&"opacity-50"),children:[c.jsx(Up,{className:al("mr-2 h-4 w-4",d.includes(e.name)?"opacity-100":"opacity-0")}),c.jsx("span",{className:"flex-1",children:e.name}),c.jsx(mC,{variant:"secondary",className:"ml-2 text-xs",children:"Current"})]},e.id))}),L.length>0&&c.jsxs(c.Fragment,{children:[D.length>0&&c.jsx(Hj,{}),c.jsx(jN,{heading:"Available Tags",children:L.map(e=>c.jsxs(kN,{value:e.name,onSelect:()=>_(e.name),className:al("cursor-pointer",d.includes(e.name)&&"opacity-50"),children:[c.jsx(Up,{className:al("mr-2 h-4 w-4",d.includes(e.name)?"opacity-100":"opacity-0")}),c.jsx("span",{className:"flex-1",children:e.name})]},e.id))})]}),M&&g.trim()&&c.jsxs(c.Fragment,{children:[(D.length>0||L.length>0)&&c.jsx(Hj,{}),c.jsx(jN,{children:c.jsxs(kN,{value:g.trim(),onSelect:E,className:"cursor-pointer font-medium",children:[c.jsx(hg,{className:"mr-2 h-4 w-4 text-primary"}),'Create "',g.trim(),'"']})})]})]})})]})})]})}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Type to search existing tags or create a new one"})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"text-sm font-medium",children:["Selected Tags ",d.length>0&&`(${d.length})`]}),d.length>0&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>u([]),disabled:l,className:"h-7 text-xs",children:"Clear All"})]}),d.length>0?c.jsx("div",{className:"flex flex-wrap gap-2 min-h-[100px] p-4 border rounded-lg bg-muted/30",children:d.map(e=>{const t=h.find(t=>t.name===e&&t.is_attached);return c.jsxs(mC,{variant:t?"default":"secondary",className:al("text-xs flex items-center gap-1.5 pr-1.5 py-1.5 px-2.5",t&&"bg-primary/10 text-primary border-primary/20"),children:[c.jsx(zg,{className:"h-3 w-3"}),c.jsx("span",{children:e}),c.jsx("button",{type:"button",onClick:()=>P(e),disabled:l,className:"ml-1 rounded-full hover:bg-background/80 p-0.5 transition-colors focus:outline-none focus:ring-2 focus:ring-ring","aria-label":`Remove ${e} tag`,children:c.jsx(ax,{className:"h-3 w-3"})})]},e)})}):c.jsxs("div",{className:"min-h-[100px] p-6 border-2 border-dashed rounded-lg bg-muted/20 flex flex-col items-center justify-center text-center",children:[c.jsx(zg,{className:"h-8 w-8 text-muted-foreground/50 mb-2"}),c.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"No tags selected"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the search box above to add tags"})]})]})]}),c.jsxs(sb,{className:"gap-2",children:[c.jsx(vl,{variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),c.jsx(vl,{onClick:R,disabled:l||!A,className:"min-w-[100px]",children:l?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})}function VD({open:e,onOpenChange:t,entityId:n,entityName:s,entityType:a,attachmentService:r,onSave:i,loading:o=!1}){const[l,d]=p.useState([]),[u,h]=p.useState(!1),[m,g]=p.useState(null),[x,v]=p.useState(!1),[y,b]=p.useState(null),w=f.useRef(null);p.useEffect(()=>{e&&n&&S()},[e,n]);const S=p.useCallback(async()=>{try{const e=await r.getAttachmentsForEntity(a,n,"document");d(e.items)}catch(e){}},[n,a,r]),j=p.useCallback(async e=>{const t=Array.from(e.target.files||[]);if(0===t.length)return;h(!0);const s=[],i=[];for(const l of t){const e=l.name;try{const e=await QP.uploadFile(l);await r.linkAttachment(a,n,{file_upload_id:e.id,attachment_type:"document"}),s.push({id:e.id,filename:e.filename,original_name:e.originalName,mime_type:e.mimeType,size:e.size,url:e.url,uploaded_at:e.uploadedAt,uploaded_by:null})}catch(o){i.push(e)}}if(s.length>0&&await S(),i.length>0){const e=s.length,t=e>0?`Successfully uploaded ${e} file(s). ${i.length} file(s) failed to upload.`:`Failed to upload ${i.length} file(s). Please try again.`;alert(t)}h(!1),w.current&&(w.current.value="")},[n,a,r,S]),C=p.useCallback(e=>{b(e),v(!0)},[]),k=p.useCallback(async()=>{if(y){g(y.id);try{await r.unlinkAttachment(a,n,y.id),await S(),i?.(l.filter(e=>e.id!==y.id)),v(!1),b(null)}catch(e){alert(e instanceof Error?e.message:"Failed to remove attachment. Please try again.")}finally{g(null)}}},[n,a,r,l,S,i,y]);return c.jsxs(Zy,{open:e,onOpenChange:t,children:[c.jsxs(tb,{className:"w-[90vw] max-w-[1200px] max-h-[90vh] !grid !grid-rows-[auto_1fr_auto] gap-0 p-6 overflow-hidden",style:{maxHeight:"90vh"},children:[c.jsxs(nb,{className:"flex-shrink-0 pb-4",children:[c.jsxs(ab,{className:"flex items-center gap-2",children:[c.jsx(ff,{className:"h-5 w-5"}),"Manage Documents"]}),c.jsxs(rb,{children:["Upload and manage document attachments for"," ",c.jsx("span",{className:"font-medium",children:s}),". Supported formats: Images, PDF, Word, Excel, and text files."]})]}),c.jsxs("div",{className:"overflow-y-auto min-h-0 space-y-4",children:[c.jsxs("div",{className:"space-y-2 flex-shrink-0 pt-2",children:[c.jsx("label",{htmlFor:`attachments-${n}`,className:"text-sm font-medium",children:"Upload Documents"}),c.jsx("input",{ref:w,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt,.csv",onChange:j,disabled:o||u,className:"hidden",id:`attachments-${n}`}),c.jsx(vl,{variant:"outline",onClick:()=>w.current?.click(),disabled:o||u,className:"w-full",children:u?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Qg,{className:"mr-2 h-4 w-4"}),"Select Files to Upload"]})}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum file size: 20MB for documents, 5MB for images"})]}),c.jsx(Hj,{className:"flex-shrink-0"}),c.jsxs("div",{className:"space-y-2 w-full flex flex-col pb-4",children:[c.jsx("div",{className:"flex items-center justify-between flex-shrink-0",children:c.jsxs("label",{className:"text-sm font-medium",children:["Attached Documents (",l.length,")"]})}),l.length>0?c.jsx("div",{className:"overflow-y-auto overflow-x-hidden w-full space-y-2 pr-2",style:{maxHeight:"calc(90vh - 350px)"},children:l.map(e=>{return c.jsxs(bP,{className:"w-full min-w-0 gap-4 p-3",children:[c.jsx(wP,{className:"text-muted-foreground",children:(n=e.mime_type,n.startsWith("image/")?c.jsx(Nf,{className:"h-5 w-5"}):c.jsx(ff,{className:"h-5 w-5"}))}),c.jsxs(SP,{className:"overflow-hidden",children:[c.jsx(jP,{className:"truncate",children:e.original_name}),c.jsxs(CP,{className:"truncate text-xs",children:[(t=e.size,t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`)," "," ",e.mime_type]})]}),c.jsxs(kP,{className:"gap-2 ml-2",children:[c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>window.open(e.url,"_blank"),disabled:o,className:"h-8 px-2 text-xs",children:"View"}),c.jsx(vl,{variant:"ghost",size:"icon",onClick:()=>C(e),disabled:o||m===e.id,className:"h-8 w-8",children:m===e.id?c.jsx(If,{className:"h-4 w-4 animate-spin"}):c.jsx(ax,{className:"h-4 w-4"})})]})]},e.id);var t,n})}):c.jsxs("div",{className:"min-h-[100px] p-6 border-2 border-dashed rounded-lg bg-muted/20 flex flex-col items-center justify-center text-center flex-shrink-0",children:[c.jsx(ff,{className:"h-8 w-8 text-muted-foreground/50 mb-2"}),c.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"No documents attached"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the upload button above to add documents"})]})]})]}),c.jsx(sb,{className:"flex-shrink-0 pt-4 border-t",children:c.jsx(vl,{variant:"outline",onClick:()=>t(!1),disabled:o||u,children:"Close"})})]}),c.jsx(jE,{open:x,onOpenChange:e=>{v(e),e||b(null)},title:"Remove Document",description:y?`Are you sure you want to remove "${y.original_name}"? This action cannot be undone.`:"Are you sure you want to remove this document?",confirmAction:{label:"Remove",variant:"destructive",onClick:k,loading:null!==m,disabled:null!==m},cancelAction:{label:"Cancel",variant:"outline",disabled:null!==m}})]})}function qD({documents:e,isLoading:t=!1,onManageAttachments:n,className:s,loading:a=!1}){return c.jsx("div",{className:al("space-y-6",s),children:t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(If,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===e.length?c.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[c.jsx(pf,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{className:"text-sm font-medium mb-1",children:"No documents"}),c.jsx("p",{className:"text-xs",children:n?"Click 'Manage Documents' to upload files":"No documents have been uploaded"})]}):c.jsx("div",{className:"space-y-2 w-full",children:c.jsx(FD,{children:c.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto overflow-x-hidden w-full",children:e.map(e=>{const t=e.mime_type.startsWith("image/");return c.jsxs(bP,{className:"w-full min-w-0 gap-2 p-3",children:[c.jsx(wP,{className:"text-muted-foreground",children:t?c.jsx(ID,{src:e.url,children:c.jsx("img",{src:e.url,alt:e.original_name,className:"h-10 w-10 object-cover rounded cursor-pointer border border-border"})}):(s=e.mime_type,s.startsWith("image/")?c.jsx(Nf,{className:"h-5 w-5"}):c.jsx(ff,{className:"h-5 w-5"}))}),c.jsxs(SP,{className:"overflow-hidden",children:[c.jsx(jP,{className:"truncate",children:t?c.jsx(ID,{src:e.url,children:c.jsx("span",{className:"cursor-pointer hover:text-primary",children:e.original_name})}):e.original_name}),c.jsxs(CP,{className:"truncate text-xs",children:[(n=e.size,n<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(1)} KB`:`${(n/1048576).toFixed(1)} MB`)," "," ",e.mime_type]})]}),c.jsxs(kP,{className:"gap-1",children:[c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>window.open(e.url,"_blank"),disabled:a,className:"h-8 px-2 text-xs",children:c.jsx(mf,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"ghost",size:"icon",onClick:()=>(e=>{const t=document.createElement("a");t.href=e.url,t.download=e.original_name,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)})(e),disabled:a,className:"h-8 w-8",title:"Download",children:c.jsx(df,{className:"h-4 w-4"})})]})]},e.id);var n,s})})})})})}function HD({value:e,className:t,iconClassName:n,onClick:s,title:a="Copy to clipboard",copyMessage:r="Copied!",...i}){const[o,l]=p.useState(!1);return c.jsx(vl,{variant:"ghost",size:"icon",className:t,onClick:async t=>{s&&s(t);try{await navigator.clipboard.writeText(e),l(!0),setTimeout(()=>l(!1),2e3)}catch(wW){}},title:a,...i,children:o?c.jsx(Zp,{className:al("h-3 w-3 text-green-600",n)}):c.jsx(rf,{className:al("h-3 w-3",n)})})}const GD=({tags:e,className:t})=>e&&0!==e.length?c.jsx("div",{className:`flex flex-wrap gap-2 ${t||""}`,children:e.map((e,t)=>c.jsx(KD,{tag:e},`tag-${t}-${e}`))}):null,KD=({tag:e,className:t})=>c.jsxs(mC,{variant:"secondary",className:`text-xs flex items-center gap-1.5 pr-2 py-1.5 px-2.5 bg-primary/10 text-primary border-primary/20 ${t||""}`,children:[c.jsx(zg,{className:"h-3 w-3"}),c.jsx("span",{children:e})]}),WD={sm:"h-16 w-16",md:"h-20 w-20",lg:"h-32 w-32"},QD={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-10 w-10"};function YD({entityId:e,entityType:t,defaultImageUrl:n,altText:s,FallbackIcon:a,attachmentService:r,currentPhoto:i,onPhotoChange:o,disabled:l=!1,size:d="md"}){const[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(i?.url||n||null),v=p.useRef(null);p.useEffect(()=>{if(i?.url)return void x(i.url);if(n)return void x(n);let s=!0;return(async()=>{try{const n=await r.getProfilePhoto(t,e);s&&n?.url&&(x(n.url),o&&o(n))}catch(n){}})(),()=>{s=!1}},[i,n,e,t]);const y=p.useCallback(async n=>{const s=n.target.files?.[0];if(s)if(s.type.startsWith("image/"))if(s.size>5242880)alert("Image size must be less than 5MB");else{h(!0);try{const n=await QP.uploadFile(s),a=await r.setProfilePhoto(t,e,{file_upload_id:n.id});x(a.url),o?.(a),v.current&&(v.current.value="")}catch(a){alert(a instanceof Error?a.message:`Failed to upload ${t} photo. Please try again.`)}finally{h(!1)}}else alert("Please select an image file")},[e,t,r,o]),b=!!g;return c.jsxs("div",{className:"relative",children:[c.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:y,disabled:l||u,className:"hidden",id:`${t}-photo-${e}`}),c.jsxs("div",{className:al("relative group transition-all",WD[d]),onMouseEnter:()=>!l&&!u&&f(!0),onMouseLeave:()=>f(!1),children:[c.jsx(FD,{children:b&&g?c.jsx(ID,{src:g,children:c.jsx(cC,{className:al(WD[d],"border-2 border-border",!l&&!u&&"cursor-pointer"),children:c.jsx(dC,{src:g,alt:s})})}):c.jsx(cC,{className:al(WD[d],"border-2 border-border"),children:c.jsx(uC,{className:"bg-muted text-muted-foreground",children:c.jsx(a,{className:al(QD[d],"text-muted-foreground/50")})})})}),u&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full",children:c.jsx(If,{className:al(QD[d],"animate-spin text-primary")})}),!u&&m&&!l&&!b&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 rounded-full transition-opacity",children:c.jsx(vl,{variant:"ghost",size:"icon",className:"h-7 w-7 bg-white/20 hover:bg-white/30 text-white border-0 rounded-full",onClick:e=>{e.stopPropagation(),v.current?.click()},title:"Add photo",children:c.jsx(zp,{className:"h-3.5 w-3.5"})})}),b&&!u&&!l&&c.jsx(vl,{variant:"ghost",size:"icon",className:al("absolute bottom-0 right-0 h-6 w-6 bg-primary text-primary-foreground border-2 border-background rounded-full shadow-md hover:bg-primary/90 transition-all",m?"opacity-100 scale-100":"opacity-80 scale-95"),onClick:e=>{e.stopPropagation(),v.current?.click()},title:"Edit photo",children:c.jsx(og,{className:"h-3 w-3"})})]})]})}function XD({open:e,onOpenChange:t,title:n,description:s}){const a=Vs(),r=Ga.get("last_username")||"";return c.jsx(kE,{open:e,onOpenChange:t,title:n,description:s,initialUsername:r,onBeforeLogin:async()=>{a.clear(),a.removeQueries(),Ga&&"function"==typeof Ga.remove&&(Ga.remove("REACT_QUERY_OFFLINE_CACHE"),Ga.remove("app_tabs"),Ga.remove("scroll_positions"),Ga.removeMatching?Ga.removeMatching("^command-palette-recent"):Ga.remove("command-palette-recent"))},onLogin:async e=>{await di.login(e),Na()},onAfterLogin:async()=>{await a.invalidateQueries()}})}function ZD({open:e,onOpenChange:t,timeUntilExpiration:n,onRefresh:s}){const a=(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/60),s=t%60;return n>0?`${n} minute${1!==n?"s":""} ${s} second${1!==s?"s":""}`:`${s} second${1!==s?"s":""}`})(n),r=Math.min(100,Math.max(0,n/18e5*100));p.useEffect(()=>{if(e&&n<6e4){const e=setTimeout(()=>{s().catch(e=>{})},1e3);return()=>clearTimeout(e)}},[e,n,s]);return c.jsx(Zy,{open:e,onOpenChange:t,modal:!0,children:c.jsxs(tb,{className:"sm:max-w-md",style:{zIndex:9998},onEscapeKeyDown:e=>{},children:[c.jsxs(nb,{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"h-12 w-12 rounded-full bg-orange-500/10 flex items-center justify-center",children:c.jsx(Wg,{className:"h-6 w-6 text-orange-500"})}),c.jsx(ab,{className:"text-xl",children:"Session Expiring Soon"})]}),c.jsxs(rb,{className:"text-base",children:["Your session will expire in ",c.jsx("strong",{children:a}),". Refresh your session to continue working without interruption."]})]}),c.jsxs("div",{className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Time remaining"}),c.jsx("span",{className:"font-medium",children:a})]}),c.jsx(vv,{value:r,className:"h-2"})]}),c.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-md bg-orange-500/10 text-orange-700 dark:text-orange-400 text-sm",children:[c.jsx(sf,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"What happens next?"}),c.jsx("p",{className:"mt-1",children:"Your session will be automatically refreshed. You can also refresh manually to ensure you don't lose any unsaved work."})]})]}),c.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 pt-2",children:[c.jsx(vl,{type:"button",variant:"outline",onClick:()=>{t(!1)},children:"Dismiss"}),c.jsx(vl,{type:"button",onClick:async()=>{try{await s(),t(!1)}catch(e){}},children:"Refresh Session Now"})]})]})]})})}const JD=p.createContext(void 0),eL=36e5;class tL{config;callbacks;expirationCheckInterval=null;keepaliveInterval=null;lastActivityTime=Date.now();activityListeners=[];isTabVisible=!0;visibilityListener=null;isRefreshing=!1;lastWarningTime=0;lastUserActivityTime=Date.now();sessionConfig=null;sessionConfigCacheTimestamp=0;constructor(e={},t={}){this.config={warningThresholdSeconds:e.warningThresholdSeconds??300,keepaliveIntervalSeconds:e.keepaliveIntervalSeconds??600,minActivityBeforeKeepaliveSeconds:e.minActivityBeforeKeepaliveSeconds??30,checkIntervalSeconds:e.checkIntervalSeconds??30,enableKeepalive:e.enableKeepalive??!0,enableVisibilityCheck:e.enableVisibilityCheck??!0,idleTimeoutMinutes:e.idleTimeoutMinutes??30},this.callbacks=t}start(){this.stop(),this.fetchSessionConfig(),this.startExpirationMonitoring(),this.config.enableKeepalive&&(this.startActivityTracking(),this.startKeepalive()),this.config.enableVisibilityCheck&&"undefined"!=typeof document&&this.startVisibilityTracking()}loadSessionConfigFromCache(){try{const e=Ga.get(ya);if(!e||!e.config||!e.timestamp)return null;const t=Date.now();return t-e.timestamp>eL?(Ga.remove(ya),null):e.config}catch(e){return Ga.remove(ya),null}}saveSessionConfigToCache(e){try{const t={config:e,timestamp:Date.now()};Ga.set(ya,t)}catch(t){}}clearSessionConfigCache(){this.sessionConfig=null,this.sessionConfigCacheTimestamp=0,Ga.remove(ya)}async fetchSessionConfig(){const e=Date.now(),t=e-this.sessionConfigCacheTimestamp;if(this.sessionConfig&&t<eL)return;const n=this.loadSessionConfigFromCache();if(n)return this.sessionConfig=n,void(this.sessionConfigCacheTimestamp=e);if(Ga.get(ga))try{const t=await Fa.get("/api/v1/sessions/config",{requiresAuth:!0});this.sessionConfig=t,this.sessionConfigCacheTimestamp=e,this.saveSessionConfigToCache(t)}catch(s){const t=s?.status;if(404===t||401===t)return;const n=this.loadSessionConfigFromCache();n&&(this.sessionConfig=n,this.sessionConfigCacheTimestamp=e)}}stop(){this.expirationCheckInterval&&(clearInterval(this.expirationCheckInterval),this.expirationCheckInterval=null),this.keepaliveInterval&&(clearInterval(this.keepaliveInterval),this.keepaliveInterval=null),this.stopActivityTracking(),this.stopVisibilityTracking()}async refreshSession(){if(this.isRefreshing)return!1;if(!Ga.get(xa))return!1;try{return this.isRefreshing=!0,await di.refreshToken(),this.lastWarningTime=0,this.callbacks.onRefreshed&&this.callbacks.onRefreshed(),!0}catch(e){return!1}finally{this.isRefreshing=!1}}recordActivity(){this.lastActivityTime=Date.now(),this.lastUserActivityTime=Date.now()}getExpirationInfo(){const e=Ga.get(ga);if(!e)return{expiration:null,timeUntilExpiration:null,isExpired:!0};return{expiration:na(e),timeUntilExpiration:aa(e),isExpired:sa(e)}}startExpirationMonitoring(){this.checkExpiration(),this.expirationCheckInterval=setInterval(()=>{this.checkExpiration()},1e3*this.config.checkIntervalSeconds)}checkExpiration(){const e=Ga.get(ga);if(!e)return;const t=!!Ga.get(xa);if(sa(e))return t?void(this.isRefreshing||this.refreshSession().then(e=>{e||this.callbacks.onExpired&&this.callbacks.onExpired()}).catch(()=>{this.callbacks.onExpired&&this.callbacks.onExpired()})):void(this.callbacks.onExpired&&this.callbacks.onExpired());const n=aa(e);if(null!==n){const e=1e3*this.config.warningThresholdSeconds,s=60*(this.sessionConfig?.idle_timeout_minutes??this.config.idleTimeoutMinutes)*1e3,a=Date.now()-this.lastUserActivityTime>s;t&&n<=e&&n>0&&a&&Date.now()-this.lastWarningTime>6e4&&(this.lastWarningTime=Date.now(),this.callbacks.onWarning&&this.callbacks.onWarning(n));t&&n<=3e5&&n>0&&!this.isRefreshing&&!a&&this.refreshSession().catch(e=>{})}}startActivityTracking(){if("undefined"==typeof window)return;const e=()=>{this.recordActivity()};let t=0;const n=()=>{const n=Date.now();n-t>5e3&&(t=n,e())};["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(e=>{window.addEventListener(e,n,{passive:!0}),this.activityListeners.push(()=>{window.removeEventListener(e,n)})})}stopActivityTracking(){this.activityListeners.forEach(e=>e()),this.activityListeners=[]}startKeepalive(){this.keepaliveInterval=setInterval(()=>{this.sendKeepalive()},1e3*this.config.keepaliveIntervalSeconds)}async sendKeepalive(){if(!Ga.get(ga)||this.isRefreshing)return;const e=Date.now()-this.lastActivityTime,t=1e3*this.config.minActivityBeforeKeepaliveSeconds;if(this.isTabVisible&&!(e>t))try{await Fa.get("/api/v1/auth/me",{requiresAuth:!0})}catch(n){}}startVisibilityTracking(){if("undefined"==typeof document)return;const e=()=>{const e=this.isTabVisible;this.isTabVisible=!document.hidden,!e&&this.isTabVisible&&setTimeout(()=>{this.checkExpiration()},100)};document.addEventListener("visibilitychange",e),this.visibilityListener=()=>{document.removeEventListener("visibilitychange",e)}}stopVisibilityTracking(){this.visibilityListener&&(this.visibilityListener(),this.visibilityListener=null)}}let nL=null;function sL(e,t){return nL&&nL.stop(),nL=new tL(e,t),nL}function aL(){return nL}const rL=Object.freeze(Object.defineProperty({__proto__:null,SessionMonitor:tL,createSessionMonitor:sL,getSessionMonitor:aL},Symbol.toStringTag,{value:"Module"}));function iL({children:e}){const[t,n]=p.useState(!1),[s,a]=p.useState(!1),[r,i]=p.useState(0),o=p.useRef(null),l=p.useCallback(()=>{Ga.get("last_username")?n(!0):window.location.href="/login"},[]),d=p.useCallback(()=>{n(!1)},[]);p.useEffect(()=>(Ea(l),Ra(e=>{Ek({title:"Access Denied",description:e||"You don't have permission to perform this action.",variant:"destructive"})}),()=>{Ea(null),Ra(null)}),[l]),p.useEffect(()=>{const e=()=>{const e=di.isAuthenticated();if(e){if(e&&!o.current){za.initialize().catch(e=>{});const e=sL({warningThresholdSeconds:300,keepaliveIntervalSeconds:600,minActivityBeforeKeepaliveSeconds:30,checkIntervalSeconds:30,enableKeepalive:!0,enableVisibilityCheck:!0},{onWarning:e=>{i(e),a(!0)},onExpired:()=>{a(!1),l()},onRefreshed:()=>{a(!1)}});o.current=e,e.start()}}else o.current&&(o.current.stop(),o.current=null)};e();const t=setInterval(e,5e3);return()=>{o.current&&(o.current.stop(),o.current=null),clearInterval(t)}},[l]);const u=p.useCallback(async()=>{const e=aL();e&&await e.refreshSession()},[]);return c.jsxs(JD.Provider,{value:{showSessionExpiredDialog:l,hideSessionExpiredDialog:d,isSessionDialogOpen:t},children:[e,c.jsx(XD,{open:t,onOpenChange:n}),c.jsx(ZD,{open:s,onOpenChange:a,timeUntilExpiration:r,onRefresh:u})]})}var oL=["added","removed","updated"];function lL(e){return oL.includes(e)}async function cL({queryClient:e,persister:t,buster:n="",dehydrateOptions:s}){const a={buster:n,timestamp:Date.now(),clientState:ps(e,s)};await t.persistClient(a)}var dL=({children:e,persistOptions:t,onSuccess:n,onError:s,...a})=>{const[r,i]=p.useState(!0),o=p.useRef({persistOptions:t,onSuccess:n,onError:s}),l=p.useRef(!1);return p.useEffect(()=>{o.current={persistOptions:t,onSuccess:n,onError:s}}),p.useEffect(()=>{const e={...o.current.persistOptions,queryClient:a.client};return l.current||(l.current=!0,async function({queryClient:e,persister:t,maxAge:n=864e5,buster:s="",hydrateOptions:a}){try{const r=await t.restoreClient();if(r){if(!r.timestamp)return t.removeClient();{const i=Date.now()-r.timestamp>n,o=r.buster!==s;if(i||o)return t.removeClient();fs(e,r.clientState,a)}}}catch(wW){throw await t.removeClient(),wW}}(e).then(()=>o.current.onSuccess?.()).catch(()=>o.current.onError?.()).finally(()=>{i(!1)})),r?void 0:function(e){const t=e.queryClient.getQueryCache().subscribe(t=>{lL(t.type)&&cL(e)}),n=e.queryClient.getMutationCache().subscribe(t=>{lL(t.type)&&cL(e)});return()=>{t(),n()}}(e)},[a.client,r]),c.jsx(qs,{...a,children:c.jsx(Gs,{value:r,children:e})})};const uL={persistClient:async e=>{try{localStorage.setItem("REACT_QUERY_OFFLINE_CACHE",JSON.stringify(e))}catch(t){}},restoreClient:async()=>{try{const e=localStorage.getItem("REACT_QUERY_OFFLINE_CACHE");return e?JSON.parse(e):void 0}catch(e){return}},removeClient:async()=>{try{localStorage.removeItem("REACT_QUERY_OFFLINE_CACHE")}catch(e){}}};async function hL(){await uL.removeClient()}function mL({children:e}){const t=function(){try{const e=localStorage.getItem("cache:user:preferences");if(!e)return!0;const t=JSON.parse(e),n=t?.value;return!n||!n.cache||!1!==n.cache.reactQueryCacheEnabled}catch{return!0}}(),n=t?864e5:0,s=t?3e5:0,[a]=p.useState(()=>new $s({...fa,defaultOptions:{...fa.defaultOptions,queries:{...fa.defaultOptions.queries,gcTime:n,staleTime:s,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:(e,t)=>"CancelledError"!==t?.name&&e<3}},logger:{log:(...e)=>{const t=e[0];"string"!=typeof t||t.includes("dehydrated as pending ended up rejecting")},warn:(...e)=>{const t=e[0];"string"!=typeof t||t.includes("dehydrated as pending ended up rejecting")},error:console.error}}));return p.useEffect(()=>(oa.setQueryClient(a),ha(),oa.connect(),()=>{oa.disconnect()}),[a]),c.jsx(dL,{client:a,persistOptions:{persister:uL,maxAge:864e5,dehydrateOptions:{shouldDehydrateQuery:e=>"pending"!==e.state.status&&(("error"!==e.state.status||"CancelledError"!==e.state.error?.name)&&("error"!==e.state.status||!(e.state.error instanceof TypeError||e.state.error?.message?.includes("Failed to fetch")||e.state.error?.message?.includes("NetworkError"))))}},children:e})}class pL extends Error{constructor(e,t){super(e),this.originalError=t,this.name="HealthCheckError"}}async function fL(){const e=`${ma.BASE_URL}/health/`,t=new AbortController,n=setTimeout(()=>t.abort(),5e3);try{const s=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},signal:t.signal});if(clearTimeout(n),!s.ok)throw new pL(`Backend returned status ${s.status}`);return await s.json()}catch(s){if(clearTimeout(n),s instanceof Error&&"AbortError"===s.name)throw new pL("Backend health check timed out. The server is not responding.",s);if(s instanceof pL)throw s;const e=function(e){if(e instanceof Error){const t=e.message.toLowerCase(),n=e.name.toLowerCase();return"typeerror"!==n&&"domexception"!==n||!(t.includes("failed to fetch")||t.includes("networkerror")||t.includes("network request failed")||t.includes("load failed")||""===t||""===e.message)?t.includes("failed to fetch")||t.includes("networkerror")||t.includes("connection refused")||t.includes("err_connection_refused")||t.includes("connection reset")||t.includes("connection closed")?"Connection refused. The backend server may be down or unreachable.":t.includes("network request failed")?"Network request failed. Please check your internet connection.":t.includes("timeout")||t.includes("aborted")?"Request timed out. The backend server is not responding.":t.includes("cors")?"CORS error. The backend server may not be configured correctly.":e.message||"Failed to connect to backend server.":"Connection refused. The backend server may be down or unreachable."}return"Unknown error occurred while checking backend health."}(s);throw new pL(e,s instanceof Error?s:void 0)}}function gL(e){const t=new Date(e);return`${t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})} at ${t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0})}`}function xL({error:e,isLoading:t=!1,downtimeStart:n,onRetry:s}){const[a,r]=p.useState("");return p.useEffect(()=>{if(!n)return void r("");const e=()=>{const e=Date.now()-n;r(function(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),s=Math.floor(n/60),a=Math.floor(s/24);return a>0?`${a}d ${s%24}h ${n%60}m ${t%60}s`:s>0?`${s}h ${n%60}m ${t%60}s`:n>0?`${n}m ${t%60}s`:`${t}s`}(e))};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[n]),c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-background/80 backdrop-blur-sm",children:c.jsx("div",{className:"mx-4 max-w-md rounded-lg border border-destructive/50 bg-card p-6 shadow-lg",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[c.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:c.jsx(Yp,{className:"h-6 w-6 text-destructive"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Backend Unavailable"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Unable to connect to the backend server. Please check your connection and try again."}),n&&c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-md bg-muted/50 px-3 py-2",children:[c.jsx(sf,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Downtime: ",c.jsx("span",{className:"font-mono",children:a||"0s"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-md bg-muted/50 px-3 py-2",children:[c.jsx(Ip,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["Detected: ",gL(n)]})]})]}),e&&c.jsxs("div",{className:"mt-3 rounded-md bg-destructive/10 p-3",children:[c.jsx("p",{className:"text-sm font-medium text-destructive",children:"Error Details:"}),c.jsx("p",{className:"mt-1 text-xs text-destructive/80",children:e})]})]}),s&&c.jsx(vl,{onClick:s,disabled:t,variant:"default",className:"mt-2",children:t?c.jsxs(c.Fragment,{children:[c.jsx(fg,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):c.jsxs(c.Fragment,{children:[c.jsx(fg,{className:"mr-2 h-4 w-4"}),"Retry Connection"]})})]})})})}function vL({children:e,checkInterval:t=3e4,enabled:n=!0}){const{isHealthy:s,isLoading:a,error:r,downtimeStart:i,checkHealth:o}=function(e={}){const{interval:t=3e4,immediate:n=!0,enabled:s=!0}=e,[a,r]=p.useState(!0),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),f=p.useRef(null),g=p.useRef(!0),x=p.useCallback(async()=>{if(s){o(!0),u(null);try{const e=await fL();g.current&&(r(!0),c(e),u(null),m(null))}catch(wW){g.current&&(r(!1),u(wW instanceof Error?wW:new Error("Unknown error")),m(e=>e??Date.now()))}finally{g.current&&o(!1)}}},[s]);return p.useEffect(()=>(g.current=!0,s&&(n&&x(),f.current=setInterval(()=>{x()},t)),()=>{g.current=!1,f.current&&(clearInterval(f.current),f.current=null)}),[s,n,t,x]),{isHealthy:a,isLoading:i,healthData:l,error:d,downtimeStart:h,checkHealth:x}}({interval:t,immediate:!0,enabled:n});return c.jsxs(c.Fragment,{children:[e,!s&&c.jsx(xL,{error:r?.message,isLoading:a,downtimeStart:i,onRetry:o})]})}const yL={};function bL(e,t){yL[e],yL[e]=t}function wL({open:e,onOpenChange:t,filter:n={},onApply:s,onReset:a,roleService:r}){const[i,o]=p.useState(n),[l,d]=p.useState([]),[u,h]=p.useState(!1),[m,f]=p.useState(""),[g,x]=p.useState(!1);p.useEffect(()=>{o(n)},[n]),p.useEffect(()=>{e&&r?v():(d([]),f(""))},[e,r]);const v=async()=>{if(r){h(!0);try{const e=await r.fetchRoles(!0);d(e)}catch(wW){}finally{h(!1)}}},y=p.useMemo(()=>{if(!m.trim())return l;const e=m.toLowerCase();return l.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[l,m]),b=p.useMemo(()=>i.role?l.find(e=>e.name===i.role||e.id===i.role):null,[i.role,l]),w=(e,t)=>{o(n=>({...n,[e]:t}))},S=()=>{w("role",void 0),f("")},j=Object.values(i).some(e=>void 0!==e&&""!==e);return c.jsx(uP,{open:e,onOpenChange:t,children:c.jsxs(fP,{side:"right",className:"w-[700px] sm:w-[800px] flex flex-col p-0 h-full",children:[c.jsxs(gP,{className:"px-4 pt-4 pb-3 flex-shrink-0",children:[c.jsx(vP,{className:"text-base",children:"Advanced Filters"}),c.jsx(yP,{className:"text-xs",children:"Add multiple criteria to filter users. All filters are combined with AND logic."})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 min-h-0",children:c.jsxs("div",{className:"space-y-4 pb-4",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Dl,{htmlFor:"role",className:"text-xs",children:"Role"}),r?c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Sg,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),c.jsx(kl,{id:"role",type:"text",placeholder:"Search roles...",value:m,onChange:e=>{f(e.target.value),x(!0)},onFocus:()=>x(!0),className:"pl-8 h-8 text-xs pr-8"}),b&&c.jsx("button",{type:"button",onClick:S,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear selection",children:c.jsx("span",{className:"text-xs",children:""})})]}),g&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>x(!1)}),c.jsx("div",{className:"absolute z-50 mt-1 w-full bg-popover border rounded-md shadow-md max-h-[300px] overflow-y-auto",children:u?c.jsx("div",{className:"flex items-center justify-center py-4",children:c.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):0===y.length?c.jsx("div",{className:"px-3 py-4 text-xs text-muted-foreground text-center",children:m?"No roles found":"No roles available"}):c.jsxs(c.Fragment,{children:[!m&&c.jsxs("button",{type:"button",onClick:()=>{S(),x(!1)},className:"w-full px-3 py-2 text-left text-xs hover:bg-accent flex items-center gap-2 "+(i.role?"":"bg-accent"),children:[!i.role&&c.jsx(Up,{className:"h-3 w-3"}),c.jsx("span",{className:i.role?"":"font-medium",children:"All roles"})]}),y.map(e=>c.jsx("button",{type:"button",onClick:()=>{return t=e.name,w("role",t),x(!1),void f("");var t},className:"w-full px-3 py-2 text-left text-xs hover:bg-accent flex items-start gap-2 "+(i.role===e.name?"bg-accent":""),children:c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[i.role===e.name&&c.jsx(Up,{className:"h-3 w-3 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"truncate "+(i.role===e.name?"font-medium":""),children:[e.name,e.isSystem&&c.jsx("span",{className:"ml-1 text-muted-foreground",children:"(System)"})]}),e.description&&c.jsx("div",{className:"text-muted-foreground truncate mt-0.5",children:e.description})]})]})},e.id))]})})]}),b&&!g&&c.jsxs("div",{className:"mt-1.5 px-2 py-1.5 bg-muted rounded text-xs",children:[c.jsx("div",{className:"font-medium",children:b.name}),b.description&&c.jsx("div",{className:"text-muted-foreground truncate mt-0.5",children:b.description})]})]}):c.jsxs(ox,{value:i.role||"all",onValueChange:e=>{w("role","all"===e?void 0:e)},children:[c.jsx(cx,{id:"role",className:"h-8 text-xs",children:c.jsx(lx,{placeholder:"All roles"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"all",children:"All roles"}),c.jsx(mx,{value:"Admin",children:"Admin"}),c.jsx(mx,{value:"User",children:"User"}),c.jsx(mx,{value:"Manager",children:"Manager"}),c.jsx(mx,{value:"Editor",children:"Editor"})]})]})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Dl,{htmlFor:"status",className:"text-xs",children:"Status"}),c.jsxs(ox,{value:i.status||"all",onValueChange:e=>{w("status","all"===e?void 0:e)},children:[c.jsx(cx,{id:"status",className:"h-8 text-xs",children:c.jsx(lx,{placeholder:"All statuses"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"all",children:"All statuses"}),c.jsx(mx,{value:"active",children:"Active"}),c.jsx(mx,{value:"inactive",children:"Inactive"}),c.jsx(mx,{value:"suspended",children:"Suspended"}),c.jsx(mx,{value:"pending",children:"Pending"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Dl,{className:"text-xs",children:"Created Date Range"}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Dl,{htmlFor:"createdAfter",className:"text-xs text-muted-foreground",children:"Created After"}),c.jsx(kl,{id:"createdAfter",type:"date",className:"h-8 text-xs",value:i.createdAfter?new Date(i.createdAfter).toISOString().split("T")[0]:"",onChange:e=>w("createdAfter",e.target.value?new Date(e.target.value):void 0)})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx(Dl,{htmlFor:"createdBefore",className:"text-xs text-muted-foreground",children:"Created Before"}),c.jsx(kl,{id:"createdBefore",type:"date",className:"h-8 text-xs",value:i.createdBefore?new Date(i.createdBefore).toISOString().split("T")[0]:"",onChange:e=>w("createdBefore",e.target.value?new Date(e.target.value):void 0)})]})]})]})}),c.jsx(xP,{className:"px-4 py-3 border-t bg-background flex-shrink-0",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vl,{variant:"outline",size:"sm",onClick:()=>{o(n),f(""),t(!1)},className:"flex-1 h-8 text-xs",children:"Cancel"}),j&&c.jsx(vl,{variant:"outline",size:"sm",onClick:()=>{const e={};o(e),f(""),a?a():s(e),t(!1)},className:"flex-1 h-8 text-xs",children:"Reset"}),c.jsx(vl,{size:"sm",onClick:()=>{s(i),t(!1)},className:"flex-1 h-8 text-xs",children:"Apply"})]})})]})})}function SL({className:e,users:t=[],loading:n=!1,error:s=null,searchable:a=!0,searchPlaceholder:r="Search users...",showAvatar:i=!0,showRole:o=!0,showStatus:l=!0,showActions:d=!0,pagination:u,filter:h,onUserClick:m,onEdit:f,onDelete:g,onCreate:x,onSearch:v,onFilter:y,onStatusFilterChange:b,onPageChange:w,onPageSizeChange:S,customActions:j,onLock:C,onUnlock:k,onActivate:N,onDeactivate:_}){const P=Ua(),[E,R]=p.useState(!1),[A,T]=p.useState(h||{}),[M,D]=p.useState(!1),[L,F]=p.useState(!1),[I,O]=p.useState(!1),[z,B]=p.useState(!1),[$,U]=p.useState(null),V=()=>{const e={};T(e),y?.(e)},q=Object.values(A).some(e=>void 0!==e&&""!==e),H=({status:e,lockedUntil:t})=>{const n=Ua(),s=t&&new Date(t)>new Date;return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:al("capitalize",{active:"text-muted-foreground",inactive:"text-muted-foreground",suspended:"text-muted-foreground",pending:"text-muted-foreground"}[e],n.textSize),children:e}),s&&c.jsx(zf,{className:al("text-red-500",n.iconSize)})]})},G=[OP({getDisplayName:e=>{const t=e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:(e=>e.firstName||e.lastName?`${e.firstName||""} ${e.lastName||""}`.trim():e.username||e.email)(e);return t},getAvatar:e=>e.avatar,getInitials:e=>(e=>{const t=(e.firstName||"").trim(),n=(e.lastName||"").trim();if(t||n)return`${t?t[0]:""}${(n?n[0]:"")||(t.length>1?t[1]:"")}`.toUpperCase();const s=(e.username||e.email||"").trim(),a=s.replace(/[^a-zA-Z]/g,"");return a.length>=2?a.slice(0,2).toUpperCase():s.length>=2?s.slice(0,2).toUpperCase():1===s.length?s[0].toUpperCase():"?"})(e),header:i?"User":"Name",showAvatar:i,onClick:m?e=>{m(e)}:void 0,size:i?250:200,additionalOptions:{id:i?"user":"name"}}),LP({accessorKey:"username",header:"Username",size:150}),LP({accessorKey:"email",header:"Email",size:250}),...o?[LP({accessorKey:"role",header:"Role",size:120,cell:e=>{const t=e.row.original,n=t.role||t.baseRole||"User";return c.jsx(mC,{variant:"outline",className:"text-[10px]",children:n})},additionalOptions:{id:"role",accessorFn:e=>e.role||e.baseRole||"User"}})]:[],...l?[LP({accessorKey:"status",header:"Status",size:110,cell:e=>{const t=e.row.original;return c.jsx(H,{status:e.getValue(),lockedUntil:t.lockedUntil})}})]:[],LP({accessorKey:"lastLogin",header:"Last Login",size:130,cell:e=>{return c.jsx("span",{className:al("text-muted-foreground",P.textSize),children:(t=e.getValue(),t?new Date(t).toLocaleDateString():"Never")});var t},additionalOptions:{id:"lastLogin",accessorFn:e=>e.lastLogin}}),...d?[zP({customActions:j,actions:[...k?[{icon:Of,onClick:e=>{U(e),F(!0)},showWhen:e=>Boolean(e.lockedUntil&&new Date(e.lockedUntil)>new Date),disabledWhen:e=>"active"!==e.status,title:e=>"active"!==e.status?"Cannot unlock inactive user":"Unlock",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[],...C?[{icon:zf,onClick:e=>{U(e),D(!0)},showWhen:e=>!Boolean(e.lockedUntil&&new Date(e.lockedUntil)>new Date),disabledWhen:e=>"active"!==e.status,title:e=>"active"!==e.status?"Cannot lock inactive user":"Lock",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[],..._?[{icon:ef,onClick:e=>{U(e),B(!0)},showWhen:e=>"active"===e.status,title:"Deactivate",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[],...N?[{icon:Xp,onClick:e=>{U(e),O(!0)},showWhen:e=>"active"!==e.status,title:"Activate",className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}]:[]]})]:[]];return c.jsxs("div",{className:al("w-full",e),children:[c.jsx($P,{data:t,columns:G,useDefaultColumns:!1,title:"Users",description:"Manage and view user accounts",onCreate:x,onFilterClick:()=>{R(!0)},hasActiveFilters:q,onResetFilters:()=>{V()},onSearch:v,viewId:"user-list",filterDefs:[{columnId:"status",title:"Status",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Pending",value:"pending"},{label:"Suspended",value:"suspended"}]}],onStatusFilterChange:e=>b?.(e),manualFiltering:!0,loading:n,manualPagination:Boolean(u&&w),serverPagination:u?{page:u.page,pageSize:u.pageSize,total:u.total,totalPages:u.totalPages}:void 0,onPageChange:w,onPageSizeChange:S}),c.jsx(wL,{open:E,onOpenChange:R,filter:A,onApply:e=>{T(e),y?.(e)},onReset:V}),c.jsx(jE,{open:M,onOpenChange:D,title:"Lock Account",description:$?`Are you sure you want to lock ${$.firstName||$.email}'s account? The account will be locked for 60 minutes, preventing login access.`:void 0,confirmAction:{label:"Lock Account",variant:"destructive",onClick:async()=>{$&&C&&(await C($),D(!1))}}}),c.jsx(jE,{open:L,onOpenChange:F,title:"Unlock Account",description:$?`Are you sure you want to unlock ${$.firstName||$.email}'s account? This will immediately restore their login access.`:void 0,confirmAction:{label:"Unlock Account",variant:"default",onClick:async()=>{$&&k&&(await k($),F(!1))}}}),c.jsx(jE,{open:I,onOpenChange:O,title:"Activate User",description:$?`Are you sure you want to activate ${$.firstName||$.email}? This will restore their access to the system.`:void 0,confirmAction:{label:"Activate",variant:"default",onClick:async()=>{$&&N&&(await N($),O(!1))}}}),c.jsx(jE,{open:z,onOpenChange:B,title:"Deactivate User",description:$?`Are you sure you want to deactivate ${$.firstName||$.email}? This will prevent them from accessing the system.`:void 0,confirmAction:{label:"Deactivate",variant:"destructive",onClick:async()=>{$&&_&&(await _($),B(!1))}}})]})}function jL({open:e,onOpenChange:t,user:n,roleService:s,onSubmit:a,loading:r=!1}){const[i,o]=p.useState([]),[l,d]=p.useState([]),[u,h]=p.useState([]),[m,f]=p.useState(!1),[g,x]=p.useState(""),[v,y]=p.useState(!1),b=p.useRef(null),{toast:w}=Rk();$a();const S=Ua();p.useEffect(()=>{e&&n?C():(h([]),d([]),x(""))},[e,n]);const j=p.useMemo(()=>{if(!g.trim())return i;const e=g.toLowerCase();return i.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[i,g]),C=async()=>{if(n){f(!0);try{const e=(await s.fetchRoles(!0)).filter(e=>!e.isSystem);o(e);const t=await s.getUserDirectRoles(n.id);d(t),h(t.map(e=>e.id))}catch(wW){}finally{f(!1)}}},k=(e,t="")=>e instanceof Ta?0===e.status?`${t}Network error: Unable to connect to the server. Please check your connection or contact support if the problem persists.`:`${t}${e.message}`:e instanceof TypeError&&e.message.includes("Failed to fetch")?`${t}Network error: Unable to connect to the server. This could be due to CORS configuration or server connectivity issues.`:e instanceof Error?`${t}${e.message}`:`${t}An unexpected error occurred. Please try again.`,N=e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},_=i.length>0&&i.every(e=>u.includes(e.id));if(!n)return null;const P=()=>{t(!1)},E=l.map(e=>e.id),R=u.filter(e=>!E.includes(e)),A=E.filter(e=>!u.includes(e)),T=R.map(e=>i.find(t=>t.id===e)?.name).filter(Boolean),M=A.map(e=>l.find(t=>t.id===e)?.name).filter(Boolean);return c.jsxs(SE,{open:e,onClose:P,title:`Assign Roles to ${n.firstName||n.username||n.email}`,showCancelButton:!0,onCancel:P,showSubmitButton:!0,onSubmit:()=>{b.current&&b.current.requestSubmit()},onEscape:P,autoSubmitShortcut:!0,autoClearShortcut:!0,onClear:()=>{x(""),h(l.map(e=>e.id)),b.current&&b.current.reset()},maxWidth:"800px",loading:r,children:[c.jsx("form",{ref:b,onSubmit:async e=>{e.preventDefault(),n&&y(!0)},id:"assign-roles-form",className:"space-y-6 w-full",children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",S.paddingContainer),children:c.jsxs("div",{className:al("space-y-6",S.spacingFormSection),children:[c.jsxs(Fl,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Il,{className:al(S.textSizeLabel,"font-medium"),children:"Assign Roles"}),c.jsx(vl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=i.map(e=>e.id),t=e.length>0&&e.every(e=>u.includes(e));h(t?[]:e)},disabled:r||0===i.length,className:al(S.buttonHeightSmall,S.paddingCell,S.textSizeSmall,"font-medium"),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[_?c.jsx(Ag,{className:S.iconSizeSmall}):c.jsx(Mg,{className:S.iconSizeSmall}),c.jsx("span",{children:_?"Deselect All":"Select All"})]})})]}),c.jsx(Ol,{children:m?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex gap-2 mb-3",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Sg,{className:al("absolute left-2.5 top-1/2 transform -translate-y-1/2 text-muted-foreground",S.iconSizeSmall)}),c.jsx(kl,{type:"text",placeholder:"Search roles...",value:g,onChange:e=>x(e.target.value),disabled:r,className:al("pl-8",S.inputHeight,S.textSize)})]})}),c.jsx("div",{className:al("space-y-2 rounded-md border max-h-[500px] overflow-y-auto",S.paddingForm),children:0===i.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No custom roles available. Create a role first."}):0===j.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:g?"No roles match your search":"No roles available"}):c.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:j.map(e=>c.jsxs("label",{className:"flex items-start gap-3 rounded-md border p-3 pl-4 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>N(e.id),disabled:r,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",title:e.description,children:e.description}),e.permissions.length>0&&c.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[e.permissions.length," permission",1!==e.permissions.length?"s":""]})]})]},e.id))})})]})}),c.jsx(zl,{className:S.textSizeSmall,children:"Select custom roles for this user. System roles are assigned via the user's base role."})]}),u.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[u.length," ",1===u.length?"role":"roles"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:u.map(e=>{const t=i.find(t=>t.id===e);return t?c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),N(e)},disabled:r,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(ax,{className:"h-3 w-3 text-destructive"})})]},e):null})})]})]})})}),c.jsx(jE,{open:v,onOpenChange:e=>{y(e)},title:"Confirm Role Assignment",description:c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"mb-3 text-xs",children:["Are you sure you want to update the roles for"," ",c.jsx("span",{className:"font-semibold",children:n.firstName||n.username||n.email}),"?"]}),(T.length>0||M.length>0)&&c.jsxs("div",{className:"space-y-1.5",children:[T.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Adding ",T.length," role",1!==T.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:T.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]}),M.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Removing ",M.length," role",1!==M.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:M.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]})]}),0===T.length&&0===M.length&&c.jsx("p",{className:"text-xs text-muted-foreground",children:"No changes to apply."})]}),confirmAction:{label:r?"Saving...":"Confirm & Save",onClick:async()=>{if(n)try{const e=l.map(e=>e.id),r=u,i=r.filter(t=>!e.includes(t)),o=e.filter(e=>!r.includes(e));for(const t of o)try{await s.removeRoleFromUser(n.id,t)}catch(wW){const t=k(wW,"Failed to remove role. ");return y(!1),void w({title:"Failed to Remove Role",description:t,variant:"destructive"})}for(const t of i)try{await s.assignRoleToUser(n.id,t)}catch(wW){const t=k(wW,"Failed to assign role. ");return y(!1),void w({title:"Failed to Assign Role",description:t,variant:"destructive"})}await a(n.id,u),y(!1),w({title:"Roles Updated",description:"User roles have been successfully updated"}),t(!1)}catch(wW){const t=k(wW,"Failed to update roles. ");y(!1),w({title:"Failed to Update Roles",description:t,variant:"destructive"})}},loading:r,disabled:r||m},cancelAction:{label:"Cancel",variant:"outline",disabled:r}})]})}function CL({open:e,onOpenChange:t,user:n,groupService:s,onSubmit:a,loading:r=!1}){const i=p.useRef(null),[o,l]=p.useState([]),[d,u]=p.useState([]),[h,m]=p.useState([]),[f,g]=p.useState(!1),[x,v]=p.useState(""),[y,b]=p.useState(!1),{toast:w}=Rk();$a();const S=Ua();p.useEffect(()=>{e&&n?C():(m([]),u([]),v(""))},[e,n]);const j=p.useMemo(()=>{if(!x.trim())return o;const e=x.toLowerCase();return o.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[o,x]),C=async()=>{if(n){g(!0);try{const e=await s.fetchGroups(!0);l(e);const t=await s.getUserGroups(n.id);u(t),m(t.map(e=>e.id))}catch(wW){}finally{g(!1)}}},k=async()=>{if(n)try{const e=d.map(e=>e.id),r=h,i=r.filter(t=>!e.includes(t)),o=e.filter(e=>!r.includes(e));for(const t of o)try{await s.removeUserFromGroup(n.id,t)}catch(wW){const t=N(wW,"Failed to remove user from group. ");return b(!1),void w({title:"Failed to Remove User from Group",description:t,variant:"destructive"})}for(const t of i)try{await s.addUserToGroup(n.id,t)}catch(wW){const t=N(wW,"Failed to add user to group. ");return b(!1),void w({title:"Failed to Add User to Group",description:t,variant:"destructive"})}await a(n.id,h),b(!1),w({title:"Groups Updated",description:"User groups have been successfully updated"}),t(!1)}catch(wW){const t=N(wW,"Failed to update groups. ");b(!1),w({title:"Failed to Update Groups",description:t,variant:"destructive"})}},N=(e,t="")=>e instanceof Ta?0===e.status?`${t}Network error: Unable to connect to the server. Please check your connection or contact support if the problem persists.`:`${t}${e.message}`:e instanceof TypeError&&e.message.includes("Failed to fetch")?`${t}Network error: Unable to connect to the server. This could be due to CORS configuration or server connectivity issues.`:e instanceof Error?`${t}${e.message}`:`${t}An unexpected error occurred. Please try again.`,_=e=>{m(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},P=o.length>0&&o.every(e=>h.includes(e.id));if(!n)return null;const E=()=>{t(!1)},R=d.map(e=>e.id),A=h.filter(e=>!R.includes(e)),T=R.filter(e=>!h.includes(e)),M=A.map(e=>o.find(t=>t.id===e)?.name).filter(Boolean),D=T.map(e=>d.find(t=>t.id===e)?.name).filter(Boolean);return c.jsxs(SE,{open:e,onClose:E,title:`Assign Groups to ${n.firstName||n.username||n.email}`,showCancelButton:!0,onCancel:E,showSubmitButton:!0,onSubmit:()=>{i.current&&i.current.requestSubmit()},maxWidth:"800px",loading:r,onEscape:y?k:E,autoSubmitShortcut:!0,autoClearShortcut:!0,onClear:()=>{i.current&&i.current.reset()},children:[c.jsx("form",{ref:i,onSubmit:async e=>{e.preventDefault(),n&&b(!0)},id:"assign-groups-form",className:"space-y-6 w-full",children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",S.paddingContainer),children:c.jsxs("div",{className:al("space-y-6",S.spacingFormSection),children:[c.jsxs(Fl,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Il,{className:al(S.textSizeLabel,"font-medium"),children:"Assign Groups"}),c.jsx(vl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=o.map(e=>e.id),t=e.length>0&&e.every(e=>h.includes(e));m(t?[]:e)},disabled:r||0===o.length,className:al(S.buttonHeightSmall,S.paddingCell,S.textSizeSmall,"font-medium"),children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[P?c.jsx(Ag,{className:S.iconSizeSmall}):c.jsx(Mg,{className:S.iconSizeSmall}),c.jsx("span",{children:P?"Deselect All":"Select All"})]})})]}),c.jsx(Ol,{children:f?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex gap-2 mb-3",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Sg,{className:al("absolute left-2.5 top-1/2 transform -translate-y-1/2 text-muted-foreground",S.iconSizeSmall)}),c.jsx(kl,{type:"text",placeholder:"Search groups...",value:x,onChange:e=>v(e.target.value),disabled:r,className:al("pl-8",S.inputHeight,S.textSize)})]})}),c.jsx("div",{className:al("space-y-2 rounded-md border max-h-[500px] overflow-y-auto",S.paddingForm),children:0===o.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No groups available. Create a group first."}):0===j.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:x?"No groups match your search":"No groups available"}):c.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:j.map(e=>c.jsxs("label",{className:"flex items-start gap-3 rounded-md border p-3 pl-4 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:h.includes(e.id),onChange:()=>_(e.id),disabled:r||!e.isActive,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),!e.isActive&&c.jsx(mC,{variant:"secondary",className:"text-xs",children:"Inactive"})]}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",title:e.description,children:e.description}),c.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[void 0!==e.memberCount&&c.jsxs("span",{children:[e.memberCount," member",1!==e.memberCount?"s":""]}),void 0!==e.memberCount&&void 0!==e.roleCount&&"  ",void 0!==e.roleCount&&c.jsxs("span",{children:[e.roleCount," role",1!==e.roleCount?"s":""]})]})]})]},e.id))})})]})}),c.jsx(zl,{className:S.textSizeSmall,children:"Select groups for this user. The user will inherit all roles from these groups."})]}),h.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[h.length," ",1===h.length?"group":"groups"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:h.map(e=>{const t=o.find(t=>t.id===e);return t?c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),_(e)},disabled:r,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(ax,{className:"h-3 w-3 text-destructive"})})]},e):null})})]})]})})}),c.jsx(jE,{open:y,onOpenChange:e=>{b(e)},title:"Confirm Group Assignment",description:c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"mb-3 text-xs",children:["Are you sure you want to update the groups for"," ",c.jsx("span",{className:"font-semibold",children:n.firstName||n.username||n.email}),"? The user will inherit all roles from the assigned groups."]}),(M.length>0||D.length>0)&&c.jsxs("div",{className:"space-y-1.5",children:[M.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Adding ",M.length," group",1!==M.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:M.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]}),D.length>0&&c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"font-medium text-muted-foreground",children:["Removing ",D.length," group",1!==D.length?"s":"",":"]}),c.jsx("div",{className:"mt-1 space-y-0.5",children:D.map(e=>c.jsxs("div",{className:"text-foreground pl-2",children:[" ",e]},e))})]})]}),0===M.length&&0===D.length&&c.jsx("p",{className:"text-xs text-muted-foreground",children:"No changes to apply."})]}),confirmAction:{label:r?"Saving...":"Confirm & Save",onClick:k,loading:r,disabled:r||f},cancelAction:{label:"Cancel",variant:"outline",disabled:r}})]})}function kL({open:e,onOpenChange:t,user:n,roleService:s,groupService:a}){const[r,i]=p.useState(!1),[o,l]=p.useState([]),[d,u]=p.useState([]),[h,m]=p.useState(null),[f,g]=p.useState("");p.useEffect(()=>{e&&n?x():(l([]),u([]),m(null),g(""))},[e,n]);const x=async()=>{if(n){i(!0),m(null);try{const[e,t]=await Promise.all([a.getUserGroups(n.id),s.getUserAllRoles(n.id)]);l(e),u(t)}catch(wW){m("Failed to load permissions data")}finally{i(!1)}}},v=p.useMemo(()=>{const e=new Map;return d.forEach(t=>{t.permissions?.forEach(t=>{e.has(t.id)||e.set(t.id,t)})}),Array.from(e.values())},[d]),y=p.useMemo(()=>{if(!f.trim())return v;const e=f.toLowerCase();return v.filter(t=>t.name.toLowerCase().includes(e)||t.resource?.toLowerCase().includes(e)||t.action?.toLowerCase().includes(e))},[v,f]);return n?c.jsx(uP,{open:e,onOpenChange:t,children:c.jsxs(fP,{side:"right",className:"overflow-y-auto",style:{width:"700px",maxWidth:"1000px"},children:[c.jsxs(gP,{children:[c.jsxs(vP,{className:"flex items-center gap-2",children:[c.jsx(Ng,{className:"h-5 w-5"}),"Permissions & Access"]}),c.jsxs(yP,{children:["View all groups, roles, and permissions for"," ",n.firstName||n.username||n.email]})]}),c.jsxs("div",{className:"mt-6 space-y-6",children:[r&&c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}),h&&c.jsx("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-4 text-sm text-destructive",children:h}),!r&&!h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[c.jsx(ex,{className:"h-4 w-4"}),"Groups (",o.length,")"]}),0===o.length?c.jsx("div",{className:"rounded-md border p-4 text-center text-sm text-muted-foreground",children:"User is not assigned to any groups"}):c.jsx("div",{className:"space-y-2",children:o.map(e=>c.jsx("div",{className:"rounded-md border p-3 hover:bg-muted/50",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm",children:e.name}),!e.isActive&&c.jsx(mC,{variant:"secondary",className:"text-xs",children:"Inactive"})]}),e.description&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),void 0!==e.roleCount&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.roleCount," role",1!==e.roleCount?"s":""," assigned"]})]})})},e.id))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[c.jsx(Ng,{className:"h-4 w-4"}),"Roles (",d.length,")"]}),0===d.length?c.jsx("div",{className:"rounded-md border p-4 text-center text-sm text-muted-foreground",children:"User has no assigned roles"}):c.jsx("div",{className:"space-y-2",children:d.map(e=>c.jsx("div",{className:"rounded-md border p-3 hover:bg-muted/50",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm",children:e.name}),e.isSystem&&c.jsx(mC,{variant:"secondary",className:"text-xs",children:"System"})]}),e.description&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),e.permissions&&e.permissions.length>0&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.permissions.length," permission",1!==e.permissions.length?"s":""]})]})})},e.id))})]}),v.length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[c.jsx(Ef,{className:"h-4 w-4"}),"Access Rights (",y.length,f&&y.length!==v.length?` of ${v.length}`:"",")"]})}),c.jsx("div",{className:"mb-4",children:c.jsx(EE,{placeholder:"Search permissions by name, resource, or action...",value:f,onChange:e=>g(e.target.value)})}),0===y.length?c.jsxs("div",{className:"rounded-md border p-4 text-center text-sm text-muted-foreground",children:['No permissions found matching "',f,'"']}):c.jsx("div",{className:"rounded-md border overflow-hidden max-h-[500px] overflow-y-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-muted/50 sticky top-0 z-10 border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left font-medium text-xs uppercase text-muted-foreground",children:"Resource"}),c.jsx("th",{className:"px-4 py-2 text-left font-medium text-xs uppercase text-muted-foreground",children:"Permission"}),y.some(e=>e.action)&&c.jsx("th",{className:"px-4 py-2 text-left font-medium text-xs uppercase text-muted-foreground",children:"Action"})]})}),c.jsx("tbody",{children:y.map((e,t)=>c.jsxs("tr",{className:"border-b hover:bg-muted/30 "+(t%2==0?"bg-background":"bg-muted/10"),children:[c.jsx("td",{className:"px-4 py-2 text-xs font-medium",children:e.resource||"other"}),c.jsx("td",{className:"px-4 py-2 text-xs",children:e.name}),y.some(e=>e.action)&&c.jsx("td",{className:"px-4 py-2 text-xs text-muted-foreground",children:e.action||"-"})]},e.id))})]})})]})]})]})]})}):null}function NL(e){return{id:e.id,name:e.name,description:e.description,permissions:e.permissions.map(e=>({id:e,name:e,resource:e.split(":")[0]||e,action:e.split(":")[1]||"read"})),isSystem:e.is_system_role,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}function _L(e){const t={};return void 0!==e.name&&(t.name=e.name),void 0!==e.description&&(t.description=e.description),void 0!==e.permissions&&(t.permissions=e.permissions),t}class PL{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchRoles(e=!0){try{const t=new URLSearchParams;t.append("include_system_roles",e.toString());return((await this.apiClient.get(`${this.endpoints.roles}?${t.toString()}`,{requiresAuth:!0})).roles||[]).map(NL)}catch(t){throw t}}async fetchRole(e){try{const t=this.endpoints.roles.replace(/\/$/,"");return NL(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createRole(e){try{const t=_L(e);return NL(await this.apiClient.post(this.endpoints.roles,t,{requiresAuth:!0}))}catch(t){throw t}}async updateRole(e,t){try{const n=_L(t),s=this.endpoints.roles.replace(/\/$/,"");return NL(await this.apiClient.patch(`${s}/${e}`,n,{requiresAuth:!0}))}catch(n){throw n}}async deleteRole(e){try{const t=this.endpoints.roles.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async assignRoleToUser(e,t){try{await this.apiClient.post(`${this.endpoints.roles}/assign`,{user_id:e,role_id:t},{requiresAuth:!0})}catch(n){throw n}}async removeRoleFromUser(e,t){try{const n=this.endpoints.roles.replace(/\/$/,"");await this.apiClient.delete(`${n}/assign/${e}/${t}`,{requiresAuth:!0})}catch(n){throw n}}async getUserDirectRoles(e){try{const t=this.endpoints.roles.replace(/\/$/,"");return((await this.apiClient.get(`${t}/users/${e}/direct`,{requiresAuth:!0})).roles||[]).map(NL)}catch(t){throw t}}async getUserAllRoles(e){try{return((await this.apiClient.get(`/api/v1/users/${e}/roles/all`,{requiresAuth:!0})).roles||[]).map(NL)}catch(t){throw t}}}function EL(e){return{id:e.id,tenantId:e.tenant_id,name:e.name,description:e.description,isActive:e.is_active,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),memberCount:e.members_count,roleCount:e.roles_count}}function RL(e){const t={};return void 0!==e.name&&(t.name=e.name),void 0!==e.description&&(t.description=e.description),void 0!==e.is_active&&(t.is_active=e.is_active),t}class AL{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchGroups(e=!1){try{const t=new URLSearchParams;t.append("include_inactive",e.toString());return((await this.apiClient.get(`${this.endpoints.groups}?${t.toString()}`,{requiresAuth:!0})).groups||[]).map(EL)}catch(t){throw t}}async fetchGroup(e){try{const t=this.endpoints.groups.replace(/\/$/,"");return EL(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createGroup(e){try{const t=RL(e);return EL(await this.apiClient.post(this.endpoints.groups,t,{requiresAuth:!0}))}catch(t){throw t}}async updateGroup(e,t){try{const n=RL({...t,is_active:t.is_active}),s=this.endpoints.groups.replace(/\/$/,"");return EL(await this.apiClient.patch(`${s}/${e}`,n,{requiresAuth:!0}))}catch(n){throw n}}async deleteGroup(e){try{const t=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async addUserToGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.post(`${n}/${t}/users`,{user_id:e},{requiresAuth:!0})}catch(n){throw n}}async removeUserFromGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.delete(`${n}/${t}/users/${e}`,{requiresAuth:!0})}catch(n){throw n}}async getGroupMembers(e){try{const t=this.endpoints.groups.replace(/\/$/,"");return await this.apiClient.get(`${t}/${e}/users`,{requiresAuth:!0})||[]}catch(t){throw t}}async addRoleToGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.post(`${n}/${e}/roles`,{role_id:t},{requiresAuth:!0})}catch(n){throw n}}async removeRoleFromGroup(e,t){try{const n=this.endpoints.groups.replace(/\/$/,"");await this.apiClient.delete(`${n}/${e}/roles/${t}`,{requiresAuth:!0})}catch(n){throw n}}async getGroupRoles(e){try{const t=this.endpoints.groups.replace(/\/$/,"");return(await this.apiClient.get(`${t}/${e}/roles`,{requiresAuth:!0})||[]).map(e=>({id:e.id,name:e.name,description:e.description,permissions:e.permissions.map(e=>({id:e,name:e,resource:e.split(":")[0]||e,action:e.split(":")[1]||"read"})),isSystem:e.is_system_role,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}))}catch(t){throw t}}async getUserGroups(e){try{return((await this.apiClient.get(`/api/v1/users/${e}/groups`,{requiresAuth:!0})).groups||[]).map(EL)}catch(t){throw t}}}function TL({className:e,user:t,loading:n=!1,error:s=null,activities:a=[],showActivity:r=!0,showMetadata:i=!1,editable:o=!0,onEdit:l,onPasswordReset:d,onActivate:u,onDeactivate:h,onLock:m,onUnlock:f,customActions:g,onBack:x}){const[v,y]=p.useState("profile"),[b,w]=p.useState(!1),[S,j]=p.useState(!1),[C,k]=p.useState(""),[N,_]=p.useState(!1),[P,E]=p.useState(!1),[R,A]=p.useState(!1),[T,M]=p.useState(!1),[D,L]=p.useState(!1),[F,I]=p.useState(!1),[O,z]=p.useState(!1),[B,$]=p.useState(!1),[U,V]=p.useState(!1),{toast:q}=Rk(),H=Ua(),G=p.useMemo(()=>new PL({apiClient:Fa,endpoints:{roles:ma.ENDPOINTS.ROLES}}),[]),K=p.useMemo(()=>new AL({apiClient:Fa,endpoints:{groups:ma.ENDPOINTS.GROUPS}}),[]);if(n)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(s||!t)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:s?.message||"User not found"})});const W=()=>t.firstName||t.lastName?`${t.firstName||""} ${t.lastName||""}`.trim():t.username||t.email,Q=e=>{if(!e)return"N/A";try{const t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch(t){return"Invalid date"}},Y="active"===t.status,X=t.lockedUntil&&new Date(t.lockedUntil)>new Date;return c.jsxs(bl,{className:al("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(cC,{className:"h-20 w-20",children:t.avatar?c.jsx("img",{src:t.avatar,alt:W()}):c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-primary/10 text-2xl font-medium",children:W().charAt(0).toUpperCase()})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:W()}),t.username&&c.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.username]}),X&&c.jsxs("p",{className:"text-sm font-medium text-destructive mt-1 flex items-center gap-1.5",children:[c.jsx(zf,{className:"h-3.5 w-3.5"}),"Account locked until ",Q(t.lockedUntil)]}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(mC,{variant:{active:"default",inactive:"secondary",suspended:"destructive",pending:"outline"}[t.status],children:t.status}),c.jsx(mC,{variant:"outline",children:t.role||t.baseRole||"User"})]})]})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:g?.(t)}),c.jsx("div",{children:c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",size:"sm",className:al("h-8 px-2 text-xs"),"aria-label":"Actions",children:c.jsx(uf,{className:"h-3 w-3"})})}),c.jsxs(JS,{align:"end",className:"w-56",children:[o&&l&&c.jsxs(ej,{onClick:()=>l(t),children:[c.jsx(Tg,{className:"mr-2 h-3.5 w-3.5"})," Edit user"]}),d&&c.jsxs(ej,{onClick:()=>{w(!0)},children:[c.jsx(Ef,{className:"mr-2 h-3.5 w-3.5"})," Reset password"]}),c.jsxs(ej,{onClick:()=>z(!0),children:[c.jsx(tx,{className:"mr-2 h-3.5 w-3.5"})," Assign roles"]}),c.jsxs(ej,{onClick:()=>$(!0),children:[c.jsx(ex,{className:"mr-2 h-3.5 w-3.5"})," Assign groups"]}),(o&&l||d)&&(u||h||m||f)&&c.jsx(aj,{}),(u||h)&&c.jsx(ej,{onClick:()=>{t&&(Y&&h?M(!0):!Y&&u&&A(!0))},disabled:Y&&!h||!Y&&!u,children:Y?c.jsxs(c.Fragment,{children:[c.jsx(ef,{className:"mr-2 h-3.5 w-3.5"})," Deactivate user"]}):c.jsxs(c.Fragment,{children:[c.jsx(Xp,{className:"mr-2 h-3.5 w-3.5"})," Activate user"]})}),(m||f)&&c.jsx(ej,{onClick:()=>{t&&(X&&f&&Y?I(!0):!X&&m&&Y&&L(!0))},disabled:!Y||X&&!f||!X&&(!m||!Y),children:X?c.jsxs(c.Fragment,{children:[c.jsx(Of,{className:"mr-2 h-3.5 w-3.5"})," Unlock account"]}):c.jsxs(c.Fragment,{children:[c.jsx(zf,{className:"mr-2 h-3.5 w-3.5"})," Lock account"]})})]})]})})]}),c.jsxs(sy,{value:v,onValueChange:e=>y(e),children:[c.jsx("div",{className:"border-b mb-4",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","profile"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("profile"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Jg,{className:"h-4 w-4"}),"Profile"]})}),c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","login"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("login"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Ng,{className:"h-4 w-4"}),"Login & Security"]})}),r&&c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","activity"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("activity"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Cf,{className:"h-4 w-4"}),"Activity"]})}),i&&t.metadata&&c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","metadata"===v?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>y("metadata"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(lf,{className:"h-4 w-4"}),"Metadata"]})})]})}),c.jsxs("div",{className:"mt-0",children:["profile"===v&&c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Contact Information"}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Email"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.email})]}),t.username&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Username"}),c.jsxs("dd",{className:"mt-1 text-sm text-muted-foreground",children:["@",t.username]})]}),t.firstName||t.lastName?c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Full Name"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:W()})]}):null]})]}),(t.tenantId||t.permissions&&t.permissions.length>0)&&c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Account Details"}),c.jsxs("dl",{className:"space-y-3",children:[t.tenantId&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Tenant ID"}),c.jsx("dd",{className:"mt-1 text-xs text-muted-foreground font-mono",children:t.tenantId})]}),t.permissions&&t.permissions.length>0&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Permissions"}),c.jsx("dd",{className:"mt-1",children:c.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.permissions.slice(0,3).map(e=>c.jsx(mC,{variant:"outline",className:"text-xs",children:e},e)),t.permissions.length>3&&c.jsxs(mC,{variant:"outline",className:"text-xs",children:["+",t.permissions.length-3," more"]})]})})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Timeline"}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Member Since"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:Q(t.createdAt)})]}),t.updatedAt&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Updated"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:Q(t.updatedAt)})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"User ID"}),c.jsx("dd",{className:"mt-1 text-xs text-muted-foreground font-mono",children:t.id})]})]})]})]})}),"login"===v&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"mb-4 text-sm font-medium text-muted-foreground flex items-center gap-2",children:[c.jsx(Ng,{className:"h-4 w-4"}),"Authentication Status"]}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Email Verified"}),c.jsx("dd",{className:"mt-1",children:c.jsx(mC,{variant:t.isVerified?"default":"secondary",children:t.isVerified?"Verified":"Not Verified"})})]}),void 0!==t.isVerified&&!t.isVerified&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Verification Status"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:"This user has not verified their email address"})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Password Change Required"}),c.jsx("dd",{className:"mt-1",children:t.mustChangePassword?c.jsx(mC,{variant:"destructive",children:"Yes - Required on next login"}):c.jsx(mC,{variant:"outline",children:"No"})})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"mb-4 text-sm font-medium text-muted-foreground flex items-center gap-2",children:[c.jsx(sf,{className:"h-4 w-4"}),"Login History"]}),c.jsxs("dl",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Login"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.lastLogin?c.jsx("span",{className:"flex items-center gap-2",children:c.jsx("span",{children:Q(t.lastLogin)})}):c.jsx("span",{className:"text-muted-foreground italic",children:"Never logged in"})})]}),t.lastPasswordChange&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Password Change"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:Q(t.lastPasswordChange)})]}),void 0!==t.failedLoginAttempts&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Failed Login Attempts"}),c.jsx("dd",{className:"mt-1",children:t.failedLoginAttempts>0?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(mC,{variant:t.failedLoginAttempts>=5?"destructive":"secondary",children:[t.failedLoginAttempts," ",1===t.failedLoginAttempts?"attempt":"attempts"]}),t.failedLoginAttempts>=5&&c.jsx("span",{className:"text-xs text-destructive",children:"Warning: High number of failed attempts"})]}):c.jsx(mC,{variant:"outline",children:"None"})})]})]})]})]}),c.jsx("div",{className:"mt-6",children:c.jsxs(vl,{variant:"outline",onClick:()=>V(!0),className:"w-full sm:w-auto",children:[c.jsx(Ng,{className:"mr-2 h-4 w-4"}),"View All Groups, Roles & Permissions"]})}),(t.mustChangePassword||void 0!==t.failedLoginAttempts&&t.failedLoginAttempts>0||t.lockedUntil||!1===t.isVerified)&&c.jsxs("div",{className:"mt-6 rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-950",children:[c.jsx("h4",{className:"mb-2 text-sm font-medium text-amber-900 dark:text-amber-100",children:"Security Recommendations"}),c.jsxs("ul",{className:"space-y-1 text-sm text-amber-800 dark:text-amber-200",children:[!1===t.isVerified&&c.jsx("li",{children:" Email verification is pending - user should verify their email"}),t.mustChangePassword&&c.jsx("li",{children:" User must change password on next login"}),void 0!==t.failedLoginAttempts&&t.failedLoginAttempts>=3&&c.jsx("li",{children:" Multiple failed login attempts detected - consider reviewing account security"}),t.lockedUntil&&c.jsx("li",{children:" Account is currently locked - will unlock automatically"})]})]})]}),"activity"===v&&c.jsx("div",{className:"space-y-4",children:0===a.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx(Cf,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No activity found"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Recent user activity will appear here"})]}):c.jsx("div",{className:"space-y-2",children:a.map(e=>c.jsxs("div",{className:"flex items-start gap-3 rounded-lg border bg-card p-4 transition-colors hover:bg-accent/50",children:[c.jsx("div",{className:"mt-0.5 flex-shrink-0",children:(()=>{const t=e.eventType?.toLowerCase()||"";return t.includes("login")?c.jsx(Ng,{className:"h-4 w-4 text-green-600"}):t.includes("logout")?c.jsx(Ng,{className:"h-4 w-4 text-gray-600"}):t.includes("password")?c.jsx(Ef,{className:"h-4 w-4 text-orange-600"}):t.includes("lock")?c.jsx(zf,{className:"h-4 w-4 text-red-600"}):t.includes("unlock")?c.jsx(Of,{className:"h-4 w-4 text-blue-600"}):t.includes("activate")?c.jsx(Xp,{className:"h-4 w-4 text-green-600"}):t.includes("deactivate")?c.jsx(ef,{className:"h-4 w-4 text-red-600"}):t.includes("create")?c.jsx(Xp,{className:"h-4 w-4 text-blue-600"}):t.includes("update")?c.jsx(Tg,{className:"h-4 w-4 text-yellow-600"}):t.includes("delete")?c.jsx(ef,{className:"h-4 w-4 text-red-600"}):c.jsx(sf,{className:"h-4 w-4 text-muted-foreground"})})()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsx("p",{className:"text-sm font-medium",children:e.action}),(()=>{const t=e.severity?.toLowerCase();if(!t)return null;return c.jsx(mC,{variant:{critical:"destructive",high:"destructive",medium:"default",low:"secondary"}[t]||"outline",className:"text-xs",children:t})})()]}),e.details&&c.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.details}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(sf,{className:"h-3 w-3"}),e.timestamp?Q(e.timestamp):"N/A"]}),e.resource&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(lf,{className:"h-3 w-3"}),e.resource,e.resourceId&&c.jsxs("span",{className:"font-mono",children:["#",e.resourceId.slice(0,8)]})]}),e.ipAddress&&c.jsx("span",{className:"font-mono",children:e.ipAddress})]})]})]},e.id))})}),"metadata"===v&&t.metadata&&c.jsx("div",{className:"space-y-2",children:c.jsx("pre",{className:"rounded-lg bg-muted p-4 text-sm",children:JSON.stringify(t.metadata,null,2)})})]})]})]}),c.jsx(Zy,{open:S,onOpenChange:j,children:c.jsxs(tb,{className:"sm:max-w-md",children:[c.jsxs(nb,{children:[c.jsx(ab,{children:"Reset Password"}),c.jsxs(rb,{children:["A temporary password has been generated for ",W(),". Make sure to copy it before closing this dialog."]})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Temporary Password"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(kl,{type:"text",value:C,readOnly:!0,className:"font-mono text-sm"}),c.jsx(vl,{type:"button",variant:"outline",size:"icon",onClick:async()=>{try{await navigator.clipboard.writeText(C),_(!0),setTimeout(()=>_(!1),2e3)}catch(wW){}},title:"Copy password",children:N?c.jsx(Xp,{className:"h-4 w-4 text-green-600"}):c.jsx(rf,{className:"h-4 w-4"})})]}),N&&c.jsx("p",{className:"text-xs text-green-600",children:"Password copied to clipboard!"})]}),c.jsxs("div",{className:"rounded-lg bg-amber-50 p-3 text-sm text-amber-900 dark:bg-amber-950 dark:text-amber-100",children:[c.jsx("p",{className:"font-medium mb-1",children:"Important:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"This password will be set for the user"}),c.jsx("li",{children:"The user must change it on next login"}),c.jsx("li",{children:"Save this password securely - it cannot be retrieved again"})]})]})]}),c.jsxs(sb,{children:[c.jsx(vl,{variant:"outline",onClick:()=>j(!1),disabled:P,children:"Cancel"}),c.jsx(vl,{onClick:async()=>{if(t&&d){E(!0);try{await d(t,C),j(!1)}catch(e){}finally{E(!1)}}},disabled:P||!C,children:P?"Resetting...":"Confirm Reset"})]})]})}),c.jsx(Mb,{open:b,onOpenChange:w,children:c.jsxs(Fb,{children:[c.jsxs(Ib,{children:[c.jsx(zb,{children:"Reset Password"}),c.jsxs(Bb,{children:["Are you sure you want to reset the password for"," ",W(),"? A new temporary password will be generated that they must use on their next login."]})]}),c.jsxs(Ob,{children:[c.jsx(Ub,{asChild:!0,children:c.jsxs(vl,{variant:"outline",className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(ax,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx($b,{asChild:!0,children:c.jsxs(vl,{onClick:()=>{w(!1);const e=(()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*",t=crypto.getRandomValues(new Uint8Array(16));return Array.from(t).map(t=>e[t%70]).join("")})();k(e),j(!0),_(!1)},className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(fg,{className:H.iconSizeSmall}),c.jsx("span",{children:"Generate New Password"})]})})]})]})}),c.jsx(Mb,{open:R,onOpenChange:A,children:c.jsxs(Fb,{children:[c.jsxs(Ib,{children:[c.jsx(zb,{children:"Activate User"}),c.jsxs(Bb,{children:["Are you sure you want to activate ",W(),"? This will restore their access to the system."]})]}),c.jsxs(Ob,{children:[c.jsx(Ub,{asChild:!0,children:c.jsxs(vl,{variant:"outline",className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(ax,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx($b,{asChild:!0,children:c.jsxs(vl,{onClick:async()=>{t&&u&&(await u(t),A(!1))},className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(pg,{className:H.iconSizeSmall}),c.jsx("span",{children:"Activate"})]})})]})]})}),c.jsx(Mb,{open:T,onOpenChange:M,children:c.jsxs(Fb,{children:[c.jsxs(Ib,{children:[c.jsx(zb,{children:"Deactivate User"}),c.jsxs(Bb,{children:["Are you sure you want to deactivate ",W(),"? This will prevent them from accessing the system."]})]}),c.jsxs(Ob,{children:[c.jsx(Ub,{asChild:!0,children:c.jsxs(vl,{variant:"outline",className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(ax,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx($b,{asChild:!0,children:c.jsxs(vl,{variant:"destructive",onClick:async()=>{t&&h&&(await h(t),M(!1))},className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(mg,{className:H.iconSizeSmall}),c.jsx("span",{children:"Deactivate"})]})})]})]})}),c.jsx(Mb,{open:D,onOpenChange:L,children:c.jsxs(Fb,{children:[c.jsxs(Ib,{children:[c.jsx(zb,{children:"Lock Account"}),c.jsxs(Bb,{children:["Are you sure you want to lock ",W(),"'s account? The account will be locked for 60 minutes, preventing login access."]})]}),c.jsxs(Ob,{children:[c.jsx(Ub,{asChild:!0,children:c.jsxs(vl,{variant:"outline",className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(ax,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx($b,{asChild:!0,children:c.jsxs(vl,{variant:"destructive",onClick:async()=>{t&&m&&(await m(t),L(!1))},className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(Pp,{className:H.iconSizeSmall}),c.jsx("span",{children:"Lock Account"})]})})]})]})}),c.jsx(Mb,{open:F,onOpenChange:I,children:c.jsxs(Fb,{children:[c.jsxs(Ib,{children:[c.jsx(zb,{children:"Unlock Account"}),c.jsxs(Bb,{children:["Are you sure you want to unlock ",W(),"'s account? This will immediately restore their login access."]})]}),c.jsxs(Ob,{children:[c.jsx(Ub,{asChild:!0,children:c.jsxs(vl,{variant:"outline",className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(ax,{className:H.iconSizeSmall}),c.jsx("span",{children:"Cancel"})]})}),c.jsx($b,{asChild:!0,children:c.jsxs(vl,{onClick:async()=>{t&&f&&(await f(t),I(!1))},className:al("flex items-center gap-1.5",H.textSizeSmall),children:[c.jsx(Of,{className:H.iconSizeSmall}),c.jsx("span",{children:"Unlock Account"})]})})]})]})}),c.jsx(jL,{open:O,onOpenChange:z,user:t,roleService:G,onSubmit:async(e,t)=>{q({title:"Success",description:"Roles assigned successfully"})}}),c.jsx(CL,{open:B,onOpenChange:$,user:t,groupService:K,onSubmit:async(e,t)=>{q({title:"Success",description:"Groups assigned successfully"})}}),c.jsx(kL,{open:U,onOpenChange:V,user:t,roleService:G,groupService:K})]})}const ML={email:"",password:"",confirmPassword:"",firstName:"",lastName:"",username:"",role:"user"},DL=[{value:"user",label:"User"},{value:"admin",label:"Admin"},{value:"guest",label:"Guest"}];function LL({open:e,onOpenChange:t,onSubmit:n,loading:s=!1,error:a=null}){const r=Ua(),[i,o]=p.useState(ML),[l,d]=p.useState({}),[u,h]=p.useState(!1),[m,f]=p.useState(0),[g,x]=p.useState(null),v=p.useRef(null),y=p.useRef(null);p.useEffect(()=>{x(a)},[a]);const b=async e=>{e?.preventDefault(),(()=>{const e={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(e.email="Please enter a valid email address"):e.email="Email is required",i.password?i.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",i.confirmPassword?i.password!==i.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",i.firstName.trim()||(e.firstName="First name is required"),i.lastName.trim()||(e.lastName="Last name is required"),d(e),0===Object.keys(e).length})()&&h(!0)},w=p.useCallback(e=>{const t={};let n="Failed to create user. Please check the form and try again.";if(e instanceof Ta){n=e.message||n;const a={email:"email",password:"password",first_name:"firstName",lastName:"lastName",last_name:"lastName",firstName:"firstName",username:"username",role:"role",confirmPassword:"confirmPassword"};if(422===e.status||400===e.status)try{let n=null;try{n=JSON.parse(e.message)}catch{const t=e.toString();if(t.includes('"detail"')||t.includes("'detail'"))try{const e=t.match(/\{[\s\S]*\}/);e&&(n=JSON.parse(e[0]))}catch{}}n&&(n.detail&&Array.isArray(n.detail)?n.detail.forEach(e=>{if(e.loc&&Array.isArray(e.loc)&&e.loc.length>0){const n=e.loc[e.loc.length-1],s=a[n];if(s&&e.msg){let n=e.msg;e.type&&e.type.includes("value_error")&&(n=`Invalid value: ${e.msg}`),t[s]=n}}}):n.details&&"object"==typeof n.details&&Object.keys(n.details).forEach(e=>{const s=a[e];if(s){const a=n.details[e];t[s]="string"==typeof a?a:JSON.stringify(a)}}))}catch(s){}const r=n.toLowerCase();n.includes("Invalid email format")||n.includes("invalid email")?(t.email="The email address format is invalid. Please check and try again.",n="Invalid email format. Please correct the email address."):r.includes("email")&&!t.email&&(r.includes("already exists")||r.includes("duplicate")?(t.email="This email address is already in use. Please use a different email.",n="Email address already exists."):t.email=n),r.includes("password")&&!t.password&&(r.includes("too short")||r.includes("minimum")?t.password="Password must be at least 8 characters long.":r.includes("weak")||r.includes("strength")?t.password="Password does not meet security requirements.":t.password=n),r.includes("username")&&!t.username&&(r.includes("already exists")||r.includes("duplicate")?(t.username="This username is already taken. Please choose a different username.",n="Username already exists."):t.username=n)}else e instanceof Error&&(n=e.message||n);return{message:n,fieldErrors:t}},[]),S=(e,t)=>{o(n=>({...n,[e]:t})),l[e]&&d(t=>({...t,[e]:void 0})),g&&x(null)},j=()=>{o(ML),d({}),t(!1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{v.current?.focus()})},[e,m]);const C=p.useCallback(e=>{u&&(e.preventDefault(),e.stopPropagation(),h(!1))},[u]);return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:j,title:"Create User",maxWidth:"500px",loading:s,showClearButton:!0,onClear:()=>{o({...ML}),d({}),x(null),f(e=>e+1)},formSelector:y,onSubmit:b,onEscape:u?C:void 0,autoClearShortcut:!0,showCancelButton:!0,onCancel:j,showSubmitButton:!0,children:c.jsxs("form",{ref:y,onSubmit:b,className:al(r.spacingFormSection,"w-full"),children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsxs("div",{className:al("grid grid-cols-1",r.gapForm),children:[c.jsxs(Fl,{className:r.spacingFormItem,children:[c.jsx(Il,{htmlFor:"firstName",className:al(r.textSizeLabel,"font-medium"),children:"First Name *"}),c.jsx(Ol,{children:c.jsx(kl,{id:"firstName",ref:v,value:i.firstName,onChange:e=>S("firstName",e.target.value),className:al(r.inputHeight,r.textSize,l.firstName&&"border-destructive"),disabled:s,placeholder:"First name"})}),c.jsx(Bl,{className:r.textSizeSmall,children:l.firstName})]}),c.jsxs(Fl,{className:r.spacingFormItem,children:[c.jsx(Il,{htmlFor:"lastName",className:al(r.textSizeLabel,"font-medium"),children:"Last Name *"}),c.jsx(Ol,{children:c.jsx(kl,{id:"lastName",value:i.lastName,onChange:e=>S("lastName",e.target.value),className:al(r.inputHeight,r.textSize,l.lastName&&"border-destructive"),disabled:s,placeholder:"Last name"})}),c.jsx(Bl,{className:r.textSizeSmall,children:l.lastName})]}),c.jsxs(Fl,{className:r.spacingFormItem,children:[c.jsx(Il,{htmlFor:"email",className:al(r.textSizeLabel,"font-medium"),children:"Email Address *"}),c.jsx(Ol,{children:c.jsx(kl,{id:"email",type:"email",value:i.email,onChange:e=>S("email",e.target.value),className:al(r.inputHeight,r.textSize,l.email&&"border-destructive"),disabled:s,placeholder:"email@example.com"})}),c.jsx(Bl,{className:r.textSizeSmall,children:l.email})]}),c.jsxs(Fl,{className:r.spacingFormItem,children:[c.jsx(Il,{htmlFor:"username",className:al(r.textSizeLabel,"font-medium"),children:"Username (Optional)"}),c.jsx(Ol,{children:c.jsx(kl,{id:"username",value:i.username,onChange:e=>S("username",e.target.value),className:al(r.inputHeight,r.textSize,l.username&&"border-destructive"),disabled:s,placeholder:"username"})}),c.jsx(Bl,{className:r.textSizeSmall,children:l.username})]}),c.jsxs(Fl,{className:r.spacingFormItem,children:[c.jsx(Il,{htmlFor:"role",className:al(r.textSizeLabel,"font-medium"),children:"Role *"}),c.jsx(Ol,{children:c.jsxs(ox,{value:i.role,onValueChange:e=>S("role",e),disabled:s,children:[c.jsx(cx,{className:al(r.inputHeight,r.textSize),children:c.jsx(lx,{placeholder:"Select role"})}),c.jsx(hx,{className:r.textSize,children:DL.map(e=>c.jsx(mx,{value:e.value,className:r.textSize,children:e.label},e.value))})]})})]}),c.jsxs(Fl,{className:r.spacingFormItem,children:[c.jsx(Il,{htmlFor:"password",className:al(r.textSizeLabel,"font-medium"),children:"Password *"}),c.jsx(Ol,{children:c.jsx(kl,{id:"password",type:"password",value:i.password,onChange:e=>S("password",e.target.value),className:al(r.inputHeight,r.textSize,l.password&&"border-destructive"),disabled:s,placeholder:"Password",autoComplete:"new-password"})}),c.jsx(Bl,{className:r.textSizeSmall,children:l.password})]}),c.jsxs(Fl,{className:r.spacingFormItem,children:[c.jsx(Il,{htmlFor:"confirmPassword",className:al(r.textSizeLabel,"font-medium"),children:"Confirm Password *"}),c.jsx(Ol,{children:c.jsx(kl,{id:"confirmPassword",type:"password",value:i.confirmPassword,onChange:e=>S("confirmPassword",e.target.value),className:al(r.inputHeight,r.textSize,l.confirmPassword&&"border-destructive"),disabled:s,placeholder:"Confirm password",autoComplete:"new-password"})}),c.jsx(Bl,{className:r.textSizeSmall,children:l.confirmPassword})]})]})}),g&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",r.paddingContainer,r.textSizeSmall,"text-destructive mt-4"),children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive mt-1.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold",children:"Error:"}),c.jsx("span",{children:g.message||"Failed to create user"})]}),g.message&&c.jsx("div",{className:"text-xs text-destructive/80 mt-1",children:"Please review the fields highlighted in red and correct any errors before trying again."})]})]})})]},m)}),c.jsx(jE,{open:u,onOpenChange:e=>{h(e),e||setTimeout(()=>{v.current?.focus()},0)},title:"Confirm User Creation",description:c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"mb-3 text-xs",children:"Are you sure you want to create a new user with the following information?"}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"font-medium text-muted-foreground",children:"Name:"}),c.jsxs("span",{className:"text-foreground",children:[i.firstName," ",i.lastName]})]}),c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"font-medium text-muted-foreground",children:"Email:"}),c.jsx("span",{className:"text-foreground",children:i.email})]}),c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"font-medium text-muted-foreground",children:"Role:"}),c.jsx("span",{className:"text-foreground capitalize",children:i.role})]})]})]}),confirmAction:{label:s?"Creating...":"Confirm & Create",onClick:async()=>{try{const e={email:i.email,password:i.password,firstName:i.firstName.trim(),lastName:i.lastName.trim(),username:i.username.trim()||void 0,role:i.role};await n(e),o(ML),d({}),x(null),h(!1),f(e=>e+1)}catch(e){const{message:t,fieldErrors:n}=w(e);Object.keys(n).length>0&&d(n),x(new Error(t)),h(!1)}},loading:s,disabled:s},cancelAction:{label:"Cancel",variant:"outline",disabled:s}})]})}function FL({open:e,onOpenChange:t,user:n,onSubmit:s,loading:a=!1}){const r=Ua(),[i,o]=p.useState({firstName:n.firstName||"",lastName:n.lastName||"",baseRole:n.baseRole||n.role}),[l,d]=p.useState({}),[u,h]=p.useState(!1);f.useEffect(()=>{o({firstName:n.firstName||"",lastName:n.lastName||"",baseRole:n.baseRole||n.role}),d({})},[n]);const m=(e,t)=>{o(n=>({...n,[e]:t})),l[e]&&d(t=>({...t,[e]:void 0}))};return c.jsx(Zy,{open:e,onOpenChange:e=>{e||u||(o({firstName:n.firstName||"",lastName:n.lastName||"",baseRole:n.baseRole||n.role}),d({})),t(e)},children:c.jsxs(tb,{className:al("sm:max-w-[600px]",r.paddingContainer,r.gapButtonGroup),children:[c.jsxs(nb,{className:r.spacingFormItem,children:[c.jsx(ab,{className:al(r.textSizeLabel,"font-semibold"),children:"Edit User"}),c.jsx(rb,{className:al(r.textSizeSmall,"text-muted-foreground"),children:"Update user information. Click save when you're done."})]}),c.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d({}),h(!0);try{await s(n.id,i),t(!1)}catch(a){d({firstName:"Failed to update user. Please try again."})}finally{h(!1)}},children:[c.jsxs("div",{className:al("space-y-4 py-4"),children:[c.jsxs("div",{className:al("grid gap-4 md:grid-cols-2",r.gapForm),children:[c.jsxs("div",{className:r.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"firstName",className:al(r.textSizeLabel,"font-medium"),children:"First Name"}),c.jsx(kl,{id:"firstName",value:i.firstName,onChange:e=>m("firstName",e.target.value),placeholder:"John",disabled:u||a,className:al(r.inputHeight,r.textSize)})]}),c.jsxs("div",{className:r.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"lastName",className:al(r.textSizeLabel,"font-medium"),children:"Last Name"}),c.jsx(kl,{id:"lastName",value:i.lastName,onChange:e=>m("lastName",e.target.value),placeholder:"Doe",disabled:u||a,className:al(r.inputHeight,r.textSize)})]})]}),c.jsxs("div",{className:r.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"baseRole",className:al(r.textSizeLabel,"font-medium"),children:"Base role (system)"}),c.jsxs(ox,{value:i.baseRole,onValueChange:e=>m("baseRole",e),disabled:u||a,children:[c.jsx(cx,{className:al(r.inputHeight,r.textSize),children:c.jsx(lx,{placeholder:"Select a base role"})}),c.jsxs(hx,{className:r.textSize,children:[c.jsx(mx,{value:"admin",className:r.textSize,children:"Admin"}),c.jsx(mx,{value:"manager",className:r.textSize,children:"Manager"}),c.jsx(mx,{value:"user",className:r.textSize,children:"User"}),c.jsx(mx,{value:"guest",className:r.textSize,children:"Guest"})]})]})]})]}),c.jsxs(sb,{className:r.gapButtonGroup,children:[c.jsx(vl,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:u||a,className:al(r.buttonHeightSmall,"px-3",r.textSizeSmall,"font-medium"),children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:u||a,className:al(r.buttonHeightSmall,"px-3",r.textSizeSmall,"font-medium"),children:u||a?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:al("mr-2",r.iconSize,"animate-spin rounded-full border-2 border-background border-t-transparent")}),"Saving..."]}):"Save Changes"})]})]})]})})}function IL(e){const t=e=>{if(e)try{const t=new Date(e);return isNaN(t.getTime())?void 0:t}catch{return}};let n;e.last_login&&(n=t(e.last_login));const s=e.base_role||e.role||"user";return{id:e.id,email:e.email,firstName:e.first_name||"",lastName:e.last_name||"",username:e.username||e.email.split("@")[0],status:!1!==e.is_active?"active":"inactive",role:s,baseRole:s,lastLogin:n,createdAt:e.created_at?new Date(e.created_at):new Date,updatedAt:e.updated_at?new Date(e.updated_at):void 0,tenantId:e.tenant_id,isVerified:e.is_verified,mustChangePassword:e.must_change_password,lastPasswordChange:t(e.last_password_change),failedLoginAttempts:e.failed_login_attempts,lockedUntil:t(e.locked_until)}}function OL(e){const t={};return"email"in e&&e.email&&(t.email=e.email),"password"in e&&e.password&&(t.password=e.password),"username"in e&&e.username&&(t.username=e.username),"firstName"in e&&void 0!==e.firstName&&(t.first_name=e.firstName),"lastName"in e&&void 0!==e.lastName&&(t.last_name=e.lastName),"role"in e&&e.role&&(t.role=e.role),"status"in e&&void 0!==e.status&&(t.is_active="active"===e.status),t}class zL{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchUsers(e){try{const t={};e?.search&&(t.search=e.search),e?.role&&(t.role=e.role),void 0!==e?.status&&(t.is_active="active"===e.status),e?.createdAfter&&(t.created_after=e.createdAfter.toISOString()),e?.createdBefore&&(t.created_before=e.createdBefore.toISOString()),e?.userIds&&(t.userIds=e.userIds),e?.tags&&(t.tags=e.tags);if(rE(t)){const n={filter:t,pagination:{skip:e?.skip??0,limit:e?.limit??100}},s=this.endpoints.users.replace(/\/$/,""),a=await this.apiClient.post(`${s}/search`,n,{requiresAuth:!0}),r={page:a.page,pageSize:a.limit,total:a.total,totalPages:a.total_pages};return{data:(a.items||[]).map(IL),pagination:r}}{const t=new URLSearchParams;if(void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),e?.search&&t.append("search",e.search),e?.role&&t.append("role",e.role),void 0!==e?.status){const n="active"===e.status;t.append("is_active",n.toString())}e?.createdAfter&&t.append("created_after",e.createdAfter.toISOString()),e?.createdBefore&&t.append("created_before",e.createdBefore.toISOString());const n=t.toString()?`${this.endpoints.users}/?${t.toString()}`:this.endpoints.users,s=await this.apiClient.get(n,{requiresAuth:!0}),a={page:s.page,pageSize:s.limit,total:s.total,totalPages:s.total_pages};return{data:(s.items||[]).map(IL),pagination:a}}}catch(t){throw t}}async searchUsers(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("q",n),t&&s.append("limit",Math.min(t,1e3).toString());const a=`${this.endpoints.users.replace(/\/$/,"")}/search?${s.toString()}`;return(await this.apiClient.get(a,{requiresAuth:!0})).map(IL)}catch(n){throw n}}async fetchUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return IL(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createUser(e){try{const t=OL(e);return IL(await this.apiClient.post(this.endpoints.users,t,{requiresAuth:!0}))}catch(t){throw t}}async updateUser(e,t){try{const n=OL(t),s=this.endpoints.users.replace(/\/$/,"");return IL(await this.apiClient.put(`${s}/${e}`,n,{requiresAuth:!0}))}catch(n){throw n}}async deleteUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async activateUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return IL(await this.apiClient.post(`${t}/${e}/activate`,{},{requiresAuth:!0}))}catch(t){throw t}}async deactivateUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return IL(await this.apiClient.post(`${t}/${e}/deactivate`,{},{requiresAuth:!0}))}catch(t){throw t}}async lockUser(e,t=60){try{const n=this.endpoints.users.replace(/\/$/,"");return IL(await this.apiClient.post(`${n}/${e}/lock?lockout_minutes=${t}`,{},{requiresAuth:!0}))}catch(n){throw n}}async unlockUser(e){try{const t=this.endpoints.users.replace(/\/$/,"");return IL(await this.apiClient.post(`${t}/${e}/unlock`,{},{requiresAuth:!0}))}catch(t){throw t}}async resetPassword(e,t){try{const n=this.endpoints.users.replace(/\/$/,"");return IL(await this.apiClient.post(`${n}/${e}/reset-password`,{new_password:t},{requiresAuth:!0}))}catch(n){throw n}}async fetchUserActivity(e,t=100,n){try{const s=new URLSearchParams;s.append("entity_id",e),s.append("entity_type","user"),s.append("limit",t.toString()),n&&s.append("hours",n.toString());return(await this.apiClient.get(`/api/v1/audit/user-activity?${s.toString()}`,{requiresAuth:!0})).map(t=>{let n;try{"string"!=typeof t.event_timestamp&&t.event_timestamp;const e="string"==typeof t.event_timestamp?t.event_timestamp:t.event_timestamp?.toString()||"";n=new Date(e),isNaN(n.getTime())&&(n=new Date)}catch(s){n=new Date}return{id:t.event_id,userId:t.user_id||e,action:this.formatEventType(t.event_type),resource:t.entity_type,resourceId:t.entity_id,details:t.description,ipAddress:t.ip_address||void 0,userAgent:t.user_agent||void 0,timestamp:n,eventType:t.event_type,severity:t.severity}})}catch(s){throw s}}formatEventType(e){return{login:"Logged in",logout:"Logged out",password_change:"Changed password",account_lock:"Account locked",account_unlock:"Account unlocked",account_activate:"Account activated",account_deactivate:"Account deactivated",create:"Created",update:"Updated",delete:"Deleted",read:"Viewed"}[e]||e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}}const BL=p.createContext(void 0);function $L({children:e,config:t}){const n=p.useMemo(()=>new zL(t),[t.apiClient,t.endpoints?.users]);return c.jsx(BL.Provider,{value:{userService:n},children:e})}function UL(){const e=p.useContext(BL);if(!e)throw new Error("useUserService must be used within a UserProvider");return e.userService}function VL({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToCreate:n,onNavigateToUser:s}){const a=UL(),{toast:r}=Rk(),[i,o]=p.useState(!1),[l,d]=p.useState({}),[u,h]=p.useState({page:1,pageSize:50}),[m,f]=p.useState(""),{data:g,isLoading:x,error:v}=function(e,t){const{filter:n,pagination:s}=t||{};return Ys({queryKey:["users",n?.search,n?.role,n?.status,n?.createdAfter?.toISOString(),n?.createdBefore?.toISOString(),s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchUsers({skip:t,limit:a,search:n?.search,role:n?.role,status:n?.status,createdAfter:n?.createdAfter,createdBefore:n?.createdBefore})},staleTime:3e5})}(a,{filter:{...l,search:m||l.search},pagination:u}),y=g?.data||[],b=g?.pagination;p.useEffect(()=>{void 0===b?.total&&void 0===b?.totalPages||h(e=>({...e,total:b?.total,totalPages:b?.totalPages}))},[b?.total,b?.totalPages]);const w=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteUser(t),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}})}(a),S=function(e){const t=Vs();return Xs({mutationFn:t=>e.createUser(t),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}})}(a),j=function(e){const t=Vs();return Xs({mutationFn:t=>e.lockUser(t,60),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(a),C=function(e){const t=Vs();return Xs({mutationFn:t=>e.unlockUser(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(a),k=function(e){const t=Vs();return Xs({mutationFn:t=>e.activateUser(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(a),N=function(e){const t=Vs();return Xs({mutationFn:t=>e.deactivateUser(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["user",n]}),t.invalidateQueries({queryKey:["user-activity",n]})}})}(a),_=p.useCallback(async e=>{if(window.confirm(`Are you sure you want to delete ${e.email}?`))try{await w.mutateAsync(e.id),r({title:"Success",description:"User deleted successfully"})}catch(t){r({title:"Error",description:"Failed to delete user",variant:"destructive"})}},[w,r]),P=p.useCallback(e=>{},[]),E=p.useCallback(async e=>{try{await j.mutateAsync(e.id),r({title:"User Locked",description:`User ${e.email} has been locked for 60 minutes`})}catch(t){r({title:"Error",description:"Failed to lock user",variant:"destructive"})}},[j,r]),R=p.useCallback(async e=>{try{await C.mutateAsync(e.id),r({title:"User Unlocked",description:`User ${e.email} has been unlocked`})}catch(t){r({title:"Error",description:"Failed to unlock user",variant:"destructive"})}},[C,r]),A=p.useCallback(async e=>{try{await k.mutateAsync(e.id),r({title:"User Activated",description:`User ${e.email} has been activated`})}catch(t){r({title:"Error",description:"Failed to activate user",variant:"destructive"})}},[k,r]),T=p.useCallback(async e=>{try{await N.mutateAsync(e.id),r({title:"User Deactivated",description:`User ${e.email} has been deactivated`})}catch(t){r({title:"Error",description:"Failed to deactivate user",variant:"destructive"})}},[N,r]),M=p.useCallback(()=>{if(n)n();else try{const e=new URL(window.location.href);e.searchParams.set("action","create");const t=`${e.pathname}?${e.searchParams.toString()}`;window.history.pushState({},"",t)}catch{}o(!0)},[n]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const D=p.useCallback(async e=>{try{await S.mutateAsync(e),r({title:"Success",description:"User created successfully"})}catch(t){throw r({title:"Error",description:"Failed to create user",variant:"destructive"}),t}},[S,r]),L=p.useCallback(e=>{try{if(s)return void s(e.id);const t=`${new URL(window.location.href).origin}`,n=`/users/${e.id}`;window.history.pushState({},"",`${t}${n}`)}catch{window.location.href=`/users/${e.id}`}},[s]),F=p.useCallback(e=>{f(e),h(e=>({...e,page:1}))},[]),I=p.useCallback(e=>{d(e),h(e=>({...e,page:1}))},[]),O=p.useCallback(e=>{h(t=>({...t,page:e}))},[]),z=p.useCallback(e=>{d(t=>({...t,status:e})),h(e=>({...e,page:1}))},[]),B=p.useCallback(e=>{h(t=>({...t,pageSize:e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(SL,{users:y,loading:x,error:v,onEdit:P,onDelete:_,onCreate:M,onUserClick:L,onSearch:F,onFilter:I,onStatusFilterChange:z,filter:l,pagination:u,onPageChange:O,onPageSizeChange:B,onLock:E,onUnlock:R,onActivate:A,onDeactivate:T,searchable:!0,showAvatar:!0,showRole:!0,showStatus:!0,showActions:!0}),c.jsx(LL,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:D,loading:S.isPending,error:S.error})]})}function qL(e,t){let n=`Failed to ${t}`,s="Error";try{const a=JSON.parse(e.message).detail||e.message;a.includes("Permission")&&a.includes("required")?(s="Permission Denied",n=`You don't have permission to ${t.toLowerCase()}. Please contact your administrator.`):a&&(n=a)}catch{e.message.includes("Permission")&&e.message.includes("required")?(s="Permission Denied",n=`You don't have permission to ${t.toLowerCase()}. Please contact your administrator.`):e.message&&(n=e.message)}return{title:s,message:n}}function HL({userId:e,onBack:t,onUpdateTabTitle:n}){const s=UL(),a=Vs(),{toast:r}=Rk(),[i,o]=p.useState(!1),{data:l,isLoading:d,error:u}=Ys({queryKey:["user",e],queryFn:()=>s.fetchUser(e),enabled:"string"==typeof e&&e.length>0,retry:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:3e4});p.useEffect(()=>{if(!e||!l||!n)return;const t=[l.firstName,l.lastName].filter(Boolean),s=t.length>0?t.join(" "):l.username||l.email||"User";n(s,"User")},[e,l,n]);const h=p.useCallback(()=>{t&&t()},[t]),m=p.useCallback(e=>{o(!0)},[]),f=Xs({mutationFn:({userId:e,data:t})=>s.updateUser(e,t),onSuccess:()=>{a.invalidateQueries({queryKey:["user",e]}),a.invalidateQueries({queryKey:["users"]}),a.invalidateQueries({queryKey:["user-activity",e]}),r({title:"User Updated",description:"User information has been successfully updated"})},onError:e=>{const{title:t,message:n}=qL(e,"update user");r({title:t,description:n,variant:"destructive"})}}),g=p.useCallback(async(e,t)=>{await f.mutateAsync({userId:e,data:t})},[f]),x=Xs({mutationFn:({userId:e,newPassword:t})=>s.resetPassword(e,t),onSuccess:()=>{a.invalidateQueries({queryKey:["user",e]}),a.invalidateQueries({queryKey:["user-activity",e]}),r({title:"Password Reset",description:"User password has been successfully reset"})},onError:e=>{const{title:t,message:n}=qL(e,"reset password");r({title:t,description:n,variant:"destructive"})}}),v=p.useCallback(async(e,t)=>{await x.mutateAsync({userId:e.id,newPassword:t})},[x]),y=Xs({mutationFn:e=>s.activateUser(e),onSuccess:()=>{a.invalidateQueries({queryKey:["user",e]}),a.invalidateQueries({queryKey:["user-activity",e]}),r({title:"User Activated",description:"User has been successfully activated"})},onError:e=>{const{title:t,message:n}=qL(e,"activate user");r({title:t,description:n,variant:"destructive"})}}),b=Xs({mutationFn:e=>s.deactivateUser(e),onSuccess:()=>{a.invalidateQueries({queryKey:["user",e]}),a.invalidateQueries({queryKey:["user-activity",e]}),r({title:"User Deactivated",description:"User has been successfully deactivated"})},onError:e=>{const{title:t,message:n}=qL(e,"deactivate user");r({title:t,description:n,variant:"destructive"})}}),w=Xs({mutationFn:e=>s.lockUser(e,60),onSuccess:()=>{a.invalidateQueries({queryKey:["user",e]}),a.invalidateQueries({queryKey:["user-activity",e]}),r({title:"Account Locked",description:"User account has been locked for 60 minutes"})},onError:e=>{const{title:t,message:n}=qL(e,"lock user account");r({title:t,description:n,variant:"destructive"})}}),S=Xs({mutationFn:e=>s.unlockUser(e),onSuccess:()=>{a.invalidateQueries({queryKey:["user",e]}),a.invalidateQueries({queryKey:["user-activity",e]}),r({title:"Account Unlocked",description:"User account has been unlocked"})},onError:e=>{const{title:t,message:n}=qL(e,"unlock user account");r({title:t,description:n,variant:"destructive"})}}),j=p.useCallback(async e=>{await y.mutateAsync(e.id)},[y]),C=p.useCallback(async e=>{await b.mutateAsync(e.id)},[b]),k=p.useCallback(async e=>{await w.mutateAsync(e.id)},[w]),N=p.useCallback(async e=>{await S.mutateAsync(e.id)},[S]),{data:_=[]}=Ys({queryKey:["user-activity",e],queryFn:()=>s.fetchUserActivity(e,100,24),enabled:"string"==typeof e&&e.length>0,retry:!1,refetchOnWindowFocus:!0,staleTime:3e4,refetchOnReconnect:!0});return"string"!=typeof e||0===e.length?null:c.jsxs("div",{className:"space-y-4",children:[c.jsx(TL,{user:l,loading:d,error:u,activities:_,showActivity:!0,showMetadata:!1,editable:!0,onEdit:m,onPasswordReset:v,onActivate:j,onDeactivate:C,onLock:k,onUnlock:N,onBack:h}),l&&c.jsx(FL,{open:i,onOpenChange:o,user:l,onSubmit:g,loading:f.isPending})]})}function GL({className:e,roles:t=[],loading:n=!1,error:s=null,searchable:a=!0,searchPlaceholder:r="Search roles...",showUserCount:i=!0,showPermissions:o=!0,showActions:l=!0,showCreateButton:d=!1,onCreate:u,onRoleClick:h,onEdit:m,onDelete:p,onSearch:f,customActions:g}){const x=[];i&&x.push({key:"users",label:"users",value:e=>e.userCount||0}),o&&x.push({key:"permissions",label:"permissions",value:e=>e.permissions?.length||0});return c.jsx(qP,{className:e,items:t,loading:n,error:s,searchable:a,searchPlaceholder:r,title:"Roles",description:"Manage roles and permissions",stats:x,badges:[{key:"system",label:"System",condition:e=>!!e.isSystem,variant:"secondary"}],showActions:l,showCreateButton:d,createButtonLabel:c.jsxs(c.Fragment,{children:[c.jsx(hg,{className:"h-4 w-4 mr-2"}),"New"]}),onCreate:u,onItemClick:h,onEdit:l?m:void 0,onDelete:l?p:void 0,onSearch:f,customActions:l?e=>g?g(e):c.jsxs(c.Fragment,{children:[m&&!e.isSystem&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>m(e),className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Tg,{className:"h-3.5 w-3.5"})}),p&&!e.isSystem&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>p(e),className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(Hg,{className:"h-3.5 w-3.5"})})]}):void 0,loadingMessage:"Loading roles...",emptyMessage:"No roles found",gridCols:{default:1,md:2,lg:3}})}function KL({className:e,role:t,users:n=[],loading:s=!1,error:a=null,showUsers:r=!0,editable:i=!0,onEdit:o,onDelete:l,onUserClick:d,customActions:u}){const[h,m]=p.useState("permissions");return Ua(),s?c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}):a||!t?c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:a?.message||"Role not found"})}):c.jsx(bl,{className:al("p-6",e),children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-2xl font-bold",children:t.name}),t.isSystem&&c.jsx(mC,{variant:"secondary",children:"System Role"})]}),t.description&&c.jsx("p",{className:"mt-2 text-muted-foreground",children:t.description}),c.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-muted-foreground",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:t.userCount||n.length})," ","users"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:t.permissions?.length||0})," ","permissions"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[u?.(t),i&&o&&!t.isSystem&&c.jsxs(vl,{onClick:()=>o(t),size:"sm",variant:"outline",className:al("h-8 px-2 text-xs"),children:[c.jsx(Tg,{className:"h-3 w-3 mr-1"}),"Edit Role"]})]})]}),c.jsxs(sy,{value:h,onValueChange:e=>m(e),children:[c.jsx("div",{className:"border-b",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","permissions"===h?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>m("permissions"),children:"Permissions"}),r&&c.jsxs("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","users"===h?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>m("users"),children:["Users (",t.userCount||n.length,")"]})]})}),c.jsxs("div",{className:"mt-6",children:["permissions"===h&&c.jsx("div",{className:"space-y-4",children:t.permissions&&0!==t.permissions.length?c.jsx("div",{className:"grid gap-3",children:t.permissions.map(e=>c.jsx(bl,{className:"p-4",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"font-medium",children:e.name}),c.jsx(mC,{variant:"outline",className:"text-xs",children:e.action}),e.scope&&c.jsx(mC,{variant:"secondary",className:"text-xs",children:e.scope})]}),e.description&&c.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description}),c.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Resource: ",e.resource]})]})})},e.id))}):c.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"No permissions assigned"})}),"users"===h&&c.jsx("div",{className:"space-y-3",children:0===n.length?c.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"No users with this role"}):c.jsx("div",{className:"space-y-2",children:n.map(e=>c.jsx(bl,{className:al("p-3 transition-colors",d&&"cursor-pointer hover:bg-muted/50"),onClick:()=>d?.(e),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:e.firstName||e.lastName?`${e.firstName||""} ${e.lastName||""}`.trim():e.username||e.email}),c.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]}),c.jsx(mC,{variant:"active"===e.status?"default":"secondary",children:e.status})]})},e.id))})})]})]}),i&&!t.isSystem&&c.jsx("div",{className:"flex items-center gap-2 border-t pt-4",children:l&&c.jsx(vl,{variant:"destructive",onClick:()=>l(t),children:"Delete Role"})})]})})}const WL={name:"",description:"",selectedPermissions:[]},QL=[{value:"users:read",label:"Read Users",description:"View user information"},{value:"users:create",label:"Create Users",description:"Create new users"},{value:"users:update",label:"Update Users",description:"Modify user information"},{value:"users:delete",label:"Delete Users",description:"Remove users"},{value:"roles:read",label:"Read Roles",description:"View role information"},{value:"roles:create",label:"Create Roles",description:"Create new roles"},{value:"roles:update",label:"Update Roles",description:"Modify roles"},{value:"roles:delete",label:"Delete Roles",description:"Remove roles"},{value:"roles:assign",label:"Assign Roles",description:"Assign roles to users"},{value:"groups:read",label:"Read Groups",description:"View group information"},{value:"groups:create",label:"Create Groups",description:"Create new groups"},{value:"groups:update",label:"Update Groups",description:"Modify groups"},{value:"groups:delete",label:"Delete Groups",description:"Remove groups"},{value:"products:read",label:"Read Products",description:"View products"},{value:"products:create",label:"Create Products",description:"Create products"},{value:"products:update",label:"Update Products",description:"Modify products"},{value:"products:delete",label:"Delete Products",description:"Remove products"},{value:"orders:read",label:"Read Orders",description:"View orders"},{value:"orders:create",label:"Create Orders",description:"Create orders"},{value:"orders:update",label:"Update Orders",description:"Modify orders"},{value:"orders:delete",label:"Delete Orders",description:"Remove orders"}];function YL({open:e,onOpenChange:t,onSubmit:n,loading:s=!1,error:a=null,availablePermissions:r=QL}){const i=Ua(),[o,l]=p.useState(WL),[d,u]=p.useState({}),[h,m]=p.useState(0),[f,g]=p.useState(null),[x,v]=p.useState(""),[y,b]=p.useState("resource"),[w,S]=p.useState(!1),j=p.useRef(null),C=p.useRef(null);p.useEffect(()=>{g(a)},[a]);const k=()=>{const e={};return o.name.trim()?o.name.length>100&&(e.name="Role name cannot exceed 100 characters"):e.name="Role name is required",o.description&&o.description.length>500&&(e.description="Description cannot exceed 500 characters"),u(e),0===Object.keys(e).length},N=e=>{e.preventDefault(),k()&&S(!0)},_=()=>{l({...WL}),u({}),g(null),m(e=>e+1)},P=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),f&&g(null)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{j.current?.focus()})},[e,h]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),!s&&k()&&N(e)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||_())}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s,o]);const E=e=>{l(t=>({...t,selectedPermissions:t.selectedPermissions.includes(e)?t.selectedPermissions.filter(t=>t!==e):[...t.selectedPermissions,e]})),f&&g(null)},R=p.useMemo(()=>{let e=r;if(x.trim()){const t=x.toLowerCase();e=r.filter(e=>e.label.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===y)return e.label.localeCompare(t.label);if("resource"===y){const n=e.value.split(":")[0]||"other",s=t.value.split(":")[0]||"other";return n!==s?n.localeCompare(s):e.label.localeCompare(t.label)}if("selected"===y){const n=o.selectedPermissions.includes(e.value);return n!==o.selectedPermissions.includes(t.value)?n?-1:1:e.label.localeCompare(t.label)}return 0})},[r,x,y,o.selectedPermissions]),A=p.useMemo(()=>R.reduce((e,t)=>{const n=t.value.split(":")[0]||"other";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[R]),T=r.length>0&&r.every(e=>o.selectedPermissions.includes(e.value));return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:()=>{l(WL),u({}),g(null),t(!1)},title:"Create Custom Role",maxWidth:"800px",loading:s,showClearButton:!0,onClear:_,formSelector:C,onSubmit:()=>{C.current&&C.current.requestSubmit()},autoSubmitShortcut:!0,autoClearShortcut:!0,children:c.jsx("form",{ref:C,onSubmit:async e=>{N(e)},className:al(i.spacingFormSection,"w-full"),children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:i.spacingFormSection,children:[f&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsx("span",{className:"font-semibold",children:"ERROR:"}),c.jsx("span",{children:f.message||"Failed to create role"})]})}),c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsx(Il,{className:al(i.textSizeLabel,"font-medium"),children:"Role Name *"}),c.jsx(Ol,{children:c.jsx(kl,{ref:j,placeholder:"e.g., Sales Representative",value:o.name,onChange:e=>P("name",e.target.value),className:al(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:s})}),d.name&&c.jsx(Bl,{className:i.textSizeSmall,children:d.name}),c.jsx(zl,{className:i.textSizeSmall,children:"A unique name for this role (max 100 characters)"})]}),c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsx(Il,{className:al(i.textSizeLabel,"font-medium"),children:"Description"}),c.jsx(Ol,{children:c.jsx(Tl,{placeholder:"Describe the role's purpose and responsibilities...",value:o.description,onChange:e=>P("description",e.target.value),disabled:s,rows:3,className:al(i.textSize,d.description&&"border-destructive")})}),d.description&&c.jsx(Bl,{className:i.textSizeSmall,children:d.description}),c.jsx(zl,{className:i.textSizeSmall,children:"Optional description (max 500 characters)"})]}),c.jsxs(Fl,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Il,{className:al(i.textSizeLabel,"font-medium"),children:"Permissions"}),c.jsx(vl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=r.map(e=>e.value),t=e.length>0&&e.every(e=>o.selectedPermissions.includes(e));l(n=>({...n,selectedPermissions:t?[]:e})),f&&g(null)},disabled:s,className:al(i.buttonHeightSmall,"px-2",i.textSizeSmall,"font-medium"),children:T?"Deselect All":"Select All"})]}),c.jsxs(Ol,{children:[c.jsxs("div",{className:al("flex mb-3",i.gapButtonGroup),children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Sg,{className:al("absolute left-2.5 top-1/2 transform -translate-y-1/2",i.iconSize,"text-muted-foreground")}),c.jsx(kl,{type:"text",placeholder:"Search permissions...",value:x,onChange:e=>v(e.target.value),disabled:s,className:al("pl-8",i.inputHeight,i.textSize)})]}),c.jsxs(ox,{value:y,onValueChange:e=>b(e),disabled:s,children:[c.jsx(cx,{className:"w-[140px] h-8 text-sm",children:c.jsx(lx,{placeholder:"Sort by..."})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"resource",children:"Sort by Resource"}),c.jsx(mx,{value:"name",children:"Sort by Name"}),c.jsx(mx,{value:"selected",children:"Selected First"})]})]})]}),c.jsx("div",{className:"space-y-4 rounded-md border p-4 max-h-[500px] overflow-y-auto",children:0===Object.keys(A).length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:x?"No permissions match your search":"No permissions available"}):Object.entries(A).map(([e,t])=>{const n=(e=>{const t=A[e]||[];return t.length>0&&t.every(e=>o.selectedPermissions.includes(e.value))})(e);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-semibold capitalize",children:e}),c.jsx(vl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(A[e]||[]).map(e=>e.value),n=t.length>0&&t.every(e=>o.selectedPermissions.includes(e));l(e=>({...e,selectedPermissions:n?e.selectedPermissions.filter(e=>!t.includes(e)):[...e.selectedPermissions.filter(e=>!t.includes(e)),...t]})),f&&g(null)})(e),disabled:s,className:"h-6 px-2 text-xs font-medium",children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:t.map(e=>c.jsxs("label",{className:"flex items-start gap-4 rounded-md border p-3 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:o.selectedPermissions.includes(e.value),onChange:()=>E(e.value),disabled:s,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium",children:e.label}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.description})]})]},e.value))})]},e)})})]}),c.jsx(zl,{children:"Select the permissions this role should have. Users with this role will be able to perform all selected actions."})]}),o.selectedPermissions.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[o.selectedPermissions.length," ",1===o.selectedPermissions.length?"permission":"permissions"," ","selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:o.selectedPermissions.map(e=>{const t=r.find(t=>t.value===e);return c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t?.label||e,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t?.label||e}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),E(e)},disabled:s,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t?.label||e}`,title:`Remove ${t?.label||e}`,children:c.jsx(ax,{className:"h-3 w-3 text-destructive"})})]},e)})})]})]})})},h)}),c.jsx(Mb,{open:w,onOpenChange:S,children:c.jsxs(Fb,{children:[c.jsxs(Ib,{children:[c.jsx(zb,{children:"Create Role"}),c.jsxs(Bb,{children:['Are you sure you want to create the role "',o.name.trim(),'"? This will create a new role with'," ",o.selectedPermissions.length," permission",1!==o.selectedPermissions.length?"s":""," that can be assigned to users."]})]}),c.jsxs(Ob,{children:[c.jsx(Ub,{asChild:!0,children:c.jsx(vl,{variant:"outline",disabled:s,children:"Cancel"})}),c.jsx($b,{asChild:!0,children:c.jsx(vl,{onClick:async()=>{S(!1);try{await n({name:o.name.trim(),description:o.description.trim()||void 0,permissions:o.selectedPermissions}),l(WL),u({}),m(e=>e+1),t(!1)}catch(wW){}},disabled:s,children:s?"Creating...":"Create Role"})})]})]})})]})}const XL=[{value:"users:read",label:"Read Users",description:"View user information"},{value:"users:create",label:"Create Users",description:"Create new users"},{value:"users:update",label:"Update Users",description:"Modify user information"},{value:"users:delete",label:"Delete Users",description:"Remove users"},{value:"roles:read",label:"Read Roles",description:"View role information"},{value:"roles:create",label:"Create Roles",description:"Create new roles"},{value:"roles:update",label:"Update Roles",description:"Modify roles"},{value:"roles:delete",label:"Delete Roles",description:"Remove roles"},{value:"roles:assign",label:"Assign Roles",description:"Assign roles to users"},{value:"groups:read",label:"Read Groups",description:"View group information"},{value:"groups:create",label:"Create Groups",description:"Create new groups"},{value:"groups:update",label:"Update Groups",description:"Modify groups"},{value:"groups:delete",label:"Delete Groups",description:"Remove groups"},{value:"products:read",label:"Read Products",description:"View products"},{value:"products:create",label:"Create Products",description:"Create products"},{value:"products:update",label:"Update Products",description:"Modify products"},{value:"products:delete",label:"Delete Products",description:"Remove products"},{value:"orders:read",label:"Read Orders",description:"View orders"},{value:"orders:create",label:"Create Orders",description:"Create orders"},{value:"orders:update",label:"Update Orders",description:"Modify orders"},{value:"orders:delete",label:"Delete Orders",description:"Remove orders"}];function ZL({open:e,onOpenChange:t,role:n,onSubmit:s,loading:a=!1,error:r=null,availablePermissions:i=XL}){const[o,l]=p.useState({name:"",description:"",selectedPermissions:[]}),[d,u]=p.useState({}),[h,m]=p.useState(0),[f,g]=p.useState(null),[x,v]=p.useState(""),[y,b]=p.useState("resource"),[w,S]=p.useState(!1),j=p.useRef(null),C=p.useRef(null),k=Ua();p.useEffect(()=>{g(r)},[r]),p.useEffect(()=>{n&&(l({name:n.name||"",description:n.description||"",selectedPermissions:n.permissions?.map(e=>e.name)||[]}),u({}),m(e=>e+1))},[n,e]),p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{j.current?.focus()})},[e,n,h]);const N=()=>{const e={};return o.name.trim()?o.name.length>100&&(e.name="Role name cannot exceed 100 characters"):e.name="Role name is required",o.description&&o.description.length>500&&(e.description="Description cannot exceed 500 characters"),u(e),0===Object.keys(e).length},_=e=>{e.preventDefault(),N()&&n&&S(!0)},P=()=>{n&&l({name:n.name||"",description:n.description||"",selectedPermissions:n.permissions?.map(e=>e.name)||[]}),u({}),g(null),t(!1)},E=()=>{n&&l({name:n.name||"",description:n.description||"",selectedPermissions:n.permissions?.map(e=>e.name)||[]}),u({}),g(null),m(e=>e+1)},R=e=>{l(t=>({...t,selectedPermissions:t.selectedPermissions.includes(e)?t.selectedPermissions.filter(t=>t!==e):[...t.selectedPermissions,e]})),f&&g(null)},A=p.useMemo(()=>{let e=i;if(x.trim()){const t=x.toLowerCase();e=i.filter(e=>e.label.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===y)return e.label.localeCompare(t.label);if("resource"===y){const n=e.value.split(":")[0]||"other",s=t.value.split(":")[0]||"other";return n!==s?n.localeCompare(s):e.label.localeCompare(t.label)}if("selected"===y){const n=o.selectedPermissions.includes(e.value);return n!==o.selectedPermissions.includes(t.value)?n?-1:1:e.label.localeCompare(t.label)}return 0})},[i,x,y,o.selectedPermissions]),T=p.useMemo(()=>A.reduce((e,t)=>{const n=t.value.split(":")[0]||"other";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[A]),M=i.length>0&&i.every(e=>o.selectedPermissions.includes(e.value));return p.useEffect(()=>{if(!e||!n)return;const t=e=>{if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),!a&&N()&&n&&_(e)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||E())}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,a,o,n]),n?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:P,title:"Edit Custom Role",maxWidth:"800px",loading:a,showClearButton:!0,onClear:E,formSelector:C,onSubmit:()=>{C.current&&C.current.requestSubmit()},autoSubmitShortcut:!0,autoClearShortcut:!0,showCancelButton:!0,onCancel:P,showSubmitButton:!0,children:c.jsx("form",{ref:C,onSubmit:async e=>{_(e)},className:al(k.spacingFormSection,"w-full"),children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",k.paddingForm),children:c.jsxs("div",{className:k.spacingFormSection,children:[n.isSystem&&c.jsx("div",{className:al("rounded-md bg-yellow-500/15 p-4 text-sm text-yellow-700 dark:text-yellow-400",k.paddingForm),children:"This is a system role. Only name and description can be modified."}),c.jsxs(Fl,{children:[c.jsx(Il,{className:"text-sm font-medium",children:"Description"}),c.jsx(Ol,{children:c.jsx(Tl,{placeholder:"Describe the role's purpose and responsibilities...",value:o.description,onChange:e=>{return t="description",n=e.target.value,l(e=>({...e,[t]:n})),d[t]&&u(e=>({...e,[t]:void 0})),void(f&&g(null));var t,n},disabled:a,rows:3,className:al(d.description&&"border-destructive")})}),d.description&&c.jsx(Bl,{children:d.description}),c.jsx(zl,{children:"Optional description (max 500 characters)"})]}),!n.isSystem&&c.jsxs(Fl,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Il,{className:"text-sm font-medium",children:"Permissions"}),c.jsx(vl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=i.map(e=>e.value),t=e.length>0&&e.every(e=>o.selectedPermissions.includes(e));l(n=>({...n,selectedPermissions:t?[]:e})),f&&g(null)},disabled:a,className:"h-7 px-2 text-xs font-medium",children:M?"Deselect All":"Select All"})]}),c.jsxs(Ol,{children:[c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Sg,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(kl,{type:"text",placeholder:"Search permissions...",value:x,onChange:e=>v(e.target.value),disabled:a,className:"pl-8 h-8 text-sm"})]}),c.jsxs(ox,{value:y,onValueChange:e=>b(e),disabled:a,children:[c.jsx(cx,{className:"w-[140px] h-8 text-sm",children:c.jsx(lx,{placeholder:"Sort by..."})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"resource",children:"Sort by Resource"}),c.jsx(mx,{value:"name",children:"Sort by Name"}),c.jsx(mx,{value:"selected",children:"Selected First"})]})]})]}),c.jsx("div",{className:"space-y-4 rounded-md border p-4 max-h-[500px] overflow-y-auto",children:0===Object.keys(T).length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:x?"No permissions match your search":"No permissions available"}):Object.entries(T).map(([e,t])=>{const n=(e=>{const t=T[e]||[];return t.length>0&&t.every(e=>o.selectedPermissions.includes(e.value))})(e);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-semibold capitalize",children:e}),c.jsx(vl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(T[e]||[]).map(e=>e.value),n=t.length>0&&t.every(e=>o.selectedPermissions.includes(e));l(e=>({...e,selectedPermissions:n?e.selectedPermissions.filter(e=>!t.includes(e)):[...e.selectedPermissions.filter(e=>!t.includes(e)),...t]})),f&&g(null)})(e),disabled:a,className:"h-6 px-2 text-xs font-medium",children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:t.map(e=>c.jsxs("label",{className:"flex items-start gap-4 rounded-md border p-3 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:o.selectedPermissions.includes(e.value),onChange:()=>R(e.value),disabled:a,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium",children:e.label}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.description})]})]},e.value))})]},e)})})]}),c.jsx(zl,{children:"Select the permissions this role should have. Users with this role will be able to perform all selected actions."})]}),o.selectedPermissions.length>0&&!n.isSystem&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[o.selectedPermissions.length," ",1===o.selectedPermissions.length?"permission":"permissions"," ","selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:o.selectedPermissions.map(e=>{const t=i.find(t=>t.value===e);return c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t?.label||e,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t?.label||e}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),R(e)},disabled:a,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t?.label||e}`,title:`Remove ${t?.label||e}`,children:c.jsx(ax,{className:"h-3 w-3 text-destructive"})})]},e)})})]})]})})},h)}),c.jsx(Mb,{open:w,onOpenChange:S,children:c.jsxs(Fb,{children:[c.jsxs(Ib,{children:[c.jsx(zb,{children:"Save Changes"}),c.jsxs(Bb,{children:['Are you sure you want to save changes to the role "',n.name,'"? This will update the role with'," ",o.selectedPermissions.length," permission",1!==o.selectedPermissions.length?"s":""," and affect all users with this role."]})]}),c.jsxs(Ob,{children:[c.jsx(Ub,{asChild:!0,children:c.jsx(vl,{variant:"outline",disabled:a,children:"Cancel"})}),c.jsx($b,{asChild:!0,children:c.jsx(vl,{onClick:async()=>{if(n){S(!1);try{await s(n.id,{name:o.name.trim(),description:o.description.trim()||void 0,permissions:o.selectedPermissions}),u({}),g(null),m(e=>e+1),t(!1)}catch(wW){}}},disabled:a,children:a?"Saving...":"Save Changes"})})]})]})})]}):null}function JL({service:e,className:t,onRoleClick:n,showCreateButton:s=!0}){const[a,r]=p.useState([]),[i,o]=p.useState(!0),[l,d]=p.useState(null),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),[v,y]=p.useState(null),[b,w]=p.useState(!1),[S,j]=p.useState(null),[C]=p.useState(!0),[k,N]=p.useState(!1),[_,P]=p.useState(null),E=async()=>{o(!0),d(null);try{const t=await e.fetchRoles(C);r(t)}catch(wW){d(wW)}finally{o(!1)}};p.useEffect(()=>{E()},[C]);const R=e=>{x(e),f(!0)},A=e=>{P(e),N(!0)};return v?c.jsxs("div",{className:t,children:[c.jsx(vl,{variant:"ghost",onClick:()=>y(null),className:"mb-4",children:" Back to Roles"}),c.jsx(KL,{role:v,onEdit:R,onDelete:A,onUserClick:e=>{}})]}):c.jsxs("div",{className:t,children:[c.jsx(GL,{roles:a,loading:i,error:l,onRoleClick:e=>{n?n(e):y(e)},onEdit:R,onDelete:A,showActions:!0,showCreateButton:s,onCreate:()=>h(!0)}),c.jsx(YL,{open:u,onOpenChange:h,onSubmit:async t=>{w(!0),j(null);try{await e.createRole(t),await E(),h(!1)}catch(wW){throw j(wW),wW}finally{w(!1)}},loading:b,error:S}),g&&c.jsx(ZL,{open:m,onOpenChange:f,role:g,onSubmit:async(t,n)=>{w(!0),j(null);try{await e.updateRole(t,n),await E(),f(!1),x(null)}catch(wW){throw j(wW),wW}finally{w(!1)}},loading:b,error:S}),c.jsx(jE,{open:k,onOpenChange:N,title:"Delete Role",description:_?`Are you sure you want to delete the role "${_.name}"? This action cannot be undone and will remove the role from all users who have it assigned.`:void 0,confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(_)try{await e.deleteRole(_.id),await E(),v?.id===_.id&&y(null),N(!1),P(null)}catch(wW){alert(wW instanceof Error?wW.message:"Failed to delete role")}}}})]})}function eF({className:e,groups:t=[],loading:n=!1,error:s=null,searchable:a=!0,searchPlaceholder:r="Search groups...",showMemberCount:i=!0,showRoleCount:o=!0,showActions:l=!0,showCreateButton:d=!1,onCreate:u,onGroupClick:h,onEdit:m,onDelete:p,onSearch:f,customActions:g}){const x=[];i&&x.push({key:"members",label:"members",value:e=>e.memberCount||0}),o&&x.push({key:"roles",label:"roles",value:e=>e.roleCount||0});return c.jsx(qP,{className:e,items:t,loading:n,error:s,searchable:a,searchPlaceholder:r,title:"Groups",description:"Manage groups and assign roles",stats:x,badges:[{key:"inactive",label:"Inactive",condition:e=>!e.isActive,variant:"secondary"}],showActions:l,showCreateButton:d,createButtonLabel:c.jsxs(c.Fragment,{children:[c.jsx(hg,{className:"h-4 w-4 mr-2"}),"New"]}),onCreate:u,onItemClick:h,onEdit:l?m:void 0,onDelete:l?p:void 0,onSearch:f,customActions:l?g:void 0,loadingMessage:"Loading groups...",emptyMessage:"No groups found",gridCols:{default:1,md:2,lg:3}})}const tF={name:"",description:""};function nF({open:e,onOpenChange:t,onSubmit:n,roleService:s,loading:a=!1,error:r=null}){const i=Ua(),[o,l]=p.useState(tF),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState([]),[x,v]=p.useState([]),[y,b]=p.useState(!1),[w,S]=p.useState(0),[j,C]=p.useState(null),[k,N]=p.useState(""),[_,P]=p.useState("name"),E=p.useRef(null);p.useEffect(()=>{C(r)},[r]),p.useEffect(()=>{e&&s?R():e||(v([]),g([]),N(""))},[e,s]);const R=async()=>{if(s){b(!0);try{const e=await s.fetchRoles(!0);g(e)}catch(wW){}finally{b(!1)}}},A=e=>{v(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),j&&C(null)},T=p.useMemo(()=>{let e=f;if(k.trim()){const t=k.toLowerCase();e=f.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===_)return e.name.localeCompare(t.name);if("system"===_)return e.isSystem!==t.isSystem?e.isSystem?1:-1:e.name.localeCompare(t.name);if("selected"===_){const n=x.includes(e.id);return n!==x.includes(t.id)?n?-1:1:e.name.localeCompare(t.name)}return 0})},[f,k,_,x]),M=p.useMemo(()=>T.reduce((e,t)=>{const n=t.isSystem?"system":"custom";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[T]),D=f.length>0&&f.every(e=>x.includes(e.id)),L=()=>{const e={};return o.name.trim()?o.name.length>100&&(e.name="Group name cannot exceed 100 characters"):e.name="Group name is required",o.description&&o.description.length>500&&(e.description="Description cannot exceed 500 characters"),u(e),0===Object.keys(e).length},F=e=>{e.preventDefault(),L()&&m(!0)},I=()=>{l(tF),u({}),v([]),C(null),t(!1)},O=()=>{l({...tF}),u({}),v([]),C(null),S(e=>e+1)},z=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),j&&C(null)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{E.current?.focus()})},[e,w]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),!a&&L()&&F(e)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||O())}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,a,o]);return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:I,title:"Create Group",maxWidth:"800px",loading:a,showClearButton:!0,onClear:O,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:c.jsxs(c.Fragment,{children:[c.jsx(vl,{type:"button",variant:"outline",onClick:I,disabled:a,className:al(i.buttonHeightSmall,"px-3",i.textSizeSmall,"font-medium border-border hover:bg-muted"),children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:a,className:al(i.buttonHeightSmall,"px-3",i.textSizeSmall,"font-medium"),onClick:F,children:a?"Creating...":"Create Group"})]}),children:c.jsx(Ll,{onSubmit:async e=>{F(e)},className:al(i.spacingFormSection,"w-full"),children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:i.spacingFormSection,children:[j&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsx("span",{className:"font-semibold",children:"ERROR:"}),c.jsx("span",{children:j.message||"Failed to create group"})]})}),c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsx(Il,{className:al(i.textSizeLabel,"font-medium"),children:"Group Name *"}),c.jsx(Ol,{children:c.jsx(kl,{ref:E,placeholder:"e.g., Sales Team",value:o.name,onChange:e=>z("name",e.target.value),className:al(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:a})}),d.name&&c.jsx(Bl,{className:i.textSizeSmall,children:d.name}),c.jsx(zl,{className:i.textSizeSmall,children:"A unique name for this group (max 100 characters)"})]}),c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsx(Il,{className:al(i.textSizeLabel,"font-medium"),children:"Description"}),c.jsx(Ol,{children:c.jsx(Tl,{placeholder:"Describe the group's purpose...",value:o.description,onChange:e=>z("description",e.target.value),disabled:a,rows:3,className:al(i.textSize,d.description&&"border-destructive")})}),d.description&&c.jsx(Bl,{className:i.textSizeSmall,children:d.description}),c.jsx(zl,{className:i.textSizeSmall,children:"Optional description (max 500 characters)"})]}),s&&c.jsxs(Fl,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Il,{className:"text-sm font-medium",children:"Assign Roles"}),c.jsx(vl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=f.map(e=>e.id),t=e.length>0&&e.every(e=>x.includes(e));v(t?[]:e),j&&C(null)},disabled:a||0===f.length,className:al(i.buttonHeightSmall,"px-2",i.textSizeSmall,"font-medium"),children:D?"Deselect All":"Select All"})]}),c.jsx(Ol,{children:y?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:al(i.iconSize,"animate-spin rounded-full border-2 border-primary border-t-transparent")})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:al("flex mb-3",i.gapButtonGroup),children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Sg,{className:al("absolute left-2.5 top-1/2 transform -translate-y-1/2",i.iconSize,"text-muted-foreground")}),c.jsx(kl,{type:"text",placeholder:"Search roles...",value:k,onChange:e=>N(e.target.value),disabled:a,className:al("pl-8",i.inputHeight,i.textSize)})]}),c.jsxs(ox,{value:_,onValueChange:e=>P(e),disabled:a,children:[c.jsx(cx,{className:al("w-[140px]",i.inputHeight,i.textSize),children:c.jsx(lx,{placeholder:"Sort by..."})}),c.jsxs(hx,{className:i.textSize,children:[c.jsx(mx,{value:"name",className:i.textSize,children:"Sort by Name"}),c.jsx(mx,{value:"system",className:i.textSize,children:"System First"}),c.jsx(mx,{value:"selected",className:i.textSize,children:"Selected First"})]})]})]}),c.jsx("div",{className:al(i.spacingFormSection,"rounded-md border",i.paddingContainer,"max-h-[500px] overflow-y-auto"),children:0===Object.keys(M).length?c.jsx("div",{className:al("text-center py-8",i.textSize,"text-muted-foreground"),children:k?"No roles match your search":"No roles available"}):Object.entries(M).map(([e,t])=>{const n=(e=>{const t=M[e]||[];return t.length>0&&t.every(e=>x.includes(e.id))})(e);return c.jsxs("div",{className:i.spacingFormItem,children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:al(i.textSize,"font-semibold capitalize"),children:"system"===e?"System Roles":"Custom Roles"}),c.jsx(vl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(M[e]||[]).map(e=>e.id),n=t.length>0&&t.every(e=>x.includes(e));v(e=>n?e.filter(e=>!t.includes(e)):[...e.filter(e=>!t.includes(e)),...t]),j&&C(null)})(e),disabled:a,className:al(i.buttonHeightSmall,"px-2",i.textSizeSmall,"font-medium"),children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:al("grid grid-cols-1 md:grid-cols-2",i.gapButtonGroup),children:t.map(e=>c.jsxs("label",{className:al("flex items-start rounded-md border hover:bg-muted/50 cursor-pointer",i.gapForm,i.paddingContainer),children:[c.jsx("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>A(e.id),disabled:a,className:al("mt-0.5 shrink-0",i.iconSize)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:al("flex items-center",i.gapButtonGroup),children:[c.jsx("div",{className:al(i.textSize,"font-medium"),children:e.name}),e.isSystem&&c.jsx(mC,{variant:"secondary",className:i.textSizeSmall,children:"System"})]}),e.description&&c.jsx("div",{className:al(i.textSizeSmall,"text-muted-foreground mt-0.5"),children:e.description}),e.permissions&&e.permissions.length>0&&c.jsxs("div",{className:al(i.textSizeSmall,"text-muted-foreground mt-0.5"),children:[e.permissions.length," ","permission",1!==e.permissions.length?"s":""]})]})]},e.id))})]},e)})})]})}),c.jsx(zl,{className:i.textSizeSmall,children:"Select roles to assign to this group. Users in this group will inherit all selected roles."})]}),x.length>0&&c.jsxs("div",{className:al("rounded-md bg-muted/50 border border-border",i.paddingContainer),children:[c.jsx("div",{className:al("flex items-center justify-between mb-3"),children:c.jsxs("div",{className:al(i.textSize,"font-semibold"),children:[x.length," ",1===x.length?"role":"roles"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:x.map(e=>{const t=f.find(t=>t.id===e);return t?c.jsxs("span",{className:al("group flex items-center justify-between rounded-md bg-primary/10 font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",i.gapButtonGroup,"px-2.5 py-1.5",i.textSizeSmall),title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),A(e)},disabled:a,className:al("opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 rounded hover:bg-destructive/20 flex items-center justify-center",i.iconSize),"aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(ax,{className:al(i.iconSize,"text-destructive")})})]},e):null})})]})]})})},w)}),c.jsx(jE,{open:h,onOpenChange:m,title:"Create Group",description:x.length>0?`Are you sure you want to create the group "${o.name.trim()}" with ${x.length} role(s)? This will create a new group and assign the selected roles.`:`Are you sure you want to create the group "${o.name.trim()}"? This will create a new group that you can use to organize users and assign roles.`,confirmAction:{label:"Create Group",onClick:async()=>{m(!1);try{await n({name:o.name.trim(),description:o.description.trim()||void 0},x),l(tF),u({}),v([]),C(null),S(e=>e+1),t(!1)}catch(wW){}},loading:a}})]})}function sF({open:e,onOpenChange:t,group:n,onSubmit:s,roleService:a,groupService:r,loading:i=!1,error:o=null}){const l=Ua(),[d,u]=p.useState({name:"",description:"",isActive:!0}),[h,m]=p.useState({}),[f,g]=p.useState(!1),[x,v]=p.useState([]),[y,b]=p.useState([]),[w,S]=p.useState([]),[j,C]=p.useState(!1),[k,N]=p.useState(0),[_,P]=p.useState(null),[E,R]=p.useState(""),[A,T]=p.useState("name"),M=p.useRef(null);p.useEffect(()=>{P(o)},[o]),p.useEffect(()=>{n&&e?(u({name:n.name||"",description:n.description||"",isActive:n.isActive}),m({}),N(e=>e+1),a&&r&&D()):e||(S([]),v([]),b([]),R(""))},[n,e,a,r]);const D=async()=>{if(a&&r&&n){C(!0);try{const e=await a.fetchRoles(!0);v(e);const t=await r.getGroupRoles(n.id);b(t),S(t.map(e=>e.id))}catch(wW){}finally{C(!1)}}},L=e=>{S(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),_&&P(null)},F=p.useMemo(()=>{let e=x;if(E.trim()){const t=E.toLowerCase();e=x.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return[...e].sort((e,t)=>{if("name"===A)return e.name.localeCompare(t.name);if("system"===A)return e.isSystem!==t.isSystem?e.isSystem?1:-1:e.name.localeCompare(t.name);if("selected"===A){const n=w.includes(e.id);return n!==w.includes(t.id)?n?-1:1:e.name.localeCompare(t.name)}return 0})},[x,E,A,w]),I=p.useMemo(()=>F.reduce((e,t)=>{const n=t.isSystem?"system":"custom";return e[n]||(e[n]=[]),e[n].push(t),e},{}),[F]),O=x.length>0&&x.every(e=>w.includes(e.id)),z=()=>{const e={};return d.name.trim()?d.name.length>100&&(e.name="Group name cannot exceed 100 characters"):e.name="Group name is required",d.description&&d.description.length>500&&(e.description="Description cannot exceed 500 characters"),m(e),0===Object.keys(e).length},B=e=>{e.preventDefault(),z()&&n&&g(!0)},$=()=>{n&&(u({name:n.name||"",description:n.description||"",isActive:n.isActive}),S(y.map(e=>e.id))),m({}),P(null),t(!1)},U=()=>{n&&(u({name:n.name||"",description:n.description||"",isActive:n.isActive}),S(y.map(e=>e.id))),m({}),P(null),R(""),N(e=>e+1)},V=(e,t)=>{u(n=>({...n,[e]:t})),h[e]&&m(t=>({...t,[e]:void 0})),_&&P(null)};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{M.current?.focus()})},[e,n,k]),p.useEffect(()=>{if(!e)return;const t=e=>{"Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||e.shiftKey||(e.preventDefault(),!i&&z()&&n&&B(e)),"Delete"!==e.key&&"Backspace"!==e.key||!e.metaKey&&!e.ctrlKey||!e.shiftKey||(e.preventDefault(),!i&&n&&U())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,i,d,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:$,title:"Edit Group",maxWidth:"800px",loading:i,showClearButton:!0,onClear:U,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:c.jsxs(c.Fragment,{children:[c.jsx(vl,{type:"button",variant:"outline",onClick:$,disabled:i,className:al(l.buttonHeightSmall,"px-3",l.textSizeSmall,"font-medium border-border hover:bg-muted"),children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:i,className:al(l.buttonHeightSmall,"px-3",l.textSizeSmall,"font-medium"),onClick:B,children:i?"Saving...":"Save Changes"})]}),children:c.jsx(Ll,{onSubmit:async e=>{B(e)},className:al(l.spacingFormSection,"w-full"),children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",l.paddingForm),children:c.jsxs("div",{className:l.spacingFormSection,children:[_&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",l.paddingContainer,l.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsx("span",{className:"font-semibold",children:"ERROR:"}),c.jsx("span",{children:_.message||"Failed to update group"})]})}),c.jsxs(Fl,{className:l.spacingFormItem,children:[c.jsx(Il,{className:al(l.textSizeLabel,"font-medium"),children:"Group Name *"}),c.jsx(Ol,{children:c.jsx(kl,{ref:M,placeholder:"e.g., Sales Team",value:d.name,onChange:e=>V("name",e.target.value),className:al(l.inputHeight,l.textSize,h.name&&"border-destructive"),disabled:i})}),h.name&&c.jsx(Bl,{className:l.textSizeSmall,children:h.name}),c.jsx(zl,{className:l.textSizeSmall,children:"A unique name for this group (max 100 characters)"})]}),c.jsxs(Fl,{className:l.spacingFormItem,children:[c.jsx(Il,{className:al(l.textSizeLabel,"font-medium"),children:"Description"}),c.jsx(Ol,{children:c.jsx(Tl,{placeholder:"Describe the group's purpose...",value:d.description,onChange:e=>V("description",e.target.value),disabled:i,rows:3,className:al(l.textSize,h.description&&"border-destructive")})}),h.description&&c.jsx(Bl,{className:l.textSizeSmall,children:h.description}),c.jsx(zl,{className:l.textSizeSmall,children:"Optional description (max 500 characters)"})]}),c.jsxs(Fl,{className:al("flex items-center justify-between rounded-lg border",l.paddingContainer),children:[c.jsxs("div",{className:l.spacingFormItem,children:[c.jsx(Il,{className:al(l.textSizeLabel,"font-medium"),children:"Active"}),c.jsx(zl,{className:l.textSizeSmall,children:"Inactive groups won't grant roles to their members"})]}),c.jsx(Ol,{children:c.jsx(kx,{checked:d.isActive,onCheckedChange:e=>V("isActive",e),disabled:i})})]}),a&&r&&c.jsxs(Fl,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Il,{className:al(l.textSizeLabel,"font-medium"),children:"Assign Roles"}),c.jsx(vl,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=x.map(e=>e.id),t=e.length>0&&e.every(e=>w.includes(e));S(t?[]:e),_&&P(null)},disabled:i||0===x.length,className:al(l.buttonHeightSmall,"px-2",l.textSizeSmall,"font-medium"),children:O?"Deselect All":"Select All"})]}),c.jsx(Ol,{children:j?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Sg,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(kl,{type:"text",placeholder:"Search roles...",value:E,onChange:e=>R(e.target.value),disabled:i,className:"pl-8 h-8 text-sm"})]}),c.jsxs(ox,{value:A,onValueChange:e=>T(e),disabled:i,children:[c.jsx(cx,{className:"w-[140px] h-8 text-sm",children:c.jsx(lx,{placeholder:"Sort by..."})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"name",children:"Sort by Name"}),c.jsx(mx,{value:"system",children:"System First"}),c.jsx(mx,{value:"selected",children:"Selected First"})]})]})]}),c.jsx("div",{className:"space-y-4 rounded-md border p-4 max-h-[500px] overflow-y-auto",children:0===Object.keys(I).length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:E?"No roles match your search":"No roles available"}):Object.entries(I).map(([e,t])=>{const n=(e=>{const t=I[e]||[];return t.length>0&&t.every(e=>w.includes(e.id))})(e);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-semibold capitalize",children:"system"===e?"System Roles":"Custom Roles"}),c.jsx(vl,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=(I[e]||[]).map(e=>e.id),n=t.length>0&&t.every(e=>w.includes(e));S(e=>n?e.filter(e=>!t.includes(e)):[...e.filter(e=>!t.includes(e)),...t]),_&&P(null)})(e),disabled:i,className:"h-6 px-2 text-xs font-medium",children:n?"Deselect All":"Select All"})]}),c.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:t.map(e=>c.jsxs("label",{className:"flex items-start gap-4 rounded-md border p-3 hover:bg-muted/50 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>L(e.id),disabled:i,className:"mt-0.5 h-4 w-4 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm font-medium",children:e.name}),e.isSystem&&c.jsx(mC,{variant:"secondary",className:"text-xs",children:"System"})]}),e.description&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.description}),e.permissions&&e.permissions.length>0&&c.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[e.permissions.length," ","permission",1!==e.permissions.length?"s":""]})]})]},e.id))})]},e)})})]})}),c.jsx(zl,{children:"Select roles to assign to this group. Users in this group will inherit all selected roles."})]}),w.length>0&&c.jsxs("div",{className:"rounded-md bg-muted/50 border border-border p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"text-sm font-semibold",children:[w.length," ",1===w.length?"role":"roles"," selected"]})}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},children:w.map(e=>{const t=x.find(t=>t.id===e);return t?c.jsxs("span",{className:"group flex items-center justify-between gap-2 rounded-md bg-primary/10 px-2.5 py-1.5 text-xs font-medium text-primary border border-primary/20 min-w-0 hover:bg-primary/15 transition-colors",title:t.name,children:[c.jsx("span",{className:"truncate flex-1 text-left",children:t.name}),c.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),L(e)},disabled:i,className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-4 w-4 rounded hover:bg-destructive/20 flex items-center justify-center","aria-label":`Remove ${t.name}`,title:`Remove ${t.name}`,children:c.jsx(ax,{className:"h-3 w-3 text-destructive"})})]},e):null})})]})]})})},k)}),n&&c.jsx(jE,{open:f,onOpenChange:g,title:"Save Changes",description:(()=>{const e=y.map(e=>e.id),t=w.filter(t=>!e.includes(t)),s=e.filter(e=>!w.includes(e));if(0===t.length&&0===s.length)return`Are you sure you want to save changes to the group "${n.name}"? This will update the group information and affect all members of this group.`;const a=[];return t.length>0&&a.push(`add ${t.length} role(s)`),s.length>0&&a.push(`remove ${s.length} role(s)`),`Are you sure you want to save changes to the group "${n.name}"? This will update the group information and ${a.join(" and ")}. This will affect all members of this group.`})(),confirmAction:{label:"Save Changes",onClick:async()=>{if(n){g(!1);try{await s(n.id,{name:d.name.trim(),description:d.description.trim()||void 0,isActive:d.isActive},w),m({}),P(null),N(e=>e+1),t(!1)}catch(wW){}}},loading:i}})]}):null}function aF({service:e,roleService:t,className:n,onGroupClick:s,showCreateButton:a=!0}){const[r,i]=p.useState([]),[o,l]=p.useState(!0),[d,u]=p.useState(null),[h,m]=p.useState(!1),[f,g]=p.useState(!1),[x,v]=p.useState(null),[y,b]=p.useState(!1),[w,S]=p.useState(null),[j,C]=p.useState(!1),[k,N]=p.useState(null),_=async()=>{l(!0),u(null);try{const t=await e.fetchGroups();i(t)}catch(wW){u(wW)}finally{l(!1)}};p.useEffect(()=>{_()},[]);return c.jsxs("div",{className:n,children:[c.jsx(eF,{groups:r,loading:o,error:d,onGroupClick:s,onEdit:e=>{v(e),g(!0)},onDelete:e=>{N(e),C(!0)},showActions:!0,showCreateButton:a,onCreate:()=>m(!0)}),c.jsx(nF,{open:h,onOpenChange:m,onSubmit:async(t,n)=>{b(!0),S(null);try{const s=await e.createGroup(t);if(n.length>0)for(const t of n)await e.addRoleToGroup(s.id,t);await _(),m(!1)}catch(wW){throw S(wW),wW}finally{b(!1)}},roleService:t,loading:y,error:w}),x&&c.jsx(sF,{open:f,onOpenChange:g,group:x,onSubmit:async(n,s,a)=>{b(!0),S(null);try{if(await e.updateGroup(n,s),t){const t=(await e.getGroupRoles(n)).map(e=>e.id),s=a.filter(e=>!t.includes(e)),r=t.filter(e=>!a.includes(e));for(const a of r)await e.removeRoleFromGroup(n,a);for(const a of s)await e.addRoleToGroup(n,a)}await _(),g(!1),v(null)}catch(wW){throw S(wW),wW}finally{b(!1)}},roleService:t,groupService:e,loading:y,error:w}),c.jsx(jE,{open:j,onOpenChange:C,title:"Delete Group",description:k?`Are you sure you want to delete the group "${k.name}"? This action cannot be undone and will remove all members from the group.`:void 0,confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(k)try{await e.deleteGroup(k.id),await _(),C(!1),N(null)}catch(wW){alert(wW instanceof Error?wW.message:"Failed to delete group")}}}})]})}function rF({className:e,defaultTab:t="users",onCreateDialogClose:n,onUserClick:s,onRoleClick:a,autoOpenCreate:r,onGroupClick:i}){const[o,l]=p.useState(t),d=p.useMemo(()=>new PL({apiClient:Fa,endpoints:{roles:ma.ENDPOINTS.ROLES}}),[]),u=p.useMemo(()=>new AL({apiClient:Fa,endpoints:{groups:ma.ENDPOINTS.GROUPS}}),[]);return c.jsx("div",{className:e,children:c.jsx(qM,{value:o,onValueChange:e=>l(e),variant:"default",items:[{value:"users",label:"Users",content:c.jsx(VL,{autoOpenCreate:r,onCreateDialogClose:n,onNavigateToUser:s})},{value:"roles",label:"Roles",content:c.jsx(JL,{service:d,onRoleClick:a,showCreateButton:!0})},{value:"groups",label:"Groups",content:c.jsx(aF,{service:u,roleService:d,onGroupClick:i,showCreateButton:!0})}]})})}function iF({children:e}){const t=p.useMemo(()=>({apiClient:Fa,endpoints:{users:ma.ENDPOINTS.USERS.FETCH}}),[]);return c.jsx($L,{config:t,children:e})}function oF({className:e,customers:t=[],loading:n=!1,pagination:s,onCustomerClick:a,onCreate:r,onSearch:i,onPageChange:o,onPageSizeChange:l}){const d=Ua(),u=[OP({getDisplayName:e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:a,additionalOptions:{id:"code"}}),LP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("font-medium",d.textSize),children:t??"-"})}}),LP({accessorKey:"email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",d.textSize),children:t??"-"})}}),LP({accessorKey:"phone",header:"Phone",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",d.textSize),children:t??"-"})}}),LP({accessorKey:"business_name",header:"Business Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",d.textSize),children:t??"-"})}}),LP({accessorKey:"city",header:"City",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",d.textSize),children:t??"-"})}})],h=t,m=s?{page:s.page,pageSize:s.pageSize,total:s.total,totalPages:s.totalPages}:void 0;return c.jsx("div",{className:al("w-full",e),children:c.jsx($P,{data:h,columns:u,useDefaultColumns:!1,title:"Customers",description:"Manage and view customers",onCreate:r,onSearch:i,manualPagination:Boolean(s&&o),serverPagination:m,onPageChange:o,onPageSizeChange:l,loading:n})})}function lF({customer:e,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a}){return c.jsx(YD,{entityId:e.id,entityType:"customer",defaultImageUrl:null,altText:e.name,FallbackIcon:Jg,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a})}function cF({className:e,cus:t,loading:n=!1,error:s=null,showMetadata:a=!1,editable:r=!0,attachmentService:i,onEdit:o,onDelete:l,onActivate:d,onDeactivate:u,onCreateBooking:h,onViewBookings:m,onManageTags:f,onManageAttachments:g,profilePhoto:x,onProfilePhotoChange:v,customActions:y}){const[b,w]=p.useState("overview"),[S,j]=p.useState([]),[C,k]=p.useState(!1),N=p.useMemo(()=>i||new YP({apiClient:Fa,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[i]),_=p.useMemo(()=>t&&(t?.code||t?.id)||"",[t,t?.code]),P=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},E=p.useCallback(async()=>{if(t?.id&&N){k(!0);try{const e=await N.getAttachmentsForEntity("customer",t.id,"document");j(e.items||[])}catch(e){j([])}finally{k(!1)}}},[t?.id,N]);p.useEffect(()=>{"documents"===b&&t?.id&&N&&E()},[b,t?.id,N,E]);const R="active"===t?.status,A=a,T=[{value:"overview",label:"Overview",icon:_f},{value:"profile",label:"Preferences & Settings",icon:jg},{value:"account",label:"Account",icon:Mp},{value:"social",label:"Social & Tags",icon:kg},{value:"documents",label:"Documents"+(S.length>0?` (${S.length})`:""),icon:pf}];return A&&T.splice(4,0,{value:"metadata",label:"Metadata",icon:lf}),n?c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})}):s?c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",s.message]})})}):t?c.jsx(bl,{className:al("p-6",e),children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[t?c.jsx("div",{className:"flex-shrink-0",children:c.jsx(lF,{customer:t,attachmentService:N,currentPhoto:x,onPhotoChange:v})}):c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(_f,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h2",{className:"text-xl font-semibold",children:t.name||_}),c.jsx(mC,{variant:R?"default":"secondary",className:al(R?"bg-green-500/10 text-green-700 dark:text-green-400":"bg-gray-500/10 text-gray-700 dark:text-gray-400"),children:R?c.jsxs(c.Fragment,{children:[c.jsx(Zp,{className:"h-3 w-3 mr-1"}),"Active"]}):c.jsxs(c.Fragment,{children:[c.jsx(ef,{className:"h-3 w-3 mr-1"}),"Inactive"]})})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[t.code&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Code:"}),c.jsx("span",{className:"text-sm font-medium",children:t.code}),c.jsx(HD,{value:t.code,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]}),t.email&&c.jsxs("a",{href:`mailto:${t.email}`,className:"text-sm text-primary hover:underline flex items-center gap-1",children:[c.jsx(Uf,{className:"h-3 w-3"}),"Email"]}),t.phone&&c.jsxs("a",{href:`tel:${t.phone}`,className:"text-sm text-primary hover:underline flex items-center gap-1",children:[c.jsx(lg,{className:"h-3 w-3"}),"Call"]})]})]})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsx(kA,{actions:[...t&&h?[{id:"book-now",label:"Book Now",icon:c.jsx(_g,{className:"h-4 w-4"}),onClick:()=>h(t),variant:"default"}]:[],...r&&t&&o?[{id:"edit",label:"Edit",icon:c.jsx(Tg,{className:"h-4 w-4"}),onClick:()=>o(t),variant:"outline"}]:[],...t&&m?[{id:"view-bookings",label:"View Bookings",icon:c.jsx(of,{className:"h-4 w-4"}),onClick:()=>m(t),variant:"outline"}]:[],...t&&R&&u?[{id:"deactivate",label:"Deactivate",icon:c.jsx(Zg,{className:"h-4 w-4"}),onClick:()=>u(t),display:"dropdown-item"}]:[],...t&&!R&&d?[{id:"activate",label:"Activate",icon:c.jsx(Yg,{className:"h-4 w-4"}),onClick:()=>d(t),display:"dropdown-item"}]:[],...t&&r&&f?[{id:"manage-tags",label:"Manage Tags",icon:c.jsx(zg,{className:"h-4 w-4"}),onClick:()=>f(t),display:"dropdown-item"}]:[],...t&&r&&g?[{id:"manage-documents",label:"Manage Documents",icon:c.jsx(pf,{className:"h-4 w-4"}),onClick:()=>g(t),display:"dropdown-item"}]:[],...t&&l?[{id:"delete",label:"Delete",icon:c.jsx(Hg,{className:"h-4 w-4"}),onClick:()=>l(t),variant:"destructive",display:"dropdown-item"}]:[]],customActions:y?.(t)})})]}),c.jsx(HM,{tabs:T,value:b,onValueChange:e=>w(e),children:e=>c.jsxs("div",{className:"mt-0",children:["overview"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(QM,{title:"Personal Information",icon:Jg,columns:3,children:[c.jsx(WM,{label:"Date of Birth",value:t.date_of_birth,render:e=>P(e)}),c.jsx(WM,{label:"Gender",value:t.gender,valueClassName:"capitalize"}),c.jsx(WM,{label:"Nationality",value:t.nationality}),c.jsx(WM,{label:"ID Type",value:t.id_type}),c.jsx(WM,{label:"ID Number",value:t.id_number})]}),c.jsxs(QM,{title:"Contact Information",icon:Uf,columns:3,children:[c.jsx(WM,{label:"Business Name",value:t.business_name}),c.jsx(WM,{label:"Email",value:t.email,linkType:"email"}),c.jsx(WM,{label:"Phone",value:t.phone,linkType:"tel"}),c.jsx(WM,{label:"Website",value:t.website,linkType:"external"})]}),c.jsxs(QM,{columns:3,title:"Emergency Contact",icon:Yp,className:"mt-0 mb-0",children:[c.jsx(WM,{label:"Contact Name",value:t.emergency_contact_name}),c.jsx(WM,{label:"Contact Phone",value:t.emergency_contact_phone,linkType:"tel"}),c.jsx(WM,{label:"Relationship",value:t.emergency_contact_relationship})]}),c.jsxs(QM,{title:"Address Information",icon:Vf,columns:3,children:[c.jsx(WM,{label:"Street Address",value:t.street_address,span:"md:col-span-2 lg:col-span-3"}),c.jsx(WM,{label:"City",value:t.city}),c.jsx(WM,{label:"State/Province",value:t.state_province}),c.jsx(WM,{label:"Postal Code",value:t.postal_code}),c.jsx(WM,{label:"Country",value:t.country})]})]}),"profile"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(QM,{columns:2,children:[c.jsx(WM,{label:"Event Preferences",value:t.event_preferences}),c.jsx(WM,{label:"Seating Preferences",value:t.seating_preferences}),c.jsx(WM,{label:"Accessibility Needs",value:t.accessibility_needs}),c.jsx(WM,{label:"Dietary Restrictions",value:t.dietary_restrictions}),c.jsx(WM,{label:"Preferred Language",value:t.preferred_language})]}),c.jsx(KM,{showBorder:!0,children:c.jsxs("div",{className:"flex flex-wrap gap-4",children:[void 0!==t.marketing_opt_in&&c.jsx(WM,{label:"",value:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:al("h-2 w-2 rounded-full",t.marketing_opt_in?"bg-green-500":"bg-gray-300")}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Marketing Opt-in:"," ",t.marketing_opt_in?"Yes":"No"]})]}),hideIfEmpty:!1}),void 0!==t.email_marketing&&c.jsx(WM,{label:"",value:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:al("h-2 w-2 rounded-full",t.email_marketing?"bg-green-500":"bg-gray-300")}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Email Marketing:"," ",t.email_marketing?"Yes":"No"]})]}),hideIfEmpty:!1}),void 0!==t.sms_marketing&&c.jsx(WM,{label:"",value:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:al("h-2 w-2 rounded-full",t.sms_marketing?"bg-green-500":"bg-gray-300")}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["SMS Marketing:"," ",t.sms_marketing?"Yes":"No"]})]}),hideIfEmpty:!1})]})})]}),"account"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(QM,{title:"Account Management",icon:tx,columns:3,children:[c.jsx(WM,{label:"Account Manager",value:t.account_manager_id}),c.jsx(WM,{label:"Sales Representative",value:t.sales_representative_id}),c.jsx(WM,{label:"Customer Since",value:t.customer_since,render:e=>P(e),icon:Ip}),c.jsx(WM,{label:"Last Purchase",value:t.last_purchase_date,render:e=>P(e),icon:_g}),c.jsx(WM,{label:"Total Purchase Amount",value:t.total_purchase_amount,render:e=>`$${e?.toFixed(2)||"0.00"}`,valueClassName:"font-semibold text-foreground",icon:of}),c.jsx(WM,{label:"Last Contact",value:t.last_contact_date,render:e=>P(e),icon:lg})]}),c.jsxs(QM,{title:"System Information",icon:lf,columns:3,children:[c.jsx(WM,{label:"Status Reason",value:t.status_reason}),c.jsx(WM,{label:"Created",value:t.createdAt,render:e=>P(e)}),c.jsx(WM,{label:"Last Updated",value:t.updatedAt,render:e=>P(e)}),c.jsx(WM,{label:"Deactivated At",value:t.deactivatedAt,render:e=>P(e)})]})]}),"social"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(QM,{title:"Social & Online",icon:bf,columns:2,children:[c.jsx(WM,{label:"Facebook",value:t.facebook_url,linkType:"external"}),c.jsx(WM,{label:"Twitter/X",value:t.twitter_handle,render:e=>e.startsWith("@")?e:`@${e}`}),c.jsx(WM,{label:"LinkedIn",value:t.linkedin_url,linkType:"external"}),c.jsx(WM,{label:"Instagram",value:t.instagram_handle,render:e=>e.startsWith("@")?e:`@${e}`})]}),c.jsxs(QM,{title:"Tags & Classification",icon:zg,columns:1,children:[c.jsx(WM,{label:"",value:t.tags&&t.tags.length>0?c.jsx(GD,{tags:t.tags}):c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx(zg,{className:"h-4 w-4 opacity-50"}),c.jsx("span",{children:"No tags assigned"})]}),hideIfEmpty:!1}),c.jsx(WM,{label:"Internal Notes",value:t.notes,valueClassName:"whitespace-pre-wrap"}),c.jsx(WM,{label:"Public Notes",value:t.public_notes,valueClassName:"whitespace-pre-wrap"})]})]}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(bl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})}),"documents"===e&&c.jsx(qD,{documents:S,isLoading:C,onManageAttachments:g?()=>g(t):void 0,loading:n})]})})]})}):c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No customer selected"})})})}bL("user-list",{Component:SL,metadata:{name:"User List",description:"Enterprise-grade user management table with advanced filtering, sorting, pagination, and export capabilities",category:"users",tags:["users","table","list","management","enterprise","data-table"],version:"2.0.0",dependencies:["@truths/ui","@tanstack/react-table"]}}),bL("user-detail",{Component:TL,metadata:{name:"User Detail",description:"Display detailed information about a user",category:"users",tags:["users","detail","profile","view"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("create-user",{Component:function({className:e,onSubmit:t,onCancel:n,onSuccess:s,availableRoles:a=[{value:"user",label:"User"},{value:"admin",label:"Admin"}],requirePassword:r=!0,loading:i=!1}){const[o,l]=p.useState({email:"",password:"",username:"",firstName:"",lastName:"",baseRole:"user"}),[d,u]=p.useState({}),[h,m]=p.useState(!1),f=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0}))};return c.jsx(bl,{className:al("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(e.email="Invalid email address"):e.email="Email is required",r&&!o.password?e.password="Password is required":r&&o.password&&o.password.length<8&&(e.password="Password must be at least 8 characters"),u(e),0===Object.keys(e).length})()){m(!0);try{await t(o),s?.("new-user-id")}catch(n){u({email:"Failed to create user. Please try again."})}finally{m(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Create New User"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new user to your organization"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"firstName",children:"First Name"}),c.jsx(kl,{id:"firstName",value:o.firstName,onChange:e=>f("firstName",e.target.value),placeholder:"John",disabled:h||i,autoComplete:"given-name"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"lastName",children:"Last Name"}),c.jsx(kl,{id:"lastName",value:o.lastName,onChange:e=>f("lastName",e.target.value),placeholder:"Doe",disabled:h||i,autoComplete:"family-name"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"username",children:"Username (Optional)"}),c.jsx(kl,{id:"username",value:o.username,onChange:e=>f("username",e.target.value),placeholder:"johndoe",disabled:h||i,autoComplete:"username"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"email",children:["Email ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"email",type:"email",value:o.email,onChange:e=>f("email",e.target.value),placeholder:"john@example.com",disabled:h||i,required:!0,autoComplete:"email"}),d.email&&c.jsx("p",{className:"text-sm text-destructive",children:d.email})]}),r&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"password",children:["Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"password",type:"password",value:o.password,onChange:e=>f("password",e.target.value),placeholder:"",disabled:h||i,required:!0,autoComplete:"new-password"}),d.password&&c.jsx("p",{className:"text-sm text-destructive",children:d.password}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"role",children:"Role"}),c.jsx(ox,{value:o.baseRole,onValueChange:e=>f("baseRole",e),disabled:h||i,children:a.map(e=>c.jsx("option",{value:e.value,children:e.label},e.value))})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[n&&c.jsx(vl,{type:"button",variant:"outline",onClick:n,disabled:h||i,children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:h||i,children:h||i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Creating..."]}):"Create User"})]})]})})},metadata:{name:"Create User",description:"Form to create new users with validation",category:"users",tags:["users","form","create","management"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("edit-user",{Component:function({className:e,user:t,onSubmit:n,onCancel:s,onSuccess:a,availableRoles:r=[{value:"user",label:"User"},{value:"admin",label:"Admin"}],availableStatuses:i=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}],loading:o=!1}){const[l,d]=p.useState({email:t.email,username:t.username||"",firstName:t.firstName||"",lastName:t.lastName||"",baseRole:t.baseRole||t.role,status:t.status}),[u,h]=p.useState({}),[m,f]=p.useState(!1);p.useEffect(()=>{d({email:t.email,username:t.username||"",firstName:t.firstName||"",lastName:t.lastName||"",baseRole:t.baseRole||t.role,status:t.status})},[t]);const g=(e,t)=>{d(n=>({...n,[e]:t})),u[e]&&h(t=>({...t,[e]:void 0}))};return c.jsx(bl,{className:al("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(e.email="Invalid email address"):e.email="Email is required",h(e),0===Object.keys(e).length})()){f(!0);try{await n(t.id,l),a?.()}catch(s){h({email:"Failed to update user. Please try again."})}finally{f(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Edit User"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Update user information"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"firstName",children:"First Name"}),c.jsx(kl,{id:"firstName",value:l.firstName,onChange:e=>g("firstName",e.target.value),placeholder:"John",disabled:m||o})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"lastName",children:"Last Name"}),c.jsx(kl,{id:"lastName",value:l.lastName,onChange:e=>g("lastName",e.target.value),placeholder:"Doe",disabled:m||o})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"username",children:"Username"}),c.jsx(kl,{id:"username",value:l.username,onChange:e=>g("username",e.target.value),placeholder:"johndoe",disabled:m||o})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"email",children:["Email ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"email",type:"email",value:l.email,onChange:e=>g("email",e.target.value),placeholder:"john@example.com",disabled:m||o,required:!0}),u.email&&c.jsx("p",{className:"text-sm text-destructive",children:u.email})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"role",children:"Role"}),c.jsxs(ox,{value:l.baseRole,onValueChange:e=>g("baseRole",e),disabled:m||o,children:[c.jsx(cx,{children:c.jsx(lx,{placeholder:"Select a role"})}),c.jsx(hx,{children:r.map(e=>c.jsx(mx,{value:e.value,children:e.label},e.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"status",children:"Status"}),c.jsxs(ox,{value:l.status,onValueChange:e=>g("status",e),disabled:m||o,children:[c.jsx(cx,{children:c.jsx(lx,{placeholder:"Select a status"})}),c.jsx(hx,{children:i.map(e=>c.jsx(mx,{value:e.value,children:e.label},e.value))})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[s&&c.jsx(vl,{type:"button",variant:"outline",onClick:s,disabled:m||o,children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:m||o,children:m||o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Saving..."]}):"Save Changes"})]})]})})},metadata:{name:"Edit User",description:"Form to edit existing user information",category:"users",tags:["users","form","edit","management"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("edit-user-dialog",{Component:FL,metadata:{name:"Edit User Dialog",description:"Dialog for editing existing user information",category:"users",tags:["users","edit","dialog","form"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("role-list",{Component:GL,metadata:{name:"Role List",description:"Display and manage roles with user counts and permissions",category:"roles",tags:["roles","permissions","list","management"],version:"1.0.0",dependencies:["@truths/ui","@truths/custom-ui"]}}),bL("role-detail",{Component:KL,metadata:{name:"Role Detail",description:"Display detailed information about a role",category:"roles",tags:["roles","permissions","detail","view"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("assign-role",{Component:function({className:e,user:t,roles:n=[],onSubmit:s,onCancel:a,onSuccess:r,loading:i=!1,showExpiration:o=!1}){const[l,d]=p.useState(""),[u,h]=p.useState(""),[m,f]=p.useState(""),[g,x]=p.useState(!1),v=t?n.filter(e=>e.id!==t.role&&e.id!==t.baseRole):n;return c.jsx(bl,{className:al("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l)if(t){x(!0),f("");try{const e={userId:t.id,roleId:l};o&&u&&(e.expiresAt=new Date(u)),await s(e),r?.()}catch(wW){f("Failed to assign role. Please try again.")}finally{x(!1)}}else f("User information is required");else f("Please select a role")},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Assign Role"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:t?`Assign a role to ${t.firstName||t.username||t.email}`:"Select a user to assign a role"})]}),m&&c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:m}),t&&c.jsx("div",{className:"rounded-lg border p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:t.firstName||t.lastName?`${t.firstName||""} ${t.lastName||""}`.trim():t.username||t.email}),c.jsx("p",{className:"text-sm text-muted-foreground",children:t.email})]}),(t.role||t.baseRole)&&c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Current role:"," ",c.jsx("span",{className:"font-medium",children:t.role||t.baseRole})]})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"role",children:["Select Role ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsxs(ox,{value:l,onValueChange:d,disabled:g||i||!t,required:!0,children:[c.jsx("option",{value:"",children:"Choose a role..."}),v.map(e=>c.jsxs("option",{value:e.id,children:[e.name,e.description&&` - ${e.description}`]},e.id))]}),l&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.find(e=>e.id===l)?.permissions?.length||0," ","permissions"]})]}),o&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"expiresAt",children:"Expiration Date (Optional)"}),c.jsx("input",{id:"expiresAt",type:"datetime-local",value:u,onChange:e=>h(e.target.value),disabled:g||i,title:"Role expiration date",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty for permanent role assignment"})]}),l&&c.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[c.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Role Details"}),n.filter(e=>e.id===l).map(e=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-sm",children:e.description}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.jsxs("p",{children:["Permissions: ",e.permissions?.length||0]}),c.jsxs("p",{children:["Users with this role: ",e.userCount||0]})]})]},e.id))]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[a&&c.jsx(vl,{type:"button",variant:"outline",onClick:a,disabled:g||i,children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:g||i||!t||!l,children:g||i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Assigning..."]}):"Assign Role"})]})]})})},metadata:{name:"Assign Role",description:"Form to assign roles to users",category:"roles",tags:["roles","form","assign","management"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("profile-view",{Component:function({className:e,profile:t,loading:n=!1,error:s=null,editable:a=!0,showSocialLinks:r=!0,showPreferences:i=!1,onEdit:o,onPasswordChange:l,customActions:d}){const u=Ua();if(n)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});if(s||!t)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:s?.message||"Profile not found"})});const h=()=>t.firstName||t.lastName?`${t.firstName||""} ${t.lastName||""}`.trim():t.username||t.email;return c.jsx(bl,{className:al("p-6",e),children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(cC,{className:"h-24 w-24",children:t.avatar?c.jsx("img",{src:t.avatar,alt:h()}):c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-primary/10 text-3xl font-medium",children:h().charAt(0).toUpperCase()})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:h()}),t.username&&c.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.username]}),t.bio&&c.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:t.bio}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(mC,{variant:{active:"default",inactive:"secondary",suspended:"destructive",pending:"outline"}[t.status],children:t.status}),c.jsx(mC,{variant:"outline",children:t.role||t.baseRole||"User"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[d,a&&o&&c.jsxs(vl,{onClick:o,className:al("flex items-center gap-1.5",u.textSizeSmall),children:[c.jsx(Tg,{className:u.iconSizeSmall}),c.jsx("span",{children:"Edit Profile"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Contact Information"}),c.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Email"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.email})]}),t.phone&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Phone"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.phone})]}),t.location&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Location"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.location})]}),t.website&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Website"}),c.jsx("dd",{className:"mt-1 text-sm",children:c.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:t.website})})]})]})]}),r&&t.socialLinks&&c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Social Links"}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.socialLinks.twitter&&c.jsx("a",{href:`https://twitter.com/${t.socialLinks.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"Twitter"}),t.socialLinks.linkedin&&c.jsx("a",{href:t.socialLinks.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"LinkedIn"}),t.socialLinks.github&&c.jsx("a",{href:`https://github.com/${t.socialLinks.github}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"GitHub"})]})]}),i&&t.preferences&&c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Preferences"}),c.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[t.preferences.theme&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Theme"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground capitalize",children:t.preferences.theme})]}),t.preferences.language&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Language"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.preferences.language})]})]})]}),c.jsx("div",{className:"flex items-center gap-2 border-t pt-4",children:l&&c.jsxs(vl,{variant:"outline",onClick:l,className:al("flex items-center gap-1.5",u.textSizeSmall),children:[c.jsx(Ef,{className:u.iconSizeSmall}),c.jsx("span",{children:"Change Password"})]})})]})})},metadata:{name:"Profile View",description:"Display user profile information",category:"profile",tags:["profile","user","view","display"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("profile-edit",{Component:function({className:e,profile:t,onSubmit:n,onCancel:s,onSuccess:a,loading:r=!1,showSocialLinks:i=!0,showBio:o=!0}){const[l,d]=p.useState({firstName:t.firstName||"",lastName:t.lastName||"",username:t.username||"",phone:t.phone||"",location:t.location||"",website:t.website||"",bio:t.bio||"",socialLinks:{twitter:t.socialLinks?.twitter||"",linkedin:t.socialLinks?.linkedin||"",github:t.socialLinks?.github||""}}),[u,h]=p.useState({}),[m,f]=p.useState(!1);p.useEffect(()=>{d({firstName:t.firstName||"",lastName:t.lastName||"",username:t.username||"",phone:t.phone||"",location:t.location||"",website:t.website||"",bio:t.bio||"",socialLinks:{twitter:t.socialLinks?.twitter||"",linkedin:t.socialLinks?.linkedin||"",github:t.socialLinks?.github||""}})},[t]);const g=(e,t)=>{if(e.startsWith("socialLinks.")){const n=e.split(".")[1];d(e=>({...e,socialLinks:{...e.socialLinks,[n]:t}}))}else d(n=>({...n,[e]:t}));u[e]&&h(t=>({...t,[e]:void 0}))};return c.jsx(bl,{className:al("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.website&&!l.website.match(/^https?:\/\/.+/)&&(e.website="Website must be a valid URL"),h(e),0===Object.keys(e).length})()){f(!0);try{await n(l),a?.()}catch(t){h({_general:"Failed to update profile. Please try again."})}finally{f(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Edit Profile"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your profile information"})]}),u._general&&c.jsx("div",{className:"rounded-md bg-destructive/15 p-4 text-sm text-destructive",children:u._general}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Basic Information"}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"firstName",children:"First Name"}),c.jsx(kl,{id:"firstName",value:l.firstName,onChange:e=>g("firstName",e.target.value),placeholder:"John",disabled:m||r})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"lastName",children:"Last Name"}),c.jsx(kl,{id:"lastName",value:l.lastName,onChange:e=>g("lastName",e.target.value),placeholder:"Doe",disabled:m||r})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"username",children:"Username"}),c.jsx(kl,{id:"username",value:l.username,onChange:e=>g("username",e.target.value),placeholder:"johndoe",disabled:m||r})]}),o&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"bio",children:"Bio"}),c.jsx("textarea",{id:"bio",value:l.bio,onChange:e=>g("bio",e.target.value),placeholder:"Tell us about yourself...",rows:3,disabled:m||r,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Contact Information"}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"phone",children:"Phone"}),c.jsx(kl,{id:"phone",type:"tel",value:l.phone,onChange:e=>g("phone",e.target.value),placeholder:"+1 (555) 123-4567",disabled:m||r})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"location",children:"Location"}),c.jsx(kl,{id:"location",value:l.location,onChange:e=>g("location",e.target.value),placeholder:"San Francisco, CA",disabled:m||r})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"website",children:"Website"}),c.jsx(kl,{id:"website",type:"url",value:l.website,onChange:e=>g("website",e.target.value),placeholder:"https://example.com",disabled:m||r}),u.website&&c.jsx("p",{className:"text-sm text-destructive",children:u.website})]})]}),i&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Social Links"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"twitter",children:"Twitter"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"@"}),c.jsx(kl,{id:"twitter",value:l.socialLinks?.twitter,onChange:e=>g("socialLinks.twitter",e.target.value),placeholder:"username",disabled:m||r})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"linkedin",children:"LinkedIn"}),c.jsx(kl,{id:"linkedin",value:l.socialLinks?.linkedin,onChange:e=>g("socialLinks.linkedin",e.target.value),placeholder:"https://linkedin.com/in/username",disabled:m||r})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"github",children:"GitHub"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"@"}),c.jsx(kl,{id:"github",value:l.socialLinks?.github,onChange:e=>g("socialLinks.github",e.target.value),placeholder:"username",disabled:m||r})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[s&&c.jsx(vl,{type:"button",variant:"outline",onClick:s,disabled:m||r,children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:m||r,children:m||r?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Saving..."]}):"Save Changes"})]})]})})},metadata:{name:"Profile Edit",description:"Form to edit user profile information",category:"profile",tags:["profile","user","edit","form"],version:"1.0.0",dependencies:["@truths/ui"]}}),bL("password-change",{Component:function({className:e,onSubmit:t,onCancel:n,onSuccess:s,requireOldPassword:a=!0,loading:r=!1,minPasswordLength:i=8}){const[o,l]=p.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(!1),x=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0}))},v=o.newPassword?(e=>{let t=0;e.length>=i&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^a-zA-Z\d]/.test(e)&&t++;return{strength:t,label:["Very Weak","Weak","Fair","Good","Strong"][t]||"Very Weak",color:["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"][t]||"bg-red-500"}})(o.newPassword):null;return c.jsx(bl,{className:al("p-6",e),children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return a&&!o.oldPassword&&(e.oldPassword="Current password is required"),o.newPassword?o.newPassword.length<i&&(e.newPassword=`Password must be at least ${i} characters`):e.newPassword="New password is required",o.confirmPassword?o.newPassword!==o.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",a&&o.oldPassword===o.newPassword&&(e.newPassword="New password must be different from current password"),u(e),0===Object.keys(e).length})()){m(!0);try{await t(o),s?.(),l({oldPassword:"",newPassword:"",confirmPassword:""})}catch(n){u({oldPassword:"Failed to change password. Please try again."})}finally{m(!1)}}},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Change Password"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your password to keep your account secure"})]}),a&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"oldPassword",children:["Current Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"oldPassword",type:f?"text":"password",value:o.oldPassword,onChange:e=>x("oldPassword",e.target.value),placeholder:"",disabled:h||r,required:!0,autoComplete:"current-password"}),d.oldPassword&&c.jsx("p",{className:"text-sm text-destructive",children:d.oldPassword})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"newPassword",children:["New Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"newPassword",type:f?"text":"password",value:o.newPassword,onChange:e=>x("newPassword",e.target.value),placeholder:"",disabled:h||r,required:!0,autoComplete:"new-password"}),d.newPassword&&c.jsx("p",{className:"text-sm text-destructive",children:d.newPassword}),v&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((e,t)=>c.jsx("div",{className:al("h-1 flex-1 rounded-full",t<v.strength?v.color:"bg-muted")},t))}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Password strength:"," ",c.jsx("span",{className:"font-medium",children:v.label})]})]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Password must be at least ",i," characters long"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"confirmPassword",children:["Confirm New Password ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"confirmPassword",type:f?"text":"password",value:o.confirmPassword,onChange:e=>x("confirmPassword",e.target.value),placeholder:"",disabled:h||r,required:!0,autoComplete:"new-password"}),d.confirmPassword&&c.jsx("p",{className:"text-sm text-destructive",children:d.confirmPassword})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"showPasswords",checked:f,onChange:e=>g(e.target.checked),title:"Show passwords",className:"h-4 w-4 rounded border-gray-300"}),c.jsx(Dl,{htmlFor:"showPasswords",className:"text-sm font-normal",children:"Show passwords"})]}),c.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[n&&c.jsx(vl,{type:"button",variant:"outline",onClick:n,disabled:h||r,children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:h||r,children:h||r?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Changing Password..."]}):"Change Password"})]})]})})},metadata:{name:"Password Change",description:"Form to change user password with validation",category:"profile",tags:["profile","password","security","form"],version:"1.0.0",dependencies:["@truths/ui"]}});const dF=AM({name:PM().min(1,"Name is required"),email:PM().email("Invalid email address").optional().or(TM("")),phone:PM().optional(),business_name:PM().optional(),street_address:PM().optional(),city:PM().optional(),state_province:PM().optional(),postal_code:PM().optional(),country:PM().optional(),date_of_birth:PM().optional(),gender:PM().optional(),nationality:PM().optional(),id_number:PM().optional(),id_type:PM().optional(),event_preferences:PM().optional(),seating_preferences:PM().optional(),accessibility_needs:PM().optional(),dietary_restrictions:PM().optional(),emergency_contact_name:PM().optional(),emergency_contact_phone:PM().optional(),emergency_contact_relationship:PM().optional(),preferred_language:PM().optional(),marketing_opt_in:RM().optional(),email_marketing:RM().optional(),sms_marketing:RM().optional(),facebook_url:PM().url("Invalid URL").optional().or(TM("")),twitter_handle:PM().optional(),linkedin_url:PM().url("Invalid URL").optional().or(TM("")),instagram_handle:PM().optional(),website:PM().url("Invalid URL").optional().or(TM("")),notes:PM().optional(),public_notes:PM().optional()}),uF=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1},s){const{handleSubmit:a,control:r,watch:i,setValue:o,formState:{errors:l,isSubmitted:d}}=uA({resolver:QA(dF),defaultValues:{name:"",email:"",phone:"",business_name:"",marketing_opt_in:!1,email_marketing:!1,sms_marketing:!1,...e}}),u=p.useRef(null);p.useEffect(()=>{if(d&&Object.keys(l).length>0){const e=Object.keys(l)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):u.current&&u.current.scrollIntoView({behavior:"smooth",block:"center"})}},[l,d]);const h={name:i("name")??"",email:i("email")??"",phone:i("phone")??"",business_name:i("business_name")??"",notes:i("notes")??""};return c.jsxs("form",{ref:s,id:"customer-form",onSubmit:a(async e=>{await t(e)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(wA,{formType:"customer",currentValues:h,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&o(e,t)})},disabled:n})}),c.jsxs("div",{ref:u,className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Personal Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(hA,{control:r,name:"name",label:"Name",placeholder:"Full name",required:!0,disabled:n}),c.jsx(hA,{control:r,name:"email",label:"Email",type:"email",placeholder:"email@example.com",disabled:n}),c.jsx(hA,{control:r,name:"phone",label:"Phone",type:"tel",placeholder:"+1 (555) 123-4567",disabled:n}),c.jsx(hA,{control:r,name:"business_name",label:"Business Name",placeholder:"Business name",disabled:n})]})]}),c.jsx(Hj,{}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(pA,{control:r,name:"date_of_birth",label:"Date of Birth",disabled:n}),c.jsx(gA,{control:r,name:"gender",label:"Gender",placeholder:"Select gender",options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"},{value:"prefer_not_to_say",label:"Prefer not to say"}],disabled:n}),c.jsx(hA,{control:r,name:"nationality",label:"Nationality",placeholder:"Nationality",disabled:n}),c.jsx(gA,{control:r,name:"id_type",label:"ID Type",placeholder:"Select ID type",options:[{value:"passport",label:"Passport"},{value:"driver_license",label:"Driver's License"},{value:"national_id",label:"National ID"},{value:"other",label:"Other"}],disabled:n}),c.jsx("div",{className:"md:col-span-2",children:c.jsx(hA,{control:r,name:"id_number",label:"ID Number",placeholder:"Government ID number",disabled:n})})]})}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Address Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(hA,{control:r,name:"street_address",label:"Street Address",placeholder:"123 Main Street",disabled:n})}),c.jsx(hA,{control:r,name:"city",label:"City",placeholder:"City",disabled:n}),c.jsx(hA,{control:r,name:"state_province",label:"State/Province",placeholder:"State or Province",disabled:n}),c.jsx(hA,{control:r,name:"postal_code",label:"Postal Code",placeholder:"12345",disabled:n}),c.jsx(hA,{control:r,name:"country",label:"Country",placeholder:"Country",disabled:n})]})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Emergency Contact"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(hA,{control:r,name:"emergency_contact_name",label:"Contact Name",placeholder:"Emergency contact name",disabled:n}),c.jsx(hA,{control:r,name:"emergency_contact_phone",label:"Contact Phone",type:"tel",placeholder:"Emergency contact phone",disabled:n}),c.jsx(hA,{control:r,name:"emergency_contact_relationship",label:"Relationship",placeholder:"Relationship",disabled:n})]})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Preferences & Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(SA,{control:r,name:"event_preferences",label:"Event Preferences",placeholder:"Preferred event types or categories",rows:3,disabled:n}),c.jsx(SA,{control:r,name:"seating_preferences",label:"Seating Preferences",placeholder:"Preferred seating areas",rows:3,disabled:n}),c.jsx(SA,{control:r,name:"accessibility_needs",label:"Accessibility Needs",placeholder:"Special accessibility requirements",rows:3,disabled:n}),c.jsx(SA,{control:r,name:"dietary_restrictions",label:"Dietary Restrictions",placeholder:"Dietary restrictions for events with catering",rows:3,disabled:n}),c.jsx(gA,{control:r,name:"preferred_language",label:"Preferred Language",placeholder:"e.g., English, Spanish",options:[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"it",label:"Italian"},{value:"pt",label:"Portuguese"},{value:"zh",label:"Chinese"},{value:"ja",label:"Japanese"},{value:"other",label:"Other"}],disabled:n})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Marketing Preferences"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(jA,{control:r,name:"marketing_opt_in",label:"Marketing Opt-in",disabled:n}),c.jsx(jA,{control:r,name:"email_marketing",label:"Email Marketing",disabled:n}),c.jsx(jA,{control:r,name:"sms_marketing",label:"SMS Marketing",disabled:n})]})]})]})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Social & Online"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(hA,{control:r,name:"website",label:"Website",placeholder:"https://example.com",disabled:n}),c.jsx(hA,{control:r,name:"facebook_url",label:"Facebook URL",placeholder:"https://facebook.com/...",disabled:n}),c.jsx(hA,{control:r,name:"twitter_handle",label:"Twitter/X Handle",placeholder:"@username",disabled:n}),c.jsx(hA,{control:r,name:"linkedin_url",label:"LinkedIn URL",placeholder:"https://linkedin.com/in/...",disabled:n}),c.jsx(hA,{control:r,name:"instagram_handle",label:"Instagram Handle",placeholder:"@username",disabled:n})]})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Tags & Classification"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(SA,{control:r,name:"notes",label:"Internal Notes",placeholder:"Internal notes (staff only)",rows:4,disabled:n})}),c.jsx("div",{className:"md:col-span-2",children:c.jsx(SA,{control:r,name:"public_notes",label:"Public Notes",placeholder:"Public notes (visible to customer)",rows:4,disabled:n})})]})]})]})});function hF({open:e,onOpenChange:t,onSubmit:n,title:s="Create Customer",maxWidth:a="720px"}){const r=Ua(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=p.useMemo(()=>e=>({name:e.name,email:e.email||void 0,phone:e.phone||void 0,business_name:e.business_name||void 0,street_address:e.street_address||void 0,city:e.city||void 0,state_province:e.state_province||void 0,postal_code:e.postal_code||void 0,country:e.country||void 0,date_of_birth:e.date_of_birth||void 0,gender:e.gender||void 0,nationality:e.nationality||void 0,id_number:e.id_number||void 0,id_type:e.id_type||void 0,event_preferences:e.event_preferences||void 0,seating_preferences:e.seating_preferences||void 0,accessibility_needs:e.accessibility_needs||void 0,dietary_restrictions:e.dietary_restrictions||void 0,emergency_contact_name:e.emergency_contact_name||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,emergency_contact_relationship:e.emergency_contact_relationship||void 0,preferred_language:e.preferred_language||void 0,marketing_opt_in:e.marketing_opt_in||!1,email_marketing:e.email_marketing||!1,sms_marketing:e.sms_marketing||!1,facebook_url:e.facebook_url||void 0,twitter_handle:e.twitter_handle||void 0,linkedin_url:e.linkedin_url||void 0,instagram_handle:e.instagram_handle||void 0,website:e.website||void 0,notes:e.notes||void 0,public_notes:e.public_notes||void 0,status:"active"}),[]),v=()=>{m(!1),g(null),t(!1)},y={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=x(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},b={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:v,title:s,maxWidth:a,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:v,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(uF,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create"},o)})}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Customer Creation",description:f?c.jsx("p",{className:al("mb-3",r.textSizeSmall),children:"Are you sure you want to create this customer?"}):void 0,confirmAction:y,cancelAction:b})]})}function mF({open:e,onOpenChange:t,onSubmit:n,customer:s,title:a="Edit Customer",maxWidth:r="720px"}){const i=Ua(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>{if(s)return{name:s.name??"",email:s.email??"",phone:s.phone??"",business_name:s.business_name??"",street_address:s.street_address??"",city:s.city??"",state_province:s.state_province??"",postal_code:s.postal_code??"",country:s.country??"",date_of_birth:s.date_of_birth?"string"==typeof s.date_of_birth?s.date_of_birth.split("T")[0]:new Date(s.date_of_birth).toISOString().split("T")[0]:"",gender:s.gender??"",nationality:s.nationality??"",id_number:s.id_number??"",id_type:s.id_type??"",event_preferences:s.event_preferences??"",seating_preferences:s.seating_preferences??"",accessibility_needs:s.accessibility_needs??"",dietary_restrictions:s.dietary_restrictions??"",emergency_contact_name:s.emergency_contact_name??"",emergency_contact_phone:s.emergency_contact_phone??"",emergency_contact_relationship:s.emergency_contact_relationship??"",preferred_language:s.preferred_language??"",marketing_opt_in:s.marketing_opt_in??!1,email_marketing:s.email_marketing??!1,sms_marketing:s.sms_marketing??!1,facebook_url:s.facebook_url??"",twitter_handle:s.twitter_handle??"",linkedin_url:s.linkedin_url??"",instagram_handle:s.instagram_handle??"",website:s.website??"",notes:s.notes??"",public_notes:s.public_notes??""}},[s]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const y=p.useMemo(()=>e=>{const t=e=>{if(!e)return null;const t=e.trim();return t||null};return{name:e.name||null,email:t(e.email),phone:t(e.phone),business_name:t(e.business_name),street_address:t(e.street_address),city:t(e.city),state_province:t(e.state_province),postal_code:t(e.postal_code),country:t(e.country),date_of_birth:t(e.date_of_birth),gender:t(e.gender),nationality:t(e.nationality),id_number:t(e.id_number),id_type:t(e.id_type),event_preferences:t(e.event_preferences),seating_preferences:t(e.seating_preferences),accessibility_needs:t(e.accessibility_needs),dietary_restrictions:t(e.dietary_restrictions),emergency_contact_name:t(e.emergency_contact_name),emergency_contact_phone:t(e.emergency_contact_phone),emergency_contact_relationship:t(e.emergency_contact_relationship),preferred_language:t(e.preferred_language),marketing_opt_in:e.marketing_opt_in??null,email_marketing:e.email_marketing??null,sms_marketing:e.sms_marketing??null,facebook_url:t(e.facebook_url),twitter_handle:t(e.twitter_handle),linkedin_url:t(e.linkedin_url),instagram_handle:t(e.instagram_handle),website:t(e.website),notes:t(e.notes),public_notes:t(e.public_notes)}},[]),b=()=>{f(!1),x(null),t(!1)},w={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&s){h(!0);try{const e=y(g);await n(s.id,e),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},S={label:"Cancel",variant:"outline",disabled:u};return s?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:b,title:a,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:b,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(uF,{ref:o,defaultValues:v,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit"},`${s.id}-${l}`)})}),c.jsx(jE,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Customer Update",description:g?c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:"Are you sure you want to update this customer?"}):void 0,confirmAction:w,cancelAction:S})]}):null}function pF({open:e,onOpenChange:t,customer:n,tagService:s,onSave:a,loading:r=!1}){return c.jsx(UD,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"customer",initialTags:n.tags,tagService:s,onSave:a,loading:r})}function fF({open:e,onOpenChange:t,customer:n,attachmentService:s,onSave:a,loading:r=!1}){return c.jsx(VD,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"customer",attachmentService:s,onSave:a,loading:r})}function gF(e){return{id:e.id,code:e.code,name:e.name,status:e.is_active?"active":"inactive",email:e.email??void 0,phone:e.phone??void 0,business_name:e.business_name??void 0,street_address:e.street_address??void 0,city:e.city??void 0,state_province:e.state_province??void 0,postal_code:e.postal_code??void 0,country:e.country??void 0,date_of_birth:e.date_of_birth??void 0,gender:e.gender??void 0,nationality:e.nationality??void 0,id_number:e.id_number??void 0,id_type:e.id_type??void 0,account_manager_id:e.account_manager_id??void 0,sales_representative_id:e.sales_representative_id??void 0,customer_since:e.customer_since??void 0,last_purchase_date:e.last_purchase_date??void 0,total_purchase_amount:e.total_purchase_amount??void 0,last_contact_date:e.last_contact_date??void 0,event_preferences:e.event_preferences??void 0,seating_preferences:e.seating_preferences??void 0,accessibility_needs:e.accessibility_needs??void 0,dietary_restrictions:e.dietary_restrictions??void 0,emergency_contact_name:e.emergency_contact_name??void 0,emergency_contact_phone:e.emergency_contact_phone??void 0,emergency_contact_relationship:e.emergency_contact_relationship??void 0,preferred_language:e.preferred_language??void 0,marketing_opt_in:e.marketing_opt_in??void 0,email_marketing:e.email_marketing??void 0,sms_marketing:e.sms_marketing??void 0,facebook_url:e.facebook_url??void 0,twitter_handle:e.twitter_handle??void 0,linkedin_url:e.linkedin_url??void 0,instagram_handle:e.instagram_handle??void 0,website:e.website??void 0,tags:e.tags??void 0,status_reason:e.status_reason??void 0,notes:e.notes??void 0,public_notes:e.public_notes??void 0,createdAt:e.created_at?new Date(e.created_at):new Date,updatedAt:e.updated_at?new Date(e.updated_at):void 0,deactivatedAt:e.deactivated_at?new Date(e.deactivated_at):void 0}}function xF(e){if(!e||"object"!=typeof e)return{};const t={};return"code"in e&&void 0!==e.code&&null!==e.code&&(t.code=e.code),"name"in e&&void 0!==e.name&&null!==e.name&&(t.name=e.name),"status"in e&&void 0!==e.status&&null!==e.status&&(t.status=e.status),"email"in e&&void 0!==e.email&&null!==e.email&&(t.email=e.email),"phone"in e&&void 0!==e.phone&&null!==e.phone&&(t.phone=e.phone),"business_name"in e&&void 0!==e.business_name&&null!==e.business_name&&(t.business_name=e.business_name),"street_address"in e&&void 0!==e.street_address&&null!==e.street_address&&(t.street_address=e.street_address),"city"in e&&void 0!==e.city&&null!==e.city&&(t.city=e.city),"state_province"in e&&void 0!==e.state_province&&null!==e.state_province&&(t.state_province=e.state_province),"postal_code"in e&&void 0!==e.postal_code&&null!==e.postal_code&&(t.postal_code=e.postal_code),"country"in e&&void 0!==e.country&&null!==e.country&&(t.country=e.country),"date_of_birth"in e&&void 0!==e.date_of_birth&&null!==e.date_of_birth&&(t.date_of_birth=e.date_of_birth),"gender"in e&&void 0!==e.gender&&null!==e.gender&&(t.gender=e.gender),"nationality"in e&&void 0!==e.nationality&&null!==e.nationality&&(t.nationality=e.nationality),"id_number"in e&&void 0!==e.id_number&&null!==e.id_number&&(t.id_number=e.id_number),"id_type"in e&&void 0!==e.id_type&&null!==e.id_type&&(t.id_type=e.id_type),"account_manager_id"in e&&void 0!==e.account_manager_id&&null!==e.account_manager_id&&(t.account_manager_id=e.account_manager_id),"sales_representative_id"in e&&void 0!==e.sales_representative_id&&null!==e.sales_representative_id&&(t.sales_representative_id=e.sales_representative_id),"customer_since"in e&&void 0!==e.customer_since&&null!==e.customer_since&&(t.customer_since=e.customer_since),"last_purchase_date"in e&&void 0!==e.last_purchase_date&&null!==e.last_purchase_date&&(t.last_purchase_date=e.last_purchase_date),"total_purchase_amount"in e&&void 0!==e.total_purchase_amount&&null!==e.total_purchase_amount&&(t.total_purchase_amount=e.total_purchase_amount),"last_contact_date"in e&&void 0!==e.last_contact_date&&null!==e.last_contact_date&&(t.last_contact_date=e.last_contact_date),"event_preferences"in e&&(t.event_preferences=e.event_preferences??null),"seating_preferences"in e&&(t.seating_preferences=e.seating_preferences??null),"accessibility_needs"in e&&(t.accessibility_needs=e.accessibility_needs??null),"dietary_restrictions"in e&&(t.dietary_restrictions=e.dietary_restrictions??null),"emergency_contact_name"in e&&(t.emergency_contact_name=e.emergency_contact_name??null),"emergency_contact_phone"in e&&(t.emergency_contact_phone=e.emergency_contact_phone??null),"emergency_contact_relationship"in e&&(t.emergency_contact_relationship=e.emergency_contact_relationship??null),"preferred_language"in e&&(t.preferred_language=e.preferred_language??null),"marketing_opt_in"in e&&(t.marketing_opt_in=e.marketing_opt_in??null),"email_marketing"in e&&(t.email_marketing=e.email_marketing??null),"sms_marketing"in e&&(t.sms_marketing=e.sms_marketing??null),"facebook_url"in e&&(t.facebook_url=e.facebook_url??null),"twitter_handle"in e&&(t.twitter_handle=e.twitter_handle??null),"linkedin_url"in e&&(t.linkedin_url=e.linkedin_url??null),"instagram_handle"in e&&(t.instagram_handle=e.instagram_handle??null),"website"in e&&(t.website=e.website??null),"tag_ids"in e&&void 0!==e.tag_ids&&null!==e.tag_ids&&(t.tag_ids=e.tag_ids),"status_reason"in e&&void 0!==e.status_reason&&null!==e.status_reason&&(t.status_reason=e.status_reason),"notes"in e&&void 0!==e.notes&&null!==e.notes&&(t.notes=e.notes),"public_notes"in e&&void 0!==e.public_notes&&null!==e.public_notes&&(t.public_notes=e.public_notes),t}class vF{config;constructor(e){this.config=e}getEndpoint(){return this.config.endpoints?.customers||ma.ENDPOINTS.SALES.CUSTOMERS}async fetchCustomers(e){const{apiClient:t}=this.config,n=this.getEndpoint(),s=new URLSearchParams;void 0!==e?.skip&&s.append("skip",e.skip.toString()),void 0!==e?.limit&&s.append("limit",e.limit.toString()),e?.search&&s.append("search",e.search);const a=s.toString()?`${n}?${s.toString()}`:n,r=await t.get(a,{requiresAuth:!0});return{data:(r.items??[]).map(gF),pagination:{page:r.page??Math.floor((e?.skip||0)/(e?.limit||50))+1,pageSize:r.page_size??e?.limit??50,total:r.total??0,totalPages:r.total_pages??0}}}async fetchCustomer(e){const{apiClient:t}=this.config,n=this.getEndpoint();return gF(await t.get(`${n}/${e}`,{requiresAuth:!0}))}async createCustomer(e){const{apiClient:t}=this.config,n=this.getEndpoint(),s=xF(e);return gF(await t.post(n,s,{requiresAuth:!0}))}async updateCustomer(e,t){const{apiClient:n}=this.config,s=this.getEndpoint(),a=xF(t);return gF(await n.put(`${s}/${e}`,a,{requiresAuth:!0}))}async deleteCustomer(e){const{apiClient:t}=this.config,n=this.getEndpoint();await t.delete(`${n}/${e}`,{requiresAuth:!0})}}function yF(e,t){const{filter:n,pagination:s}=t||{};return Ys({queryKey:["customers",n?.search,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchCustomers({skip:t,limit:a,search:n?.search})},staleTime:3e5})}function bF(e,t){return Ys({queryKey:["customer",t],queryFn:()=>t?e.fetchCustomer(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function wF(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateCustomer(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["customers"]}),t.invalidateQueries({queryKey:["customer",n.id]})}})}function SF(e){const t=Vs();return Xs({mutationFn:t=>e.deleteCustomer(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customers"]})}})}const jF=p.createContext(void 0);function CF({children:e,config:t}){const n=p.useMemo(()=>new vF(t),[t.apiClient,t.endpoints?.customers]),s=p.useMemo(()=>({customerService:n}),[n]);return c.jsx(jF.Provider,{value:s,children:e})}function kF(){const e=p.useContext(jF);if(!e)throw new Error("useCustomerService must be used within a CustomerProvider");return e.customerService}function NF({onNavigateToCustomer:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:s}){const a=kF(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(null),v=f.useRef(!1),[y,b]=p.useState("");f.useEffect(()=>{const e=v.current;n&&!e&&u(!0),v.current=!!n},[n]);const{data:w,isLoading:S,error:j}=yF(a,{filter:r,pagination:o}),C=function(e){const t=Vs();return Xs({mutationFn:t=>e.createCustomer(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customers"]})}})}(a),k=wF(a),N=SF(a),_=w?.data??[],P=w?.pagination,E=p.useCallback(()=>{t&&t(),u(!0)},[t]);p.useCallback(e=>{x(e),m(!0)},[]),p.useCallback(async e=>{try{await N.mutateAsync(e.id),Ek({title:"Success",description:"Customer deleted successfully"})}catch(wW){Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to delete customer",variant:"destructive"})}},[N]);const R=p.useCallback(e=>{b(e??"")},[]);f.useEffect(()=>{const e=setTimeout(()=>{i(e=>({...e,search:y||void 0})),l(e=>({...e,page:1}))},300);return()=>clearTimeout(e)},[y]);const A=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),T=p.useCallback(e=>{l({page:1,pageSize:e})},[]),M=p.useCallback(async e=>{try{await C.mutateAsync(e),Ek({title:"Success",description:"Customer created successfully"}),u(!1),s?.()}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to create customer",variant:"destructive"}),wW}},[C,s]),D=p.useCallback(async(e,t)=>{try{await k.mutateAsync({id:e,input:t}),Ek({title:"Success",description:"Customer updated successfully"}),m(!1),x(null)}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to update customer",variant:"destructive"}),wW}},[k]),L=p.useCallback(t=>{e?.(t.id)},[e]),F=p.useMemo(()=>{if(P)return{page:o.page,pageSize:o.pageSize,total:P.total,totalPages:P.totalPages}},[o,P]);return c.jsxs(c.Fragment,{children:[c.jsx(oF,{customers:_,loading:S,error:j,onCustomerClick:L,onCreate:E,onSearch:R,pagination:F,onPageChange:A,onPageSizeChange:T}),c.jsx(hF,{open:d,onOpenChange:e=>{u(e),e||s?.()},onSubmit:M}),c.jsx(mF,{open:h&&!!g,onOpenChange:e=>{m(e),e||x(null)},onSubmit:D,customer:g})]})}function _F({data:e=[],loading:t=!1,onCreate:n,onEdit:s,onDelete:a,onSearch:r,className:i}){const{t:o}=fr(),l=[IP({accessorKey:"code",header:()=>o("pages.settings.sales.ct.code","Code"),size:100}),LP({accessorKey:"name",header:()=>o("pages.settings.sales.ct.name","Name"),size:150}),zP({header:()=>o("common.actions","Actions"),size:180,actions:[...s?[{icon:Tg,onClick:e=>s(e),title:"Edit"}]:[],...a?[{icon:Hg,onClick:e=>a(e),title:"Delete",className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors"}]:[]]})];return c.jsx("div",{className:i,children:c.jsx($P,{data:e,columns:l,title:o("pages.settings.sales.ct.title","CustomerTypes"),description:o("pages.settings.sales.ct.list","CustomerType List"),loading:t,onCreate:n,onSearch:r,manualFiltering:!!r,useDefaultColumns:!1})})}function PF(e){return{id:e.id,code:e.code,name:e.name,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class EF{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchCustomerTypes(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.customerTypes.replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(PF),pagination:l}}catch(t){throw t}}async searchCustomerTypes(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.endpoints.customerTypes.replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(PF)}catch(n){throw n}}async fetchCustomerTypeById(e){try{const t=this.endpoints.customerTypes.replace(/\/$/,"");return PF(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createCustomerType(e){try{return PF(await this.apiClient.post(this.endpoints.customerTypes,e,{requiresAuth:!0}))}catch(t){throw t}}async updateCustomerType(e,t){try{const n=this.endpoints.customerTypes.replace(/\/$/,"");return PF(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteCustomerType(e){try{const t=this.endpoints.customerTypes.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const RF=p.createContext(null);function AF({children:e,config:t}){const n=p.useMemo(()=>new EF(t),[t.apiClient,t.endpoints?.customerTypes]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(RF.Provider,{value:s,children:e})}const TF={code:"",name:""};function MF({open:e,onOpenChange:t,onSubmit:n,loading:s=!1,error:a=null}){const{t:r}=fr(),i=Ua(),[o,l]=p.useState(TF),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(0),[x,v]=p.useState(null),y=p.useRef(null),b=p.useRef(null);p.useEffect(()=>{v(a)},[a]);const w=()=>{const e={};return o.code||(e.code=r("pages.settings.sales.ct.codeRequired","Code is required")),o.name||(e.name=r("pages.settings.sales.ct.nameRequired","Name is required")),u(e),0===Object.keys(e).length},S=async()=>{try{const e={code:o.code,name:o.name};await n(e),l(TF),u({}),m(!1),g(e=>e+1)}catch(e){m(!1)}},j=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),x&&v(null)},C=()=>{l(TF),u({}),t(!1)},k=()=>{l({...TF}),u({}),v(null),g(e=>e+1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{y.current?.focus()})},[e,f]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&h)return e.preventDefault(),e.stopPropagation(),void m(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h?s||S():!s&&w()&&m(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||k())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,h,s,o]);return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:C,title:r("pages.settings.sales.ct.createTitle","Create CustomerType"),maxWidth:"500px",loading:s,showClearButton:!0,onClear:k,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:r("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>C(),disabled:s},{label:s?r("pages.settings.sales.ct.creating","Creating..."):r("pages.settings.sales.ct.create","Create CustomerType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),b.current&&b.current.requestSubmit()},disabled:s}],children:c.jsxs("form",{ref:b,onSubmit:async e=>{e.preventDefault(),w()&&m(!0)},className:al(i.spacingFormSection,"w-full"),children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:al("grid grid-cols-1",i.gapForm),children:[c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"code",className:al(i.textSizeLabel,"font-medium"),children:[r("pages.settings.sales.ct.code","Code")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"code",ref:y,type:"text",value:o.code,onChange:e=>j("code",e.target.value),className:al(i.inputHeight,i.textSize,d.code&&"border-destructive"),disabled:s,placeholder:r("pages.settings.sales.ct.codePlaceholder","Enter code")})}),c.jsx(Bl,{className:i.textSizeSmall,children:d.code})]}),c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"name",className:al(i.textSizeLabel,"font-medium"),children:[r("pages.settings.sales.ct.name","Name")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"name",type:"text",value:o.name,onChange:e=>j("name",e.target.value),className:al(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:s,placeholder:r("pages.settings.sales.ct.namePlaceholder","Enter name")})}),c.jsx(Bl,{className:i.textSizeSmall,children:d.name})]})]})}),x&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[r("common.error","ERROR"),":"]}),c.jsx("span",{children:x.message||r("pages.settings.sales.ct.createError","Failed to create CustomerType")})]})})]},f)}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||setTimeout(()=>{y.current?.focus()},0)},title:r("pages.settings.sales.ct.confirmCreateTitle","Confirm CustomerType Creation"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:r("pages.settings.sales.ct.confirmCreateDescription","Are you sure you want to create a new customer-type?")})}),confirmAction:{label:s?r("pages.settings.sales.ct.creating","Creating..."):r("pages.settings.sales.ct.confirmCreate","Confirm & Create"),onClick:S,loading:s,disabled:s},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:s,onClick:()=>m(!1)}})]})}function DF({open:e,onOpenChange:t,ct:n,onSubmit:s,loading:a=!1,error:r=null}){const{t:i}=fr(),o=Ua(),[l,d]=p.useState({code:"",name:""}),[u,h]=p.useState({code:"",name:""}),[m,f]=p.useState({}),[g,x]=p.useState(!1),[v,y]=p.useState(0),[b,w]=p.useState(null),S=p.useRef(null),j=p.useRef(null);p.useEffect(()=>{w(r)},[r]),p.useEffect(()=>{if(e&&n){const e={code:n.code||"",name:n.name||""};d(e),h(e),f({}),w(null),y(e=>e+1)}},[e,n]);const C=()=>{const e={};return l.code||(e.code=i("pages.settings.sales.ct.codeRequired","Code is required")),l.name||(e.name=i("pages.settings.sales.ct.nameRequired","Name is required")),f(e),0===Object.keys(e).length},k=async()=>{if(n)try{const e={code:l.code,name:l.name};await s(n.id,e),x(!1),t(!1)}catch(e){x(!1)}},N=(e,t)=>{d(n=>({...n,[e]:t})),m[e]&&f(t=>({...t,[e]:void 0})),b&&w(null)},_=()=>{n&&d(u),f({}),t(!1)},P=()=>{n&&(d({...u}),f({}),w(null),y(e=>e+1))};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{S.current?.focus()})},[e,v,n]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&g)return e.preventDefault(),e.stopPropagation(),void x(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),g?a||k():!a&&C()&&x(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||P())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,g,a,l,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:_,title:i("pages.settings.sales.ct.editTitle","Edit CustomerType"),maxWidth:"500px",loading:a,showClearButton:!0,onClear:P,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Reset",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:i("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>_(),disabled:a},{label:a?i("pages.settings.sales.ct.updating","Updating..."):i("pages.settings.sales.ct.update","Update CustomerType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),j.current&&j.current.requestSubmit()},disabled:a}],children:c.jsxs("form",{ref:j,onSubmit:async e=>{e.preventDefault(),C()&&x(!0)},className:al(o.spacingFormSection,"w-full"),children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",o.paddingForm),children:c.jsxs("div",{className:al("grid grid-cols-1",o.gapForm),children:[c.jsxs(Fl,{className:o.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"code",className:al(o.textSizeLabel,"font-medium"),children:[i("pages.settings.sales.ct.code","Code")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"code",ref:S,type:"text",value:l.code,onChange:e=>N("code",e.target.value),className:al(o.inputHeight,o.textSize,m.code&&"border-destructive"),disabled:a,placeholder:i("pages.settings.sales.ct.codePlaceholder","Enter code")})}),c.jsx(Bl,{className:o.textSizeSmall,children:m.code})]}),c.jsxs(Fl,{className:o.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"name",className:al(o.textSizeLabel,"font-medium"),children:[i("pages.settings.sales.ct.name","Name")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"name",type:"text",value:l.name,onChange:e=>N("name",e.target.value),className:al(o.inputHeight,o.textSize,m.name&&"border-destructive"),disabled:a,placeholder:i("pages.settings.sales.ct.namePlaceholder","Enter name")})}),c.jsx(Bl,{className:o.textSizeSmall,children:m.name})]})]})}),b&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",o.paddingContainer,o.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[i("common.error","ERROR"),":"]}),c.jsx("span",{children:b.message||i("pages.settings.sales.ct.updateError","Failed to update CustomerType")})]})})]},v)}),c.jsx(jE,{open:g,onOpenChange:e=>{x(e),e||setTimeout(()=>{S.current?.focus()},0)},title:i("pages.settings.sales.ct.confirmUpdateTitle","Confirm CustomerType Update"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:al("mb-3",o.textSizeSmall),children:i("pages.settings.sales.ct.confirmUpdateDescription","Are you sure you want to update this customer-type?")})}),confirmAction:{label:a?i("pages.settings.sales.ct.updating","Updating..."):i("pages.settings.sales.ct.confirmUpdate","Confirm & Update"),onClick:k,loading:a,disabled:a},cancelAction:{label:i("common.cancel","Cancel"),variant:"outline",disabled:a,onClick:()=>x(!1)}})]}):null}function LF({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToCustomerType:n}){const s=function(){const e=p.useContext(RF);if(!e)throw new Error("useCustomerTypeService must be used within CustomerTypeProvider");return e.service}(),{toast:a}=Rk(),{t:r}=fr(),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(""),[g,x]=p.useState({page:1,pageSize:50}),[v,y]=p.useState(!1),[b,w]=p.useState(null),{data:S,isLoading:j}=function(e,t){const{search:n,pagination:s,enabled:a=!0}=t||{},r=n?.trim()||void 0;return Ys({queryKey:["ct",r,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,n=s?.pageSize||100;return r?e.searchCustomerTypes(r,n).then(e=>({data:e,pagination:{page:1,pageSize:n,total:e.length,totalPages:1}})):e.fetchCustomerTypes({skip:t,limit:n})},enabled:a,staleTime:3e5})}(s,{search:m||void 0,pagination:g}),C=S?.data||[],k=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteCustomerType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["ct"]})}})}(s),N=function(e){const t=Vs();return Xs({mutationFn:t=>e.createCustomerType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["ct"]})}})}(s),_=function(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateCustomerType(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["ct"]}),t.invalidateQueries({queryKey:["ct",n.id]})}})}(s),P=p.useCallback(e=>{w(e),y(!0)},[]),E=p.useCallback(async()=>{if(b)try{await k.mutateAsync(b.id),a({title:r("common.success"),description:r("pages.settings.sales.ct.deleted")}),y(!1),w(null)}catch(e){a({title:r("common.error"),description:r("common.errorOccurred"),variant:"destructive"})}},[b,k,a,r]),R=p.useCallback(e=>{h(e),d(!0)},[]),A=p.useCallback(()=>{o(!0)},[]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const T=p.useCallback(async e=>{try{await N.mutateAsync(e),a({title:r("common.success","Success"),description:r("pages.settings.sales.ct.created","CustomerType created successfully")})}catch(t){throw a({title:r("common.error","Error"),description:r("pages.settings.sales.ct.createError","Failed to create customer-type"),variant:"destructive"}),t}},[N,a,r]),M=p.useCallback(async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),a({title:r("common.success","Success"),description:r("pages.settings.sales.ct.updated","CustomerType updated successfully")})}catch(n){throw a({title:r("common.error","Error"),description:r("pages.settings.sales.ct.updateError","Failed to update customer-type"),variant:"destructive"}),n}},[_,a,r]),D=p.useCallback(e=>{f(e),x(e=>({...e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(_F,{data:C,loading:j,onCreate:A,onEdit:R,onDelete:P,onSearch:D}),c.jsx(MF,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:T,loading:N.isPending,error:N.error}),c.jsx(DF,{open:l,onOpenChange:e=>{d(e),e||h(null)},ct:u,onSubmit:M,loading:_.isPending,error:_.error}),c.jsx(jE,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:r("pages.settings.sales.ct.confirmDeleteTitle","Delete CustomerType"),description:b?r("pages.settings.sales.ct.confirmDelete",{defaultValue:`Are you sure you want to delete "${b.name||b.id}"? This action cannot be undone.`,name:b.name||b.id}):"",confirmText:"delete",confirmTextLabel:r("common.typeToConfirm","Type 'delete' to confirm"),confirmAction:{label:r("common.delete","Delete"),variant:"destructive",onClick:E,loading:k.isPending,disabled:k.isPending},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:k.isPending}})]})}function FF(e){return{...e,created_at:new Date(e.created_at),updated_at:e.updated_at?new Date(e.updated_at):void 0}}class IF{config;constructor(e){this.config=e}async fetchCustomerGroups(e){const{apiClient:t,endpoints:n}=this.config,s=n?.customerGroups||"/api/v1/sales/customer-groups",a=new URLSearchParams;e?.parent_id&&a.append("parent_id",e.parent_id),void 0!==e?.skip&&a.append("skip",e.skip.toString()),void 0!==e?.limit&&a.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&a.append("search",e.search.trim()),void 0!==e?.is_active&&a.append("is_active",e.is_active.toString());const r=s.replace(/\/$/,""),i=a.toString()?`${r}?${a.toString()}`:r,o=await t.get(i,{requiresAuth:!0}),l=o.skip||e?.skip||0,c=o.limit||e?.limit||50,d=o.total||0;return{data:(o.items||[]).map(FF),pagination:{page:Math.floor(l/c)+1,pageSize:c,total:d,totalPages:Math.ceil(d/c)}}}async fetchCustomerGroupTree(){const{apiClient:e,endpoints:t}=this.config,n=`${t?.customerGroups||"/api/v1/sales/customer-groups"}/tree/root`,s=await e.get(n,{requiresAuth:!0});if(!s)return[];if(!Array.isArray(s))return[];const a=e=>{const t=FF(e),n=(e.children||[]).map(a);return{...t,children:n,children_count:e.children_count||n.length,has_children:n.length>0||e.has_children||!1}};return s.map(a)}async fetchCustomerGroup(e){const{apiClient:t,endpoints:n}=this.config,s=n?.customerGroups||"/api/v1/sales/customer-groups";return FF(await t.get(`${s}/${e}`,{requiresAuth:!0}))}async fetchCustomerGroupHierarchy(e){const{apiClient:t,endpoints:n}=this.config,s=n?.customerGroups||"/api/v1/sales/customer-groups",a=await t.get(`${s}/${e}/hierarchy`,{requiresAuth:!0});return{item:FF(a.item||a.category||a.group),ancestors:(a.ancestors||[]).map(FF),descendants:(a.descendants||[]).map(FF)}}async fetchCustomerGroupChildren(e){const{apiClient:t,endpoints:n}=this.config,s=n?.customerGroups||"/api/v1/sales/customer-groups";return(await t.get(`${s}/${e}/children`,{requiresAuth:!0})||[]).map(FF)}async createCustomerGroup(e){const{apiClient:t,endpoints:n}=this.config,s=n?.customerGroups||"/api/v1/sales/customer-groups",a={code:e.code,name:e.name,parent_id:e.parent_id?e.parent_id:null,sort_order:e.sort_order};return FF(await t.post(s,a,{requiresAuth:!0}))}async updateCustomerGroup(e,t){const{apiClient:n,endpoints:s}=this.config,a=s?.customerGroups||"/api/v1/sales/customer-groups",r={};void 0!==t.code&&(r.code=t.code),void 0!==t.name&&(r.name=t.name),void 0!==t.parent_id&&(r.parent_id=t.parent_id||null),void 0!==t.sort_order&&(r.sort_order=t.sort_order);return FF(await n.put(`${a}/${e}`,r,{requiresAuth:!0}))}async deleteCustomerGroup(e){const{apiClient:t,endpoints:n}=this.config,s=n?.customerGroups||"/api/v1/sales/customer-groups";await t.delete(`${s}/${e}`,{requiresAuth:!0})}}function OF({item:e,level:t,expandedIds:n,onToggle:s,onItemClick:a,onAddChild:r,onEdit:i,onDelete:o}){const l=n.has(e.id),d=e.has_children||e.children&&e.children.length>0;return c.jsxs("div",{children:[c.jsx(zF,{item:e,level:t,isExpanded:l,onToggle:()=>s(e.id),onItemClick:a,onAddChild:r,onEdit:i,onDelete:o}),l&&d&&e.children&&e.children.length>0&&c.jsx("div",{children:e.children.map(e=>c.jsx(OF,{item:e,level:t+1,expandedIds:n,onToggle:s,onItemClick:a,onAddChild:r,onEdit:i,onDelete:o},e.id))})]})}function zF({item:e,level:t,isExpanded:n,onToggle:s,onItemClick:a,onAddChild:r,onEdit:i,onDelete:o}){const l=e.has_children||e.children&&e.children.length>0,d=e.is_active??!0;return c.jsx("div",{children:c.jsxs(Lj,{children:[c.jsx(Fj,{asChild:!0,children:c.jsxs("div",{className:al("flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-accent cursor-pointer group",t>0&&"ml-4"),style:{paddingLeft:16*t+8+"px"},onClick:()=>a?.(e),children:[l?c.jsx("button",{onClick:e=>{e.stopPropagation(),s()},className:"p-0.5 hover:bg-accent rounded",children:n?c.jsx(Vp,{className:"h-4 w-4 text-muted-foreground"}):c.jsx(Hp,{className:"h-4 w-4 text-muted-foreground"})}):c.jsx("div",{className:"w-5"}),c.jsx(vf,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm truncate",children:e.name||e.code}),!d&&c.jsx(mC,{variant:"secondary",className:"h-5 px-1.5 text-[10px]",children:"Inactive"})]}),e.description&&c.jsx("span",{className:"text-xs text-muted-foreground truncate block",children:e.description}),e.children_count>0&&!e.description&&c.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.children_count," child",1!==e.children_count?"ren":""]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-auto flex-shrink-0",onClick:e=>e.stopPropagation(),children:[i&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),i(e)},className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Edit",children:c.jsx(Tg,{className:"h-3.5 w-3.5"})}),r&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),r(e)},className:"h-7 w-7 p-0 hover:bg-primary/10 hover:text-primary transition-colors",title:"Add Child",children:c.jsx(hg,{className:"h-3.5 w-3.5"})}),o&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),o(e)},className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete",children:c.jsx(Hg,{className:"h-3.5 w-3.5"})})]})]})}),c.jsxs(Ij,{children:[c.jsx(Oj,{onClick:()=>a?.(e),children:"View Details"}),c.jsx(Oj,{onClick:()=>i?.(e),children:"Edit"}),c.jsx(zj,{}),c.jsx(Oj,{onClick:()=>r?.(e),children:"Add Child"}),c.jsx(zj,{}),c.jsx(Oj,{onClick:()=>o?.(e),className:"text-destructive focus:text-destructive",children:"Delete"})]})]})})}function BF({items:e,onItemClick:t,onAddChild:n,onEdit:s,onDelete:a,expandedIds:r,onToggleExpand:i,className:o}){const[l,d]=p.useState(new Set),u=r??l,h=i?e=>i(e):e=>{d(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return c.jsx("div",{className:al("space-y-1",o),children:0===e.length?c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No customerGroups found"}):e.map(e=>c.jsx(OF,{item:e,level:0,expandedIds:u,onToggle:h,onItemClick:t,onAddChild:n,onEdit:s,onDelete:a},e.id))})}const $F=AM({code:PM().min(1,"Code is required").max(50),name:PM().max(200).optional(),parent_id:PM().optional()});function UF({open:e,onOpenChange:t,onSubmit:n,parentId:s,parentName:a}){const{register:r,handleSubmit:i,reset:o,setValue:l,formState:{errors:d,isSubmitting:u}}=uA({resolver:QA($F),defaultValues:{code:"",name:"",parent_id:""}}),{isCompact:h}=$a(),m=h,p={...Ua()};f.useEffect(()=>{e&&o({code:"",name:"",parent_id:s||""})},[e,s,o]),f.useEffect(()=>{e&&l("parent_id",s||"")},[s,e,l]);return c.jsx(Zy,{open:e,onOpenChange:t,children:c.jsxs(tb,{className:al("max-w-md max-h-[90vh] overflow-y-auto",p.paddingContainer),children:[c.jsxs(nb,{className:al(p.spacingFormItem),children:[c.jsx(ab,{className:al(m?"text-base":"text-lg","font-semibold"),children:"Create CustomerGroup"}),c.jsx(rb,{className:al(p.textSizeSmall,"text-muted-foreground"),children:a?`Create a new customer-group under: ${a}`:"Create a new root customer-group"})]}),c.jsxs("form",{onSubmit:i(async e=>{try{const s={code:e.code,name:e.name||"",parent_id:e.parent_id&&e.parent_id.trim()?e.parent_id.trim():void 0};await n(s),t(!1)}catch(s){}}),className:al(p.spacingFormSection),children:[c.jsxs("div",{className:al("space-y-2",p.spacingFormItem),children:[c.jsx(Dl,{htmlFor:"code",className:al(p.textSizeLabel,"font-medium"),children:"Code *"}),c.jsx(kl,{id:"code",...r("code"),placeholder:"Enter code",className:al(p.inputHeight,p.textSizeSmall,d.code?"border-destructive":"")}),d.code&&c.jsx("p",{className:al(p.textSizeSmall,"text-destructive"),children:d.code.message})]}),c.jsxs("div",{className:al("space-y-2",p.spacingFormItem),children:[c.jsx(Dl,{htmlFor:"name",className:al(p.textSizeLabel,"font-medium"),children:"Name"}),c.jsx(kl,{id:"name",...r("name"),placeholder:"Enter name",className:al(p.inputHeight,p.textSizeSmall,d.name?"border-destructive":"")}),d.name&&c.jsx("p",{className:al(p.textSizeSmall,"text-destructive"),children:d.name.message})]}),c.jsx("input",{type:"hidden",...r("parent_id")}),s&&c.jsxs("div",{className:al("space-y-2",p.spacingFormItem),children:[c.jsx(Dl,{htmlFor:"parent_id_display",className:al(p.textSizeLabel,"font-medium"),children:"Parent"}),c.jsx(kl,{id:"parent_id_display",value:a||s,disabled:!0,className:al(p.inputHeight,p.textSizeSmall)})]}),c.jsxs(sb,{className:al(p.gapButtonGroup),children:[c.jsx(CE,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:u,children:"Cancel"}),c.jsx(CE,{type:"submit",disabled:u,children:u?"Creating...":"Create"})]})]})]})})}const VF=AM({code:PM().min(1,"Code is required").max(50),name:PM().max(200).optional()});function qF({open:e,onOpenChange:t,onSubmit:n,item:s}){const{register:a,handleSubmit:r,reset:i,formState:{errors:o,isSubmitting:l}}=uA({resolver:QA(VF),defaultValues:{code:"",name:""}}),{isCompact:d}=$a(),u=d,h={...Ua()};f.useEffect(()=>{e&&s&&i({code:s.code||"",name:s.name||""})},[e,s,i]);return s?c.jsx(Zy,{open:e,onOpenChange:t,children:c.jsxs(tb,{className:al("max-w-md max-h-[90vh] overflow-y-auto",h.paddingContainer),children:[c.jsxs(nb,{className:al(h.spacingFormItem),children:[c.jsx(ab,{className:al(u?"text-base":"text-lg","font-semibold"),children:"Edit CustomerGroup"}),c.jsxs(rb,{className:al(h.textSizeSmall,"text-muted-foreground"),children:["Update details for ",s.name||s.code]})]}),c.jsxs("form",{onSubmit:r(async e=>{if(s)try{const a={code:e.code,name:e.name||void 0};await n(s.id,a),t(!1)}catch(a){}}),className:al(h.spacingFormSection),children:[c.jsxs("div",{className:al("space-y-2",h.spacingFormItem),children:[c.jsx(Dl,{htmlFor:"code",className:al(h.textSizeLabel,"font-medium"),children:"Code *"}),c.jsx(kl,{id:"code",...a("code"),className:al(h.inputHeight,h.textSizeSmall,o.code?"border-destructive":"")}),o.code&&c.jsx("p",{className:al(h.textSizeSmall,"text-destructive"),children:o.code.message})]}),c.jsxs("div",{className:al("space-y-2",h.spacingFormItem),children:[c.jsx(Dl,{htmlFor:"name",className:al(h.textSizeLabel,"font-medium"),children:"Name"}),c.jsx(kl,{id:"name",...a("name"),className:al(h.inputHeight,h.textSizeSmall,o.name?"border-destructive":"")}),o.name&&c.jsx("p",{className:al(h.textSizeSmall,"text-destructive"),children:o.name.message})]}),c.jsxs(sb,{className:al(h.gapButtonGroup),children:[c.jsx(CE,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),c.jsx(CE,{type:"submit",disabled:l,children:l?"Saving...":"Save"})]})]})]})}):null}function HF({className:e,autoOpenCreate:t=!1,onCreateDialogClose:n}){const s=Ua(),[a,r]=p.useState(""),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(null),[g,x]=p.useState(null),[v,y]=p.useState(!1),[b,w]=p.useState(null);p.useEffect(()=>{t&&!i&&o(!0)},[t,i]);const{data:S,isLoading:j,error:C}=(k=QF,Ys({queryKey:["customer-groups-tree"],queryFn:()=>k.fetchCustomerGroupTree(),staleTime:3e5}));var k;const N=function(e){const t=Vs();return Xs({mutationFn:t=>e.createCustomerGroup(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customer-groups"]}),t.invalidateQueries({queryKey:["customer-groups-tree"]})}})}(QF),_=function(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateCustomerGroup(t,n),onSuccess:e=>{t.invalidateQueries({queryKey:["customer-groups"]}),t.invalidateQueries({queryKey:["customer-groups-tree"]}),t.invalidateQueries({queryKey:["customer-group",e.id]})}})}(QF),P=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteCustomerGroup(t),onSuccess:()=>{t.invalidateQueries({queryKey:["customer-groups"]}),t.invalidateQueries({queryKey:["customer-groups-tree"]})}})}(QF),E=p.useMemo(()=>{if(!S)return[];const e=t=>t.map(t=>{const n=!a||t.code?.toLowerCase().includes(a.toLowerCase())||t.name&&t.name.toLowerCase().includes(a.toLowerCase()),s=e(t.children||[]);return n||s.length>0?{...t,children:s}:null}).filter(e=>null!==e);return e(S)},[S,a]);return c.jsx("div",{className:e,children:c.jsxs("div",{className:al("space-y-4",s.spacingFormSection),children:[c.jsxs("div",{className:al("flex items-center justify-between",s.gapCard),children:[c.jsxs("div",{children:[c.jsx("h2",{className:al("font-bold tracking-tight",s.textSizeCardTitle),children:"CustomerGroups"}),c.jsx("p",{className:al("text-muted-foreground",s.textSizeCardDescription),children:"Manage customerGroups hierarchically"})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsxs(vl,{onClick:()=>{h(null),o(!0)},size:"sm",className:al("h-8 px-2 text-xs"),children:[c.jsx(hg,{className:"mr-1 h-3 w-3"}),"Add Customer Group"]})})]}),c.jsxs(bl,{children:[c.jsxs(wl,{className:s.spacingFormItem,children:[c.jsx("div",{className:al("flex items-center justify-between",s.gapForm),children:c.jsx("div",{children:c.jsx(jl,{className:s.textSizeCardDescription,children:"Click on items to expand/collapse. Right-click for more options."})})}),c.jsx("div",{className:al("flex mt-4",s.gapForm),children:c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Sg,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none z-10"}),c.jsx(kl,{placeholder:"Search by code or name...",value:a,onChange:e=>r(e.target.value),className:"pl-10"})]})})]}),c.jsxs(Cl,{children:[j&&c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading customerGroups..."}),C&&c.jsxs("div",{className:"text-center py-8 text-destructive",children:["Error loading customerGroups: ",C.message]}),!j&&!C&&c.jsxs(c.Fragment,{children:[S&&0===S.length&&c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No customerGroups found. Create your first one to get started."}),E.length>0&&c.jsx(BF,{items:E,onItemClick:e=>f(e),onAddChild:e=>{h(e),o(!0)},onEdit:e=>{x(e),d(!0)},onDelete:e=>{w(e),y(!0)}}),S&&S.length>0&&0===E.length&&c.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No customerGroups match your search criteria."})]})]})]}),c.jsx(UF,{open:i,onOpenChange:e=>{o(e),e||(h(null),n?.())},onSubmit:async e=>{try{await N.mutateAsync(e),Ek({title:"Success",description:"CustomerGroup created successfully"}),o(!1),h(null)}catch(t){Ek({title:"Error",description:t.message||"Failed to create customer-group",variant:"destructive"})}},parentId:u?.id,parentName:u?.name||u?.code||void 0}),c.jsx(qF,{open:l,onOpenChange:e=>{d(e),e||x(null)},onSubmit:async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),Ek({title:"Success",description:"CustomerGroup updated successfully"}),d(!1),x(null)}catch(n){throw Ek({title:"Error",description:n.message||"Failed to update customer-group",variant:"destructive"}),n}},item:g}),c.jsx(jE,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:"Delete CustomerGroup",description:b?`Are you sure you want to delete "${b.name||b.code}"? This action cannot be undone.`:"",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(b)try{await P.mutateAsync(b.id),Ek({title:"Success",description:"CustomerGroup deleted successfully"}),y(!1),w(null)}catch(e){Ek({title:"Error",description:e.message||"Failed to delete customer-group",variant:"destructive"})}},loading:P.isPending,disabled:P.isPending},cancelAction:{label:"Cancel",variant:"outline",disabled:P.isPending}})]})})}function GF({autoOpenCreate:e,onCreateDialogClose:t}){return c.jsx(HF,{autoOpenCreate:e,onCreateDialogClose:t})}const KF=p.createContext(null);function WF({children:e,config:t}){const n=p.useMemo(()=>new IF(t),[t.apiClient,t.endpoints?.customerGroups]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(KF.Provider,{value:s,children:e})}const QF=new IF({apiClient:Fa,endpoints:{customerGroups:"/api/v1/sales/customer-groups"}});function YF(e){const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t}function XF(e){if("pending"!==e.status.toLowerCase().trim())return!1;const t=e.payment_status?.toLowerCase().trim();return!t||"pending"===t}function ZF(e){const t=e.status.toLowerCase().trim();if("cancelled"===t)return"Booking is already cancelled";if("pending"!==t)return`Only pending bookings can be cancelled. Current status: ${e.status.toUpperCase()}`;const n=e.payment_status?.toLowerCase().trim();return n&&"pending"!==n?`Cannot cancel booking with payments. Payment status: ${e.payment_status?.toUpperCase()}`:"Cancel"}function JF({className:e,bookings:t=[],loading:n=!1,error:s=null,pagination:a,onBookingClick:r,onCancel:i,onPayment:o,onVoidPayment:l,onCreate:d,onSearch:u,onPageChange:h,onPageSizeChange:m,customActions:f}){const g=Ua(),[x,v]=p.useState(!1),[y,b]=p.useState(null),[w,S]=p.useState(""),j=e=>e.booking_number||String(e.id),C=[OP({getDisplayName:j,getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.booking_number),header:"Booking Number",showAvatar:!1,onClick:r,additionalOptions:{id:"booking_number"}}),LP({accessorKey:"customer_id",header:"Customer",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",g.textSize),children:t??"-"})}}),LP({accessorKey:"status",header:"Status",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",g.textSize),children:t??"-"})}}),LP({accessorKey:"total_amount",header:"Total Amount",cell:e=>{const t=e.row.original,n=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",g.textSize),children:null!=n?`${t.currency||"USD"} ${n.toFixed(2)}`:"-"})}}),LP({accessorKey:"payment_status",header:"Payment Status",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",g.textSize),children:t??"-"})}}),FP({accessorKey:"created_at",header:"Created At"}),zP({customActions:f,actions:[...o?[{icon:cf,onClick:e=>o(e),title:e=>"paid"===e.payment_status?"Booking is fully paid":YF(e.status)?"Settle Payment":`Payment not allowed for status: ${e.status.toUpperCase()}`,disabledWhen:e=>!YF(e.status)||"paid"===e.payment_status,className:"h-7 w-7 p-0 hover:bg-green-500/10 hover:text-green-600 transition-colors"}]:[],...l?[{icon:Pp,onClick:e=>l(e),title:e=>function(e){if("cancelled"===e.status.toLowerCase().trim())return"Cannot void payments for cancelled bookings";const t=e.payment_status?.toLowerCase().trim();return t&&"pending"!==t?"refunded"===t?"Payments are already refunded":"Void Payment":"No payments to void"}(e),disabledWhen:e=>!function(e){if("cancelled"===e.status.toLowerCase().trim())return!1;const t=e.payment_status?.toLowerCase().trim();return"processing"===t||"paid"===t}(e),className:"h-7 w-7 p-0 hover:bg-orange-500/10 hover:text-orange-600 transition-colors"}]:[],...i?[{icon:ax,onClick:e=>{b(e),S(""),v(!0)},title:e=>ZF(e),disabledWhen:e=>!XF(e),className:"h-7 w-7 p-0 text-destructive hover:bg-destructive/10 hover:text-destructive transition-colors"}]:[]]})],k=t,N=a?{page:a.page,pageSize:a.pageSize,total:a.total,totalPages:a.totalPages}:void 0,_=()=>{v(!1),b(null),S("")};return c.jsxs("div",{className:al("w-full",e),children:[c.jsx($P,{data:k,columns:C,useDefaultColumns:!1,title:"Bookings",description:"Manage and view bookings",onCreate:d,onSearch:u,manualPagination:Boolean(a&&h),serverPagination:N,onPageChange:h,onPageSizeChange:m,loading:n}),c.jsx(Zy,{open:x,onOpenChange:e=>{v(e),e||(b(null),S(""))},children:c.jsxs(tb,{children:[c.jsxs(nb,{children:[c.jsx(ab,{children:"Cancel Booking"}),c.jsx(rb,{children:y&&!XF(y)?c.jsxs("span",{className:"text-destructive",children:["This booking cannot be cancelled. ",ZF(y)]}):y?`Are you sure you want to cancel booking "${j(y)}"? Please provide a reason for cancellation.`:"Are you sure you want to cancel this booking? Please provide a reason for cancellation."})]}),y&&!XF(y)?c.jsx(sb,{children:c.jsx(vl,{variant:"outline",onClick:_,children:"Close"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-4 py-4",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"cancellation-reason",children:["Cancellation Reason ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(Tl,{id:"cancellation-reason",placeholder:"Enter reason for cancellation...",value:w,onChange:e=>S(e.target.value),rows:4,required:!0}),!w.trim()&&c.jsx("p",{className:"text-sm text-destructive",children:"Cancellation reason is required"})]})}),c.jsxs(sb,{children:[c.jsx(vl,{variant:"outline",onClick:_,children:"No, Keep Booking"}),c.jsx(vl,{variant:"destructive",onClick:()=>{w.trim()&&y&&XF(y)&&(i&&i(y,w.trim()),v(!1),b(null),S(""))},disabled:!w.trim(),children:"Yes, Cancel Booking"})]})]})]})})]})}var eI=(e=>(e.DRAFT="draft",e.PUBLISHED="published",e.ON_SALE="on_sale",e.SOLD_OUT="sold_out",e.CANCELLED="cancelled",e.COMPLETED="completed",e))(eI||{}),tI=(e=>(e.SEAT_SETUP="seat_setup",e.TICKET_IMPORT="ticket_import",e))(tI||{}),nI=(e=>(e.AVAILABLE="available",e.RESERVED="reserved",e.SOLD="sold",e.HELD="held",e.BLOCKED="blocked",e))(nI||{});function sI(e){return{id:e.id,tenant_id:e.tenant_id,show_id:e.show_id,title:e.title,start_dt:new Date(e.start_dt),duration_minutes:e.duration_minutes,venue_id:e.venue_id,layout_id:e.layout_id||void 0,status:e.status,configuration_type:e.configuration_type,is_active:e.is_active,created_at:new Date(e.created_at),updated_at:new Date(e.updated_at)}}function aI(e){return{id:e.id,tenant_id:e.tenant_id,event_id:e.event_id,status:e.status,seat_id:e.seat_id||void 0,section_name:e.section_name||void 0,row_name:e.row_name||void 0,seat_number:e.seat_number||void 0,broker_id:e.broker_id||void 0,attributes:e.attributes||{},created_at:new Date(e.created_at),updated_at:new Date(e.updated_at),ticket_number:e.ticket_number||void 0,ticket_price:e.ticket_price||void 0,ticket_status:e.ticket_status||void 0}}class rI{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}getEndpoint(){return this.endpoints?.events||ma.ENDPOINTS.TICKETING.EVENTS}async fetchEvents(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString()),void 0!==e?.show_id&&t.append("show_id",e.show_id),void 0!==e?.layout_id&&t.append("layout_id",e.layout_id),void 0!==e?.status&&(Array.isArray(e.status)?e.status.forEach(e=>{t.append("status",e)}):t.append("status",e.status));const n=this.getEndpoint().replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(sI),pagination:l}}catch(t){throw t}}async searchEvents(e,t=100,n){try{const s=e.trim();if(!s)return[];const a=new URLSearchParams;a.append("search",s),a.append("limit",Math.min(t,200).toString()),n&&a.append("show_id",n);const r=`${this.getEndpoint().replace(/\/$/,"")}?${a.toString()}`;return((await this.apiClient.get(r,{requiresAuth:!0})).items||[]).map(sI)}catch(s){throw s}}async fetchEventById(e){try{const t=this.getEndpoint().replace(/\/$/,"");return sI(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createEvent(e){try{return sI(await this.apiClient.post(this.getEndpoint(),e,{requiresAuth:!0}))}catch(t){throw t}}async updateEvent(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return sI(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteEvent(e){try{const t=this.getEndpoint().replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async fetchEventSeats(e,t){try{const n=new URLSearchParams;void 0!==t?.skip&&n.append("skip",t.skip.toString()),void 0!==t?.limit&&n.append("limit",t.limit.toString());const s=`${this.getEndpoint().replace(/\/$/,"")}/${e}/seats?${n.toString()}`,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip??t?.skip??0,i=a.limit??t?.limit??100,o=a.total??0;return{data:(a.items||[]).map(aI),pagination:{page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)}}}catch(n){throw n}}async initializeEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${n}/${e}/seats/initialize`,{generate_tickets:t.generate_tickets??!1,ticket_price:t.ticket_price??0,pricing_mode:t.pricing_mode??"same",section_pricing:t.section_pricing,seat_pricing:t.seat_pricing,included_section_ids:t.included_section_ids,excluded_section_ids:t.excluded_section_ids},{requiresAuth:!0})||[]).map(aI)}catch(n){throw n}}async importBrokerSeats(e,t,n){try{const s=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${s}/${e}/seats/import`,{broker_id:t,seats:n},{requiresAuth:!0})||[]).map(aI)}catch(s){throw s}}async deleteEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");await this.apiClient.post(`${n}/${e}/seats/delete`,{seat_ids:t},{requiresAuth:!0})}catch(n){throw n}}async createTicketsFromSeats(e,t,n=0){try{const s=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${s}/${e}/seats/create-tickets`,{seat_ids:t,ticket_price:n},{requiresAuth:!0})||[]).map(aI)}catch(s){throw s}}async createEventSeat(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return aI(await this.apiClient.post(`${n}/${e}/seats`,t,{requiresAuth:!0}))}catch(n){throw n}}async holdEventSeats(e,t,n){try{const s=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${s}/${e}/seats/hold`,{seat_ids:t,reason:n},{requiresAuth:!0})||[]).map(aI)}catch(s){throw s}}async unholdEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${n}/${e}/seats/unhold`,{seat_ids:t},{requiresAuth:!0})||[]).map(aI)}catch(n){throw n}}async unblockEventSeats(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${n}/${e}/seats/unblock`,{seat_ids:t},{requiresAuth:!0})||[]).map(aI)}catch(n){throw n}}async blockEventSeats(e,t,n){try{const s=this.getEndpoint().replace(/\/$/,"");return(await this.apiClient.post(`${s}/${e}/seats/block`,{seat_ids:t,reason:n},{requiresAuth:!0})||[]).map(aI)}catch(s){throw s}}async fetchEventSeatStatistics(e){try{const t=this.getEndpoint().replace(/\/$/,"");return await this.apiClient.get(`${t}/${e}/seats/statistics`,{requiresAuth:!0})}catch(t){throw t}}}const iI=p.createContext(null);function oI({children:e,config:t}){const n=p.useMemo(()=>new rI(t),[t.apiClient,t.endpoints?.events]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(iI.Provider,{value:s,children:e})}function lI(){const e=p.useContext(iI);if(!e)throw new Error("useEventService must be used within EventProvider");return e.service}function cI(e,t){const{filter:n,pagination:s,enabled:a=!0,disableCache:r=!1}=t||{};return Ys({queryKey:["events",n?.search,n?.is_active,n?.show_id,n?.layout_id,n?.status,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchEvents({skip:t,limit:a,search:n?.search,is_active:n?.is_active,show_id:n?.show_id,layout_id:n?.layout_id,status:n?.status})},enabled:a,staleTime:r?0:3e5})}function dI(e,t){return Ys({queryKey:["events",t],queryFn:()=>t?e.fetchEventById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function uI(e,t){return Ys({queryKey:["events",t,"statistics"],queryFn:()=>t?e.fetchEventSeatStatistics(t):Promise.resolve(null),enabled:!!t,staleTime:12e4})}function hI(e){const t=Vs();return Xs({mutationFn:t=>e.createEvent(t),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),t.invalidateQueries({queryKey:["shows"]})}})}function mI(e,t,n){return Ys({queryKey:["events",t,"seats",n?.skip,n?.limit],queryFn:async()=>{if(!t)throw new Error("Event ID is required");return e.fetchEventSeats(t,n)},enabled:!!t,staleTime:3e5,retry:(e,t)=>"CancelledError"!==t?.name&&!t?.message?.includes("CancelledError")&&!t?.message?.includes("cancelled")&&e<3})}const pI=AM({title:PM().min(1,"Title is required").max(200,"Title cannot exceed 200 characters"),start_dt:PM().min(1,"Start datetime is required"),duration_minutes:EM().min(1,"Duration must be at least 1 minute").max(1440,"Duration cannot exceed 1440 minutes (24 hours)"),venue_id:PM().min(1,"Venue is required"),layout_id:PM().optional(),status:MM(eI).default(eI.DRAFT),configuration_type:MM(tI).default(tI.SEAT_SETUP)}),fI=p.forwardRef(({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:s="create",venues:a=[],layouts:r=[],onVenueChange:i},o)=>{const l=uA({resolver:QA(pI),defaultValues:{title:"",start_dt:"",duration_minutes:120,venue_id:"",layout_id:void 0,status:eI.DRAFT,configuration_type:tI.SEAT_SETUP,...e}}),{watch:d,setValue:u,handleSubmit:h,formState:{errors:m,isSubmitted:f}}=l,g=d("venue_id"),x=r.filter(e=>!g||e.venue_id===g);p.useEffect(()=>{i&&i(g||null)},[g,i]);const v=p.useRef(null);p.useEffect(()=>{if(f&&Object.keys(m).length>0){const e=Object.keys(m)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):v.current&&v.current.scrollIntoView({behavior:"smooth",block:"center"})}},[m,f]);const y=Object.values(eI).map(e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")})),b=[{value:tI.SEAT_SETUP,label:"Seat Setup (Standard)",description:"Define seat layout first, tickets created during booking."},{value:tI.TICKET_IMPORT,label:"Ticket First (Broker Import)",description:"Add tickets with seat information first (import/scan)."}],w={title:d("title")??"",start_dt:d("start_dt")??"",duration_minutes:String(d("duration_minutes")??""),venue_id:d("venue_id")??"",layout_id:d("layout_id")??"",status:d("status")??"",configuration_type:d("configuration_type")??""};return c.jsx(dR,{...l,children:c.jsxs("form",{ref:o,onSubmit:h(async e=>{await t(e)}),className:al("space-y-6"),noValidate:!0,children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(wA,{formType:"event",currentValues:w,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&u(e,"duration_minutes"===e?Number(t)||0:t)})},disabled:n})}),c.jsx("div",{ref:v}),c.jsx(hA,{name:"title",label:"Title",placeholder:"Enter event title",required:!0,disabled:n}),c.jsx(fA,{name:"start_dt",label:"Start Date & Time",required:!0,disabled:n,helperText:"When the event begins"}),c.jsx(mA,{name:"duration_minutes",label:"Duration (minutes)",placeholder:"120",required:!0,min:1,max:1440,disabled:n,helperText:"Duration of the event in minutes (1-1440)"}),c.jsx(gA,{name:"venue_id",label:"Venue",placeholder:"Select a venue",required:!0,disabled:n,options:a.map(e=>({value:e.id,label:e.name}))}),g&&x.length>0&&c.jsx(gA,{name:"layout_id",label:"Layout (Optional)",placeholder:"Select a layout",disabled:n,options:x.map(e=>({value:e.id,label:e.name})),helperText:"Select a layout for this event's seating arrangement"}),c.jsx(gA,{name:"configuration_type",label:"Configuration Type",required:!0,disabled:n,options:b,helperText:"Choose how tickets and seats are managed"}),c.jsx(gA,{name:"status",label:"Status",required:!0,disabled:n,options:y})]})})});function gI({eventId:e}){const{data:t,isLoading:n}=uI(lI(),e);if(n||!t)return c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(tx,{className:"h-3 w-3"}),c.jsx("span",{children:"Loading..."})]});const{available_seats:s,reserved_seats:a,sold_seats:r,held_seats:i,blocked_seats:o}=t;return c.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1",title:"Available seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),c.jsx("span",{className:"text-green-700 font-medium",children:s}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"AVAILABLE"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Reserved seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),c.jsx("span",{className:"text-yellow-700 font-medium",children:a}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"RESERVED"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Sold seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),c.jsx("span",{className:"text-blue-700 font-medium",children:r}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"SOLD"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Held seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),c.jsx("span",{className:"text-purple-700 font-medium",children:i}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"HELD"})]}),c.jsxs("div",{className:"flex items-center gap-1",title:"Blocked seats",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),c.jsx("span",{className:"text-red-700 font-medium",children:o}),c.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"BLOCKED"})]})]})}function xI({className:e,events:t=[],loading:n=!1,error:s=null,onEventClick:a,onEdit:r,onDelete:i,onManageInventory:o,onStatusChange:l,onSearch:d,customActions:u,showShowNameInTitle:h=!1,isDeleting:m=!1}){const f=Ua(),[g,x]=p.useState(!1),[v,y]=p.useState(null),[b,w]=p.useState(!1),[S,j]=p.useState(null),C=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`},k=e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," "),N=p.useMemo(()=>t.map(e=>{return{id:e.id,name:e.title,description:(t=e.start_dt,new Date(t).toLocaleString()),event:e};var t}),[t]),_=e=>{a&&a(e.event)},P=e=>{r&&r(e.event)},E=e=>{y(e.event),x(!0)},R=Object.values(eI).map(e=>({value:e,label:k(e)})),A=(e,t)=>l?c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",size:"sm",className:"h-auto p-0 hover:bg-transparent",onClick:e=>e.stopPropagation(),children:c.jsxs(mC,{variant:t,className:"text-xs flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity flex items-center gap-1",children:[k(e.status),c.jsx(Vp,{className:"h-3 w-3"})]})})}),c.jsx(JS,{align:"end",onClick:e=>e.stopPropagation(),children:R.map(t=>c.jsx(ej,{onClick:()=>((e,t)=>{j({event:e,newStatus:t}),w(!0)})(e,t.value),disabled:e.status===t.value,children:t.label},t.value))})]}):c.jsx(mC,{variant:t,className:"text-xs flex-shrink-0",children:k(e.status)}),T=p.useMemo(()=>[{id:"manage-inventory",icon:c.jsx(Jf,{className:"h-3.5 w-3.5"}),title:"Manage Inventory",onClick:e=>{o&&o(e.event)},show:!!o},{id:"edit",icon:c.jsx(Tg,{className:"h-3.5 w-3.5"}),title:"Edit",onClick:P,show:!!r},{id:"delete",icon:c.jsx(Hg,{className:"h-3.5 w-3.5"}),title:"Delete",onClick:E,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",show:!!i}],[o,r,i,P,E]),M=p.useMemo(()=>e=>{const t=(e=>{switch(e.toLowerCase()){case"draft":default:return"outline";case"published":case"on_sale":return"default";case"sold_out":case"completed":return"secondary";case"cancelled":return"destructive"}})(e.event.status),n=(e=>{const t=new Date(e);return{month:t.toLocaleDateString("en-US",{month:"short"}),day:t.getDate(),fullDate:t}})(e.event.start_dt),s=(e=>{const t=new Date(e);return{dayOfWeek:t.toLocaleDateString("en-US",{weekday:"short"}),time:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),fullTime:t.toLocaleTimeString("en-US",{weekday:"long",hour:"numeric",minute:"2-digit",hour12:!0})}})(e.event.start_dt);return c.jsx("div",{className:"group rounded-lg border bg-card transition-all hover:shadow-md hover:border-primary/20 cursor-pointer overflow-hidden",onClick:()=>_(e),children:c.jsxs("div",{className:al("flex",f.gapCard,f.paddingCard),children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsxs("div",{className:"flex flex-col items-center justify-center w-16 h-16 rounded bg-muted/50 border border-border/50",children:[c.jsx("span",{className:al("font-semibold text-muted-foreground uppercase leading-tight tracking-wide",f.textSizeSmall),children:n.month}),c.jsx("span",{className:"text-xl font-bold text-foreground leading-none mt-0.5",children:n.day})]})}),c.jsxs("div",{className:al("flex-1 min-w-0 flex flex-col",f.gapFormItem),children:[c.jsxs("div",{className:al("flex items-start justify-between",f.gapCard),children:[c.jsx("h4",{className:al("font-semibold text-foreground line-clamp-2 leading-snug flex-1",f.textSize),children:h&&e.event.show?`${e.event.show.name} - ${e.name}`:e.name}),c.jsx("div",{className:"flex-shrink-0",children:A(e.event,t)})]}),c.jsxs("div",{className:al("flex items-center text-muted-foreground flex-wrap",f.gapCard,f.textSizeSmall),children:[c.jsxs("div",{className:al("flex items-center",f.gapFormItem),children:[c.jsx(sf,{className:al("flex-shrink-0",f.iconSize)}),c.jsx("span",{className:al("font-medium text-foreground",f.textSizeSmall),children:s.dayOfWeek}),c.jsx("span",{children:s.time})]}),c.jsxs("div",{className:al("flex items-center",f.gapFormItem),children:[c.jsx(Vf,{className:al("flex-shrink-0",f.iconSize)}),c.jsx("span",{className:"truncate",children:e.event.venue?.name||"Venue TBD"})]}),c.jsx("div",{className:al("flex items-center",f.gapFormItem),children:c.jsx("span",{children:C(e.event.duration_minutes)})})]}),c.jsxs("div",{className:al("flex items-center justify-between",f.gapCard),children:[c.jsx(gI,{eventId:e.event.id}),c.jsx(NA,{item:e,actions:T,customActions:u?e=>u(e.event):void 0})]})]})]})})},[r,i,o,l,u,a,R,f,h]),D={label:"Delete",onClick:()=>{v&&i&&i(v),x(!1),y(null)},variant:"destructive",loading:m,disabled:m},L={label:"Cancel",onClick:()=>{x(!1),y(null)},disabled:m},F={label:"Change Status",onClick:()=>{S&&l&&l(S.event,S.newStatus),w(!1),j(null)},variant:"default"},I={label:"Cancel",onClick:()=>{w(!1),j(null)},variant:"outline"};return c.jsxs("div",{className:e,children:[c.jsx(qP,{items:N,loading:n,error:s,title:"",description:"",onSearch:d,searchable:!1,onItemClick:_,renderItem:M,showCreateButton:!1,defaultViewMode:"card",viewMode:"list",showViewToggle:!1,gridCols:{default:1}}),c.jsx(jE,{open:g,onOpenChange:e=>{x(e),e||y(null)},title:"Delete Event",description:v?`Are you sure you want to delete "${v.title}"? This action cannot be undone.`:"Are you sure you want to delete this event? This action cannot be undone.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:D,cancelAction:L}),c.jsx(jE,{open:b,onOpenChange:e=>{w(e),e||j(null)},title:"Change Event Status",description:S?`Are you sure you want to change the status of "${S.event.title}" from ${k(S.event.status)} to ${k(S.newStatus)}?`:"Are you sure you want to change the event status?",confirmAction:F,cancelAction:I})]})}function vI(e){return{id:e.id,code:e.code,name:e.name,description:e.description,image_url:e.image_url,venue_type:e.venue_type,capacity:e.capacity,parking_info:e.parking_info,accessibility:e.accessibility,amenities:e.amenities,opening_hours:e.opening_hours,phone:e.phone,email:e.email,website:e.website,street_address:e.street_address,city:e.city,state_province:e.state_province,postal_code:e.postal_code,country:e.country,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class yI{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}getEndpoint(){return this.endpoints?.venues||ma.ENDPOINTS.TICKETING.VENUES}async fetchVenues(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.getEndpoint().replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(vI),pagination:l}}catch(t){throw t}}async searchVenues(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.getEndpoint().replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(vI)}catch(n){throw n}}async fetchVenueById(e){try{const t=this.getEndpoint().replace(/\/$/,"");return vI(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createVenue(e){try{return vI(await this.apiClient.post(this.getEndpoint(),e,{requiresAuth:!0}))}catch(t){throw t}}async updateVenue(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return vI(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteVenue(e){try{const t=this.getEndpoint().replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const bI=p.createContext(null);function wI({children:e,config:t}){const n=p.useMemo(()=>new yI(t),[t.apiClient,t.endpoints?.venues]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(bI.Provider,{value:s,children:e})}function SI(){const e=p.useContext(bI);if(!e)throw new Error("useVenueService must be used within VenueProvider");return e.service}function jI(e,t){const{filter:n,pagination:s}=t||{};return Ys({queryKey:["venues",n?.search,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchVenues({skip:t,limit:a,search:n?.search})},staleTime:3e5})}function CI(e,t){return Ys({queryKey:["venues",t],queryFn:()=>t?e.fetchVenueById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function kI(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateVenue(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["venues"]}),t.invalidateQueries({queryKey:["venues",n.id]})}})}function NI(e){return{id:e.id,tenant_id:e.tenant_id,venue_id:e.venue_id,name:e.name,description:e.description||void 0,image_url:e.image_url||void 0,file_id:e.file_id||void 0,design_mode:e.design_mode||"seat-level",canvas_background_color:e.canvas_background_color||void 0,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}}class _I{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchLayoutsByVenue(e){try{return((await this.apiClient.get(`${this.endpoints.layouts}/venue/${e}`,{requiresAuth:!0})).items||[]).map(NI)}catch(t){throw t}}async fetchLayoutById(e){try{return NI(await this.apiClient.get(`${this.endpoints.layouts}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createLayout(e){try{return NI(await this.apiClient.post(this.endpoints.layouts,e,{requiresAuth:!0}))}catch(t){throw t}}async updateLayout(e,t){try{return NI(await this.apiClient.put(`${this.endpoints.layouts}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteLayout(e){try{await this.apiClient.delete(`${this.endpoints.layouts}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async cloneLayout(e){try{return NI(await this.apiClient.post(`${this.endpoints.layouts}/${e}/clone`,{},{requiresAuth:!0}))}catch(t){throw t}}async fetchLayoutWithSeats(e){try{const t=await this.apiClient.get(`${this.endpoints.layouts}/${e}/with-seats`,{requiresAuth:!0});return{layout:NI(t.layout),seats:t.seats.map(e=>({id:e.id,tenant_id:e.tenant_id,venue_id:e.venue_id,layout_id:e.layout_id,section_id:e.section_id,section_name:e.section_name,row:e.row,seat_number:e.seat_number,seat_type:e.seat_type,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,shape:e.shape??void 0,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date})),sections:(t.sections||[]).map(e=>({id:e.id,tenant_id:e.tenant_id,layout_id:e.layout_id,name:e.name,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,file_id:e.file_id??void 0,image_url:e.image_url??void 0,shape:e.shape??void 0,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}))}}catch(t){throw t}}}const PI=p.createContext(null);function EI({children:e,config:t}){const n=p.useMemo(()=>{const e={...{apiClient:Fa,endpoints:{layouts:"/api/v1/ticketing/layouts"}},...t};return new _I(e)},[t]);return c.jsx(PI.Provider,{value:n,children:e})}function RI(){const e=p.useContext(PI);if(!e)throw new Error("useLayoutService must be used within LayoutProvider");return e}function AI(e,t){return Ys({queryKey:["layouts","venue",t],queryFn:()=>e.fetchLayoutsByVenue(t),enabled:!!t})}function TI(e,t){return Ys({queryKey:["layouts",t,"with-seats"],queryFn:()=>e.fetchLayoutWithSeats(t),enabled:!!t,refetchOnMount:!0,refetchOnWindowFocus:!1})}function MI(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateLayout(t,n),onSuccess:e=>{t.invalidateQueries({queryKey:["layouts",e.id]}),t.invalidateQueries({queryKey:["layouts","venue",e.venue_id]})}})}function DI({open:e,onOpenChange:t,onSubmit:n,showId:s,title:a="Create Event",maxWidth:r="720px"}){const i=Ua(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),[v,y]=p.useState(null),b=SI(),w=RI(),{data:S}=jI(b,{pagination:{page:1,pageSize:100}}),j=S?.data?.map(e=>({id:e.id,name:e.name}))||[],{data:C}=AI(w,v||null),k=C?.map(e=>({id:e.id,name:e.name,venue_id:e.venue_id}))||[];p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const N=p.useMemo(()=>e=>{const t=new Date(e.start_dt).toISOString();return{show_id:s,title:e.title,start_dt:t,duration_minutes:e.duration_minutes,venue_id:e.venue_id,layout_id:e.layout_id||void 0,status:e.status,configuration_type:e.configuration_type}},[s]),_=()=>{f(!1),x(null),y(null),t(!1)},P={label:u?"Creating...":"Confirm & Create",onClick:async()=>{if(g){h(!0);try{const e=N(g);await n(e),x(null),y(null),f(!1)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},E={label:"Cancel",variant:"outline",disabled:u};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:_,title:a,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{x(null),y(null),d(e=>e+1)},showCancelButton:!0,onCancel:_,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:"space-y-6 mt-12",children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx(fI,{ref:o,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"create",venues:j,layouts:k,onVenueChange:y},l)})})}),c.jsx(jE,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Event Creation",description:g?c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:"Are you sure you want to create this event?"}):void 0,confirmAction:P,cancelAction:E})]})}function LI({open:e,onOpenChange:t,onSubmit:n,event:s,title:a="Edit Event",maxWidth:r="720px"}){const i=Ua(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),[v,y]=p.useState(s.venue_id),b=SI(),w=RI(),{data:S}=jI(b,{pagination:{page:1,pageSize:100}}),j=S?.data?.map(e=>({id:e.id,name:e.name}))||[],{data:C}=AI(w,v||null),k=C?.map(e=>({id:e.id,name:e.name,venue_id:e.venue_id}))||[];p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]),p.useEffect(()=>{y(s.venue_id)},[s.venue_id]);const N=p.useMemo(()=>e=>{const t={};e.title!==s.title&&(t.title=e.title);return new Date(e.start_dt).toISOString()!==new Date(s.start_dt).toISOString()&&(t.start_dt=new Date(e.start_dt).toISOString()),e.duration_minutes!==s.duration_minutes&&(t.duration_minutes=e.duration_minutes),e.venue_id!==s.venue_id&&(t.venue_id=e.venue_id),e.layout_id!==(s.layout_id||"")&&(t.layout_id=e.layout_id||void 0),e.status!==s.status&&(t.status=e.status),e.configuration_type!==s.configuration_type&&(t.configuration_type=e.configuration_type),t},[s]),_=()=>{f(!1),x(null),t(!1)},P={title:s.title,start_dt:new Date(s.start_dt).toISOString().slice(0,16),duration_minutes:s.duration_minutes,venue_id:s.venue_id,layout_id:s.layout_id||void 0,status:s.status,configuration_type:s.configuration_type},E={label:u?"Saving...":"Confirm & Save",onClick:async()=>{if(g){h(!0);try{const e=N(g);await n(s.id,e),x(null),f(!1)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},R={label:"Cancel",variant:"outline",disabled:u};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:_,title:a,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{x(null),d(e=>e+1)},showCancelButton:!0,onCancel:_,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:"space-y-6 mt-12",children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx(fI,{ref:o,defaultValues:P,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit",venues:j,layouts:k,onVenueChange:y},l)})})}),c.jsx(jE,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Event Update",description:g?c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:"Are you sure you want to update this event?"}):void 0,confirmAction:E,cancelAction:R})]})}function FI({className:e,shows:t=[],loading:n=!1,pagination:s,onShowClick:a,onDelete:r,onCreate:i,onSearch:o,onPageChange:l,onPageSizeChange:d}){const u=Ua(),[h,m]=p.useState(!1),[f,g]=p.useState(null),x=e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},v=[OP({getDisplayName:x,getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:a,additionalOptions:{id:"code"}}),LP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:t??"-"})}}),LP({accessorKey:"organizer_id",header:"Organizer",cell:e=>{const t=e.row.original,n=t.organizer?.name;return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:n??"-"})},additionalOptions:{id:"organizer"}}),LP({accessorKey:"started_date",header:"Show Date From",cell:e=>{const t=e.row.original.started_date;if(!t)return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"});try{const e=new Date(t);return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:e.toLocaleDateString()})}catch{return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"})}}}),LP({accessorKey:"ended_date",header:"Show Date To",cell:e=>{const t=e.row.original.ended_date;if(!t)return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"});try{const e=new Date(t);return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:e.toLocaleDateString()})}catch{return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"})}}})],y=t,b=s?{page:s.page,pageSize:s.pageSize,total:s.total,totalPages:s.totalPages}:void 0,w={label:"Delete",onClick:()=>{f&&r&&r(f),m(!1),g(null)},variant:"destructive"},S={label:"Cancel",onClick:()=>{m(!1),g(null)}};return c.jsxs("div",{className:al("w-full",e),children:[c.jsx($P,{data:y,columns:v,useDefaultColumns:!1,title:"Shows",description:"Manage and view shows",onCreate:i,onSearch:o,manualPagination:Boolean(s&&l),serverPagination:b,onPageChange:l,onPageSizeChange:d,loading:n}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||g(null)},title:"Delete Show",description:f?`Are you sure you want to delete "${x(f)}"? This action cannot be undone.`:"Are you sure you want to delete this show?",confirmText:"delete",confirmTextLabel:"Type to confirm",confirmTextPlaceholder:'Type "delete" to confirm',confirmAction:w,cancelAction:S})]})}function II(e){return{id:e.id,code:e.code||void 0,name:e.name,organizer_id:e.organizer_id||void 0,organizer:e.organizer?{id:e.organizer.id,code:e.organizer.code,name:e.organizer.name}:void 0,started_date:e.started_date||void 0,ended_date:e.ended_date||void 0,note:e.note||void 0,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class OI{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchShows(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.shows.replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(II),pagination:l}}catch(t){throw t}}async searchShows(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.endpoints.shows.replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(II)}catch(n){throw n}}async fetchShowById(e){try{const t=this.endpoints.shows.replace(/\/$/,"");return II(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createShow(e){try{return II(await this.apiClient.post(this.endpoints.shows,e,{requiresAuth:!0}))}catch(t){throw t}}async updateShow(e,t){try{const n=this.endpoints.shows.replace(/\/$/,"");return II(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteShow(e){try{const t=this.endpoints.shows.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}async fetchShowImages(e){try{const t=this.endpoints.shows.replace(/\/$/,"");return(await this.apiClient.get(`${t}/${e}/images`,{requiresAuth:!0})||[]).map(e=>({...e,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}))}catch(t){throw t}}async createShowImage(e){try{const t=this.endpoints.shows.replace(/\/$/,""),n=await this.apiClient.post(`${t}/${e.show_id}/images`,e,{requiresAuth:!0});return{...n,created_at:n.created_at?new Date(n.created_at):new Date,updated_at:n.updated_at?new Date(n.updated_at):new Date}}catch(t){throw t}}async updateShowImage(e,t,n){try{const s=this.endpoints.shows.replace(/\/$/,""),a=await this.apiClient.put(`${s}/${e}/images/${t}`,n,{requiresAuth:!0});return{...a,created_at:a.created_at?new Date(a.created_at):new Date,updated_at:a.updated_at?new Date(a.updated_at):new Date}}catch(s){throw s}}async deleteShowImage(e,t){try{const n=this.endpoints.shows.replace(/\/$/,"");await this.apiClient.delete(`${n}/${e}/images/${t}`,{requiresAuth:!0})}catch(n){throw n}}}const zI=p.createContext(null);function BI({children:e,config:t}){const n=p.useMemo(()=>new OI(t),[t.apiClient,t.endpoints?.shows]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(zI.Provider,{value:s,children:e})}function $I(){const e=p.useContext(zI);if(!e)throw new Error("useShowService must be used within ShowProvider");return e.service}const UI=AM({name:PM().min(1,"Name is required"),organizer_id:PM().optional(),started_date:PM().optional(),ended_date:PM().optional(),note:PM().optional()}).refine(e=>!e.started_date||!e.ended_date||new Date(e.started_date)<=new Date(e.ended_date),{message:"End date must be after start date",path:["ended_date"]}).transform(e=>e),VI=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:s="create",organizers:a=[]},r){const[i,o]=p.useState(!1),{register:l,control:d,handleSubmit:u,watch:h,setValue:m,formState:{errors:f,isSubmitted:g}}=uA({resolver:QA(UI),defaultValues:{name:"",organizer_id:void 0,started_date:void 0,ended_date:void 0,note:void 0,...e}}),x=p.useRef(null);p.useEffect(()=>{if(g&&Object.keys(f).length>0){const e=Object.keys(f)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):x.current&&x.current.scrollIntoView({behavior:"smooth",block:"center"})}},[f,g]);const v={name:h("name")??"",organizer_id:h("organizer_id")??"",started_date:h("started_date")??"",ended_date:h("ended_date")??"",note:h("note")??""};return c.jsxs("form",{ref:r,id:"show-form",onSubmit:u(async e=>{await t(e)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(wA,{formType:"show",currentValues:v,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{if(null!=t&&""!==t)if("organizer_id"===e){const e=a.find(e=>e.id===t),n=a.find(e=>e.name===t);m("organizer_id",e?e.id:n?n.id:t)}else m(e,t)})},disabled:n})}),c.jsxs("div",{className:al("grid grid-cols-1 md:grid-cols-2 gap-4"),ref:x,children:[c.jsxs(El,{"data-invalid":!!f.name,children:[c.jsxs(Rl,{htmlFor:"name",children:["Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"name",type:"text",placeholder:"Enter Name",...l("name"),disabled:n,className:al(f.name&&"border-destructive")}),c.jsx(Al,{children:f.name?.message})]}),c.jsxs(El,{"data-invalid":!!f.organizer_id,children:[c.jsx(Rl,{htmlFor:"organizer_id",children:"Organizer"}),c.jsxs(lP,{open:i,onOpenChange:o,children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{id:"organizer_id",variant:"outline",role:"combobox",className:al("w-full justify-between",!h("organizer_id")&&"text-muted-foreground",f.organizer_id&&"border-destructive"),disabled:n,children:[h("organizer_id")?a.find(e=>e.id===h("organizer_id"))?.name||"Select organizer":"Select an organizer (optional)",c.jsx(Qp,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),c.jsx(dP,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:"Search organizers..."}),c.jsxs(wN,{children:[c.jsx(SN,{children:"No organizer found."}),c.jsxs(jN,{children:[c.jsxs(kN,{value:"__none__",onSelect:()=>{m("organizer_id",void 0),o(!1)},children:[c.jsx(Up,{className:al("mr-2 h-4 w-4",h("organizer_id")?"opacity-0":"opacity-100")}),"None"]}),a.map(e=>c.jsxs(kN,{value:e.name,onSelect:()=>{m("organizer_id",e.id),o(!1)},children:[c.jsx(Up,{className:al("mr-2 h-4 w-4",h("organizer_id")===e.id?"opacity-100":"opacity-0")}),e.name]},e.id))]})]})]})})]}),c.jsx(Al,{children:f.organizer_id?.message})]}),c.jsxs(El,{"data-invalid":!!f.started_date,children:[c.jsx(Rl,{htmlFor:"started_date",children:"Start Date"}),c.jsx(kl,{id:"started_date",type:"date",...l("started_date"),disabled:n,className:al(f.started_date&&"border-destructive")}),c.jsx(Al,{children:f.started_date?.message})]}),c.jsxs(El,{"data-invalid":!!f.ended_date,children:[c.jsx(Rl,{htmlFor:"ended_date",children:"End Date"}),c.jsx(kl,{id:"ended_date",type:"date",...l("ended_date"),disabled:n,className:al(f.ended_date&&"border-destructive")}),c.jsx(Al,{children:f.ended_date?.message})]})]}),c.jsx(SA,{control:d,name:"note",label:"Note",placeholder:"Enter notes about the show",rows:4,disabled:n,showImproveButton:!0})]})});function qI({showId:e,images:t=[],onImagesChange:n,className:s}){const a=$I(),[r,i]=p.useState(t),[o,l]=p.useState(!1),[d,u]=p.useState(new Set),[h,m]=p.useState(null),[f,g]=p.useState(null);p.useEffect(()=>{i(t)},[t]);const x=p.useCallback(async t=>{const s=Array.from(t.target.files||[]);if(0===s.length)return;l(!0);const o=[],c=[];for(const n of s){const t=n.name;u(e=>new Set(e).add(t));try{const t=await QP.uploadImage(n),s={show_id:e,file_id:t.id,name:n.name,description:"",is_banner:!1},r={...await a.createShowImage(s),file_url:t.url};o.push(r)}catch(d){c.push(t)}finally{u(e=>{const n=new Set(e);return n.delete(t),n})}}if(o.length>0){const e=[...r,...o];i(e),n?.(e)}if(c.length>0){const e=o.length,t=e>0?`Successfully uploaded ${e} image(s). ${c.length} image(s) failed to upload.`:`Failed to upload ${c.length} image(s). Please try again.`;alert(t)}l(!1),t.target.value=""},[e,r,a,n]),v=p.useCallback(async t=>{if(confirm("Are you sure you want to delete this image?"))try{await a.deleteShowImage(e,t);const s=r.filter(e=>e.id!==t);i(s),n?.(s)}catch(s){alert("Failed to delete image. Please try again.")}},[e,r,a,n]),y=p.useCallback(e=>{m(e.id),g({name:e.name,description:e.description||"",is_banner:e.is_banner})},[]),b=p.useCallback(async()=>{if(h&&f)try{const t={name:f.name,description:f.description||void 0,is_banner:f.is_banner},s=await a.updateShowImage(e,h,t),o=r.map(e=>e.id===h?s:f.is_banner&&e.is_banner?{...e,is_banner:!1}:e);i(o),n?.(o),m(null),g(null)}catch(t){alert("Failed to update image. Please try again.")}},[h,f,e,r,a,n]),w=p.useCallback(()=>{m(null),g(null)},[]),S=p.useCallback(async(t,s)=>{try{const o=!s,l=await a.updateShowImage(e,t,{is_banner:o}),c=r.map(e=>e.id===t?l:o&&e.is_banner?{...e,is_banner:!1}:e);i(c),n?.(c)}catch(o){alert("Failed to update banner status. Please try again.")}},[e,r,a,n]);return c.jsxs("div",{className:al("space-y-4",s),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Show Images"}),c.jsxs(Dl,{htmlFor:"image-upload",className:"cursor-pointer",children:[c.jsx(vl,{type:"button",variant:"outline",size:"sm",disabled:o,asChild:!0,children:c.jsx("span",{children:o?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Qg,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})}),c.jsx("input",{id:"image-upload",type:"file",accept:"image/*",multiple:!0,onChange:x,className:"hidden",disabled:o,"aria-label":"Upload show images"})]})]}),d.size>0&&c.jsx("div",{className:"bg-muted p-3 rounded-md",children:c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Uploading ",d.size," file(s):"," ",Array.from(d).join(", ")]})}),0===r.length?c.jsxs(bl,{className:"p-8 text-center border-dashed",children:[c.jsx(Nf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:'No images uploaded yet. Click "Upload Image" to add images.'})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>c.jsxs(bl,{className:"overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"relative aspect-video bg-muted",children:[e.file_url?c.jsx("img",{src:e.file_url,alt:e.name,className:"w-full h-full object-cover"}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx(Nf,{className:"h-12 w-12 text-muted-foreground"})}),e.is_banner&&c.jsxs("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs font-semibold flex items-center gap-1",children:[c.jsx(Lg,{className:"h-3 w-3"}),"Banner"]}),c.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:c.jsx(vl,{type:"button",variant:"destructive",size:"sm",onClick:()=>v(e.id),className:"h-6 w-6 p-0",children:c.jsx(ax,{className:"h-3 w-3"})})})]}),c.jsx("div",{className:"p-4 space-y-2 flex flex-col flex-1",children:h===e.id?c.jsxs("div",{className:"space-y-2 flex flex-col flex-1",children:[c.jsxs("div",{children:[c.jsx(Dl,{htmlFor:`name-${e.id}`,className:"text-xs",children:"Name"}),c.jsx(kl,{id:`name-${e.id}`,value:f?.name||"",onChange:e=>g(t=>t?{...t,name:e.target.value}:null),className:"h-8 text-sm"})]}),c.jsxs("div",{children:[c.jsx(Dl,{htmlFor:`desc-${e.id}`,className:"text-xs",children:"Description"}),c.jsx(Tl,{id:`desc-${e.id}`,value:f?.description||"",onChange:e=>g(t=>t?{...t,description:e.target.value}:null),className:"h-16 text-sm",rows:2})]}),c.jsxs("div",{className:"mt-auto pt-2 flex items-center gap-2",children:[c.jsx(RC,{id:`banner-${e.id}`,checked:f?.is_banner||!1,onCheckedChange:e=>g(t=>t?{...t,is_banner:!0===e}:null)}),c.jsx(Dl,{htmlFor:`banner-${e.id}`,className:"text-xs cursor-pointer",children:"Set as banner"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(vl,{type:"button",size:"sm",onClick:b,className:"flex-1",children:"Save"}),c.jsx(vl,{type:"button",size:"sm",variant:"outline",onClick:w,className:"flex-1",children:"Cancel"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),c.jsx(vl,{type:"button",size:"sm",variant:"ghost",onClick:()=>y(e),children:"Edit"})]}),e.description&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx(RC,{id:`banner-check-${e.id}`,checked:e.is_banner,onCheckedChange:()=>S(e.id,e.is_banner)}),c.jsx(Dl,{htmlFor:`banner-check-${e.id}`,className:"text-xs cursor-pointer",children:"Banner"})]})]})})]},e.id))})]})}function HI(e){return{id:e.id,code:e.code,name:e.name,description:e.description,email:e.email,phone:e.phone,website:e.website,address:e.address,city:e.city,country:e.country,logo:e.logo,tags:e.tags||[],created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class GI{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchOrganizers(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.organizers.replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(HI),pagination:l}}catch(t){throw t}}async searchOrganizers(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.endpoints.organizers.replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(HI)}catch(n){throw n}}async fetchOrganizerById(e){try{const t=this.endpoints.organizers.replace(/\/$/,"");return HI(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createOrganizer(e){try{return HI(await this.apiClient.post(this.endpoints.organizers,e,{requiresAuth:!0}))}catch(t){throw t}}async updateOrganizer(e,t){try{const n=this.endpoints.organizers.replace(/\/$/,"");return HI(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteOrganizer(e){try{const t=this.endpoints.organizers.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const KI=p.createContext(null);function WI({children:e,config:t}){const n=p.useMemo(()=>new GI(t),[t.apiClient,t.endpoints?.organizers]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(KI.Provider,{value:s,children:e})}function QI(){const e=p.useContext(KI);if(!e)throw new Error("useOrganizerService must be used within OrganizerProvider");return e.service}function YI(e,t){const{filter:n,pagination:s}=t||{};return Ys({queryKey:["organizers",n?.search,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchOrganizers({skip:t,limit:a,search:n?.search})},staleTime:3e5})}function XI({open:e,onOpenChange:t,onSubmit:n,show:s,title:a="Edit Show",maxWidth:r="720px"}){const i=Ua(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=$I(),[y,b]=p.useState([]),w=QI(),{data:S}=YI(w,{pagination:{page:1,pageSize:100}}),j=S?.data?.map(e=>({id:e.id,name:e.name}))||[],C=p.useMemo(()=>{if(s)return{name:s.name??"",organizer_id:s.organizer_id??void 0,started_date:s.started_date??void 0,ended_date:s.ended_date??void 0,note:s.note??void 0}},[s]);p.useEffect(()=>{if(!e||!s)return;(async()=>{try{const e=await v.fetchShowImages(s.id);b(e)}catch(e){}})()},[e,s,v]),p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const k=p.useMemo(()=>(e,t)=>({name:e.name,organizer_id:e.organizer_id||void 0,started_date:e.started_date||void 0,ended_date:e.ended_date||void 0,note:e.note||void 0,images:t.length>0?t:[]}),[]),N=()=>{f(!1),x(null),t(!1)},_={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&s){h(!0);try{const e=y.map(e=>({file_id:e.file_id,name:e.name,description:e.description,is_banner:e.is_banner})),t=k(g,e);await n(s.id,t),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},P={label:"Cancel",variant:"outline",disabled:u};return s?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:N,title:a,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:N,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsxs("div",{className:"space-y-6 mt-12",children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx(VI,{ref:o,defaultValues:C,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit",organizers:j},`${s.id}-${l}`)}),s&&c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm",i.paddingForm),children:c.jsx(qI,{showId:s.id,images:y,onImagesChange:b})})]})}),c.jsx(jE,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Show Update",description:g?c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:"Are you sure you want to update this show?"}):void 0,confirmAction:_,cancelAction:P})]}):null}function ZI(e,t){const{filter:n,pagination:s,enabled:a=!0,disableCache:r=!1}=t||{};return Ys({queryKey:["shows",n?.search,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchShows({skip:t,limit:a,search:n?.search})},enabled:a,staleTime:r?0:3e5})}function JI(e,t){return Ys({queryKey:["shows",t],queryFn:()=>t?e.fetchShowById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function eO(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateShow(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["shows"]}),t.invalidateQueries({queryKey:["shows",n.id]})}})}function tO({className:e,data:t,loading:n=!1,error:s=null,showMetadata:a=!1,editable:r=!0,onEdit:i,onDelete:o,onAddImage:l,onNavigateToInventory:d,customActions:u}){const[h,m]=p.useState("events"),f=$I(),[g,x]=p.useState([]),[v,y]=p.useState(!1),[b,w]=p.useState(null),[S,j]=p.useState(!1),[C,k]=p.useState(!1),[N,_]=p.useState(!1),[P,E]=p.useState(!1),[R,A]=p.useState(!1),[T,M]=p.useState(!1),[D,L]=p.useState(""),[F,I]=p.useState(!1),O=eO(f),z=hI(lI());p.useEffect(()=>{void 0!==t?.note&&L(t.note||"")},[t?.note]),p.useEffect(()=>{if(!t?.id)return;(async()=>{y(!0);try{const e=await f.fetchShowImages(t.id);x(e)}catch(e){}finally{y(!1)}})()},[t?.id,f]);const B=p.useCallback(async e=>{t?.id&&w(e)},[]),$=p.useCallback(async()=>{if(t?.id&&b){j(!0);try{await f.deleteShowImage(t.id,b);const e=g.filter(e=>e.id!==b);x(e),w(null)}catch(e){alert("Failed to delete image. Please try again.")}finally{j(!1)}}},[t?.id,b,g,f]),U=p.useCallback(e=>{e||w(null)},[]),V=p.useCallback(async(e,n)=>{if(t?.id)try{const s=!n,a=await f.updateShowImage(t.id,e,{is_banner:s}),r=g.map(t=>t.id===e?a:s&&t.is_banner?{...t,is_banner:!1}:t);x(r)}catch(s){alert("Failed to update banner status. Please try again.")}},[t?.id,g,f]),q=p.useCallback(()=>{i&&t?i(t):t&&E(!0)},[i,t]),H=p.useCallback(()=>{l&&t?l(t):t&&(m("images"),setTimeout(()=>{const e=document.getElementById("show-image-upload-input");e?.click()},100))},[l,t]),G=p.useCallback(()=>{o&&t?o(t):t&&k(!0)},[o,t]),K=p.useCallback(async()=>{if(t?.id){_(!0);try{await f.deleteShow(t.id),k(!1),window.location.href="/ticketing/shows"}catch(e){alert("Failed to delete show. Please try again.")}finally{_(!1)}}},[t?.id,f]),W=p.useCallback(async(e,t)=>{await O.mutateAsync({id:e,input:t}),E(!1)},[O]),Q=p.useCallback(async e=>{if(!t?.id)return;const n=Array.from(e.target.files||[]);if(0===n.length)return;M(!0);const s=[],a=[];for(const i of n){const e=i.name;try{const e=await QP.uploadImage(i),n={show_id:t.id,file_id:e.id,name:i.name,description:"",is_banner:!1},a={...await f.createShowImage(n),file_url:e.url};s.push(a)}catch(r){a.push(e)}}if(s.length>0){const e=[...g,...s];x(e)}if(a.length>0){const e=s.length,t=e>0?`Successfully uploaded ${e} image(s). ${a.length} image(s) failed to upload.`:`Failed to upload ${a.length} image(s). Please try again.`;alert(t)}M(!1),e.target.value=""},[t?.id,g,f]),Y=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()};if(n)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(s)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",s.message]})})});if(!t)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No show selected"})})});const X=a,Z=g.length>0,J=[{value:"events",label:"Events",icon:Ip},{value:"profile",label:"Overview",icon:_f},{value:"images",label:"Images"+(Z?` (${g.length})`:""),icon:Nf},{value:"note",label:"Notes",icon:pf}];X&&J.push({value:"metadata",label:"Metadata",icon:lf}),J.push({value:"audit",label:"Activity Log",icon:lf});const ee=[];return t&&(ee.push({id:"add-event",label:"Add Event",icon:c.jsx(hg,{className:"h-3.5 w-3.5"}),onClick:()=>A(!0)}),r&&t&&ee.push({id:"edit",label:"Edit",icon:c.jsx(Tg,{className:"h-3.5 w-3.5"}),onClick:q}),ee.push({id:"add-image",label:"Add Image",icon:c.jsx(Qg,{className:"h-3.5 w-3.5"}),onClick:H})),t&&ee.push({id:"delete",label:"Delete",icon:c.jsx(Hg,{className:"h-3.5 w-3.5"}),onClick:G}),c.jsxs(bl,{className:al("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10 overflow-hidden",children:g.find(e=>e.is_banner)?c.jsx("img",{src:g.find(e=>e.is_banner)?.file_url,alt:"Show Banner",className:"h-full w-full object-cover"}):c.jsx(_f,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:t.name||"Untitled Show"}),c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code,c.jsx(HD,{value:t.code||"",variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]})]})]}),c.jsx(kA,{actions:ee,maxVisibleActions:2,customActions:u?.(t),size:"sm"})]}),c.jsx(HM,{tabs:J,value:h,onValueChange:e=>m(e),children:e=>c.jsxs("div",{className:"mt-0",children:["events"===e&&t?.id&&c.jsx("div",{className:"space-y-6",children:c.jsx(cO,{showId:t.id,onNavigateToInventory:d})}),"events"===e&&!t?.id&&c.jsx("div",{className:"space-y-6",children:c.jsx(bl,{children:c.jsx("div",{className:"p-4",children:c.jsx("p",{className:"text-sm text-muted-foreground",children:"Please select a show to view events."})})})}),"profile"===e&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(KM,{showBorder:!0,children:c.jsxs(QM,{columns:2,icon:_f,title:"General Information",className:"mt-0 mb-0",children:[c.jsx(WM,{label:"Organizer",value:t.organizer?`${t.organizer.name} (${t.organizer.code})`:t.organizer_id,hideIfEmpty:!1}),c.jsx(WM,{label:"Start Date",value:t.started_date,render:e=>Y(e),hideIfEmpty:!1}),c.jsx(WM,{label:"End Date",value:t.ended_date,render:e=>Y(e),hideIfEmpty:!1})]})}),c.jsx(KM,{showBorder:!0,children:c.jsxs(QM,{columns:2,icon:lf,title:"System Information",className:"mt-0 mb-0",children:[c.jsx(WM,{label:"Created",value:t.created_at,render:e=>Y(e),hideIfEmpty:!1}),c.jsx(WM,{label:"Last Updated",value:t.updated_at,render:e=>Y(e),hideIfEmpty:!1})]})})]}),"images"===e&&c.jsx(OD,{images:g.map(e=>({id:e.id,url:e.file_url,name:e.name,isBanner:e.is_banner})),isLoading:v,isUploading:T,onUpload:Q,onDelete:e=>B(e.id),onToggleBanner:e=>V(e.id,e.isBanner??!1),readOnly:!r,renderOverlay:(e,t)=>c.jsxs(c.Fragment,{children:[e.isBanner&&c.jsxs("div",{className:"absolute top-1 left-1 bg-primary text-primary-foreground px-2 py-0.5 rounded text-[10px] font-bold flex items-center gap-1 shadow-md z-50 border border-primary/20",children:[c.jsx(Lg,{className:"h-3 w-3 fill-current"}),c.jsx("span",{children:"Banner"})]}),!!r&&c.jsxs("div",{className:al("absolute bottom-0 right-0 flex items-center justify-end gap-1 p-1 transition-opacity duration-200",t?"opacity-100":"opacity-0 pointer-events-none"),children:[c.jsx(vl,{type:"button",variant:"secondary",size:"sm",onClick:t=>{t.stopPropagation(),V(e.id,e.isBanner??!1)},className:"h-8 w-8 p-0 bg-background hover:bg-background border border-border shadow-md pointer-events-auto",title:e.isBanner?"Unset Banner":"Set as Banner",children:c.jsx(Lg,{className:al("h-4 w-4",e.isBanner&&"fill-current")})}),c.jsx(vl,{type:"button",variant:"destructive",size:"sm",onClick:t=>{t.stopPropagation(),B(e.id)},className:"h-8 w-8 p-0 bg-destructive hover:bg-destructive text-destructive-foreground opacity-100 hover:opacity-100 shadow-md pointer-events-auto",title:"Delete Image",children:c.jsx(Hg,{className:"h-4 w-4"})})]})]})}),"note"===e&&c.jsx("div",{className:"space-y-4",children:c.jsx(YM,{value:D,onChange:L,onSave:async()=>{if(t?.id){I(!0);try{await O.mutateAsync({id:t.id,input:{note:D}})}catch(e){alert("Failed to save note. Please try again."),L(t?.note||"")}finally{I(!1)}}},isSaving:F,disabled:F,editable:r,description:"Add or edit notes about this show",maxLength:2e3})}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(bl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})}),"audit"===e&&t?.id&&c.jsx("div",{className:"space-y-6",children:c.jsx(lE,{entityType:"show",entityId:t.id,title:"Show Activity",description:"Complete audit trail for this show including all changes, access, and system events"})})]})})]}),c.jsx(jE,{open:!!b,onOpenChange:U,title:"Delete Image",description:"Are you sure you want to delete this image? This action cannot be undone.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:$,loading:S,disabled:S},cancelAction:{label:"Cancel",onClick:()=>{w(null)},disabled:S}}),c.jsx(jE,{open:C,onOpenChange:e=>{k(e)},title:"Delete Show",description:"Are you sure you want to delete this show? This action cannot be undone.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmAction:{label:"Delete",variant:"destructive",onClick:K,loading:N,disabled:N},cancelAction:{label:"Cancel",onClick:()=>{k(!1)},disabled:N}}),t&&c.jsx(XI,{open:P,onOpenChange:E,onSubmit:W,show:t,title:"Edit Show"}),t?.id&&c.jsx(DI,{open:R,onOpenChange:A,showId:t.id,onSubmit:async e=>{await z.mutateAsync(e),A(!1)}})]})}function nO({images:e=[],onImagesChange:t,className:n,disabled:s=!1}){const[a,r]=p.useState(e),[i,o]=p.useState(!1),l=p.useCallback(async e=>{const n=Array.from(e.target.files||[]);if(0===n.length)return;o(!0);const s=[];for(const t of n){const e=URL.createObjectURL(t),n={id:`${Date.now()}-${Math.random()}`,file:t,name:t.name,description:"",is_banner:!1,preview:e};s.push(n)}const i=[...a,...s];r(i),t?.(i),o(!1),e.target.value=""},[a,t]),d=p.useCallback(e=>{const n=a.find(t=>t.id===e);n?.preview&&URL.revokeObjectURL(n.preview);const s=a.filter(t=>t.id!==e);r(s),t?.(s)},[a,t]),u=p.useCallback(e=>{const n=a.find(t=>t.id===e);if(!n)return;const s=!n.is_banner,i=a.map(t=>t.id===e?{...t,is_banner:s}:s&&t.is_banner?{...t,is_banner:!1}:t);r(i),t?.(i)},[a,t]);return c.jsxs("div",{className:al("space-y-4",n),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Show Images"}),c.jsxs(Dl,{htmlFor:"pending-image-upload",className:"cursor-pointer",children:[c.jsx(vl,{type:"button",variant:"outline",size:"sm",disabled:s||i,asChild:!0,children:c.jsx("span",{children:i?c.jsxs(c.Fragment,{children:[c.jsx(If,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Qg,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})}),c.jsx("input",{id:"pending-image-upload",type:"file",accept:"image/*",multiple:!0,onChange:l,className:"hidden",disabled:s||i,"aria-label":"Upload show images"})]})]}),0===a.length?c.jsxs(bl,{className:"p-8 text-center border-dashed",children:[c.jsx(Nf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:'No images selected yet. Click "Upload Images" to add images.'})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>c.jsxs(bl,{className:"overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"relative aspect-video bg-muted",children:[e.preview?c.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx(Nf,{className:"h-12 w-12 text-muted-foreground"})}),e.is_banner&&c.jsxs("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs font-semibold flex items-center gap-1",children:[c.jsx(Lg,{className:"h-3 w-3"}),"Banner"]}),c.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:c.jsx(vl,{type:"button",variant:"destructive",size:"sm",onClick:()=>d(e.id),className:"h-6 w-6 p-0",disabled:s,children:c.jsx(ax,{className:"h-3 w-3"})})})]}),c.jsxs("div",{className:"p-4 space-y-2 flex flex-col flex-1",children:[c.jsx("div",{className:"flex-1",children:c.jsx("h4",{className:"font-medium text-sm truncate",children:e.name})}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx(RC,{id:`banner-check-${e.id}`,checked:e.is_banner,onCheckedChange:()=>u(e.id),disabled:s}),c.jsx(Dl,{htmlFor:`banner-check-${e.id}`,className:"text-xs cursor-pointer",children:"Banner"})]})]})]},e.id))})]})}function sO({open:e,onOpenChange:t,onSubmit:n,title:s="Create Show",maxWidth:a="720px"}){const r=Ua(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null),[x,v]=p.useState([]),[y,b]=p.useState(new Map),w=$I(),S=QI(),{data:j}=YI(S,{pagination:{page:1,pageSize:100}}),C=j?.data?.map(e=>({id:e.id,name:e.name}))||[];p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const k=p.useMemo(()=>(e,t)=>({name:e.name,organizer_id:e.organizer_id||void 0,started_date:e.started_date||void 0,ended_date:e.ended_date||void 0,note:e.note||void 0,images:t.length>0?t:void 0}),[]),N=()=>{m(!1),g(null),x.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),v([]),b(new Map),t(!1)},_={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const t=[];for(const n of x)try{const e=y.get(n.id);if(e)t.push({file_id:e.file_id,name:n.name,description:n.description||void 0,is_banner:n.is_banner});else{const e=await QP.uploadImage(n.file);b(t=>{const s=new Map(t);return s.set(n.id,{file_id:e.id,url:e.url}),s}),t.push({file_id:e.id,name:n.name,description:n.description||void 0,is_banner:n.is_banner})}}catch(e){}const s=k(f,t);await w.createShow(s),x.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),await n(s),g(null),v([]),b(new Map),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},P={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:N,title:s,maxWidth:a,loading:d,formSelector:i,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{g(null),l(e=>e+1)},showCancelButton:!0,onCancel:N,showSubmitButton:!0,onSubmit:()=>{i.current&&i.current.requestSubmit()},children:c.jsxs("div",{className:"space-y-6 mt-12",children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm",r.paddingForm),children:c.jsx(VI,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create",organizers:C},o)}),c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm",r.paddingForm),children:c.jsx(nO,{images:x,onImagesChange:v,disabled:d})})]})}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Show Creation",description:f?c.jsx("p",{className:al("mb-3",r.textSizeSmall),children:"Are you sure you want to create this show?"}):void 0,confirmAction:_,cancelAction:P})]})}function aO({onNavigateToShow:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:s}){const a=$I(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(null),v=f.useRef(!1);f.useEffect(()=>{const e=v.current;n&&!e&&u(!0),v.current=!!n},[n]);const{data:y,isLoading:b,error:w}=ZI(a,{filter:r,pagination:o}),S=function(e){const t=Vs();return Xs({mutationFn:t=>e.createShow(t),onSuccess:()=>{t.invalidateQueries({queryKey:["shows"]})}})}(a),j=eO(a),C=y?.data??[],k=y?.pagination,N=p.useCallback(()=>{t&&t(),u(!0)},[t]),_=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),P=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),E=p.useCallback(e=>{l({page:1,pageSize:e})},[]),R=p.useCallback(async e=>{try{await S.mutateAsync(e),Ek({title:"Success",description:"Show created successfully"}),u(!1),s?.()}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to create show",variant:"destructive"}),wW}},[S,s]),A=p.useCallback(async(e,t)=>{try{await j.mutateAsync({id:e,input:t}),Ek({title:"Success",description:"Show updated successfully"}),m(!1),x(null)}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to update show",variant:"destructive"}),wW}},[j]),T=p.useCallback(t=>{e?.(t.id)},[e]),M=p.useMemo(()=>{if(k)return{page:o.page,pageSize:o.pageSize,total:k.total,totalPages:k.totalPages}},[o,k]);return c.jsxs(c.Fragment,{children:[c.jsx(FI,{shows:C,loading:b,error:w,onShowClick:T,onCreate:N,onSearch:_,pagination:M,onPageChange:P,onPageSizeChange:E}),c.jsx(sO,{open:d,onOpenChange:e=>{u(e),e||s?.()},onSubmit:R}),c.jsx(XI,{open:h&&!!g,onOpenChange:e=>{m(e),e||x(null)},onSubmit:A,show:g})]})}function rO({venueId:e,onNavigateToDesigner:t,onEdit:n}){const s=RI(),{data:a,isLoading:r,error:i}=AI(s,e),o=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteLayout(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["layouts"]})}})}(s),l=function(e){const t=Vs();return Xs({mutationFn:t=>e.cloneLayout(t.id),onSuccess:e=>{t.invalidateQueries({queryKey:["layouts","venue",e.venue_id]})}})}(s),[d,u]=p.useState(!1),[h,m]=p.useState(null),f=async e=>{m(e),u(!0)},g=e=>{l.mutate(e,{onSuccess:e=>{Ek({title:`Layout "${e.name}" created.`})},onError:e=>{Ek({title:"Failed to clone layout",description:e instanceof Error?e.message:void 0,variant:"destructive"})}})},x=p.useMemo(()=>[{id:"designer",icon:c.jsx(jg,{className:"h-4 w-4"}),title:"Open layout designer",onClick:e=>{t&&t(e.id)},show:!!t},{id:"edit",icon:c.jsx(Tg,{className:"h-4 w-4"}),title:"Edit layout info",onClick:e=>{n&&n(e)},show:!!n},{id:"clone",icon:c.jsx(rf,{className:"h-4 w-4"}),title:"Clone layout",onClick:g,show:!0},{id:"delete",icon:c.jsx(Hg,{className:"h-4 w-4"}),title:"Delete layout",onClick:e=>f(e.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",show:!0}],[t,n,f,g]);return r?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx(If,{className:"h-6 w-6 animate-spin text-muted-foreground"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading layouts..."})]})}):i?c.jsx(bl,{className:"p-6",children:c.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[c.jsx("div",{className:"rounded-full bg-destructive/10 p-3",children:c.jsx(Vf,{className:"h-5 w-5 text-destructive"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-destructive",children:"Error loading layouts"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i instanceof Error?i.message:"Unknown error"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-3",children:a&&0!==a.length?c.jsx("div",{className:"space-y-2",children:a.map(e=>{return c.jsxs(bP,{className:al("group",!e.is_active&&"opacity-60"),children:[c.jsx(wP,{children:c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(Df,{className:"h-5 w-5 text-primary"})})}),c.jsx(SP,{className:"min-w-0",children:c.jsx("div",{className:"flex items-start justify-between gap-2",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs(jP,{className:"flex items-center gap-2",children:[c.jsx("span",{className:"truncate",children:e.name}),e.design_mode&&c.jsx(mC,{variant:"secondary",className:"text-xs shrink-0",children:(t=e.design_mode,"seat-level"===t?"Seat Level":"section-level"===t?"Section Level":"Not Set")}),!e.is_active&&c.jsx(mC,{variant:"outline",className:"text-xs shrink-0",children:"Inactive"})]}),e.description&&c.jsx(CP,{className:"line-clamp-2",children:e.description}),!e.description&&c.jsxs(CP,{className:"text-xs",children:["Created"," ",new Date(e.created_at).toLocaleDateString()]})]})})}),c.jsx(NA,{item:e,actions:x})]},e.id);var t})}):c.jsx(bl,{className:"p-12",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[c.jsx("div",{className:"rounded-full bg-muted p-4",children:c.jsx(Df,{className:"h-8 w-8 text-muted-foreground"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"No layouts yet"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:'Click "Add Layout" in the header to create your first layout'})]})]})})}),c.jsx(jE,{open:d,onOpenChange:u,title:"Delete Layout",description:"Are you sure you want to delete this layout? This action cannot be undone and will remove all associated seats.",confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmTextPlaceholder:'Type "delete" to confirm',confirmAction:{label:"Delete",variant:"destructive",onClick:async()=>{if(h)try{await o.mutateAsync(h),u(!1),m(null)}catch(e){}},loading:o.isPending},cancelAction:{label:"Cancel"}})]})}function iO({eventSeats:e,isLoading:t=!1,onRefresh:n,className:s}){const[a,r]=p.useState(""),[i,o]=p.useState(new Set),[l,d]=p.useState(""),[u,h]=p.useState(new Set),[m,f]=p.useState(""),g=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{e.section_name&&t.add(e.section_name)}),Array.from(t).sort()},[e]),x=p.useMemo(()=>{if(!l.trim())return g;const e=l.toLowerCase();return g.filter(t=>t.toLowerCase().includes(e))},[g,l]),v=(e,t)=>"held"===e||"blocked"===e?e:t||e,y=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{const n=v(e.status,e.ticket_status);n&&t.add(String(n))}),Array.from(t).sort((e,t)=>e.localeCompare(t))},[e]),b=p.useMemo(()=>{if(!m.trim())return y;const e=m.toLowerCase();return y.filter(t=>t.toLowerCase().includes(e))},[y,m]),w=p.useMemo(()=>e.filter(e=>{if(i.size>0&&e.section_name&&!i.has(e.section_name))return!1;if(u.size>0){const t=v(e.status,e.ticket_status);if(!t||!u.has(String(t)))return!1}if(!a.trim())return!0;const t=a.toLowerCase();return e.section_name?.toLowerCase().includes(t)||e.row_name?.toLowerCase().includes(t)||e.seat_number?.toLowerCase().includes(t)||e.ticket_number?.toLowerCase().includes(t)||!1}),[e,i,u,a]),S=p.useMemo(()=>{const e=new Map;w.forEach(t=>{const n=t.section_name||"Unknown Section";e.has(n)||e.set(n,[]),e.get(n).push(t)});return Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0]))},[w]),j=e=>{if(e.ticket_status){switch(String(e.ticket_status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"CONFIRMED":return"border-l-4 border-l-blue-500";case"CANCELLED":return"border-l-4 border-l-red-500";case"USED":return"border-l-4 border-l-gray-500";case"TRANSFERRED":return"border-l-4 border-l-purple-500"}}switch(String(e.status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"SOLD":return"border-l-4 border-l-blue-500";case"HELD":return"border-l-4 border-l-purple-500";case"BLOCKED":return"border-l-4 border-l-red-500";default:return"border-l-4 border-l-gray-500"}},C=(e,t)=>{const n=v(e,t),s=String(n).toUpperCase().trim();return c.jsx(mC,{variant:{AVAILABLE:"outline",RESERVED:"outline",SOLD:"default",CONFIRMED:"default",CANCELLED:"destructive",USED:"secondary",TRANSFERRED:"outline",HELD:"outline",BLOCKED:"destructive"}[s]||"outline",className:{AVAILABLE:"bg-green-50 text-green-700 border-green-200",RESERVED:"bg-yellow-50 text-yellow-700 border-yellow-200",SOLD:"bg-blue-50 text-blue-700 border-blue-200",CONFIRMED:"bg-blue-50 text-blue-700 border-blue-200",CANCELLED:"bg-red-50 text-red-700 border-red-200",USED:"bg-gray-50 text-gray-700 border-gray-200",TRANSFERRED:"bg-purple-50 text-purple-700 border-purple-200",HELD:"bg-purple-50 text-purple-700 border-purple-200",BLOCKED:"bg-red-50 text-red-700 border-red-200"}[s]||"bg-gray-50 text-gray-700 border-gray-200",children:n})};return t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading seats..."})}):0===e.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx("p",{className:"text-muted-foreground mb-4",children:"No seats found"}),n&&c.jsxs(vl,{onClick:n,variant:"outline",size:"sm",children:[c.jsx(fg,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}):c.jsxs("div",{className:al("space-y-4 min-w-0",s),children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-wrap",children:[c.jsxs("div",{className:"relative flex-1 min-w-0 max-w-xs",children:[c.jsx(Sg,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none z-10"}),c.jsx(kl,{placeholder:"Search seats...",value:a,onChange:e=>r(e.target.value),className:"pl-8 h-8 text-sm min-w-0"})]}),c.jsx(NP,{items:x,selectedItems:i,searchQuery:l,onSearchQueryChange:d,onToggleItem:e=>{const t=new Set(i);t.has(e)?t.delete(e):t.add(e),o(t)},onClear:()=>{o(new Set)},label:"Sections",searchPlaceholder:"Search sections...",emptyText:"No sections found."}),c.jsx(NP,{items:b,selectedItems:u,searchQuery:m,onSearchQueryChange:f,onToggleItem:e=>{const t=new Set(u);t.has(e)?t.delete(e):t.add(e),h(t)},onClear:()=>{h(new Set)},label:"Status",searchPlaceholder:"Search status...",emptyText:"No status found."}),n&&c.jsx(vl,{onClick:n,variant:"outline",size:"sm",className:"flex-shrink-0 h-7 px-2",children:c.jsx(fg,{className:"h-3 w-3"})})]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",w.length," of ",e.length," seats"]}),c.jsx("div",{className:"space-y-4 min-w-0",children:S.map(([e,t])=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b pb-2 pt-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-semibold text-foreground",children:e}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.length," seat",1!==t.length?"s":""]})]})}),c.jsx("div",{className:"space-y-2 pl-2",children:t.map(e=>{const t=e.row_name&&e.seat_number?`${e.row_name} ${e.seat_number}`:e.seat_id?`Seat ${e.seat_id.slice(0,8)}`:"N/A",n=void 0!==e.ticket_price&&null!==e.ticket_price?`Price: $${e.ticket_price.toFixed(2)}`:null,s=[e.broker_id&&`Broker: ${e.broker_id}`,e.ticket_number&&`Ticket: ${e.ticket_number}`,n].filter(Boolean).join("  ");return c.jsx(bP,{className:al(j(e),"min-w-0"),children:c.jsx(SP,{className:"min-w-0",children:c.jsx("div",{className:"flex items-start justify-between gap-4 min-w-0",children:c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(jP,{className:"truncate",children:t}),C(e.status,e.ticket_status)]}),s&&c.jsx(CP,{className:"truncate",children:s})]})})})},e.id)})})]},e))})]})}function oO({className:e,data:t,loading:n=!1,error:s=null}){const[a,r]=p.useState("information"),i=$I(),o=RI(),l=lI(),{data:d}=JI(i,t?.show_id||null),{data:u}=(h=o,Ys({queryKey:["layouts",m=t?.layout_id||null],queryFn:()=>h.fetchLayoutById(m),enabled:!!m}));var h,m;const{data:f,isLoading:g,refetch:x}=mI(l,t?.id,{skip:0,limit:1e3}),v=f?.data||[],y=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},b=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`},w=e=>{switch(e){case tI.SEAT_SETUP:return"Seat Setup";case tI.TICKET_IMPORT:return"Ticket Import";default:return e}},S=e=>{if(null==e)return"N/A";if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){const t=e.trim();if(!t)return"N/A";const n=new Date(t);return Number.isNaN(n.getTime())?t:n.toLocaleString()}if("number"==typeof e||"boolean"==typeof e)return String(e);try{return JSON.stringify(e)}catch{return String(e)}};if(n)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(s)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",s.message]})})});if(!t)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No event selected"})})});const j=[{value:"information",label:"Information",icon:_f},{value:"inventory-view",label:"Inventory",icon:mf}];return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{children:c.jsx(HM,{tabs:j,value:a,onValueChange:e=>r(e),children:e=>c.jsxs("div",{className:"mt-0",children:[c.jsxs("div",{className:al("space-y-6","information"!==e&&"hidden"),children:[c.jsxs(QM,{title:"Event Information",columns:2,className:"pb-6 border-b",children:[c.jsx(WM,{label:"Start Date & Time",value:y(t.start_dt),icon:Ip}),c.jsx(WM,{label:"Duration",value:b(t.duration_minutes),icon:sf})]}),c.jsxs(QM,{title:"Location & Configuration",columns:2,className:"pb-6 border-b",children:[c.jsx(WM,{label:"Layout",value:u?.name||(t.layout_id?S(t.layout_id):null)}),c.jsx(WM,{label:"Show",value:d?.name||d?.code||S(t.show_id)}),c.jsx(WM,{label:"Configuration Type",value:w(t.configuration_type),icon:jg})]}),c.jsxs(QM,{title:"Timeline",columns:2,className:"pb-6 border-b",children:[c.jsx(WM,{label:"Created",value:t.created_at?y(t.created_at):null}),c.jsx(WM,{label:"Last Updated",value:t.updated_at?y(t.updated_at):null})]}),c.jsx(QM,{title:"System Metadata",icon:lf,columns:2,className:"pt-6 border-t mt-6",children:c.jsx(WM,{label:"Tenant ID",value:S(t.tenant_id),valueClassName:"font-mono"})})]}),c.jsx("div",{className:al("inventory-view"!==e&&"hidden"),children:c.jsx(iO,{eventSeats:v,isLoading:g,onRefresh:x})})]})})})})}function lO({open:e,onOpenChange:t,data:n,loading:s,error:a}){return c.jsx(uP,{open:e,onOpenChange:t,children:c.jsxs(fP,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0",style:{width:"600px",maxWidth:"740px"},children:[c.jsx(gP,{className:"px-6 py-2 ml-6 border-b",children:c.jsx(vP,{children:n?.title||"Event Details"})}),c.jsx("div",{className:"flex-1 overflow-y-auto pl-6 pr-8",children:c.jsx(oO,{data:n,loading:s,error:a,className:"border-0 shadow-none p-0"})})]})})}function cO({showId:e,className:t,onNavigateToEvent:n,onNavigateToInventory:s}){const a=lI(),[r,i]=p.useState(1),[o,l]=p.useState(50),[d,u]=p.useState(""),[h,m]=p.useState(!1),[f,g]=p.useState(!1),[x,v]=p.useState(null),[y,b]=p.useState(!1),[w,S]=p.useState(null),{data:j,isLoading:C,error:k}=cI(a,{filter:{show_id:e,search:d||void 0},pagination:{page:r,pageSize:o,total:0,totalPages:0}}),N=hI(a),_=function(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateEvent(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events"]}),t.invalidateQueries({queryKey:["events",n.id]})}})}(a),P=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteEvent(t),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]})}})}(a),E=p.useCallback(()=>{m(!0)},[]),R=p.useCallback(async e=>{await N.mutateAsync(e),m(!1)},[N]),A=p.useCallback(e=>{v(e),g(!0)},[]),T=p.useCallback(async(e,t)=>{await _.mutateAsync({id:e,input:t}),g(!1),v(null)},[_]),M=p.useCallback(async e=>{await P.mutateAsync(e.id)},[P]),D=p.useCallback(async(e,t)=>{await _.mutateAsync({id:e.id,input:{status:t}})},[_]),L=p.useCallback(e=>{S(e.id),b(!0),n&&n(e.id)},[n]),F=p.useCallback(e=>{i(e)},[]),I=p.useCallback(e=>{l(e),i(1)},[]),O=p.useCallback(e=>{u(e),i(1)},[]),z=p.useCallback(()=>{m(!1)},[]),B=p.useCallback(()=>{g(!1),v(null)},[]),$=p.useCallback(()=>{b(!1),S(null)},[]),U=p.useCallback(e=>{s?s(e.id):window.location.href=`/ticketing/events/${e.id}/inventory`},[s]),{data:V,isLoading:q,error:H}=dI(a,w);return c.jsxs("div",{className:t,children:[c.jsx(xI,{events:j?.data||[],loading:C,error:k,pagination:j?.pagination,onCreate:E,onEdit:A,onDelete:M,onManageInventory:U,onStatusChange:D,onEventClick:L,onSearch:O,onPageChange:F,onPageSizeChange:I,isDeleting:P.isPending}),c.jsx(DI,{open:h,onOpenChange:z,onSubmit:R,showId:e}),x&&c.jsx(LI,{open:f,onOpenChange:B,onSubmit:T,event:x}),c.jsx(lO,{open:y,onOpenChange:$,data:V||void 0,loading:q,error:H})]})}function dO({open:e,onClose:t,onSubmit:n,layoutSeats:s,sections:a,existingEventSeats:r=[],loading:i=!1,designMode:o="seat-level",selectedSectionId:l}){const[d,u]=p.useState("all"),[h,m]=p.useState(new Set),[f,g]=p.useState(new Set),[x,v]=p.useState(""),[y,b]=p.useState(1),[w,S]=p.useState(new Set),j=50,C="section-level"===o?"per_section":"same",{register:k,handleSubmit:N,watch:_,control:P,getValues:E,setValue:R,formState:{errors:A},reset:T}=uA({defaultValues:{defaultPrice:"0",generateTicketCodes:!1,pricingMode:C,sectionPricing:[],seatPricing:[],sectionSelection:"all",selectedSectionIds:[]}}),{fields:M,append:D,remove:L}=dA({control:P,name:"sectionPricing"}),{fields:F,append:I,remove:O}=dA({control:P,name:"seatPricing"}),z=_("defaultPrice"),B=_("generateTicketCodes"),$=_("pricingMode"),U=p.useMemo(()=>"section-level"===o&&l&&a.some(e=>e.id===l)?a.filter(e=>e.id===l):a,[a,o,l]),V=p.useMemo(()=>{const e=new Map;return U.forEach(t=>{e.set(t.id,t.name)}),e},[U]),q=p.useMemo(()=>{const e=new Set,t=new Set;return r.forEach(n=>{if(n.seat_id&&e.add(n.seat_id),n.section_name&&n.row_name&&n.seat_number){const e=`${n.section_name}|${n.row_name}|${n.seat_number}`;t.add(e)}}),{seatIdSet:e,locationSet:t}},[r]),H=p.useMemo(()=>"section-level"===o&&l&&s.some(e=>e.section_id===l)?s.filter(e=>e.section_id===l):s,[s,o,l]),G=p.useMemo(()=>H.filter(e=>{if(e.id&&q.seatIdSet.has(e.id))return!1;const t=V.get(e.section_id);if(t&&e.row&&e.seat_number){const n=`${t}|${e.row}|${e.seat_number}`;if(q.locationSet.has(n))return!1}return!0}),[H,q,V]),K=p.useMemo(()=>G.filter(e=>{if("include"===d&&h.size>0){if(!h.has(e.section_id))return!1}else if("exclude"===d&&h.size>0&&h.has(e.section_id))return!1;return!0}),[G,d,h]),W=p.useMemo(()=>{const e=new Map;return G.forEach(t=>{const n=e.get(t.section_id);n?n.count+=1:e.set(t.section_id,{id:t.section_id,count:1})}),Array.from(e.entries()).map(([e,t])=>({sectionId:e,sectionName:V.get(e)||"Unknown",count:t.count})).sort((e,t)=>e.sectionName.localeCompare(t.sectionName))},[G,V]),Q=p.useMemo(()=>{const e=new Map;return K.forEach(t=>{const n=e.get(t.section_id);n?n.count+=1:e.set(t.section_id,{id:t.section_id,count:1})}),Array.from(e.entries()).map(([e,t])=>({sectionId:e,sectionName:V.get(e)||"Unknown",count:t.count})).sort((e,t)=>e.sectionName.localeCompare(t.sectionName))},[K,V]),Y=H.length,X=K.length,Z=Y-X,J=X>0,ee=p.useCallback(e=>{if(!x.trim())return e;const t=x.toLowerCase().trim();return e.filter(e=>`${e.row?.toLowerCase()||""} ${e.seat_number?.toLowerCase()||""} ${V.get(e.section_id)?.toLowerCase()||""}`.includes(t))},[x,V]),te=p.useCallback(e=>{const t=(y-1)*j,n=t+j;return e.slice(t,n)},[y,j]),ne=p.useMemo(()=>{const e=new Map;return K.forEach(t=>{const n=e.get(t.section_id)||[];n.push(t),e.set(t.section_id,n)}),e},[K]);p.useEffect(()=>{if(e){const e="section-level"===o?"per_section":"same",t="section-level"===o&&l,n=t?"include":"all",s=t&&l?new Set([l]):new Set;T({defaultPrice:"0",generateTicketCodes:!1,pricingMode:e,sectionPricing:[],seatPricing:[],sectionSelection:n,selectedSectionIds:t&&l?[l]:[]}),u(n),m(s),g(new Set),v(""),b(1),S(new Set)}},[e,o,l]),p.useEffect(()=>{e&&"section-level"===o&&"per_section"===$&&0===M.length&&Q.forEach(e=>{D({section_id:e.sectionId,price:z||"0"})})},[e,o,$,Q]),p.useEffect(()=>{if("exclude"===d&&"per_section"===$&&h.size>0){const e=[];M.forEach((t,n)=>{h.has(t.section_id)&&e.push(n)}),e.reverse().forEach(e=>{L(e)})}},[d,h,$]);const se=e=>{"per_section"===e&&0===M.length&&Q.forEach(e=>{D({section_id:e.sectionId,price:z||"0"})})},ae=e=>{const t=F.find(t=>t.seat_id===e.id);if(t)return t.price;if("per_section"===$){const t=M.find(t=>t.section_id===e.section_id);if(t)return t.price}return z||"0"},re=(e,t)=>{const n=F.findIndex(t=>t.seat_id===e);n>=0?R(`seatPricing.${n}.price`,t,{shouldValidate:!0,shouldDirty:!0}):I({seat_id:e,price:t})},ie=e=>{const t=F.findIndex(t=>t.seat_id===e);t>=0&&O(t)};return c.jsx(SE,{open:e,onClose:t,title:J?`Add ${X} Missing Seats`:"Initialize Event Seats",loading:i,onSubmit:N(async e=>{const t={defaultPrice:parseFloat(e.defaultPrice)||0,generateTicketCodes:e.generateTicketCodes,pricingMode:e.pricingMode,sectionPricing:"per_section"===e.pricingMode?e.sectionPricing.map(e=>({section_id:e.section_id,price:parseFloat(e.price)||0})):void 0,seatPricing:e.seatPricing.length>0?e.seatPricing.map(e=>({seat_id:e.seat_id,price:parseFloat(e.price)||0})):void 0,includedSectionIds:"include"===d&&h.size>0?Array.from(h):void 0,excludedSectionIds:"exclude"===d&&h.size>0?Array.from(h):void 0};await n(t)}),showCancelButton:!0,showSubmitButton:!0,showClearButton:!1,maxWidth:"1200px",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx(bl,{className:"p-4 bg-blue-50 border-blue-200",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(_f,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:J?"Add Seats to Event":"Initialize Seats from Layout"}),c.jsx("p",{className:"text-sm text-blue-800",children:J?c.jsxs(c.Fragment,{children:["There ",1===X?"is":"are"," ",X," seat",1!==X?"s":""," ","in the layout that"," ",1===X?"hasn't":"haven't"," been added to this event yet.",Z>0&&c.jsxs(c.Fragment,{children:[" ",Z," seat",1!==Z?"s are":" is"," already assigned."]})]}):c.jsxs(c.Fragment,{children:["This will create ",Y," event seat",1!==Y?"s":""," from the layout seats. You can set pricing per section and configure ticket generation."]})})]})]})}),c.jsxs(bl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Seat Summary"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Total Layout Seats:"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(mC,{variant:"outline",className:"text-xs",children:Y})})]}),J&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Already Assigned:"}),c.jsx(mC,{variant:"outline",children:Z})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[c.jsx(hg,{className:"h-4 w-4 text-green-600"}),"Seats to Add:"]}),c.jsx(mC,{className:"bg-green-600 text-white",children:X})]})]}),c.jsxs("div",{className:"border-t pt-2",children:[c.jsx("p",{className:"text-sm font-medium mb-2",children:J?"Missing Seats by Section:":"Seats by Section:"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Q.map(({sectionId:e,sectionName:t,count:n})=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground",children:[t,":"]}),c.jsx("span",{className:"font-medium",children:n})]},e))})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[!("section-level"===o&&l)&&c.jsxs(bl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-4",children:"Section Selection"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{children:"Select Sections"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"sectionSelection",value:"all",checked:"all"===d,onChange:()=>{u("all"),m(new Set),"per_section"===$&&(M.forEach(()=>{L(0)}),Q.forEach(e=>{D({section_id:e.sectionId,price:z||"0"})}))},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"All Sections"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"sectionSelection",value:"include",checked:"include"===d,onChange:()=>{u("include"),"per_section"===$&&M.forEach(()=>{L(0)})},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Include Specific Sections"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"sectionSelection",value:"exclude",checked:"exclude"===d,onChange:()=>{u("exclude"),"per_section"===$&&h.size>0&&h.forEach(e=>{const t=M.findIndex(t=>t.section_id===e);t>=0&&L(t)})},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Exclude Specific Sections"})]})]})]}),("include"===d||"exclude"===d)&&c.jsx("div",{className:"border rounded-lg p-3 max-h-48 overflow-y-auto",children:W.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:W.map(({sectionId:e,sectionName:t,count:n})=>{const s="exclude"===d&&h.has(e);return c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-muted "+(s?"opacity-50":""),children:[c.jsx("input",{type:"checkbox",checked:h.has(e),onChange:()=>(e=>{const t=new Set(h);if(t.has(e))t.delete(e),"exclude"===d&&"per_section"===$&&Q.find(t=>t.sectionId===e)&&M.findIndex(t=>t.section_id===e)<0&&D({section_id:e,price:z||"0"});else if(t.add(e),"exclude"===d&&"per_section"===$){const t=M.findIndex(t=>t.section_id===e);t>=0&&L(t)}m(t)})(e),className:"h-4 w-4"}),c.jsxs("span",{className:"text-sm",children:[t," (",n," seats)"]})]},e)})}),"exclude"===d&&h.size>0&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[h.size," section",1!==h.size?"s":""," will be excluded from initialization"]}),"include"===d&&h.size>0&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Only ",h.size," selected section",1!==h.size?"s":""," will be included"]})]}):c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"All seats have already been initialized. No sections available for selection."})})]})]}),"section-level"===o&&l&&c.jsx(bl,{className:"p-4 bg-blue-50 border-blue-200",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(_f,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Initializing Seats for Selected Section"}),c.jsx("p",{className:"text-sm text-blue-800",children:"You are initializing seats for the selected section only. Only seats from this section will be added to the event."})]})]})}),c.jsxs(bl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-4",children:"Pricing Configuration"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{children:"Pricing Mode"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",...k("pricingMode"),value:"same",onChange:e=>{k("pricingMode").onChange(e),se("same")},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Same Price for All Sections"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",...k("pricingMode"),value:"per_section",onChange:e=>{k("pricingMode").onChange(e),se("per_section")},className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Different Price per Section"})]})]})]}),"same"===$&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"defaultPrice",className:"flex items-center gap-2",children:[c.jsx(cf,{className:"h-4 w-4"}),"Price (per seat)"]}),c.jsx(kl,{id:"defaultPrice",type:"number",step:"0.01",min:"0",placeholder:"0.00",...k("defaultPrice",{required:"Price is required",min:{value:0,message:"Price must be 0 or greater"},valueAsNumber:!1})}),A.defaultPrice&&c.jsx("p",{className:"text-sm text-destructive",children:A.defaultPrice.message})]}),"per_section"===$&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Dl,{children:"Section Prices"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Set prices per section. Expand sections to set individual seat prices."})]}),c.jsx("div",{className:"space-y-2 border rounded-lg p-3",children:Q.map(e=>{const t=M.findIndex(t=>t.section_id===e.sectionId),n=ne.get(e.sectionId)||[],s=f.has(e.sectionId),a=F.some(e=>n.some(t=>t.id===e.seat_id));return c.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:()=>(e=>{const t=new Set(f);t.has(e)?t.delete(e):t.add(e),g(t)})(e.sectionId),className:"flex items-center gap-2 hover:bg-muted p-1 rounded",children:s?c.jsx(Vp,{className:"h-4 w-4"}):c.jsx(Hp,{className:"h-4 w-4"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs(Dl,{className:"text-sm font-medium flex items-center gap-2",children:[e.sectionName,a&&c.jsx(mC,{variant:"outline",className:"text-xs",children:"Custom Prices"})]}),t>=0?c.jsx(kl,{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"mt-1",...k(`sectionPricing.${t}.price`,{required:"Price is required",min:{value:0,message:"Price must be 0 or greater"},valueAsNumber:!1})}):c.jsx(kl,{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"mt-1",value:z||"0",onChange:n=>{t<0&&D({section_id:e.sectionId,price:n.target.value})}})]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.count," seats"]})]}),s&&n.length>0&&c.jsxs("div",{className:"ml-8 space-y-2 border-t pt-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs(Dl,{className:"text-xs text-muted-foreground",children:["Individual Seat Prices (optional overrides)",n.length>50&&c.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",n.length," seats)"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[n.length>50&&c.jsx(vl,{type:"button",variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{const e=n.filter(e=>w.has(e.id));if(0===e.length){const e=ee(n);S(new Set(e.map(e=>e.id)))}else{let n=z||"0";if(t>=0){const e=E(`sectionPricing.${t}.price`);n=e||M[t]?.price||z||"0"}e.forEach(e=>{re(e.id,n)}),S(new Set)}},children:w.size>0?`Apply to ${w.size} Selected`:"Select All Visible"}),c.jsx(vl,{type:"button",variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{let e=z||"0";if(t>=0){const n=E(`sectionPricing.${t}.price`);e=n||M[t]?.price||z||"0"}n.forEach(t=>{re(t.id,e)})},children:"Apply Section Price to All"})]})]}),n.length>50&&c.jsxs("div",{className:"relative mb-2",children:[c.jsx(Sg,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(kl,{type:"text",placeholder:"Search by row, seat number, or section...",value:x,onChange:e=>{v(e.target.value),b(1)},className:"pl-8 h-8 text-xs"})]}),(()=>{const e=ee(n),t=n.length>50?te(e):e,s=Math.ceil(e.length/j);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2 max-h-64 overflow-y-auto",children:t.map(e=>{const t=F.findIndex(t=>t.seat_id===e.id),s=ae(e),a=t>=0,r=w.has(e.id);return c.jsxs("div",{className:`flex items-center gap-1.5 p-1.5 rounded border ${a?"bg-blue-50 border-blue-200":""} ${r?"ring-2 ring-blue-500 border-blue-500":""}`,children:[n.length>50&&c.jsx("input",{type:"checkbox",checked:r,onChange:t=>{const n=new Set(w);t.target.checked?n.add(e.id):n.delete(e.id),S(n)},className:"h-3 w-3 flex-shrink-0",onClick:e=>e.stopPropagation(),"aria-label":`Select seat ${e.row}-${e.seat_number}`,title:`Select seat ${e.row}-${e.seat_number}`}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs(Dl,{className:"text-xs text-muted-foreground truncate mb-0.5 block",children:[e.row,"-",e.seat_number]}),c.jsx(kl,{type:"number",step:"0.01",min:"0",placeholder:s,className:"h-7 text-xs py-1 px-2",value:t>=0&&(_(`seatPricing.${t}.price`)||F[t]?.price)||"",onChange:n=>{const s=n.target.value;s&&""!==s?t>=0?R(`seatPricing.${t}.price`,s,{shouldValidate:!0,shouldDirty:!0}):re(e.id,s):t>=0&&ie(e.id)}})]}),a&&c.jsx(vl,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0 flex-shrink-0",onClick:()=>ie(e.id),title:"Remove override (use section price)",children:c.jsx(ax,{className:"h-3 w-3"})})]},e.id)})}),n.length>50&&e.length>j&&c.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t",children:[c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Showing"," ",(y-1)*j+1,"-",Math.min(y*j,e.length)," ","of ",e.length," seats",x&&c.jsxs("span",{className:"ml-1",children:["(filtered from"," ",n.length,")"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(vl,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===y,children:c.jsx(qp,{className:"h-3 w-3"})}),c.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:["Page ",y," of ",s]}),c.jsx(vl,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>b(e=>Math.min(s,e+1)),disabled:y===s,children:c.jsx(Hp,{className:"h-3 w-3"})})]})]}),x&&0===e.length&&c.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground",children:['No seats found matching "',x,'"']})]})})()]})]},e.sectionId)})}),0===Q.length&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"No sections available. All seats may already be assigned."})]})]})]}),c.jsxs(bl,{className:"p-4",children:[c.jsx("h3",{className:"font-medium mb-4",children:"Ticket Options"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"generateTicketCodes",...k("generateTicketCodes"),className:"h-4 w-4 rounded border-gray-300"}),c.jsxs(Dl,{htmlFor:"generateTicketCodes",className:"flex items-center gap-2 cursor-pointer",children:[c.jsx(qg,{className:"h-4 w-4"}),"Generate Tickets"]})]}),B&&c.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Tickets will be created for all seats with AVAILABLE status, ready for sale. Ticket numbers will be generated automatically."}),!B&&c.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Seats will be created without tickets. Tickets can be created later from the seat list."})]})]}),c.jsxs(bl,{className:"p-4 bg-muted/50",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Preview"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{className:"text-muted-foreground",children:["Seats to ",J?"add":"create",":"]}),c.jsx("span",{className:"font-medium",children:X})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Pricing Mode:"}),c.jsx("span",{className:"font-medium",children:"same"===$?"Same Price":"Per Section"})]}),"same"===$&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Price:"}),c.jsxs("span",{className:"font-medium",children:["$",parseFloat(z||"0").toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Generate Tickets:"}),c.jsx("span",{className:"font-medium",children:B?"Yes":"No"})]}),c.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t",children:[c.jsx("span",{children:"Total value:"}),c.jsxs("span",{children:["$",(()=>{let e=0;return K.forEach(t=>{const n=ae(t);e+=parseFloat(n||"0")}),e})().toFixed(2)]})]})]})]})]})]})})}function uO({open:e,onOpenChange:t,onSubmit:n,loading:s=!1}){const[a,r]=p.useState({section_name:"",row_name:"",seat_number:"",ticket_price:0,ticket_number:"",broker_id:"",create_ticket:!1}),[i,o]=p.useState({}),l=(e,t)=>{r(n=>({...n,[e]:t})),i[e]&&o(t=>{const n={...t};return delete n[e],n})},d=()=>{s||(r({section_name:"",row_name:"",seat_number:"",ticket_price:0,ticket_number:"",broker_id:"",create_ticket:!1}),o({}),t(!1))};return c.jsx(Zy,{open:e,onOpenChange:d,children:c.jsxs(tb,{className:"sm:max-w-[500px]",children:[c.jsx(nb,{children:c.jsx(ab,{children:"Create Event Seat"})}),c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return a.seat_id||a.section_name&&a.row_name&&a.seat_number||a.seat_id||(a.section_name||(e.section_name="Section name is required"),a.row_name||(e.row_name="Row name is required"),a.seat_number||(e.seat_number="Seat number is required")),a.create_ticket&&a.ticket_price<0&&(e.ticket_price="Ticket price cannot be negative"),o(e),0===Object.keys(e).length})())try{const e={...a,seat_id:a.seat_id||void 0,section_name:a.section_name||void 0,row_name:a.row_name||void 0,seat_number:a.seat_number||void 0,ticket_number:a.ticket_number||void 0,broker_id:a.broker_id||void 0,ticket_price:a.ticket_price||0};await n(e),r({section_name:"",row_name:"",seat_number:"",ticket_price:0,ticket_number:"",broker_id:"",create_ticket:!1}),o({})}catch(t){}},children:[c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"seat_id",children:"Seat ID (Optional)"}),c.jsx(kl,{id:"seat_id",value:a.seat_id||"",onChange:e=>l("seat_id",e.target.value),placeholder:"Reference to venue seat",disabled:s}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"If provided, seat location will be taken from the venue seat"})]}),!a.seat_id&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"section_name",children:["Section Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"section_name",value:a.section_name||"",onChange:e=>l("section_name",e.target.value),placeholder:"e.g., Section A",disabled:s,className:al(i.section_name&&"border-destructive")}),i.section_name&&c.jsx("p",{className:"text-xs text-destructive",children:i.section_name})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"row_name",children:["Row Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"row_name",value:a.row_name||"",onChange:e=>l("row_name",e.target.value),placeholder:"e.g., Row 1",disabled:s,className:al(i.row_name&&"border-destructive")}),i.row_name&&c.jsx("p",{className:"text-xs text-destructive",children:i.row_name})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"seat_number",children:["Seat Number ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"seat_number",value:a.seat_number||"",onChange:e=>l("seat_number",e.target.value),placeholder:"e.g., 1, 2, 3",disabled:s,className:al(i.seat_number&&"border-destructive")}),i.seat_number&&c.jsx("p",{className:"text-xs text-destructive",children:i.seat_number})]})]}),a.create_ticket&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"ticket_price",children:"Ticket Price"}),c.jsx(kl,{id:"ticket_price",type:"number",step:"0.01",min:"0",value:a.ticket_price||0,onChange:e=>l("ticket_price",parseFloat(e.target.value)||0),placeholder:"0.00",disabled:s,className:al(i.ticket_price&&"border-destructive")}),i.ticket_price&&c.jsx("p",{className:"text-xs text-destructive",children:i.ticket_price})]}),a.create_ticket&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"ticket_number",children:"Ticket Number (Optional)"}),c.jsx(kl,{id:"ticket_number",value:a.ticket_number||"",onChange:e=>l("ticket_number",e.target.value),placeholder:"Leave empty to auto-generate",disabled:s})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"broker_id",children:"Broker ID (Optional)"}),c.jsx(kl,{id:"broker_id",value:a.broker_id||"",onChange:e=>l("broker_id",e.target.value),placeholder:"Broker identifier",disabled:s})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(RC,{id:"create_ticket",checked:a.create_ticket,onCheckedChange:e=>l("create_ticket",e),disabled:s}),c.jsx(Dl,{htmlFor:"create_ticket",className:"text-sm font-normal cursor-pointer",children:"Create ticket immediately (mark as sold)"})]})]}),c.jsxs(sb,{children:[c.jsx(vl,{type:"button",variant:"outline",onClick:d,disabled:s,children:"Cancel"}),c.jsx(vl,{type:"submit",disabled:s,children:s?"Creating...":"Create Seat"})]})]})]})})}var hO,mO={exports:{}};var pO,fO=hO?mO.exports:(hO=1,"undefined"!=typeof self&&self,pO=function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,n){return new e(new Uint8ClampedArray(t*n),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height||!this.data[t*this.width+e])},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n?1:0},e.prototype.setRegion=function(e,t,n,s,a){for(var r=t;r<t+s;r++)for(var i=e;i<e+n;i++)this.set(i,r,!!a)},e}();t.BitMatrix=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(2);t.addOrSubtractGF=function(e,t){return e^t};var a=function(){function e(e,t,n){this.primitive=e,this.size=t,this.generatorBase=n,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var a=1,r=0;r<this.size;r++)this.expTable[r]=a,(a*=2)>=this.size&&(a=(a^this.primitive)&this.size-1);for(r=0;r<this.size-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new s.default(this,Uint8ClampedArray.from([0])),this.one=new s.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var n=new Uint8ClampedArray(e+1);return n[0]=t,new s.default(this,n)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var s=1;s<n&&0===t[s];)s++;if(s===n)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(n-s);for(var a=0;a<this.coefficients.length;a++)this.coefficients[a]=t[s+a]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var n;if(this.isZero())return t;if(t.isZero())return this;var a=this.coefficients,r=t.coefficients;a.length>r.length&&(a=(n=[r,a])[0],r=n[1]);for(var i=new Uint8ClampedArray(r.length),o=r.length-a.length,l=0;l<o;l++)i[l]=r[l];for(l=o;l<r.length;l++)i[l]=s.addOrSubtractGF(a[l-o],r[l]);return new e(this.field,i)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var n=this.coefficients.length,s=new Uint8ClampedArray(n),a=0;a<n;a++)s[a]=this.field.multiply(this.coefficients[a],t);return new e(this.field,s)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var n=this.coefficients,a=n.length,r=t.coefficients,i=r.length,o=new Uint8ClampedArray(a+i-1),l=0;l<a;l++)for(var c=n[l],d=0;d<i;d++)o[l+d]=s.addOrSubtractGF(o[l+d],this.field.multiply(c,r[d]));return new e(this.field,o)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Error("Invalid degree less than 0");if(0===n)return this.field.zero;for(var s=this.coefficients.length,a=new Uint8ClampedArray(s+t),r=0;r<s;r++)a[r]=this.field.multiply(this.coefficients[r],n);return new e(this.field,a)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var n=this.coefficients.length;if(1===e)return this.coefficients.forEach(function(e){t=s.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var a=1;a<n;a++)t=s.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[a]);return t},e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=n(5),r=n(11),i=n(12);function o(e){var t=i.locate(e);if(!t)return null;for(var n=0,s=t;n<s.length;n++){var o=s[n],l=r.extract(e,o),c=a.decode(l.matrix);if(c)return{binaryData:c.bytes,data:c.text,chunks:c.chunks,version:c.version,location:{topRightCorner:l.mappingFunction(o.dimension,0),topLeftCorner:l.mappingFunction(0,0),bottomRightCorner:l.mappingFunction(o.dimension,o.dimension),bottomLeftCorner:l.mappingFunction(0,o.dimension),topRightFinderPattern:o.topRight,topLeftFinderPattern:o.topLeft,bottomLeftFinderPattern:o.bottomLeft,bottomRightAlignmentPattern:o.alignmentPattern}}}return null}var l={inversionAttempts:"attemptBoth"};function c(e,t,n,a){void 0===a&&(a={});var r=l;Object.keys(r||{}).forEach(function(e){r[e]=a[e]||r[e]});var i="attemptBoth"===r.inversionAttempts||"invertFirst"===r.inversionAttempts,c="onlyInvert"===r.inversionAttempts||"invertFirst"===r.inversionAttempts,d=s.binarize(e,t,n,i),u=d.binarized,h=d.inverted,m=o(c?h:u);return m||"attemptBoth"!==r.inversionAttempts&&"invertFirst"!==r.inversionAttempts||(m=o(c?u:h)),m}c.default=c,t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(0);function a(e,t,n){return e<t?t:e>n?n:e}var r=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n},e}();t.binarize=function(e,t,n,i){if(e.length!==t*n*4)throw new Error("Malformed data passed to binarizer.");for(var o=new r(t,n),l=0;l<t;l++)for(var c=0;c<n;c++){var d=e[4*(c*t+l)+0],u=e[4*(c*t+l)+1],h=e[4*(c*t+l)+2];o.set(l,c,.2126*d+.7152*u+.0722*h)}for(var m=Math.ceil(t/8),p=Math.ceil(n/8),f=new r(m,p),g=0;g<p;g++)for(var x=0;x<m;x++){var v=0,y=1/0,b=0;for(c=0;c<8;c++)for(l=0;l<8;l++){var w=o.get(8*x+l,8*g+c);v+=w,y=Math.min(y,w),b=Math.max(b,w)}var S=v/Math.pow(8,2);if(b-y<=24&&(S=y/2,g>0&&x>0)){var j=(f.get(x,g-1)+2*f.get(x-1,g)+f.get(x-1,g-1))/4;y<j&&(S=j)}f.set(x,g,S)}var C=s.BitMatrix.createEmpty(t,n),k=null;for(i&&(k=s.BitMatrix.createEmpty(t,n)),g=0;g<p;g++)for(x=0;x<m;x++){for(var N=a(x,2,m-3),_=a(g,2,p-3),P=(v=0,-2);P<=2;P++)for(var E=-2;E<=2;E++)v+=f.get(N+P,_+E);var R=v/25;for(P=0;P<8;P++)for(E=0;E<8;E++){l=8*x+P,c=8*g+E;var A=o.get(l,c);C.set(l,c,A<=R),i&&k.set(l,c,!(A<=R))}}return i?{binarized:C,inverted:k}:{binarized:C}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(6),r=n(9),i=n(10);function o(e,t){for(var n=e^t,s=0;n;)s++,n&=n-1;return s}function l(e,t){return t<<1|e}var c=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],d=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function u(e,t,n){for(var a=d[n.dataMask],r=e.height,i=function(e){var t=17+4*e.versionNumber,n=s.BitMatrix.createEmpty(t,t);n.setRegion(0,0,9,9,!0),n.setRegion(t-8,0,8,9,!0),n.setRegion(0,t-8,9,8,!0);for(var a=0,r=e.alignmentPatternCenters;a<r.length;a++)for(var i=r[a],o=0,l=e.alignmentPatternCenters;o<l.length;o++){var c=l[o];6===i&&6===c||6===i&&c===t-7||i===t-7&&6===c||n.setRegion(i-2,c-2,5,5,!0)}return n.setRegion(6,9,1,t-17,!0),n.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(n.setRegion(t-11,0,3,6,!0),n.setRegion(0,t-11,6,3,!0)),n}(t),o=[],c=0,u=0,h=!0,m=r-1;m>0;m-=2){6===m&&m--;for(var p=0;p<r;p++)for(var f=h?r-1-p:p,g=0;g<2;g++){var x=m-g;if(!i.get(x,f)){u++;var v=e.get(x,f);a({y:f,x:x})&&(v=!v),c=l(v,c),8===u&&(o.push(c),u=0,c=0)}}h=!h}return o}function h(e){var t=function(e){var t=e.height,n=Math.floor((t-17)/4);if(n<=6)return i.VERSIONS[n-1];for(var s=0,a=5;a>=0;a--)for(var r=t-9;r>=t-11;r--)s=l(e.get(r,a),s);var c=0;for(r=5;r>=0;r--)for(a=t-9;a>=t-11;a--)c=l(e.get(r,a),c);for(var d,u=1/0,h=0,m=i.VERSIONS;h<m.length;h++){var p=m[h];if(p.infoBits===s||p.infoBits===c)return p;var f=o(s,p.infoBits);f<u&&(d=p,u=f),(f=o(c,p.infoBits))<u&&(d=p,u=f)}return u<=3?d:void 0}(e);if(!t)return null;var n=function(e){for(var t=0,n=0;n<=8;n++)6!==n&&(t=l(e.get(n,8),t));for(var s=7;s>=0;s--)6!==s&&(t=l(e.get(8,s),t));var a=e.height,r=0;for(s=a-1;s>=a-7;s--)r=l(e.get(8,s),r);for(n=a-8;n<a;n++)r=l(e.get(n,8),r);for(var i=1/0,d=null,u=0,h=c;u<h.length;u++){var m=h[u],p=m.bits,f=m.formatInfo;if(p===t||p===r)return f;var g=o(t,p);g<i&&(d=f,i=g),t!==r&&(g=o(r,p))<i&&(d=f,i=g)}return i<=3?d:null}(e);if(!n)return null;var s=function(e,t,n){var s=t.errorCorrectionLevels[n],a=[],r=0;if(s.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)a.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),r+=e.dataCodewordsPerBlock+s.ecCodewordsPerBlock}),e.length<r)return null;e=e.slice(0,r);for(var i=s.ecBlocks[0].dataCodewordsPerBlock,o=0;o<i;o++)for(var l=0,c=a;l<c.length;l++)c[l].codewords.push(e.shift());if(s.ecBlocks.length>1){var d=s.ecBlocks[0].numBlocks,u=s.ecBlocks[1].numBlocks;for(o=0;o<u;o++)a[d+o].codewords.push(e.shift())}for(;e.length>0;)for(var h=0,m=a;h<m.length;h++)m[h].codewords.push(e.shift());return a}(u(e,t,n),t,n.errorCorrectionLevel);if(!s)return null;for(var d=s.reduce(function(e,t){return e+t.numDataCodewords},0),h=new Uint8ClampedArray(d),m=0,p=0,f=s;p<f.length;p++){var g=f[p],x=r.decode(g.codewords,g.codewords.length-g.numDataCodewords);if(!x)return null;for(var v=0;v<g.numDataCodewords;v++)h[m++]=x[v]}try{return a.decode(h,t.versionNumber)}catch(y){return null}}t.decode=function(e){if(null==e)return null;var t=h(e);if(t)return t;for(var n=0;n<e.width;n++)for(var s=n+1;s<e.height;s++)e.get(n,s)!==e.get(s,n)&&(e.set(n,s,!e.get(n,s)),e.set(s,n,!e.get(s,n)));return h(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s,a,r,i,o=n(7),l=n(8);function c(e,t){for(var n=[],s="",a=[10,12,14][t],r=e.readBits(a);r>=3;){if((c=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var i=Math.floor(c/100),o=Math.floor(c/10)%10,l=c%10;n.push(48+i,48+o,48+l),s+=i.toString()+o.toString()+l.toString(),r-=3}if(2===r){if((c=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");i=Math.floor(c/10),o=c%10,n.push(48+i,48+o),s+=i.toString()+o.toString()}else if(1===r){var c;if((c=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");n.push(48+c),s+=c.toString()}return{bytes:n,text:s}}(a=s=t.Mode||(t.Mode={})).Numeric="numeric",a.Alphanumeric="alphanumeric",a.Byte="byte",a.Kanji="kanji",a.ECI="eci",(i=r||(r={}))[i.Terminator=0]="Terminator",i[i.Numeric=1]="Numeric",i[i.Alphanumeric=2]="Alphanumeric",i[i.Byte=4]="Byte",i[i.Kanji=8]="Kanji",i[i.ECI=7]="ECI";var d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function u(e,t){for(var n=[],s="",a=[9,11,13][t],r=e.readBits(a);r>=2;){var i=e.readBits(11),o=Math.floor(i/45),l=i%45;n.push(d[o].charCodeAt(0),d[l].charCodeAt(0)),s+=d[o]+d[l],r-=2}return 1===r&&(o=e.readBits(6),n.push(d[o].charCodeAt(0)),s+=d[o]),{bytes:n,text:s}}function h(e,t){for(var n=[],s="",a=[8,16,16][t],r=e.readBits(a),i=0;i<r;i++){var o=e.readBits(8);n.push(o)}try{s+=decodeURIComponent(n.map(function(e){return"%"+("0"+e.toString(16)).substr(-2)}).join(""))}catch(l){}return{bytes:n,text:s}}function m(e,t){for(var n=[],s="",a=[8,10,12][t],r=e.readBits(a),i=0;i<r;i++){var o=e.readBits(13),c=Math.floor(o/192)<<8|o%192;c+=c<7936?33088:49472,n.push(c>>8,255&c),s+=String.fromCharCode(l.shiftJISTable[c])}return{bytes:n,text:s}}t.decode=function(e,t){for(var n,a,i,l,d=new o.BitStream(e),p=t<=9?0:t<=26?1:2,f={text:"",bytes:[],chunks:[],version:t};d.available()>=4;){var g=d.readBits(4);if(g===r.Terminator)return f;if(g===r.ECI)0===d.readBits(1)?f.chunks.push({type:s.ECI,assignmentNumber:d.readBits(7)}):0===d.readBits(1)?f.chunks.push({type:s.ECI,assignmentNumber:d.readBits(14)}):0===d.readBits(1)?f.chunks.push({type:s.ECI,assignmentNumber:d.readBits(21)}):f.chunks.push({type:s.ECI,assignmentNumber:-1});else if(g===r.Numeric){var x=c(d,p);f.text+=x.text,(n=f.bytes).push.apply(n,x.bytes),f.chunks.push({type:s.Numeric,text:x.text})}else if(g===r.Alphanumeric){var v=u(d,p);f.text+=v.text,(a=f.bytes).push.apply(a,v.bytes),f.chunks.push({type:s.Alphanumeric,text:v.text})}else if(g===r.Byte){var y=h(d,p);f.text+=y.text,(i=f.bytes).push.apply(i,y.bytes),f.chunks.push({type:s.Byte,bytes:y.bytes,text:y.text})}else if(g===r.Kanji){var b=m(d,p);f.text+=b.text,(l=f.bytes).push.apply(l,b.bytes),f.chunks.push({type:s.Kanji,bytes:b.bytes,text:b.text})}}if(0===d.available()||0===d.readBits(d.available()))return f}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var n=8-this.bitOffset,s=e<n?e:n,a=255>>8-s<<(r=n-s);t=(this.bytes[this.byteOffset]&a)>>r,e-=s,this.bitOffset+=s,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var r;e>0&&(a=255>>(r=8-e)<<r,t=t<<e|(this.bytes[this.byteOffset]&a)>>r,this.bitOffset+=e)}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(2);t.decode=function(e,t){var n=new Uint8ClampedArray(e.length);n.set(e);for(var r=new s.default(285,256,0),i=new a.default(r,n),o=new Uint8ClampedArray(t),l=!1,c=0;c<t;c++){var d=i.evaluateAt(r.exp(c+r.generatorBase));o[o.length-1-c]=d,0!==d&&(l=!0)}if(!l)return n;var u=new a.default(r,o),h=function(e,t,n,s){var a;t.degree()<n.degree()&&(t=(a=[n,t])[0],n=a[1]);for(var r=t,i=n,o=e.zero,l=e.one;i.degree()>=s/2;){var c=r,d=o;if(o=l,(r=i).isZero())return null;i=c;for(var u=e.zero,h=r.getCoefficient(r.degree()),m=e.inverse(h);i.degree()>=r.degree()&&!i.isZero();){var p=i.degree()-r.degree(),f=e.multiply(i.getCoefficient(i.degree()),m);u=u.addOrSubtract(e.buildMonomial(p,f)),i=i.addOrSubtract(r.multiplyByMonomial(p,f))}if(l=u.multiplyPoly(o).addOrSubtract(d),i.degree()>=r.degree())return null}var g=l.getCoefficient(0);if(0===g)return null;var x=e.inverse(g);return[l.multiply(x),i.multiply(x)]}(r,r.buildMonomial(t,1),u,t);if(null===h)return null;var m=function(e,t){var n=t.degree();if(1===n)return[t.getCoefficient(1)];for(var s=new Array(n),a=0,r=1;r<e.size&&a<n;r++)0===t.evaluateAt(r)&&(s[a]=e.inverse(r),a++);return a!==n?null:s}(r,h[0]);if(null==m)return null;for(var p=function(e,t,n){for(var a=n.length,r=new Array(a),i=0;i<a;i++){for(var o=e.inverse(n[i]),l=1,c=0;c<a;c++)i!==c&&(l=e.multiply(l,s.addOrSubtractGF(1,e.multiply(n[c],o))));r[i]=e.multiply(t.evaluateAt(o),e.inverse(l)),0!==e.generatorBase&&(r[i]=e.multiply(r[i],o))}return r}(r,h[1],m),f=0;f<m.length;f++){var g=n.length-1-r.log(m[f]);if(g<0)return null;n[g]=s.addOrSubtractGF(n[g],p[f])}return n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(0);function a(e,t,n,s){var a=e.x-t.x+n.x-s.x,r=e.y-t.y+n.y-s.y;if(0===a&&0===r)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:n.x-t.x,a22:n.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var i=t.x-n.x,o=s.x-n.x,l=t.y-n.y,c=s.y-n.y,d=i*c-o*l,u=(a*c-o*r)/d,h=(i*r-a*l)/d;return{a11:t.x-e.x+u*t.x,a12:t.y-e.y+u*t.y,a13:u,a21:s.x-e.x+h*s.x,a22:s.y-e.y+h*s.y,a23:h,a31:e.x,a32:e.y,a33:1}}t.extract=function(e,t){for(var n,r,i=function(e,t,n,s){var r=a(e,t,n,s);return{a11:r.a22*r.a33-r.a23*r.a32,a12:r.a13*r.a32-r.a12*r.a33,a13:r.a12*r.a23-r.a13*r.a22,a21:r.a23*r.a31-r.a21*r.a33,a22:r.a11*r.a33-r.a13*r.a31,a23:r.a13*r.a21-r.a11*r.a23,a31:r.a21*r.a32-r.a22*r.a31,a32:r.a12*r.a31-r.a11*r.a32,a33:r.a11*r.a22-r.a12*r.a21}}({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),o=a(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),l=(r=i,{a11:(n=o).a11*r.a11+n.a21*r.a12+n.a31*r.a13,a12:n.a12*r.a11+n.a22*r.a12+n.a32*r.a13,a13:n.a13*r.a11+n.a23*r.a12+n.a33*r.a13,a21:n.a11*r.a21+n.a21*r.a22+n.a31*r.a23,a22:n.a12*r.a21+n.a22*r.a22+n.a32*r.a23,a23:n.a13*r.a21+n.a23*r.a22+n.a33*r.a23,a31:n.a11*r.a31+n.a21*r.a32+n.a31*r.a33,a32:n.a12*r.a31+n.a22*r.a32+n.a32*r.a33,a33:n.a13*r.a31+n.a23*r.a32+n.a33*r.a33}),c=s.BitMatrix.createEmpty(t.dimension,t.dimension),d=function(e,t){var n=l.a13*e+l.a23*t+l.a33;return{x:(l.a11*e+l.a21*t+l.a31)/n,y:(l.a12*e+l.a22*t+l.a32)/n}},u=0;u<t.dimension;u++)for(var h=0;h<t.dimension;h++){var m=d(h+.5,u+.5);c.set(h,u,e.get(Math.floor(m.x),Math.floor(m.y)))}return{matrix:c,mappingFunction:d}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function a(e){return e.reduce(function(e,t){return e+t})}function r(e,t,n,a){var r,i,o,l,c=[{x:Math.floor(e.x),y:Math.floor(e.y)}],d=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);d?(r=Math.floor(e.y),i=Math.floor(e.x),o=Math.floor(t.y),l=Math.floor(t.x)):(r=Math.floor(e.x),i=Math.floor(e.y),o=Math.floor(t.x),l=Math.floor(t.y));for(var u=Math.abs(o-r),h=Math.abs(l-i),m=Math.floor(-u/2),p=r<o?1:-1,f=i<l?1:-1,g=!0,x=r,v=i;x!==o+p;x+=p){var y=d?v:x,b=d?x:v;if(n.get(y,b)!==g&&(g=!g,c.push({x:y,y:b}),c.length===a+1))break;if((m+=h)>0){if(v===l)break;v+=f,m-=u}}for(var w=[],S=0;S<a;S++)c[S]&&c[S+1]?w.push(s(c[S],c[S+1])):w.push(0);return w}function i(e,t,n,s){var a,i=t.y-e.y,o=t.x-e.x,l=r(e,t,n,Math.ceil(s/2)),c=r(e,{x:e.x-o,y:e.y-i},n,Math.ceil(s/2)),d=l.shift()+c.shift()-1;return(a=c.concat(d)).concat.apply(a,l)}function o(e,t){var n=a(e)/a(t),s=0;return t.forEach(function(t,a){s+=Math.pow(e[a]-t*n,2)}),{averageSize:n,error:s}}function l(e,t,n){try{var s=i(e,{x:-1,y:e.y},n,t.length),a=i(e,{x:e.x,y:-1},n,t.length),r=i(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},n,t.length),l=i(e,{x:Math.min(n.width,e.x+e.y)+1,y:Math.min(n.height,e.y+e.x)+1},n,t.length),c=o(s,t),d=o(a,t),u=o(r,t),h=o(l,t),m=Math.sqrt(c.error*c.error+d.error*d.error+u.error*u.error+h.error*h.error),p=(c.averageSize+d.averageSize+u.averageSize+h.averageSize)/4;return m+(Math.pow(c.averageSize-p,2)+Math.pow(d.averageSize-p,2)+Math.pow(u.averageSize-p,2)+Math.pow(h.averageSize-p,2))/p}catch(f){return 1/0}}function c(e,t){for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n--;for(var s=Math.round(t.x);e.get(s,Math.round(t.y));)s++;for(var a=(n+s)/2,r=Math.round(t.y);e.get(Math.round(a),r);)r--;for(var i=Math.round(t.y);e.get(Math.round(a),i);)i++;return{x:a,y:(r+i)/2}}function d(e,t,n,r,o){var c,d,u;try{c=function(e,t,n,r){var o=(a(i(e,n,r,5))/7+a(i(e,t,r,5))/7+a(i(n,e,r,5))/7+a(i(t,e,r,5))/7)/4;if(o<1)throw new Error("Invalid module size");var l=Math.round(s(e,t)/o),c=Math.round(s(e,n)/o),d=Math.floor((l+c)/2)+7;switch(d%4){case 0:d++;break;case 2:d--}return{dimension:d,moduleSize:o}}(r,n,o,e),d=c.dimension,u=c.moduleSize}catch(v){return null}var h=n.x-r.x+o.x,m=n.y-r.y+o.y,p=(s(r,o)+s(r,n))/2/u,f=1-3/p,g={x:r.x+f*(h-r.x),y:r.y+f*(m-r.y)},x=t.map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(n),Math.floor(r))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1];return a(i),{x:n,y:r,score:l({x:Math.floor(n),y:Math.floor(r)},[1,1,1],e)+s({x:n,y:r},g)}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});return{alignmentPattern:p>=15&&x.length?x[0]:g,dimension:d}}t.locate=function(e){for(var t=[],n=[],r=[],i=[],o=function(s){for(var o=0,l=!1,c=[0,0,0,0,0],d=function(t){var r=e.get(t,s);if(r===l)o++;else{c=[c[1],c[2],c[3],c[4],o],o=1,l=r;var d=a(c)/7,u=Math.abs(c[0]-d)<d&&Math.abs(c[1]-d)<d&&Math.abs(c[2]-3*d)<3*d&&Math.abs(c[3]-d)<d&&Math.abs(c[4]-d)<d&&!r,h=a(c.slice(-3))/3,m=Math.abs(c[2]-h)<h&&Math.abs(c[3]-h)<h&&Math.abs(c[4]-h)<h&&r;if(u){var p=t-c[3]-c[4],f=p-c[2],g={startX:f,endX:p,y:s};(x=n.filter(function(e){return f>=e.bottom.startX&&f<=e.bottom.endX||p>=e.bottom.startX&&f<=e.bottom.endX||f<=e.bottom.startX&&p>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?x[0].bottom=g:n.push({top:g,bottom:g})}if(m){var x,v=t-c[4],y=v-c[3];g={startX:y,y:s,endX:v},(x=i.filter(function(e){return y>=e.bottom.startX&&y<=e.bottom.endX||v>=e.bottom.startX&&y<=e.bottom.endX||y<=e.bottom.startX&&v>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?x[0].bottom=g:i.push({top:g,bottom:g})}}},u=-1;u<=e.width;u++)d(u);t.push.apply(t,n.filter(function(e){return e.bottom.y!==s&&e.bottom.y-e.top.y>=2})),n=n.filter(function(e){return e.bottom.y===s}),r.push.apply(r,i.filter(function(e){return e.bottom.y!==s})),i=i.filter(function(e){return e.bottom.y===s})},u=0;u<=e.height;u++)o(u);t.push.apply(t,n.filter(function(e){return e.bottom.y-e.top.y>=2})),r.push.apply(r,i);var h=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,s=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(n),Math.round(s))){var r=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],i=a(r)/r.length;return{score:l({x:Math.round(n),y:Math.round(s)},[1,1,3,1,1],e),x:n,y:s,size:i}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,n){if(t>4)return null;var s=n.filter(function(e,n){return t!==n}).map(function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(s.length<2)return null;var a=e.score+s[0].score+s[1].score;return{points:[e].concat(s.slice(0,2)),score:a}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(0===h.length)return null;var m=function(e,t,n){var a,r,i,o,l,c,d,u=s(e,t),h=s(t,n),m=s(e,n);return h>=u&&h>=m?(l=(a=[t,e,n])[0],c=a[1],d=a[2]):m>=h&&m>=u?(l=(r=[e,t,n])[0],c=r[1],d=r[2]):(l=(i=[e,n,t])[0],c=i[1],d=i[2]),(d.x-c.x)*(l.y-c.y)-(d.y-c.y)*(l.x-c.x)<0&&(l=(o=[d,l])[0],d=o[1]),{bottomLeft:l,topLeft:c,topRight:d}}(h[0].points[0],h[0].points[1],h[0].points[2]),p=m.topRight,f=m.topLeft,g=m.bottomLeft,x=d(e,r,p,f,g),v=[];x&&v.push({alignmentPattern:{x:x.alignmentPattern.x,y:x.alignmentPattern.y},bottomLeft:{x:g.x,y:g.y},dimension:x.dimension,topLeft:{x:f.x,y:f.y},topRight:{x:p.x,y:p.y}});var y=c(e,p),b=c(e,f),w=c(e,g),S=d(e,r,y,b,w);return S&&v.push({alignmentPattern:{x:S.alignmentPattern.x,y:S.alignmentPattern.y},bottomLeft:{x:w.x,y:w.y},topLeft:{x:b.x,y:b.y},topRight:{x:y.x,y:y.y},dimension:S.dimension}),0===v.length?null:v}}]).default},mO.exports=pO());const gO=n(fO);function xO({eventId:e,onScanSuccess:t,onScanError:n,onClose:s,className:a,autoStart:r=!1}){const i=p.useRef(null),o=p.useRef(null),l=p.useRef(null),[d,u]=p.useState(null),[h,m]=p.useState("idle"),[f,g]=p.useState(null),[x,v]=p.useState(null),y=p.useRef(!1),b=p.useRef(0),w=p.useCallback(()=>{l.current&&(l.current.getTracks().forEach(e=>e.stop()),l.current=null)},[]);p.useEffect(()=>()=>{w(),b.current&&cancelAnimationFrame(b.current)},[w]);const S=p.useCallback(async()=>{u(null),m("starting");try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});l.current=e,i.current&&(i.current.srcObject=e,await i.current.play()),m("scanning")}catch(e){const t=e instanceof Error?e.message:"Could not access camera";u(t),m("error"),n?.(t)}},[n]);p.useEffect(()=>{r&&"idle"===h&&S()},[r,h,S]);const j=p.useCallback(async s=>{if(!y.current){y.current=!0,m("idle");try{const n=await async function(e,t){return Fa.post(`/api/v1/ticketing/events/${e}/tickets/scan`,{code:t},{requiresAuth:!0})}(e,s);g(n),v(null),m("success"),t?.(n),setTimeout(()=>{y.current=!1,m("scanning")},2e3)}catch(a){const e=a&&"object"==typeof a&&"message"in a?String(a.message):"Scan failed";v(e),m("error"),n?.(e),setTimeout(()=>{y.current=!1,m("scanning")},2e3)}}},[e,t,n]);return p.useEffect(()=>{if("scanning"!==h||!i.current||!o.current)return;const e=i.current,t=o.current,n=t.getContext("2d");if(n)return b.current=requestAnimationFrame(function s(){if(y.current||!l.current||e.readyState!==e.HAVE_ENOUGH_DATA)return void(b.current=requestAnimationFrame(s));if(!n)return;t.width=e.videoWidth,t.height=e.videoHeight,n.drawImage(e,0,0);const a=n.getImageData(0,0,t.width,t.height),r=gO(a.data,a.width,a.height);r?.data?j(r.data):b.current=requestAnimationFrame(s)}),()=>{b.current&&cancelAnimationFrame(b.current)}},[h,j]),c.jsxs("div",{className:a,children:[c.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-black aspect-video max-w-lg mx-auto",children:[c.jsx("video",{ref:i,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{display:"scanning"===h||"starting"===h?"block":"none"}}),c.jsx("canvas",{ref:o,className:"hidden"}),"starting"===h&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70",children:c.jsx(If,{className:"h-10 w-10 animate-spin text-white"})}),"success"===h&&f&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-white p-4",children:[c.jsx(Zp,{className:"h-12 w-12 text-green-500 mb-2"}),c.jsx("p",{className:"font-medium",children:"Ticket scanned"}),c.jsx("p",{className:"text-sm text-gray-300",children:[f.section_name,f.row_name,f.seat_number].filter(Boolean).join("  ")||f.ticket_number})]}),"error"===h&&x&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-white p-4",children:[c.jsx(ef,{className:"h-12 w-12 text-red-500 mb-2"}),c.jsx("p",{className:"text-sm text-center",children:x})]}),d&&"error"===h&&!x&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-white p-4",children:[c.jsx(Op,{className:"h-12 w-12 text-red-500 mb-2"}),c.jsx("p",{className:"text-sm text-center",children:d})]}),"scanning"===h&&c.jsx("div",{className:"absolute inset-0 pointer-events-none border-4 border-primary/50 rounded-lg",style:{boxShadow:"inset 0 0 0 2px rgba(255,255,255,0.2)"}})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:["idle"===h&&c.jsxs(vl,{type:"button",onClick:S,className:"gap-2",children:[c.jsx(Op,{className:"h-4 w-4"}),"Start camera"]}),("starting"===h||"scanning"===h)&&c.jsx(vl,{type:"button",variant:"outline",onClick:w,children:"Stop camera"}),("success"===h||"error"===h)&&c.jsx(vl,{type:"button",variant:"outline",onClick:()=>{m("scanning"),g(null),v(null)},children:"Scan another"}),s&&c.jsx(vl,{type:"button",variant:"ghost",onClick:s,children:"Close"})]})]})}function vO({zoomLevel:e,panOffset:t,onZoomIn:n,onZoomOut:s,onResetZoom:a}){return c.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-10",children:[c.jsx(vl,{variant:"outline",size:"sm",onClick:n,disabled:e>=3,title:"Zoom In",children:c.jsx(rx,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"outline",size:"sm",onClick:s,disabled:e<=.5,title:"Zoom Out",children:c.jsx(ix,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"outline",size:"sm",onClick:a,disabled:1===e&&0===t.x&&0===t.y,title:"Reset Zoom",children:c.jsx(gg,{className:"h-4 w-4"})}),c.jsxs("div",{className:"text-xs text-center text-muted-foreground bg-background/80 px-2 py-1 rounded",children:[Math.round(100*e),"%"]})]})}var yO,bO={exports:{}},wO={},SO={},jO={};function CO(){return yO||(yO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const n=Math.PI/180;e.glob=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:t=>e.Konva.angleDeg?t*n:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>e.Konva.DD.isDragging,isTransforming(){var t;return null===(t=e.Konva.Transformer)||void 0===t?void 0:t.isTransforming()},isDragReady:()=>!!e.Konva.DD.node,releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}};e._registerNode=t=>{e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)}(jO)),jO}var kO,NO={};function _O(){return kO||(kO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=CO();class n{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),s=this.m[0]*t+this.m[2]*n,a=this.m[1]*t+this.m[3]*n,r=this.m[0]*-n+this.m[2]*t,i=this.m[1]*-n+this.m[3]*t;return this.m[0]=s,this.m[1]=a,this.m[2]=r,this.m[3]=i,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const n=this.m[0]+this.m[2]*t,s=this.m[1]+this.m[3]*t,a=this.m[2]+this.m[0]*e,r=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=s,this.m[2]=a,this.m[3]=r,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],a=this.m[1]*e.m[2]+this.m[3]*e.m[3],r=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],i=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=s,this.m[3]=a,this.m[4]=r,this.m[5]=i,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,s=-this.m[2]*e,a=this.m[0]*e,r=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),i=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=s,this.m[3]=a,this.m[4]=r,this.m[5]=i,this}getMatrix(){return this.m}decompose(){const t=this.m[0],n=this.m[1],s=this.m[2],a=this.m[3],r=t*a-n*s,i={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=n){const e=Math.sqrt(t*t+n*n);i.rotation=n>0?Math.acos(t/e):-Math.acos(t/e),i.scaleX=e,i.scaleY=r/e,i.skewX=(t*s+n*a)/r,i.skewY=0}else if(0!=s||0!=a){const e=Math.sqrt(s*s+a*a);i.rotation=Math.PI/2-(a>0?Math.acos(-s/e):-Math.acos(s/e)),i.scaleX=r/e,i.scaleY=e,i.skewX=0,i.skewY=(t*s+n*a)/r}return i.rotation=e.Util._getRotation(i.rotation),i}}e.Transform=n;const s=Math.PI/180,a=180/Math.PI,r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},i=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let o=[];const l="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)};e.Util={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;const t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){o.push(e),1===o.length&&l(function(){const e=o;o=[],e.forEach(function(e){e()})})},createCanvasElement(){const e=document.createElement("canvas");try{e.style=e.style||{}}catch(t){}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(t,n){const s=e.Util.createImageElement();s.onload=function(){n(s)},s.src=t},_rgbToHex:(e,t,n)=>((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){e=e.replace("#","");const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){let e=(16777215*Math.random()|0).toString(16);for(;e.length<6;)e="0"+e;return"#"+e},getRGB(e){let t;return e in r?(t=r[e],{r:t[0],g:t[1],b:t[2]}):"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=i.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)),_namedColorToRBA(e){const t=r[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){const t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){const t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),s=Number(n[0])/360,a=Number(n[1])/100,r=Number(n[2])/100;let i,o,l;if(0===a)return l=255*r,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};i=r<.5?r*(1+a):r+a-r*a;const c=2*r-i,d=[0,0,0];for(let e=0;e<3;e++)o=s+1/3*-(e-1),o<0&&o++,o>1&&o--,l=6*o<1?c+6*(i-c)*o:2*o<1?i:3*o<2?c+(i-c)*(2/3-o)*6:c,d[e]=255*l;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){const t={};for(const n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*s,radToDeg:e=>e*a,_degToRad:t=>(e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)),_radToDeg:t=>(e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)),_getRotation:n=>t.Konva.angleDeg?e.Util.radToDeg(n):n,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error("Konva error: "+e)},error(e){},warn(e){t.Konva.showWarnings},each(e,t){for(const n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,s,a,r){let i,o,l;const c=(e-n)*(e-n)+(t-s)*(t-s);if(0==c)i=e,o=t,l=(a-n)*(a-n)+(r-s)*(r-s);else{const d=((a-e)*(n-e)+(r-t)*(s-t))/c;d<0?(i=e,o=t,l=(e-a)*(e-a)+(t-r)*(t-r)):d>1?(i=n,o=s,l=(n-a)*(n-a)+(s-r)*(s-r)):(i=e+d*(n-e),o=t+d*(s-t),l=(i-a)*(i-a)+(o-r)*(o-r))}return[i,o,l]},_getProjectionToLine(t,n,s){const a=e.Util.cloneObject(t);let r=Number.MAX_VALUE;return n.forEach(function(i,o){if(!s&&o===n.length-1)return;const l=n[(o+1)%n.length],c=e.Util._getProjectionToSegment(i.x,i.y,l.x,l.y,t.x,t.y),d=c[0],u=c[1],h=c[2];h<r&&(a.x=d,a.y=u,r=h)}),a},_prepareArrayForTween(t,n,s){const a=[],r=[];if(t.length>n.length){const e=n;n=t,t=e}for(let e=0;e<t.length;e+=2)a.push({x:t[e],y:t[e+1]});for(let e=0;e<n.length;e+=2)r.push({x:n[e],y:n[e+1]});const i=[];return r.forEach(function(t){const n=e.Util._getProjectionToLine(t,a,s);i.push(n.x),i.push(n.y)}),i},_prepareToStringify(t){let n;t.visitedByCircularReferenceRemoval=!0;for(const s in t)if(t.hasOwnProperty(s)&&t[s]&&"object"==typeof t[s])if(n=Object.getOwnPropertyDescriptor(t,s),t[s].visitedByCircularReferenceRemoval||e.Util._isElement(t[s])){if(!n.configurable)return null;delete t[s]}else if(null===e.Util._prepareToStringify(t[s])){if(!n.configurable)return null;delete t[s]}return delete t.visitedByCircularReferenceRemoval,t},_assign(e,t){for(const n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){t.Konva.releaseCanvasOnDestroy&&e.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(e,t,n,s){let a=0,r=0,i=0,o=0;"number"==typeof s?a=r=i=o=Math.min(s,t/2,n/2):(a=Math.min(s[0]||0,t/2,n/2),r=Math.min(s[1]||0,t/2,n/2),o=Math.min(s[2]||0,t/2,n/2),i=Math.min(s[3]||0,t/2,n/2)),e.moveTo(a,0),e.lineTo(t-r,0),e.arc(t-r,r,r,3*Math.PI/2,0,!1),e.lineTo(t,n-o),e.arc(t-o,n-o,o,0,Math.PI/2,!1),e.lineTo(i,n),e.arc(i,n-i,i,Math.PI/2,Math.PI,!1),e.lineTo(0,a),e.arc(a,a,a,Math.PI,3*Math.PI/2,!1)}}}(NO)),NO}var PO,EO,RO={},AO={},TO={};function MO(){if(PO)return TO;PO=1,Object.defineProperty(TO,"__esModule",{value:!0}),TO.HitContext=TO.SceneContext=TO.Context=void 0;const e=_O(),t=CO();const n=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];let s=class{constructor(e){this.canvas=e,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(t,n){let s,a,r,i,o=this.traceArr,l=o.length,c="";for(s=0;s<l;s++)a=o[s],r=a.method,r?(i=a.args,c+=r,t?c+="()":e.Util._isArray(i[0])?c+="(["+i.join(",")+"])":(n&&(i=i.map(e=>"number"==typeof e?Math.floor(e):e)),c+="("+i.join(",")+")")):(c+=a.property,t||(c+="="+a.val)),c+=";";return c}clearTrace(){this.traceArr=[]}_trace(e){let t,n=this.traceArr;n.push(e),t=n.length,t>=100&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,s,a,r){this._context.arc(e,t,n,s,a,r)}arcTo(e,t,n,s,a){this._context.arcTo(e,t,n,s,a)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,s,a,r){this._context.bezierCurveTo(e,t,n,s,a,r)}clearRect(e,t,n,s){this._context.clearRect(e,t,n,s)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,s){return this._context.createLinearGradient(e,t,n,s)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,s,a,r){return this._context.createRadialGradient(e,t,n,s,a,r)}drawImage(e,t,n,s,a,r,i,o,l){const c=arguments,d=this._context;3===c.length?d.drawImage(e,t,n):5===c.length?d.drawImage(e,t,n,s,a):9===c.length&&d.drawImage(e,t,n,s,a,r,i,o,l)}ellipse(e,t,n,s,a,r,i,o){this._context.ellipse(e,t,n,s,a,r,i,o)}isPointInPath(e,t,n,s){return n?this._context.isPointInPath(n,e,t,s):this._context.isPointInPath(e,t,s)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,s){this._context.fillRect(e,t,n,s)}strokeRect(e,t,n,s){this._context.strokeRect(e,t,n,s)}fillText(e,t,n,s){s?this._context.fillText(e,t,n,s):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,s){return this._context.getImageData(e,t,n,s)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,s){this._context.rect(e,t,n,s)}roundRect(e,t,n,s,a){this._context.roundRect(e,t,n,s,a)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,s){this._context.quadraticCurveTo(e,t,n,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,s,a,r){this._context.setTransform(e,t,n,s,a,r)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,s){this._context.strokeText(e,t,n,s)}transform(e,t,n,s,a,r){this._context.transform(e,t,n,s,a,r)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let t,s,a=this,r=n.length,i=this.setAttr;const o=function(t){let n,r=a[t];a[t]=function(){return s=function(t){const n=[],s=t.length,a=e.Util;for(let e=0;e<s;e++){let s=t[e];a._isNumber(s)?s=Math.round(1e3*s)/1e3:a._isString(s)||(s+=""),n.push(s)}return n}(Array.prototype.slice.call(arguments,0)),n=r.apply(a,arguments),a._trace({method:t,args:s}),n}};for(t=0;t<r;t++)o(n[t]);a.setAttr=function(){i.apply(a,arguments);const e=arguments[0];let t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),a._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||"source-over"===t||this.setAttr("globalCompositeOperation",t)}};TO.Context=s,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(e){Object.defineProperty(s.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});TO.SceneContext=class extends s{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&"color"===n)return void this._fillColor(e);const s=e.getFillPatternImage();if(s&&"pattern"===n)return void this._fillPattern(e);const a=e.getFillLinearGradientColorStops();if(a&&"linear-gradient"===n)return void this._fillLinearGradient(e);const r=e.getFillRadialGradientColorStops();r&&"radial-gradient"===n?this._fillRadialGradient(e):t?this._fillColor(e):s?this._fillPattern(e):a?this._fillLinearGradient(e):r&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),a=this.createLinearGradient(t.x,t.y,n.x,n.y);if(s){for(let e=0;e<s.length;e+=2)a.addColorStop(s[e],s[e+1]);this.setAttr("strokeStyle",a)}}_stroke(e){const t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,s;const a=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",r=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,i=null!==(s=e.getShadowOffset())&&void 0!==s?s:{x:0,y:0},o=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=o.x*l,d=o.y*l;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",r*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",i.x*c),this.setAttr("shadowOffsetY",i.y*d)}};return TO.HitContext=class extends s{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e);const n=e.hitStrokeWidth(),s="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}},TO}function DO(){if(EO)return AO;EO=1,Object.defineProperty(AO,"__esModule",{value:!0}),AO.HitCanvas=AO.SceneCanvas=AO.Canvas=void 0;const e=_O(),t=MO(),n=CO();let s;let a=class{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const a=(t||{}).pixelRatio||n.Konva.pixelRatio||function(){if(s)return s;const t=e.Util.createCanvasElement(),a=t.getContext("2d");return s=(n.Konva._global.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),e.Util.releaseCanvas(t),s}();this.pixelRatio=a,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch(s){try{return this._canvas.toDataURL()}catch(wW){return e.Util.error("Unable to get data URL. "+wW.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};AO.Canvas=a;AO.SceneCanvas=class extends a{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new t.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}};return AO.HitCanvas=class extends a{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(e.width,e.height)}},AO}var LO,FO={};function IO(){return LO||(LO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=CO(),n=_O();e.DD={get isDragging(){let t=!1;return e.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&(t=!0)}),t},justDragged:!1,get node(){let t;return e.DD._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const s=[];e.DD._dragElements.forEach((e,a)=>{const{node:r}=e,i=r.getStage();i.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=n.Util._getFirstPointerId(t));const o=i._changedPointerPositions.find(t=>t.id===e.pointerId);if(o){if("dragging"!==e.dragStatus){const n=r.dragDistance();if(Math.max(Math.abs(o.x-e.startPointerPos.x),Math.abs(o.y-e.startPointerPos.y))<n)return;if(r.startDrag({evt:t}),!r.isDragging())return}r._setDragPosition(t,e),s.push(r)}}),s.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:r}=a,i=r.getStage();n&&i.setPointersPositions(n);if(!i._changedPointerPositions.find(e=>e.id===a.pointerId))return;"dragging"!==a.dragStatus&&"stopped"!==a.dragStatus||(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const o=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;o&&-1===s.indexOf(o)&&s.push(o)}),s.forEach(e=>{e.draw()})},_endDragAfter(t){e.DD._dragElements.forEach((n,s)=>{"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))}(FO)),FO}var OO,zO,BO,$O={},UO={};function VO(){if(OO)return UO;OO=1,Object.defineProperty(UO,"__esModule",{value:!0}),UO.RGBComponent=function(e){if(e>255)return 255;if(e<0)return 0;return Math.round(e)},UO.alphaComponent=function(e){if(e>1)return 1;if(e<1e-4)return 1e-4;return e},UO.getNumberValidator=function(){if(e.Konva.isUnminified)return function(e,s){return t.Util._isNumber(e)||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a number.'),e}},UO.getNumberOrArrayOfNumbersValidator=function(s){if(e.Konva.isUnminified)return function(e,a){let r=t.Util._isNumber(e),i=t.Util._isArray(e)&&e.length==s;return r||i||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be a number or Array<number>('+s+")"),e}},UO.getNumberOrAutoValidator=function(){if(e.Konva.isUnminified)return function(e,s){return t.Util._isNumber(e)||"auto"===e||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a number or "auto".'),e}},UO.getStringValidator=function(){if(e.Konva.isUnminified)return function(e,s){return t.Util._isString(e)||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a string.'),e}},UO.getStringOrGradientValidator=function(){if(e.Konva.isUnminified)return function(e,s){const a=t.Util._isString(e),r="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return a||r||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a string or a native gradient.'),e}},UO.getFunctionValidator=function(){if(e.Konva.isUnminified)return function(e,s){return t.Util._isFunction(e)||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a function.'),e}},UO.getNumberArrayValidator=function(){if(e.Konva.isUnminified)return function(e,s){const a=Int8Array?Object.getPrototypeOf(Int8Array):null;return a&&e instanceof a||(t.Util._isArray(e)?e.forEach(function(e){t.Util._isNumber(e)||t.Util.warn('"'+s+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")}):t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a array of numbers.')),e}},UO.getBooleanValidator=function(){if(e.Konva.isUnminified)return function(e,s){return!0===e||!1===e||t.Util.warn(n(e)+' is a not valid value for "'+s+'" attribute. The value should be a boolean.'),e}},UO.getComponentValidator=function(s){if(e.Konva.isUnminified)return function(e,a){return null==e||t.Util.isObject(e)||t.Util.warn(n(e)+' is a not valid value for "'+a+'" attribute. The value should be an object with properties '+s),e}};const e=CO(),t=_O();function n(e){return t.Util._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||t.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}return UO}function qO(){return zO||(zO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=_O(),n=VO(),s="get",a="set";e.Factory={addGetterSetter(t,n,s,a,r){e.Factory.addGetter(t,n,s),e.Factory.addSetter(t,n,a,r),e.Factory.addOverloadedGetterSetter(t,n)},addGetter(e,n,a){const r=s+t.Util._capitalize(n);e.prototype[r]=e.prototype[r]||function(){const e=this.attrs[n];return void 0===e?a:e}},addSetter(n,s,r,i){const o=a+t.Util._capitalize(s);n.prototype[o]||e.Factory.overWriteSetter(n,s,r,i)},overWriteSetter(e,n,s,r){const i=a+t.Util._capitalize(n);e.prototype[i]=function(e){return s&&null!=e&&(e=s.call(this,e,n)),this._setAttr(n,e),r&&r.call(this),this}},addComponentsGetterSetter(r,i,o,l,c){const d=o.length,u=t.Util._capitalize,h=s+u(i),m=a+u(i);r.prototype[h]=function(){const e={};for(let t=0;t<d;t++){const n=o[t];e[n]=this.getAttr(i+u(n))}return e};const p=(0,n.getComponentValidator)(o);r.prototype[m]=function(e){const t=this.attrs[i];l&&(e=l.call(this,e,i)),p&&p.call(this,e,i);for(const n in e)e.hasOwnProperty(n)&&this._setAttr(i+u(n),e[n]);return e||o.forEach(e=>{this._setAttr(i+u(e),void 0)}),this._fireChangeEvent(i,t,e),c&&c.call(this),this},e.Factory.addOverloadedGetterSetter(r,i)},addOverloadedGetterSetter(e,n){const r=t.Util._capitalize(n),i=a+r,o=s+r;e.prototype[n]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(n,a,r,i){t.Util.error("Adding deprecated "+a);const o=s+t.Util._capitalize(a),l=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[o]=function(){t.Util.error(l);const e=this.attrs[a];return void 0===e?r:e},e.Factory.addSetter(n,a,i,function(){t.Util.error(l)}),e.Factory.addOverloadedGetterSetter(n,a)},backCompat(e,n){t.Util.each(n,function(n,r){const i=e.prototype[r],o=s+t.Util._capitalize(n),l=a+t.Util._capitalize(n);function c(){i.apply(this,arguments),t.Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}e.prototype[n]=c,e.prototype[o]=c,e.prototype[l]=c})},afterSetFilter(){this._filterUpToDate=!1}}}($O)),$O}function HO(){if(BO)return RO;BO=1,Object.defineProperty(RO,"__esModule",{value:!0}),RO.Node=void 0;const e=DO(),t=IO(),n=qO(),s=CO(),a=_O(),r=VO(),i="absoluteOpacity",o="allEventListeners",l="absoluteTransform",c="absoluteScale",d="canvas",u="listening",h="Shape",m=" ",p="stage",f="transform",g="visible",x=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(m);let v=1;class y{constructor(e){this._id=v++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==f&&e!==l||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){let n=this._cache.get(e);return(void 0===n||(e===f||e===l)&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const n=t.map(e=>e+"Change.konva").join(m);this.on(n,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:e,filter:t,hit:n,buffer:s}=this._cache.get(d);a.Util.releaseCanvas(e,t,n,s),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let s={};void 0!==n.x&&void 0!==n.y&&void 0!==n.width&&void 0!==n.height||(s=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(n.width||s.width),o=Math.ceil(n.height||s.height),l=n.pixelRatio,u=void 0===n.x?Math.floor(s.x):n.x,h=void 0===n.y?Math.floor(s.y):n.y,m=n.offset||0,p=n.drawBorder||!1,f=n.hitCanvasPixelRatio||1;if(!r||!o)return void a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");r+=2*m+(Math.abs(Math.round(s.x)-u)>.5?1:0),o+=2*m+(Math.abs(Math.round(s.y)-h)>.5?1:0),u-=m,h-=m;const g=new e.SceneCanvas({pixelRatio:l,width:r,height:o}),x=new e.SceneCanvas({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),v=new e.HitCanvas({pixelRatio:f,width:r,height:o}),y=g.getContext(),b=v.getContext(),w=new e.SceneCanvas({width:g.width/g.pixelRatio+Math.abs(u),height:g.height/g.pixelRatio+Math.abs(h),pixelRatio:g.pixelRatio}),S=w.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,!1===n.imageSmoothingEnabled&&(g.getContext()._context.imageSmoothingEnabled=!1,x.getContext()._context.imageSmoothingEnabled=!1),y.save(),b.save(),S.save(),y.translate(-u,-h),b.translate(-u,-h),S.translate(-u,-h),w.x=u,w.y=h,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(c),this.drawScene(g,this,w),this.drawHit(v,this),this._isUnderCache=!1,y.restore(),b.restore(),p&&(y.save(),y.beginPath(),y.rect(0,0,r,o),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set(d,{scene:g,filter:x,hit:v,buffer:w,x:u,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let s=1/0,a=1/0,r=-1/0,i=-1/0;const o=this.getAbsoluteTransform(t);return n.forEach(function(e){const t=o.point(e);void 0===s&&(s=r=t.x,a=i=t.y),s=Math.min(s,t.x),a=Math.min(a,t.y),r=Math.max(r,t.x),i=Math.max(i,t.y)}),{x:s,y:a,width:r-s,height:i-a}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const n=this._getCachedSceneCanvas(),s=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/s,n.height/s),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e,t,n,s,r=this.filters(),i=this._getCanvasCache(),o=i.scene,l=i.filter,c=l.getContext();if(r){if(!this._filterUpToDate){const i=o.pixelRatio;l.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(e=r.length,c.clear(),c.drawImage(o._canvas,0,0,o.getWidth()/i,o.getHeight()/i),t=c.getImageData(0,0,l.getWidth(),l.getHeight()),n=0;n<e;n++)s=r[n],"function"==typeof s?(s.call(this,t),c.putImageData(t,0,0)):a.Util.error("Filter should be type of function, but got "+typeof s+" instead. Please check correct filters")}catch(d){a.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return o}on(e,t){if(this._cache&&this._cache.delete(o),3===arguments.length)return this._delegate.apply(this,arguments);const n=e.split(m);for(let s=0;s<n.length;s++){const e=n[s].split("."),a=e[0],r=e[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:r,handler:t})}return this}off(e,t){let n,s,a,r,i,l,c=(e||"").split(m),d=c.length;if(this._cache&&this._cache.delete(o),!e)for(s in this.eventListeners)this._off(s);for(n=0;n<d;n++)if(a=c[n],r=a.split("."),i=r[0],l=r[1],i)this.eventListeners[i]&&this._off(i,l,t);else for(s in this.eventListeners)this._off(s,l,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(e){t.call(this,e.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){const s=this;this.on(e,function(e){const r=e.target.findAncestors(t,!0,s);for(let t=0;t<r.length;t++)(e=a.Util.cloneObject(e)).currentTarget=r[t],n.call(r[t],e)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(u)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+a.Util._capitalize(e);return a.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,n;if(!e)return this;for(t in e)"children"!==t&&(n="set"+a.Util._capitalize(t),a.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(u,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(g,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const a=this.getLayer();let r=!1;t.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===a)&&(r=!0)});const i=!n&&!s.Konva.hitOnDragEnabled&&(r||s.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e,t,n,s,a=this.getDepth(),r=this,i=0;const o=this.getStage();return"Stage"!==r.nodeType&&o&&function o(l){for(e=[],t=l.length,n=0;n<t;n++)s=l[n],i++,s.nodeType!==h&&(e=e.concat(s.getChildren().slice())),s._id===r._id&&(n=t);e.length>0&&e[0].getDepth()<=a&&o(e)}(o.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(f),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);const s=this.getAbsoluteTransform(e).getMatrix(),r=new a.Transform,i=this.offset();return r.m=s.slice(),r.translate(i.x,i.y),r.getTranslation()}setAbsolutePosition(e){const{x:t,y:n,...s}=this._clearTransform();this.attrs.x=t,this.attrs.y=n,this._clearCache(f);const a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(e.x,e.y),e={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(s),this.setPosition({x:e.x,y:e.y}),this._clearCache(f),this._clearSelfAndDescendantCache(l),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,n=e.y,s=this.x(),a=this.y();return void 0!==t&&(s+=t),void 0!==n&&(a+=n),this.setPosition({x:s,y:a}),this}_eachAncestorReverse(e,t){let n,s,a=[],r=this.getParent();if(!t||t._id!==this._id){for(a.unshift(this);r&&(!t||r._id!==t._id);)a.unshift(r),r=r.parent;for(n=a.length,s=0;s<n;s++)e(a[s])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&a.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e,t,n,s,r,i=this.getAttrs();const o={attrs:{},className:this.getClassName()};for(e in i)t=i[e],r=a.Util.isObject(t)&&!a.Util._isPlainObject(t)&&!a.Util._isArray(t),r||(n="function"==typeof this[e]&&this[e],delete i[e],s=n?n.call(this):null,i[e]=t,s!==t&&(o.attrs[e]=t));return a.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){const s=[];t&&this._isMatch(e)&&s.push(this);let a=this.parent;for(;a;){if(a===n)return s;a._isMatch(e)&&s.push(a),a=a.parent}return s}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);let t,n,s=e.replace(/ /g,"").split(","),r=s.length;for(t=0;t<r;t++)if(n=s[t],a.Util.isValidSelector(n)||(a.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(p,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new a.Transform,this._eachAncestorReverse(function(e){const n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())},e),t;{t=this._cache.get(l)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const e=this.transformsEnabled();if("all"===e)t.multiply(this.getTransform());else if("position"===e){const e=this.attrs.x||0,n=this.attrs.y||0,s=this.attrs.offsetX||0,a=this.attrs.offsetY||0;t.translate(e-s,n-a)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(f,this._getTransform)}_getTransform(){var e,t;const n=this._cache.get(f)||new a.Transform;n.reset();const r=this.x(),i=this.y(),o=s.Konva.getAngle(this.rotation()),l=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,c=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,d=this.attrs.skewX||0,u=this.attrs.skewY||0,h=this.attrs.offsetX||0,m=this.attrs.offsetY||0;return 0===r&&0===i||n.translate(r,i),0!==o&&n.rotate(o),0===d&&0===u||n.skew(d,u),1===l&&1===c||n.scale(l,c),0===h&&0===m||n.translate(-1*h,-1*m),n.dirty=!1,n}clone(e){let t,n,s,r,i,o=a.Util.cloneObject(this.attrs);for(t in e)o[t]=e[t];const l=new this.constructor(o);for(t in this.eventListeners)for(n=this.eventListeners[t],s=n.length,r=0;r<s;r++)i=n[r],i.name.indexOf("konva")<0&&(l.eventListeners[t]||(l.eventListeners[t]=[]),l.eventListeners[t].push(i));return l}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),s=this.getStage(),a=void 0!==t.x?t.x:Math.floor(n.x),r=void 0!==t.y?t.y:Math.floor(n.y),i=t.pixelRatio||1,o=new e.SceneCanvas({width:t.width||Math.ceil(n.width)||(s?s.width():0),height:t.height||Math.ceil(n.height)||(s?s.height():0),pixelRatio:i}),l=o.getContext(),c=new e.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(a),height:o.height/o.pixelRatio+Math.abs(r),pixelRatio:o.pixelRatio});return!1===t.imageSmoothingEnabled&&(l._context.imageSmoothingEnabled=!1),l.save(),(a||r)&&l.translate(-1*a,-1*r),this.drawScene(o,void 0,c),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){const t=(e=e||{}).mimeType||null,n=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(s),s}toImage(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,a.Util._urlToImage(this.toDataURL(e),function(e){t(e),null==n||n(e)})}catch(wW){n(wW)}})}toBlob(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob(e=>{t(e),null==n||n(e)},null==e?void 0:e.mimeType,null==e?void 0:e.quality)}catch(wW){n(wW)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(e,t,n){let s,a,r,i=this.eventListeners[e];for(s=0;s<i.length;s++)if(a=i[s].name,r=i[s].handler,!("konva"===a&&"konva"!==t||t&&a!==t||n&&n!==r)){if(i.splice(s,1),0===i.length){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){const t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();if(!t)return!1;return-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){const t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){const n=this["set"+a.Util._capitalize(e)];return a.Util._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(s.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){const n=this.attrs[e];(n!==t||a.Util.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){let s;void 0!==n&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,s,n))}_fireAndBubble(e,t,n){t&&this.nodeType===h&&(t.target=this);const s=["mouseenter","mouseleave","pointerenter","pointerleave","touchenter","touchleave"];if(!(-1!==s.indexOf(e)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(e,t);const a=-1!==s.indexOf(e)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!a&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n,s;const a=null!==(t=this._cache.get(o))&&void 0!==t?t:{};let r=null==a?void 0:a[e];if(void 0===r){r=[];let t=Object.getPrototypeOf(this);for(;t;){const a=null!==(s=null===(n=t.eventListeners)||void 0===n?void 0:n[e])&&void 0!==s?s:[];r.push(...a),t=Object.getPrototypeOf(t)}a[e]=r,this._cache.set(o,a)}return r}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(let a=0;a<n.length;a++)n[a].handler.call(this,t);const s=this.eventListeners[e];if(s)for(let a=0;a<s.length;a++)s[a].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,s=this.getStage(),a=this.getAbsolutePosition();if(!s)return;const r=s._getPointerById(n)||s._changedPointerPositions[0]||a;t.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-a.x,y:r.y-a.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){t.DD._dragElements.has(this._id)||this._createDragElement(e);t.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(!n)return;let s={x:n.x-t.offset.x,y:n.y-t.offset.y};const r=this.dragBoundFunc();if(void 0!==r){const t=r.call(this,s,e);t?s=t:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===s.x&&this._lastPos.y===s.y||(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(e){const n=t.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),t.DD._endDragBefore(e),t.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=t.DD._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(void 0!==e.evt.button)||s.Konva.dragButtons.indexOf(e.evt.button)>=0))return;if(this.isDragging())return;let n=!1;t.DD._dragElements.forEach(e=>{this.isAncestorOf(e.node)&&(n=!0)}),n||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();if(!this.getStage())return;const e=t.DD._dragElements.get(this._id),n=e&&"dragging"===e.dragStatus,s=e&&"ready"===e.dragStatus;n?this.stopDrag():s&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return a.Util.haveIntersection(n,this.getClientRect())}static create(e,t){return a.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let n,r,i,o=y.prototype.getClassName.call(e),l=e.children;t&&(e.attrs.container=t),s.Konva[o]||(a.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");if(n=new(0,s.Konva[o])(e.attrs),l)for(r=l.length,i=0;i<r;i++)n.add(y._createNode(l[i]));return n}}RO.Node=y,y.prototype.nodeType="Node",y.prototype._attrsAffectingSize=[],y.prototype.eventListeners={},y.prototype.on.call(y.prototype,x,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(f),this._clearSelfAndDescendantCache(l))}),y.prototype.on.call(y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(g)}),y.prototype.on.call(y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(u)}),y.prototype.on.call(y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const b=n.Factory.addGetterSetter;return b(y,"zIndex"),b(y,"absolutePosition"),b(y,"position"),b(y,"x",0,(0,r.getNumberValidator)()),b(y,"y",0,(0,r.getNumberValidator)()),b(y,"globalCompositeOperation","source-over",(0,r.getStringValidator)()),b(y,"opacity",1,(0,r.getNumberValidator)()),b(y,"name","",(0,r.getStringValidator)()),b(y,"id","",(0,r.getStringValidator)()),b(y,"rotation",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"scale",["x","y"]),b(y,"scaleX",1,(0,r.getNumberValidator)()),b(y,"scaleY",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"skew",["x","y"]),b(y,"skewX",0,(0,r.getNumberValidator)()),b(y,"skewY",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"offset",["x","y"]),b(y,"offsetX",0,(0,r.getNumberValidator)()),b(y,"offsetY",0,(0,r.getNumberValidator)()),b(y,"dragDistance",void 0,(0,r.getNumberValidator)()),b(y,"width",0,(0,r.getNumberValidator)()),b(y,"height",0,(0,r.getNumberValidator)()),b(y,"listening",!0,(0,r.getBooleanValidator)()),b(y,"preventDefault",!0,(0,r.getBooleanValidator)()),b(y,"filters",void 0,function(e){return this._filterUpToDate=!1,e}),b(y,"visible",!0,(0,r.getBooleanValidator)()),b(y,"transformsEnabled","all",(0,r.getStringValidator)()),b(y,"size"),b(y,"dragBoundFunc"),b(y,"draggable",!1,(0,r.getBooleanValidator)()),n.Factory.backCompat(y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),RO}var GO,KO={};function WO(){if(GO)return KO;GO=1,Object.defineProperty(KO,"__esModule",{value:!0}),KO.Container=void 0;const e=qO(),t=HO(),n=VO();let s=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(let t=0;t<e.length;t++)this.add(e[t]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const n=[];return this._descendants(s=>{const a=s._isMatch(e);return a&&n.push(s),!(!a||!t)}),n}_descendants(e){let t=!1;const n=this.getChildren();for(const s of n){if(t=e(s),t)return!0;if(s.hasChildren()&&(t=s._descendants(e),t))return!0}return!1}toObject(){const e=t.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const n=t.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(e){n.add(e.clone())}),n}getAllIntersections(e){const t=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&t.push(n)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach(function(t){t._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach(function(e,t){e.index=t}),this._requestDraw()}drawScene(e,t,n){const s=this.getLayer(),a=e||s&&s.getCanvas(),r=a&&a.getContext(),i=this._getCanvasCache(),o=i&&i.scene,l=a&&a.isCache;if(!this.isVisible()&&!l)return this;if(o){r.save();const e=this.getAbsoluteTransform(t).getMatrix();r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",a,t,n);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const n=this.getLayer(),s=e||n&&n.hitCanvas,a=s&&s.getContext(),r=this._getCanvasCache();if(r&&r.hit){a.save();const e=this.getAbsoluteTransform(t).getMatrix();a.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(a),a.restore()}else this._drawChildren("drawHit",s,t);return this}_drawChildren(e,t,n,s){var a;const r=t&&t.getContext(),i=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),c="number"==typeof i&&"number"==typeof o||l,d=n===this;if(c){r.save();const e=this.getAbsoluteTransform(n);let t,s=e.getMatrix();if(r.transform(s[0],s[1],s[2],s[3],s[4],s[5]),r.beginPath(),l)t=l.call(this,r,this);else{const e=this.clipX(),t=this.clipY();r.rect(e||0,t||0,i,o)}r.clip.apply(r,t),s=e.copy().invert().getMatrix(),r.transform(s[0],s[1],s[2],s[3],s[4],s[5])}const u=!d&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;u&&(r.save(),r._applyGlobalCompositeOperation(this)),null===(a=this.children)||void 0===a||a.forEach(function(a){a[e](t,n,s)}),u&&r.restore(),c&&r.restore()}getClientRect(e={}){var t;const n=e.skipTransform,s=e.relativeTo;let a,r,i,o,l={x:1/0,y:1/0,width:0,height:0};const c=this;null===(t=this.children)||void 0===t||t.forEach(function(t){if(!t.visible())return;const n=t.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===n.width&&0===n.height||(void 0===a?(a=n.x,r=n.y,i=n.x+n.width,o=n.y+n.height):(a=Math.min(a,n.x),r=Math.min(r,n.y),i=Math.max(i,n.x+n.width),o=Math.max(o,n.y+n.height)))});const d=this.find("Shape");let u=!1;for(let h=0;h<d.length;h++){if(d[h]._isVisible(this)){u=!0;break}}return l=u&&void 0!==a?{x:a,y:r,width:i-a,height:o-r}:{x:0,y:0,width:0,height:0},n?l:this._transformedRect(l,s)}};return KO.Container=s,e.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(s,"clipX",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"clipY",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"clipWidth",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"clipHeight",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"clipFunc"),KO}var QO,YO,XO={},ZO={};function JO(){if(QO)return ZO;QO=1,Object.defineProperty(ZO,"__esModule",{value:!0}),ZO.getCapturedShape=function(e){return t.get(e)},ZO.createEvent=s,ZO.hasPointerCapture=function(e,n){return t.get(e)===n},ZO.setPointerCapture=function(e,r){a(e);if(!r.getStage())return;t.set(e,r),n&&r._fire("gotpointercapture",s(new PointerEvent("gotpointercapture")))},ZO.releaseCapture=a;const e=CO(),t=new Map,n=void 0!==e.Konva._global.PointerEvent;function s(e){return{evt:e,pointerId:e.pointerId}}function a(e,a){const r=t.get(e);if(!r)return;const i=r.getStage();i&&i.content,t.delete(e),n&&r._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return ZO}var ez,tz,nz={},sz={};function az(){return ez||(ez=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=CO(),n=_O(),s=qO(),a=HO(),r=VO(),i=CO(),o=JO(),l="hasShadow",c="shadowRGBA",d="patternImage",u="linearGradient",h="radialGradient";let m;function p(){return m||(m=n.Util.createCanvasElement().getContext("2d"),m)}e.shapes={};class f extends a.Node{constructor(t){let s;for(super(t);s=n.Util.getRandomColor(),!s||s in e.shapes;);this.colorKey=s,e.shapes[s]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const s=new n.Transform;s.translate(this.fillPatternX(),this.fillPatternY()),s.rotate(t.Konva.getAngle(this.fillPatternRotation())),s.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),s.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const a=s.getMatrix(),r="undefined"==typeof DOMMatrix?{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}:new DOMMatrix(a);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=p(),n=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),a=t.createLinearGradient(n.x,n.y,s.x,s.y);for(let r=0;r<e.length;r+=2)a.addColorStop(e[r],e[r+1]);return a}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=p(),n=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),a=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let r=0;r<e.length;r+=2)a.addColorStop(e[r],e[r+1]);return a}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=n.Util.colorToRGBA(this.shadowColor());return e?"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")":void 0}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const n=t.bufferHitCanvas;n.getContext().clear(),this.drawHit(n,void 0,!0);return n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;const n=e||this.hasFill(),s=this.hasStroke(),a=1!==this.getAbsoluteOpacity();if(n&&s&&a)return!0;const r=this.hasShadow(),i=this.shadowForStrokeEnabled();return!!(n&&s&&r&&i)}setStrokeHitEnabled(e){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,n=this.getParent();for(;n;){if(n.isCached()){t=!0;break}n=n.getParent()}const s=e.skipTransform,a=e.relativeTo||t&&this.getStage()||void 0,r=this.getSelfRect(),i=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+i,l=r.height+i,c=!e.skipShadow&&this.hasShadow(),d=c?this.shadowOffsetX():0,u=c?this.shadowOffsetY():0,h=o+Math.abs(d),m=l+Math.abs(u),p=c&&this.shadowBlur()||0,f={width:h+2*p,height:m+2*p,x:-(i/2+p)+Math.min(d,0)+r.x,y:-(i/2+p)+Math.min(u,0)+r.y};return s?f:this._transformedRect(f,a)}drawScene(e,t,n){const s=this.getLayer(),a=(e||s.getCanvas()).getContext(),r=this._getCanvasCache(),i=this.getSceneFunc(),o=this.hasShadow();let l;const c=t===this;if(!this.isVisible()&&!c)return this;if(r){a.save();const e=this.getAbsoluteTransform(t).getMatrix();return a.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!i)return this;if(a.save(),this._useBufferCanvas()){l=this.getStage();const e=n||l.bufferCanvas,s=e.getContext();s.clear(),s.save(),s._applyLineJoin(this);const r=this.getAbsoluteTransform(t).getMatrix();s.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.call(this,s,this),s.restore();const c=e.pixelRatio;o&&a._applyShadow(this),a._applyOpacity(this),a._applyGlobalCompositeOperation(this),a.drawImage(e._canvas,e.x||0,e.y||0,e.width/c,e.height/c)}else{if(a._applyLineJoin(this),!c){const e=this.getAbsoluteTransform(t).getMatrix();a.transform(e[0],e[1],e[2],e[3],e[4],e[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)}o&&a._applyShadow(this),i.call(this,a,this)}return a.restore(),this}drawHit(e,t,s=!1){if(!this.shouldDrawHit(t,s))return this;const a=this.getLayer(),r=e||a.hitCanvas,i=r&&r.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){i.save();const e=this.getAbsoluteTransform(t).getMatrix();return i.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(i),i.restore(),this}if(!o)return this;i.save(),i._applyLineJoin(this);if(!(this===t)){const e=this.getAbsoluteTransform(t).getMatrix();i.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return o.call(this,i,this),i.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),s=this._getCachedSceneCanvas(),a=t.hit,r=a.getContext(),i=a.getWidth(),o=a.getHeight();r.clear(),r.drawImage(s._canvas,0,0,i,o);try{const t=r.getImageData(0,0,i,o),s=t.data,a=s.length,l=n.Util._hexToRgb(this.colorKey);for(let n=0;n<a;n+=4){s[n+3]>e?(s[n]=l.r,s[n+1]=l.g,s[n+2]=l.b,s[n+3]=255):s[n+3]=0}r.putImageData(t,0,0)}catch(l){n.Util.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(e){return o.hasPointerCapture(e,this)}setPointerCapture(e){o.setPointerCapture(e,this)}releaseCapture(e){o.releaseCapture(e,this)}}e.Shape=f,f.prototype._fillFunc=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},f.prototype._strokeFunc=function(e){e.stroke()},f.prototype._fillFuncHit=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},f.prototype._strokeFuncHit=function(e){e.stroke()},f.prototype._centroid=!1,f.prototype.nodeType="Shape",(0,i._registerNode)(f),f.prototype.eventListeners={},f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(l)}),f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(c)}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(d)}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(u)}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(h)}),s.Factory.addGetterSetter(f,"stroke",void 0,(0,r.getStringOrGradientValidator)()),s.Factory.addGetterSetter(f,"strokeWidth",2,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(f,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(f,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),s.Factory.addGetterSetter(f,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),s.Factory.addGetterSetter(f,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),s.Factory.addGetterSetter(f,"lineJoin"),s.Factory.addGetterSetter(f,"lineCap"),s.Factory.addGetterSetter(f,"sceneFunc"),s.Factory.addGetterSetter(f,"hitFunc"),s.Factory.addGetterSetter(f,"dash"),s.Factory.addGetterSetter(f,"dashOffset",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"shadowColor",void 0,(0,r.getStringValidator)()),s.Factory.addGetterSetter(f,"shadowBlur",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"shadowOpacity",1,(0,r.getNumberValidator)()),s.Factory.addComponentsGetterSetter(f,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(f,"shadowOffsetX",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"shadowOffsetY",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternImage"),s.Factory.addGetterSetter(f,"fill",void 0,(0,r.getStringOrGradientValidator)()),s.Factory.addGetterSetter(f,"fillPatternX",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternY",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(f,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(f,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(f,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(f,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(f,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(f,"fillEnabled",!0),s.Factory.addGetterSetter(f,"strokeEnabled",!0),s.Factory.addGetterSetter(f,"shadowEnabled",!0),s.Factory.addGetterSetter(f,"dashEnabled",!0),s.Factory.addGetterSetter(f,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(f,"fillPriority","color"),s.Factory.addComponentsGetterSetter(f,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(f,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),s.Factory.addComponentsGetterSetter(f,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(f,"fillPatternScaleX",1,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternScaleY",1,(0,r.getNumberValidator)()),s.Factory.addComponentsGetterSetter(f,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(f,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(f,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(f,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(f,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(f,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(f,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(f,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(f,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(f,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(f,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(f,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(f,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(f,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(f,"fillPatternRotation",0),s.Factory.addGetterSetter(f,"fillRule",void 0,(0,r.getStringValidator)()),s.Factory.backCompat(f,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(sz)),sz}function rz(){if(tz)return nz;tz=1,Object.defineProperty(nz,"__esModule",{value:!0}),nz.Layer=void 0;const e=_O(),t=WO(),n=HO(),s=qO(),a=DO(),r=VO(),i=az(),o=CO(),l=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],c=l.length;class d extends t.Container{constructor(e){super(e),this.canvas=new a.SceneCanvas,this.hitCanvas=new a.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),t&&t.parentNode&&e.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();"Group"!==n&&"Shape"!==n&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,n=!1;for(;;){for(let s=0;s<c;s++){const a=l[s],r=this._getIntersection({x:e.x+a.x*t,y:e.y+a.y*t}),i=r.shape;if(i)return i;if(n=!!r.antialiased,!r.antialiased)break}if(!n)return null;t+=1}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,s=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,a=s[3];if(255===a){const t=e.Util._rgbToHex(s[0],s[1],s[2]),n=i.shapes["#"+t];return n?{shape:n}:{antialiased:!0}}return a>0?{antialiased:!0}:{}}drawScene(e,n,s){const a=this.getLayer(),r=e||a&&a.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),t.Container.prototype.drawScene.call(this,r,n,s),this._fire("draw",{node:this}),this}drawHit(e,n){const s=this.getLayer(),a=e||s&&s.hitCanvas;return s&&s.clearBeforeDraw()&&s.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,a,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return nz.Layer=d,d.prototype.nodeType="Layer",(0,o._registerNode)(d),s.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(d,"clearBeforeDraw",!0),s.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,r.getBooleanValidator)()),nz}var iz,oz={};var lz,cz={};function dz(){if(lz)return cz;lz=1,Object.defineProperty(cz,"__esModule",{value:!0}),cz.Group=void 0;const e=_O(),t=WO(),n=CO();class s extends t.Container{_validateAdd(t){const n=t.getType();"Group"!==n&&"Shape"!==n&&e.Util.throw("You may only add groups and shapes to groups.")}}return cz.Group=s,s.prototype.nodeType="Group",(0,n._registerNode)(s),cz}var uz,hz={};function mz(){if(uz)return hz;uz=1,Object.defineProperty(hz,"__esModule",{value:!0}),hz.Animation=void 0;const e=CO(),t=_O(),n=e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return(new Date).getTime()};let s=class e{constructor(t,s){this.id=e.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=t,this.setLayers(s)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,n=t.length;for(let s=0;s<n;s++)if(t[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=e.animations,n=t.length;for(let e=0;e<n;e++)if(t[e].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),e._addAnimation(this),this}stop(){return e._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,n=this.animations,s=n.length;for(let a=0;a<s;a++)if(n[a].id===t){this.animations.splice(a,1);break}}static _runFrames(){const e={},t=this.animations;for(let s=0;s<t.length;s++){const a=t[s],r=a.layers,i=a.func;a._updateFrameObject(n());const o=r.length;let l;if(l=!i||!1!==i.call(a,a.frame),l)for(let t=0;t<o;t++){const n=r[t];void 0!==n._id&&(e[n._id]=n)}}for(const n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){const n=e;n.animations.length?(n._runFrames(),t.Util.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return hz.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1,hz}var pz,fz,gz={};function xz(){return fz||(fz=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=CO(),n=_O(),s=HO(),a=WO(),r=(YO||(YO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=_O(),n=qO(),s=WO(),a=CO(),r=DO(),i=IO(),o=CO(),l=JO(),c="mouseleave",d="mouseover",u="mouseenter",h="mousemove",m="mousedown",p="mouseup",f="pointermove",g="pointerdown",x="pointerup",v="pointercancel",y="pointerout",b="pointerleave",w="pointerover",S="pointerenter",j="contextmenu",C="touchstart",k="touchend",N="touchmove",_="touchcancel",P="wheel",E=[[u,"_pointerenter"],[m,"_pointerdown"],[h,"_pointermove"],[p,"_pointerup"],[c,"_pointerleave"],[C,"_pointerdown"],[N,"_pointermove"],[k,"_pointerup"],[_,"_pointercancel"],[d,"_pointerover"],[P,"_wheel"],[j,"_contextmenu"],[g,"_pointerdown"],[f,"_pointermove"],[x,"_pointerup"],[v,"_pointercancel"],[b,"_pointerleave"],["lostpointercapture","_lostpointercapture"]],R={mouse:{[y]:"mouseout",[b]:c,[w]:d,[S]:u,[f]:h,[g]:m,[x]:p,[v]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[y]:"touchout",[b]:"touchleave",[w]:"touchover",[S]:"touchenter",[f]:N,[g]:C,[x]:k,[v]:_,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[y]:y,[b]:b,[w]:w,[S]:S,[f]:f,[g]:g,[x]:x,[v]:v,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},A=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",T=e=>{const t=A(e);return"pointer"===t?a.Konva.pointerEventsEnabled&&R.pointer:"touch"===t?R.touch:"mouse"===t?R.mouse:void 0};function M(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}e.stages=[];class D extends s.Container{constructor(t){super(M(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{M(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n="Layer"===e.getType(),s="FastLayer"===e.getType();n||s||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){let t;if("."===e.charAt(0)){const t=e.slice(1);e=document.getElementsByClassName(t)[0]}else t="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let n=0;n<t;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),s.Container.prototype.clone.call(this,e)}destroy(){super.destroy();const n=this.content;n&&t.Util._isInDocument(n)&&this.container().removeChild(n);const s=e.stages.indexOf(this);return s>-1&&e.stages.splice(s,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(t.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new r.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,s=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),s.forEach(function(t){if(!t.isVisible())return;const s=t._toKonvaCanvas(e);n.drawImage(s._canvas,e.x,e.y,s.getWidth()/s.getPixelRatio(),s.getHeight()/s.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children;for(let n=t.length-1;n>=0;n--){const s=t[n].getIntersection(e);if(s)return s}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(n=>{n.setSize({width:e,height:t}),n.draw()})}add(e,...n){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}super.add(e);const s=this.children.length;return s>5&&t.Util.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),a.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return l.hasPointerCapture(e,this)}setPointerCapture(e){l.setPointerCapture(e,this)}releaseCapture(e){l.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&E.forEach(([e,t])=>{this.content.addEventListener(e,e=>{this[t](e)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=T(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=T(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=T(e.type),n=A(e.type);if(!t)return;this.setPointersPositions(e);const s=this._getTargetShape(n),r=!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled;s&&r?(s._fireAndBubble(t.pointerout,{evt:e}),s._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=T(e.type),n=A(e.type);if(!t)return;this.setPointersPositions(e);let s=!1;this._changedPointerPositions.forEach(r=>{const o=this.getIntersection(r);if(i.DD.justDragged=!1,a.Konva["_"+n+"ListenClick"]=!0,!o||!o.isListening())return void(this[n+"ClickStartShape"]=void 0);a.Konva.capturePointerEventsEnabled&&o.setPointerCapture(r.id),this[n+"ClickStartShape"]=o,o._fireAndBubble(t.pointerdown,{evt:e,pointerId:r.id}),s=!0;const l=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),s||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=T(e.type),n=A(e.type);if(!t)return;if(a.Konva.isDragging()&&i.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),(a.Konva.isDragging()||a.Konva.isTransforming())&&!a.Konva.hitOnDragEnabled)return;const s={};let r=!1;const o=this._getTargetShape(n);this._changedPointerPositions.forEach(a=>{const i=l.getCapturedShape(a.id)||this.getIntersection(a),c=a.id,d={evt:e,pointerId:c},u=o!==i;if(u&&o&&(o._fireAndBubble(t.pointerout,{...d},i),o._fireAndBubble(t.pointerleave,{...d},i)),i){if(s[i._id])return;s[i._id]=!0}i&&i.isListening()?(r=!0,u&&(i._fireAndBubble(t.pointerover,{...d},o),i._fireAndBubble(t.pointerenter,{...d},o),this[n+"targetShape"]=i),i._fireAndBubble(t.pointermove,{...d})):o&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:c}),this[n+"targetShape"]=null)}),r||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=T(e.type),n=A(e.type);if(!t)return;this.setPointersPositions(e);const s=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"],o={};let c=!1;this._changedPointerPositions.forEach(d=>{const u=l.getCapturedShape(d.id)||this.getIntersection(d);if(u){if(u.releaseCapture(d.id),o[u._id])return;o[u._id]=!0}const h=d.id,m={evt:e,pointerId:h};let p=!1;a.Konva["_"+n+"InDblClickWindow"]?(p=!0,clearTimeout(this[n+"DblTimeout"])):i.DD.justDragged||(a.Konva["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){a.Konva["_"+n+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),u&&u.isListening()?(c=!0,this[n+"ClickEndShape"]=u,u._fireAndBubble(t.pointerup,{...m}),a.Konva["_"+n+"ListenClick"]&&s&&s===u&&(u._fireAndBubble(t.pointerclick,{...m}),p&&r&&r===u&&u._fireAndBubble(t.pointerdblclick,{...m}))):(this[n+"ClickEndShape"]=null,a.Konva["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:h}),p&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:h}))}),c||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&"pointer"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(j,{evt:e}):this._fire(j,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(P,{evt:e}):this._fire(P,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=l.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(x,l.createEvent(e)),l.releaseCapture(e.pointerId)}_lostpointercapture(e){l.releaseCapture(e.pointerId)}setPointersPositions(e){const n=this._getContentPosition();let s=null,a=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-n.left)/n.scaleX,y:(e.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-n.left)/n.scaleX,y:(e.clientY-n.top)/n.scaleY})})):(s=(e.clientX-n.left)/n.scaleX,a=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:s,y:a},this._pointerPositions=[{x:s,y:a,id:t.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:s,y:a,id:t.Util._getFirstPointerId(e)}])}_setPointerPosition(e){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!a.Konva.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}e.Stage=D,D.prototype.nodeType="Stage",(0,o._registerNode)(D),n.Factory.addGetterSetter(D,"container"),a.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(e=>{e.batchDraw()})})}(XO)),XO),i=rz(),o=function(){if(iz)return oz;iz=1,Object.defineProperty(oz,"__esModule",{value:!0}),oz.FastLayer=void 0;const e=_O(),t=rz(),n=CO();let s=class extends t.Layer{constructor(t){super(t),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return oz.FastLayer=s,s.prototype.nodeType="FastLayer",(0,n._registerNode)(s),oz}(),l=dz(),c=IO(),d=az(),u=mz(),h=(pz||(pz=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=_O(),n=mz(),s=HO(),a=CO(),r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=["fill","stroke","shadowColor"];let o=0;class l{constructor(e,t,n,s,a,r,i){this.prop=e,this.propFunc=t,this.begin=s,this._pos=s,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=i,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=a-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class c{constructor(s){const i=this,d=s.node,u=d._id,h=s.easing||e.Easings.Linear,m=!!s.yoyo;let p,f;p=void 0===s.duration?.3:0===s.duration?.001:s.duration,this.node=d,this._id=o++;const g=d.getLayer()||(d instanceof a.Konva.Stage?d.getLayers():null);for(f in g||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){i.tween.onEnterFrame()},g),this.tween=new l(f,function(e){i._tweenFunc(e)},h,0,1,1e3*p,m),this._addListeners(),c.attrs[u]||(c.attrs[u]={}),c.attrs[u][this._id]||(c.attrs[u][this._id]={}),c.tweens[u]||(c.tweens[u]={}),s)void 0===r[f]&&this._addAttr(f,s[f]);this.reset(),this.onFinish=s.onFinish,this.onReset=s.onReset,this.onUpdate=s.onUpdate}_addAttr(e,n){const s=this.node,a=s._id;let r,o,l,d,u;const h=c.tweens[a][e];h&&delete c.attrs[a][h][e];let m=s.getAttr(e);if(t.Util._isArray(n))if(r=[],o=Math.max(n.length,m.length),"points"===e&&n.length!==m.length&&(n.length>m.length?(d=m,m=t.Util._prepareArrayForTween(m,n,s.closed())):(l=n,n=t.Util._prepareArrayForTween(n,m,s.closed()))),0===e.indexOf("fill"))for(let i=0;i<o;i++)if(i%2==0)r.push(n[i]-m[i]);else{const e=t.Util.colorToRGBA(m[i]);u=t.Util.colorToRGBA(n[i]),m[i]=e,r.push({r:u.r-e.r,g:u.g-e.g,b:u.b-e.b,a:u.a-e.a})}else for(let t=0;t<o;t++)r.push(n[t]-m[t]);else-1!==i.indexOf(e)?(m=t.Util.colorToRGBA(m),u=t.Util.colorToRGBA(n),r={r:u.r-m.r,g:u.g-m.g,b:u.b-m.b,a:u.a-m.a}):r=n-m;c.attrs[a][this._id][e]={start:m,diff:r,end:n,trueEnd:l,trueStart:d},c.tweens[a][e]=this._id}_tweenFunc(e){const n=this.node,s=c.attrs[n._id][this._id];let a,r,o,l,d,u,h,m;for(a in s){if(r=s[a],o=r.start,l=r.diff,m=r.end,t.Util._isArray(o))if(d=[],h=Math.max(o.length,m.length),0===a.indexOf("fill"))for(u=0;u<h;u++)u%2==0?d.push((o[u]||0)+l[u]*e):d.push("rgba("+Math.round(o[u].r+l[u].r*e)+","+Math.round(o[u].g+l[u].g*e)+","+Math.round(o[u].b+l[u].b*e)+","+(o[u].a+l[u].a*e)+")");else for(u=0;u<h;u++)d.push((o[u]||0)+l[u]*e);else d=-1!==i.indexOf(a)?"rgba("+Math.round(o.r+l.r*e)+","+Math.round(o.g+l.g*e)+","+Math.round(o.b+l.b*e)+","+(o.a+l.a*e)+")":o+l*e;n.setAttr(a,d)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,n=c.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const s in n)delete c.tweens[e][s];delete c.attrs[e][t],c.tweens[e]&&(0===Object.keys(c.tweens[e]).length&&delete c.tweens[e],0===Object.keys(c.attrs[e]).length&&delete c.attrs[e])}}e.Tween=c,c.attrs={},c.tweens={},s.Node.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new c(e).play()},e.Easings={BackEaseIn(e,t,n,s){const a=1.70158;return n*(e/=s)*e*((a+1)*e-a)+t},BackEaseOut(e,t,n,s){const a=1.70158;return n*((e=e/s-1)*e*((a+1)*e+a)+1)+t},BackEaseInOut(e,t,n,s){let a=1.70158;return(e/=s/2)<1?n/2*(e*e*((1+(a*=1.525))*e-a))+t:n/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+t},ElasticEaseIn(e,t,n,s,a,r){let i=0;return 0===e?t:1===(e/=s)?t+n:(r||(r=.3*s),!a||a<Math.abs(n)?(a=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e*s-i)*(2*Math.PI)/r)+t)},ElasticEaseOut(e,t,n,s,a,r){let i=0;return 0===e?t:1===(e/=s)?t+n:(r||(r=.3*s),!a||a<Math.abs(n)?(a=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*e)*Math.sin((e*s-i)*(2*Math.PI)/r)+n+t)},ElasticEaseInOut(e,t,n,s,a,r){let i=0;return 0===e?t:2==(e/=s/2)?t+n:(r||(r=s*(.3*1.5)),!a||a<Math.abs(n)?(a=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e*s-i)*(2*Math.PI)/r)*-.5+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*s-i)*(2*Math.PI)/r)*.5+n+t)},BounceEaseOut:(e,t,n,s)=>(e/=s)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(t,n,s,a)=>s-e.Easings.BounceEaseOut(a-t,0,s,a)+n,BounceEaseInOut:(t,n,s,a)=>t<a/2?.5*e.Easings.BounceEaseIn(2*t,0,s,a)+n:.5*e.Easings.BounceEaseOut(2*t-a,0,s,a)+.5*s+n,EaseIn:(e,t,n,s)=>n*(e/=s)*e+t,EaseOut:(e,t,n,s)=>-n*(e/=s)*(e-2)+t,EaseInOut:(e,t,n,s)=>(e/=s/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,s)=>n*(e/=s)*e*e*e*e+t,StrongEaseOut:(e,t,n,s)=>n*((e=e/s-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,s)=>(e/=s/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,s)=>n*e/s+t}}(gz)),gz),m=MO(),p=DO();e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:s.Node,Container:a.Container,Stage:r.Stage,stages:r.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:c.DD,Shape:d.Shape,shapes:d.shapes,Animation:u.Animation,Tween:h.Tween,Easings:h.Easings,Context:m.Context,Canvas:p.Canvas}),e.default=e.Konva}(SO)),SO}var vz,yz={};var bz,wz={},Sz={};function jz(){if(bz)return Sz;bz=1,Object.defineProperty(Sz,"__esModule",{value:!0}),Sz.Line=void 0;const e=qO(),t=CO(),n=az(),s=VO();function a(e,t,n,s,a,r,i){const o=Math.sqrt(Math.pow(n-e,2)+Math.pow(s-t,2)),l=Math.sqrt(Math.pow(a-n,2)+Math.pow(r-s,2)),c=i*o/(o+l),d=i*l/(o+l);return[n-c*(a-e),s-c*(r-t),n+d*(a-e),s+d*(r-t)]}function r(e,t){const n=e.length,s=[];for(let r=2;r<n-2;r+=2){const n=a(e[r-2],e[r-1],e[r],e[r+1],e[r+2],e[r+3],t);isNaN(n[0])||(s.push(n[0]),s.push(n[1]),s.push(e[r]),s.push(e[r+1]),s.push(n[2]),s.push(n[3]))}return s}class i extends n.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),n=t.length,s=this.tension(),a=this.closed(),r=this.bezier();if(!n)return;let i=0;if(e.beginPath(),e.moveTo(t[0],t[1]),0!==s&&n>4){const s=this.getTensionPoints(),r=s.length;for(i=a?0:4,a||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);i<r-2;)e.bezierCurveTo(s[i++],s[i++],s[i++],s[i++],s[i++],s[i++]);a||e.quadraticCurveTo(s[r-2],s[r-1],t[n-2],t[n-1])}else if(r)for(i=2;i<n;)e.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);else for(i=2;i<n;i+=2)e.lineTo(t[i],t[i+1]);a?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():r(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,n=this.tension(),s=a(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),i=a(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),o=r(e,n);return[s[2],s[3]].concat(o).concat([i[0],i[1],e[t-2],e[t-1],i[2],i[3],s[0],s[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points();let t,n,s=e[0],a=e[0],r=e[1],i=e[1];for(let o=0;o<e.length/2;o++)t=e[2*o],n=e[2*o+1],s=Math.min(s,t),a=Math.max(a,t),r=Math.min(r,n),i=Math.max(i,n);return{x:s,y:r,width:a-s,height:i-r}}}return Sz.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,s.getNumberArrayValidator)()),Sz}var Cz,kz,Nz,_z={},Pz={};function Ez(){if(kz)return _z;kz=1,Object.defineProperty(_z,"__esModule",{value:!0}),_z.Path=void 0;const e=qO(),t=CO(),n=az(),s=(Cz||(Cz=1,function(e){function t(e,t,s){const a=n(1,s,e),r=n(1,s,t),i=a*a+r*r;return Math.sqrt(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],e.getCubicArcLength=(n,s,a)=>{let r,i;const o=a/2;r=0;for(let l=0;l<20;l++)i=o*e.tValues[20][l]+o,r+=e.cValues[20][l]*t(n,s,i);return o*r},e.getQuadraticArcLength=(e,t,n)=>{void 0===n&&(n=1);const s=e[0]-2*e[1]+e[2],a=t[0]-2*t[1]+t[2],r=2*e[1]-2*e[0],i=2*t[1]-2*t[0],o=4*(s*s+a*a),l=4*(s*r+a*i),c=r*r+i*i;if(0===o)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const d=l/(2*o),u=n+d,h=c/o-d*d,m=u*u+h>0?Math.sqrt(u*u+h):0,p=d*d+h>0?Math.sqrt(d*d+h):0,f=d+Math.sqrt(d*d+h)!==0?h*Math.log(Math.abs((u+m)/(d+p))):0;return Math.sqrt(o)/2*(u*m-d*p+f)};const n=(t,s,a)=>{const r=a.length-1;let i,o;if(0===r)return 0;if(0===t){o=0;for(let t=0;t<=r;t++)o+=e.binomialCoefficients[r][t]*Math.pow(1-s,r-t)*Math.pow(s,t)*a[t];return o}i=new Array(r);for(let e=0;e<r;e++)i[e]=r*(a[e+1]-a[e]);return n(t-1,s,i)};e.t2length=(e,t,n)=>{let s=1,a=e/t,r=(e-n(a))/t,i=0;for(;s>.001;){const o=n(a+r),l=Math.abs(e-o)/t;if(l<s)s=l,a+=r;else{const i=n(a-r),o=Math.abs(e-i)/t;o<s?(s=o,a-=r):r/=2}if(i++,i>500)break}return a}}(Pz)),Pz);let a=class e extends n.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=e.parsePathData(this.data()),this.pathLength=e.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let n=!1;for(let s=0;s<t.length;s++){const a=t[s].command,r=t[s].points;switch(a){case"L":e.lineTo(r[0],r[1]);break;case"M":e.moveTo(r[0],r[1]);break;case"C":e.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":e.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":const t=r[0],s=r[1],a=r[2],i=r[3],o=r[4],l=r[5],c=r[6],d=r[7],u=a>i?a:i,h=a>i?1:a/i,m=a>i?i/a:1;e.translate(t,s),e.rotate(c),e.scale(h,m),e.arc(0,0,u,o,o+l,1-d),e.scale(1/h,1/m),e.rotate(-c),e.translate(-t,-s);break;case"z":n=!0,e.closePath()}}n||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(n){if("A"===n.command){const s=n.points[4],a=n.points[5],r=n.points[4]+a;let i=Math.PI/180;if(Math.abs(s-r)<i&&(i=Math.abs(s-r)),a<0)for(let o=s-i;o>r;o-=i){const s=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],o,0);t.push(s.x,s.y)}else for(let o=s+i;o<r;o+=i){const s=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],o,0);t.push(s.x,s.y)}}else if("C"===n.command)for(let s=0;s<=1;s+=.01){const a=e.getPointOnCubicBezier(s,n.start.x,n.start.y,n.points[0],n.points[1],n.points[2],n.points[3],n.points[4],n.points[5]);t.push(a.x,a.y)}else t=t.concat(n.points)});let n,s,a=t[0],r=t[0],i=t[1],o=t[1];for(let e=0;e<t.length/2;e++)n=t[2*e],s=t[2*e+1],isNaN(n)||(a=Math.min(a,n),r=Math.max(r,n)),isNaN(s)||(i=Math.min(i,s),o=Math.max(o,s));return{x:a,y:i,width:r-a,height:o-i}}getLength(){return this.pathLength}getPointAtLength(t){return e.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(e,t,n,s){return Math.sqrt((n-e)*(n-e)+(s-t)*(s-t))}static getPathLength(e){let t=0;for(let n=0;n<e.length;++n)t+=e[n].pathLength;return t}static getPointAtLengthOfDataArray(t,n){let a,r=0,i=n.length;if(!i)return null;for(;r<i&&t>n[r].pathLength;)t-=n[r].pathLength,++r;if(r===i)return a=n[r-1].points.slice(-2),{x:a[0],y:a[1]};if(t<.01){return"M"===n[r].command?(a=n[r].points.slice(0,2),{x:a[0],y:a[1]}):{x:n[r].start.x,y:n[r].start.y}}const o=n[r],l=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,l[0],l[1]);case"C":return e.getPointOnCubicBezier((0,s.t2length)(t,e.getPathLength(n),e=>(0,s.getCubicArcLength)([o.start.x,l[0],l[2],l[4]],[o.start.y,l[1],l[3],l[5]],e)),o.start.x,o.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return e.getPointOnQuadraticBezier((0,s.t2length)(t,e.getPathLength(n),e=>(0,s.getQuadraticArcLength)([o.start.x,l[0],l[2]],[o.start.y,l[1],l[3]],e)),o.start.x,o.start.y,l[0],l[1],l[2],l[3]);case"A":const a=l[0],r=l[1],i=l[2],c=l[3],d=l[5],u=l[6];let h=l[4];return h+=d*t/o.pathLength,e.getPointOnEllipticalArc(a,r,i,c,h,u)}return null}static getPointOnLine(e,t,n,s,a,r,i){r=null!=r?r:t,i=null!=i?i:n;const o=this.getLineLength(t,n,s,a);if(o<1e-10)return{x:t,y:n};if(s===t)return{x:r,y:i+(a>n?e:-e)};const l=(a-n)/(s-t),c=Math.sqrt(e*e/(1+l*l))*(s<t?-1:1),d=l*c;if(Math.abs(i-n-l*(r-t))<1e-10)return{x:r+c,y:i+d};const u=((r-t)*(s-t)+(i-n)*(a-n))/(o*o),h=t+u*(s-t),m=n+u*(a-n),p=this.getLineLength(r,i,h,m),f=Math.sqrt(e*e-p*p),g=Math.sqrt(f*f/(1+l*l))*(s<t?-1:1);return{x:h+g,y:m+l*g}}static getPointOnCubicBezier(e,t,n,s,a,r,i,o,l){function c(e){return e*e*e}function d(e){return 3*e*e*(1-e)}function u(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}return{x:o*c(e)+r*d(e)+s*u(e)+t*h(e),y:l*c(e)+i*d(e)+a*u(e)+n*h(e)}}static getPointOnQuadraticBezier(e,t,n,s,a,r,i){function o(e){return e*e}function l(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:r*o(e)+s*l(e)+t*c(e),y:i*o(e)+a*l(e)+n*c(e)}}static getPointOnEllipticalArc(e,t,n,s,a,r){const i=Math.cos(r),o=Math.sin(r),l=n*Math.cos(a),c=s*Math.sin(a);return{x:e+(l*i-c*o),y:t+(l*o+c*i)}}static parsePathData(e){if(!e)return[];let t=e;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let d=0;d<n.length;d++)t=t.replace(new RegExp(n[d],"g"),"|"+n[d]);const s=t.split("|"),a=[],r=[];let i=0,o=0;const l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(let d=1;d<s.length;d++){let e=s[d],t=e.charAt(0);for(e=e.slice(1),r.length=0;c=l.exec(e);)r.push(c[0]);const n=[];for(let s=0,a=r.length;s<a;s++){if("00"===r[s]){n.push(0,0);continue}const e=parseFloat(r[s]);isNaN(e)?n.push(0):n.push(e)}for(;n.length>0&&!isNaN(n[0]);){let e="",s=[];const r=i,l=o;let c,d,u,h,m,p,f,g,x,v;switch(t){case"l":i+=n.shift(),o+=n.shift(),e="L",s.push(i,o);break;case"L":i=n.shift(),o=n.shift(),s.push(i,o);break;case"m":const r=n.shift(),l=n.shift();if(i+=r,o+=l,e="M",a.length>2&&"z"===a[a.length-1].command)for(let e=a.length-2;e>=0;e--)if("M"===a[e].command){i=a[e].points[0]+r,o=a[e].points[1]+l;break}s.push(i,o),t="l";break;case"M":i=n.shift(),o=n.shift(),e="M",s.push(i,o),t="L";break;case"h":i+=n.shift(),e="L",s.push(i,o);break;case"H":i=n.shift(),e="L",s.push(i,o);break;case"v":o+=n.shift(),e="L",s.push(i,o);break;case"V":o=n.shift(),e="L",s.push(i,o);break;case"C":s.push(n.shift(),n.shift(),n.shift(),n.shift()),i=n.shift(),o=n.shift(),s.push(i,o);break;case"c":s.push(i+n.shift(),o+n.shift(),i+n.shift(),o+n.shift()),i+=n.shift(),o+=n.shift(),e="C",s.push(i,o);break;case"S":d=i,u=o,c=a[a.length-1],"C"===c.command&&(d=i+(i-c.points[2]),u=o+(o-c.points[3])),s.push(d,u,n.shift(),n.shift()),i=n.shift(),o=n.shift(),e="C",s.push(i,o);break;case"s":d=i,u=o,c=a[a.length-1],"C"===c.command&&(d=i+(i-c.points[2]),u=o+(o-c.points[3])),s.push(d,u,i+n.shift(),o+n.shift()),i+=n.shift(),o+=n.shift(),e="C",s.push(i,o);break;case"Q":s.push(n.shift(),n.shift()),i=n.shift(),o=n.shift(),s.push(i,o);break;case"q":s.push(i+n.shift(),o+n.shift()),i+=n.shift(),o+=n.shift(),e="Q",s.push(i,o);break;case"T":d=i,u=o,c=a[a.length-1],"Q"===c.command&&(d=i+(i-c.points[0]),u=o+(o-c.points[1])),i=n.shift(),o=n.shift(),e="Q",s.push(d,u,i,o);break;case"t":d=i,u=o,c=a[a.length-1],"Q"===c.command&&(d=i+(i-c.points[0]),u=o+(o-c.points[1])),i+=n.shift(),o+=n.shift(),e="Q",s.push(d,u,i,o);break;case"A":h=n.shift(),m=n.shift(),p=n.shift(),f=n.shift(),g=n.shift(),x=i,v=o,i=n.shift(),o=n.shift(),e="A",s=this.convertEndpointToCenterParameterization(x,v,i,o,f,g,h,m,p);break;case"a":h=n.shift(),m=n.shift(),p=n.shift(),f=n.shift(),g=n.shift(),x=i,v=o,i+=n.shift(),o+=n.shift(),e="A",s=this.convertEndpointToCenterParameterization(x,v,i,o,f,g,h,m,p)}a.push({command:e||t,points:s,start:{x:r,y:l},pathLength:this.calcLength(r,l,e||t,s)})}"z"!==t&&"Z"!==t||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,n,a,r){let i,o,l,c;const d=e;switch(a){case"L":return d.getLineLength(t,n,r[0],r[1]);case"C":return(0,s.getCubicArcLength)([t,r[0],r[2],r[4]],[n,r[1],r[3],r[5]],1);case"Q":return(0,s.getQuadraticArcLength)([t,r[0],r[2]],[n,r[1],r[3]],1);case"A":i=0;const e=r[4],a=r[5],u=r[4]+a;let h=Math.PI/180;if(Math.abs(e-u)<h&&(h=Math.abs(e-u)),o=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],e,0),a<0)for(c=e-h;c>u;c-=h)l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+=d.getLineLength(o.x,o.y,l.x,l.y),o=l;else for(c=e+h;c<u;c+=h)l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+=d.getLineLength(o.x,o.y,l.x,l.y),o=l;return l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),i+=d.getLineLength(o.x,o.y,l.x,l.y),i}return 0}static convertEndpointToCenterParameterization(e,t,n,s,a,r,i,o,l){const c=l*(Math.PI/180),d=Math.cos(c)*(e-n)/2+Math.sin(c)*(t-s)/2,u=-1*Math.sin(c)*(e-n)/2+Math.cos(c)*(t-s)/2,h=d*d/(i*i)+u*u/(o*o);h>1&&(i*=Math.sqrt(h),o*=Math.sqrt(h));let m=Math.sqrt((i*i*(o*o)-i*i*(u*u)-o*o*(d*d))/(i*i*(u*u)+o*o*(d*d)));a===r&&(m*=-1),isNaN(m)&&(m=0);const p=m*i*u/o,f=m*-o*d/i,g=(e+n)/2+Math.cos(c)*p-Math.sin(c)*f,x=(t+s)/2+Math.sin(c)*p+Math.cos(c)*f,v=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},y=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(v(e)*v(t))},b=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(y(e,t))},w=b([1,0],[(d-p)/i,(u-f)/o]),S=[(d-p)/i,(u-f)/o],j=[(-1*d-p)/i,(-1*u-f)/o];let C=b(S,j);return y(S,j)<=-1&&(C=Math.PI),y(S,j)>=1&&(C=0),0===r&&C>0&&(C-=2*Math.PI),1===r&&C<0&&(C+=2*Math.PI),[g,x,i,o,w,C,c,r]}};return _z.Path=a,a.prototype.className="Path",a.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(a),e.Factory.addGetterSetter(a,"data"),_z}var Rz,Az={};var Tz,Mz={};var Dz,Lz={};var Fz,Iz={};var Oz,zz={};function Bz(){if(Oz)return zz;Oz=1,Object.defineProperty(zz,"__esModule",{value:!0}),zz.Rect=void 0;const e=qO(),t=az(),n=CO(),s=_O(),a=VO();class r extends t.Shape{_sceneFunc(e){const t=this.cornerRadius(),n=this.width(),a=this.height();e.beginPath(),t?s.Util.drawRoundedRectPath(e,n,a,t):e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)}}return zz.Rect=r,r.prototype.className="Rect",(0,n._registerNode)(r),e.Factory.addGetterSetter(r,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),zz}var $z,Uz={};var Vz,qz={};var Hz,Gz={};var Kz,Wz={};var Qz,Yz={};function Xz(){if(Qz)return Yz;Qz=1,Object.defineProperty(Yz,"__esModule",{value:!0}),Yz.Text=void 0,Yz.stringToArray=i;const e=_O(),t=qO(),n=az(),s=CO(),a=VO(),r=CO();function i(e){return[...e].reduce((e,t,n,s)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const a=s[n+1];a&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(a)?(e.push(t+a),s[n+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(s[n+1]||""))?e.push(t+s[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const o="auto",l="inherit",c="justify",d="left",u="middle",h="normal",m=" ",p="none",f=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],g=f.length;let x;function v(){return x||(x=e.Util.createCanvasElement().getContext("2d"),x)}class y extends n.Shape{constructor(e){super(function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<g;t++)this.on(f[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){const t=this.textArr,n=t.length;if(!this.text())return;let a,r=this.padding(),o=this.fontSize(),h=this.lineHeight()*o,m=this.verticalAlign(),p=this.direction(),f=0,g=this.align(),x=this.getWidth(),v=this.letterSpacing(),y=this.fill(),b=this.textDecoration(),w=-1!==b.indexOf("underline"),S=-1!==b.indexOf("line-through");p=p===l?e.direction:p;let j=h/2,C=u;if(s.Konva._fixTextRendering){const e=this.measureSize("M");C="alphabetic",j=(e.fontBoundingBoxAscent-e.fontBoundingBoxDescent)/2+h/2}for("rtl"===p&&e.setAttr("direction",p),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",C),e.setAttr("textAlign",d),m===u?f=(this.getHeight()-n*h-2*r)/2:"bottom"===m&&(f=this.getHeight()-n*h-2*r),e.translate(r,f+r),a=0;a<n;a++){let l=0,d=0;const u=t[a],m=u.text,f=u.width,b=u.lastInParagraph;if(e.save(),"right"===g?l+=x-f-2*r:"center"===g&&(l+=(x-f-2*r)/2),w){e.save(),e.beginPath();const t=l,n=j+d+(s.Konva._fixTextRendering?Math.round(o/4):Math.round(o/2));e.moveTo(t,n);const a=g!==c||b?f:x-2*r;e.lineTo(t+Math.round(a),n),e.lineWidth=o/15;const i=this._getLinearGradient();e.strokeStyle=i||y,e.stroke(),e.restore()}if(S){e.save(),e.beginPath();const t=s.Konva._fixTextRendering?-Math.round(o/4):0;e.moveTo(l,j+d+t);const n=g!==c||b?f:x-2*r;e.lineTo(l+Math.round(n),j+d+t),e.lineWidth=o/15;const a=this._getLinearGradient();e.strokeStyle=a||y,e.stroke(),e.restore()}if("rtl"===p||0===v&&g!==c)0!==v&&e.setAttr("letterSpacing",`${v}px`),this._partialTextX=l,this._partialTextY=j+d,this._partialText=m,e.fillStrokeShape(this);else{const t=m.split(" ").length-1,n=i(m);for(let s=0;s<n.length;s++){const a=n[s];" "!==a||b||g!==c||(l+=(x-2*r-f)/t),this._partialTextX=l,this._partialTextY=j+d,this._partialText=a,e.fillStrokeShape(this),l+=this.measureSize(a).width+v}}e.restore(),n>1&&(j+=h)}}_hitFunc(e){const t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(t){const n=e.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",n),this}getWidth(){return this.attrs.width===o||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===o||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n,s,a,r,i,o,l,c,d,u;let h,m=v(),p=this.fontSize();m.save(),m.font=this._getContextFont(),h=m.measureText(e),m.restore();const f=p/100;return{actualBoundingBoxAscent:null!==(t=h.actualBoundingBoxAscent)&&void 0!==t?t:71.58203125*f,actualBoundingBoxDescent:null!==(n=h.actualBoundingBoxDescent)&&void 0!==n?n:0,actualBoundingBoxLeft:null!==(s=h.actualBoundingBoxLeft)&&void 0!==s?s:-7.421875*f,actualBoundingBoxRight:null!==(a=h.actualBoundingBoxRight)&&void 0!==a?a:75.732421875*f,alphabeticBaseline:null!==(r=h.alphabeticBaseline)&&void 0!==r?r:0,emHeightAscent:null!==(i=h.emHeightAscent)&&void 0!==i?i:100*f,emHeightDescent:null!==(o=h.emHeightDescent)&&void 0!==o?o:-20*f,fontBoundingBoxAscent:null!==(l=h.fontBoundingBoxAscent)&&void 0!==l?l:91*f,fontBoundingBoxDescent:null!==(c=h.fontBoundingBoxDescent)&&void 0!==c?c:21*f,hangingBaseline:null!==(d=h.hangingBaseline)&&void 0!==d?d:72.80000305175781*f,ideographicBaseline:null!==(u=h.ideographicBaseline)&&void 0!==u?u:-21*f,width:h.width,height:p}}_getContextFont(){return this.fontStyle()+m+this.fontVariant()+m+(this.fontSize()+"px ")+this.fontFamily().split(",").map(e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e}).join(", ")}_addTextLine(e){this.align()===c&&(e=e.trim());const t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),n=e.length;return v().measureText(e).width+t*n}_setTextData(){let e=this.text().split("\n"),t=+this.fontSize(),n=0,s=this.lineHeight()*t,a=this.attrs.width,r=this.attrs.height,l=a!==o&&void 0!==a,c=r!==o&&void 0!==r,d=this.padding(),u=a-2*d,h=r-2*d,f=0,g=this.wrap(),x="char"!==g&&g!==p,y=this.ellipsis();this.textArr=[],v().font=this._getContextFont();const b=y?this._getTextWidth(""):0;for(let o=0,p=e.length;o<p;++o){let t=e[o],a=this._getTextWidth(t);if(l&&a>u)for(;t.length>0;){let e=0,r=i(t).length,o="",l=0;for(;e<r;){const n=e+r>>>1,a=i(t).slice(0,n+1).join(""),d=this._getTextWidth(a);(y&&c&&f+s>h?d+b:d)<=u?(e=n+1,o=a,l=d):r=n}if(!o)break;if(x){const n=i(t),s=i(o),a=n[s.length];let r;if((a===m||"-"===a)&&l<=u)r=s.length;else{const e=s.lastIndexOf(m),t=s.lastIndexOf("-");r=Math.max(e,t)+1}r>0&&(e=r,o=n.slice(0,e).join(""),l=this._getTextWidth(o))}o=o.trimRight(),this._addTextLine(o),n=Math.max(n,l),f+=s;if(this._shouldHandleEllipsis(f)){this._tryToAddEllipsisToLastLine();break}if(t=i(t).slice(e).join("").trimLeft(),t.length>0&&(a=this._getTextWidth(t),a<=u)){this._addTextLine(t),f+=s,n=Math.max(n,a);break}}else this._addTextLine(t),f+=s,n=Math.max(n,a),this._shouldHandleEllipsis(f)&&o<p-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&f+s>h)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){const t=+this.fontSize(),n=this.lineHeight()*t,s=this.attrs.height,a=s!==o&&void 0!==s,r=s-2*this.padding();return!(this.wrap()!==p)||a&&e+n>r}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==o&&void 0!==e,n=e-2*this.padding(),s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(a&&s){if(t){this._getTextWidth(a.text+"")<n||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+"")}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas()}}return Yz.Text=y,y.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},y.prototype._strokeFunc=function(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},y.prototype.className="Text",y.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,r._registerNode)(y),t.Factory.overWriteSetter(y,"width",(0,a.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(y,"height",(0,a.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(y,"direction",l),t.Factory.addGetterSetter(y,"fontFamily","Arial"),t.Factory.addGetterSetter(y,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(y,"fontStyle",h),t.Factory.addGetterSetter(y,"fontVariant",h),t.Factory.addGetterSetter(y,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(y,"align",d),t.Factory.addGetterSetter(y,"verticalAlign","top"),t.Factory.addGetterSetter(y,"lineHeight",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(y,"wrap","word"),t.Factory.addGetterSetter(y,"ellipsis",!1,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(y,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(y,"text","",(0,a.getStringValidator)()),t.Factory.addGetterSetter(y,"textDecoration",""),Yz}var Zz,Jz={};var eB,tB={};function nB(){if(eB)return tB;eB=1,Object.defineProperty(tB,"__esModule",{value:!0}),tB.Transformer=void 0;const e=_O(),t=qO(),n=HO(),s=az(),a=Bz(),r=dz(),i=CO(),o=VO(),l=CO(),c="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${c}`).join(" "),u="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],m={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in i.Konva._global;const f=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function g(e,t,n){const s=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),a=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:s,y:a}}function x(e,t){const n=function(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}(e);return g(e,t,n)}let v=0;class y extends r.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(t){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return c+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(t=>!t.isAncestorOf(this)||(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));this._nodes=t=n,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(e=>{const t=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};if(e._attrsAffectingSize.length){const n=e._attrsAffectingSize.map(e=>e+"Change."+this._getEventNamespace()).join(" ");e.on(n,t)}e.on(h.map(e=>e+`.${this._getEventNamespace()}`).join(" "),t),e.on(`absoluteTransformChange.${this._getEventNamespace()}`,t),this._proxyDrag(e)}),this._resetTransformCache();return!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,n=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!t)return;const s=e.getAbsolutePosition(),a=s.x-t.x,r=s.y-t.y;this.nodes().forEach(t=>{if(t===e)return;if(t.isDragging())return;const s=t.getAbsolutePosition();t.setAbsolutePosition({x:s.x+a,y:s.y+r}),t.startDrag(n)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(u),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(u,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){const s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=e.getAbsoluteScale(n),r=e.getAbsolutePosition(n),o=s.x*a.x-e.offsetX()*a.x,l=s.y*a.y-e.offsetY()*a.y,c=(i.Konva.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return g({x:r.x+o*Math.cos(c)+l*Math.sin(-c),y:r.y+l*Math.cos(c)+o*Math.sin(c),width:s.width*a.x,height:s.height*a.y,rotation:c},-i.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(e=>{const n=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],a=e.getAbsoluteTransform();s.forEach(function(e){const n=a.point(e);t.push(n)})});const n=new e.Transform;n.rotate(-i.Konva.getAngle(this.rotation()));let s=1/0,a=1/0,r=-1/0,o=-1/0;t.forEach(function(e){const t=n.point(e);void 0===s&&(s=r=t.x,a=o=t.y),s=Math.min(s,t.x),a=Math.min(a,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y)}),n.invert();const l=n.point({x:s,y:a});return{x:l.x,y:l.y,width:r-s,height:o-a,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),f.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(t){const n=new a.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),s=this;n.on("mousedown touchstart",function(e){s._handleMouseDown(e)}),n.on("dragstart",e=>{n.stopDrag(),e.cancelBubble=!0}),n.on("dragend",e=>{e.cancelBubble=!0}),n.on("mouseenter",()=>{const s=i.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),r=function(t,n,s){if("rotater"===t)return s;n+=e.Util.degToRad(m[t]||0);const a=(e.Util.radToDeg(n)%360+360)%360;return e.Util._inRange(a,337.5,360)||e.Util._inRange(a,0,22.5)?"ns-resize":e.Util._inRange(a,22.5,67.5)?"nesw-resize":e.Util._inRange(a,67.5,112.5)?"ew-resize":e.Util._inRange(a,112.5,157.5)?"nwse-resize":e.Util._inRange(a,157.5,202.5)?"ns-resize":e.Util._inRange(a,202.5,247.5)?"nesw-resize":e.Util._inRange(a,247.5,292.5)?"ew-resize":e.Util._inRange(a,292.5,337.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+a),"pointer")}(t,s,a);n.getStage().content&&(n.getStage().content.style.cursor=r),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,n){const s=n.getParent(),a=s.padding();t.beginPath(),t.rect(-a,-a,n.width()+2*a,n.height()+2*a),t.moveTo(n.width()/2,-a),s.rotateEnabled()&&s.rotateLineVisible()&&t.lineTo(n.width()/2,-s.rotateAnchorOffset()*e.Util._sign(n.height())-a),t.fillStrokeShape(n)},hitFunc:(e,t)=>{if(!this.shouldOverdrawWholeArea())return;const n=this.padding();e.beginPath(),e.rect(-n,-n,t.width()+2*n,t.height()+2*n),e.fillStrokeShape(t)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),n=t.width,s=t.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));this.sin=Math.abs(s/a),this.cos=Math.abs(n/a),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const r=e.target.getAbsolutePosition(),i=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:i.x-r.x,y:i.y-r.y},v++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(t=>{t._fire("transformstart",{evt:e.evt,target:t})})}_handleMouseMove(e){let t,n,s;const a=this.findOne("."+this._movingAnchorName),r=a.getStage();r.setPointersPositions(e);const o=r.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const c=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),a.setAbsolutePosition(l);const d=a.getAbsolutePosition();if(c.x===d.x&&c.y===d.y)return;if("rotater"===this._movingAnchorName){const s=this._getNodeRect();t=a.x()-s.width/2,n=-a.y()+s.height/2;let r=Math.atan2(-n,t)+Math.PI/2;s.height<0&&(r-=Math.PI);const o=i.Konva.getAngle(this.rotation())+r,l=i.Konva.getAngle(this.rotationSnapTolerance()),c=function(e,t,n){let s=t;for(let a=0;a<e.length;a++){const r=i.Konva.getAngle(e[a]),o=Math.abs(r-t)%(2*Math.PI);Math.min(o,2*Math.PI-o)<n&&(s=r)}return s}(this.rotationSnaps(),o,l),d=x(s,c-s.rotation);return void this._fitNodesInto(d,e)}const u=this.shiftBehavior();let h;h="inverted"===u?this.keepRatio()&&!e.shiftKey:"none"===u?this.keepRatio():this.keepRatio()||e.shiftKey;let m=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(e.x-a.x(),2)+Math.pow(e.y-a.y(),2));const r=this.findOne(".top-left").x()>e.x?-1:1,i=this.findOne(".top-left").y()>e.y?-1:1;t=s*this.cos*r,n=s*this.sin*i,this.findOne(".top-left").x(e.x-t),this.findOne(".top-left").y(e.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(a.y());else if("top-right"===this._movingAnchorName){if(h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(a.x()-e.x,2)+Math.pow(e.y-a.y(),2));const r=this.findOne(".top-right").x()<e.x?-1:1,i=this.findOne(".top-right").y()>e.y?-1:1;t=s*this.cos*r,n=s*this.sin*i,this.findOne(".top-right").x(e.x+t),this.findOne(".top-right").y(e.y-n)}var p=a.position();this.findOne(".top-left").y(p.y),this.findOne(".bottom-right").x(p.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(a.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(a.x());else if("bottom-left"===this._movingAnchorName){if(h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(e.x-a.x(),2)+Math.pow(a.y()-e.y,2));const r=e.x<a.x()?-1:1,i=a.y()<e.y?-1:1;t=s*this.cos*r,n=s*this.sin*i,a.x(e.x-t),a.y(e.y+n)}p=a.position(),this.findOne(".top-left").x(p.x),this.findOne(".bottom-right").y(p.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(a.y());else if("bottom-right"===this._movingAnchorName&&h){const e=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(a.x()-e.x,2)+Math.pow(a.y()-e.y,2));const r=this.findOne(".bottom-right").x()<e.x?-1:1,i=this.findOne(".bottom-right").y()<e.y?-1:1;t=s*this.cos*r,n=s*this.sin*i,this.findOne(".bottom-right").x(e.x+t),this.findOne(".bottom-right").y(e.y+n)}if(m=this.centeredScaling()||e.altKey,m){const e=this.findOne(".top-left"),t=this.findOne(".bottom-right"),n=e.x(),s=e.y(),a=this.getWidth()-t.x(),r=this.getHeight()-t.y();t.move({x:-n,y:-s}),e.move({x:a,y:r})}const f=this.findOne(".top-left").getAbsolutePosition();t=f.x,n=f.y;const g=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),v=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:g,height:v,rotation:i.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();v--,this._fire("transformend",{evt:e,target:n}),null===(t=this.getLayer())||void 0===t||t.batchDraw(),n&&this._nodes.forEach(t=>{var n;t._fire("transformend",{evt:e,target:t}),null===(n=t.getLayer())||void 0===n||n.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const s=this._getNodeRect();if(e.Util._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(e.Util._inRange(t.height,2*-this.padding()-1,1))return void this.update();const a=new e.Transform;if(a.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=a.point({x:2*-this.padding(),y:0});t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=a.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=a.point({x:0,y:2*-this.padding()});t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=a.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){const n=this.boundBoxFunc()(s,t);n?t=n:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const r=1e7,o=new e.Transform;o.translate(s.x,s.y),o.rotate(s.rotation),o.scale(s.width/r,s.height/r);const l=new e.Transform,c=t.width/r,d=t.height/r;!1===this.flipEnabled()?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(c),Math.abs(d))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(c,d));const u=l.multiply(o.invert());this._nodes.forEach(t=>{var n;const s=t.getParent().getAbsoluteTransform(),a=t.getTransform().copy();a.translate(t.offsetX(),t.offsetY());const r=new e.Transform;r.multiply(s.copy().invert()).multiply(u).multiply(s).multiply(a);const i=r.decompose();t.setAttrs(i),null===(n=t.getLayer())||void 0===n||n.batchDraw()}),this.rotation(e.Util._getRotation(t.rotation)),this._nodes.forEach(e=>{this._fire("transform",{evt:n,target:e}),e._fire("transform",{evt:n,target:e})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var t;const n=this._getNodeRect();this.rotation(e.Util._getRotation(n.rotation));const s=n.width,a=n.height,r=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),l=this.anchorSize(),c=this.find("._anchor");c.forEach(e=>{e.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:i&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:s/2,y:0,offsetY:l/2+o,visible:i&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:s,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:i&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:l/2+o,visible:i&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:s,y:a/2,offsetX:l/2-o,visible:i&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:l/2+o,offsetY:l/2-o,visible:i&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:s/2,y:a,offsetY:l/2-o,visible:i&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:s,y:a,offsetX:l/2-o,offsetY:l/2-o,visible:i&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:s/2,y:-this.rotateAnchorOffset()*e.Util._sign(a)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:s,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const d=this.anchorStyleFunc();d&&c.forEach(e=>{d(e)}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(e){return n.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}return tB.Transformer=y,y.isTransforming=()=>v>0,y.prototype.className="Transformer",(0,l._registerNode)(y),t.Factory.addGetterSetter(y,"enabledAnchors",f,function(t){return t instanceof Array||e.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===f.indexOf(t)&&e.Util.warn("Unknown anchor name: "+t+". Available names are: "+f.join(", "))}),t||[]}),t.Factory.addGetterSetter(y,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(y,"resizeEnabled",!0),t.Factory.addGetterSetter(y,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"rotateEnabled",!0),t.Factory.addGetterSetter(y,"rotateLineVisible",!0),t.Factory.addGetterSetter(y,"rotationSnaps",[]),t.Factory.addGetterSetter(y,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(y,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"borderEnabled",!0),t.Factory.addGetterSetter(y,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(y,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"anchorFill","white"),t.Factory.addGetterSetter(y,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(y,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"borderDash"),t.Factory.addGetterSetter(y,"keepRatio",!0),t.Factory.addGetterSetter(y,"shiftBehavior","default"),t.Factory.addGetterSetter(y,"centeredScaling",!1),t.Factory.addGetterSetter(y,"ignoreStroke",!1),t.Factory.addGetterSetter(y,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(y,"nodes"),t.Factory.addGetterSetter(y,"node"),t.Factory.addGetterSetter(y,"boundBoxFunc"),t.Factory.addGetterSetter(y,"anchorDragBoundFunc"),t.Factory.addGetterSetter(y,"anchorStyleFunc"),t.Factory.addGetterSetter(y,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(y,"useSingleNodeRotation",!0),t.Factory.backCompat(y,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),tB}var sB,aB={};var rB,iB={};function oB(){if(rB)return iB;rB=1,Object.defineProperty(iB,"__esModule",{value:!0}),iB.Blur=void 0;const e=qO(),t=HO(),n=VO();function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return iB.Blur=function(e){const t=Math.round(this.blurRadius());t>0&&function(e,t){const n=e.data,i=e.width,o=e.height;let l,c,d,u,h,m,p,f,g,x,v,y,b,w,S,j,C,k,N,_;const P=t+t+1,E=i-1,R=o-1,A=t+1,T=A*(A+1)/2,M=new s,D=a[t],L=r[t];let F=null,I=M,O=null,z=null;for(let a=1;a<P;a++)I=I.next=new s,a===A&&(F=I);I.next=M,d=c=0;for(let s=0;s<o;s++){y=b=w=S=u=h=m=p=0,f=A*(j=n[c]),g=A*(C=n[c+1]),x=A*(k=n[c+2]),v=A*(N=n[c+3]),u+=T*j,h+=T*C,m+=T*k,p+=T*N,I=M;for(let e=0;e<A;e++)I.r=j,I.g=C,I.b=k,I.a=N,I=I.next;for(let e=1;e<A;e++)l=c+((E<e?E:e)<<2),u+=(I.r=j=n[l])*(_=A-e),h+=(I.g=C=n[l+1])*_,m+=(I.b=k=n[l+2])*_,p+=(I.a=N=n[l+3])*_,y+=j,b+=C,w+=k,S+=N,I=I.next;O=M,z=F;for(let e=0;e<i;e++)n[c+3]=N=p*D>>L,0!==N?(N=255/N,n[c]=(u*D>>L)*N,n[c+1]=(h*D>>L)*N,n[c+2]=(m*D>>L)*N):n[c]=n[c+1]=n[c+2]=0,u-=f,h-=g,m-=x,p-=v,f-=O.r,g-=O.g,x-=O.b,v-=O.a,l=d+((l=e+t+1)<E?l:E)<<2,y+=O.r=n[l],b+=O.g=n[l+1],w+=O.b=n[l+2],S+=O.a=n[l+3],u+=y,h+=b,m+=w,p+=S,O=O.next,f+=j=z.r,g+=C=z.g,x+=k=z.b,v+=N=z.a,y-=j,b-=C,w-=k,S-=N,z=z.next,c+=4;d+=i}for(let s=0;s<i;s++){b=w=S=y=h=m=p=u=0,c=s<<2,f=A*(j=n[c]),g=A*(C=n[c+1]),x=A*(k=n[c+2]),v=A*(N=n[c+3]),u+=T*j,h+=T*C,m+=T*k,p+=T*N,I=M;for(let t=0;t<A;t++)I.r=j,I.g=C,I.b=k,I.a=N,I=I.next;let e=i;for(let a=1;a<=t;a++)c=e+s<<2,u+=(I.r=j=n[c])*(_=A-a),h+=(I.g=C=n[c+1])*_,m+=(I.b=k=n[c+2])*_,p+=(I.a=N=n[c+3])*_,y+=j,b+=C,w+=k,S+=N,I=I.next,a<R&&(e+=i);c=s,O=M,z=F;for(let t=0;t<o;t++)l=c<<2,n[l+3]=N=p*D>>L,N>0?(N=255/N,n[l]=(u*D>>L)*N,n[l+1]=(h*D>>L)*N,n[l+2]=(m*D>>L)*N):n[l]=n[l+1]=n[l+2]=0,u-=f,h-=g,m-=x,p-=v,f-=O.r,g-=O.g,x-=O.b,v-=O.a,l=s+((l=t+A)<R?l:R)*i<<2,u+=y+=O.r=n[l],h+=b+=O.g=n[l+1],m+=w+=O.b=n[l+2],p+=S+=O.a=n[l+3],O=O.next,f+=j=z.r,g+=C=z.g,x+=k=z.b,v+=N=z.a,y-=j,b-=C,w-=k,S-=N,z=z.next,c+=i}}(e,t)},e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),iB}var lB,cB={};var dB,uB={};var hB,mB={};var pB,fB={};var gB,xB={};var vB,yB={};var bB,wB={};var SB,jB={};var CB,kB={};function NB(){if(CB)return kB;CB=1,Object.defineProperty(kB,"__esModule",{value:!0}),kB.Kaleidoscope=void 0;const e=qO(),t=HO(),n=_O(),s=VO();return kB.Kaleidoscope=function(e){const t=e.width,s=e.height;let a,r,i,o,l,c,d,u,h,m,p=Math.round(this.kaleidoscopePower());const f=Math.round(this.kaleidoscopeAngle()),g=Math.floor(t*(f%360)/360);if(p<1)return;const x=n.Util.createCanvasElement();x.width=t,x.height=s;const v=x.getContext("2d").getImageData(0,0,t,s);n.Util.releaseCanvas(x),function(e,t,n){const s=e.data,a=t.data,r=e.width,i=e.height,o=n.polarCenterX||r/2,l=n.polarCenterY||i/2;let c=Math.sqrt(o*o+l*l),d=r-o,u=i-l;const h=Math.sqrt(d*d+u*u);c=h>c?h:c;const m=i,p=r,f=360/p*Math.PI/180;for(let g=0;g<p;g+=1){const e=Math.sin(g*f),t=Math.cos(g*f);for(let n=0;n<m;n+=1){d=Math.floor(o+c*n/m*t),u=Math.floor(l+c*n/m*e);let i=4*(u*r+d);const h=s[i+0],p=s[i+1],f=s[i+2],x=s[i+3];i=4*(g+n*r),a[i+0]=h,a[i+1]=p,a[i+2]=f,a[i+3]=x}}}(e,v,{polarCenterX:t/2,polarCenterY:s/2});let y=t/Math.pow(2,p);for(;y<=8;)y*=2,p-=1;y=Math.ceil(y);let b=y,w=0,S=b,j=1;for(g+y>t&&(w=b,S=0,j=-1),r=0;r<s;r+=1)for(a=w;a!==S;a+=j)i=Math.round(a+g)%t,h=4*(t*r+i),l=v.data[h+0],c=v.data[h+1],d=v.data[h+2],u=v.data[h+3],m=4*(t*r+a),v.data[m+0]=l,v.data[m+1]=c,v.data[m+2]=d,v.data[m+3]=u;for(r=0;r<s;r+=1)for(b=Math.floor(y),o=0;o<p;o+=1){for(a=0;a<b+1;a+=1)h=4*(t*r+a),l=v.data[h+0],c=v.data[h+1],d=v.data[h+2],u=v.data[h+3],m=4*(t*r+2*b-a-1),v.data[m+0]=l,v.data[m+1]=c,v.data[m+2]=d,v.data[m+3]=u;b*=2}!function(e,t,n){const s=e.data,a=t.data,r=e.width,i=e.height,o=n.polarCenterX||r/2,l=n.polarCenterY||i/2;let c=Math.sqrt(o*o+l*l),d=r-o,u=i-l;const h=Math.sqrt(d*d+u*u);c=h>c?h:c;const m=i,p=r;let f,g;for(d=0;d<r;d+=1)for(u=0;u<i;u+=1){const e=d-o,t=u-l,n=Math.sqrt(e*e+t*t)*m/c;let i=(180*Math.atan2(t,e)/Math.PI+360+0)%360;i=i*p/360,f=Math.floor(i),g=Math.floor(n);let h=4*(g*r+f);const x=s[h+0],v=s[h+1],y=s[h+2],b=s[h+3];h=4*(u*r+d),a[h+0]=x,a[h+1]=v,a[h+2]=y,a[h+3]=b}}(v,e,{})},e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),e.Factory.afterSetFilter),kB}var _B,PB={};function EB(){if(_B)return PB;_B=1,Object.defineProperty(PB,"__esModule",{value:!0}),PB.Mask=void 0;const e=qO(),t=HO(),n=VO();function s(e,t,n){let s=4*(n*e.width+t);const a=[];return a.push(e.data[s++],e.data[s++],e.data[s++],e.data[s++]),a}function a(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}return PB.Mask=function(e){let t=function(e,t){const n=s(e,0,0),r=s(e,e.width-1,0),i=s(e,0,e.height-1),o=s(e,e.width-1,e.height-1),l=t||10;if(a(n,r)<l&&a(r,o)<l&&a(o,i)<l&&a(i,n)<l){const t=function(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([r,n,o,i]),s=[];for(let n=0;n<e.width*e.height;n++){const r=a(t,[e.data[4*n],e.data[4*n+1],e.data[4*n+2]]);s[n]=r<l?0:255}return s}}(e,this.threshold());return t&&(t=function(e,t,n){const s=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(s.length)),r=Math.floor(a/2),i=[];for(let o=0;o<n;o++)for(let l=0;l<t;l++){const c=o*t+l;let d=0;for(let i=0;i<a;i++)for(let c=0;c<a;c++){const u=o+i-r,h=l+c-r;if(u>=0&&u<n&&h>=0&&h<t){const n=s[i*a+c];d+=e[u*t+h]*n}}i[c]=2040===d?255:0}return i}(t,e.width,e.height),t=function(e,t,n){const s=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(s.length)),r=Math.floor(a/2),i=[];for(let o=0;o<n;o++)for(let l=0;l<t;l++){const c=o*t+l;let d=0;for(let i=0;i<a;i++)for(let c=0;c<a;c++){const u=o+i-r,h=l+c-r;if(u>=0&&u<n&&h>=0&&h<t){const n=s[i*a+c];d+=e[u*t+h]*n}}i[c]=d>=1020?255:0}return i}(t,e.width,e.height),t=function(e,t,n){const s=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],a=Math.round(Math.sqrt(s.length)),r=Math.floor(a/2),i=[];for(let o=0;o<n;o++)for(let l=0;l<t;l++){const c=o*t+l;let d=0;for(let i=0;i<a;i++)for(let c=0;c<a;c++){const u=o+i-r,h=l+c-r;if(u>=0&&u<n&&h>=0&&h<t){const n=s[i*a+c];d+=e[u*t+h]*n}}i[c]=d}return i}(t,e.width,e.height),function(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}(e,t)),e},e.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),PB}var RB,AB={};var TB,MB={};var DB,LB={};var FB,IB={};var OB,zB={};var BB,$B={};var UB,VB={};var qB,HB,GB={};function KB(){if(HB)return wO;HB=1,Object.defineProperty(wO,"__esModule",{value:!0}),wO.Konva=void 0;const e=xz(),t=function(){if(vz)return yz;vz=1,Object.defineProperty(yz,"__esModule",{value:!0}),yz.Arc=void 0;const e=qO(),t=az(),n=CO(),s=VO(),a=CO();let r=class extends t.Shape{_sceneFunc(e){const t=n.Konva.getAngle(this.angle()),s=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,s),e.arc(0,0,this.innerRadius(),t,0,!s),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),s=this.clockwise(),a=n.Konva.getAngle(s?360-this.angle():this.angle()),r=Math.cos(Math.min(a,Math.PI)),i=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),o=Math.sin(Math.min(a,Math.PI/2)),l=r*(r>0?e:t),c=i*(i>0?e:t),d=o*(o>0?t:e);return{x:l,y:s?-1*d:c,width:1*t-l,height:d-c}}};return yz.Arc=r,r.prototype._centroid=!0,r.prototype.className="Arc",r.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,a._registerNode)(r),e.Factory.addGetterSetter(r,"innerRadius",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"outerRadius",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"angle",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"clockwise",!1,(0,s.getBooleanValidator)()),yz}(),n=function(){if(Nz)return wz;Nz=1,Object.defineProperty(wz,"__esModule",{value:!0}),wz.Arrow=void 0;const e=qO(),t=jz(),n=VO(),s=CO(),a=Ez();let r=class extends t.Line{_sceneFunc(e){super._sceneFunc(e);const t=2*Math.PI,n=this.points();let s=n;const r=0!==this.tension()&&n.length>4;r&&(s=this.getTensionPoints());const i=this.pointerLength(),o=n.length;let l,c;if(r){const e=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],n[o-2],n[o-1]],t=a.Path.calcLength(s[s.length-4],s[s.length-3],"C",e),r=a.Path.getPointOnQuadraticBezier(Math.min(1,1-i/t),e[0],e[1],e[2],e[3],e[4],e[5]);l=n[o-2]-r.x,c=n[o-1]-r.y}else l=n[o-2]-n[o-4],c=n[o-1]-n[o-3];const d=(Math.atan2(c,l)+t)%t,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[o-2],n[o-1]),e.rotate(d),e.moveTo(0,0),e.lineTo(-i,u/2),e.lineTo(-i,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),r?(l=(s[0]+s[2])/2-n[0],c=(s[1]+s[3])/2-n[1]):(l=n[2]-n[0],c=n[3]-n[1]),e.rotate((Math.atan2(-c,-l)+t)%t),e.moveTo(0,0),e.lineTo(-i,u/2),e.lineTo(-i,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+2*t}}};return wz.Arrow=r,r.prototype.className="Arrow",(0,s._registerNode)(r),e.Factory.addGetterSetter(r,"pointerLength",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"pointerWidth",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"pointerAtBeginning",!1),e.Factory.addGetterSetter(r,"pointerAtEnding",!0),wz}(),s=function(){if(Rz)return Az;Rz=1,Object.defineProperty(Az,"__esModule",{value:!0}),Az.Circle=void 0;const e=qO(),t=az(),n=VO(),s=CO();class a extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}return Az.Circle=a,a.prototype._centroid=!0,a.prototype.className="Circle",a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),Az}(),a=function(){if(Tz)return Mz;Tz=1,Object.defineProperty(Mz,"__esModule",{value:!0}),Mz.Ellipse=void 0;const e=qO(),t=az(),n=VO(),s=CO();class a extends t.Shape{_sceneFunc(e){const t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}return Mz.Ellipse=a,a.prototype.className="Ellipse",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(a),e.Factory.addComponentsGetterSetter(a,"radius",["x","y"]),e.Factory.addGetterSetter(a,"radiusX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"radiusY",0,(0,n.getNumberValidator)()),Mz}(),r=function(){if(Dz)return Lz;Dz=1,Object.defineProperty(Lz,"__esModule",{value:!0}),Lz.Image=void 0;const e=_O(),t=qO(),n=az(),s=CO(),a=VO();class r extends n.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),s=this.getHeight(),a=this.cornerRadius(),r=this.attrs.image;let i;if(r){const e=this.attrs.cropWidth,t=this.attrs.cropHeight;i=e&&t?[r,this.cropX(),this.cropY(),e,t,0,0,n,s]:[r,0,0,n,s]}(this.hasFill()||this.hasStroke()||a)&&(t.beginPath(),a?e.Util.drawRoundedRectPath(t,n,s,a):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)),r&&(a&&t.clip(),t.drawImage.apply(t,i))}_hitFunc(t){const n=this.width(),s=this.height(),a=this.cornerRadius();t.beginPath(),a?e.Util.drawRoundedRectPath(t,n,s,a):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}getWidth(){var e,t;return null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width}getHeight(){var e,t;return null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height}static fromURL(t,n,s=null){const a=e.Util.createImageElement();a.onload=function(){const e=new r({image:a});n(e)},a.onerror=s,a.crossOrigin="Anonymous",a.src=t}}return Lz.Image=r,r.prototype.className="Image",(0,s._registerNode)(r),t.Factory.addGetterSetter(r,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(r,"image"),t.Factory.addComponentsGetterSetter(r,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(r,"cropX",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(r,"cropY",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(r,"cropWidth",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(r,"cropHeight",0,(0,a.getNumberValidator)()),Lz}(),i=function(){if(Fz)return Iz;Fz=1,Object.defineProperty(Iz,"__esModule",{value:!0}),Iz.Tag=Iz.Label=void 0;const e=qO(),t=az(),n=dz(),s=VO(),a=CO(),r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="up",o="right",l="down",c="left",d=r.length;let u=class extends n.Group{constructor(e){super(e),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t,n=this;const s=function(){n._sync()};for(t=0;t<d;t++)e.on(r[t]+"Change.konva",s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e,t,n,s,a,r,d,u=this.getText(),h=this.getTag();if(u&&h){switch(e=u.width(),t=u.height(),n=h.pointerDirection(),s=h.pointerWidth(),d=h.pointerHeight(),a=0,r=0,n){case i:a=e/2,r=-1*d;break;case o:a=e+s,r=t/2;break;case l:a=e/2,r=t+d;break;case c:a=-1*s,r=t/2}h.setAttrs({x:-1*a,y:-1*r,width:e,height:t}),u.setAttrs({x:-1*a,y:-1*r})}}};Iz.Label=u,u.prototype.className="Label",(0,a._registerNode)(u);class h extends t.Shape{_sceneFunc(e){const t=this.width(),n=this.height(),s=this.pointerDirection(),a=this.pointerWidth(),r=this.pointerHeight(),d=this.cornerRadius();let u=0,h=0,m=0,p=0;"number"==typeof d?u=h=m=p=Math.min(d,t/2,n/2):(u=Math.min(d[0]||0,t/2,n/2),h=Math.min(d[1]||0,t/2,n/2),p=Math.min(d[2]||0,t/2,n/2),m=Math.min(d[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(u,0),s===i&&(e.lineTo((t-a)/2,0),e.lineTo(t/2,-1*r),e.lineTo((t+a)/2,0)),e.lineTo(t-h,0),e.arc(t-h,h,h,3*Math.PI/2,0,!1),s===o&&(e.lineTo(t,(n-r)/2),e.lineTo(t+a,n/2),e.lineTo(t,(n+r)/2)),e.lineTo(t,n-p),e.arc(t-p,n-p,p,0,Math.PI/2,!1),s===l&&(e.lineTo((t+a)/2,n),e.lineTo(t/2,n+r),e.lineTo((t-a)/2,n)),e.lineTo(m,n),e.arc(m,n-m,m,Math.PI/2,Math.PI,!1),s===c&&(e.lineTo(0,(n+r)/2),e.lineTo(-1*a,n/2),e.lineTo(0,(n-r)/2)),e.lineTo(0,u),e.arc(u,u,u,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,n=this.pointerWidth(),s=this.pointerHeight(),a=this.pointerDirection(),r=this.width(),d=this.height();return a===i?(t-=s,d+=s):a===l?d+=s:a===c?(e-=1.5*n,r+=n):a===o&&(r+=1.5*n),{x:e,y:t,width:r,height:d}}}return Iz.Tag=h,h.prototype.className="Tag",(0,a._registerNode)(h),e.Factory.addGetterSetter(h,"pointerDirection","none"),e.Factory.addGetterSetter(h,"pointerWidth",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(h,"pointerHeight",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(h,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Iz}(),o=jz(),l=Ez(),c=Bz(),d=function(){if($z)return Uz;$z=1,Object.defineProperty(Uz,"__esModule",{value:!0}),Uz.RegularPolygon=void 0;const e=qO(),t=az(),n=VO(),s=CO();let a=class extends t.Shape{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(let s=0;s<e;s++)n.push({x:t*Math.sin(2*s*Math.PI/e),y:-1*t*Math.cos(2*s*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();let t=e[0].x,n=e[0].y,s=e[0].x,a=e[0].y;return e.forEach(e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),s=Math.min(s,e.y),a=Math.max(a,e.y)}),{x:t,y:s,width:n-t,height:a-s}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};return Uz.RegularPolygon=a,a.prototype.className="RegularPolygon",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"sides",0,(0,n.getNumberValidator)()),Uz}(),u=function(){if(Vz)return qz;Vz=1,Object.defineProperty(qz,"__esModule",{value:!0}),qz.Ring=void 0;const e=qO(),t=az(),n=VO(),s=CO(),a=2*Math.PI;let r=class extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,a,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),a,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};return qz.Ring=r,r.prototype.className="Ring",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(r),e.Factory.addGetterSetter(r,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"outerRadius",0,(0,n.getNumberValidator)()),qz}(),h=function(){if(Hz)return Gz;Hz=1,Object.defineProperty(Gz,"__esModule",{value:!0}),Gz.Sprite=void 0;const e=qO(),t=az(),n=mz(),s=VO(),a=CO();let r=class extends t.Shape{constructor(e){super(e),this._updated=!0,this.anim=new n.Animation(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),n=this.frameIndex(),s=4*n,a=this.animations()[t],r=this.frameOffsets(),i=a[s+0],o=a[s+1],l=a[s+2],c=a[s+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),d)if(r){const s=r[t],a=2*n;e.drawImage(d,i,o,l,c,s[a+0],s[a+1],l,c)}else e.drawImage(d,i,o,l,c,0,0,l,c)}_hitFunc(e){const t=this.animation(),n=this.frameIndex(),s=4*n,a=this.animations()[t],r=this.frameOffsets(),i=a[s+2],o=a[s+3];if(e.beginPath(),r){const s=r[t],a=2*n;e.rect(s[a+0],s[a+1],i,o)}else e.rect(0,0,i,o);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}};return Gz.Sprite=r,r.prototype.className="Sprite",(0,a._registerNode)(r),e.Factory.addGetterSetter(r,"animation"),e.Factory.addGetterSetter(r,"animations"),e.Factory.addGetterSetter(r,"frameOffsets"),e.Factory.addGetterSetter(r,"image"),e.Factory.addGetterSetter(r,"frameIndex",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"frameRate",17,(0,s.getNumberValidator)()),e.Factory.backCompat(r,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Gz}(),m=function(){if(Kz)return Wz;Kz=1,Object.defineProperty(Wz,"__esModule",{value:!0}),Wz.Star=void 0;const e=qO(),t=az(),n=VO(),s=CO();let a=class extends t.Shape{_sceneFunc(e){const t=this.innerRadius(),n=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(let a=1;a<2*s;a++){const r=a%2==0?n:t,i=r*Math.sin(a*Math.PI/s),o=-1*r*Math.cos(a*Math.PI/s);e.lineTo(i,o)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};return Wz.Star=a,a.prototype.className="Star",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"numPoints",5,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),Wz}(),p=Xz(),f=function(){if(Zz)return Jz;Zz=1,Object.defineProperty(Jz,"__esModule",{value:!0}),Jz.TextPath=void 0;const e=_O(),t=qO(),n=az(),s=Ez(),a=Xz(),r=VO(),i=CO(),o="normal";function l(e){e.fillText(this.partialText,0,0)}function c(e){e.strokeText(this.partialText,0,0)}let d=class extends n.Shape{constructor(t){super(t),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(e){return this.attrs.data?e-1>this.pathLength?null:s.Path.getPointAtLengthOfDataArray(e,this.dataArray):null}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),n=this.fill(),s=this.fontSize(),a=this.glyphInfo;"underline"===t&&e.beginPath();for(let r=0;r<a.length;r++){e.save();const n=a[r].p0;e.translate(n.x,n.y),e.rotate(a[r].rotation),this.partialText=a[r].text,e.fillStrokeShape(this),"underline"===t&&(0===r&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=n,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const n=t[0].p0;e.moveTo(n.x,n.y)}for(let n=0;n<t.length;n++){const s=t[n].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return a.Text.prototype.setText.call(this,e)}_getContextFont(){return a.Text.prototype._getContextFont.call(this)}_getTextSize(e){const t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();const n=t.measureText(e);return t.restore(),{width:n.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;const n=this.letterSpacing(),r=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);let l=0;"center"===r&&(l=Math.max(0,this.pathLength/2-o/2)),"right"===r&&(l=Math.max(0,this.pathLength-o));const c=(0,a.stringToArray)(this.text());let d=l;for(let a=0;a<c.length;a++){const e=this._getPointAtLength(d);if(!e)return;let t=this._getTextSize(c[a]).width+n;if(" "===c[a]&&"justify"===r){const e=this.text().split(" ").length-1;t+=(this.pathLength-o)/e}const l=this._getPointAtLength(d+t);if(!l)return;const h=s.Path.getLineLength(e.x,e.y,l.x,l.y);let m=0;if(i)try{m=i(c[a-1],c[a])*this.fontSize()}catch(u){m=0}e.x+=m,l.x+=m,this.textWidth+=m;const p=s.Path.getPointOnLine(m+h/2,e.x,e.y,l.x,l.y),f=Math.atan2(l.y-e.y,l.x-e.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:c[a],rotation:f,p0:e,p1:l}),d+=t}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)});let t,n,s=e[0]||0,a=e[0]||0,r=e[1]||0,i=e[1]||0;for(let l=0;l<e.length/2;l++)t=e[2*l],n=e[2*l+1],s=Math.min(s,t),a=Math.max(a,t),r=Math.min(r,n),i=Math.max(i,n);const o=this.fontSize();return{x:s-o/2,y:r-o/2,width:a-s+o,height:i-r+o}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Jz.TextPath=d,d.prototype._fillFunc=l,d.prototype._strokeFunc=c,d.prototype._fillFuncHit=l,d.prototype._strokeFuncHit=c,d.prototype.className="TextPath",d.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(d),t.Factory.addGetterSetter(d,"data"),t.Factory.addGetterSetter(d,"fontFamily","Arial"),t.Factory.addGetterSetter(d,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(d,"fontStyle",o),t.Factory.addGetterSetter(d,"align","left"),t.Factory.addGetterSetter(d,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(d,"textBaseline","middle"),t.Factory.addGetterSetter(d,"fontVariant",o),t.Factory.addGetterSetter(d,"text",""),t.Factory.addGetterSetter(d,"textDecoration",""),t.Factory.addGetterSetter(d,"kerningFunc",void 0),Jz}(),g=nB(),x=function(){if(sB)return aB;sB=1,Object.defineProperty(aB,"__esModule",{value:!0}),aB.Wedge=void 0;const e=qO(),t=az(),n=CO(),s=VO(),a=CO();let r=class extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};return aB.Wedge=r,r.prototype.className="Wedge",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(r),e.Factory.addGetterSetter(r,"radius",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"angle",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"clockwise",!1),e.Factory.backCompat(r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),aB}(),v=oB(),y=function(){if(lB)return cB;lB=1,Object.defineProperty(cB,"__esModule",{value:!0}),cB.Brighten=void 0;const e=qO(),t=HO(),n=VO();return cB.Brighten=function(e){const t=255*this.brightness(),n=e.data,s=n.length;for(let a=0;a<s;a+=4)n[a]+=t,n[a+1]+=t,n[a+2]+=t},e.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),cB}(),b=function(){if(dB)return uB;dB=1,Object.defineProperty(uB,"__esModule",{value:!0}),uB.Contrast=void 0;const e=qO(),t=HO(),n=VO();return uB.Contrast=function(e){const t=Math.pow((this.contrast()+100)/100,2),n=e.data,s=n.length;let a=150,r=150,i=150;for(let o=0;o<s;o+=4)a=n[o],r=n[o+1],i=n[o+2],a/=255,a-=.5,a*=t,a+=.5,a*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,i/=255,i-=.5,i*=t,i+=.5,i*=255,a=a<0?0:a>255?255:a,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,n[o]=a,n[o+1]=r,n[o+2]=i},e.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),uB}(),w=function(){if(hB)return mB;hB=1,Object.defineProperty(mB,"__esModule",{value:!0}),mB.Emboss=void 0;const e=qO(),t=HO(),n=_O(),s=VO();return mB.Emboss=function(e){const t=10*this.embossStrength(),s=255*this.embossWhiteLevel(),a=this.embossDirection(),r=this.embossBlend(),i=e.data,o=e.width,l=e.height,c=4*o;let d=0,u=0,h=l;switch(a){case"top-left":d=-1,u=-1;break;case"top":d=-1,u=0;break;case"top-right":d=-1,u=1;break;case"right":d=0,u=1;break;case"bottom-right":d=1,u=1;break;case"bottom":d=1,u=0;break;case"bottom-left":d=1,u=-1;break;case"left":d=0,u=-1;break;default:n.Util.error("Unknown emboss direction: "+a)}do{const e=(h-1)*c;let n=d;h+n<1&&(n=0),h+n>l&&(n=0);const a=(h-1+n)*o*4;let m=o;do{const n=e+4*(m-1);let l=u;m+l<1&&(l=0),m+l>o&&(l=0);const c=a+4*(m-1+l),d=i[n]-i[c],h=i[n+1]-i[c+1],p=i[n+2]-i[c+2];let f=d;const g=f>0?f:-f;if((h>0?h:-h)>g&&(f=h),(p>0?p:-p)>g&&(f=p),f*=t,r){const e=i[n]+f,t=i[n+1]+f,s=i[n+2]+f;i[n]=e>255?255:e<0?0:e,i[n+1]=t>255?255:t<0?0:t,i[n+2]=s>255?255:s<0?0:s}else{let e=s-f;e<0?e=0:e>255&&(e=255),i[n]=i[n+1]=i[n+2]=e}}while(--m)}while(--h)},e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,s.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),mB}(),S=function(){if(pB)return fB;pB=1,Object.defineProperty(fB,"__esModule",{value:!0}),fB.Enhance=void 0;const e=qO(),t=HO(),n=VO();function s(e,t,n,s,a){const r=n-t,i=a-s;if(0===r)return s+i/2;if(0===i)return s;let o=(e-t)/r;return o=i*o+s,o}return fB.Enhance=function(e){const t=e.data,n=t.length;let a,r,i,o=t[0],l=o,c=t[1],d=c,u=t[2],h=u;const m=this.enhance();if(0===m)return;for(let s=0;s<n;s+=4)a=t[s+0],a<o?o=a:a>l&&(l=a),r=t[s+1],r<c?c=r:r>d&&(d=r),i=t[s+2],i<u?u=i:i>h&&(h=i);let p,f,g,x,v,y;if(l===o&&(l=255,o=0),d===c&&(d=255,c=0),h===u&&(h=255,u=0),m>0)p=l+m*(255-l),f=o-m*(o-0),g=d+m*(255-d),x=c-m*(c-0),v=h+m*(255-h),y=u-m*(u-0);else{const e=.5*(l+o);p=l+m*(l-e),f=o+m*(o-e);const t=.5*(d+c);g=d+m*(d-t),x=c+m*(c-t);const n=.5*(h+u);v=h+m*(h-n),y=u+m*(u-n)}for(let b=0;b<n;b+=4)t[b+0]=s(t[b+0],o,l,f,p),t[b+1]=s(t[b+1],c,d,x,g),t[b+2]=s(t[b+2],u,h,y,v)},e.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),fB}(),j=(gB||(gB=1,Object.defineProperty(xB,"__esModule",{value:!0}),xB.Grayscale=void 0,xB.Grayscale=function(e){const t=e.data,n=t.length;for(let s=0;s<n;s+=4){const e=.34*t[s]+.5*t[s+1]+.16*t[s+2];t[s]=e,t[s+1]=e,t[s+2]=e}}),xB),C=function(){if(vB)return yB;vB=1,Object.defineProperty(yB,"__esModule",{value:!0}),yB.HSL=void 0;const e=qO(),t=HO(),n=VO();return e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),yB.HSL=function(e){const t=e.data,n=t.length,s=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,r=127*this.luminance(),i=1*s*Math.cos(a*Math.PI/180),o=1*s*Math.sin(a*Math.PI/180),l=.299+.701*i+.167*o,c=.587-.587*i+.33*o,d=.114-.114*i-.497*o,u=.299-.299*i-.328*o,h=.587+.413*i+.035*o,m=.114-.114*i+.293*o,p=.299-.3*i+1.25*o,f=.587-.586*i-1.05*o,g=.114+.886*i-.2*o;let x,v,y,b;for(let w=0;w<n;w+=4)x=t[w+0],v=t[w+1],y=t[w+2],b=t[w+3],t[w+0]=l*x+c*v+d*y+r,t[w+1]=u*x+h*v+m*y+r,t[w+2]=p*x+f*v+g*y+r,t[w+3]=b},yB}(),k=function(){if(bB)return wB;bB=1,Object.defineProperty(wB,"__esModule",{value:!0}),wB.HSV=void 0;const e=qO(),t=HO(),n=VO();return wB.HSV=function(e){const t=e.data,n=t.length,s=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,i=s*a*Math.cos(r*Math.PI/180),o=s*a*Math.sin(r*Math.PI/180),l=.299*s+.701*i+.167*o,c=.587*s-.587*i+.33*o,d=.114*s-.114*i-.497*o,u=.299*s-.299*i-.328*o,h=.587*s+.413*i+.035*o,m=.114*s-.114*i+.293*o,p=.299*s-.3*i+1.25*o,f=.587*s-.586*i-1.05*o,g=.114*s+.886*i-.2*o;for(let x=0;x<n;x+=4){const e=t[x+0],n=t[x+1],s=t[x+2],a=t[x+3];t[x+0]=l*e+c*n+d*s,t[x+1]=u*e+h*n+m*s,t[x+2]=p*e+f*n+g*s,t[x+3]=a}},e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),wB}(),N=(SB||(SB=1,Object.defineProperty(jB,"__esModule",{value:!0}),jB.Invert=void 0,jB.Invert=function(e){const t=e.data,n=t.length;for(let s=0;s<n;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2]}),jB),_=NB(),P=EB(),E=function(){if(RB)return AB;RB=1,Object.defineProperty(AB,"__esModule",{value:!0}),AB.Noise=void 0;const e=qO(),t=HO(),n=VO();return AB.Noise=function(e){const t=255*this.noise(),n=e.data,s=n.length,a=t/2;for(let r=0;r<s;r+=4)n[r+0]+=a-2*a*Math.random(),n[r+1]+=a-2*a*Math.random(),n[r+2]+=a-2*a*Math.random()},e.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),AB}(),R=function(){if(TB)return MB;TB=1,Object.defineProperty(MB,"__esModule",{value:!0}),MB.Pixelate=void 0;const e=qO(),t=_O(),n=HO(),s=VO();return MB.Pixelate=function(e){let n=Math.ceil(this.pixelSize()),s=e.width,a=e.height,r=Math.ceil(s/n),i=Math.ceil(a/n),o=e.data;if(n<=0)t.Util.error("pixelSize value can not be <= 0");else for(let t=0;t<r;t+=1)for(let e=0;e<i;e+=1){let r=0,i=0,l=0,c=0;const d=t*n,u=d+n,h=e*n,m=h+n;let p=0;for(let e=d;e<u;e+=1)if(!(e>=s))for(let t=h;t<m;t+=1){if(t>=a)continue;const n=4*(s*t+e);r+=o[n+0],i+=o[n+1],l+=o[n+2],c+=o[n+3],p+=1}r/=p,i/=p,l/=p,c/=p;for(let e=d;e<u;e+=1)if(!(e>=s))for(let t=h;t<m;t+=1){if(t>=a)continue;const n=4*(s*t+e);o[n+0]=r,o[n+1]=i,o[n+2]=l,o[n+3]=c}}},e.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,s.getNumberValidator)(),e.Factory.afterSetFilter),MB}(),A=function(){if(DB)return LB;DB=1,Object.defineProperty(LB,"__esModule",{value:!0}),LB.Posterize=void 0;const e=qO(),t=HO(),n=VO();return LB.Posterize=function(e){const t=Math.round(254*this.levels())+1,n=e.data,s=n.length,a=255/t;for(let r=0;r<s;r+=1)n[r]=Math.floor(n[r]/a)*a},e.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),LB}(),T=function(){if(FB)return IB;FB=1,Object.defineProperty(IB,"__esModule",{value:!0}),IB.RGB=void 0;const e=qO(),t=HO(),n=VO();return IB.RGB=function(e){const t=e.data,n=t.length,s=this.red(),a=this.green(),r=this.blue();for(let i=0;i<n;i+=4){const e=(.34*t[i]+.5*t[i+1]+.16*t[i+2])/255;t[i]=e*s,t[i+1]=e*a,t[i+2]=e*r,t[i+3]=t[i+3]}},e.Factory.addGetterSetter(t.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),IB}(),M=function(){if(OB)return zB;OB=1,Object.defineProperty(zB,"__esModule",{value:!0}),zB.RGBA=void 0;const e=qO(),t=HO(),n=VO();return zB.RGBA=function(e){const t=e.data,n=t.length,s=this.red(),a=this.green(),r=this.blue(),i=this.alpha();for(let o=0;o<n;o+=4){const e=1-i;t[o]=s*i+t[o]*e,t[o+1]=a*i+t[o+1]*e,t[o+2]=r*i+t[o+2]*e}},e.Factory.addGetterSetter(t.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e}),zB}(),D=(BB||(BB=1,Object.defineProperty($B,"__esModule",{value:!0}),$B.Sepia=void 0,$B.Sepia=function(e){const t=e.data,n=t.length;for(let s=0;s<n;s+=4){const e=t[s+0],n=t[s+1],a=t[s+2];t[s+0]=Math.min(255,.393*e+.769*n+.189*a),t[s+1]=Math.min(255,.349*e+.686*n+.168*a),t[s+2]=Math.min(255,.272*e+.534*n+.131*a)}}),$B),L=(UB||(UB=1,Object.defineProperty(VB,"__esModule",{value:!0}),VB.Solarize=void 0,VB.Solarize=function(e){const t=e.data,n=e.width,s=4*n;let a=e.height;do{const e=(a-1)*s;let r=n;do{const n=e+4*(r-1);let s=t[n],a=t[n+1],i=t[n+2];s>127&&(s=255-s),a>127&&(a=255-a),i>127&&(i=255-i),t[n]=s,t[n+1]=a,t[n+2]=i}while(--r)}while(--a)}),VB),F=function(){if(qB)return GB;qB=1,Object.defineProperty(GB,"__esModule",{value:!0}),GB.Threshold=void 0;const e=qO(),t=HO(),n=VO();return GB.Threshold=function(e){const t=255*this.threshold(),n=e.data,s=n.length;for(let a=0;a<s;a+=1)n[a]=n[a]<t?0:255},e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),GB}();return wO.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:s.Circle,Ellipse:a.Ellipse,Image:r.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:l.Path,Rect:c.Rect,RegularPolygon:d.RegularPolygon,Ring:u.Ring,Sprite:h.Sprite,Star:m.Star,Text:p.Text,TextPath:f.TextPath,Transformer:g.Transformer,Wedge:x.Wedge,Filters:{Blur:v.Blur,Brighten:y.Brighten,Contrast:b.Contrast,Emboss:w.Emboss,Enhance:S.Enhance,Grayscale:j.Grayscale,HSL:C.HSL,HSV:k.HSV,Invert:N.Invert,Kaleidoscope:_.Kaleidoscope,Mask:P.Mask,Noise:E.Noise,Pixelate:R.Pixelate,Posterize:A.Posterize,RGB:T.RGB,RGBA:M.RGBA,Sepia:D.Sepia,Solarize:L.Solarize,Threshold:F.Threshold}}),wO}var WB,QB=bO.exports;const YB=n(function(){if(WB)return bO.exports;WB=1,Object.defineProperty(QB,"__esModule",{value:!0});const e=KB();return bO.exports=e.Konva,bO.exports}());var XB,ZB={exports:{}};const JB=n((XB||(XB=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=xz();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const s=xz();e.exports=s.Konva}(ZB,ZB.exports)),ZB.exports));var e$,t$,n$,s$,a$={exports:{}},r$={exports:{}},i$={exports:{}},o$={};function l$(){return t$||(t$=1,i$.exports=(e$||(e$=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<a(r,t)))break e;e[s]=t,e[n]=r,n=s}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,i=r>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<r&&0>a(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>a(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,f=!1,g=!1,x="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var a=n(c);null!==a;){if(null===a.callback)s(c);else{if(!(a.startTime<=e))break;s(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function w(e){if(f=!1,b(e),!p)if(null!==n(l))p=!0,j||(j=!0,S());else{var t=n(c);null!==t&&A(w,t.startTime-e)}}var S,j=!1,C=-1,k=5,N=-1;function _(){return!(!g&&e.unstable_now()-N<k)}function P(){if(g=!1,j){var t=e.unstable_now();N=t;var a=!0;try{e:{p=!1,f&&(f=!1,v(C),C=-1),m=!0;var r=h;try{t:{for(b(t),u=n(l);null!==u&&!(u.expirationTime>t&&_());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){u.callback=o,b(t),a=!0;break t}u===n(l)&&s(l),b(t)}else s(l);u=n(l)}if(null!==u)a=!0;else{var d=n(c);null!==d&&A(w,d.startTime-t),a=!1}}break e}finally{u=null,h=r,m=!1}a=void 0}}finally{a?S():j=!1}}}if("function"==typeof y)S=function(){y(P)};else if("undefined"!=typeof MessageChannel){var E=new MessageChannel,R=E.port2;E.port1.onmessage=P,S=function(){R.postMessage(null)}}else S=function(){x(P,0)};function A(t,n){C=x(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(s,a,r){var i=e.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?i+r:i,s){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return s={id:d++,callback:a,priorityLevel:s,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(s.sortIndex=r,t(c,s),null===n(l)&&s===n(c)&&(f?(v(C),C=-1):f=!0,A(w,r-i))):(s.sortIndex=o,t(l,s),p||m||(p=!0,j||(j=!0,S()))),s},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(o$)),o$)),i$.exports}function c$(){return n$||(n$=1,(e=r$).exports=function(e){function t(e,t,n,s){return new Ba(e,t,n,s)}function n(){}function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function r(e){if(a(e)!==e)throw Error(s(188))}function i(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(null===o)break;var l=o.alternate;if(null===l){if(null!==(i=o.return)){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return r(o),e;if(l===i)return r(o),t;l=l.sibling}throw Error(s(188))}if(n.return!==i.return)n=o,i=l;else{for(var c=!1,d=o.child;d;){if(d===n){c=!0,n=o,i=l;break}if(d===i){c=!0,i=o,n=l;break}d=d.sibling}if(!c){for(d=l.child;d;){if(d===n){c=!0,n=l,i=o;break}if(d===i){c=!0,i=l,n=o;break}d=d.sibling}if(!c)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function o(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=o(e)))return t;e=e.sibling}return null}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=l(e)))return t;e=e.sibling}return null}function c(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=wr&&e[wr]||e["@@iterator"])?e:null}function d(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===Sr?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case cr:return"Fragment";case ur:return"Profiler";case dr:return"StrictMode";case fr:return"Suspense";case gr:return"SuspenseList";case yr:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case lr:return"Portal";case mr:return e.displayName||"Context";case hr:return(e._context.displayName||"Context")+".Consumer";case pr:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case xr:return null!==(t=e.displayName||null)?t:d(e.type)||"Memo";case vr:t=e._payload,e=e._init;try{return d(e(t))}catch(n){}}return null}function u(e){return{current:e}}function h(e){0>Go||(e.current=Ho[Go],Ho[Go]=null,Go--)}function p(e,t){Go++,Ho[Go]=e.current,e.current=t}function f(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function g(e,t,n){var s=e.pendingLanes;if(0===s)return 0;var a=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&s;return 0!==o?0!==(s=o&~r)?a=f(s):0!==(i&=o)?a=f(i):n||0!==(n=o&~e)&&(a=f(n)):0!==(o=s&~r)?a=f(o):0!==i?a=f(i):n||0!==(n=s&~e)&&(a=f(n)),0===a?0:0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(n=t&-t)||32===r&&4194048&n)?t:a}function x(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function v(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function y(){var e=Jo;return!(62914560&(Jo<<=1))&&(Jo=4194304),e}function b(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function w(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function S(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Wo(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|261930&n}function j(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Wo(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}function C(e,t){var n=t&-t;return 0!==((n=42&n?1:k(n))&(e.suspendedLanes|t))?0:n}function k(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function N(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function _(e){if("function"==typeof cl&&dl(e),hl&&"function"==typeof hl.setStrictMode)try{hl.setStrictMode(ul,e)}catch(wW){}}function P(e){if(void 0===wo)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wo=t&&t[1]||"",So=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+wo+e+So}function E(e,t){if(!e||gl)return"";gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var s=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){s=r}e.call(n.prototype)}}else{try{throw Error()}catch(i){s=i}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&s&&"string"==typeof o.stack)return[o.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),i=r[0],o=r[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(a=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(s===l.length||a===c.length)for(s=l.length-1,a=c.length-1;1<=s&&0<=a&&l[s]!==c[a];)a--;for(;1<=s&&0<=a;s--,a--)if(l[s]!==c[a]){if(1!==s||1!==a)do{if(s--,0>--a||l[s]!==c[a]){var d="\n"+l[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=s&&0<=a);break}}}finally{gl=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?P(n):""}function R(e,t){switch(e.tag){case 26:case 27:case 5:return P(e.type);case 16:return P("Lazy");case 13:return e.child!==t&&null!==t?P("Suspense Fallback"):P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return E(e.type,!1);case 11:return E(e.type.render,!1);case 1:return E(e.type,!0);case 31:return P("Activity");default:return""}}function A(e){try{var t="",n=null;do{t+=R(e,n),n=e,e=e.return}while(e);return t}catch(s){return"\nError generating stack: "+s.message+"\n"+s.stack}}function T(e,t){if("object"==typeof e&&null!==e){var n=xl.get(e);return void 0!==n?n:(t={value:e,source:t,stack:A(t)},xl.set(e,t),t)}return{value:e,source:t,stack:A(t)}}function M(e,t){vl[yl++]=wl,vl[yl++]=bl,bl=e,wl=t}function D(e,t,n){Sl[jl++]=kl,Sl[jl++]=Nl,Sl[jl++]=Cl,Cl=e;var s=kl;e=Nl;var a=32-Wo(s)-1;s&=~(1<<a),n+=1;var r=32-Wo(t)+a;if(30<r){var i=a-a%5;r=(s&(1<<i)-1).toString(32),s>>=i,a-=i,kl=1<<32-Wo(t)+a|n<<a|s,Nl=r+e}else kl=1<<r|n<<a|s,Nl=e}function L(e){null!==e.return&&(M(e,1),D(e,1,0))}function F(e){for(;e===bl;)bl=vl[--yl],vl[yl]=null,wl=vl[--yl],vl[yl]=null;for(;e===Cl;)Cl=Sl[--jl],Sl[jl]=null,Nl=Sl[--jl],Sl[jl]=null,kl=Sl[--jl],Sl[jl]=null}function I(e,t){Sl[jl++]=kl,Sl[jl++]=Nl,Sl[jl++]=Cl,kl=t.id,Nl=t.overflow,Cl=e}function O(e,t){p(El,t),p(Pl,e),p(_l,null),e=Er(t),h(_l),p(_l,e)}function z(){h(_l),h(Pl),h(El)}function B(e){null!==e.memoizedState&&p(Rl,e);var t=_l.current,n=Rr(t,e.type);t!==n&&(p(Pl,e),p(_l,n))}function $(e){Pl.current===e&&(h(_l),h(Pl)),Rl.current===e&&(h(Rl),$r?ii._currentValue=ri:ii._currentValue2=ri)}function U(e){throw W(T(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),Fl}function V(e,t){if(!qr)throw Error(s(175));so(e.stateNode,e.type,e.memoizedProps,t,e)||U(e,!0)}function q(e){for(Al=e.return;Al;)switch(Al.tag){case 5:case 31:case 13:return void(Ll=!1);case 27:case 3:return void(Ll=!0);default:Al=Al.return}}function H(e){if(!qr||e!==Al)return!1;if(!Ml)return q(e),Ml=!0,!1;var t=e.tag;if(zo?3!==t&&27!==t&&(5!==t||bo(e.type)&&!Fr(e.type,e.memoizedProps))&&Tl&&U(e):3!==t&&(5!==t||bo(e.type)&&!Fr(e.type,e.memoizedProps))&&Tl&&U(e),q(e),13===t){if(!qr)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));Tl=lo(e)}else if(31===t){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));Tl=oo(e)}else Tl=zo&&27===t?Ki(e.type,Tl):Al?Gi(e.stateNode):null;return!0}function G(){qr&&(Tl=Al=null,Ml=!1)}function K(){var e=Dl;return null!==e&&(null===bd?bd=e:bd.push.apply(bd,e),Dl=null),e}function W(e){null===Dl?Dl=[e]:Dl.push(e)}function Q(e,t,n){$r?(p(Il,t._currentValue),t._currentValue=n):(p(Il,t._currentValue2),t._currentValue2=n)}function Y(e){var t=Il.current;$r?e._currentValue=t:e._currentValue2=t,h(Il)}function X(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Z(e,t,n,a){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var o=r.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),X(i.return,n,e),a||(o=null);break e}i=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(s(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),X(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function J(e,t,n,a){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(524288&r.flags)i=!0;else if(262144&r.flags)break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=r.type;ml(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===Rl.current){if(null===(o=r.alternate))throw Error(s(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(ii):e=[ii])}r=r.return}null!==e&&Z(t,e,n,a),t.flags|=262144}function ee(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!ml($r?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function te(e){Ol=e,zl=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ne(e){return ae(Ol,e)}function se(e,t){return null===Ol&&te(e),ae(e,t)}function ae(e,t){var n=$r?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===zl){if(null===e)throw Error(s(308));zl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zl=zl.next=t;return n}function re(){return{controller:new Bl,data:new Map,refCount:0}}function ie(e){e.refCount--,0===e.refCount&&$l(Ul,function(){e.controller.abort()})}function oe(){}function le(e){e!==Hl&&null===e.next&&(null===Hl?ql=Hl=e:Hl=Hl.next=e),Kl=!0,Gl||(Gl=!0,li?ci(function(){6&sd?el(rl,de):ue()}):el(rl,de))}function ce(e,t){if(!Wl&&Kl){Wl=!0;do{for(var n=!1,s=ql;null!==s;){if(0!==e){var a=s.pendingLanes;if(0===a)var r=0;else{var i=s.suspendedLanes,o=s.pingedLanes;r=(1<<31-Wo(42|e)+1)-1,r=201326741&(r&=a&~(i&~o))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,pe(s,r))}else r=id,!(3&(r=g(s,s===ad?r:0,null!==s.cancelPendingCommit||s.timeoutHandle!==Br)))||x(s,r)||(n=!0,pe(s,r));s=s.next}}while(n);Wl=!1}}function de(){ue()}function ue(){Kl=Gl=!1;var e=0;0!==Ql&&Yr()&&(e=Ql);for(var t=al(),n=null,s=ql;null!==s;){var a=s.next,r=he(s,t);0===r?(s.next=null,null===n?ql=a:n.next=a,null===a&&(Hl=n)):(n=s,(0!==e||3&r)&&(Kl=!0)),s=a}0!==_d&&5!==_d||ce(e),0!==Ql&&(Ql=0)}function he(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var i=31-Wo(r),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&s)||(a[i]=v(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(n=id,n=g(e,e===(t=ad)?n:0,null!==e.cancelPendingCommit||e.timeoutHandle!==Br),s=e.callbackNode,0===n||e===t&&(2===od||9===od)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&tl(s),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||x(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==s&&tl(s),N(n)){case 2:case 8:n=il;break;case 32:default:n=ol;break;case 268435456:n=ll}return s=me.bind(null,e),n=el(n,s),e.callbackPriority=t,e.callbackNode=n,t}return null!==s&&null!==s&&tl(s),e.callbackPriority=2,e.callbackNode=null,2}function me(e,t){if(0!==_d&&5!==_d)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Aa()&&e.callbackNode!==n)return null;var s=id;return 0===(s=g(e,e===ad?s:0,null!==e.cancelPendingCommit||e.timeoutHandle!==Br))?null:(ia(e,s,t),he(e,al()),null!=e.callbackNode&&e.callbackNode===n?me.bind(null,e):null)}function pe(e,t){if(Aa())return null;ia(e,t,!0)}function fe(){if(0===Ql){var e=Zl;0===e&&(e=Xo,!(261888&(Xo<<=1))&&(Xo=256)),Ql=e}return Ql}function ge(){if(0===--Xl&&null!==Yl){null!==Jl&&(Jl.status="fulfilled");var e=Yl;Yl=null,Zl=0,Jl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xe(){var e=tc.current;return null!==e?e:ad.pooledCache}function ve(e,t){p(tc,null===t?tc.current:t.pool)}function ye(){var e=xe();return null===e?null:{parent:$r?Vl._currentValue:Vl._currentValue2,pool:e}}function be(e,t){if(ml(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!fl.call(t,a)||!ml(e[a],t[a]))return!1}return!0}function we(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Se(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(oe,oe),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ke(e=t.reason),e;default:if("string"==typeof t.status)t.then(oe,oe);else{if(null!==(e=ad)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ke(e=t.reason),e}throw ic=t,nc}}function je(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw ic=t,nc;throw t}}function Ce(){if(null===ic)throw Error(s(459));var e=ic;return ic=null,e}function ke(e){if(e===nc||e===ac)throw Error(s(483))}function Ne(e){var t=lc;return lc+=1,null===oc&&(oc=[]),Se(oc,e,t)}function _e(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Pe(e,t){if(t.$$typeof===ir)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ee(e){function n(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function a(t,s){if(!e)return null;for(;null!==s;)n(t,s),s=s.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ua(e,t)).index=0,e.sibling=null,e}function o(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=67108866,n):s:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function d(e,t,n,s){return null===t||6!==t.tag?((t=Ga(n,e.mode,s)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,s){var a=n.type;return a===cr?m(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===vr&&je(a)===t.type)?(_e(t=i(t,n.props),n),t.return=e,t):(_e(t=qa(n.type,n.key,n.props,null,e.mode,s),n),t.return=e,t)}function h(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wa(n,e.mode,s)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function m(e,t,n,s,a){return null===t||7!==t.tag?((t=Ha(n,e.mode,s,a)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Ga(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case or:return _e(n=qa(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case lr:return(t=Wa(t,e.mode,n)).return=e,t;case vr:return p(e,t=je(t),n)}if(jr(t)||c(t))return(t=Ha(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,Ne(t),n);if(t.$$typeof===mr)return p(e,se(e,t),n);Pe(e,t)}return null}function f(e,t,n,s){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:d(e,t,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case or:return n.key===a?u(e,t,n,s):null;case lr:return n.key===a?h(e,t,n,s):null;case vr:return f(e,t,n=je(n),s)}if(jr(n)||c(n))return null!==a?null:m(e,t,n,s,null);if("function"==typeof n.then)return f(e,t,Ne(n),s);if(n.$$typeof===mr)return f(e,t,se(e,n),s);Pe(e,n)}return null}function g(e,t,n,s,a){if("string"==typeof s&&""!==s||"number"==typeof s||"bigint"==typeof s)return d(t,e=e.get(n)||null,""+s,a);if("object"==typeof s&&null!==s){switch(s.$$typeof){case or:return u(t,e=e.get(null===s.key?n:s.key)||null,s,a);case lr:return h(t,e=e.get(null===s.key?n:s.key)||null,s,a);case vr:return g(e,t,n,s=je(s),a)}if(jr(s)||c(s))return m(t,e=e.get(n)||null,s,a,null);if("function"==typeof s.then)return g(e,t,n,Ne(s),a);if(s.$$typeof===mr)return g(e,t,n,se(t,s),a);Pe(t,s)}return null}function x(t,d,u,h){if("object"==typeof u&&null!==u&&u.type===cr&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case or:e:{for(var m=u.key;null!==d;){if(d.key===m){if((m=u.type)===cr){if(7===d.tag){a(t,d.sibling),(h=i(d,u.props.children)).return=t,t=h;break e}}else if(d.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===vr&&je(m)===d.type){a(t,d.sibling),_e(h=i(d,u.props),u),h.return=t,t=h;break e}a(t,d);break}n(t,d),d=d.sibling}u.type===cr?((h=Ha(u.props.children,t.mode,h,u.key)).return=t,t=h):(_e(h=qa(u.type,u.key,u.props,null,t.mode,h),u),h.return=t,t=h)}return l(t);case lr:e:{for(m=u.key;null!==d;){if(d.key===m){if(4===d.tag&&d.stateNode.containerInfo===u.containerInfo&&d.stateNode.implementation===u.implementation){a(t,d.sibling),(h=i(d,u.children||[])).return=t,t=h;break e}a(t,d);break}n(t,d),d=d.sibling}(h=Wa(u,t.mode,h)).return=t,t=h}return l(t);case vr:return x(t,d,u=je(u),h)}if(jr(u))return function(t,s,i,l){for(var c=null,d=null,u=s,h=s=0,m=null;null!==u&&h<i.length;h++){u.index>h?(m=u,u=null):m=u.sibling;var x=f(t,u,i[h],l);if(null===x){null===u&&(u=m);break}e&&u&&null===x.alternate&&n(t,u),s=o(x,s,h),null===d?c=x:d.sibling=x,d=x,u=m}if(h===i.length)return a(t,u),Ml&&M(t,h),c;if(null===u){for(;h<i.length;h++)null!==(u=p(t,i[h],l))&&(s=o(u,s,h),null===d?c=u:d.sibling=u,d=u);return Ml&&M(t,h),c}for(u=r(u);h<i.length;h++)null!==(m=g(u,t,h,i[h],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?h:m.key),s=o(m,s,h),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach(function(e){return n(t,e)}),Ml&&M(t,h),c}(t,d,u,h);if(c(u)){if("function"!=typeof(m=c(u)))throw Error(s(150));return function(t,i,l,c){if(null==l)throw Error(s(151));for(var d=null,u=null,h=i,m=i=0,x=null,v=l.next();null!==h&&!v.done;m++,v=l.next()){h.index>m?(x=h,h=null):x=h.sibling;var y=f(t,h,v.value,c);if(null===y){null===h&&(h=x);break}e&&h&&null===y.alternate&&n(t,h),i=o(y,i,m),null===u?d=y:u.sibling=y,u=y,h=x}if(v.done)return a(t,h),Ml&&M(t,m),d;if(null===h){for(;!v.done;m++,v=l.next())null!==(v=p(t,v.value,c))&&(i=o(v,i,m),null===u?d=v:u.sibling=v,u=v);return Ml&&M(t,m),d}for(h=r(h);!v.done;m++,v=l.next())null!==(v=g(h,t,m,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),i=o(v,i,m),null===u?d=v:u.sibling=v,u=v);return e&&h.forEach(function(e){return n(t,e)}),Ml&&M(t,m),d}(t,d,u=m.call(u),h)}if("function"==typeof u.then)return x(t,d,Ne(u),h);if(u.$$typeof===mr)return x(t,d,se(t,u),h);Pe(t,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==d&&6===d.tag?(a(t,d.sibling),(h=i(d,u)).return=t,t=h):(a(t,d),(h=Ga(u,t.mode,h)).return=t,t=h),l(t)):a(t,d)}return function(e,n,s,a){try{lc=0;var r=x(e,n,s,a);return oc=null,r}catch(o){if(o===nc||o===ac)throw o;var i=t(29,o,null,e.mode);return i.lanes=a,i.return=e,i}}}function Re(){for(var e=hc,t=mc=hc=0;t<e;){var n=uc[t];uc[t++]=null;var s=uc[t];uc[t++]=null;var a=uc[t];uc[t++]=null;var r=uc[t];if(uc[t++]=null,null!==s&&null!==a){var i=s.pending;null===i?a.next=a:(a.next=i.next,i.next=a),s.pending=a}0!==r&&De(n,a,r)}}function Ae(e,t,n,s){uc[hc++]=e,uc[hc++]=t,uc[hc++]=n,uc[hc++]=s,mc|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Te(e,t,n,s){return Ae(e,t,n,s),Le(e)}function Me(e,t){return Ae(e,null,null,t),Le(e)}function De(e,t,n){e.lanes|=n;var s=e.alternate;null!==s&&(s.lanes|=n);for(var a=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(s=r.alternate)&&(s.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(a=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,a&&null!==t&&(a=31-Wo(n),null===(s=(e=r.hiddenUpdates)[a])?e[a]=[t]:s.push(t),t.lane=536870912|n),r):null}function Le(e){if(50<Dd)throw Dd=0,Ld=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function Fe(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ie(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oe(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ze(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,2&sd){var a=s.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),s.pending=t,t=Le(e),De(e,null,n),t}return Ae(e,s,t,n),Le(e)}function Be(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,j(e,n)}}function $e(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var a=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?a=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?a=r=t:r=r.next=t}else a=r=t;return n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ue(){if(fc&&null!==Jl)throw Jl}function Ve(e,t,n,s){fc=!1;var a=e.updateQueue;pc=!1;var r=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?r=c:i.next=c,i=l;var d=e.alternate;null!==d&&(o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l)}if(null!==r){var u=a.baseState;for(i=0,d=c=l=null,o=r;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(id&h)===h:(s&h)===h){0!==h&&h===Zl&&(fc=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,f=o;h=t;var g=n;switch(f.tag){case 1:if("function"==typeof(p=f.payload)){u=p.call(g,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=f.payload)?p.call(g,u,h):p))break e;u=rr({},u,h);break e;case 2:pc=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(m=o).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===r&&(a.shared.lanes=0),pd|=i,e.lanes=i,e.memoizedState=u}}function qe(e,t){if("function"!=typeof e)throw Error(s(191,e));e.call(t)}function He(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)qe(n[e],t)}function Ge(e,t){p(xc,e=hd),p(gc,t),hd=e|t.baseLanes}function Ke(){p(xc,hd),p(gc,gc.current)}function We(){hd=xc.current,h(gc),h(xc)}function Qe(e){var t=e.alternate;p(bc,1&bc.current),p(vc,e),null===yc&&(null===t||null!==gc.current||null!==t.memoizedState)&&(yc=e)}function Ye(e){p(bc,bc.current),p(vc,e),null===yc&&(yc=e)}function Xe(e){22===e.tag?(p(bc,bc.current),p(vc,e),null===yc&&(yc=e)):Ze()}function Ze(){p(bc,bc.current),p(vc,vc.current)}function Je(e){h(vc),yc===e&&(yc=null),h(bc)}function et(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Bi(n)||$i(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function tt(){throw Error(s(321))}function nt(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ml(e[n],t[n]))return!1;return!0}function st(e,t,n,s,a,r){return wc=r,Sc=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cr.H=null===e||null===e.memoizedState?Mc:Dc,_c=!1,r=n(s,a),_c=!1,Nc&&(r=rt(t,n,s,a)),at(e),r}function at(e){Cr.H=Tc;var t=null!==jc&&null!==jc.next;if(wc=0,Cc=jc=Sc=null,kc=!1,Ec=0,Rc=null,t)throw Error(s(300));null===e||Oc||null!==(e=e.dependencies)&&ee(e)&&(Oc=!0)}function rt(e,t,n,a){Sc=e;var r=0;do{if(Nc&&(Rc=null),Ec=0,Nc=!1,25<=r)throw Error(s(301));if(r+=1,Cc=jc=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}Cr.H=Lc,i=t(n,a)}while(Nc);return i}function it(){var e=Cr.H,t=e.useState()[0];return t="function"==typeof t.then?ht(t):t,e=e.useState()[0],(null!==jc?jc.memoizedState:null)!==e&&(Sc.flags|=1024),t}function ot(){var e=0!==Pc;return Pc=0,e}function lt(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ct(e){if(kc){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}kc=!1}wc=0,Cc=jc=Sc=null,Nc=!1,Ec=Pc=0,Rc=null}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Cc?Sc.memoizedState=Cc=e:Cc=Cc.next=e,Cc}function ut(){if(null===jc){var e=Sc.alternate;e=null!==e?e.memoizedState:null}else e=jc.next;var t=null===Cc?Sc.memoizedState:Cc.next;if(null!==t)Cc=t,jc=e;else{if(null===e){if(null===Sc.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(jc=e).memoizedState,baseState:jc.baseState,baseQueue:jc.baseQueue,queue:jc.queue,next:null},null===Cc?Sc.memoizedState=Cc=e:Cc=Cc.next=e}return Cc}function ht(e){var t=Ec;return Ec+=1,null===Rc&&(Rc=[]),e=Se(Rc,e,t),t=Sc,null===(null===Cc?t.memoizedState:Cc.next)&&(t=t.alternate,Cr.H=null===t||null===t.memoizedState?Mc:Dc),e}function mt(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ht(e);if(e.$$typeof===mr)return ne(e)}throw Error(s(438,String(e)))}function pt(e){var t=null,n=Sc.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var s=Sc.alternate;null!==s&&null!==(s=s.updateQueue)&&null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=br;return t.index++,n}function ft(e,t){return"function"==typeof t?t(e):t}function gt(e){return xt(ut(),jc,e)}function xt(e,t,n){var a=e.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=n;var r=e.baseQueue,i=a.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,a.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var l=o=null,c=null,d=t=r.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(id&h)===h:(wc&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Zl&&(u=!0);else{if((wc&m)===m){d=d.next,m===Zl&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,Sc.lanes|=m,pd|=m}h=d.action,_c&&n(i,h),i=d.hasEagerState?d.eagerState:n(i,h)}else m={lane:h,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,o=i):c=c.next=m,Sc.lanes|=h,pd|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=i:c.next=l,!ml(i,e.memoizedState)&&(Oc=!0,u&&null!==(n=Jl)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,a.lastRenderedState=i}return null===r&&(a.lanes=0),[e.memoizedState,a.dispatch]}function vt(e){var t=ut(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);ml(i,t.memoizedState)||(Oc=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function yt(e,t,n){var a=Sc,r=ut(),i=Ml;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!ml((jc||r).memoizedState,n);if(o&&(r.memoizedState=n,Oc=!0),r=r.queue,qt(St.bind(null,a,r,e),[e]),r.getSnapshot!==t||o||null!==Cc&&1&Cc.memoizedState.tag){if(a.flags|=2048,zt(9,{destroy:void 0},wt.bind(null,a,r,n,t),null),null===ad)throw Error(s(349));i||127&wc||bt(a,t,n)}return n}function bt(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Sc.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wt(e,t,n,s){t.value=n,t.getSnapshot=s,jt(t)&&Ct(e)}function St(e,t,n){return n(function(){jt(t)&&Ct(e)})}function jt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ml(e,n)}catch(s){return!0}}function Ct(e){var t=Me(e,2);null!==t&&ra(t,0,2)}function kt(e){var t=dt();if("function"==typeof e){var n=e;if(e=n(),_c){_(!0);try{n()}finally{_(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:e},t}function Nt(e,t,n,s){return e.baseState=n,xt(e,jc,"function"==typeof s?s:ft)}function _t(e,t,n,a,r){if(hn(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==Cr.T?n(!0):i.isTransition=!1,a(i),null===(n=t.pending)?(i.next=t.pending=i,Pt(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Pt(e,t){var n=t.action,s=t.payload,a=e.state;if(t.isTransition){var r=Cr.T,i={};Cr.T=i;try{var o=n(a,s),l=Cr.S;null!==l&&l(i,o),Et(e,t,o)}catch(c){At(e,t,c)}finally{null!==r&&null!==i.types&&(r.types=i.types),Cr.T=r}}else try{Et(e,t,r=n(a,s))}catch(d){At(e,t,d)}}function Et(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Rt(e,t,n)},function(n){return At(e,t,n)}):Rt(e,t,n)}function Rt(e,t,n){t.status="fulfilled",t.value=n,Tt(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Pt(e,n)))}function At(e,t,n){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=n,Tt(t),t=t.next}while(t!==s)}e.action=null}function Tt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Mt(e,t){return t}function Dt(e,t){if(Ml){var n=ad.formState;if(null!==n){e:{var s=Sc;if(Ml){if(Tl){var a=qi(Tl,Ll);if(a){Tl=Gi(a),s=Hi(a);break e}}U(s)}s=!1}s&&(t=n[0])}}(n=dt()).memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mt,lastRenderedState:t},n.queue=s,n=cn.bind(null,Sc,s),s.dispatch=n,s=kt(!1);var r=un.bind(null,Sc,!1,s.queue);return a={state:t,dispatch:null,action:e,pending:null},(s=dt()).queue=a,n=_t.bind(null,Sc,a,r,n),a.dispatch=n,s.memoizedState=e,[t,n,!1]}function Lt(e){return Ft(ut(),jc,e)}function Ft(e,t,n){if(t=xt(e,t,Mt)[0],e=gt(ft)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var s=ht(t)}catch(i){if(i===nc)throw ac;throw i}else s=t;var a=(t=ut()).queue,r=a.dispatch;return n!==t.memoizedState&&(Sc.flags|=2048,zt(9,{destroy:void 0},It.bind(null,a,n),null)),[s,r,e]}function It(e,t){e.action=t}function Ot(e){var t=ut(),n=jc;if(null!==n)return Ft(t,n,e);ut(),t=t.memoizedState;var s=(n=ut()).queue.dispatch;return n.memoizedState=e,[t,s,!1]}function zt(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},null===(t=Sc.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Bt(){return ut().memoizedState}function $t(e,t,n,s){var a=dt();Sc.flags|=e,a.memoizedState=zt(1|t,{destroy:void 0},n,void 0===s?null:s)}function Ut(e,t,n,s){var a=ut();s=void 0===s?null:s;var r=a.memoizedState.inst;null!==jc&&null!==s&&nt(s,jc.memoizedState.deps)?a.memoizedState=zt(t,r,n,s):(Sc.flags|=e,a.memoizedState=zt(1|t,r,n,s))}function Vt(e,t){$t(8390656,8,e,t)}function qt(e,t){Ut(2048,8,e,t)}function Ht(e){var t=ut().memoizedState;return function(e){Sc.flags|=4;var t=Sc.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Sc.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&sd)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Gt(e,t){return Ut(4,2,e,t)}function Kt(e,t){return Ut(4,4,e,t)}function Wt(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Qt(e,t,n){n=null!=n?n.concat([e]):null,Ut(4,4,Wt.bind(null,t,e),n)}function Yt(){}function Xt(e,t){var n=ut();t=void 0===t?null:t;var s=n.memoizedState;return null!==t&&nt(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Zt(e,t){var n=ut();t=void 0===t?null:t;var s=n.memoizedState;if(null!==t&&nt(t,s[1]))return s[0];if(s=e(),_c){_(!0);try{e()}finally{_(!1)}}return n.memoizedState=[s,t],s}function Jt(e,t,n){return void 0===n||1073741824&wc&&!(261930&id)?e.memoizedState=t:(e.memoizedState=n,e=aa(),Sc.lanes|=e,pd|=e,n)}function en(e,t,n,s){return ml(n,t)?n:null!==gc.current?(e=Jt(e,n,s),ml(e,t)||(Oc=!0),e):42&wc&&(!(1073741824&wc)||261930&id)?(e=aa(),Sc.lanes|=e,pd|=e,t):(Oc=!0,e.memoizedState=n)}function tn(e,t,n,s,a){var r=Wr();Kr(0!==r&&8>r?r:8);var i,o,l,c=Cr.T,d={};Cr.T=d,un(e,!1,t,n);try{var u=a(),h=Cr.S;null!==h&&h(d,u),null!==u&&"object"==typeof u&&"function"==typeof u.then?dn(e,t,(i=s,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},u.then(function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),sa()):dn(e,t,s,sa())}catch(m){dn(e,t,{then:function(){},status:"rejected",reason:m},sa())}finally{Kr(r),null!==c&&null!==d.types&&(c.types=d.types),Cr.T=c}}function nn(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:ri,baseState:ri,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:ri},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function sn(){return ne(ii)}function an(){return ut().memoizedState}function rn(){return ut().memoizedState}function on(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=sa(),s=ze(t,e=Oe(n),n);return null!==s&&(ra(s,0,n),Be(s,t,n)),t={cache:re()},void(e.payload=t)}t=t.return}}function ln(e,t,n){var s=sa();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hn(e)?mn(t,n):null!==(n=Te(e,t,n,s))&&(ra(n,0,s),pn(n,t,s))}function cn(e,t,n){dn(e,t,n,sa())}function dn(e,t,n,s){var a={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hn(e))mn(t,a);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,n);if(a.hasEagerState=!0,a.eagerState=o,ml(o,i))return Ae(e,t,a,0),null===ad&&Re(),!1}catch(l){}if(null!==(n=Te(e,t,a,s)))return ra(n,0,s),pn(n,t,s),!0}return!1}function un(e,t,n,a){if(a={lane:2,revertLane:fe(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hn(e)){if(t)throw Error(s(479))}else null!==(t=Te(e,n,a,2))&&ra(t,0,2)}function hn(e){var t=e.alternate;return e===Sc||null!==t&&t===Sc}function mn(e,t){Nc=kc=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pn(e,t,n){if(4194048&n){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,j(e,n)}}function fn(e,t,n,s){n=null==(n=n(s,t=e.memoizedState))?t:rr({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function gn(e,t,n,s,a,r,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,i):!(t.prototype&&t.prototype.isPureReactComponent&&be(n,s)&&be(a,r))}function xn(e,t,n,s){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Fc.enqueueReplaceState(t,t.state,null)}function vn(e,t){var n=t;if("ref"in t)for(var s in n={},t)"ref"!==s&&(n[s]=t[s]);if(e=e.defaultProps)for(var a in n===t&&(n=rr({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function yn(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function bn(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function wn(e,t,n){return(n=Oe(n)).tag=3,n.payload={element:null},n.callback=function(){yn(e,t)},n}function Sn(e){return(e=Oe(e)).tag=3,e}function jn(e,t,n,s){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var r=s.value;e.payload=function(){return a(r)},e.callback=function(){bn(t,n,s)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){bn(t,n,s),"function"!=typeof a&&(null===Nd?Nd=new Set([this]):Nd.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}function Cn(e,t,n,s){t.child=null===e?dc(t,null,n,s):cc(t,e.child,n,s)}function kn(e,t,n,s,a){n=n.render;var r=t.ref;if("ref"in s){var i={};for(var o in s)"ref"!==o&&(i[o]=s[o])}else i=s;return te(t),s=st(e,t,n,i,r,a),o=ot(),null===e||Oc?(Ml&&o&&L(t),t.flags|=1,Cn(e,t,s,a),t.child):(lt(e,t,a),Kn(e,t,a))}function Nn(e,t,n,s,a){if(null===e){var r=n.type;return"function"!=typeof r||$a(r)||void 0!==r.defaultProps||null!==n.compare?((e=qa(n.type,null,s,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,_n(e,t,r,s,a))}if(r=e.child,!Wn(e,a)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:be)(i,s)&&e.ref===t.ref)return Kn(e,t,a)}return t.flags|=1,(e=Ua(r,s)).ref=t.ref,e.return=t,t.child=e}function _n(e,t,n,s,a){if(null!==e){var r=e.memoizedProps;if(be(r,s)&&e.ref===t.ref){if(Oc=!1,t.pendingProps=s=r,!Wn(e,a))return t.lanes=e.lanes,Kn(e,t,a);131072&e.flags&&(Oc=!0)}}return Dn(e,t,n,s,a)}function Pn(e,t,n,s){var a=s.children,r=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===s.mode){if(128&t.flags){if(r=null!==r?r.baseLanes|n:n,null!==e){for(s=t.child=e.child,a=0;null!==s;)a=a|s.lanes|s.childLanes,s=s.sibling;s=a&~r}else s=0,t.child=null;return Rn(e,t,r,n,s)}if(!(536870912&n))return s=t.lanes=536870912,Rn(e,t,null!==r?r.baseLanes|n:n,n,s);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ve(0,null!==r?r.cachePool:null),null!==r?Ge(t,r):Ke(),Xe(t)}else null!==r?(ve(0,r.cachePool),Ge(t,r),Ze(),t.memoizedState=null):(null!==e&&ve(0,null),Ke(),Ze());return Cn(e,t,a,n),t.child}function En(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Rn(e,t,n,s,a){var r=xe();return r=null===r?null:{parent:$r?Vl._currentValue:Vl._currentValue2,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&ve(0,null),Ke(),Xe(t),null!==e&&J(e,t,s,!0),t.childLanes=a,null}function An(e,t){return(t=Un({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Tn(e,t,n){return cc(t,e.child,null,n),(e=An(t,t.pendingProps)).flags|=2,Je(t),t.memoizedState=null,e}function Mn(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Dn(e,t,n,s,a){return te(t),n=st(e,t,n,s,void 0,a),s=ot(),null===e||Oc?(Ml&&s&&L(t),t.flags|=1,Cn(e,t,n,a),t.child):(lt(e,t,a),Kn(e,t,a))}function Ln(e,t,n,s,a,r){return te(t),t.updateQueue=null,n=rt(t,s,n,a),at(e),s=ot(),null===e||Oc?(Ml&&s&&L(t),t.flags|=1,Cn(e,t,n,r),t.child):(lt(e,t,r),Kn(e,t,r))}function Fn(e,t,n,s,a){if(te(t),null===t.stateNode){var r=Ko,i=n.contextType;"object"==typeof i&&null!==i&&(r=ne(i)),r=new n(s,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=Fc,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=s,r.state=t.memoizedState,r.refs={},Fe(t),i=n.contextType,r.context="object"==typeof i&&null!==i?ne(i):Ko,r.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(fn(t,n,i,s),r.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(i=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),i!==r.state&&Fc.enqueueReplaceState(r,r.state,null),Ve(t,s,r,a),Ue(),r.state=t.memoizedState),"function"==typeof r.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){r=t.stateNode;var o=t.memoizedProps,l=vn(n,o);r.props=l;var c=r.context,d=n.contextType;i=Ko,"object"==typeof d&&null!==d&&(i=ne(d));var u=n.getDerivedStateFromProps;d="function"==typeof u||"function"==typeof r.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o||c!==i)&&xn(t,r,s,i),pc=!1;var h=t.memoizedState;r.state=h,Ve(t,s,r,a),Ue(),c=t.memoizedState,o||h!==c||pc?("function"==typeof u&&(fn(t,n,u,s),c=t.memoizedState),(l=pc||gn(t,n,l,s,h,c,i))?(d||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.flags|=4194308)):("function"==typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),r.props=s,r.state=c,r.context=i,s=l):("function"==typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,Ie(e,t),d=vn(n,i=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=n.contextType,l=Ko,"object"==typeof c&&null!==c&&(l=ne(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(i!==u||h!==l)&&xn(t,r,s,l),pc=!1,h=t.memoizedState,r.state=h,Ve(t,s,r,a),Ue();var m=t.memoizedState;i!==u||h!==m||pc||null!==e&&null!==e.dependencies&&ee(e.dependencies)?("function"==typeof o&&(fn(t,n,o,s),m=t.memoizedState),(d=pc||gn(t,n,d,s,h,m,l)||null!==e&&null!==e.dependencies&&ee(e.dependencies))?(c||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(s,m,l),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,m,l)),"function"==typeof r.componentDidUpdate&&(t.flags|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),r.props=s,r.state=m,r.context=l,s=d):("function"!=typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Mn(e,t),s=!!(128&t.flags),r||s?(r=t.stateNode,n=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&s?(t.child=cc(t,e.child,null,a),t.child=cc(t,null,n,a)):Cn(e,t,n,a),t.memoizedState=r.state,e=t.child):e=Kn(e,t,a),e}function In(e,t,n,s){return G(),t.flags|=256,Cn(e,t,n,s),t.child}function On(e){return{baseLanes:e,cachePool:ye()}}function zn(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=xd),e}function Bn(e,t,n){var a,r=t.pendingProps,i=!1,o=!!(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&!!(2&bc.current)),a&&(i=!0,t.flags&=-129),a=!!(32&t.flags),t.flags&=-33,null===e){if(Ml){if(i?Qe(t):Ze(),(e=Tl)?null!==(e=no(e,Ll))&&(t.memoizedState={dehydrated:e,treeContext:null!==Cl?{id:kl,overflow:Nl}:null,retryLane:536870912,hydrationErrors:null},(n=Ka(e)).return=t,t.child=n,Al=t,Tl=null):e=null,null===e)throw U(t);return $i(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,i?(Ze(),l=Un({mode:"hidden",children:l},i=t.mode),r=Ha(r,i,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=On(n),r.childLanes=zn(e,a,n),t.memoizedState=zc,En(null,r)):(Qe(t),$n(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Qe(t),t.flags&=-257,t=Vn(e,t,n)):null!==t.memoizedState?(Ze(),t.child=e.child,t.flags|=128,t=null):(Ze(),l=r.fallback,i=t.mode,r=Un({mode:"visible",children:r.children},i),(l=Ha(l,i,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,cc(t,e.child,null,n),(r=t.child).memoizedState=On(n),r.childLanes=zn(e,a,n),t.memoizedState=zc,t=En(null,r));else if(Qe(t),$i(l))a=Ui(l).digest,(r=Error(s(419))).stack="",r.digest=a,W({value:r,source:null,stack:null}),t=Vn(e,t,n);else if(Oc||J(e,t,n,!1),a=0!==(n&e.childLanes),Oc||a){if(null!==(a=ad)&&0!==(r=C(a,n))&&r!==c.retryLane)throw c.retryLane=r,Me(e,r),ra(a,0,r),Ic;Bi(l)||xa(),t=Vn(e,t,n)}else Bi(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,qr&&(Tl=Xi(l),Al=t,Ml=!0,Dl=null,Ll=!1,null!==e&&I(t,e)),(t=$n(t,r.children)).flags|=4096);return t}return i?(Ze(),l=r.fallback,i=t.mode,o=(c=e.child).sibling,(r=Ua(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==o?l=Ua(o,l):(l=Ha(l,i,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,En(null,r),r=t.child,null===(l=e.child.memoizedState)?l=On(n):(null!==(i=l.cachePool)?(c=$r?Vl._currentValue:Vl._currentValue2,i=i.parent!==c?{parent:c,pool:c}:i):i=ye(),l={baseLanes:l.baseLanes|n,cachePool:i}),r.memoizedState=l,r.childLanes=zn(e,a,n),t.memoizedState=zc,En(e.child,r)):(Qe(t),e=(n=e.child).sibling,(n=Ua(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function $n(e,t){return(t=Un({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Un(e,n){return(e=t(22,e,null,n)).lanes=0,e}function Vn(e,t,n){return cc(t,e.child,null,n),(e=$n(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qn(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),X(e.return,t,n)}function Hn(e,t,n,s,a,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a,i.treeForkCount=r)}function Gn(e,t,n){var s=t.pendingProps,a=s.revealOrder,r=s.tail;s=s.children;var i=bc.current,o=!!(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,p(bc,i),Cn(e,t,s,n),s=Ml?wl:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qn(e,n,t);else if(19===e.tag)qn(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===et(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Hn(t,!1,a,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===et(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Hn(t,!0,n,null,r,s);break;case"together":Hn(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Kn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pd|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(J(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ua(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ua(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wn(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ee(e))}function Qn(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oc=!0;else{if(!(Wn(e,n)||128&t.flags))return Oc=!1,function(e,t,n){switch(t.tag){case 3:O(t,t.stateNode.containerInfo),Q(0,Vl,e.memoizedState.cache),G();break;case 27:case 5:B(t);break;case 4:O(t,t.stateNode.containerInfo);break;case 10:Q(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ye(t),null;break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(Qe(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bn(e,t,n):(Qe(t),null!==(e=Kn(e,t,n))?e.sibling:null);Qe(t);break;case 19:var a=!!(128&e.flags);if((s=0!==(n&t.childLanes))||(J(e,t,n,!1),s=0!==(n&t.childLanes)),a){if(s)return Gn(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),p(bc,bc.current),s)break;return null;case 22:return t.lanes=0,Pn(e,t,n,t.pendingProps);case 24:Q(0,Vl,e.memoizedState.cache)}return Kn(e,t,n)}(e,t,n);Oc=!!(131072&e.flags)}else Oc=!1,Ml&&1048576&t.flags&&D(t,wl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=je(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var r=e.$$typeof;if(r===pr){t.tag=11,t=kn(null,t,e,a,n);break e}if(r===xr){t.tag=14,t=Nn(null,t,e,a,n);break e}}throw t=d(e)||e,Error(s(306,t,""))}$a(e)?(a=vn(e,a),t.tag=1,t=Fn(null,t,e,a,n)):(t.tag=0,t=Dn(null,t,e,a,n))}return t;case 0:return Dn(e,t,t.type,t.pendingProps,n);case 1:return Fn(e,t,a=t.type,r=vn(a,t.pendingProps),n);case 3:e:{if(O(t,t.stateNode.containerInfo),null===e)throw Error(s(387));var i=t.pendingProps;a=(r=t.memoizedState).element,Ie(e,t),Ve(t,i,null,n);var o=t.memoizedState;if(i=o.cache,Q(0,Vl,i),i!==r.cache&&Z(t,[Vl],n,!0),Ue(),i=o.element,qr&&r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=In(e,t,i,n);break e}if(i!==a){W(a=T(Error(s(424)),t)),t=In(e,t,i,n);break e}for(qr&&(Tl=Qi(t.stateNode.containerInfo),Al=t,Ml=!0,Dl=null,Ll=!0),n=dc(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(G(),i===a){t=Kn(e,t,n);break e}Cn(e,t,i,n)}t=t.child}return t;case 26:if(ko)return Mn(e,t),null===e?(n=Po(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ml||(t.stateNode=Do(t.type,t.pendingProps,El.current,t)):t.memoizedState=Po(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(zo)return B(t),null===e&&zo&&Ml&&(a=t.stateNode=Bo(t.type,t.pendingProps,El.current,_l.current,!1),Al=t,Ll=!0,Tl=Zi(t.type,a,Tl)),Cn(e,t,t.pendingProps.children,n),Mn(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&Ml&&(jo(t.type,t.pendingProps,_l.current),(r=a=Tl)&&(null!==(a=Ji(a,t.type,t.pendingProps,Ll))?(t.stateNode=a,Al=t,Tl=Wi(a),Ll=!1,r=!0):r=!1),r||U(t)),B(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Fr(r,i)?a=null:null!==o&&Fr(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=st(e,t,it,null,null,n),$r?ii._currentValue=r:ii._currentValue2=r),Mn(e,t),Cn(e,t,a,n),t.child;case 6:return null===e&&Ml&&(Co(t.pendingProps,_l.current),(e=n=Tl)&&(null!==(n=eo(n,t.pendingProps,Ll))?(t.stateNode=n,Al=t,Tl=null,e=!0):e=!1),e||U(t)),null;case 13:return Bn(e,t,n);case 4:return O(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=cc(t,null,a,n):Cn(e,t,a,n),t.child;case 11:return kn(e,t,t.type,t.pendingProps,n);case 7:return Cn(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Q(0,t.type,a.value),Cn(e,t,a.children,n),t.child;case 9:return r=t.type._context,a=t.pendingProps.children,te(t),a=a(r=ne(r)),t.flags|=1,Cn(e,t,a,n),t.child;case 14:return Nn(e,t,t.type,t.pendingProps,n);case 15:return _n(e,t,t.type,t.pendingProps,n);case 19:return Gn(e,t,n);case 31:return function(e,t,n){var a=t.pendingProps,r=!!(128&t.flags);if(t.flags&=-129,null===e){if(Ml){if("hidden"===a.mode)return e=An(t,a),t.lanes=536870912,En(null,e);if(Ye(t),(e=Tl)?null!==(e=to(e,Ll))&&(t.memoizedState={dehydrated:e,treeContext:null!==Cl?{id:kl,overflow:Nl}:null,retryLane:536870912,hydrationErrors:null},(n=Ka(e)).return=t,t.child=n,Al=t,Tl=null):e=null,null===e)throw U(t);return t.lanes=536870912,null}return An(t,a)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Ye(t),r)if(256&t.flags)t.flags&=-257,t=Tn(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Oc||J(e,t,n,!1),r=0!==(n&e.childLanes),Oc||r){if(null!==(a=ad)&&0!==(o=C(a,n))&&o!==i.retryLane)throw i.retryLane=o,Me(e,o),ra(a,0,o),Ic;xa(),t=Tn(e,t,n)}else e=i.treeContext,qr&&(Tl=Yi(o),Al=t,Ml=!0,Dl=null,Ll=!1,null!==e&&I(t,e)),(t=An(t,a)).flags|=4096;return t}return(e=Ua(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Pn(e,t,n,t.pendingProps);case 24:return te(t),a=ne(Vl),null===e?(null===(r=xe())&&(r=ad,i=re(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:a,cache:r},Fe(t),Q(0,Vl,r)):(0!==(e.lanes&n)&&(Ie(e,t),Ve(t,null,null,n),Ue()),r=e.memoizedState,i=t.memoizedState,r.parent!==a?(r={parent:a,cache:a},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Q(0,Vl,a)):(a=i.cache,Q(0,Vl,a),a!==r.cache&&Z(t,[Vl],n,!0))),Cn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Yn(e){e.flags|=4}function Xn(e){Vr&&(e.flags|=8)}function Zn(e,t){if(null!==e&&e.child===t.child)return!1;if(16&t.flags)return!0;for(e=t.child;null!==e;){if(8218&e.flags||8218&e.subtreeFlags)return!0;e=e.sibling}return!1}function Jn(e,t,n,s){if(Ur)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)Dr(e,n.stateNode);else if(!(4===n.tag||zo&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(Vr)for(var a=t.child;null!==a;){if(5===a.tag){var r=a.stateNode;n&&s&&(r=Oi(r,a.type,a.memoizedProps)),Dr(e,r)}else if(6===a.tag)r=a.stateNode,n&&s&&(r=zi(r,a.memoizedProps)),Dr(e,r);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(r=a.child)&&(r.return=a),Jn(e,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function es(e,t,n,s){var a=!1;if(Vr)for(var r=t.child;null!==r;){if(5===r.tag){var i=r.stateNode;n&&s&&(i=Oi(i,r.type,r.memoizedProps)),Li(e,i)}else if(6===r.tag)i=r.stateNode,n&&s&&(i=zi(i,r.memoizedProps)),Li(e,i);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(a=r.child)&&(a.return=r),es(e,r,!0,!0),a=!0;else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return a;r=r.return}r.sibling.return=r.return,r=r.sibling}return a}function ts(e,t){if(Vr&&Zn(e,t)){var n=(e=t.stateNode).containerInfo,s=Di();es(s,t,!1,!1),e.pendingChildren=s,Yn(t),Fi(n,s)}}function ns(e,t,n,s){if(Ur)e.memoizedProps!==s&&Yn(t);else if(Vr){var a=e.stateNode,r=e.memoizedProps;if((e=Zn(e,t))||r!==s){var i=_l.current;(r=Mi(a,n,r,s,!e,null))===a?t.stateNode=a:(Xn(t),Lr(r,n,s,i)&&Yn(t),t.stateNode=r,e&&Jn(r,t,!1,!1))}else t.stateNode=a}}function ss(e,t,n,s,a){if(32&e.mode&&(null===n?Zr(t,s):Jr(t,n,s))){if(e.flags|=16777216,(335544128&a)===a||ei(t,s))if(ti(e.stateNode,t,s))e.flags|=8192;else{if(!pa())throw ic=rc,sc;e.flags|=8192}}else e.flags&=-16777217}function as(e,t){if(Fo(t)){if(e.flags|=16777216,!Io(t)){if(!pa())throw ic=rc,sc;e.flags|=8192}}else e.flags&=-16777217}function rs(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?y():536870912,e.lanes|=t,vd|=t)}function is(e,t){if(!Ml)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function os(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=65011712&a.subtreeFlags,s|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function ls(e,t,n){var a=t.pendingProps;switch(F(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return os(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Y(Vl),z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(H(t)?Yn(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,K())),ts(e,t),os(t),null;case 26:if(ko){var r=t.type,i=t.memoizedState;return null===e?(Yn(t),null!==i?(os(t),as(t,i)):(os(t),ss(t,r,null,a,n))):i?i!==e.memoizedState?(Yn(t),os(t),as(t,i)):(os(t),t.flags&=-16777217):(i=e.memoizedProps,Ur?i!==a&&Yn(t):ns(e,t,r,a),os(t),ss(t,r,i,a,n)),null}case 27:if(zo){if($(t),n=El.current,r=t.type,null!==e&&null!=t.stateNode)Ur?e.memoizedProps!==a&&Yn(t):ns(e,t,r,a);else{if(!a){if(null===t.stateNode)throw Error(s(166));return os(t),null}e=_l.current,H(t)?V(t,e):(e=Bo(r,a,n,e,!0),t.stateNode=e,Yn(t))}return os(t),null}case 5:if($(t),r=t.type,null!==e&&null!=t.stateNode)ns(e,t,r,a);else{if(!a){if(null===t.stateNode)throw Error(s(166));return os(t),null}if(i=_l.current,H(t))V(t,i),po(t.stateNode,r,a,i)&&(t.flags|=64);else{var o=Mr(r,a,El.current,i,t);Xn(t),Jn(o,t,!1,!1),t.stateNode=o,Lr(o,r,a,i)&&Yn(t)}}return os(t),ss(t,t.type,null===e?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Ur?n!==a&&Yn(t):Vr&&(n!==a?(e=El.current,n=_l.current,Xn(t),t.stateNode=Ir(a,e,n,t)):t.stateNode=e.stateNode);else{if("string"!=typeof a&&null===t.stateNode)throw Error(s(166));if(e=El.current,n=_l.current,H(t)){if(!qr)throw Error(s(176));if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(r=Al))switch(r.tag){case 27:case 5:a=r.memoizedProps}ao(e,n,t,a)||U(t,!0)}else Xn(t),t.stateNode=Ir(a,e,n,t)}return os(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(a=H(t),null!==n){if(null===e){if(!a)throw Error(s(318));if(!qr)throw Error(s(556));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));ro(e,t)}else G(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;os(t),e=!1}else n=K(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Je(t),t):(Je(t),null);if(128&t.flags)throw Error(s(558))}return os(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=H(t),null!==a&&null!==a.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!qr)throw Error(s(344));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));io(r,t)}else G(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;os(t),r=!1}else r=K(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Je(t),t):(Je(t),null)}return Je(t),128&t.flags?(t.lanes=n,t):(n=null!==a,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(r=a.alternate.memoizedState.cachePool.pool),i=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(i=a.memoizedState.cachePool.pool),i!==r&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),rs(t,t.updateQueue),os(t),null);case 4:return z(),ts(e,t),null===e&&Gr(t.stateNode.containerInfo),os(t),null;case 10:return Y(t.type),os(t),null;case 19:if(h(bc),null===(a=t.memoizedState))return os(t),null;if(r=!!(128&t.flags),null===(i=a.rendering))if(r)is(a,!1);else{if(0!==md||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=et(e))){for(t.flags|=128,is(a,!1),e=i.updateQueue,t.updateQueue=e,rs(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Va(n,e),n=n.sibling;return p(bc,1&bc.current|2),Ml&&M(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&al()>Cd&&(t.flags|=128,r=!0,is(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=et(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,rs(t,e),is(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!Ml)return os(t),null}else 2*al()-a.renderingStartTime>Cd&&536870912!==n&&(t.flags|=128,r=!0,is(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=al(),e.sibling=null,n=bc.current,p(bc,r?1&n|2:1&n),Ml&&M(t,a.treeForkCount),e):(os(t),null);case 22:case 23:return Je(t),We(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?!!(536870912&n)&&!(128&t.flags)&&(os(t),6&t.subtreeFlags&&(t.flags|=8192)):os(t),null!==(n=t.updateQueue)&&rs(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&h(tc),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Y(Vl),os(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function cs(e,t){switch(F(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Y(Vl),z(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Je(t),null===t.alternate)throw Error(s(340));G()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Je(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));G()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return h(bc),null;case 4:return z(),null;case 10:return Y(t.type),null;case 22:case 23:return Je(t),We(),null!==e&&h(tc),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Y(Vl),null;default:return null}}function ds(e,t){switch(F(t),t.tag){case 3:Y(Vl),z();break;case 26:case 27:case 5:$(t);break;case 4:z();break;case 31:null!==t.memoizedState&&Je(t);break;case 13:Je(t);break;case 19:h(bc);break;case 10:Y(t.type);break;case 22:case 23:Je(t),We(),null!==e&&h(tc);break;case 24:Y(Vl)}}function us(e,t){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var a=s.next;n=a;do{if((n.tag&e)===e){s=void 0;var r=n.create,i=n.inst;s=r(),i.destroy=s}n=n.next}while(n!==a)}}catch(o){Da(t,t.return,o)}}function hs(e,t,n){try{var s=t.updateQueue,a=null!==s?s.lastEffect:null;if(null!==a){var r=a.next;s=r;do{if((s.tag&e)===e){var i=s.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,a=t;var l=n,c=o;try{c()}catch(d){Da(a,l,d)}}}s=s.next}while(s!==r)}}catch(d){Da(t,t.return,d)}}function ms(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{He(t,n)}catch(s){Da(e,e.return,s)}}}function ps(e,t,n){n.props=vn(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){Da(e,t,s)}}function fs(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var s=Pr(e.stateNode);break;default:s=e.stateNode}"function"==typeof n?e.refCleanup=n(s):n.current=s}}catch(a){Da(e,t,a)}}function gs(e,t){var n=e.ref,s=e.refCleanup;if(null!==n)if("function"==typeof s)try{s()}catch(a){Da(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(r){Da(e,t,r)}else n.current=null}function xs(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{wi(s,t,n,e)}catch(a){Da(e,e.return,a)}}function vs(e,t,n){try{Si(e.stateNode,e.type,n,t,e)}catch(s){Da(e,e.return,s)}}function ys(e){return 5===e.tag||3===e.tag||!!ko&&26===e.tag||!!zo&&27===e.tag&&qo(e.type)||4===e.tag}function bs(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ys(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(zo&&27===e.tag&&qo(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ws(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?Ci(n,e,t):yi(n,e);else if(4!==s&&(zo&&27===s&&qo(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function Ss(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?ji(n,e,t):vi(n,e);else if(4!==s&&(zo&&27===s&&qo(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function js(e,t,n){e=e.containerInfo;try{Ii(e,n)}catch(s){Da(t,t.return,s)}}function Cs(e){var t=e.stateNode,n=e.memoizedProps;try{$o(e.type,n,t,e)}catch(s){Da(e,e.return,s)}}function ks(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Fs(e,n),4&s&&us(5,n);break;case 1:if(Fs(e,n),4&s)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){Da(n,n.return,i)}else{var a=vn(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Da(n,n.return,o)}}64&s&&ms(n),512&s&&fs(n,n.return);break;case 3:if(Fs(e,n),64&s&&null!==(s=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=Pr(n.child.stateNode);break;case 1:e=n.child.stateNode}try{He(s,e)}catch(i){Da(n,n.return,i)}}break;case 27:zo&&null===t&&4&s&&Cs(n);case 26:case 5:if(Fs(e,n),null===t)if(4&s)xs(n);else if(64&s){e=n.type,t=n.memoizedProps,a=n.stateNode;try{co(a,e,t,n)}catch(i){Da(n,n.return,i)}}512&s&&fs(n,n.return);break;case 12:Fs(e,n);break;case 31:Fs(e,n),4&s&&Es(e,n);break;case 13:Fs(e,n),4&s&&Rs(e,n),64&s&&null!==(s=n.memoizedState)&&null!==(s=s.dehydrated)&&(n=Oa.bind(null,n),Vi(s,n));break;case 22:if(!(s=null!==n.memoizedState||Bc)){t=null!==t&&null!==t.memoizedState||$c,a=Bc;var r=$c;Bc=s,($c=t)&&!r?Os(e,n,!!(8772&n.subtreeFlags)):Fs(e,n),Bc=a,$c=r}break;case 30:break;default:Fs(e,n)}}function Ns(e){var t=e.alternate;null!==t&&(e.alternate=null,Ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Xr(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _s(e,t,n){for(n=n.child;null!==n;)Ps(e,t,n),n=n.sibling}function Ps(e,t,n){if(hl&&"function"==typeof hl.onCommitFiberUnmount)try{hl.onCommitFiberUnmount(ul,n)}catch(wW){}switch(n.tag){case 26:if(ko){$c||gs(n,t),_s(e,t,n),n.memoizedState?Ro(n.memoizedState):n.stateNode&&Mo(n.stateNode);break}case 27:if(zo){$c||gs(n,t);var s=Hc,a=Gc;qo(n.type)&&(Hc=n.stateNode,Gc=!1),_s(e,t,n),Uo(n.stateNode),Hc=s,Gc=a;break}case 5:$c||gs(n,t);case 6:if(Ur){if(s=Hc,a=Gc,Hc=null,_s(e,t,n),Gc=a,null!==(Hc=s))if(Gc)try{Ni(Hc,n.stateNode)}catch(r){Da(n,t,r)}else try{ki(Hc,n.stateNode)}catch(r){Da(n,t,r)}}else _s(e,t,n);break;case 18:Ur&&null!==Hc&&(Gc?xo(Hc,n.stateNode):go(Hc,n.stateNode));break;case 4:Ur?(s=Hc,a=Gc,Hc=n.stateNode.containerInfo,Gc=!0,_s(e,t,n),Hc=s,Gc=a):(Vr&&js(n.stateNode,n,Di()),_s(e,t,n));break;case 0:case 11:case 14:case 15:hs(2,n,t),$c||hs(4,n,t),_s(e,t,n);break;case 1:$c||(gs(n,t),"function"==typeof(s=n.stateNode).componentWillUnmount&&ps(n,t,s)),_s(e,t,n);break;case 21:_s(e,t,n);break;case 22:$c=(s=$c)||null!==n.memoizedState,_s(e,t,n),$c=s;break;default:_s(e,t,n)}}function Es(e,t){if(qr&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{ho(e)}catch(n){Da(t,t.return,n)}}}function Rs(e,t){if(qr&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{mo(e)}catch(n){Da(t,t.return,n)}}function As(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Vc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Vc),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var s=za.bind(null,e,t);t.then(s,s)}})}function Ts(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a],i=e,o=t;if(Ur){var l=o;e:for(;null!==l;){switch(l.tag){case 27:if(zo){if(qo(l.type)){Hc=l.stateNode,Gc=!1;break e}break}case 5:Hc=l.stateNode,Gc=!1;break e;case 3:case 4:Hc=l.stateNode.containerInfo,Gc=!0;break e}l=l.return}if(null===Hc)throw Error(s(160));Ps(i,o,r),Hc=null,Gc=!1}else Ps(i,o,r);null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ms(t,e),t=t.sibling}function Ms(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ts(t,e),Ds(e),4&a&&(hs(3,e,e.return),us(3,e),hs(5,e,e.return));break;case 1:Ts(t,e),Ds(e),512&a&&($c||null===n||gs(n,n.return)),64&a&&Bc&&null!==(e=e.updateQueue)&&null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a));break;case 26:if(ko){var r=Kc;if(Ts(t,e),Ds(e),512&a&&($c||null===n||gs(n,n.return)),4&a){a=null!==n?n.memoizedState:null;var i=e.memoizedState;null===n?null===i?null===e.stateNode?e.stateNode=Ao(r,e.type,e.memoizedProps,e):To(r,e.type,e.stateNode):e.stateNode=Eo(r,i,e.memoizedProps):a!==i?(null===a?null!==n.stateNode&&Mo(n.stateNode):Ro(a),null===i?To(r,e.type,e.stateNode):Eo(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&vs(e,e.memoizedProps,n.memoizedProps)}break}case 27:if(zo){Ts(t,e),Ds(e),512&a&&($c||null===n||gs(n,n.return)),null!==n&&4&a&&vs(e,e.memoizedProps,n.memoizedProps);break}case 5:if(Ts(t,e),Ds(e),512&a&&($c||null===n||gs(n,n.return)),Ur){if(32&e.flags){r=e.stateNode;try{_i(r)}catch(h){Da(e,e.return,h)}}4&a&&null!=e.stateNode&&vs(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&a&&(Uc=!0)}else Vr&&null!==e.alternate&&(e.alternate.stateNode=e.stateNode);break;case 6:if(Ts(t,e),Ds(e),4&a&&Ur){if(null===e.stateNode)throw Error(s(162));a=e.memoizedProps,n=null!==n?n.memoizedProps:a,r=e.stateNode;try{bi(r,n,a)}catch(h){Da(e,e.return,h)}}break;case 3:if(ko?(Lo(),r=Kc,Kc=_o(t.containerInfo),Ts(t,e),Kc=r):Ts(t,e),Ds(e),4&a){if(Ur&&qr&&null!==n&&n.memoizedState.isDehydrated)try{uo(t.containerInfo)}catch(h){Da(e,e.return,h)}if(Vr){a=t.containerInfo,n=t.pendingChildren;try{Ii(a,n)}catch(h){Da(e,e.return,h)}}}Uc&&(Uc=!1,Ls(e));break;case 4:ko?(n=Kc,Kc=_o(e.stateNode.containerInfo),Ts(t,e),Ds(e),Kc=n):(Ts(t,e),Ds(e)),4&a&&Vr&&js(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:Ts(t,e),Ds(e);break;case 31:Ts(t,e),Ds(e),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,As(e,a));break;case 13:Ts(t,e),Ds(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Sd=al()),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,As(e,a));break;case 22:r=null!==e.memoizedState;var o=null!==n&&null!==n.memoizedState,l=Bc,c=$c;if(Bc=l||r,$c=c||o,Ts(t,e),$c=c,Bc=l,Ds(e),8192&a&&((t=e.stateNode)._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||o||Bc||$c||Is(e)),Ur))e:if(n=null,Ur)for(t=e;;){if(5===t.tag||ko&&26===t.tag){if(null===n){o=n=t;try{i=o.stateNode,r?Pi(i):Ri(o.stateNode,o.memoizedProps)}catch(h){Da(o,o.return,h)}}}else if(6===t.tag){if(null===n){o=t;try{var d=o.stateNode;r?Ei(d):Ai(d,o.memoizedProps)}catch(h){Da(o,o.return,h)}}}else if(18===t.tag){if(null===n){o=t;try{var u=o.stateNode;r?vo(u):yo(o.stateNode)}catch(h){Da(o,o.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&null!==(a=e.updateQueue)&&null!==(n=a.retryQueue)&&(a.retryQueue=null,As(e,n));break;case 19:Ts(t,e),Ds(e),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,As(e,a));break;case 30:case 21:break;default:Ts(t,e),Ds(e)}}function Ds(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(ys(a)){n=a;break}a=a.return}if(Ur){if(null==n)throw Error(s(160));switch(n.tag){case 27:if(zo){var r=n.stateNode;Ss(e,bs(e),r);break}case 5:var i=n.stateNode;32&n.flags&&(_i(i),n.flags&=-33),Ss(e,bs(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;ws(e,bs(e),o);break;default:throw Error(s(161))}}}catch(l){Da(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ls(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ls(t),5===t.tag&&1024&t.flags&&oi(t.stateNode),e=e.sibling}}function Fs(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)ks(e,t.alternate,t),t=t.sibling}function Is(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:hs(4,t,t.return),Is(t);break;case 1:gs(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&ps(t,t.return,n),Is(t);break;case 27:zo&&Uo(t.stateNode);case 26:case 5:gs(t,t.return),Is(t);break;case 22:null===t.memoizedState&&Is(t);break;default:Is(t)}e=e.sibling}}function Os(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,a=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:Os(a,r,n),us(4,r);break;case 1:if(Os(a,r,n),"function"==typeof(a=(s=r).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){Da(s,s.return,c)}if(null!==(a=(s=r).updateQueue)){var o=s.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)qe(l[a],o)}catch(c){Da(s,s.return,c)}}n&&64&i&&ms(r),fs(r,r.return);break;case 27:zo&&Cs(r);case 26:case 5:Os(a,r,n),n&&null===s&&4&i&&xs(r),fs(r,r.return);break;case 12:Os(a,r,n);break;case 31:Os(a,r,n),n&&4&i&&Es(a,r);break;case 13:Os(a,r,n),n&&4&i&&Rs(a,r);break;case 22:null===r.memoizedState&&Os(a,r,n),fs(r,r.return);break;case 30:break;default:Os(a,r,n)}t=t.sibling}}function zs(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ie(n))}function Bs(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ie(e))}function $s(e,t,n,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Us(e,t,n,s),t=t.sibling}function Us(e,t,n,s){var a=t.flags;switch(t.tag){case 0:case 11:case 15:$s(e,t,n,s),2048&a&&us(9,t);break;case 1:case 31:case 13:default:$s(e,t,n,s);break;case 3:$s(e,t,n,s),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ie(e)));break;case 12:if(2048&a){$s(e,t,n,s),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,o=r.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Da(t,t.return,l)}}else $s(e,t,n,s);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,null!==t.memoizedState?2&r._visibility?$s(e,t,n,s):qs(e,t):2&r._visibility?$s(e,t,n,s):(r._visibility|=2,Vs(e,t,n,s,!!(10256&t.subtreeFlags)||!1)),2048&a&&zs(i,t);break;case 24:$s(e,t,n,s),2048&a&&Bs(t.alternate,t)}}function Vs(e,t,n,s,a){for(a=a&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var r=e,i=t,o=n,l=s,c=i.flags;switch(i.tag){case 0:case 11:case 15:Vs(r,i,o,l,a),us(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?Vs(r,i,o,l,a):qs(r,i):(d._visibility|=2,Vs(r,i,o,l,a)),a&&2048&c&&zs(i.alternate,i);break;case 24:Vs(r,i,o,l,a),a&&2048&c&&Bs(i.alternate,i);break;default:Vs(r,i,o,l,a)}t=t.sibling}}function qs(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,s=t,a=s.flags;switch(s.tag){case 22:qs(n,s),2048&a&&zs(s.alternate,s);break;case 24:qs(n,s),2048&a&&Bs(s.alternate,s);break;default:qs(n,s)}t=t.sibling}}function Hs(e,t,n){if(e.subtreeFlags&Wc)for(e=e.child;null!==e;)Gs(e,t,n),e=e.sibling}function Gs(e,t,n){switch(e.tag){case 26:if(Hs(e,t,n),e.flags&Wc)if(null!==e.memoizedState)Oo(n,Kc,e.memoizedState,e.memoizedProps);else{var s=e.stateNode,a=e.type;e=e.memoizedProps,((335544128&t)===t||ei(a,e))&&si(n,s,a,e)}break;case 5:Hs(e,t,n),e.flags&Wc&&(s=e.stateNode,a=e.type,e=e.memoizedProps,((335544128&t)===t||ei(a,e))&&si(n,s,a,e));break;case 3:case 4:ko?(s=Kc,Kc=_o(e.stateNode.containerInfo),Hs(e,t,n),Kc=s):Hs(e,t,n);break;case 22:null===e.memoizedState&&(null!==(s=e.alternate)&&null!==s.memoizedState?(s=Wc,Wc=16777216,Hs(e,t,n),Wc=s):Hs(e,t,n));break;default:Hs(e,t,n)}}function Ks(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ws(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];qc=s,Xs(s,e)}Ks(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Qs(e),e=e.sibling}function Qs(e){switch(e.tag){case 0:case 11:case 15:Ws(e),2048&e.flags&&hs(9,e,e.return);break;case 3:case 12:default:Ws(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ys(e)):Ws(e)}}function Ys(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];qc=s,Xs(s,e)}Ks(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:hs(8,t,t.return),Ys(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Ys(t));break;default:Ys(t)}e=e.sibling}}function Xs(e,t){for(;null!==qc;){var n=qc;switch(n.tag){case 0:case 11:case 15:hs(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var s=n.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:ie(n.memoizedState.cache)}if(null!==(s=n.child))s.return=n,qc=s;else e:for(n=e;null!==qc;){var a=(s=qc).sibling,r=s.return;if(Ns(s),s===n){qc=null;break e}if(null!==a){a.return=r,qc=a;break e}qc=r}}}function Zs(e){var t=Hr(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=ui(e)))throw Error(s(362));return e.stateNode.current}function Js(e,t){var n=e.tag;switch(t.$$typeof){case Yc:if(e.type===t.value)return!0;break;case Xc:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var a=e[n++],r=a.tag,i=e[n++],o=t[i];if(5!==r&&26!==r&&27!==r||!pi(a)){for(;null!=o&&Js(a,o);)o=t[++i];if(i===t.length){t=!0;break e}for(a=a.child;null!==a;)e.push(a,i),a=a.sibling}}t=!1}return t;case Zc:if((5===n||26===n||27===n)&&fi(e.stateNode,t.value))return!0;break;case ed:if((5===n||6===n||26===n||27===n)&&null!==(e=mi(e))&&0<=e.indexOf(t.value))return!0;break;case Jc:if((5===n||26===n||27===n)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function ea(e){switch(e.$$typeof){case Yc:return"<"+(d(e.value)||"Unknown")+">";case Xc:return":has("+(ea(e)||"")+")";case Zc:return'[role="'+e.value+'"]';case ed:return'"'+e.value+'"';case Jc:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function ta(e,t){var n=[];e=[e,0];for(var s=0;s<e.length;){var a=e[s++],r=a.tag,i=e[s++],o=t[i];if(5!==r&&26!==r&&27!==r||!pi(a)){for(;null!=o&&Js(a,o);)o=t[++i];if(i===t.length)n.push(a);else for(a=a.child;null!==a;)e.push(a,i),a=a.sibling}}return n}function na(e,t){if(!di)throw Error(s(363));e=ta(e=Zs(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var a=e[n++],r=a.tag;if(5===r||26===r||27===r)pi(a)||t.push(a.stateNode);else for(a=a.child;null!==a;)e.push(a),a=a.sibling}return t}function sa(){return 2&sd&&0!==id?id&-id:null!==Cr.T?fe():Qr()}function aa(){if(0===xd)if(536870912&id&&!Ml)xd=536870912;else{var e=Zo;!(3932160&(Zo<<=1))&&(Zo=262144),xd=e}return null!==(e=vc.current)&&(e.flags|=32),xd}function ra(e,t,n){(e!==ad||2!==od&&9!==od)&&null===e.cancelPendingCommit||(ha(e,0),ca(e,id,xd,!1)),w(e,n),2&sd&&e===ad||(e===ad&&(!(2&sd)&&(fd|=n),4===md&&ca(e,id,xd,!1)),le(e))}function ia(e,t,n){if(6&sd)throw Error(s(327));for(var a=!n&&!(127&t)&&0===(t&e.expiredLanes)||x(e,t),r=a?function(e,t){var n=sd;sd|=2;var a=fa(),r=ga();ad!==e||id!==t?(kd=null,Cd=al()+500,ha(e,t)):dd=x(e,t);e:for(;;)try{if(0!==od&&null!==rd){t=rd;var i=ld;t:switch(od){case 1:od=0,ld=null,ja(e,t,i,1);break;case 2:case 9:if(we(i)){od=0,ld=null,Sa(t);break}t=function(){2!==od&&9!==od||ad!==e||(od=7),le(e)},i.then(t,t);break e;case 3:od=7;break e;case 4:od=5;break e;case 7:we(i)?(od=0,ld=null,Sa(t)):(od=0,ld=null,ja(e,t,i,7));break;case 5:var o=null;switch(rd.tag){case 26:o=rd.memoizedState;case 5:case 27:var l=rd,c=l.type,d=l.pendingProps;if(o?Io(o):ti(l.stateNode,c,d)){od=0,ld=null;var u=l.sibling;if(null!==u)rd=u;else{var h=l.return;null!==h?(rd=h,Ca(h)):rd=null}break t}}od=0,ld=null,ja(e,t,i,5);break;case 6:od=0,ld=null,ja(e,t,i,6);break;case 8:ua(),md=6;break e;default:throw Error(s(462))}}ba();break}catch(m){ma(e,m)}return zl=Ol=null,Cr.H=a,Cr.A=r,sd=n,null!==rd?0:(ad=null,id=0,Re(),md)}(e,t):va(e,t,!0),i=a;;){if(0===r){dd&&!a&&ca(e,t,0,!1);break}if(n=e.current.alternate,!i||la(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!=(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=yd;var c=qr&&l.current.memoizedState.isDehydrated;if(c&&(ha(l,o).flags|=256),2!==(o=va(l,o,!1))){if(ud&&!c){l.errorRecoveryDisabledLanes|=i,fd|=i,r=4;break e}i=bd,bd=r,null!==i&&(null===bd?bd=i:bd.push.apply(bd,i))}r=o}if(i=!1,2!==r)continue}}if(1===r){ha(e,0),ca(e,t,0,!0);break}e:{switch(a=e,i=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:ca(a,t,xd,!cd);break e;case 2:bd=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(r=Sd+300-al())){if(ca(a,t,xd,!cd),0!==g(a,0,!0))break e;Rd=t,a.timeoutHandle=Or(oa.bind(null,a,n,bd,kd,wd,t,xd,fd,vd,cd,i,"Throttled",-0,0),r)}else oa(a,n,bd,kd,wd,t,xd,fd,vd,cd,i,null,-0,0)}break}r=va(e,t,!1),i=!1}le(e)}function oa(e,t,n,s,a,r,i,o,l,c,d,u,h,m){if(e.timeoutHandle=Br,8192&(u=t.subtreeFlags)||!(16785408&~u)){Gs(t,r,u=ni());var p=(62914560&r)===r?Sd-al():(4194048&r)===r?jd-al():0;if(null!==(p=ai(u,p)))return Rd=r,e.cancelPendingCommit=p(Na.bind(null,e,t,r,n,s,a,i,o,l,d,u,null,h,m)),void ca(e,r,i,!c)}Na(e,t,r,n,s,a,i,o,l)}function la(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var a=n[s],r=a.getSnapshot;a=a.value;try{if(!ml(r(),a))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ca(e,t,n,s){t&=~gd,t&=~fd,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var a=t;0<a;){var r=31-Wo(a),i=1<<r;s[r]=-1,a&=~i}0!==n&&S(e,n,t)}function da(){return!!(6&sd)||(ce(0),!1)}function ua(){if(null!==rd){if(0===od)var e=rd.return;else zl=Ol=null,ct(e=rd),oc=null,lc=0,e=rd;for(;null!==e;)ds(e.alternate,e),e=e.return;rd=null}}function ha(e,t){var n=e.timeoutHandle;n!==Br&&(e.timeoutHandle=Br,zr(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Rd=0,ua(),ad=e,rd=n=Ua(e.current,null),id=t,od=0,ld=null,cd=!1,dd=x(e,t),ud=!1,vd=xd=gd=fd=pd=md=0,bd=yd=null,wd=!1,8&t&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var a=31-Wo(s),r=1<<a;t|=e[a],s&=~r}return hd=t,Re(),n}function ma(e,t){Sc=null,Cr.H=Tc,t===nc||t===ac?(t=Ce(),od=3):t===sc?(t=Ce(),od=4):od=t===Ic?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ld=t,null===rd&&(md=1,yn(e,T(t,e.current)))}function pa(){var e=vc.current;return null===e||((4194048&id)===id?null===yc:!!((62914560&id)===id||536870912&id)&&e===yc)}function fa(){var e=Cr.H;return Cr.H=Tc,null===e?Tc:e}function ga(){var e=Cr.A;return Cr.A=Qc,e}function xa(){md=4,cd||(4194048&id)!==id&&null!==vc.current||(dd=!0),!(134217727&pd)&&!(134217727&fd)||null===ad||ca(ad,id,xd,!1)}function va(e,t,n){var s=sd;sd|=2;var a=fa(),r=ga();ad===e&&id===t||(kd=null,ha(e,t)),t=!1;var i=md;e:for(;;)try{if(0!==od&&null!==rd){var o=rd,l=ld;switch(od){case 8:ua(),i=6;break e;case 3:case 2:case 9:case 6:null===vc.current&&(t=!0);var c=od;if(od=0,ld=null,ja(e,o,l,c),n&&dd){i=0;break e}break;default:c=od,od=0,ld=null,ja(e,o,l,c)}}ya(),i=md;break}catch(d){ma(e,d)}return t&&e.shellSuspendCounter++,zl=Ol=null,sd=s,Cr.H=a,Cr.A=r,null===rd&&(ad=null,id=0,Re()),i}function ya(){for(;null!==rd;)wa(rd)}function ba(){for(;null!==rd&&!nl();)wa(rd)}function wa(e){var t=Qn(e.alternate,e,hd);e.memoizedProps=e.pendingProps,null===t?Ca(e):rd=t}function Sa(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ln(n,t,t.pendingProps,t.type,void 0,id);break;case 11:t=Ln(n,t,t.pendingProps,t.type.render,t.ref,id);break;case 5:ct(t);default:ds(n,t),t=Qn(n,t=rd=Va(t,hd),hd)}e.memoizedProps=e.pendingProps,null===t?Ca(e):rd=t}function ja(e,t,n,a){zl=Ol=null,ct(t),oc=null,lc=0;var r=t.return;try{if(function(e,t,n,a,r){if(n.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){if(null!==(t=n.alternate)&&J(t,n,r,!0),null!==(n=vc.current)){switch(n.tag){case 31:case 13:return null===yc?xa():null===n.alternate&&0===md&&(md=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===rc?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),La(e,a,r)),!1;case 22:return n.flags|=65536,a===rc?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),La(e,a,r)),!1}throw Error(s(435,n.tag))}return La(e,a,r),xa(),!1}if(Ml)return null!==(t=vc.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,a!==Fl&&W(T(e=Error(s(422),{cause:a}),n))):(a!==Fl&&W(T(t=Error(s(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,a=T(a,n),$e(e,r=wn(e.stateNode,a,r)),4!==md&&(md=2)),!1;var i=Error(s(520),{cause:a});if(i=T(i,n),null===yd?yd=[i]:yd.push(i),4!==md&&(md=2),null===t)return!0;a=T(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,$e(n,e=wn(n.stateNode,a,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Nd&&Nd.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,jn(r=Sn(r),e,n,a),$e(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,id))return md=1,yn(e,T(n,e.current)),void(rd=null)}catch(i){if(null!==r)throw rd=r,i;return md=1,yn(e,T(n,e.current)),void(rd=null)}32768&t.flags?(Ml||1===a?e=!0:dd||536870912&id?e=!1:(cd=e=!0,(2===a||9===a||3===a||6===a)&&null!==(a=vc.current)&&13===a.tag&&(a.flags|=16384)),ka(t,e)):Ca(t)}function Ca(e){var t=e;do{if(32768&t.flags)return void ka(t,cd);e=t.return;var n=ls(t.alternate,t,hd);if(null!==n)return void(rd=n);if(null!==(t=t.sibling))return void(rd=t);rd=t=e}while(null!==t);0===md&&(md=5)}function ka(e,t){do{var n=cs(e.alternate,e);if(null!==n)return n.flags&=32767,void(rd=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(rd=e);rd=e=n}while(null!==e);md=6,rd=null}function Na(e,t,n,a,r,i,o,l,c){e.cancelPendingCommit=null;do{Aa()}while(0!==_d);if(6&sd)throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(i=t.lanes|t.childLanes,function(e,t,n,s,a,r){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-Wo(n),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==s&&S(e,s,0),0!==r&&0===a&&0!==e.tag&&(e.suspendedLanes|=r&~(i&~t))}(e,n,i|=mc,o,l,c),e===ad&&(rd=ad=null,id=0),Ed=t,Pd=e,Rd=n,Ad=i,Td=r,Md=a,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,el(ol,function(){return Ta(),null})):(e.callbackNode=null,e.callbackPriority=0),a=!!(13878&t.flags),13878&t.subtreeFlags||a){a=Cr.T,Cr.T=null,r=Wr(),Kr(2),o=sd,sd|=4;try{!function(e,t){for(Ar(e.containerInfo),qc=t;null!==qc;)if(t=(e=qc).child,1028&e.subtreeFlags&&null!==t)t.return=e,qc=t;else for(;null!==qc;){var n=(e=qc).alternate;switch(t=e.flags,e.tag){case 0:if(4&t&&null!==(t=null!==(t=e.updateQueue)?t.events:null))for(var a=0;a<t.length;a++){var r=t[a];r.ref.impl=r.nextImpl}break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&t&&null!==n){t=void 0,a=e,r=n.memoizedProps,n=n.memoizedState;var i=a.stateNode;try{var o=vn(a.type,r);t=i.getSnapshotBeforeUpdate(o,n),i.__reactInternalSnapshotBeforeUpdate=t}catch(l){Da(a,a.return,l)}}break;case 3:1024&t&&Ur&&Ti(e.stateNode.containerInfo);break;default:if(1024&t)throw Error(s(163))}if(null!==(t=e.sibling)){t.return=e.return,qc=t;break}qc=e.return}}(e,t)}finally{sd=o,Kr(r),Cr.T=a}}_d=1,_a(),Pa(),Ea()}}function _a(){if(1===_d){_d=0;var e=Pd,t=Ed,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=Cr.T,Cr.T=null;var s=Wr();Kr(2);var a=sd;sd|=4;try{Ms(t,e),Tr(e.containerInfo)}finally{sd=a,Kr(s),Cr.T=n}}e.current=t,_d=2}}function Pa(){if(2===_d){_d=0;var e=Pd,t=Ed,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=Cr.T,Cr.T=null;var s=Wr();Kr(2);var a=sd;sd|=4;try{ks(e,t.alternate,t)}finally{sd=a,Kr(s),Cr.T=n}}_d=3}}function Ea(){if(4===_d||3===_d){_d=0,sl();var e=Pd,t=Ed,n=Rd,s=Md;10256&t.subtreeFlags||10256&t.flags?_d=5:(_d=0,Ed=Pd=null,Ra(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Nd=null),N(n),t=t.stateNode,hl&&"function"==typeof hl.onCommitFiberRoot)try{hl.onCommitFiberRoot(ul,t,void 0,!(128&~t.current.flags))}catch(wW){}if(null!==s){t=Cr.T,a=Wr(),Kr(2),Cr.T=null;try{for(var r=e.onRecoverableError,i=0;i<s.length;i++){var o=s[i];r(o.value,{componentStack:o.stack})}}finally{Cr.T=t,Kr(a)}}3&Rd&&Aa(),le(e),a=e.pendingLanes,261930&n&&42&a?e===Ld?Dd++:(Dd=0,Ld=e):Dd=0,qr&&fo(),ce(0)}}function Ra(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,ie(t))}function Aa(){return _a(),Pa(),Ea(),Ta()}function Ta(){if(5!==_d)return!1;var e=Pd,t=Ad;Ad=0;var n=N(Rd),a=32>n?32:n;n=Cr.T;var r=Wr();try{Kr(a),Cr.T=null,a=Td,Td=null;var i=Pd,o=Rd;if(_d=0,Ed=Pd=null,Rd=0,6&sd)throw Error(s(331));var l=sd;if(sd|=4,Qs(i.current),Us(i,i.current,o,a),sd=l,ce(0),hl&&"function"==typeof hl.onPostCommitFiberRoot)try{hl.onPostCommitFiberRoot(ul,i)}catch(wW){}return!0}finally{Kr(r),Cr.T=n,Ra(e,t)}}function Ma(e,t,n){t=T(n,t),null!==(e=ze(e,t=wn(e.stateNode,t,2),2))&&(w(e,2),le(e))}function Da(e,t,n){if(3===e.tag)Ma(e,e,n);else for(;null!==t;){if(3===t.tag){Ma(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===Nd||!Nd.has(s))){e=T(n,e),null!==(s=ze(t,n=Sn(2),2))&&(jn(n,s,t,e),w(s,2),le(s));break}}t=t.return}}function La(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new nd;var a=new Set;s.set(t,a)}else void 0===(a=s.get(t))&&(a=new Set,s.set(t,a));a.has(n)||(ud=!0,a.add(n),e=Fa.bind(null,e,t,n),t.then(e,e))}function Fa(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ad===e&&(id&n)===n&&(4===md||3===md&&(62914560&id)===id&&300>al()-Sd?!(2&sd)&&ha(e,0):gd|=n,vd===id&&(vd=0)),le(e)}function Ia(e,t){0===t&&(t=y()),null!==(e=Me(e,t))&&(w(e,t),le(e))}function Oa(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ia(e,n)}function za(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==a&&a.delete(t),Ia(e,n)}function Ba(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $a(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ua(e,n){var s=e.alternate;return null===s?((s=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=65011712&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Va(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qa(e,n,a,r,i,o){var l=0;if(r=e,"function"==typeof e)$a(e)&&(l=1);else if("string"==typeof e)l=ko&&zo?No(e,a,_l.current)?26:Vo(e)?27:5:ko?No(e,a,_l.current)?26:5:zo&&Vo(e)?27:5;else e:switch(e){case yr:return(e=t(31,a,n,i)).elementType=yr,e.lanes=o,e;case cr:return Ha(a.children,i,o,n);case dr:l=8,i|=24;break;case ur:return(e=t(12,a,n,2|i)).elementType=ur,e.lanes=o,e;case fr:return(e=t(13,a,n,i)).elementType=fr,e.lanes=o,e;case gr:return(e=t(19,a,n,i)).elementType=gr,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case mr:l=10;break e;case hr:l=9;break e;case pr:l=11;break e;case xr:l=14;break e;case vr:l=16,r=null;break e}l=29,a=Error(s(130,null===e?"null":typeof e,"")),r=null}return(n=t(l,a,n,i)).elementType=e,n.type=r,n.lanes=o,n}function Ha(e,n,s,a){return(e=t(7,e,a,n)).lanes=s,e}function Ga(e,n,s){return(e=t(6,e,null,n)).lanes=s,e}function Ka(e){var n=t(18,null,null,0);return n.stateNode=e,n}function Wa(e,n,s){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Qa(e,t,n,s,a,r,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Br,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=b(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b(0),this.hiddenUpdates=b(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Ya(e,n,s,a,r,i,o,l,c,d,u,h){return e=new Qa(e,n,s,o,c,d,u,h,l),n=1,!0===i&&(n|=24),i=t(3,null,null,n),e.current=i,i.stateNode=e,(n=re()).refCount++,e.pooledCache=n,n.refCount++,i.memoizedState={element:a,isDehydrated:s,cache:n},Fe(i),e}function Xa(e){return e?e=Ko:Ko}function Za(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=null!==(e=i(t))?o(e):null)?null:Pr(e.stateNode)}function Ja(e,t,n,s,a,r){a=Xa(a),null===s.context?s.context=a:s.pendingContext=a,(s=Oe(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(s.callback=r),null!==(n=ze(e,s,t))&&(ra(n,0,t),Be(n,e,t))}function er(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tr(e,t){er(e,t),(e=e.alternate)&&er(e,t)}var nr={},sr=m(),ar=l$(),rr=Object.assign,ir=Symbol.for("react.element"),or=Symbol.for("react.transitional.element"),lr=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),dr=Symbol.for("react.strict_mode"),ur=Symbol.for("react.profiler"),hr=Symbol.for("react.consumer"),mr=Symbol.for("react.context"),pr=Symbol.for("react.forward_ref"),fr=Symbol.for("react.suspense"),gr=Symbol.for("react.suspense_list"),xr=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),yr=Symbol.for("react.activity"),br=Symbol.for("react.memo_cache_sentinel"),wr=Symbol.iterator,Sr=Symbol.for("react.client.reference"),jr=Array.isArray,Cr=sr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,kr=e.rendererVersion,Nr=e.rendererPackageName,_r=e.extraDevToolsConfig,Pr=e.getPublicInstance,Er=e.getRootHostContext,Rr=e.getChildHostContext,Ar=e.prepareForCommit,Tr=e.resetAfterCommit,Mr=e.createInstance;e.cloneMutableInstance;var Dr=e.appendInitialChild,Lr=e.finalizeInitialChildren,Fr=e.shouldSetTextContent,Ir=e.createTextInstance;e.cloneMutableTextInstance;var Or=e.scheduleTimeout,zr=e.cancelTimeout,Br=e.noTimeout,$r=e.isPrimaryRenderer;e.warnsIfNotActing;var Ur=e.supportsMutation,Vr=e.supportsPersistence,qr=e.supportsHydration,Hr=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Gr=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Kr=e.setCurrentUpdatePriority,Wr=e.getCurrentUpdatePriority,Qr=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Yr=e.shouldAttemptEagerTransition,Xr=e.detachDeletedInstance;e.requestPostPaintCallback;var Zr=e.maySuspendCommit,Jr=e.maySuspendCommitOnUpdate,ei=e.maySuspendCommitInSyncRender,ti=e.preloadInstance,ni=e.startSuspendingCommit,si=e.suspendInstance;e.suspendOnActiveViewTransition;var ai=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var ri=e.NotPendingTransition,ii=e.HostTransitionContext,oi=e.resetFormInstance;e.bindToConsole;var li=e.supportsMicrotasks,ci=e.scheduleMicrotask,di=e.supportsTestSelectors,ui=e.findFiberRoot,hi=e.getBoundingRect,mi=e.getTextContent,pi=e.isHiddenSubtree,fi=e.matchAccessibilityRole,gi=e.setFocusIfFocusable,xi=e.setupIntersectionObserver,vi=e.appendChild,yi=e.appendChildToContainer,bi=e.commitTextUpdate,wi=e.commitMount,Si=e.commitUpdate,ji=e.insertBefore,Ci=e.insertInContainerBefore,ki=e.removeChild,Ni=e.removeChildFromContainer,_i=e.resetTextContent,Pi=e.hideInstance,Ei=e.hideTextInstance,Ri=e.unhideInstance,Ai=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Ti=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Mi=e.cloneInstance,Di=e.createContainerChildSet,Li=e.appendChildToContainerChildSet,Fi=e.finalizeContainerChildren,Ii=e.replaceContainerChildren,Oi=e.cloneHiddenInstance,zi=e.cloneHiddenTextInstance,Bi=e.isSuspenseInstancePending,$i=e.isSuspenseInstanceFallback,Ui=e.getSuspenseInstanceFallbackErrorDetails,Vi=e.registerSuspenseInstanceRetry,qi=e.canHydrateFormStateMarker,Hi=e.isFormStateMarkerMatching,Gi=e.getNextHydratableSibling,Ki=e.getNextHydratableSiblingAfterSingleton,Wi=e.getFirstHydratableChild,Qi=e.getFirstHydratableChildWithinContainer,Yi=e.getFirstHydratableChildWithinActivityInstance,Xi=e.getFirstHydratableChildWithinSuspenseInstance,Zi=e.getFirstHydratableChildWithinSingleton,Ji=e.canHydrateInstance,eo=e.canHydrateTextInstance,to=e.canHydrateActivityInstance,no=e.canHydrateSuspenseInstance,so=e.hydrateInstance,ao=e.hydrateTextInstance,ro=e.hydrateActivityInstance,io=e.hydrateSuspenseInstance,oo=e.getNextHydratableInstanceAfterActivityInstance,lo=e.getNextHydratableInstanceAfterSuspenseInstance,co=e.commitHydratedInstance,uo=e.commitHydratedContainer,ho=e.commitHydratedActivityInstance,mo=e.commitHydratedSuspenseInstance,po=e.finalizeHydratedChildren,fo=e.flushHydrationEvents;e.clearActivityBoundary;var go=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var xo=e.clearSuspenseBoundaryFromContainer,vo=e.hideDehydratedBoundary,yo=e.unhideDehydratedBoundary,bo=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var wo,So,jo=e.validateHydratableInstance,Co=e.validateHydratableTextInstance,ko=e.supportsResources,No=e.isHostHoistableType,_o=e.getHoistableRoot,Po=e.getResource,Eo=e.acquireResource,Ro=e.releaseResource,Ao=e.hydrateHoistable,To=e.mountHoistable,Mo=e.unmountHoistable,Do=e.createHoistableInstance,Lo=e.prepareToCommitHoistables,Fo=e.mayResourceSuspendCommit,Io=e.preloadResource,Oo=e.suspendResource,zo=e.supportsSingletons,Bo=e.resolveSingletonInstance,$o=e.acquireSingletonInstance,Uo=e.releaseSingletonInstance,Vo=e.isHostSingletonType,qo=e.isSingletonScope,Ho=[],Go=-1,Ko={},Wo=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(Qo(e)/Yo|0)|0},Qo=Math.log,Yo=Math.LN2,Xo=256,Zo=262144,Jo=4194304,el=ar.unstable_scheduleCallback,tl=ar.unstable_cancelCallback,nl=ar.unstable_shouldYield,sl=ar.unstable_requestPaint,al=ar.unstable_now,rl=ar.unstable_ImmediatePriority,il=ar.unstable_UserBlockingPriority,ol=ar.unstable_NormalPriority,ll=ar.unstable_IdlePriority,cl=ar.log,dl=ar.unstable_setDisableYieldValue,ul=null,hl=null,ml="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},pl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},fl=Object.prototype.hasOwnProperty,gl=!1,xl=new WeakMap,vl=[],yl=0,bl=null,wl=0,Sl=[],jl=0,Cl=null,kl=1,Nl="",_l=u(null),Pl=u(null),El=u(null),Rl=u(null),Al=null,Tl=null,Ml=!1,Dl=null,Ll=!1,Fl=Error(s(519)),Il=u(null),Ol=null,zl=null,Bl="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},$l=ar.unstable_scheduleCallback,Ul=ar.unstable_NormalPriority,Vl={$$typeof:mr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},ql=null,Hl=null,Gl=!1,Kl=!1,Wl=!1,Ql=0,Yl=null,Xl=0,Zl=0,Jl=null,ec=Cr.S;Cr.S=function(e,t){jd=al(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Yl){var n=Yl=[];Xl=0,Zl=fe(),Jl={status:"pending",value:void 0,then:function(e){n.push(e)}}}Xl++,t.then(ge,ge)}(0,t),null!==ec&&ec(e,t)};var tc=u(null),nc=Error(s(460)),sc=Error(s(474)),ac=Error(s(542)),rc={then:function(){}},ic=null,oc=null,lc=0,cc=Ee(!0),dc=Ee(!1),uc=[],hc=0,mc=0,pc=!1,fc=!1,gc=u(null),xc=u(0),vc=u(null),yc=null,bc=u(0),wc=0,Sc=null,jc=null,Cc=null,kc=!1,Nc=!1,_c=!1,Pc=0,Ec=0,Rc=null,Ac=0,Tc={readContext:ne,use:mt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};Tc.useEffectEvent=tt;var Mc={readContext:ne,use:mt,useCallback:function(e,t){return dt().memoizedState=[e,void 0===t?null:t],e},useContext:ne,useEffect:Vt,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,$t(4194308,4,Wt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $t(4194308,4,e,t)},useInsertionEffect:function(e,t){$t(4,2,e,t)},useMemo:function(e,t){var n=dt();t=void 0===t?null:t;var s=e();if(_c){_(!0);try{e()}finally{_(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=dt();if(void 0!==n){var a=n(t);if(_c){_(!0);try{n(t)}finally{_(!1)}}}else a=t;return s.memoizedState=s.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},s.queue=e,e=e.dispatch=ln.bind(null,Sc,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},dt().memoizedState=e},useState:function(e){var t=(e=kt(e)).queue,n=cn.bind(null,Sc,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yt,useDeferredValue:function(e,t){return Jt(dt(),e,t)},useTransition:function(){var e=kt(!1);return e=tn.bind(null,Sc,e.queue,!0,!1),dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Sc,r=dt();if(Ml){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===ad)throw Error(s(349));127&id||bt(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Vt(St.bind(null,a,i,e),[e]),a.flags|=2048,zt(9,{destroy:void 0},wt.bind(null,a,i,n,t),null),n},useId:function(){var e=dt(),t=ad.identifierPrefix;if(Ml){var n=Nl;t="_"+t+"R_"+(n=(kl&~(1<<32-Wo(kl)-1)).toString(32)+n),0<(n=Pc++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ac++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:sn,useFormState:Dt,useActionState:Dt,useOptimistic:function(e){var t=dt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=un.bind(null,Sc,!0,n),n.dispatch=t,[e,t]},useMemoCache:pt,useCacheRefresh:function(){return dt().memoizedState=on.bind(null,Sc)},useEffectEvent:function(e){var t=dt(),n={impl:e};return t.memoizedState=n,function(){if(2&sd)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},Dc={readContext:ne,use:mt,useCallback:Xt,useContext:ne,useEffect:qt,useImperativeHandle:Qt,useInsertionEffect:Gt,useLayoutEffect:Kt,useMemo:Zt,useReducer:gt,useRef:Bt,useState:function(){return gt(ft)},useDebugValue:Yt,useDeferredValue:function(e,t){return en(ut(),jc.memoizedState,e,t)},useTransition:function(){var e=gt(ft)[0],t=ut().memoizedState;return["boolean"==typeof e?e:ht(e),t]},useSyncExternalStore:yt,useId:an,useHostTransitionStatus:sn,useFormState:Lt,useActionState:Lt,useOptimistic:function(e,t){return Nt(ut(),0,e,t)},useMemoCache:pt,useCacheRefresh:rn};Dc.useEffectEvent=Ht;var Lc={readContext:ne,use:mt,useCallback:Xt,useContext:ne,useEffect:qt,useImperativeHandle:Qt,useInsertionEffect:Gt,useLayoutEffect:Kt,useMemo:Zt,useReducer:vt,useRef:Bt,useState:function(){return vt(ft)},useDebugValue:Yt,useDeferredValue:function(e,t){var n=ut();return null===jc?Jt(n,e,t):en(n,jc.memoizedState,e,t)},useTransition:function(){var e=vt(ft)[0],t=ut().memoizedState;return["boolean"==typeof e?e:ht(e),t]},useSyncExternalStore:yt,useId:an,useHostTransitionStatus:sn,useFormState:Ot,useActionState:Ot,useOptimistic:function(e,t){var n=ut();return null!==jc?Nt(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:pt,useCacheRefresh:rn};Lc.useEffectEvent=Ht;var Fc={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=sa(),a=Oe(s);a.payload=t,null!=n&&(a.callback=n),null!==(t=ze(e,a,s))&&(ra(t,0,s),Be(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=sa(),a=Oe(s);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=ze(e,a,s))&&(ra(t,0,s),Be(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sa(),s=Oe(n);s.tag=2,null!=t&&(s.callback=t),null!==(t=ze(e,s,n))&&(ra(t,0,n),Be(t,e,n))}},Ic=Error(s(461)),Oc=!1,zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Bc=!1,$c=!1,Uc=!1,Vc="function"==typeof WeakSet?WeakSet:Set,qc=null,Hc=null,Gc=!1,Kc=null,Wc=8192,Qc={getCacheForType:function(e){var t=ne(Vl),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ne(Vl).controller.signal}},Yc=0,Xc=1,Zc=2,Jc=3,ed=4;if("function"==typeof Symbol&&Symbol.for){var td=Symbol.for;Yc=td("selector.component"),Xc=td("selector.has_pseudo_class"),Zc=td("selector.role"),Jc=td("selector.test_id"),ed=td("selector.text")}var nd="function"==typeof WeakMap?WeakMap:Map,sd=0,ad=null,rd=null,id=0,od=0,ld=null,cd=!1,dd=!1,ud=!1,hd=0,md=0,pd=0,fd=0,gd=0,xd=0,vd=0,yd=null,bd=null,wd=!1,Sd=0,jd=0,Cd=1/0,kd=null,Nd=null,_d=0,Pd=null,Ed=null,Rd=0,Ad=0,Td=null,Md=null,Dd=0,Ld=null;return nr.attemptContinuousHydration=function(e){if(13===e.tag||31===e.tag){var t=Me(e,67108864);null!==t&&ra(t,0,67108864),tr(e,67108864)}},nr.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag||31===e.tag){var t=sa(),n=Me(e,t=k(t));null!==n&&ra(n,0,t),tr(e,t)}},nr.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=f(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-Wo(t);e.entanglements[1]|=n,t&=~n}le(e),!(6&sd)&&(Cd=al()+500,ce(0))}}break;case 31:case 13:null!==(t=Me(e,2))&&ra(t,0,2),da(),tr(e,2)}},nr.batchedUpdates=function(e,t){return e(t)},nr.createComponentSelector=function(e){return{$$typeof:Yc,value:e}},nr.createContainer=function(e,t,n,s,a,r,i,o,l,c){return Ya(e,t,!1,null,0,s,r,null,i,o,l,c)},nr.createHasPseudoClassSelector=function(e){return{$$typeof:Xc,value:e}},nr.createHydrationContainer=function(e,t,n,s,a,r,i,o,l,c,d,u,h,m){return(e=Ya(n,s,!0,e,0,r,o,m,l,c,d,u)).context=Xa(null),n=e.current,(a=Oe(s=k(s=sa()))).callback=null!=t?t:null,ze(n,a,s),t=s,e.current.lanes=t,w(e,t),le(e),e},nr.createPortal=function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:lr,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}},nr.createRoleSelector=function(e){return{$$typeof:Zc,value:e}},nr.createTestNameSelector=function(e){return{$$typeof:Jc,value:e}},nr.createTextSelector=function(e){return{$$typeof:ed,value:e}},nr.defaultOnCaughtError=function(e){},nr.defaultOnRecoverableError=function(e){pl(e)},nr.defaultOnUncaughtError=function(e){pl(e)},nr.deferredUpdates=function(e){var t=Cr.T,n=Wr();try{return Kr(32),Cr.T=null,e()}finally{Kr(n),Cr.T=t}},nr.discreteUpdates=function(e,t,n,s,a){var r=Cr.T,i=Wr();try{return Kr(2),Cr.T=null,e(t,n,s,a)}finally{Kr(i),Cr.T=r,0===sd&&(Cd=al()+500)}},nr.findAllNodes=na,nr.findBoundingRects=function(e,t){if(!di)throw Error(s(363));t=na(e,t),e=[];for(var n=0;n<t.length;n++)e.push(hi(t[n]));for(t=e.length-1;0<t;t--)for(var a=(n=e[t]).x,r=a+n.width,i=n.y,o=i+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],d=c.x,u=d+c.width,h=c.y,m=h+c.height;if(a>=d&&i>=h&&r<=u&&o<=m){e.splice(t,1);break}if(!(a!==d||n.width!==c.width||m<i||h>o)){h>i&&(c.height+=h-i,c.y=i),m<o&&(c.height=o-h),e.splice(t,1);break}if(!(i!==h||n.height!==c.height||u<a||d>r)){d>a&&(c.width+=d-a,c.x=a),u<r&&(c.width=r-d),e.splice(t,1);break}}return e},nr.findHostInstance=Za,nr.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=i(e))?l(e):null)?null:Pr(e.stateNode)},nr.findHostInstanceWithWarning=function(e){return Za(e)},nr.flushPassiveEffects=Aa,nr.flushSyncFromReconciler=function(e){var t=sd;sd|=1;var n=Cr.T,s=Wr();try{if(Kr(2),Cr.T=null,e)return e()}finally{Kr(s),Cr.T=n,!(6&(sd=t))&&ce(0)}},nr.flushSyncWork=da,nr.focusWithin=function(e,t){if(!di)throw Error(s(363));for(t=ta(e=Zs(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],a=n.tag;if(!pi(n)){if((5===a||26===a||27===a)&&gi(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},nr.getFindAllNodesFailureDescription=function(e,t){if(!di)throw Error(s(363));var n=0,a=[];e=[Zs(e),0];for(var r=0;r<e.length;){var i=e[r++],o=i.tag,l=e[r++],c=t[l];if((5!==o&&26!==o&&27!==o||!pi(i))&&(Js(i,c)&&(a.push(ea(c)),++l>n&&(n=l)),l<t.length))for(i=i.child;null!==i;)e.push(i,l),i=i.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(ea(t[n]));return"findAllNodes was able to match part of the selector:\n  "+a.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},nr.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return Pr(e.child.stateNode);default:return e.child.stateNode}},nr.injectIntoDevTools=function(){var e={bundleType:0,version:kr,rendererPackageName:Nr,currentDispatcherRef:Cr,reconcilerVersion:"19.2.0"};if(null!==_r&&(e.rendererConfig=_r),"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{ul=t.inject(e),hl=t}catch(wW){}e=!!t.checkDCE}}return e},nr.isAlreadyRendering=function(){return!!(6&sd)},nr.observeVisibleRects=function(e,t,n,a){if(!di)throw Error(s(363));e=na(e,t);var r=xi(e,n,a).disconnect;return{disconnect:function(){r()}}},nr.shouldError=function(){return null},nr.shouldSuspend=function(){return!1},nr.startHostTransition=function(e,t,a,r){if(5!==e.tag)throw Error(s(476));var i=nn(e).queue;tn(e,i,t,ri,null===a?n:function(){var t=nn(e);return null===t.next&&(t=e.alternate.memoizedState),dn(e,t.next.queue,{},sa()),a(r)})},nr.updateContainer=function(e,t,n,s){var a=t.current,r=sa();return Ja(a,r,e,t,n,s),r},nr.updateContainerSync=function(e,t,n,s){return Ja(t.current,2,e,t,n,s),2},nr},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})),r$.exports;var e}const d$=n((s$||(s$=1,a$.exports=c$()),a$.exports));var u$,h$,m$={exports:{}},p$={};var f$=(h$||(h$=1,m$.exports=(u$||(u$=1,p$.ConcurrentRoot=1,p$.ContinuousEventPriority=8,p$.DefaultEventPriority=32,p$.DiscreteEventPriority=2,p$.IdleEventPriority=268435456,p$.LegacyRoot=0,p$.NoEventPriority=0),p$)),m$.exports),g$=CO();const x$={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let v$=!1,y$=!1;const b$=".react-konva-event",w$={};function S$(e,t,n=w$){if(!v$&&"zIndex"in t&&(v$=!0),!y$&&t.draggable){var s=void 0!==t.x||void 0!==t.y,a=t.onDragEnd||t.onDragMove;s&&!a&&(y$=!0)}for(var r in n)if(!x$[r]){var i="on"===r.slice(0,2),o=n[r]!==t[r];if(i&&o)"content"===(m=r.substr(2).toLowerCase()).substr(0,7)&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),e.off(m,n[r]);!t.hasOwnProperty(r)&&e.setAttr(r,void 0)}var l=t._useStrictMode,c={},d=!1;const u={};for(var r in t)if(!x$[r]){i="on"===r.slice(0,2);var h=n[r]!==t[r];if(i&&h)"content"===(m=r.substr(2).toLowerCase()).substr(0,7)&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[r]&&(u[m]=t[r]);!i&&(t[r]!==n[r]||l&&t[r]!==e.getAttr(r))&&(d=!0,c[r]=t[r])}for(var m in d&&(e.setAttrs(c),j$(e)),u)e.off(m+b$),e.on(m+b$,u[m])}function j$(e){if(!g$.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var C$,k$,N$={exports:{}},_$={};var P$=(k$||(k$=1,N$.exports=(C$||(C$=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<a(r,t)))break e;e[s]=t,e[n]=r,n=s}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,i=r>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<r&&0>a(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>a(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,f=!1,g=!1,x="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var a=n(c);null!==a;){if(null===a.callback)s(c);else{if(!(a.startTime<=e))break;s(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function w(e){if(f=!1,b(e),!p)if(null!==n(l))p=!0,j||(j=!0,S());else{var t=n(c);null!==t&&A(w,t.startTime-e)}}var S,j=!1,C=-1,k=5,N=-1;function _(){return!(!g&&e.unstable_now()-N<k)}function P(){if(g=!1,j){var t=e.unstable_now();N=t;var a=!0;try{e:{p=!1,f&&(f=!1,v(C),C=-1),m=!0;var r=h;try{t:{for(b(t),u=n(l);null!==u&&!(u.expirationTime>t&&_());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){u.callback=o,b(t),a=!0;break t}u===n(l)&&s(l),b(t)}else s(l);u=n(l)}if(null!==u)a=!0;else{var d=n(c);null!==d&&A(w,d.startTime-t),a=!1}}break e}finally{u=null,h=r,m=!1}a=void 0}}finally{a?S():j=!1}}}if("function"==typeof y)S=function(){y(P)};else if("undefined"!=typeof MessageChannel){var E=new MessageChannel,R=E.port2;E.port1.onmessage=P,S=function(){R.postMessage(null)}}else S=function(){x(P,0)};function A(t,n){C=x(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(s,a,r){var i=e.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?i+r:i,s){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return s={id:d++,callback:a,priorityLevel:s,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(s.sortIndex=r,t(c,s),null===n(l)&&s===n(c)&&(f?(v(C),C=-1):f=!0,A(w,r-i))):(s.sortIndex=o,t(l,s),p||m||(p=!0,j||(j=!0,S()))),s},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(_$)),_$)),N$.exports);const E$={},R$={};JB.Node.prototype._applyProps=S$;let A$=f$.DefaultEventPriority;const T$=setTimeout,M$=clearTimeout;function D$(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),j$(e)}const L$=f.createContext(null);const F$=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:L$,NotPendingTransition:null,afterActiveInstanceBlur:function(){},appendChild:function(e,t){t.parent===e?t.moveToTop():e.add(t),j$(e)},appendChildToContainer:function(e,t){t.parent===e?t.moveToTop():e.add(t),j$(e)},appendInitialChild:function(e,t){"string"!=typeof t&&(e.add(t),j$(e))},beforeActiveInstanceBlur:function(){},cancelTimeout:M$,clearContainer:function(e){},commitMount:function(e,t,n){},commitTextUpdate:function(e,t,n){},commitUpdate:function(e,t,n,s){S$(e,s,n)},createInstance:function(e,t,n){let s=JB[e];s||(s=JB.Group);const a={},r={};for(var i in t){if("ref"!==i)"on"===i.slice(0,2)?r[i]=t[i]:a[i]=t[i]}const o=new s(a);return S$(o,r),o},createTextInstance:function(e,t,n){},detachDeletedInstance:function(){},finalizeInitialChildren:function(e,t,n){return!1},getChildHostContext:function(){return E$},getCurrentEventPriority:function(){return f$.DefaultEventPriority},getCurrentUpdatePriority:function(){return A$},getInstanceFromNode:function(){return null},getInstanceFromScope:function(){return null},getPublicInstance:function(e){return e},getRootHostContext:function(){return E$},hideInstance:function(e){e.hide(),j$(e)},hideTextInstance:function(e){},idlePriority:P$.unstable_IdlePriority,insertBefore:D$,insertInContainerBefore:function(e,t,n){D$(e,t,n)},isPrimaryRenderer:!1,maySuspendCommit:function(){return!1},noTimeout:-1,now:P$.unstable_now,preloadInstance:function(){return!0},prepareForCommit:function(){return null},preparePortalMount:function(){return null},prepareScopeUpdate:function(){},prepareUpdate:function(e,t,n,s){return R$},removeChild:function(e,t){t.destroy(),t.off(b$),j$(e)},removeChildFromContainer:function(e,t){t.destroy(),t.off(b$),j$(e)},requestPostPaintCallback:function(){},resetAfterCommit:function(){},resetFormInstance:function(){},resetTextContent:function(e){},resolveEventTimeStamp:function(){return-1.1},resolveEventType:function(){return null},resolveUpdatePriority:function(){return f$.DiscreteEventPriority},run:P$.unstable_runWithPriority,scheduleMicrotask:e=>{e()},scheduleTimeout:T$,setCurrentUpdatePriority:function(e){A$=e},shouldAttemptEagerTransition:function(){return!1},shouldDeprioritizeSubtree:function(e,t){return!1},shouldSetTextContent:function(e,t){return!1},startSuspendingCommit:function(){},supportsHydration:!1,supportsMicrotasks:!0,supportsMutation:!0,supportsPersistence:!1,suspendInstance:function(){},trackSchedulerEvent:function(){},unhideInstance:function(e,t){(null==t.visible||t.visible)&&e.show()},unhideTextInstance:function(e,t){},waitForCommitToBeReady:function(){return null},warnsIfNotActing:!1},Symbol.toStringTag,{value:"Module"}));function I$(e,t,n){if(!e)return;if(!0===n(e))return e;let s=e.child;for(;s;){const e=I$(s,t,n);if(e)return e;s=s.sibling}}function O$(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const z$=O$(p.createContext(null));class B$ extends p.Component{render(){return p.createElement(z$.Provider,{value:this._reactInternals},this.props.children)}}const $$=Symbol.for("react.context"),U$=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===$$;function V$(){const e=function(){const e=p.useContext(z$);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=p.useId();return p.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=I$(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}(),[t]=p.useState(()=>new Map);t.clear();let n=e;for(;n;){const e=n.type;U$(e)&&e!==z$&&!t.has(e)&&t.set(e,p.use(O$(e))),n=n.return}return t}if(-1===f.version.indexOf("19"))throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");const q$=e=>{const t=f.useRef(null),n=f.useRef(null),s=f.useRef(null),a=function(e){const t=f.useRef({});return f.useLayoutEffect(()=>{t.current=e}),f.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}(e),r=function(){const e=V$();return p.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>s=>p.createElement(t,null,p.createElement(n.Provider,{...s,value:e.get(n)})),e=>p.createElement(B$,{...e})),[e])}(),i=f.useRef(null),o=t=>{const{forwardedRef:n}=e;n&&("function"==typeof n?n(t):n.current=t)},l=(()=>{const e=f.useRef(0);return f.useMemo(()=>{e.current++},[]),e.current>1})(),c=()=>{o(null),eU.updateContainer(null,s.current,null),n.current?.destroy(),n.current=null};return f.useLayoutEffect(()=>(i.current&&(clearTimeout(i.current),i.current=null),n.current?o(n.current):(n.current=new JB.Stage({width:e.width,height:e.height,container:t.current}),o(n.current),s.current=eU.createContainer(n.current,f$.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),eU.updateContainer(f.createElement(r,{},e.children),s.current,null,()=>{})),()=>{l?i.current=setTimeout(c,0):c()}),[]),f.useLayoutEffect(()=>{o(n.current),S$(n.current,e,a),eU.updateContainer(f.createElement(r,{},e.children),s.current,null)}),f.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},H$="Layer",G$="Group",K$="Rect",W$="Circle",Q$="Ellipse",Y$="Line",X$="Image",Z$="Text",J$="Transformer",eU=d$(F$),tU=f.forwardRef((e,t)=>f.createElement(B$,{},f.createElement(q$,{...e,forwardedRef:t}))),nU="#9ca3af",sU="#6b7280",aU="#3b82f6",rU="#2563eb",iU="#f59e0b",oU="#d97706",lU="#a855f7",cU="#9333ea",dU="#ef4444",uU="#dc2626",hU="#10b981",mU="#059669",pU="#60a5fa",fU="#2563eb",gU="#d1d5db",xU="#60a5fa",vU="#fbbf24",yU="#c084fc",bU="#f87171",wU="#34d399",SU="#10b981";var jU=(e=>(e.CIRCLE="circle",e.RECTANGLE="rectangle",e.ELLIPSE="ellipse",e.POLYGON="polygon",e.FREEFORM="freeform",e))(jU||{});function CU(e){switch(String(e).toUpperCase().trim()){case"AVAILABLE":return{fill:hU,stroke:mU};case"RESERVED":return{fill:iU,stroke:oU};case"SOLD":return{fill:aU,stroke:rU};case"HELD":return{fill:lU,stroke:cU};case"BLOCKED":return{fill:dU,stroke:uU};default:return{fill:nU,stroke:sU}}}function kU(e){if(e)try{const t=JSON.parse(e);if(t&&"object"==typeof t&&t.type){const e={...t,type:t.type};return Object.values(jU).includes(e.type)?e:void 0}}catch(t){}}function NU(e,t,n,s,a=2.5,r=1,i){const o=i?.isHover&&i?.hoverColors?i.hoverColors:t,l={fill:o.fill||"transparent",stroke:o.stroke||"transparent",strokeWidth:a,opacity:r};if(!e)return c.jsx(W$,{...l,radius:12});switch(e.type){case jU.CIRCLE:{const t=e.radius?e.radius/100*Math.min(n,s):12,a=Math.max(1,Math.abs(t));return c.jsx(W$,{...l,radius:a,rotation:e.rotation||0})}case jU.RECTANGLE:{const t=e.width?e.width/100*n:24,a=e.height?e.height/100*s:24,r=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(a)),o=e.cornerRadius||0,d=Math.min(r,i)/2,u=Math.max(0,Math.min(Math.abs(o),d));return c.jsx(K$,{...l,x:-r/2,y:-i/2,width:r,height:i,cornerRadius:u,rotation:e.rotation||0})}case jU.ELLIPSE:{const t=e.width?e.width/100*n/2:12,a=e.height?e.height/100*s/2:12,r=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(a));return c.jsx(Q$,{...l,radiusX:r,radiusY:i,rotation:e.rotation||0})}case jU.POLYGON:{if(!e.points||e.points.length<6)return c.jsx(W$,{...l,radius:12});const t=e.points.map((e,t)=>t%2==0?e/100*n:e/100*s);return c.jsx(Y$,{...l,points:t,closed:!0})}case jU.FREEFORM:{if(!e.points||e.points.length<4)return c.jsx(W$,{...l,radius:12});const t=e.points.map((e,t)=>t%2==0?e/100*n:e/100*s);return c.jsx(Y$,{...l,points:t,closed:!0,tension:0})}default:return c.jsx(W$,{...l,radius:12})}}function _U({seat:e,eventSeat:t,x:n,y:s,isHovered:a,isSpacePressed:r,isSelected:i=!1,onMouseEnter:o,onMouseMove:l,onMouseLeave:d,onClick:u,imageWidth:h,imageHeight:m}){const f=p.useRef(null),[g,x]=p.useState(!1),[v,y]=p.useState(!1);let b;if(t?.ticket_status){const e=function(e){if(!e)return null;switch(String(e).toUpperCase().trim()){case"AVAILABLE":return{fill:hU,stroke:mU};case"RESERVED":return{fill:iU,stroke:oU};case"CONFIRMED":return{fill:aU,stroke:rU};case"CANCELLED":return{fill:dU,stroke:uU};case"USED":return{fill:"#6b7280",stroke:"#4b5563"};case"TRANSFERRED":return{fill:lU,stroke:cU};default:return null}}(t.ticket_status);b=e||CU(t.status)}else b=t?CU(t.status):{fill:nU,stroke:sU};const w=kU(e.shape),S=w?.fillColor?.trim(),j=w?.strokeColor?.trim(),C=(e,t)=>!e||e.toLowerCase().replace(/^#/,"")===t.toLowerCase().replace(/^#/,""),k={fill:C(S,pU)?void 0:S,stroke:C(j,fU)?void 0:j},N={fill:C(S,pU)?b.fill===nU?gU:b.fill===aU?xU:b.fill===iU?vU:b.fill===lU?yU:b.fill===dU?bU:wU:S,stroke:C(j,fU)?b.stroke===sU?nU:b.stroke===rU?aU:b.stroke===oU?iU:b.stroke===cU?lU:b.stroke===uU?dU:SU:j},_=a||g,P=i?"#06b6d4":(_?N.fill:k.fill)??b.fill,E=i?"#0891b2":(_?N.stroke:k.stroke)??b.stroke,R="available"===t?.status,A=i?.95:_?R?.8:.5:.3,T=i?4:_?3:2;p.useEffect(()=>{const e=f.current;if(!e)return;e.to({opacity:A,duration:.2,easing:YB.Easings.EaseInOut});e.getChildren().forEach(e=>{e instanceof YB.Shape&&e.to({strokeWidth:T,duration:.2,easing:YB.Easings.EaseInOut})})},[A,T]),p.useEffect(()=>{if(!v)return;const e=f.current;e&&(e.scaleX(.9),e.scaleY(.9),e.to({scaleX:1,scaleY:1,duration:.15,easing:YB.Easings.EaseOut,onFinish:()=>{y(!1)}}))},[v]);const M=t?function(e){switch(String(e).toUpperCase().trim()){case"AVAILABLE":return.4;case"SOLD":return.7;case"HELD":return.6;case"BLOCKED":return.8;case"RESERVED":return.5;default:return.3}}(t.status):0;return c.jsxs(G$,{x:n,y:s,onMouseEnter:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=R?"pointer":"not-allowed"),x(!0),o(e)},onMouseMove:e=>{l&&l(e)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=r?"grabbing":"default"),x(!1),d()},onClick:e=>{e.cancelBubble=!0,y(!0),u()},onTap:e=>{e.cancelBubble=!0,y(!0),u()},onMouseDown:e=>{e.cancelBubble=!0},children:[(A>0||i)&&t&&c.jsx(G$,{opacity:M*A,children:NU(w,{fill:P,stroke:E},h,m,0,1)}),c.jsx(G$,{ref:f,opacity:A,children:NU(w,{fill:k.fill,stroke:k.stroke},h,m,T,1,{hoverColors:N,isHover:_})})]})}function PU({section:e,x:t,y:n,isHovered:s,isSpacePressed:a,eventSeatCount:r,statusCounts:i,imageWidth:o,imageHeight:l,onMouseEnter:d,onMouseMove:u,onMouseLeave:h,onClick:m}){const f=p.useRef(null),g=p.useRef(null),x=p.useRef(null),[v,y]=p.useState(!1),[b,w]=p.useState(!1);let S={fill:nU,stroke:sU};r>0&&(i.sold>0?S={fill:aU,stroke:rU}:i.reserved>0?S={fill:iU,stroke:oU}:i.held>0?S={fill:lU,stroke:cU}:i.blocked>0?S={fill:dU,stroke:uU}:i.available>0&&(S={fill:hU,stroke:mU}));const j=kU(e.shape),C=!!j,k=j?.fillColor?.trim(),N=j?.strokeColor?.trim(),_=(e,t)=>!e||e.toLowerCase().replace(/^#/,"")===t.toLowerCase().replace(/^#/,""),P={fill:_(k,pU)?void 0:k,stroke:_(N,fU)?void 0:N},E={fill:_(k,pU)?S.fill===nU?gU:S.fill===aU?xU:S.fill===iU?vU:S.fill===lU?yU:S.fill===dU?bU:wU:k,stroke:_(N,fU)?S.stroke===sU?nU:S.stroke===rU?aU:S.stroke===oU?iU:S.stroke===cU?lU:S.stroke===uU?dU:SU:N},R=s||v,A=R?.75:.5,T=R?2.5:1.5;return p.useEffect(()=>{const e=g.current;if(!e||!C)return;e.to({opacity:A,duration:.2,easing:YB.Easings.EaseInOut});e.getChildren().forEach(e=>{e instanceof YB.Shape&&e.to({strokeWidth:T,duration:.2,easing:YB.Easings.EaseInOut})})},[A,T,C]),p.useEffect(()=>{const e=x.current;e&&!C&&e.to({fontSize:R?15:14,shadowBlur:R?4:2,backgroundStrokeWidth:T,duration:.2,easing:YB.Easings.EaseInOut})},[R,T,C]),p.useEffect(()=>{if(!b)return;const e=f.current;e&&(e.scaleX(.9),e.scaleY(.9),e.to({scaleX:1,scaleY:1,duration:.15,easing:YB.Easings.EaseOut,onFinish:()=>{w(!1)}}))},[b]),c.jsx(G$,{ref:f,x:t,y:n,rotation:j?.rotation||0,onMouseEnter:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor="pointer"),y(!0),d(e)},onMouseMove:e=>{u&&u(e)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=a?"grabbing":"default"),y(!1),h()},onClick:e=>{e.cancelBubble=!0,w(!0),m()},onTap:e=>{e.cancelBubble=!0,w(!0),m()},onMouseDown:e=>{e.cancelBubble=!0},children:C?c.jsxs(c.Fragment,{children:[c.jsx(G$,{ref:g,opacity:A,children:NU(j,{fill:P.fill,stroke:P.stroke},o,l,T,1,{hoverColors:E,isHover:R})}),c.jsx(Z$,{ref:x,text:e.name,fontSize:10,fontFamily:"Arial",fill:"#1e293b",padding:2,align:"center",verticalAlign:"middle",listening:!1,x:-24,y:8,width:48,backgroundFill:"rgba(255, 255, 255, 0.9)",backgroundStroke:"#e2e8f0",backgroundStrokeWidth:1,cornerRadius:2})]}):c.jsx(Z$,{ref:x,text:e.name,fontSize:14,fontFamily:"Arial",padding:8,align:"center",verticalAlign:"middle",backgroundFill:(R?E.fill:P.fill)??S.fill,backgroundStroke:(R?E.stroke:P.stroke)??S.stroke,backgroundStrokeWidth:T,cornerRadius:4,x:-30,y:-10,shadowBlur:2,shadowColor:"rgba(0,0,0,0.2)",opacity:A})})}function EU({containerRef:e,stageRef:t,validWidth:n,validHeight:s,centerX:a,centerY:r,imageX:i,imageY:o,displayedWidth:l,displayedHeight:d,image:u,zoomLevel:h,panOffset:m,isSpacePressed:p,isPanning:f,hoveredSeatId:g,layout:x,selectedSectionId:v,sections:y,sectionStats:b,displayedSeats:w,seatStatusMap:S,locationStatusMap:j,sectionNameMap:C,selectedSeatIds:k,hoveredSectionId:N,percentageToStage:_,onWheel:P,onMouseDown:E,onMouseMove:R,onMouseUp:A,onMouseLeave:T,setHoveredSectionId:M,setHoveredSectionData:D,setHoveredSeatPosition:L,setHoveredSeatId:F,setHoveredSeatData:I,updatePopoverPosition:O,setSelectedSectionId:z,setZoomLevel:B,setPanOffset:$,onSeatClick:U}){const V="section-level"===x.design_mode&&!v;return c.jsx("div",{ref:e,className:"relative w-full",style:{minHeight:"600px",height:"70vh"},children:c.jsx(tU,{ref:t,width:n,height:s,onWheel:e=>P(e,p),onMouseDown:E,onMouseMove:R,onMouseUp:A,onMouseLeave:T,style:{display:"block",cursor:g?"pointer":f||p?"grabbing":"default"},children:c.jsxs(H$,{x:a+m.x,y:r+m.y,scaleX:h,scaleY:h,offsetX:a,offsetY:r,children:[u?c.jsx(X$,{name:"background-image",image:u,x:i,y:o,width:l,height:d,listening:!0}):c.jsx(K$,{name:"background-image",x:i,y:o,width:l,height:d,fill:"#f3f4f6",listening:!0}),V?y.map(e=>{const t=b.get(e.id);if(!t)return null;if(!e.x_coordinate||!e.y_coordinate)return null;const{x:n,y:s}=_(e.x_coordinate,e.y_coordinate);return c.jsx(PU,{section:e,x:n,y:s,isHovered:N===e.id,isSpacePressed:p,totalSeats:t.totalSeats,eventSeatCount:t.eventSeatCount,statusCounts:t.statusCounts,imageWidth:l,imageHeight:d,onMouseEnter:n=>{M(e.id),D({section:e,seatCount:t.totalSeats,eventSeatCount:t.eventSeats.length,statusSummary:t.statusCounts}),O(n)},onMouseMove:O,onMouseLeave:()=>{M(null),L(null),D(null)},onClick:()=>{0!==t.totalSeats?(z(e.id),B(1),$({x:0,y:0})):Ek({title:"No Seats Available",description:`Section "${e.name}" does not have any seats. Please add seats to this section first.`,variant:"destructive"})}},e.id)}):w.map(e=>{if(!e.x_coordinate||!e.y_coordinate)return null;const{x:t,y:n}=_(e.x_coordinate,e.y_coordinate),s=function(e){if(e.id&&S.has(e.id))return S.get(e.id);if(e.row&&e.seat_number){const t=e.section_name||C.get(e.section_id);if(t){const n=`${t}|${e.row}|${e.seat_number}`;return j.get(n)}}}(e),a=Boolean(e.id&&k.has(e.id));return c.jsx(_U,{seat:e,eventSeat:s,x:t,y:n,isHovered:g===e.id,isSpacePressed:p,isSelected:a,imageWidth:l,imageHeight:d,onMouseEnter:t=>{F(e.id),I({seat:e,eventSeat:s}),O(t)},onMouseMove:O,onMouseLeave:()=>{F(null),L(null),I(null)},onClick:()=>{"available"===s?.status&&U&&U(e.id,s)}},e.id)})]})})})}function RU({className:e}){return c.jsxs("div",{className:al("bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-md",e),children:[c.jsx("div",{className:"text-xs font-medium mb-2",children:"Seat Status"}),c.jsx("div",{className:"space-y-1",children:Object.entries(nI).map(([e,t])=>{const n=CU(t);return c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.fill,border:`1px solid ${n.stroke}`}}),c.jsx("span",{children:e})]},e)})})]})}function AU({section:e,onBack:t,className:n}){return c.jsx("div",{className:al("z-10 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-md",n),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:t,className:"flex items-center justify-center w-6 h-6 rounded hover:bg-gray-100 transition-colors",title:"Back to Sections",children:c.jsx(Cp,{className:"h-4 w-4 text-gray-700"})}),c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Section: ",e.name]})]})})}function TU({section:e,seatCount:t,eventSeatCount:n,statusSummary:s,x:a,y:r}){return c.jsx("div",{className:"fixed z-[9999] rounded-lg border border-gray-300 bg-white p-4 shadow-2xl",style:{left:`${a}px`,top:`${r}px`,pointerEvents:"none",width:"320px",backgroundColor:"#ffffff",opacity:1,backdropFilter:"none"},children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Section Information"}),c.jsxs("div",{className:"space-y-1.5 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Section Name:"}),c.jsx("span",{className:"font-medium text-gray-900",children:e.name})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Total Seats:"}),c.jsx("span",{className:"font-medium text-gray-900",children:t})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Event Seats:"}),c.jsxs("span",{className:"font-medium text-gray-900",children:[n," / ",t]})]})]})]}),Object.keys(s).length>0&&c.jsxs("div",{className:"border-t pt-3",children:[c.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Status Summary"}),c.jsx("div",{className:"space-y-1.5 text-sm",children:Object.entries(s).map(([e,t])=>{const n=CU(e);return c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.fill,border:`1px solid ${n.stroke}`}}),c.jsxs("span",{className:"text-gray-600",children:[e,":"]})]}),c.jsx("span",{className:"font-medium text-gray-900",children:t})]},e)})})]})]})})}function MU({seat:e,eventSeat:t,sectionName:n,x:s,y:a}){return c.jsx("div",{className:"fixed z-[9999] rounded-lg border border-gray-300 bg-white p-4 shadow-2xl",style:{left:`${s}px`,top:`${a}px`,pointerEvents:"none",width:"320px",backgroundColor:"#ffffff",opacity:1,backdropFilter:"none"},children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Seat Information"}),c.jsxs("div",{className:"space-y-1.5 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Section:"}),c.jsx("span",{className:"font-medium text-gray-900",children:n})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Row:"}),c.jsx("span",{className:"font-medium text-gray-900",children:e.row||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Seat Number:"}),c.jsx("span",{className:"font-medium text-gray-900",children:e.seat_number||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Seat Type:"}),c.jsx("span",{className:"font-medium text-gray-900",children:e.seat_type||"STANDARD"})]})]})]}),t?c.jsxs("div",{className:"border-t pt-3",children:[c.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Event Seat Status"}),c.jsxs("div",{className:"space-y-1.5 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Status:"}),c.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:CU(t.status).fill+"20",color:CU(t.status).stroke,border:`1px solid ${CU(t.status).stroke}`},children:t.status})]}),(t.status===nI.HELD||t.status===nI.BLOCKED)&&t.attributes&&c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{className:"text-gray-600",children:[t.status===nI.HELD?"Hold":"Block"," ","Reason:"]}),c.jsx("span",{className:"font-medium text-gray-900 max-w-32 truncate",title:t.status===nI.HELD?t.attributes.hold_reason||"No reason provided":t.attributes.block_reason||"No reason provided",children:t.status===nI.HELD?t.attributes.hold_reason||"No reason provided":t.attributes.block_reason||"No reason provided"})]}),t.ticket_number&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Ticket Number:"}),c.jsx("span",{className:"font-medium text-gray-900",children:t.ticket_number})]}),void 0!==t.ticket_price&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Ticket Price:"}),c.jsxs("span",{className:"font-medium text-gray-900",children:["$",t.ticket_price.toFixed(2)]})]}),t.broker_id&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Broker ID:"}),c.jsx("span",{className:"font-medium text-gray-900",children:t.broker_id})]})]})]}):c.jsx("div",{className:"border-t pt-3",children:c.jsx("p",{className:"text-sm text-gray-500 italic",children:"No event seat assigned"})})]})})}function DU({layout:e,layoutSeats:t,sections:n,seatStatusMap:s,locationStatusMap:a,imageUrl:r,isLoading:i=!1,className:o,onSeatClick:l,selectedSeatIds:d=new Set,selectedSectionId:u,onSelectedSectionIdChange:h}){const m=p.useRef(null),f=p.useRef(null),[g,x]=p.useState({width:800,height:600}),[v,y]=p.useState(1),[b,w]=p.useState({x:0,y:0}),[S,j]=p.useState(!1),[C,k]=p.useState(null),[N,_]=p.useState(!1),[P,E]=p.useState(null),[R,A]=p.useState(null),[T,M]=p.useState(null),[D,L]=p.useState(null),[F,I]=p.useState(null),[O,z]=p.useState(null),B=void 0!==u?u:O,$=h||z,[U,V]=p.useState(null),[q,H]=p.useState(!1),G=p.useMemo(()=>{const e=new Map;return n.forEach(t=>{e.set(t.id,t.name)}),e},[n]),K=p.useMemo(()=>{if("section-level"!==e.design_mode)return new Map;const r=new Map;return n.forEach(e=>{const n=t.filter(t=>t.section_id===e.id),i=[];n.forEach(t=>{if(t.id&&s.has(t.id))i.push(s.get(t.id));else if(t.row&&t.seat_number){const n=`${e.name}|${t.row}|${t.seat_number}`,s=a.get(n);s&&i.push(s)}});const o={};Object.values(nI).forEach(e=>{o[e]=0}),i.forEach(e=>{const t=e.status;o[t]=(o[t]||0)+1}),r.set(e.id,{section:e,totalSeats:n.length,eventSeats:i,statusCounts:o,eventSeatCount:i.length})}),r},[e.design_mode,n,t,s,a,G]),W=p.useMemo(()=>B&&n.find(e=>e.id===B)||null,[B,n]),Q=p.useMemo(()=>W?.image_url?W.image_url:r,[W,r]),Y=p.useMemo(()=>"section-level"===e.design_mode&&B?t.filter(e=>e.section_id===B):t,[e.design_mode,B,t]);p.useEffect(()=>{if(!Q)return V(null),void H(!0);H(!1);const e=new window.Image;e.crossOrigin="anonymous",e.onload=()=>{V(e),H(!0)},e.onerror=()=>{V(null),H(!1)},e.src=Q},[Q]),p.useEffect(()=>{const e=()=>{if(m.current){const e=m.current.getBoundingClientRect();x({width:e.width,height:e.height})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),p.useEffect(()=>{const e=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("input, textarea, [contenteditable]");"Space"!==e.code||e.repeat||n||(e.preventDefault(),_(!0))},t=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("input, textarea, [contenteditable]");"Space"!==e.code||n||(e.preventDefault(),_(!1),S&&j(!1))};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[S]);const X=p.useCallback(()=>{y(e=>Math.min(1.2*e,5))},[]),Z=p.useCallback(()=>{y(e=>Math.max(e/1.2,.1))},[]),J=p.useCallback(()=>{y(1),w({x:0,y:0})},[]),ee=p.useCallback(()=>{h?h(null):z(null),y(1),w({x:0,y:0})},[h]),te=p.useCallback((e,t)=>{if(!t)return;e.evt.preventDefault();const n=f.current;if(!n)return;const s=n.getPointerPosition();if(!s)return;const a=(g.width>0?g.width:800)/2,r=(g.height>0?g.height:600)/2,i=v,o=e.evt.deltaY>0?i/1.1:1.1*i,l=Math.max(.1,Math.min(5,o)),c=(s.x-(a+b.x))/i+a,d=(s.y-(r+b.y))/i+r,u=s.x-a-(c-a)*l,h=s.y-r-(d-r)*l;y(l),w({x:u,y:h})},[v,b,g]),ne=p.useCallback(e=>{const t=e.target.getStage();if(!t)return;const n=t.getPointerPosition();return n&&N?(j(!0),void k(n)):void 0},[N]),se=p.useCallback(e=>{if(S&&N){const t=e.target.getStage();if(!t)return;const n=t.getPointerPosition();if(!n||!C)return;const s={x:n.x-C.x,y:n.y-C.y};k(n),w(e=>({x:e.x+s.x,y:e.y+s.y}))}},[S,N,C]),ae=p.useCallback(()=>{S&&(j(!1),k(null))},[S]),re=p.useCallback(()=>{S&&(j(!1),k(null))},[S]),ie=p.useCallback(e=>{const t=e.target.getParent(),n=e.evt,s=e.target.getStage();if(t&&s&&m.current)try{const e=m.current.getBoundingClientRect(),n=t.getClientRect(),s=e.left+n.x,a=e.top+n.y,r=320,i=200,o=15;let l=s+n.width+o,c=a+n.height/2-i/2;const d=window.innerWidth,u=window.innerHeight;l+r>d&&(l=s-r-o),l<0&&(l=Math.max(o,s+n.width+o),l+r>d&&(l=d-r-o)),c+i>u&&(c=u-i-o),c<0&&(c=o),A({x:l,y:c})}catch(a){const e=320;let t=n.clientX+20,s=n.clientY-100;t+e>window.innerWidth&&(t=n.clientX-e-20),s<0&&(s=10),A({x:t,y:s})}else{const e=320;let t=n.clientX+20,s=n.clientY-100;t+e>window.innerWidth&&(t=n.clientX-e-20),s<0&&(s=10),A({x:t,y:s})}},[]),oe=g.width>0?g.width:800,le=g.height>0?g.height:600,ce=!!U&&!!U.width&&!!U.height,de=p.useCallback((e,t)=>{const n=g.width>0?g.width:800,s=g.height>0?g.height:600;if(!ce)return{x:e/100*n,y:t/100*s};const a=U.height/U.width;let r,i;a>s/n?(i=s,r=i/a):(r=n,i=r*a);return{x:(n-r)/2+e/100*r,y:(s-i)/2+t/100*i}},[U,ce,g]);if(i||Q&&(!q||!ce))return c.jsx("div",{className:al("relative border rounded-lg overflow-hidden bg-gray-100",o),ref:m,children:c.jsx("div",{style:{width:oe,height:le,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:c.jsx("div",{className:"text-muted-foreground",children:"Loading seats..."})})});const ue=ce?U.height/U.width:le/oe;let he,me;ce&&ue>le/oe?(me=le,he=me/ue):(he=oe,me=ce?oe*ue:le);const pe=ce?(oe-he)/2:0,fe=ce?(le-me)/2:0,ge=oe/2,xe=le/2;return c.jsxs("div",{className:al("relative border rounded-lg overflow-hidden bg-gray-100",o),children:[c.jsx(EU,{containerRef:m,stageRef:f,validWidth:oe,validHeight:le,centerX:ge,centerY:xe,imageX:pe,imageY:fe,displayedWidth:he,displayedHeight:me,image:U,zoomLevel:v,panOffset:b,isSpacePressed:N,isPanning:S,hoveredSeatId:P,layout:e,selectedSectionId:B,sections:n,sectionStats:K,displayedSeats:Y,seatStatusMap:s,locationStatusMap:a,sectionNameMap:G,selectedSeatIds:d,hoveredSectionId:D,percentageToStage:de,onWheel:te,onMouseDown:ne,onMouseMove:se,onMouseUp:ae,onMouseLeave:re,setHoveredSectionId:L,setHoveredSectionData:I,setHoveredSeatPosition:A,setHoveredSeatId:E,setHoveredSeatData:M,updatePopoverPosition:ie,setSelectedSectionId:$,setZoomLevel:y,setPanOffset:w,onSeatClick:l}),"section-level"===e.design_mode&&B&&W&&c.jsx(AU,{section:W,onBack:ee,className:"absolute top-4 left-4"}),c.jsx(vO,{zoomLevel:v,panOffset:b,onZoomIn:X,onZoomOut:Z,onResetZoom:J}),!("section-level"===e.design_mode&&B)&&c.jsx(RU,{className:"absolute top-4 left-4"}),"section-level"===e.design_mode&&B&&c.jsx(RU,{className:"absolute bottom-4 left-4"}),"section-level"===e.design_mode&&!B&&D&&R&&F&&Zt.createPortal(c.jsx(TU,{section:F.section,seatCount:F.seatCount,eventSeatCount:F.eventSeatCount,statusSummary:F.statusSummary,x:R.x,y:R.y}),document.body),("section-level"!==e.design_mode||B)&&P&&R&&T&&Zt.createPortal(c.jsx(MU,{seat:T.seat,eventSeat:T.eventSeat,sectionName:T.seat.section_name||G.get(T.seat.section_id)||"N/A",x:R.x,y:R.y}),document.body)]})}function LU({isOpen:e,onOpenChange:t,availableSeatIds:n,action:s,onConfirm:a,isLoading:r=!1}){const[i,o]=p.useState(""),l="hold"===s?"Hold":"unhold"===s?"Unhold":"unblock"===s?"Unblock":"Block",d=c.jsxs("div",{className:"space-y-4",children:["unhold"!==s&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"reason",className:"text-sm font-medium",children:"Reason (Optional)"}),c.jsx(Tl,{id:"reason",placeholder:`Enter reason for ${s.toLowerCase()}ing seats...`,value:i,onChange:e=>o(e.target.value),className:"min-h-[80px] resize-none",disabled:r}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["This reason will be visible to administrators and can help track why seats were ",s.toLowerCase(),"ed."]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(vl,{type:"button",variant:"outline",onClick:()=>{o(""),t(!1)},disabled:r,children:"Cancel"}),c.jsx(vl,{type:"button",onClick:()=>{const e=i.trim();a(e||void 0),o("")},disabled:r,variant:"block"===s?"destructive":"default",size:"default",children:r?"Processing...":`${l} ${n.size} Seat${1!==n.size?"s":""}`})]})]});return c.jsx(jE,{open:e,onOpenChange:t,title:`${l} ${n.size} Seat${1!==n.size?"s":""}`,description:"hold"===s?`These ${n.size} available seat${1!==n.size?"s":""} will be temporarily held and cannot be sold. You can provide an optional reason for the hold.`:"unhold"===s?`These ${n.size} held seat${1!==n.size?"s":""} will be released and become available for sale again.`:"unblock"===s?`These ${n.size} blocked seat${1!==n.size?"s":""} will be unblocked and become available for sale again.`:`These ${n.size} available seat${1!==n.size?"s":""} will be blocked and permanently unavailable for sale. You can provide an optional reason for the block.`,footer:d,className:"sm:max-w-[500px]"})}function FU({eventSeats:e,isLoading:t=!1,onRefresh:n,onDelete:s,onDeleteSeat:a,onCreateTickets:r,onHoldSeats:i,onUnholdSeats:o,onUnblockSeats:l,onBlockSeats:d,className:u,onSeatSelect:h,selectedSeatIds:m,showSelection:f=!0,onAddToBooking:g,showAddToBooking:x=!1,bookedSeatIds:v=new Set}){const[y,b]=p.useState(""),[w,S]=p.useState("available"),[j,C]=p.useState(new Set),k=[{value:"available",label:"Available",icon:Up},{value:"reserved",label:"Reserved",icon:Ip},{value:"held",label:"Held",icon:ag},{value:"blocked",label:"Blocked",icon:Pp},{value:"sold",label:"Sold",icon:qg}],[N,_]=p.useState(""),[P,E]=p.useState(new Set),R=x?P:void 0!==m?m:P;p.useEffect(()=>{void 0===m?E(new Set):h&&e.forEach(e=>{R.has(e.id)&&h(e,!1)})},[w]);const[A,T]=p.useState(!1),[M,D]=p.useState(!1),[L,F]=p.useState(!1),[I,O]=p.useState(!1),[z,B]=p.useState("0"),[$,U]=p.useState([]),[V,q]=p.useState(!1),[H,G]=p.useState("hold"),[K,W]=p.useState(!1),Q=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{e.section_name&&t.add(e.section_name)}),Array.from(t).sort()},[e]),Y=p.useMemo(()=>{if(!N.trim())return Q;const e=N.toLowerCase();return Q.filter(t=>t.toLowerCase().includes(e))},[Q,N]),X=p.useMemo(()=>e.filter(e=>{if(e.status!==w)return!1;if(j.size>0&&e.section_name&&!j.has(e.section_name))return!1;if(!y.trim())return!0;const t=y.toLowerCase();return e.section_name?.toLowerCase().includes(t)||e.row_name?.toLowerCase().includes(t)||e.seat_number?.toLowerCase().includes(t)||e.ticket_number?.toLowerCase().includes(t)||!1}),[e,w,j,y]),Z=p.useMemo(()=>{const e=new Map;X.forEach(t=>{const n=t.section_name||"Unknown Section";e.has(n)||e.set(n,[]),e.get(n).push(t)});return Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0]))},[X]),J=e=>{if(e.ticket_status){switch(String(e.ticket_status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"CONFIRMED":return"border-l-4 border-l-blue-500";case"CANCELLED":return"border-l-4 border-l-red-500";case"USED":return"border-l-4 border-l-gray-500";case"TRANSFERRED":return"border-l-4 border-l-purple-500"}}switch(String(e.status).toUpperCase().trim()){case"AVAILABLE":return"border-l-4 border-l-green-500";case"RESERVED":return"border-l-4 border-l-yellow-500";case"SOLD":return"border-l-4 border-l-blue-500";case"HELD":return"border-l-4 border-l-purple-500";case"BLOCKED":return"border-l-4 border-l-red-500";default:return"border-l-4 border-l-gray-500"}},ee=e=>{if(e.ticket_status){return"AVAILABLE"===String(e.ticket_status).toUpperCase().trim()}return"AVAILABLE"===String(e.status).toUpperCase().trim()},te=e=>{const t=String(e.status).toUpperCase().trim();if("HELD"===t||"BLOCKED"===t)return!1;if(e.ticket_status){return"AVAILABLE"===String(e.ticket_status).toUpperCase().trim()}return"AVAILABLE"===t},ne=(e,t)=>{const n="held"===e||"blocked"===e?e:t||e,s=String(n).toUpperCase().trim();return c.jsx(mC,{variant:{AVAILABLE:"outline",RESERVED:"outline",SOLD:"default",CONFIRMED:"default",CANCELLED:"destructive",USED:"secondary",TRANSFERRED:"outline",HELD:"outline",BLOCKED:"destructive"}[s]||"outline",className:{AVAILABLE:"bg-green-50 text-green-700 border-green-200",RESERVED:"bg-yellow-50 text-yellow-700 border-yellow-200",SOLD:"bg-blue-50 text-blue-700 border-blue-200",CONFIRMED:"bg-blue-50 text-blue-700 border-blue-200",CANCELLED:"bg-red-50 text-red-700 border-red-200",USED:"bg-gray-50 text-gray-700 border-gray-200",TRANSFERRED:"bg-purple-50 text-purple-700 border-purple-200",HELD:"bg-purple-50 text-purple-700 border-purple-200",BLOCKED:"bg-red-50 text-red-700 border-red-200"}[s]||"bg-gray-50 text-gray-700 border-gray-200",children:n})},se=(e,t)=>{if(ee(e)&&!v.has(e.id))if(x){const n=new Set(P);t?n.add(e.id):n.delete(e.id),E(n)}else if(h)h(e,t);else if(void 0===m){const n=new Set(P);t?n.add(e.id):n.delete(e.id),E(n)}},ae=()=>{if(0===R.size)return;const t=Array.from(R).filter(t=>{const n=e.find(e=>e.id===t);return n&&"available"===n.status});0!==t.length&&(void 0===m?E(new Set(t)):h&&R.forEach(t=>{const n=e.find(e=>e.id===t);if(!n||"available"!==n.status){const n=e.find(e=>e.id===t);n&&h(n,!1)}}),T(!0))},re=()=>{if(0===R.size||!r)return;const t=Array.from(R).filter(t=>{const n=e.find(e=>e.id===t);return n&&!n.ticket_number});0!==t.length&&(U(t),O(!0))},ie=()=>{0!==R.size&&i&&(G("hold"),q(!0))},oe=()=>{0!==R.size&&o&&(G("unhold"),q(!0))},le=()=>{0!==R.size&&l&&(G("unblock"),q(!0))},ce=()=>{0!==R.size&&d&&(G("block"),q(!0))},de=p.useMemo(()=>X.filter(e=>{if(e.ticket_status){if("AVAILABLE"!==String(e.ticket_status).toUpperCase().trim())return!1}else{if("AVAILABLE"!==String(e.status).toUpperCase().trim())return!1}return!v.has(e.id)}),[X,v]),ue=de.length>0&&R.size===de.length;return t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading seats..."})}):0===e.length?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx("p",{className:"text-muted-foreground mb-4",children:"No seats found"}),n&&c.jsxs(vl,{onClick:n,variant:"outline",size:"sm",children:[c.jsx(fg,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}):c.jsxs("div",{className:al("space-y-4 min-w-0",u),children:[c.jsx(HM,{tabs:k,value:w,onValueChange:e=>S(e),className:"mb-4"}),c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-wrap",children:[c.jsxs("div",{className:"relative flex-1 min-w-0 max-w-xs",children:[c.jsx(Sg,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none z-10"}),c.jsx(kl,{placeholder:"Search seats...",value:y,onChange:e=>b(e.target.value),className:"pl-8 h-8 text-sm min-w-0"})]}),c.jsxs(lP,{children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",size:"sm",className:"h-7 px-2 flex-shrink-0 justify-start gap-1",children:[c.jsx(yf,{className:"h-3 w-3"}),c.jsx("span",{className:"text-[10px] whitespace-nowrap",children:0===j.size?"Sections":1===j.size?Array.from(j)[0].slice(0,8):`${j.size}`}),j.size>0&&c.jsx(mC,{variant:"secondary",className:"rounded-sm px-0.5 py-0 text-[9px] font-normal h-3 ml-0.5",children:j.size})]})}),c.jsx(dP,{className:"w-[250px] p-0",align:"start",children:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:"Search sections...",value:N,onValueChange:_}),c.jsxs(wN,{children:[c.jsx(SN,{children:"No sections found."}),c.jsx(jN,{children:Y.map(e=>{const t=j.has(e);return c.jsxs(kN,{onSelect:()=>(e=>{const t=new Set(j);t.has(e)?t.delete(e):t.add(e),C(t)})(e),children:[c.jsx("div",{className:al("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",t?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:c.jsx(Up,{className:"h-3 w-3"})}),c.jsx("span",{children:e})]},e)})}),j.size>0&&c.jsxs(c.Fragment,{children:[c.jsx(Hj,{}),c.jsx(jN,{children:c.jsx(kN,{onSelect:()=>{C(new Set)},className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]}),n&&c.jsx(vl,{onClick:n,variant:"outline",size:"sm",className:"flex-shrink-0 h-7 px-2",children:c.jsx(fg,{className:"h-3 w-3"})})]}),R.size>0&&(()=>{const t=Array.from(R),n=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&"available"===n.status}),u=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&!n.ticket_number}),h=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&"held"===n.status}),m=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&"blocked"===n.status}),p=t.filter(t=>{const n=e.find(e=>e.id===t);return n&&te(n)}),f=x&&g&&R.size>0,y=r&&u.length>0,b=i&&p.length>0,w=d&&p.length>0,S=o&&h.length>0,j=l&&m.length>0,C=(s||a)&&n.length>0;return f||y||b||w||S||j||C?c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 rounded-lg border border-primary/20 min-w-0",children:[c.jsxs("span",{className:"text-sm font-medium truncate flex-shrink-0 min-w-0",children:[R.size," seat",1!==R.size?"s":""," selected"]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 flex-wrap",children:[f&&c.jsx(vl,{variant:"default",size:"sm",onClick:()=>{if(g&&R.size>0){const e=Array.from(R).filter(e=>!v.has(e));e.length>0&&(g(e),E(new Set))}},className:"h-7 w-7 p-0",title:`Add ${R.size} seat${1!==R.size?"s":""} to booking`,disabled:0===R.size||Array.from(R).every(e=>v.has(e)),children:c.jsx(_g,{className:"h-4 w-4"})}),y&&c.jsx(vl,{variant:"outline",size:"sm",onClick:re,disabled:L,className:"h-7 w-7 p-0",title:`Create tickets for ${u.length} seat${1!==u.length?"s":""} without tickets`,children:c.jsx(qg,{className:al("h-4 w-4",L&&"animate-spin")})}),c.jsxs("div",{className:"flex items-center gap-1",children:[b&&c.jsx(vl,{variant:"outline",size:"sm",onClick:ie,disabled:K,className:"h-7 w-7 p-0 border-orange-300 text-orange-700 hover:bg-orange-100",title:`Hold ${p.length} seat${1!==p.length?"s":""}`,children:c.jsx(ag,{className:"h-4 w-4"})}),w&&c.jsx(vl,{variant:"outline",size:"sm",onClick:ce,disabled:K,className:"h-7 w-7 p-0 border-orange-300 text-orange-700 hover:bg-orange-100",title:`Block ${p.length} seat${1!==p.length?"s":""}`,children:c.jsx(Pp,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[S&&c.jsx(vl,{variant:"outline",size:"sm",onClick:oe,disabled:K,className:"h-7 w-7 p-0 border-green-300 text-green-700 hover:bg-green-100",title:`Unhold ${h.length} seat${1!==h.length?"s":""}`,children:c.jsx(ug,{className:"h-4 w-4"})}),j&&c.jsx(vl,{variant:"outline",size:"sm",onClick:le,disabled:K,className:"h-7 w-7 p-0 border-blue-300 text-blue-700 hover:bg-blue-100",title:`Unblock ${m.length} seat${1!==m.length?"s":""}`,children:c.jsx(ug,{className:"h-4 w-4"})})]}),C&&c.jsx(vl,{variant:"destructive",size:"sm",onClick:ae,className:"h-7 w-7 p-0",title:`Delete ${n.length} available seat${1!==n.length?"s":""}`,children:c.jsx(Hg,{className:"h-4 w-4"})})]})]})}):null})(),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",X.length," of ",e.length," seats"]}),X.length>0&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(RC,{id:"select-all",checked:ue,onCheckedChange:e=>{if(x)if(e){const e=X.filter(e=>ee(e)&&!v.has(e.id)).map(e=>e.id);E(new Set(e))}else E(new Set);else if(void 0!==m)X.forEach(t=>{ee(t)&&!v.has(t.id)&&h&&h(t,e)});else if(e){const e=X.filter(e=>ee(e)&&!v.has(e.id)).map(e=>e.id);E(new Set(e))}else E(new Set)},disabled:0===de.length}),c.jsx("label",{htmlFor:"select-all",className:al("text-sm text-muted-foreground",de.length>0&&"cursor-pointer"),children:"Select all"})]})]}),c.jsx("div",{className:"space-y-4 min-w-0",children:Z.map(([t,n])=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b pb-2 pt-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.length," seat",1!==n.length?"s":""]})]})}),c.jsx("div",{className:"space-y-2 pl-2",children:n.map(t=>{const n=t.row_name&&t.seat_number?`${t.row_name} ${t.seat_number}`:t.seat_id?`Seat ${t.seat_id.slice(0,8)}`:"N/A",s=void 0!==t.ticket_price&&null!==t.ticket_price?`Price: $${t.ticket_price.toFixed(2)}`:null,a=[t.broker_id&&`Broker: ${t.broker_id}`,t.ticket_number&&`Ticket: ${t.ticket_number}`,s].filter(Boolean).join("  "),r=R.has(t.id),u=v.has(t.id),p=ee(t),y=!p||u;return c.jsxs(bP,{onClick:()=>{y||se(t,!r)},className:al(r&&"bg-accent/50 border-primary",y&&"opacity-60 cursor-not-allowed",J(t),"min-w-0"),children:[f&&c.jsx(kP,{className:"flex-shrink-0",children:c.jsx(RC,{checked:r,onCheckedChange:e=>{y||se(t,e)},onClick:e=>e.stopPropagation(),disabled:y})}),c.jsx(SP,{className:"min-w-0",children:c.jsxs("div",{className:"flex items-start justify-between gap-4 min-w-0",children:[c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(jP,{className:"truncate",children:n}),ne(t.status,t.ticket_status)]}),a&&c.jsx(CP,{className:"truncate",children:a})]}),c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[x&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),g&&!y&&g([t.id])},className:"h-7 w-7 p-0","aria-label":"Add to booking",title:u?"Already in booking":p?"Add to booking":"Seat not available",disabled:y,children:c.jsx(hg,{className:"h-4 w-4"})}),!x&&i&&te(t)&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("hold"),q(!0),void 0===m?E(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&R.has(e.id)?h(e,!1):e.id!==t.id||R.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-orange-600 hover:text-orange-700 hover:bg-orange-50","aria-label":"Hold seat",title:"Temporarily hold this seat",disabled:K,children:c.jsx(ag,{className:"h-4 w-4"})}),!x&&o&&"held"===t.status&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("unhold"),q(!0),void 0===m?E(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&R.has(e.id)?h(e,!1):e.id!==t.id||R.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-green-600 hover:text-green-700 hover:bg-green-50","aria-label":"Unhold seat",title:"Release this held seat",disabled:K,children:c.jsx(ug,{className:"h-4 w-4"})}),!x&&l&&"blocked"===t.status&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("unblock"),q(!0),void 0===m?E(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&R.has(e.id)?h(e,!1):e.id!==t.id||R.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50","aria-label":"Unblock seat",title:"Unblock this blocked seat",disabled:K,children:c.jsx(ug,{className:"h-4 w-4"})}),!x&&d&&te(t)&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),G("block"),q(!0),void 0===m?E(new Set([t.id])):h&&e.forEach(e=>{e.id!==t.id&&R.has(e.id)?h(e,!1):e.id!==t.id||R.has(e.id)||h(t,!0)})},className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50","aria-label":"Block seat",title:"Permanently block this seat",disabled:K,children:c.jsx(Pp,{className:"h-4 w-4"})})]})]})})]},t.id)})})]},t))}),c.jsx(jE,{open:A,onOpenChange:T,title:"Delete Seats",description:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to delete ",R.size," available seat",1!==R.size?"s":"","? Only available seats can be deleted. This action cannot be undone."]}),R.size<=5&&c.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[c.jsx("p",{className:"font-medium mb-1",children:"Seats to be deleted:"}),c.jsx("ul",{className:"list-disc list-inside space-y-1",children:Array.from(R).map(t=>{const n=e.find(e=>e.id===t),s=n?n.section_name&&n.row_name&&n.seat_number?`${n.section_name} ${n.row_name} ${n.seat_number}`:n.seat_id?`Seat ${n.seat_id.slice(0,8)}`:t:t;return c.jsx("li",{children:s},t)})})]})]}),confirmText:"delete",confirmTextLabel:"Type 'delete' to confirm",confirmTextPlaceholder:"delete",confirmAction:{label:"Delete",type:"delete",variant:"destructive",onClick:async()=>{if(0!==R.size){D(!0);try{s?await s(Array.from(R)):a&&1===R.size&&await a(Array.from(R)[0]),void 0===m?E(new Set):h&&e.forEach(e=>{R.has(e.id)&&h(e,!1)}),T(!1)}catch(t){}finally{D(!1)}}},loading:M,disabled:M},cancelAction:{label:"Cancel",onClick:()=>T(!1),disabled:M}}),c.jsx(jE,{open:I,onOpenChange:e=>{O(e),e||(B("0"),U([]))},title:"Create Tickets",description:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Create tickets for ",$.length," selected seat",1!==$.length?"s":""," without tickets."]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"ticket-price-input",children:"Ticket Price (per ticket)"}),c.jsx(kl,{id:"ticket-price-input",type:"number",step:"0.01",min:"0",value:z,onChange:e=>B(e.target.value),placeholder:"0.00",disabled:L}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"This price will be applied to all tickets. You can change individual ticket prices later."})]})]}),confirmAction:{label:"Create Tickets",variant:"default",onClick:async()=>{if(0===$.length||!r)return;const t=parseFloat(z)||0;F(!0),O(!1);try{if(await r($,t),void 0===m){const e=new Set(P);$.forEach(t=>e.delete(t)),E(e)}else h&&$.forEach(t=>{const n=e.find(e=>e.id===t);n&&h(n,!1)});U([]),B("0")}catch(n){}finally{F(!1)}},loading:L,disabled:L},cancelAction:{label:"Cancel",onClick:()=>{O(!1),B("0"),U([])},disabled:L}}),c.jsx(LU,{isOpen:V,onOpenChange:q,availableSeatIds:R,action:H,onConfirm:async t=>{if(0!==R.size){W(!0),q(!1);try{const n=Array.from(R);"hold"===H&&i?await i(n,t):"unhold"===H&&o?await o(n):"unblock"===H&&l?await l(n):"block"===H&&d&&await d(n,t),void 0===m?E(new Set):h&&e.forEach(e=>{R.has(e.id)&&h(e,!1)})}catch(n){}finally{W(!1)}}},isLoading:K})]})}function IU({eventId:e,className:t}){const n=lI(),s=RI(),[a,r]=p.useState(!1),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(new Set),[g,x]=p.useState(!1),[v,y]=p.useState("hold"),[b,w]=p.useState(!1),{data:S,isLoading:j,error:C}=dI(n,e),{data:k,isLoading:N,error:_}=TI(s,S?.layout_id||null),{data:P,isLoading:E,refetch:R}=mI(n,e,{skip:0,limit:1e3}),{data:A}=uI(n,e),T=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,generateTickets:n,ticketPrice:s,pricingMode:a,sectionPricing:r,seatPricing:i,includedSectionIds:o,excludedSectionIds:l})=>e.initializeEventSeats(t,{generate_tickets:n,ticket_price:s,pricing_mode:a,section_pricing:r,seat_pricing:i,included_section_ids:o,excluded_section_ids:l}),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),M=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,seatIds:n})=>e.deleteEventSeats(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),D=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,seatIds:n,ticketPrice:s})=>e.createTicketsFromSeats(t,n,s),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),L=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,input:n})=>e.createEventSeat(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),F=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,seatIds:n,reason:s})=>e.holdEventSeats(t,n,s),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),I=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,seatIds:n})=>e.unholdEventSeats(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),O=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,seatIds:n})=>e.unblockEventSeats(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),z=function(e){const t=Vs();return Xs({mutationFn:({eventId:t,seatIds:n,reason:s})=>e.blockEventSeats(t,n,s),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["events",n.eventId,"seats"]})}})}(n),B=P?.data||[],$=P?.pagination.total||0,U=p.useMemo(()=>{const e=new Map;return B.forEach(t=>{t.seat_id&&e.set(t.seat_id,t)}),e},[B]),V=p.useMemo(()=>{const e=new Map;return B.forEach(t=>{if(t.section_name&&t.row_name&&t.seat_number){const n=`${t.section_name}|${t.row_name}|${t.seat_number}`;e.set(n,t)}}),e},[B]),q=p.useMemo(()=>{if(!S||!S.layout_id||!k||"seat_setup"!==S.configuration_type)return!1;const e=k.seats;if(0===e.length)return!1;const t=new Set,n=new Set,s=new Map;return k.sections.forEach(e=>{s.set(e.id,e.name)}),B.forEach(e=>{if(e.seat_id&&t.add(e.seat_id),e.section_name&&e.row_name&&e.seat_number){const t=`${e.section_name}|${e.row_name}|${e.seat_number}`;n.add(t)}}),e.some(e=>{if(e.id&&t.has(e.id))return!1;const a=s.get(e.section_id);if(a&&e.row&&e.seat_number){const t=`${a}|${e.row}|${e.seat_number}`;if(n.has(t))return!1}return!0})},[S,k,B]),H=(()=>{if(A)return{available:A.available_seats,reserved:A.reserved_seats,sold:A.sold_seats,held:A.held_seats,blocked:A.blocked_seats};const e={available:0,reserved:0,sold:0,held:0,blocked:0};return B.forEach(t=>{e[t.status]=(e[t.status]||0)+1}),e})();if(j)return c.jsx("div",{className:"container mx-auto py-6",children:c.jsx(bl,{className:"p-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading event..."})})})});if(C)return c.jsx("div",{className:"container mx-auto py-6",children:c.jsx(bl,{className:"p-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error loading event: ",C.message]})})})});if(!S)return c.jsx("div",{className:"container mx-auto py-6",children:c.jsx(bl,{className:"p-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Event not found"})})})});const G=!!S.layout_id,K=$>0,W="seat_setup"===S.configuration_type&&G&&!K,Q=(e=>{switch(e){case eI.DRAFT:return{canAddSeats:!0,canDeleteSeats:!0,canHoldSeats:!1,canBlockSeats:!1,canBookSeats:!1,canUnholdSeats:!1,canUnblockSeats:!1,isReadOnly:!1};case eI.PUBLISHED:return{canAddSeats:!1,canDeleteSeats:!1,canHoldSeats:!0,canBlockSeats:!0,canBookSeats:!1,canUnholdSeats:!0,canUnblockSeats:!0,isReadOnly:!1};case eI.ON_SALE:return{canAddSeats:!1,canDeleteSeats:!1,canHoldSeats:!0,canBlockSeats:!1,canBookSeats:!0,canUnholdSeats:!0,canUnblockSeats:!1,isReadOnly:!1};case eI.SOLD_OUT:case eI.CANCELLED:case eI.COMPLETED:default:return{canAddSeats:!1,canDeleteSeats:!1,canHoldSeats:!1,canBlockSeats:!1,canBookSeats:!1,canUnholdSeats:!1,canUnblockSeats:!1,isReadOnly:!0}}})(S.status);return c.jsxs("div",{className:al("container mx-auto py-6 space-y-6",t),children:[c.jsxs(bl,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsx("h1",{className:"text-xl font-semibold",children:S.title}),c.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ip,{className:"h-4 w-4"}),(e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()})(S.start_dt)]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(sf,{className:"h-4 w-4"}),(e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`})(S.duration_minutes)]}),S.layout_id&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vf,{className:"h-4 w-4"}),"Layout: ",k?.layout.name||"Loading..."]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[K&&c.jsxs("div",{className:"flex items-center flex-wrap gap-x-1 gap-y-1",children:[c.jsxs("span",{className:"inline-flex items-center rounded-full border font-medium text-xs py-0.5 px-1.5 text-white",style:{backgroundColor:"#10b981",borderColor:"#059669"},children:["Available ",H.available]}),c.jsxs("span",{className:"inline-flex items-center rounded-full border font-medium text-xs py-0.5 px-1.5 text-white",style:{backgroundColor:"#eab308",borderColor:"#ca8a04"},children:["Reserved ",H.reserved]}),c.jsxs("span",{className:"inline-flex items-center rounded-full border font-medium text-xs py-0.5 px-1.5 text-white",style:{backgroundColor:"#3b82f6",borderColor:"#2563eb"},children:["Sold ",H.sold]}),c.jsxs("span",{className:"inline-flex items-center rounded-full border font-medium text-xs py-0.5 px-1.5 text-white",style:{backgroundColor:"#a855f7",borderColor:"#9333ea"},children:["Held ",H.held]}),c.jsxs("span",{className:"inline-flex items-center rounded-full border font-medium text-xs py-0.5 px-1.5 text-white",style:{backgroundColor:"#ef4444",borderColor:"#dc2626"},children:["Blocked ",H.blocked]})]}),(W||q)&&Q.canAddSeats&&c.jsxs(vl,{onClick:async()=>{S?.id&&o(!0)},disabled:T.isPending,size:"sm",className:"gap-1.5 h-8 px-3",children:[c.jsx(fg,{className:al("h-3.5 w-3.5",T.isPending&&"animate-spin")}),W?"Initialize Seats":"Add Seats"]}),K&&c.jsxs(c.Fragment,{children:[c.jsx(vl,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"h-8 w-8 p-0",title:"Scan tickets (webcam)",children:c.jsx(bg,{className:"h-3.5 w-3.5"})}),c.jsx(vl,{onClick:()=>r(!0),disabled:m.size>0,variant:"outline",size:"sm",className:"h-8 w-8 p-0",title:`View Seat List (${$})`,children:c.jsx(Ff,{className:"h-3.5 w-3.5"})})]})]})]}),m.size>0&&!Q.isReadOnly&&c.jsx("div",{className:"w-full bg-blue-50 border-t border-blue-200 mt-2 px-4 py-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-sm font-medium text-blue-700",children:(()=>{const e=Array.from(m).filter(e=>{const t=U.get(e);return t?.status===nI.AVAILABLE}).length,t=m.size;return e===t?`${e} seat${1!==e?"s":""} selected`:`${e} of ${t} seat${1!==t?"s":""} available`})()}),c.jsx(vl,{onClick:()=>f(new Set),variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-100 ml-1",title:"Clear selection",children:c.jsx(ax,{className:"h-3 w-3"})})]})}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[Q.canHoldSeats&&c.jsxs(vl,{onClick:()=>{y("hold"),x(!0)},disabled:F.isPending||Array.from(m).every(e=>{const t=U.get(e);return t?.status!==nI.AVAILABLE}),size:"sm",className:"gap-1 h-7 px-2 bg-purple-600 hover:bg-purple-700 text-white font-medium text-xs shadow-sm hover:shadow-md transition-all duration-200 border border-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(ag,{className:"h-3 w-3"}),"Hold"]}),Q.canBlockSeats&&c.jsxs(vl,{onClick:()=>{y("block"),x(!0)},disabled:z.isPending||Array.from(m).every(e=>{const t=U.get(e);return t?.status!==nI.AVAILABLE}),size:"sm",className:"gap-1 h-7 px-2 bg-red-600 hover:bg-red-700 text-white font-medium text-xs shadow-sm hover:shadow-md transition-all duration-200 border border-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Pp,{className:"h-3 w-3"}),"Block"]})]})]})})]}),!G&&"seat_setup"===S.configuration_type&&c.jsx(bl,{className:"p-4 border-yellow-200 bg-yellow-50",children:c.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[c.jsx(Yp,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"This event requires a layout to manage seat inventory. Please assign a layout to the event first."})]})}),"ticket_import"===S.configuration_type&&!K&&c.jsx(bl,{className:"p-4 border-blue-200 bg-blue-50",children:c.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[c.jsx(Qg,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"This event uses ticket import. Import broker tickets to manage inventory."})]})}),G&&c.jsx(bl,{className:"p-6",children:N?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading layout..."})}):_?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error loading layout:"," ",_ instanceof Error?_.message:"Unknown error"]})}):k?c.jsx(DU,{layout:k.layout,layoutSeats:k.seats,sections:k.sections,eventSeats:B,seatStatusMap:U,locationStatusMap:V,imageUrl:k.layout.image_url,isLoading:E,selectedSectionId:u,onSelectedSectionIdChange:h,selectedSeatIds:m,onSeatClick:(e,t)=>{if(Q.isReadOnly)return;if(S?.status===eI.DRAFT){const t=m.has(e),n=new Set(m);return t?n.delete(e):n.add(e),void f(n)}if(t&&t.status!==nI.AVAILABLE)return;const n=m.has(e),s=new Set(m);n?s.delete(e):s.add(e),f(s)}}):c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Layout not found"})})}),c.jsx(uP,{open:a,onOpenChange:r,children:c.jsxs(fP,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0 overflow-hidden",style:{width:"600px",maxWidth:"740px"},children:[c.jsx(gP,{className:"px-6 pt-6 pb-4 ml-6 border-b flex-shrink-0",children:c.jsxs(vP,{children:["Seat List (",$,")"]})}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6 min-w-0",children:c.jsx(FU,{eventSeats:B,isLoading:E,onDelete:Q.canDeleteSeats?async e=>{if(!S?.id||0===e.length)return;const t=e.filter(e=>{const t=B.find(t=>t.id===e);return t&&t.status===nI.AVAILABLE});if(0===t.length)throw new Error("No available seats to delete");try{await M.mutateAsync({eventId:S.id,seatIds:t}),await R()}catch(wW){throw wW}}:void 0,onCreateTickets:Q.canBookSeats?async(e,t)=>{if(S?.id&&0!==e.length)try{await D.mutateAsync({eventId:S.id,seatIds:e,ticketPrice:t}),await R()}catch(wW){throw wW}}:void 0,onHoldSeats:Q.canHoldSeats?async(e,t)=>{if(S?.id&&0!==e.length)try{await F.mutateAsync({eventId:S.id,seatIds:e,reason:t}),await R()}catch(wW){throw wW}}:void 0,onUnholdSeats:Q.canUnholdSeats?async e=>{if(S?.id&&0!==e.length)try{await I.mutateAsync({eventId:S.id,seatIds:e}),await R()}catch(wW){throw wW}}:void 0,onUnblockSeats:Q.canUnblockSeats?async e=>{if(S?.id&&0!==e.length)try{await O.mutateAsync({eventId:S.id,seatIds:e}),await R()}catch(wW){throw wW}}:void 0,onBlockSeats:Q.canBlockSeats?async(e,t)=>{if(S?.id&&0!==e.length)try{await z.mutateAsync({eventId:S.id,seatIds:e,reason:t}),await R()}catch(wW){throw wW}}:void 0})})]})}),c.jsx(uP,{open:b,onOpenChange:w,children:c.jsxs(fP,{side:"right",className:"w-full sm:max-w-lg flex flex-col p-0 overflow-hidden",children:[c.jsx(gP,{className:"px-6 pt-6 pb-4 border-b flex-shrink-0",children:c.jsx(vP,{children:"Scan tickets"})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c.jsx(xO,{eventId:e,autoStart:!0,onScanSuccess:()=>R(),onClose:()=>w(!1)})})]})}),!G&&c.jsx(bl,{className:"p-6",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx(Vf,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Layout Assigned"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"This event does not have a layout assigned. Assign a layout to the event to manage seat inventory visually."})]})}),k&&c.jsx(dO,{open:i,onClose:()=>o(!1),onSubmit:async e=>{if(S?.id)try{await T.mutateAsync({eventId:S.id,generateTickets:e.generateTicketCodes,ticketPrice:e.defaultPrice,pricingMode:e.pricingMode,sectionPricing:e.sectionPricing,seatPricing:e.seatPricing,includedSectionIds:e.includedSectionIds,excludedSectionIds:e.excludedSectionIds}),await R(),o(!1)}catch(wW){throw wW}},layoutSeats:k.seats,sections:k.sections,existingEventSeats:B,loading:T.isPending,designMode:k.layout.design_mode,selectedSectionId:u}),c.jsx(uO,{open:l,onOpenChange:d,onSubmit:async e=>{if(S?.id)try{await L.mutateAsync({eventId:S.id,input:{seat_id:e.seat_id,section_name:e.section_name,row_name:e.row_name,seat_number:e.seat_number,broker_id:e.broker_id,create_ticket:e.create_ticket,ticket_price:e.ticket_price,ticket_number:e.ticket_number}}),await R(),d(!1)}catch(wW){throw wW}},loading:L.isPending}),c.jsx(LU,{isOpen:g,onOpenChange:x,availableSeatIds:new Set(Array.from(m).filter(e=>{const t=U.get(e);return"unhold"===v?t?.status===nI.HELD:t?.status===nI.AVAILABLE})),action:v,onConfirm:e=>{"hold"===v?(async e=>{if(!S?.id||0===m.size)return;const t=Array.from(m).map(e=>{const t=U.get(e);return t?.status===nI.AVAILABLE?t.id:null}).filter(e=>null!==e);if(0===t.length)throw new Error("No available seats selected. Only available seats can be held.");try{await F.mutateAsync({eventId:S.id,seatIds:t,reason:e}),await R(),f(new Set),x(!1)}catch(wW){throw wW}})(e):"unhold"===v?(async()=>{if(!S?.id||0===m.size)return;const e=Array.from(m).map(e=>{const t=U.get(e);return t?.status===nI.HELD?t.id:null}).filter(e=>null!==e);if(0===e.length)throw new Error("No held seats selected. Only held seats can be unheld.");try{await I.mutateAsync({eventId:S.id,seatIds:e}),await R(),f(new Set),x(!1)}catch(wW){throw wW}})():"unblock"===v?(async()=>{if(!S?.id||0===m.size)return;const e=Array.from(m).map(e=>{const t=U.get(e);return t?.status===nI.BLOCKED?t.id:null}).filter(e=>null!==e);if(0===e.length)throw new Error("No blocked seats selected. Only blocked seats can be unblocked.");try{await O.mutateAsync({eventId:S.id,seatIds:e}),await R(),f(new Set),x(!1)}catch(wW){throw wW}})():(async e=>{if(!S?.id||0===m.size)return;const t=Array.from(m).map(e=>{const t=U.get(e);return t?.status===nI.AVAILABLE?t.id:null}).filter(e=>null!==e);if(0===t.length)throw new Error("No available seats selected. Only available seats can be blocked.");try{await z.mutateAsync({eventId:S.id,seatIds:t,reason:e}),await R(),f(new Set),x(!1)}catch(wW){throw wW}})(e)},isLoading:F.isPending||I.isPending||z.isPending})]})}class OU{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async createPayment(e){try{const t=await this.apiClient.post(this.endpoints.payments,{booking_id:e.booking_id,amount:e.amount,payment_method:e.payment_method,currency:e.currency||"USD",transaction_reference:e.transaction_reference,notes:e.notes},{requiresAuth:!0});return this.transformPayment(t)}catch(t){throw t}}async getAllPayments(){try{const e=this.endpoints.payments.replace(/\/$/,"");return(await this.apiClient.get(e,{requiresAuth:!0})).items.map(e=>this.transformPayment(e))}catch(e){throw e}}async getPaymentsByBooking(e){try{const t=this.endpoints.payments.replace(/\/$/,"");return(await this.apiClient.get(`${t}/booking/${e}`,{requiresAuth:!0})).items.map(e=>this.transformPayment(e))}catch(t){throw t}}async voidPayment(e){try{const t=this.endpoints.payments.replace(/\/$/,""),n=await this.apiClient.post(`${t}/${e}/cancel`,{},{requiresAuth:!0});return this.transformPayment(n)}catch(t){throw t}}transformPayment(e){return{id:e.id,tenant_id:e.tenant_id,booking_id:e.booking_id,payment_code:e.payment_code||void 0,amount:e.amount,currency:e.currency,payment_method:e.payment_method,status:e.status,transaction_reference:e.transaction_reference||void 0,notes:e.notes||void 0,processed_at:e.processed_at?new Date(e.processed_at):void 0,created_at:new Date(e.created_at),updated_at:e.updated_at?new Date(e.updated_at):void 0,version:e.version}}}function zU(e){const t=Vs();return Xs({mutationFn:t=>e.createPayment(t),onSuccess:e=>{t.invalidateQueries({queryKey:["bookings"]}),t.invalidateQueries({queryKey:["payments","booking",e.booking_id]})}})}function BU(e,t){return Ys({queryKey:["payments","booking",t],queryFn:()=>t?e.getPaymentsByBooking(t):Promise.resolve([]),enabled:!!t,staleTime:3e5})}const $U=[{value:"credit_card",label:"Credit Card"},{value:"debit_card",label:"Debit Card"},{value:"paypal",label:"PayPal"},{value:"bank_transfer",label:"Bank Transfer"},{value:"cash",label:"Cash"},{value:"other",label:"Other"}];function UU(e){const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t}function VU({open:e,onOpenChange:t,booking:n,onSubmit:s,isLoading:a=!1}){const r=Ua(),[i,o]=p.useState(""),[l,d]=p.useState("cash"),[u,h]=p.useState(""),[m,f]=p.useState(""),g=p.useMemo(()=>new OU({apiClient:Fa,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:x=[]}=BU(g,n?.id||null),v=p.useMemo(()=>x.filter(e=>"void"!==e.status),[x]),y=p.useMemo(()=>{if(!n)return 0;if(void 0!==n.due_balance)return Math.max(0,n.due_balance);const e=x.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0);return Math.max(0,n.total_amount-e)},[n,x]),b=p.useMemo(()=>n?n.total_amount-y:0,[n,y]),w=()=>{o(""),d("cash"),h(""),f(""),t(!1)},S=()=>{(async()=>{if(!n)return;if(!UU(n.status))return void alert(`Payment cannot be processed for booking with status '${n.status}'. Booking must be PENDING, CONFIRMED, or RESERVED before payment.`);const e=parseFloat(i);if(isNaN(e)||e<=0)return;if(e>y)return void alert(`Payment amount (${e}) exceeds remaining balance (${y})`);const a={booking_id:n.id,amount:e,payment_method:l,currency:n.currency||"USD",transaction_reference:u.trim()||void 0,notes:m.trim()||void 0};try{await s(a),o(""),d("cash"),h(""),f(""),t(!1)}catch(r){}})()},j=parseFloat(i)||0,C=UU(n?.status||""),k=y<=0||"paid"===n?.payment_status,N=C&&!k&&j>0&&j<=y;return n?c.jsx(c.Fragment,{children:c.jsx(SE,{open:e,onClose:w,title:`Settle Booking Payment - ${n.booking_number}`,maxWidth:"600px",loading:a,footer:[{label:"Cancel",variant:"outline",type:"button",onClick:w,disabled:a},{label:a?"Processing...":"Process Payment",variant:"default",type:"submit",onClick:S,disabled:!N||a||k}],onSubmit:S,autoSubmitShortcut:!0,children:c.jsx("div",{className:al("space-y-6 mt-12"),children:c.jsxs("div",{className:al("space-y-4",r.paddingForm),children:[k&&c.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:[c.jsx("p",{className:"text-sm font-medium text-green-700",children:"Booking Fully Paid"}),c.jsx("p",{className:"text-sm text-green-600 mt-1",children:"This booking has been fully paid. No additional payments are required."})]}),!C&&!k&&c.jsxs("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4",children:[c.jsx("p",{className:"text-sm font-medium text-destructive",children:"Payment Not Allowed"}),c.jsxs("p",{className:"text-sm text-destructive/80 mt-1",children:["Payments can only be processed for bookings with status"," ",c.jsx("strong",{children:"PENDING"}),", ",c.jsx("strong",{children:"CONFIRMED"}),", or"," ",c.jsx("strong",{children:"RESERVED"}),". Current status:"," ",c.jsx("strong",{children:n.status.toUpperCase()})]})]}),c.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Total Amount:"}),c.jsxs("span",{className:"font-semibold",children:[n.currency||"USD"," ",n.total_amount.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Paid Amount:"}),c.jsxs("span",{className:"font-semibold",children:[n.currency||"USD"," ",b.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between text-sm border-t pt-2",children:[c.jsx("span",{className:"font-medium",children:"Remaining Balance:"}),c.jsxs("span",{className:"font-bold text-primary",children:[n.currency||"USD"," ",y.toFixed(2)]})]})]}),v.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{children:"Existing Payments"}),c.jsx("div",{className:"rounded-lg border divide-y",children:v.map(e=>c.jsxs("div",{className:"p-3 hover:bg-muted/30 transition-colors",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("span",{className:"text-sm font-semibold",children:[e.currency||"USD"," ",e.amount.toFixed(2)]}),c.jsx("span",{className:"text-sm text-muted-foreground",children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[e.payment_method]||e.payment_method})]}),(e.payment_code||e.transaction_reference||e.notes)&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[e.payment_code&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"font-mono font-semibold",children:e.payment_code}),(e.transaction_reference||e.notes)&&c.jsx("span",{children:""})]}),e.transaction_reference&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"font-mono",children:e.transaction_reference}),e.notes&&c.jsx("span",{children:""})]}),e.notes&&c.jsx("span",{className:"truncate",children:e.notes})]})]},e.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"amount",children:["Payment Amount ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx("div",{className:"relative",children:c.jsx(kl,{id:"amount",type:"text",value:i,onChange:e=>(e=>{const t=e.replace(/[^0-9.]/g,""),n=t.split(".");n.length>2||n[1]&&n[1].length>2||o(t)})(e.target.value),placeholder:"0.00",className:"pl-[5rem]",disabled:a||!C||k})}),j>0&&j>y&&c.jsxs("p",{className:"text-sm text-destructive",children:["Amount exceeds remaining balance of"," ",n.currency||"USD"," ",y.toFixed(2)]}),j>0&&j<=y&&c.jsxs("p",{className:"text-sm text-muted-foreground",children:["New balance after payment: ",n.currency||"USD"," ",(y-j).toFixed(2)]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Dl,{htmlFor:"payment-method",children:["Payment Method ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsxs(ox,{value:l,onValueChange:e=>d(e),disabled:a||!C||k,children:[c.jsx(cx,{id:"payment-method",children:c.jsx(lx,{placeholder:"Select payment method"})}),c.jsx(hx,{children:$U.map(e=>c.jsx(mx,{value:e.value,children:e.label},e.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"transaction-reference",children:"Transaction Reference"}),c.jsx(kl,{id:"transaction-reference",value:u,onChange:e=>h(e.target.value),placeholder:"Optional transaction reference",disabled:a||!C||k})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"notes",children:"Notes"}),c.jsx(Tl,{id:"notes",value:m,onChange:e=>f(e.target.value),placeholder:"Optional payment notes",rows:3,disabled:a||!C||k})]})]})})})}):null}function qU({open:e,onOpenChange:t,booking:n}){const s=Ua(),{toast:a}=Rk(),[r,i]=p.useState(new Set),[o,l]=p.useState(""),[d,u]=p.useState(!1),h=p.useMemo(()=>new OU({apiClient:Fa,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:m=[]}=BU(h,n?.id||null),f=function(e){const t=Vs();return Xs({mutationFn:t=>e.voidPayment(t),onSuccess:e=>{t.invalidateQueries({queryKey:["bookings"]}),t.invalidateQueries({queryKey:["payments","booking",e.booking_id]})}})}(h),g=m.filter(e=>{return t=e,"cancelled"!==n?.status&&"completed"===t.status;var t}),x=()=>{i(new Set),l(""),u(!1),t(!1)};return n?c.jsx(c.Fragment,{children:c.jsx(Zy,{open:e,onOpenChange:x,children:c.jsxs(tb,{className:"sm:max-w-[600px]",children:[c.jsxs(nb,{children:[c.jsx(ab,{children:"Void Payments"}),c.jsxs(rb,{children:["Void payments for booking ",n.booking_number,". Payments can be voided for bookings with payments (full or partial), but cannot be voided if the booking is already cancelled."]})]}),c.jsx("div",{className:al("space-y-4",s.paddingForm),children:0===g.length?c.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[c.jsx("p",{children:"No voidable payments found for this booking."}),"cancelled"===n.status?c.jsx("p",{className:"text-sm mt-2 text-destructive",children:"Payments cannot be voided for cancelled bookings. Payments must be voided before cancellation."}):c.jsx("p",{className:"text-sm mt-2",children:"Only payments that have been processed (paid, processing, failed) can be voided. Pending payments cannot be voided since no payment has been made yet."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Dl,{children:"Voidable Payments"}),g.length>0&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>{r.size===g.length?i(new Set):i(new Set(g.map(e=>e.id)))},className:"h-8 text-xs",children:r.size===g.length?"Deselect All":"Select All"})]}),c.jsx("div",{className:"rounded-lg border divide-y max-h-[300px] overflow-y-auto",children:g.map(e=>{const t=r.has(e.id);return c.jsxs("label",{className:"p-3 flex items-start gap-3 hover:bg-muted/30 transition-colors cursor-pointer",children:[c.jsx(RC,{checked:t,onCheckedChange:()=>{return t=e.id,void i(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},disabled:d,className:"mt-0.5"}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 mb-1",children:c.jsxs("span",{className:"text-sm font-semibold",children:[e.currency||"USD"," ",e.amount.toFixed(2)]})}),e.transaction_reference&&c.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:c.jsx("span",{className:"font-mono",children:e.transaction_reference})}),e.notes&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.notes})]}),c.jsx("div",{className:"text-sm text-muted-foreground whitespace-nowrap",children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[e.payment_method]||e.payment_method})]})]},e.id)})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"remarks",children:"Remarks (Optional)"}),c.jsx(Tl,{id:"remarks",value:o,onChange:e=>l(e.target.value),placeholder:"Add remarks for voiding payments...",rows:3,disabled:d})]})]})}),c.jsxs(sb,{children:[c.jsx(vl,{variant:"outline",onClick:x,disabled:d,children:"Cancel"}),g.length>0&&c.jsx(vl,{variant:"destructive",onClick:async()=>{if(0===r.size)return;u(!0);const e=Array.from(r);let t=0,n=0;try{for(const a of e)try{await f.mutateAsync(a),t++}catch(s){n++}0===n?(a({title:"Success",description:`Successfully voided ${t} payment${t>1?"s":""}`}),x()):a(t>0?{title:"Partial Success",description:`Voided ${t} payment${t>1?"s":""}, ${n} failed`,variant:"default"}:{title:"Error",description:`Failed to void ${n} payment${n>1?"s":""}`,variant:"destructive"})}finally{u(!1)}},disabled:0===r.size||d,children:d?"Voiding...":`Void Selected (${r.size})`})]})]})})}):null}function HU({className:e,data:t,loading:n=!1,error:s=null,showMetadata:a=!1,editable:r=!0,onEdit:i,onPayment:o,customActions:l}){const[d,u]=p.useState("information"),[h,m]=p.useState(!1),[f,g]=p.useState(!1),x=p.useMemo(()=>new rI({apiClient:Fa,endpoints:{events:"/api/v1/ticketing/events"}}),[]),v=p.useMemo(()=>new OI({apiClient:Fa,endpoints:{shows:"/api/v1/ticketing/shows"}}),[]),y=p.useMemo(()=>new vF({apiClient:Fa,endpoints:{customers:"/api/v1/sales/customers"}}),[]),b=p.useMemo(()=>new OU({apiClient:Fa,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:w,isLoading:S}=dI(x,t?.event_id||null),{data:j,isLoading:C}=JI(v,w?.show_id||null),{data:k,isLoading:N}=bF(y,t?.customer_id||null),{data:_=[],isLoading:P}=BU(b,t?.id||null),E=zU(b),R=p.useMemo(()=>t&&(t?.booking_number||t?.id)||"",[t,t?.booking_number]),A=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},T=p.useMemo(()=>{const e=_.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0);return{totalPaid:e,balanceDue:void 0!==t?.due_balance?Math.max(0,t.due_balance):Math.max(0,(t?.total_amount||0)-e)}},[_,t?.total_amount,t?.due_balance]),M=p.useMemo(()=>!(!t||"cancelled"===t.status)&&_.some(e=>"completed"===e.status),[_,t]);if(n)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(s)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",s.message]})})});if(!t)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No booking selected"})})});const D=a;return c.jsxs(bl,{className:al("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(_f,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-xl font-semibold",children:R}),c.jsx(HD,{value:t.booking_number,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[t.status&&c.jsx("span",{className:al("px-2 py-1 text-xs font-medium rounded-full","confirmed"===t.status||"paid"===t.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"cancelled"===t.status||"refunded"===t.status?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"),children:t.status.toUpperCase()}),t.payment_status&&c.jsxs("span",{className:al("px-2 py-1 text-xs font-medium rounded-full","paid"===t.payment_status?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:["Payment: ",t.payment_status.toUpperCase()]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[l?.(t),t&&M&&c.jsxs(vl,{onClick:()=>g(!0),variant:"outline",className:"gap-2",children:[c.jsx(ef,{className:"h-4 w-4"}),"Void Payment"]}),t&&(e=>{const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t})(t.status)&&T.balanceDue>0&&c.jsxs(vl,{onClick:()=>m(!0),className:"gap-2",disabled:E.isPending,children:[c.jsx(cf,{className:"h-4 w-4"}),"Pay ",t.currency||"USD"," ",T.balanceDue.toFixed(2)]})]}),r&&i||l?c.jsx("div",{children:c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",size:"icon","aria-label":"Actions",children:c.jsx(uf,{className:"h-4 w-4"})})}),c.jsxs(JS,{align:"end",className:"w-56",children:[r&&i&&c.jsxs(ej,{onClick:()=>i(t),children:[c.jsx(Tg,{className:"mr-2 h-3.5 w-3.5"})," Edit booking"]}),l&&l(t)]})]})}):null]})]}),c.jsxs(sy,{value:d,onValueChange:e=>u(e),children:[c.jsx("div",{className:"border-b mb-4",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","information"===d?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>u("information"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(_f,{className:"h-4 w-4"}),"Information"]})}),c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","payments"===d?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>u("payments"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(cf,{className:"h-4 w-4"}),"Payments (",_.length,")"]})}),D&&c.jsx("button",{className:al("border-b-2 px-4 py-2 text-sm font-medium transition-colors","metadata"===d?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>u("metadata"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(lf,{className:"h-4 w-4"}),"Metadata"]})})]})}),c.jsxs("div",{className:"mt-0",children:["information"===d&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{children:c.jsxs("dl",{className:"grid gap-4 md:grid-cols-3",children:[c.jsxs("div",{children:[c.jsxs("dt",{className:"text-sm font-medium flex items-center gap-1",children:[c.jsx(Jg,{className:"h-3.5 w-3.5"}),"Customer"]}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:t.customer_id?N?c.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):k?.code&&k?.name?`${k.code} - ${k.name}`:k?.name?k.name:k?.code?k.code:"-":"-"})]}),t.event_id&&c.jsxs("div",{children:[c.jsxs("dt",{className:"text-sm font-medium flex items-center gap-1",children:[c.jsx(Ip,{className:"h-3.5 w-3.5"}),"Event"]}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:S||C?c.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):j?.name&&w?.title?`${j.name} - ${w.title}`:w?.title?w.title:(e=>{if(null==e)return"N/A";if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){const t=e.trim();if(!t)return"N/A";const n=new Date(t);return Number.isNaN(n.getTime())?t:n.toLocaleString()}if("number"==typeof e||"boolean"==typeof e)return String(e);try{return JSON.stringify(e)}catch{return String(e)}})(t.event_id)})]}),t.created_at&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Created"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:A(t.created_at)})]}),t.updated_at&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Last Updated"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:A(t.updated_at)})]}),t.reserved_until&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium",children:"Reserved Until"}),c.jsx("dd",{className:"mt-1 text-sm text-muted-foreground",children:A(t.reserved_until)})]}),t.cancelled_at&&c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium text-destructive",children:"Cancelled At"}),c.jsx("dd",{className:"mt-1 text-sm text-destructive",children:A(t.cancelled_at)})]})]})}),t.items&&t.items.length>0&&c.jsxs("div",{className:"mt-8",children:[c.jsxs("h3",{className:"mb-4 text-sm font-medium text-muted-foreground flex items-center gap-2",children:[c.jsx(qg,{className:"h-4 w-4"}),"Booking Items (",t.items.length,")"]}),c.jsx(bl,{className:"overflow-hidden border",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-muted/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Seat"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Section"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Row"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Ticket Number"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Price"})]})}),c.jsx("tbody",{className:"divide-y divide-border",children:t.items.map((e,n)=>c.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:n+1}),c.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:e.seat_number||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:e.section_name||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:e.row_name||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground font-mono",children:e.ticket_number||"-"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-right",children:[e.currency||t.currency||"USD"," ",e.unit_price?.toFixed(2)||"0.00"]})]},e.id||n))}),c.jsxs("tfoot",{className:"bg-muted/50 border-t",children:[c.jsxs("tr",{children:[c.jsx("td",{colSpan:5,className:"px-4 py-3 text-sm font-medium text-right pr-8",children:"Subtotal:"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-right whitespace-nowrap",children:[t.currency||"USD"," ",t.subtotal_amount?.toFixed(2)||"0.00"]})]}),t.discount_amount>0&&c.jsxs("tr",{children:[c.jsxs("td",{colSpan:5,className:"px-4 py-3 text-sm font-medium text-right pr-8",children:["Discount","percentage"===t.discount_type&&t.discount_value?` (${t.discount_value}%)`:"",":"]}),c.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground text-right whitespace-nowrap",children:["-",t.currency||"USD"," ",t.discount_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("tr",{children:[c.jsxs("td",{colSpan:5,className:"px-4 py-3 text-sm font-medium text-right pr-8",children:["Tax (",(100*(t.tax_rate||0)).toFixed(0),"%):"]}),c.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground text-right whitespace-nowrap",children:[t.currency||"USD"," ",t.tax_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("tr",{className:"border-t-2 border-border",children:[c.jsx("td",{colSpan:5,className:"px-4 py-3 text-sm font-bold text-right pr-8",children:"Total:"}),c.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-right whitespace-nowrap",children:[t.currency||"USD"," ",t.total_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("tr",{children:[c.jsx("td",{colSpan:5,className:"px-4 py-3 text-sm font-medium text-right pr-8",children:"Paid Amount:"}),c.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground text-right whitespace-nowrap",children:[t.currency||"USD"," ",T.totalPaid.toFixed(2)]})]}),c.jsxs("tr",{className:"border-t-2 border-border",children:[c.jsx("td",{colSpan:5,className:"px-4 py-3 text-sm font-bold text-right pr-8",children:"Balance Due:"}),c.jsxs("td",{className:al("px-4 py-3 text-sm font-bold text-right whitespace-nowrap",T.balanceDue>0?"text-destructive":"text-green-600"),children:[t.currency||"USD"," ",T.balanceDue.toFixed(2)]})]})]})]})})})]})]}),"payments"===d&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(bl,{className:"p-4",children:c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),c.jsxs("div",{className:"text-lg font-semibold",children:[t.currency||"USD"," ",t.total_amount?.toFixed(2)||"0.00"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Paid Amount"}),c.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[t.currency||"USD"," ",T.totalPaid.toFixed(2)]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance Due"}),c.jsxs("div",{className:al("text-lg font-semibold",T.balanceDue>0?"text-destructive":"text-green-600"),children:[t.currency||"USD"," ",T.balanceDue.toFixed(2)]})]})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Payment History"}),P?c.jsx(bl,{className:"p-6",children:c.jsx("div",{className:"text-center text-muted-foreground",children:"Loading payments..."})}):0===_.length?c.jsx(bl,{className:"p-6",children:c.jsx("div",{className:"text-center text-muted-foreground",children:"No payments recorded"})}):c.jsx(bl,{className:"overflow-hidden border",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-muted/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Method"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Reference"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-border",children:_.map(e=>c.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:A(e.created_at)}),c.jsxs("td",{className:"px-4 py-3 text-sm font-semibold",children:[e.currency||"USD"," ",e.amount.toFixed(2)]}),c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[e.payment_method]||e.payment_method}),c.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground font-mono",children:e.transaction_reference||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:al("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold","completed"===e.status?"bg-green-50 text-green-700 border-green-200":(e.status,"bg-gray-50 text-gray-700 border-gray-200")),children:e.status.toUpperCase()})})]},e.id))})]})})})]})]}),"metadata"===d&&c.jsx("div",{className:"space-y-6",children:c.jsx(bl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})]})]}),t&&c.jsx(VU,{open:h,onOpenChange:m,booking:t,onSubmit:async e=>{try{await E.mutateAsync(e),m(!1),o?.(t)}catch(n){throw n}},isLoading:E.isPending}),t&&c.jsx(qU,{open:f,onOpenChange:g,booking:t})]})}const GU=AM({code:PM().optional(),name:PM().min(1,"Name is required")}).transform(e=>e);function KU({className:e,venues:t=[],loading:n=!1,pagination:s,onVenueClick:a,onDelete:r,onCreate:i,onSearch:o,onPageChange:l,onPageSizeChange:d}){const u=Ua(),[h,m]=p.useState(!1),[f,g]=p.useState(null),x=e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},v=[OP({getDisplayName:x,getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:a,additionalOptions:{id:"code"}}),LP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("font-medium",u.textSize),children:t??"-"})}}),LP({accessorKey:"venue_type",header:"Type",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:t??"-"})}}),LP({accessorKey:"phone",header:"Phone",cell:e=>{const t=e.getValue();return c.jsx("div",{className:"flex items-center gap-2",children:t?c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:t}):c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"})})}}),LP({accessorKey:"email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("div",{className:"flex items-center gap-2",children:t?c.jsx(c.Fragment,{children:c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:t})}):c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"})})}}),LP({accessorKey:"city",header:"Address",cell:e=>{const t=e.row.original,n=[t.city,t.state_province,t.country].filter(Boolean).join(", ");return c.jsx("div",{className:"flex items-center gap-2",children:n?c.jsx(c.Fragment,{children:c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:n})}):c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"})})}}),FP({accessorKey:"created_at",header:"Date Created",cell:e=>{const t=e.getValue();if(!t)return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:"-"});const n=t instanceof Date?t:new Date(t);return c.jsx("span",{className:al("text-muted-foreground",u.textSize),children:n.toLocaleDateString()})}})],y=t,b=s?{page:s.page,pageSize:s.pageSize,total:s.total,totalPages:s.totalPages}:void 0,w={label:"Delete",onClick:()=>{f&&r&&r(f),m(!1),g(null)},variant:"destructive"},S={label:"Cancel",onClick:()=>{m(!1),g(null)}};return c.jsxs("div",{className:al("w-full",e),children:[c.jsx($P,{data:y,columns:v,useDefaultColumns:!1,title:"Venues",description:"Manage and view venues",onCreate:i,onSearch:o,manualPagination:Boolean(s&&l),serverPagination:b,onPageChange:l,onPageSizeChange:d,loading:n}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||g(null)},title:"Delete Venue",description:f?`Are you sure you want to delete "${x(f)}"? This action cannot be undone.`:"Are you sure you want to delete this venue?",confirmAction:w,cancelAction:S})]})}function WU({open:e,onOpenChange:t,venue:n}){const[s,a]=p.useState(""),[r,i]=p.useState("seat-level"),o=function(e){const t=Vs();return Xs({mutationFn:t=>e.createLayout(t),onSuccess:e=>{t.invalidateQueries({queryKey:["layouts","venue",e.venue_id]})}})}(RI()),l=async()=>{if(n&&s.trim())try{await o.mutateAsync({venue_id:n.id,name:s.trim(),design_mode:r}),a(""),i("seat-level"),t(!1)}catch(e){}};return c.jsx(Zy,{open:e,onOpenChange:t,children:c.jsxs(tb,{children:[c.jsxs(nb,{children:[c.jsx(ab,{children:"Create New Layout"}),c.jsx(rb,{children:"Create a new layout for this venue. Design mode cannot be changed after seats are added."})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"layout-name",children:"Layout Name"}),c.jsx(kl,{id:"layout-name",placeholder:"Layout name",value:s,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&s.trim()&&l()},autoFocus:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"design-mode",children:"Design Mode"}),c.jsxs(ox,{value:r,onValueChange:e=>i(e),children:[c.jsx(cx,{id:"design-mode",children:c.jsx(lx,{})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"seat-level",children:c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsx("span",{className:"font-medium",children:"Seat Level"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Place seats directly on venue floor plan"})]})}),c.jsx(mx,{value:"section-level",children:c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsx("span",{className:"font-medium",children:"Section Level"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Define sections first, then add seats to each section"})]})})]})]})]})]}),c.jsxs(sb,{children:[c.jsx(vl,{variant:"outline",onClick:()=>{t(!1),a(""),i("seat-level")},children:"Cancel"}),c.jsx(vl,{onClick:l,disabled:!s.trim()||o.isPending,children:o.isPending?"Creating...":"Create"})]})]})})}function QU({open:e,onOpenChange:t,layout:n}){const[s,a]=p.useState(""),[r,i]=p.useState(""),o=MI(RI());p.useEffect(()=>{n&&(a(n.name||""),i(n.description||""))},[n]);const l=async()=>{if(n&&s.trim())try{await o.mutateAsync({id:n.id,input:{name:s.trim(),description:r.trim()||void 0}}),t(!1)}catch(e){}};return c.jsx(Zy,{open:e,onOpenChange:t,children:c.jsxs(tb,{children:[c.jsxs(nb,{children:[c.jsx(ab,{children:"Edit Layout"}),c.jsxs(rb,{children:['Update the layout information for "',n?.name,'".']})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"layout-name",children:"Layout Name"}),c.jsx(kl,{id:"layout-name",placeholder:"Layout name",value:s,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&s.trim()&&l()},autoFocus:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Dl,{htmlFor:"layout-description",children:"Description"}),c.jsx(Tl,{id:"layout-description",placeholder:"Layout description (optional)",value:r,onChange:e=>i(e.target.value),rows:3})]})]}),c.jsxs(sb,{children:[c.jsx(vl,{variant:"outline",onClick:()=>{t(!1),n&&(a(n.name||""),i(n.description||""))},children:"Cancel"}),c.jsx(vl,{onClick:l,disabled:!s.trim()||o.isPending,children:o.isPending?"Updating...":"Update"})]})]})})}function YU({className:e,data:t,loading:n=!1,error:s=null,showMetadata:a=!1,editable:r=!0,onEdit:i,onNavigateToSeatDesigner:o,profilePhotoComponent:l,customActions:d}){const[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>t&&(t?.name||t?.id)||"",[t,t?.name]),y=e=>{if(!e)return"N/A";try{const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"Invalid Date":t.toLocaleString()}catch{return"Invalid Date"}},b=e=>{x(e),f(!0)},w=[{value:"layout",label:"Layout",icon:Df},{value:"overview",label:"Overview",icon:_f},{value:"contact",label:"Contact & Address",icon:lg}];a&&w.push({value:"metadata",label:"Metadata",icon:lf});const S=[];return r&&i&&t&&S.push({id:"edit",label:"Edit",icon:c.jsx(Tg,{className:"h-3.5 w-3.5"}),onClick:()=>i(t)}),S.push({id:"add-layout",label:"Add Layout",icon:c.jsx(hg,{className:"h-3.5 w-3.5"}),onClick:()=>h(!0)}),n?c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})}):s?c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",s.message]})})}):t?c.jsxs(bl,{className:al("p-6",e),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[l?c.jsx("div",{className:"flex-shrink-0",children:l}):c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(_f,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:v}),t.code&&c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code,c.jsx(HD,{value:t.code,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]})]})]}),c.jsx(kA,{actions:S,maxVisibleActions:2,customActions:d?.(t),size:"sm"})]}),c.jsx(HM,{tabs:w,defaultValue:"layout",children:e=>c.jsxs("div",{className:"mt-0",children:["layout"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(rO,{venueId:t.id,onNavigateToDesigner:e=>{o&&o(t.id,e)},onEdit:b})}),"overview"===e&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs(QM,{title:"Venue Information",columns:3,children:[c.jsx(WM,{label:"Venue Type",value:t.venue_type||null}),c.jsx(WM,{label:"Capacity",value:t.capacity?`${t.capacity.toLocaleString()} seats`:null}),c.jsx(WM,{label:"Opening Hours",value:t.opening_hours||null,preserveWhitespace:!0})]}),c.jsxs(QM,{title:"Facilities & Amenities",columns:3,children:[c.jsx(WM,{label:"Parking",value:t.parking_info||null}),c.jsx(WM,{label:"Accessibility",value:t.accessibility||null}),c.jsx(WM,{label:"Amenities",value:t.amenities&&Array.isArray(t.amenities)&&t.amenities.length>0?c.jsx("div",{className:"flex flex-wrap gap-2",children:t.amenities.map((e,t)=>c.jsx("span",{className:"inline-flex items-center rounded-md bg-secondary px-2.5 py-1 text-xs font-medium",children:e},t))}):null})]}),c.jsx(KM,{children:c.jsx(WM,{label:"Description",value:t.description||null})}),c.jsxs(QM,{title:"Timeline",icon:lf,columns:3,className:"border-t pt-4",children:[c.jsx(WM,{label:"Created",value:t.created_at,render:e=>y(e)}),c.jsx(WM,{label:"Last Updated",value:t.updated_at,render:e=>y(e)})]})]}),"contact"===e&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs(QM,{title:"Contact Information",columns:3,children:[c.jsx(WM,{label:"Phone",value:t.phone||null,linkType:"tel",icon:lg}),c.jsx(WM,{label:"Email",value:t.email||null,linkType:"email",icon:Uf}),c.jsx(WM,{label:"Website",value:t.website||null,linkType:"external",icon:bf,span:"md:col-span-3"})]}),c.jsxs(QM,{title:"Address Information",icon:Vf,columns:3,children:[c.jsx(WM,{label:"Street Address",value:t.street_address||null}),c.jsx(WM,{label:"City, State, ZIP",value:[t.city,t.state_province,t.postal_code].filter(Boolean).join(", ")||null}),c.jsx(WM,{label:"Country",value:t.country||null})]})]}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(bl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})})]}),c.jsx(WU,{open:u,onOpenChange:h,venue:t}),c.jsx(QU,{open:m,onOpenChange:e=>{f(e),e||x(null)},layout:g||void 0})]}):c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No venue selected"})})})}function XU(e){return{id:e.id,code:e.code,name:e.name,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:s="create"},a){const{register:r,handleSubmit:i,formState:{errors:o,isSubmitted:l}}=uA({resolver:QA(GU),defaultValues:{code:void 0,name:"",...e}}),d=p.useRef(null);p.useEffect(()=>{if(l&&Object.keys(o).length>0){const e=Object.keys(o)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):d.current&&d.current.scrollIntoView({behavior:"smooth",block:"center"})}},[o,l]);return c.jsx("form",{ref:a,id:"booking-form",onSubmit:i(async e=>{await t(e)}),className:"space-y-6",children:c.jsxs("div",{className:al("grid grid-cols-1 md:grid-cols-2 gap-4"),ref:d,children:[c.jsxs(El,{"data-invalid":!!o.code,children:[c.jsx(Rl,{htmlFor:"code",children:"Code"}),(()=>{const e="edit"===s||"create"===s,t="edit"===s?"Codes cannot be modified after creation":"create"===s?"Code will be generated automatically":void 0;return c.jsx(kl,{id:"code",type:"text",placeholder:"Auto generated",...r("code"),disabled:n||e,readOnly:e,tabIndex:e?-1:void 0,"aria-disabled":e||void 0,"aria-readonly":e||void 0,title:t,className:al(e&&"cursor-not-allowed bg-muted text-muted-foreground",o.code&&"border-destructive")})})(),c.jsx(Al,{children:o.code?.message})]}),c.jsxs(El,{"data-invalid":!!o.name,children:[c.jsxs(Rl,{htmlFor:"name",children:["Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),(()=>{const e=!1;return c.jsx(kl,{id:"name",type:"text",placeholder:"Enter Name",...r("name"),disabled:n||e,readOnly:e,tabIndex:void 0,"aria-disabled":void 0,"aria-readonly":void 0,title:void 0,className:al(e,o.name&&"border-destructive")})})(),c.jsx(Al,{children:o.name?.message})]})]})})});class ZU{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchVenueTypes(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.venueTypes.replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(XU),pagination:l}}catch(t){throw t}}async searchVenueTypes(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.endpoints.venueTypes.replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(XU)}catch(n){throw n}}async fetchVenueTypeById(e){try{const t=this.endpoints.venueTypes.replace(/\/$/,"");return XU(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createVenueType(e){try{return XU(await this.apiClient.post(this.endpoints.venueTypes,e,{requiresAuth:!0}))}catch(t){throw t}}async updateVenueType(e,t){try{const n=this.endpoints.venueTypes.replace(/\/$/,"");return XU(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteVenueType(e){try{const t=this.endpoints.venueTypes.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const JU=p.createContext(null);function eV({children:e,config:t}){const n=p.useMemo(()=>new ZU(t),[t.apiClient,t.endpoints?.venueTypes]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(JU.Provider,{value:s,children:e})}function tV(e,t){const{search:n,pagination:s,enabled:a=!0}=t||{},r=n?.trim()||void 0;return Ys({queryKey:["vt",r,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,n=s?.pageSize||100;return r?e.searchVenueTypes(r,n).then(e=>({data:e,pagination:{page:1,pageSize:n,total:e.length,totalPages:1}})):e.fetchVenueTypes({skip:t,limit:n})},enabled:a,staleTime:3e5})}const nV=AM({code:PM().optional(),name:PM().min(1,"Name is required"),description:PM().optional(),venue_type:PM().optional(),capacity:DM().optional(),parking_info:PM().optional(),accessibility:PM().optional(),amenities:PM().optional(),opening_hours:PM().optional(),phone:PM().optional(),email:PM().email("Invalid email address").optional().or(TM("")),website:PM().optional().refine(e=>!e||""===e||(!!PM().url().safeParse(e).success||/^www\.[\w.-]+\.[\w.-]+$/.test(e)),{message:"Invalid URL (use https://example.com or www.example.com)"}),street_address:PM().optional(),city:PM().optional(),state_province:PM().optional(),postal_code:PM().optional(),country:PM().optional()}),sV=nV.transform(e=>({...e,amenities:e.amenities?e.amenities.split(",").map(e=>e.trim()).filter(e=>e):[]})),aV=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,venueTypes:s},a){const r=p.useContext(JU),i=r?.service,{data:o}=tV(i||{fetchVenueTypes:async()=>({data:[],pagination:{page:1,pageSize:100,total:0,totalPages:0}})},{pagination:{page:1,pageSize:100},enabled:!!i&&!s}),l=s||o?.data||[],{register:d,control:u,handleSubmit:h,watch:m,setValue:f,formState:{errors:g,isSubmitted:x}}=uA({resolver:QA(nV),defaultValues:{name:"",description:void 0,venue_type:void 0,parking_info:void 0,accessibility:void 0,amenities:Array.isArray(e?.amenities)?e.amenities.join(", "):"string"==typeof e?.amenities?e.amenities:void 0,opening_hours:void 0,phone:void 0,email:void 0,website:void 0,street_address:void 0,city:void 0,state_province:void 0,postal_code:void 0,country:void 0,...e?{...e,amenities:Array.isArray(e.amenities)?e.amenities.join(", "):"string"==typeof e.amenities?e.amenities:void 0}:{}}}),v=p.useRef(null);p.useEffect(()=>{if(x&&Object.keys(g).length>0){const e=Object.keys(g)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):v.current&&v.current.scrollIntoView({behavior:"smooth",block:"center"})}},[g,x]);const y={name:m("name")??"",description:m("description")??"",venue_type:m("venue_type")??"",street_address:m("street_address")??"",city:m("city")??"",state_province:m("state_province")??"",postal_code:m("postal_code")??"",country:m("country")??"",phone:m("phone")??"",email:m("email")??"",website:m("website")??""};return c.jsxs("form",{ref:a,id:"venue-form",onSubmit:h(async e=>{const n=sV.parse(e);await t(n)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(wA,{formType:"venue",currentValues:y,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&f(e,t)})},disabled:n})}),c.jsxs("div",{ref:v,className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Basic Information"}),c.jsxs("div",{className:al("grid grid-cols-1 md:grid-cols-2 gap-4"),children:[c.jsxs(El,{"data-invalid":!!g.name,children:[c.jsxs(Rl,{htmlFor:"name",children:["Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),c.jsx(kl,{id:"name",type:"text",placeholder:"Enter Name",...d("name"),disabled:n,className:al(g.name&&"border-destructive")}),c.jsx(Al,{children:g.name?.message})]}),c.jsxs(El,{"data-invalid":!!g.venue_type,children:[c.jsx(Rl,{htmlFor:"venue_type",children:"Venue Type"}),c.jsxs(ox,{value:m("venue_type")||void 0,onValueChange:e=>f("venue_type","none"===e?void 0:e),disabled:n,children:[c.jsx(cx,{id:"venue_type",children:c.jsx(lx,{placeholder:"Select venue type"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"none",children:"None"}),l.map(e=>c.jsx(mx,{value:e.name,children:e.name},e.id))]})]}),c.jsx(Al,{children:g.venue_type?.message})]})]}),c.jsx(SA,{control:u,name:"description",label:"Description",placeholder:"Venue description",rows:3,disabled:n,showImproveButton:!0})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Contact Information"}),c.jsxs("div",{className:al("grid grid-cols-1 md:grid-cols-3 gap-4"),children:[c.jsxs(El,{"data-invalid":!!g.phone,children:[c.jsx(Rl,{htmlFor:"phone",children:"Phone"}),c.jsx(kl,{id:"phone",type:"tel",placeholder:"Phone number",...d("phone"),disabled:n,className:al(g.phone&&"border-destructive")}),c.jsx(Al,{children:g.phone?.message})]}),c.jsxs(El,{"data-invalid":!!g.email,children:[c.jsx(Rl,{htmlFor:"email",children:"Email"}),c.jsx(kl,{id:"email",type:"email",placeholder:"Email address",...d("email"),disabled:n,className:al(g.email&&"border-destructive")}),c.jsx(Al,{children:g.email?.message})]}),c.jsxs(El,{"data-invalid":!!g.website,children:[c.jsx(Rl,{htmlFor:"website",children:"Website"}),c.jsx(kl,{id:"website",type:"url",placeholder:"https://example.com or www.example.com",...d("website"),disabled:n,className:al(g.website&&"border-destructive")}),c.jsx(Al,{children:g.website?.message})]})]})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Address"}),c.jsxs("div",{className:al("grid grid-cols-1 md:grid-cols-2 gap-4"),children:[c.jsxs(El,{"data-invalid":!!g.street_address,className:"md:col-span-2",children:[c.jsx(Rl,{htmlFor:"street_address",children:"Street Address"}),c.jsx(kl,{id:"street_address",type:"text",placeholder:"Street address",...d("street_address"),disabled:n,className:al(g.street_address&&"border-destructive")}),c.jsx(Al,{children:g.street_address?.message})]}),c.jsxs(El,{"data-invalid":!!g.city,children:[c.jsx(Rl,{htmlFor:"city",children:"City"}),c.jsx(kl,{id:"city",type:"text",placeholder:"City",...d("city"),disabled:n,className:al(g.city&&"border-destructive")}),c.jsx(Al,{children:g.city?.message})]}),c.jsxs(El,{"data-invalid":!!g.state_province,children:[c.jsx(Rl,{htmlFor:"state_province",children:"State/Province"}),c.jsx(kl,{id:"state_province",type:"text",placeholder:"State or province",...d("state_province"),disabled:n,className:al(g.state_province&&"border-destructive")}),c.jsx(Al,{children:g.state_province?.message})]}),c.jsxs(El,{"data-invalid":!!g.postal_code,children:[c.jsx(Rl,{htmlFor:"postal_code",children:"Postal Code"}),c.jsx(kl,{id:"postal_code",type:"text",placeholder:"Postal/ZIP code",...d("postal_code"),disabled:n,className:al(g.postal_code&&"border-destructive")}),c.jsx(Al,{children:g.postal_code?.message})]}),c.jsxs(El,{"data-invalid":!!g.country,children:[c.jsx(Rl,{htmlFor:"country",children:"Country"}),c.jsx(kl,{id:"country",type:"text",placeholder:"Country",...d("country"),disabled:n,className:al(g.country&&"border-destructive")}),c.jsx(Al,{children:g.country?.message})]})]})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-base font-semibold",children:"Facilities & Information"}),c.jsxs("div",{className:al("grid grid-cols-1 gap-4"),children:[c.jsxs(El,{"data-invalid":!!g.parking_info,children:[c.jsx(Rl,{htmlFor:"parking_info",children:"Parking Information"}),c.jsx(Tl,{id:"parking_info",placeholder:"Parking availability and details",...d("parking_info"),disabled:n,rows:3,className:al(g.parking_info&&"border-destructive")}),c.jsx(Al,{children:g.parking_info?.message})]}),c.jsxs(El,{"data-invalid":!!g.accessibility,children:[c.jsx(Rl,{htmlFor:"accessibility",children:"Accessibility Features"}),c.jsx(Tl,{id:"accessibility",placeholder:"Accessibility features and accommodations",...d("accessibility"),disabled:n,rows:3,className:al(g.accessibility&&"border-destructive")}),c.jsx(Al,{children:g.accessibility?.message})]}),c.jsxs(El,{"data-invalid":!!g.amenities,children:[c.jsx(Rl,{htmlFor:"amenities",children:"Amenities"}),c.jsx(Tl,{id:"amenities",placeholder:"List amenities separated by commas (e.g., WiFi, Concessions, Restrooms)",...d("amenities"),disabled:n,rows:3,className:al(g.amenities&&"border-destructive")}),c.jsx(Al,{children:g.amenities?.message})]}),c.jsxs(El,{"data-invalid":!!g.opening_hours,children:[c.jsx(Rl,{htmlFor:"opening_hours",children:"Opening Hours"}),c.jsx(Tl,{id:"opening_hours",placeholder:"Operating hours (e.g., Mon-Fri: 9am-5pm, Sat-Sun: 10am-6pm)",...d("opening_hours"),disabled:n,rows:3,className:al(g.opening_hours&&"border-destructive")}),c.jsx(Al,{children:g.opening_hours?.message})]})]})]})]})});function rV({open:e,onOpenChange:t,onSubmit:n,title:s="Create Venue",maxWidth:a="720px"}){const r=Ua(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=p.useMemo(()=>e=>({code:void 0,name:e.name,description:e.description||void 0,venue_type:e.venue_type||void 0,parking_info:e.parking_info||void 0,accessibility:e.accessibility||void 0,amenities:e.amenities&&e.amenities.length>0?e.amenities:void 0,opening_hours:e.opening_hours||void 0,phone:e.phone||void 0,email:e.email||void 0,website:e.website||void 0,street_address:e.street_address||void 0,city:e.city||void 0,state_province:e.state_province||void 0,postal_code:e.postal_code||void 0,country:e.country||void 0}),[]),v=()=>{m(!1),g(null),t(!1)},y={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=x(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},b={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:v,title:s,maxWidth:a,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:v,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(aV,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d},o)})}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Venue Creation",description:f?c.jsx("p",{className:al("mb-3",r.textSizeSmall),children:"Are you sure you want to create this venue?"}):void 0,confirmAction:y,cancelAction:b})]})}function iV({open:e,onOpenChange:t,onSubmit:n,venue:s,title:a="Edit Venue",maxWidth:r="720px"}){const i=Ua(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>{if(s)return{name:s.name??"",description:s.description??"",venue_type:s.venue_type??"",capacity:s.capacity??void 0,parking_info:s.parking_info??"",accessibility:s.accessibility??"",amenities:s.amenities?.join(", ")??"",opening_hours:s.opening_hours??"",phone:s.phone??"",email:s.email??"",website:s.website??"",street_address:s.street_address??"",city:s.city??"",state_province:s.state_province??"",postal_code:s.postal_code??"",country:s.country??""}},[s]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const y=p.useMemo(()=>e=>({code:void 0,name:e.name,description:e.description||void 0,venue_type:e.venue_type||void 0,capacity:e.capacity||void 0,parking_info:e.parking_info||void 0,accessibility:e.accessibility||void 0,amenities:e.amenities&&e.amenities.length>0?e.amenities:void 0,opening_hours:e.opening_hours||void 0,phone:e.phone||void 0,email:e.email||void 0,website:e.website||void 0,street_address:e.street_address||void 0,city:e.city||void 0,state_province:e.state_province||void 0,postal_code:e.postal_code||void 0,country:e.country||void 0}),[]),b=()=>{f(!1),x(null),t(!1)},w={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&s){h(!0);try{const e=y(g);await n(s.id,e),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},S={label:"Cancel",variant:"outline",disabled:u};return s?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:b,title:a,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:b,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(aV,{ref:o,defaultValues:v,onSubmit:async e=>{x(e),f(!0)},isLoading:u},`${s.id}-${l}`)})}),c.jsx(jE,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Venue Update",description:g?c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:"Are you sure you want to update this venue?"}):void 0,confirmAction:w,cancelAction:S})]}):null}function oV({onNavigateToVenue:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:s}){const a=SI(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(null),v=f.useRef(!1);f.useEffect(()=>{const e=v.current;n&&!e&&u(!0),v.current=!!n},[n]);const{data:y,isLoading:b,error:w}=jI(a,{filter:r,pagination:o}),S=function(e){const t=Vs();return Xs({mutationFn:t=>e.createVenue(t),onSuccess:()=>{t.invalidateQueries({queryKey:["venues"]})}})}(a),j=kI(a),C=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteVenue(t),onSuccess:()=>{t.invalidateQueries({queryKey:["venues"]})}})}(a),k=y?.data??[],N=y?.pagination,_=p.useCallback(()=>{t&&t(),u(!0)},[t]),P=p.useCallback(e=>{x(e),m(!0)},[]),E=p.useCallback(async e=>{try{await C.mutateAsync(e.id),Ek({title:"Success",description:"Venue deleted successfully"})}catch(wW){Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to delete venue",variant:"destructive"})}},[C]),R=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),A=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),T=p.useCallback(e=>{l({page:1,pageSize:e})},[]),M=p.useCallback(async e=>{try{await S.mutateAsync(e),Ek({title:"Success",description:"Venue created successfully"}),u(!1),s?.()}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to create venue",variant:"destructive"}),wW}},[S,s]),D=p.useCallback(async(e,t)=>{try{await j.mutateAsync({id:e,input:t}),Ek({title:"Success",description:"Venue updated successfully"}),m(!1),x(null)}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to update venue",variant:"destructive"}),wW}},[j]),L=p.useCallback(t=>{e?.(t.id)},[e]),F=p.useMemo(()=>{if(N)return{page:o.page,pageSize:o.pageSize,total:N.total,totalPages:N.totalPages}},[o,N]);return c.jsxs(c.Fragment,{children:[c.jsx(KU,{venues:k,loading:b,error:w,onVenueClick:L,onEdit:P,onDelete:E,onCreate:_,onSearch:R,pagination:F,onPageChange:A,onPageSizeChange:T}),c.jsx(rV,{open:d,onOpenChange:e=>{u(e),e||s?.()},onSubmit:M}),c.jsx(iV,{open:h&&!!g,onOpenChange:e=>{m(e),e||x(null)},onSubmit:D,venue:g})]})}function lV({venue:e,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a=!1,size:r="md"}){return c.jsx(YD,{entityId:e.id,entityType:"venue",defaultImageUrl:e.image_url||null,altText:e.name,FallbackIcon:Nf,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a,size:r})}function cV({className:e,organizers:t=[],loading:n=!1,error:s=null,pagination:a,onOrganizerClick:r,onEdit:i,onDelete:o,onCreate:l,onSearch:d,onPageChange:u,onPageSizeChange:h,customActions:m}){const p=Ua(),f=[OP({getDisplayName:e=>{const t=e.code;return"string"==typeof t&&t.trim().length>0?t:String(e.id)},getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:r,additionalOptions:{id:"code"}}),LP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",p.textSize),children:t??"-"})}}),LP({accessorKey:"description",header:"Description",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",p.textSize),children:t??"-"})}}),LP({accessorKey:"email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",p.textSize),children:t??"-"})}}),LP({accessorKey:"phone",header:"Phone",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",p.textSize),children:t??"-"})}}),LP({accessorKey:"city",header:"City",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",p.textSize),children:t??"-"})}})],g=t,x=a?{page:a.page,pageSize:a.pageSize,total:a.total,totalPages:a.totalPages}:void 0;return c.jsx("div",{className:al("w-full",e),children:c.jsx($P,{data:g,columns:f,useDefaultColumns:!1,title:"Organizers",description:"Manage and view organizers",onCreate:l,onSearch:d,manualPagination:Boolean(a&&u),serverPagination:x,onPageChange:u,onPageSizeChange:h,loading:n})})}function dV({className:e,data:t,loading:n=!1,error:s=null,showMetadata:a=!1,editable:r=!0,attachmentService:i,onEdit:o,customActions:l,onManageTags:d,onManageAttachments:u,profilePhotoComponent:h}){const[m,g]=p.useState("overview"),[x,v]=p.useState([]),[y,b]=p.useState(!1),w=p.useMemo(()=>i||new YP({apiClient:Fa,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[i]),S=p.useCallback(async()=>{if(t?.id&&w){b(!0);try{const e=await w.getAttachmentsForEntity("organizer",t.id,"document");v(e.items||[])}catch(e){v([])}finally{b(!1)}}},[t?.id,w]);p.useEffect(()=>{"documents"===m&&t?.id&&w&&S()},[m,t?.id,w,S]),f.useEffect(()=>{},[t?.tags]);const j=p.useMemo(()=>t&&(t?.name||t?.code||t?.id)||"",[t,t?.code]),C=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()};if(n)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(s)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",s.message]})})});if(!t)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No organizer selected"})})});const k=a,N=[{value:"overview",label:"Overview",icon:_f},{value:"documents",label:"Documents"+(x.length>0?` (${x.length})`:""),icon:ff}];return k&&N.splice(1,0,{value:"metadata",label:"Metadata",icon:lf}),c.jsx(bl,{className:al("p-6",e),children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[h||c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:t.logo?c.jsx("img",{src:t.logo,alt:j,className:"h-full w-full object-cover rounded-lg"}):c.jsx(_f,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:j}),t.code&&c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code]}),t.website&&c.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[c.jsx(bf,{className:"h-3 w-3"}),t.website]})]})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsx(kA,{actions:[...r&&o?[{id:"edit",label:"Edit",icon:c.jsx(Tg,{className:"h-3.5 w-3.5"}),onClick:()=>o(t)}]:[],...r&&d?[{id:"manage-tags",label:"Manage tags",icon:c.jsx(zg,{className:"h-3.5 w-3.5"}),onClick:()=>d(t),display:"dropdown-item"}]:[],...r&&u?[{id:"manage-documents",label:"Manage documents",icon:c.jsx(ff,{className:"h-3.5 w-3.5"}),onClick:()=>u(t),display:"dropdown-item"}]:[]],customActions:l?.(t)})})]}),c.jsx(HM,{tabs:N,value:m,onValueChange:e=>g(e),children:e=>c.jsxs("div",{className:"mt-0",children:["overview"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(QM,{title:"Contact & Location",icon:Jg,columns:3,children:[c.jsx(WM,{label:"Email",value:t.email,dataType:"email",linkType:"email",icon:Uf}),c.jsx(WM,{label:"Phone",value:t.phone,dataType:"phone",linkType:"tel",icon:lg}),c.jsx(WM,{label:"Website",value:t.website,dataType:"url",linkType:"external",icon:bf}),c.jsx(WM,{label:"Address",value:[t.address,t.city,t.country].filter(Boolean).join(", "),icon:Vf,span:"md:col-span-3"})]}),c.jsx(KM,{children:c.jsx(WM,{label:"Description",value:t.description,span:"md:col-span-3"})}),c.jsx(KM,{children:c.jsx(WM,{label:"Tags"+(t.tags&&t.tags.length>0?` (${t.tags.length})`:""),value:t.tags&&t.tags.length>0?c.jsx(GD,{tags:t.tags}):null,span:"md:col-span-3",hideIfEmpty:!1})}),c.jsxs(QM,{title:"System Information",icon:lf,columns:3,children:[c.jsx(WM,{label:"Created",value:t.created_at,render:e=>C(e)}),c.jsx(WM,{label:"Last Updated",value:t.updated_at,render:e=>C(e)})]})]}),"documents"===e&&c.jsx(qD,{documents:x,isLoading:y,onManageAttachments:r&&u?()=>u(t):void 0}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(bl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})})]})})}const uV=AM({code:PM().optional(),name:PM().min(1,"Name is required"),description:PM().optional(),email:PM().email("Invalid email").optional().or(TM("")),phone:PM().optional(),website:PM().url("Invalid URL").optional().or(TM("")),address:PM().optional(),city:PM().optional(),country:PM().optional(),logo:PM().url("Invalid URL").optional().or(TM(""))}).transform(e=>e),hV=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1,mode:s="create"},a){const{register:r,handleSubmit:i,watch:o,setValue:l,formState:{errors:d,isSubmitted:u}}=uA({resolver:QA(uV),defaultValues:{code:"",name:"",description:"",email:"",phone:"",website:"",address:"",city:"",country:"",logo:"",...e}}),h=p.useRef(null);p.useEffect(()=>{if(u&&Object.keys(d).length>0){const e=Object.keys(d)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):h.current&&h.current.scrollIntoView({behavior:"smooth",block:"center"})}},[d,u]);return c.jsxs("form",{ref:a,id:"organizer-form",onSubmit:i(async e=>{await t(e)}),className:"space-y-6",children:[c.jsxs("div",{className:al("grid grid-cols-1 md:grid-cols-2 gap-4"),ref:h,children:[c.jsxs(El,{"data-invalid":!!d.code,children:[c.jsx(Rl,{htmlFor:"code",children:"Code"}),c.jsx(kl,{id:"code",type:"text",placeholder:"Enter Code",...r("code"),disabled:n,className:al(d.code&&"border-destructive")}),c.jsx(Al,{children:d.code?.message})]}),c.jsxs(El,{"data-invalid":!!d.name,children:[c.jsxs(Rl,{htmlFor:"name",children:["Name ",c.jsx("span",{className:"text-destructive",children:"*"})]}),(()=>{const e=!1;return c.jsx(kl,{id:"name",type:"text",placeholder:"Enter Name",...r("name"),disabled:n||e,readOnly:e,tabIndex:void 0,"aria-disabled":void 0,"aria-readonly":void 0,title:void 0,className:al(e,d.name&&"border-destructive")})})(),c.jsx(Al,{children:d.name?.message})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs(El,{"data-invalid":!!d.email,children:[c.jsx(Rl,{htmlFor:"email",children:"Email"}),c.jsx(kl,{id:"email",type:"email",placeholder:"contact@example.com",...r("email"),disabled:n,className:al(d.email&&"border-destructive")}),c.jsx(Al,{children:d.email?.message})]}),c.jsxs(El,{"data-invalid":!!d.phone,children:[c.jsx(Rl,{htmlFor:"phone",children:"Phone"}),c.jsx(kl,{id:"phone",type:"tel",placeholder:"+1 234 567 890",...r("phone"),disabled:n,className:al(d.phone&&"border-destructive")}),c.jsx(Al,{children:d.phone?.message})]}),c.jsxs(El,{"data-invalid":!!d.website,children:[c.jsx(Rl,{htmlFor:"website",children:"Website"}),c.jsx(kl,{id:"website",type:"url",placeholder:"https://example.com",...r("website"),disabled:n,className:al(d.website&&"border-destructive")}),c.jsx(Al,{children:d.website?.message})]}),c.jsxs(El,{"data-invalid":!!d.logo,children:[c.jsx(Rl,{htmlFor:"logo",children:"Logo URL"}),c.jsx(kl,{id:"logo",type:"url",placeholder:"https://example.com/logo.png",...r("logo"),disabled:n,className:al(d.logo&&"border-destructive")}),c.jsx(Al,{children:d.logo?.message})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs(El,{className:"md:col-span-3","data-invalid":!!d.address,children:[c.jsx(Rl,{htmlFor:"address",children:"Address"}),c.jsx(kl,{id:"address",type:"text",placeholder:"Street Address",...r("address"),disabled:n,className:al(d.address&&"border-destructive")}),c.jsx(Al,{children:d.address?.message})]}),c.jsxs(El,{"data-invalid":!!d.city,children:[c.jsx(Rl,{htmlFor:"city",children:"City"}),c.jsx(kl,{id:"city",type:"text",placeholder:"City",...r("city"),disabled:n,className:al(d.city&&"border-destructive")}),c.jsx(Al,{children:d.city?.message})]}),c.jsxs(El,{"data-invalid":!!d.country,children:[c.jsx(Rl,{htmlFor:"country",children:"Country"}),c.jsx(kl,{id:"country",type:"text",placeholder:"Country",...r("country"),disabled:n,className:al(d.country&&"border-destructive")}),c.jsx(Al,{children:d.country?.message})]})]}),c.jsxs(El,{"data-invalid":!!d.description,children:[c.jsx(Rl,{htmlFor:"description",children:"Description"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsx(Tl,{id:"description",placeholder:"Enter description",...r("description"),disabled:n,className:al("flex-1 min-w-0",d.description&&"border-destructive")}),c.jsx(yA,{value:o("description")??"",onImproved:e=>l("description",e),disabled:n,className:"shrink-0"})]}),c.jsx(Al,{children:d.description?.message})]})]})]})});function mV({open:e,onOpenChange:t,onSubmit:n,title:s="Create Organizer",maxWidth:a="720px"}){const r=Ua(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=p.useMemo(()=>e=>({name:e.name}),[]),v=()=>{m(!1),g(null),t(!1)},y={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=x(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},b={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:v,title:s,maxWidth:a,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:v,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(hV,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create"},o)})}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Organizer Creation",description:f?c.jsx("p",{className:al("mb-3",r.textSizeSmall),children:"Are you sure you want to create this organizer?"}):void 0,confirmAction:y,cancelAction:b})]})}function pV({open:e,onOpenChange:t,onSubmit:n,organizer:s,title:a="Edit Organizer",maxWidth:r="720px"}){const i=Ua(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=p.useMemo(()=>{if(s)return{code:s.code??"",name:s.name??"",description:s.description??"",email:s.email??"",phone:s.phone??"",website:s.website??"",address:s.address??"",city:s.city??"",country:s.country??"",logo:s.logo??""}},[s]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const y=p.useMemo(()=>e=>({code:e.code||void 0,name:e.name,description:e.description||void 0,email:e.email||void 0,phone:e.phone||void 0,website:e.website||void 0,address:e.address||void 0,city:e.city||void 0,country:e.country||void 0,logo:e.logo||void 0}),[]),b=()=>{f(!1),x(null),t(!1)},w={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&s){h(!0);try{const e=y(g);await n(s.id,e),f(!1),x(null)}catch(e){f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},S={label:"Cancel",variant:"outline",disabled:u};return s?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:b,title:a,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:b,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(hV,{ref:o,defaultValues:v,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit"},`${s.id}-${l}`)})}),c.jsx(jE,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Organizer Update",description:g?c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:"Are you sure you want to update this organizer?"}):void 0,confirmAction:w,cancelAction:S})]}):null}function fV({onNavigateToOrganizer:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:s}){const a=QI(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),h=f.useRef(!1);f.useEffect(()=>{const e=h.current;n&&!e&&u(!0),h.current=!!n},[n]);const{data:m,isLoading:g,error:x}=YI(a,{filter:r,pagination:o}),v=function(e){const t=Vs();return Xs({mutationFn:t=>e.createOrganizer(t),onSuccess:()=>{t.invalidateQueries({queryKey:["organizers"]})}})}(a),y=m?.data??[],b=m?.pagination,w=p.useCallback(()=>{t&&t(),u(!0)},[t]),S=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),j=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),C=p.useCallback(e=>{l({page:1,pageSize:e})},[]),k=p.useCallback(async e=>{try{await v.mutateAsync(e),Ek({title:"Success",description:"Organizer created successfully"}),u(!1),s?.()}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to create organizer",variant:"destructive"}),wW}},[v,s]),N=p.useCallback(t=>{e?.(t.id)},[e]),_=p.useMemo(()=>{if(b)return{page:o.page,pageSize:o.pageSize,total:b.total,totalPages:b.totalPages}},[o,b]);return c.jsxs(c.Fragment,{children:[c.jsx(cV,{organizers:y,loading:g,error:x,onOrganizerClick:N,onCreate:w,onSearch:S,pagination:_,onPageChange:j,onPageSizeChange:C}),c.jsx(mV,{open:d,onOpenChange:e=>{u(e),e||s?.()},onSubmit:k})]})}function gV({open:e,onOpenChange:t,organizer:n,tagService:s,onSave:a,loading:r=!1}){return c.jsx(UD,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"organizer",initialTags:n.tags,tagService:s,onSave:a,loading:r})}function xV({open:e,onOpenChange:t,organizer:n,attachmentService:s,onSave:a,loading:r=!1}){return c.jsx(VD,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"organizer",attachmentService:s,onSave:a,loading:r})}function vV({organizer:e,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a=!1,size:r="md"}){return c.jsx(YD,{entityId:e.id,entityType:"organizer",defaultImageUrl:e.logo||null,altText:e.name,FallbackIcon:Mp,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a,size:r})}var yV=(e=>(e.STANDARD="STANDARD",e.VIP="VIP",e.WHEELCHAIR="WHEELCHAIR",e.COMPANION="COMPANION",e))(yV||{});const bV="/api/v1/ticketing/seats",wV={getByVenue:async(e,t=0,n=1e3)=>Fa.get(`${bV}?venue_id=${e}&skip=${t}&limit=${n}`,{requiresAuth:!0}),getByLayout:async(e,t=0,n=1e3)=>Fa.get(`${bV}?layout_id=${e}&skip=${t}&limit=${n}`,{requiresAuth:!0}),getById:async e=>Fa.get(`${bV}/${e}`,{requiresAuth:!0}),create:async e=>Fa.post(bV,e,{requiresAuth:!0}),update:async(e,t)=>Fa.put(`${bV}/${e}`,t,{requiresAuth:!0}),updateCoordinates:async(e,t,n,s)=>Fa.patch(`${bV}/${e}/coordinates`,{x_coordinate:t,y_coordinate:n,shape:s?JSON.stringify(s):void 0},{requiresAuth:!0}),delete:async e=>Fa.delete(`${bV}/${e}`,{requiresAuth:!0}),async bulkOperations(e){const t={seats:e.seats};e.fileId&&(t.file_id=e.fileId);const n=new URLSearchParams({venue_id:e.venueId});return e.layoutId&&n.append("layout_id",e.layoutId),Fa.post(`${bV}/bulk?${n.toString()}`,t,{requiresAuth:!0})},async bulkCreate(e,t,n,s){return this.bulkOperations({venueId:e,seats:t.map(e=>({...e,id:void 0})),fileId:n,layoutId:s})},deleteByVenue:async e=>Fa.delete(`${bV}/venue/${e}`,{requiresAuth:!0})};function SV(e){const t=null===e.shape||void 0===e.shape||""===e.shape?void 0:e.shape;return{id:e.id,tenant_id:e.tenant_id,layout_id:e.layout_id,name:e.name,x_coordinate:e.x_coordinate??void 0,y_coordinate:e.y_coordinate??void 0,file_id:e.file_id??void 0,image_url:e.image_url??void 0,canvas_background_color:e.canvas_background_color??void 0,shape:t,is_active:e.is_active,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date}}const jV="/api/v1/ticketing/sections",CV={getByLayout:async e=>((await Fa.get(`${jV}/layout/${e}`,{requiresAuth:!0})).items||[]).map(SV),getById:async e=>SV(await Fa.get(`${jV}/${e}`,{requiresAuth:!0})),create:async e=>SV(await Fa.post(jV,e,{requiresAuth:!0})),update:async(e,t)=>SV(await Fa.put(`${jV}/${e}`,t,{requiresAuth:!0})),delete:async e=>Fa.delete(`${jV}/${e}`,{requiresAuth:!0})};function kV({shape:e,fill:t,stroke:n,strokeWidth:s,imageWidth:a,imageHeight:r,opacity:i=1,dash:o}){const l={fill:t,stroke:n,strokeWidth:s,opacity:i,dash:o,perfectDrawEnabled:!1},d=e.type;if(!d||!Object.values(jU).includes(d))return c.jsx(W$,{...l,radius:12});switch(d){case jU.CIRCLE:{const t=e.radius?e.radius/100*Math.min(a,r):12,n=Math.max(1,Math.abs(t));return c.jsx(W$,{...l,radius:n})}case jU.RECTANGLE:{const t=e.width?e.width/100*a:24,n=e.height?e.height/100*r:24,s=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(n)),o=e.cornerRadius||0,d=Math.min(s,i)/2,u=Math.max(0,Math.min(Math.abs(o),d));return c.jsx(K$,{...l,x:-s/2,y:-i/2,width:s,height:i,cornerRadius:u})}case jU.ELLIPSE:{const t=e.width?e.width/100*a/2:12,n=e.height?e.height/100*r/2:12,s=Math.max(1,Math.abs(t)),i=Math.max(1,Math.abs(n));return c.jsx(Q$,{...l,radiusX:s,radiusY:i})}case jU.POLYGON:{if(!e.points||e.points.length<6){const e=12;return c.jsx(W$,{...l,radius:e})}const t=e.points.map((e,t)=>t%2==0?e/100*a:e/100*r);return c.jsx(Y$,{...l,points:t,closed:!0})}case jU.FREEFORM:{if(!e.points||e.points.length<4){const e=12;return c.jsx(W$,{...l,radius:e})}const t=e.points.map((e,t)=>t%2==0?e/100*a:e/100*r);return c.jsx(Y$,{...l,points:t,closed:!0,tension:0})}default:return c.jsx(W$,{...l,radius:12})}}const NV=f.memo(function({overlay:e,isSelected:t,onShapeOverlayClick:n,imageWidth:s,imageHeight:a,isPanning:r,isSpacePressed:i,selectedShapeTool:o,isPlacingSeats:l,isPlacingSections:d,percentageToStage:u,disableHoverAnimation:h=!1}){const[m,f]=p.useState(!1),g=p.useRef(null),x=p.useRef(null),{x:v,y:y}=u(e.x,e.y),b=t?.55:m?.45:.25,w=t?.15:m?.12:.08,S=t?"#1e40af":m?"#2563eb":"#3b82f6",j=t?3:m?2.5:2;return p.useEffect(()=>{if(h)return;const e=g.current;if(!e)return;const t=b;e.to({opacity:t,duration:.2,easing:YB.Easings.EaseInOut});e.getChildren().forEach(e=>{e instanceof YB.Shape&&e.to({strokeWidth:j,duration:.2,easing:YB.Easings.EaseInOut})})},[b,j,h]),p.useEffect(()=>{if(h)return;const e=x.current;e&&e.to({fontSize:m||t?13:12,shadowBlur:m||t?3:1,duration:.2,easing:YB.Easings.EaseInOut})},[m,t,h]),c.jsxs(G$,{x:v,y:y,rotation:e.shape.rotation||0,listening:!0,onClick:t=>{t.cancelBubble=!0,n?.(e.id),e.onClick?.()},onTap:t=>{t.cancelBubble=!0,n?.(e.id),e.onClick?.()},onMouseDown:e=>{e.cancelBubble=!0},onMouseEnter:t=>{const n=t.target.getStage()?.container();n&&(n.style.cursor="pointer"),f(!0),e.onHover?.()},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=r||i?"grab":o||l||d?"crosshair":"default"),f(!1)},children:[c.jsx(G$,{ref:g,children:c.jsx(kV,{shape:e.shape,fill:`rgba(59, 130, 246, ${w})`,stroke:S,strokeWidth:j,imageWidth:s,imageHeight:a,opacity:1,dash:e.isPlacement?[5,5]:void 0})}),e.label&&c.jsx(Z$,{ref:x,text:e.label,fontSize:12,fontFamily:"Arial",fill:m||t?"#1e40af":"#3b82f6",padding:4,align:"center",verticalAlign:"middle",backgroundFill:`rgba(255, 255, 255, ${m||t?.98:.9})`,backgroundStroke:S,backgroundStrokeWidth:m||t?1.5:1,cornerRadius:2,x:-20,y:-8,shadowBlur:m||t?3:1,shadowColor:"rgba(0, 0, 0, 0.1)"})]})});const _V=f.memo(function({seat:e,x:t,y:n,isSelected:s,isPlacingSeats:a,isPanning:r,isSpacePressed:i,isPlacingSections:o,selectedShapeTool:l,onSeatClick:d,onSeatDragEnd:u,onSeatDragMove:h,onShapeTransform:m,colors:f,imageWidth:g,imageHeight:x,readOnly:v=!1,disableHoverAnimation:y=!1,onSeatDragStart:b,useLowDetail:w=!1,forceDraggable:S=!1}){const j=p.useRef(null),C=p.useRef(null),k=p.useRef(null),[N,_]=p.useState(!1),P={type:jU.CIRCLE,radius:1.2},E=e.shape||P,R=p.useMemo(()=>JSON.stringify({type:E.type,width:E.width,height:E.height,radius:E.radius,points:E.points,rotation:E.rotation}),[E.type,E.width,E.height,E.radius,E.points,E.rotation]);p.useEffect(()=>{!v&&s&&C.current&&k.current&&(k.current.nodes([C.current]),k.current.forceUpdate(),k.current.getLayer()?.batchDraw())},[s,R,v]),p.useEffect(()=>{const e=C.current;e&&(s?e.clearCache():w||e.cache())},[s,w,R]),p.useEffect(()=>{if(y)return;const e=j.current;if(!e||s)return;const t=f.stroke;e.to({stroke:t,strokeWidth:N?2.5:2,duration:.2,easing:YB.Easings.EaseInOut})},[N,s,f.stroke,y]);const A=f.fill,T=f.stroke,M=s?2.5:2,D=s?.5:.35,L=p.useCallback(()=>{if(!C.current||!m)return;const t=C.current,n=t.scaleX(),s=t.scaleY(),a=t.rotation();t.scaleX(1),t.scaleY(1);const r={...E};if(E.type===jU.CIRCLE){const e=(E.radius?E.radius/100*Math.min(g,x):12)*Math.max(Math.abs(n),Math.abs(s)),t=.1;r.radius=Math.max(t,e/Math.min(g,x)*100)}else if(E.type===jU.RECTANGLE||E.type===jU.ELLIPSE){const e=E.width?E.width/100*g:30,t=E.height?E.height/100*x:20,a=.1,i=.1;if(r.width=Math.max(a,Math.abs(e*n)/g*100),r.height=Math.max(i,Math.abs(t*s)/x*100),E.type===jU.RECTANGLE&&r.cornerRadius){const e=Math.min(r.width/100*g,r.height/100*x)/2;r.cornerRadius=Math.min(r.cornerRadius,e/g*100)}}else if(E.type===jU.FREEFORM&&E.points){const e=Math.abs((n+s)/2);r.points=E.points.map(t=>t*e)}else if(E.type===jU.POLYGON&&E.points){const e=Math.abs((n+s)/2);r.points=E.points.map(t=>t*e)}r.rotation=a,m(e.id,r),setTimeout(()=>{k.current&&C.current&&(k.current.nodes([C.current]),k.current.getLayer()?.batchDraw())},0)},[E,g,x,m,e.id]);return c.jsxs(c.Fragment,{children:[c.jsx(G$,{ref:C,name:"seat-marker",x:t,y:n,rotation:E.rotation||0,draggable:!v&&(S||a&&s),onDragStart:!v&&b?()=>b(e.id):void 0,onDragMove:!v&&h?t=>h(e.id,t.target.x(),t.target.y()):void 0,onDragEnd:v?void 0:t=>u(e.id,t),onTransformEnd:v?void 0:L,onMouseDown:e=>{l!==jU.FREEFORM&&(e.cancelBubble=!0)},onClick:t=>{l!==jU.FREEFORM&&(t.cancelBubble=!0,d?.(e,{shiftKey:t.evt.shiftKey}))},onTap:t=>{l!==jU.FREEFORM&&(t.cancelBubble=!0,d?.(e,{shiftKey:t.evt.shiftKey}))},onMouseEnter:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=s?"move":"pointer"),_(!0)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=r||i?"grab":a||o?"crosshair":"pointer"),_(!1)},children:c.jsx(G$,{ref:j,children:w?c.jsx(W$,{radius:3,fill:A,stroke:T,strokeWidth:1,opacity:D,perfectDrawEnabled:!1}):c.jsx(kV,{shape:E,fill:A,stroke:T,strokeWidth:M,imageWidth:g,imageHeight:x,opacity:D})})}),s&&!v&&c.jsx(J$,{ref:k,boundBoxFunc:(e,t)=>Math.abs(t.width)<10||Math.abs(t.height)<10?e:t,rotateEnabled:!0,resizeEnabled:!0,borderEnabled:!0,borderStroke:"#3b82f6",borderStrokeWidth:2,anchorFill:"#ffffff",anchorStroke:"#3b82f6",anchorStrokeWidth:2,anchorSize:10,anchorCornerRadius:2,ignoreStroke:!1,keepRatio:!1,flipEnabled:!1,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],onMouseDown:e=>{e.cancelBubble=!0},onMouseMove:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();if(!k.current||!t||!n)return;const s=t.getPointerPosition();if(!s)return;const a=k.current.getLayer();if(!a||!C.current)return;const r=a.scaleX(),i=C.current,o=i.x(),l=i.y()-i.height()/2-25/r,c=o,d=12/r,u=Math.abs(s.x-c),h=Math.abs(s.y-l),m=u<d&&h<d+15/r;n.style.cursor=m?"grab":""},onMouseEnter:e=>{e.cancelBubble=!0},onMouseLeave:e=>{const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor="")},onMouseUp:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor="")}})]})});const PV=f.memo(function({section:e,x:t,y:n,isSelected:s,isPlacingSections:a,isPanning:r,isSpacePressed:i,isPlacingSeats:o,selectedShapeTool:l,onSectionClick:d,onSectionDoubleClick:u,onSectionDragEnd:h,onSectionDragMove:m,onShapeTransform:f,imageWidth:g,imageHeight:x,readOnly:v=!1,disableHoverAnimation:y=!1,onSectionDragStart:b,useLowDetail:w=!1,colors:S}){const j=p.useRef(null),C=p.useRef(null),k=p.useRef(null),[N,_]=p.useState(!1),P={type:jU.RECTANGLE,width:3,height:2},E=e.shape||P,R=p.useMemo(()=>e.shape?JSON.stringify({type:E.type,width:E.width,height:E.height,radius:E.radius,points:E.points,rotation:E.rotation}):null,[e.shape,E.type,E.width,E.height,E.radius,E.points,E.rotation]);p.useEffect(()=>{!v&&s&&e.shape&&j.current&&k.current&&(k.current.nodes([j.current]),k.current.forceUpdate(),k.current.getLayer()?.batchDraw())},[s,R,v]),p.useEffect(()=>{const t=j.current;t&&(s?t.clearCache():!w&&e.shape&&t.cache())},[s,w,e.shape,R]);const A=p.useCallback(()=>{if(!j.current||!f||!e.shape)return;const t=j.current,n=t.scaleX(),s=t.scaleY(),a=t.rotation();t.scaleX(1),t.scaleY(1);const r={...E};if(E.type===jU.CIRCLE){const e=(E.radius?E.radius/100*Math.min(g,x):12)*Math.max(Math.abs(n),Math.abs(s)),t=.1;r.radius=Math.max(t,e/Math.min(g,x)*100)}else if(E.type===jU.RECTANGLE||E.type===jU.ELLIPSE){const e=E.width?E.width/100*g:30,t=E.height?E.height/100*x:20,a=.1,i=.1;if(r.width=Math.max(a,Math.abs(e*n)/g*100),r.height=Math.max(i,Math.abs(t*s)/x*100),E.type===jU.RECTANGLE&&r.cornerRadius){const e=Math.min(r.width/100*g,r.height/100*x)/2;r.cornerRadius=Math.min(r.cornerRadius,e/g*100)}}else if(E.type===jU.FREEFORM&&E.points){const e=Math.abs((n+s)/2);r.points=E.points.map(t=>t*e)}else if(E.type===jU.POLYGON&&E.points){const e=Math.abs((n+s)/2);r.points=E.points.map(t=>t*e)}r.rotation=a,f(e.id,r),setTimeout(()=>{k.current&&j.current&&(k.current.nodes([j.current]),k.current.getLayer()?.batchDraw())},0)},[E,g,x,f,e.id,e.shape]);return p.useEffect(()=>{if(y)return;const e=C.current;if(!e||!a||s)return;const t=N?2.5:2;e.to({stroke:S.stroke,strokeWidth:t,duration:.2,easing:YB.Easings.EaseInOut})},[N,s,a,y,S.stroke]),c.jsxs(c.Fragment,{children:[c.jsxs(G$,{ref:j,x:t,y:n,rotation:E.rotation||0,draggable:!v&&a&&s,onDragStart:!v&&b?()=>b(e.id):void 0,onDragMove:!v&&m?t=>m(e.id,t.target.x(),t.target.y()):void 0,onDragEnd:v?void 0:t=>{if(!h)return;const n=t.target;h(e.id,n.x(),n.y())},onTransformEnd:!v&&e.shape?A:void 0,onMouseDown:e=>{l!==jU.FREEFORM&&(e.cancelBubble=!0)},onClick:t=>{if(l===jU.FREEFORM)return;t.cancelBubble=!0;const n=t.evt.shiftKey||!1;d?.(e,{shiftKey:n})},onDblClick:t=>{l!==jU.FREEFORM&&(t.cancelBubble=!0,u?.(e))},onTap:t=>{if(l===jU.FREEFORM)return;t.cancelBubble=!0;const n=t.evt?.shiftKey||!1;d?.(e,{shiftKey:n})},onMouseEnter:t=>{const n=t.target.getStage()?.container();n&&(n.style.cursor=s&&e.shape?"move":"pointer"),_(!0)},onMouseLeave:e=>{const t=e.target.getStage()?.container();t&&(t.style.cursor=r||i?"grab":o||a?"crosshair":"pointer"),_(!1)},children:[e.shape&&c.jsx(G$,{ref:C,children:w?c.jsx(W$,{radius:4,fill:S.fill,stroke:S.stroke,strokeWidth:1,opacity:s?.5:.35,perfectDrawEnabled:!1}):c.jsx(kV,{shape:E,fill:S.fill,stroke:S.stroke,strokeWidth:s?2.5:2,imageWidth:g,imageHeight:x,opacity:s?.5:.35})}),!e.shape&&c.jsx(W$,{radius:s?12:10,fill:S.fill,stroke:S.stroke,strokeWidth:s?2.5:2,x:0,y:0,opacity:s?.5:.35})]}),s&&!v&&e.shape&&c.jsx(J$,{ref:k,boundBoxFunc:(e,t)=>Math.abs(t.width)<10||Math.abs(t.height)<10?e:t,rotateEnabled:!0,resizeEnabled:!0,borderEnabled:!0,borderStroke:"#3b82f6",borderStrokeWidth:2,anchorFill:"#ffffff",anchorStroke:"#3b82f6",anchorStrokeWidth:2,anchorSize:10,anchorCornerRadius:2,ignoreStroke:!1,keepRatio:!1,flipEnabled:!1,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],onMouseDown:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();if(!k.current||!t||!n)return;const s=t.getPointerPosition();if(!s)return;const a=k.current.getLayer();if(!a||!j.current)return;const r=a.scaleX(),i=j.current,o=i.x(),l=i.y()-i.height()/2-25/r,c=o,d=12/r,u=Math.abs(s.x-c),h=Math.abs(s.y-l);u<d&&h<d+15/r&&(n.style.cursor="grabbing")},onMouseMove:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();if(!k.current||!t||!n)return;const s=t.getPointerPosition();if(!s)return;const a=k.current.getLayer();if(!a||!j.current)return;const r=a.scaleX(),i=j.current,o=i.x(),l=i.y()-i.height()/2-25/r,c=o,d=12/r,u=Math.abs(s.x-c),h=Math.abs(s.y-l),m=u<d&&h<d+15/r;n.style.cursor=m?"grab":""},onMouseEnter:e=>{e.cancelBubble=!0},onMouseLeave:e=>{const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor="")},onMouseUp:e=>{e.cancelBubble=!0;const t=e.target.getStage(),n=t?.container();n&&(n.style.cursor="")}})]})});function EV({imageUrl:e,seats:t,sections:n=[],selectedSeatId:s,selectedSectionId:a,selectedSeatIds:r,selectedSectionIds:i,onMarkersInRect:o,isPlacingSeats:l,isPlacingSections:d,readOnly:u=!1,zoomLevel:h,panOffset:m,onSeatClick:f,onSectionClick:g,onSectionDoubleClick:x,onSectionDragEnd:v,onSeatDragEnd:y,onSeatShapeTransform:b,onSectionShapeTransform:w,onImageClick:S,onDeselect:j,onShapeDraw:C,onShapeOverlayClick:k,onWheel:N,onPanStart:_,onPan:P,onPanEnd:E,containerWidth:R,containerHeight:A,venueType:T,selectedShapeTool:M,shapeOverlays:D=[],selectedOverlayId:L,canvasBackgroundColor:F="#e5e7eb",showGrid:I=!1,gridSize:O=5}){const[z,B]=p.useState(null),[$,U]=p.useState(!0),V=p.useRef(null),q=p.useRef(null),[H,G]=p.useState(!1),[K,W]=p.useState({x:0,y:0}),[Q,Y]=p.useState(!1),[X,Z]=p.useState(!1),[J,ee]=p.useState(null),[te,ne]=p.useState(null),[se,ae]=p.useState([]),[re,ie]=p.useState(null),oe=p.useRef(null),[le,ce]=p.useState(null),[de,ue]=p.useState(null),[he,me]=p.useState(null),[pe,fe]=p.useState(null),[ge,xe]=p.useState(null),ve=p.useMemo(()=>r&&r.length>0?new Set(r):new Set(s?[s]:[]),[r,s]),ye=p.useMemo(()=>i&&i.length>0?new Set(i):new Set(a?[a]:[]),[i,a]),be=p.useRef(!1);p.useEffect(()=>{const e=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("input, textarea, [contenteditable]");"Delete"!==e.key&&"Backspace"!==e.key||n?"Space"!==e.code||e.repeat||n||(e.preventDefault(),Y(!0)):M===jU.FREEFORM&&se.length>0&&(e.preventDefault(),ae(e=>{const t=e.slice(0,-1);return 0===t.length&&ie(null),t}))},t=e=>{const t=e.target,n="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest("input, textarea, [contenteditable]");"Space"!==e.code||n||(e.preventDefault(),Y(!1),H&&(G(!1),E?.()))};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[H,E,M,se]),p.useEffect(()=>{if(!e)return B(null),void U(!1);if(z&&(z.src===e||z.src.endsWith(e)))return void U(!1);U(!0);const t=new window.Image;t.crossOrigin="anonymous";return t.onload=()=>{B(t),U(!1)},t.onerror=()=>{B(null),U(!1)},t.src=e,()=>{t.onload=null,t.onerror=null}},[e]);const we=e=>{const t=(e=>{switch(e){case yV.VIP:return{fill:"#fbbf24",stroke:"#d97706"};case yV.WHEELCHAIR:return{fill:"#34d399",stroke:"#059669"};default:return{fill:"#60a5fa",stroke:"#2563eb"}}})(e.seat.seatType),n=e.shape?.fillColor?.trim(),s=e.shape?.strokeColor?.trim();return{fill:n||t.fill,stroke:s||t.stroke}},Se=e=>{const t=e.shape?.fillColor?.trim(),n=e.shape?.strokeColor?.trim();return{fill:t||"#60a5fa",stroke:n||"#2563eb"}},je=!!z&&!!z.width&&!!z.height,Ce=R>0?R:800,ke=A>0?A:600,Ne=je?z.height/z.width:ke/Ce,_e=ke/Ce,Pe=je&&Ne>_e?ke/Ne:Ce,Ee=je&&Ne>_e?ke:Ce*Ne,Re=je?(Ce-Pe)/2:0,Ae=je?(ke-Ee)/2:0,Te=p.useCallback((e,t)=>({x:Re+e/100*Pe,y:Ae+t/100*Ee}),[Re,Ae,Pe,Ee]),Me=p.useCallback((e,t)=>({x:(e-Re)/Pe*100,y:(t-Ae)/Ee*100}),[Re,Ae,Pe,Ee]),De=p.useCallback((e,t)=>{const n=Ce/2,s=ke/2,a=e-(n+m.x),r=t-(s+m.y);return{x:(a/h+n-Re)/Pe*100,y:(r/h+s-Ae)/Ee*100}},[Ce,ke,Re,Ae,Pe,Ee,m,h]),Le=p.useCallback((e,t)=>{const n=t.target,{x:s,y:a}=Me(n.x(),n.y());ce(null),me(null),y(e,s,a)},[y,Me]),Fe=p.useCallback(e=>{ce(e);const n=t.find(t=>t.id===e);n&&me({x:n.x,y:n.y})},[t]),Ie=p.useCallback((e,t,n)=>{const{x:s,y:a}=Me(t,n);me({x:s,y:a})},[Me]),Oe=p.useCallback((e,t,n)=>{ue(null),me(null);const{x:s,y:a}=Me(t,n);v?.(e,s,a)},[v,Me]),ze=p.useCallback(e=>{ue(e);const t=n.find(t=>t.id===e);t&&me({x:t.x,y:t.y})},[n]),Be=p.useCallback((e,t,n)=>{const{x:s,y:a}=Me(t,n);me({x:s,y:a})},[Me]),$e=R>0?R:800,Ue=A>0?A:600,Ve=$e/2,qe=Ue/2,He=Pe,Ge=Ee,Ke=Re,We=Ae,{visibleSeats:Qe,visibleSections:Ye,visibleShapeOverlays:Xe}=p.useMemo(()=>{if(t.length+n.length+D.length<40)return{visibleSeats:t,visibleSections:n,visibleShapeOverlays:D};const e=.2,s=Ve-(Ve+m.x)/h-$e*e/h,a=Ve+($e-Ve-m.x)/h+$e*e/h,r=qe-(qe+m.y)/h-Ue*e/h,i=qe+(Ue-qe-m.y)/h+Ue*e/h,o=(e,t)=>{const n=Ke+e/100*He,o=We+t/100*Ge;return n>=s&&n<=a&&o>=r&&o<=i};return{visibleSeats:t.filter(e=>!!ve.has(e.id)||o(e.x,e.y)),visibleSections:n.filter(e=>!!ye.has(e.id)||o(e.x,e.y)),visibleShapeOverlays:D.filter(e=>L===e.id||o(e.x,e.y))}},[t,n,D,m,h,$e,Ue,Ve,qe,Ke,We,He,Ge,ve,ye,L]),Ze=Qe.length+Ye.length+Xe.length>100,Je=h<.4,et={x:Ve+m.x,y:qe+m.y,scaleX:h,scaleY:h,offsetX:Ve,offsetY:qe},tt=Qe.filter(e=>e.id!==s&&e.id!==le),nt=Qe.find(e=>e.id===s),st=Qe.find(e=>e.id===le),at=Ye.filter(e=>e.id!==a&&e.id!==de),rt=Ye.find(e=>e.id===a),it=Ye.find(e=>e.id===de);return!e||!$&&z&&z.width&&z.height?c.jsxs(tU,{ref:V,width:$e,height:Ue,onWheel:e=>{e.evt.preventDefault(),N?.(e,Q)},onTouchStart:e=>{e.evt&&e.evt.preventDefault()},onMouseDown:e=>{be.current=!1,e.evt&&e.evt.preventDefault();const t=e.target.getStage();if(!t)return;const n=t.getPointerPosition();if(!n)return;if(Q)return G(!0),W(n),void _?.();const s=e.target,a="Transformer"===s.getType();let r=s,i=!1;for(;r;){if("Transformer"===r.getType()){i=!0;break}r=r.getParent()}const l="seat-marker"===s.name()||"section-marker"===s.name(),c="seat-marker"===s.getParent()?.name()||"section-marker"===s.getParent()?.name();let d=s.getParent(),h=!1;for(;d;){if("seat-marker"===d.name()||"section-marker"===d.name()){h=!0;break}d=d.getParent()}const m=a||i||l||c||h;if(!u&&o&&!M&&!X&&!m)return fe(n),void xe(n);if((ve.size>0||ye.size>0)&&m)return Z(!1),ee(null),void ne(null);if(M&&C&&M!==jU.FREEFORM){const e=De(n.x,n.y);return Z(!0),ee(e),void ne(e)}},onMouseMove:e=>{const t=e.target.getStage();if(!t)return;const n=t.getPointerPosition();if(!n)return;if(pe)return void xe(n);const s=e.target,a="Transformer"===s.getType();let r=s,i=!1;for(;r;){if("Transformer"===r.getType()){i=!0;break}r=r.getParent()}const o="seat-marker"===s.name()||"section-marker"===s.name(),l="seat-marker"===s.getParent()?.name()||"section-marker"===s.getParent()?.name();let c=s.getParent(),d=!1;for(;c;){if("seat-marker"===c.name()||"section-marker"===c.name()){d=!0;break}c=c.getParent()}const u=(ve.size>0||ye.size>0)&&(a||i||o||l||d);if(H&&Q){const e={x:n.x-K.x,y:n.y-K.y};W(n),P?.(e)}else if(!u&&X&&J&&M&&M!==jU.FREEFORM){const e=De(n.x,n.y);ne(e)}else if(!u&&M===jU.FREEFORM&&se.length>0){const e=De(n.x,n.y);ie(e)}},onMouseUp:e=>{if(H)return G(!1),void E?.();if(pe&&ge&&o){const e=Math.min(pe.x,ge.x),s=Math.min(pe.y,ge.y),a=Math.max(pe.x,ge.x),r=Math.max(pe.y,ge.y),i=Me(e,s),l=Me(a,r),c=Math.min(i.x,l.x),d=Math.max(i.x,l.x),u=Math.min(i.y,l.y),h=Math.max(i.y,l.y),m=t.filter(e=>e.x>=c&&e.x<=d&&e.y>=u&&e.y<=h).map(e=>e.id),p=n.filter(e=>e.x>=c&&e.x<=d&&e.y>=u&&e.y<=h).map(e=>e.id);return o(m,p),fe(null),void xe(null)}const s=e.target,a="Transformer"===s.getType();let r=s,i=!1;for(;r;){if("Transformer"===r.getType()){i=!0;break}r=r.getParent()}const l="seat-marker"===s.name()||"section-marker"===s.name(),c="seat-marker"===s.getParent()?.name()||"section-marker"===s.getParent()?.name();let d=s.getParent(),u=!1;for(;d;){if("seat-marker"===d.name()||"section-marker"===d.name()){u=!0;break}d=d.getParent()}if((ve.size>0||ye.size>0)&&(a||i||l||c||u))return Z(!1),ee(null),void ne(null);if(X&&J&&M&&C){if(M!==jU.FREEFORM&&te){const t=J.x,n=J.y,s=te.x,a=te.y;if(Math.sqrt(Math.pow(s-t,2)+Math.pow(a-n,2))>=.3){e.cancelBubble=!0,be.current=!0;const r=1.5,i=Math.max(r,Math.abs(s-t)),o=Math.max(r,Math.abs(a-n)),l=(t+s)/2,c=(n+a)/2;let d;if(M===jU.CIRCLE){const e=Math.max(i,o)/2;d={type:jU.CIRCLE,radius:Math.max(.8,e)},C(d,l,c)}else if(M===jU.RECTANGLE)d={type:jU.RECTANGLE,width:Math.max(1,i),height:Math.max(1,o),cornerRadius:2},C(d,l,c,i,o);else if(M===jU.ELLIPSE)d={type:jU.ELLIPSE,width:Math.max(1,i),height:Math.max(1,o)},C(d,l,c,i,o);else if(M===jU.POLYGON){const e=i/2,t=o/2,n=[-1,-1,1,-1,1.5,0,1,1,-1,1,-1.5,0].map((n,s)=>s%2==0?n*e:n*t);d={type:jU.POLYGON,points:n},C(d,l,c)}}}Z(!1),ee(null),ne(null)}},onMouseLeave:()=>{H&&(G(!1),E?.()),fe(null),xe(null)},style:{display:"block",willChange:"transform",cursor:H||Q?"grab":M?"crosshair":"pointer"},children:[I&&O>0&&c.jsx(H$,{...et,listening:!1,children:(()=>{const e=[];for(let t=O;t<100;t+=O){const n=t/100*R;e.push({x1:n,y1:0,x2:n,y2:A,isVertical:!0})}for(let t=O;t<100;t+=O){const n=t/100*A;e.push({x1:0,y1:n,x2:R,y2:n,isVertical:!1})}return e.map((e,t)=>c.jsx(Y$,{points:[e.x1,e.y1,e.x2,e.y2],stroke:"rgba(100, 150, 255, 0.2)",strokeWidth:1,perfectDrawEnabled:!1,dash:[2,2]},`grid-line-${t}`))})()}),c.jsx(H$,{ref:q,...et,listening:!0,children:z?c.jsx(X$,{name:"background-image",image:z,x:Ke,y:We,width:He,height:Ge,listening:!0,onMouseMove:e=>{if(M===jU.FREEFORM&&se.length>0){const t=e.target.getStage()?.getPointerPosition();if(t){const e=De(t.x,t.y);ie(e)}}},onClick:e=>{if(be.current)return void(be.current=!1);if(M===jU.FREEFORM&&C){e.cancelBubble=!0;const t=e.target.getStage()?.getPointerPosition();if(t){const e=De(t.x,t.y);if(se.length>=2){const t=se[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...se,t],n=e.reduce((e,t)=>e+t.x,0),s=e.reduce((e,t)=>e+t.y,0),a=n/e.length,r=s/e.length,i=[];e.forEach(e=>{i.push(e.x-a,e.y-r)});const o={type:jU.FREEFORM,points:i};return C(o,a,r),ae([]),void ie(null)}}ae(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}return}const t=e.target;if(!t||"background-image"!==t.name()||M||X||j?.(),S){const t=e.target.getStage()?.getPointerPosition();if(t){const n=De(t.x,t.y);S(e,n)}else S(e)}},onDblClick:e=>{if(M===jU.FREEFORM&&se.length>=2&&C){e.cancelBubble=!0;const t=[...se,se[0]],n=t.reduce((e,t)=>e+t.x,0),s=t.reduce((e,t)=>e+t.y,0),a=n/t.length,r=s/t.length,i=[];t.forEach(e=>{i.push(e.x-a,e.y-r)});const o={type:jU.FREEFORM,points:i};C(o,a,r),ae([]),ie(null)}},onTap:e=>{const t=e.target;!t||"background-image"!==t.name()||M||X||j?.()}}):c.jsx(K$,{name:"background-image",x:Ke,y:We,width:He,height:Ge,fill:F,listening:!0,onMouseMove:e=>{if(M===jU.FREEFORM&&se.length>0){const t=e.target.getStage()?.getPointerPosition();if(t){const e=De(t.x,t.y);ie(e)}}},onClick:e=>{if(be.current)return void(be.current=!1);if(M===jU.FREEFORM&&C){e.cancelBubble=!0;const t=e.target.getStage()?.getPointerPosition();if(t){const e=De(t.x,t.y);if(se.length>=2){const t=se[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...se,t],n=e.reduce((e,t)=>e+t.x,0),s=e.reduce((e,t)=>e+t.y,0),a=n/e.length,r=s/e.length,i=[];e.forEach(e=>{i.push(e.x-a,e.y-r)});const o={type:jU.FREEFORM,points:i};return C(o,a,r),ae([]),void ie(null)}}ae(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}return}const t=e.target;if(!t||"background-image"!==t.name()||M||X||j?.(),S){const t=e.target.getStage()?.getPointerPosition();if(t){const n=De(t.x,t.y);S(e,n)}else S(e)}},onDblClick:e=>{if(M===jU.FREEFORM&&se.length>=2&&C){e.cancelBubble=!0;const t=[...se,se[0]],n=t.reduce((e,t)=>e+t.x,0),s=t.reduce((e,t)=>e+t.y,0),a=n/t.length,r=s/t.length,i=[];t.forEach(e=>{i.push(e.x-a,e.y-r)});const o={type:jU.FREEFORM,points:i};C(o,a,r),ae([]),ie(null)}},onTap:e=>{const t=e.target;!t||"background-image"!==t.name()||M||X||j?.()}})}),c.jsxs(H$,{...et,listening:!0,children:[tt.map(e=>{const{x:t,y:n}=Te(e.x,e.y),s=we(e);return c.jsx(_V,{seat:e,x:t,y:n,isSelected:ve.has(e.id),isPlacingSeats:l,isPanning:H,isSpacePressed:Q,isPlacingSections:d,selectedShapeTool:M,onSeatClick:f,onSeatDragStart:Fe,onSeatDragEnd:Le,onShapeTransform:b,colors:s,imageWidth:He,imageHeight:Ge,readOnly:u,disableHoverAnimation:Ze,useLowDetail:Je},e.id)}),"large"===T&&at.map(e=>{const{x:t,y:n}=Te(e.x,e.y);return c.jsx(PV,{section:e,x:t,y:n,isSelected:ye.has(e.id),isPlacingSections:d,isPanning:H,isSpacePressed:Q,isPlacingSeats:l,onSectionClick:g,onSectionDoubleClick:x,onSectionDragEnd:Oe,onSectionDragStart:ze,selectedShapeTool:M,onShapeTransform:w,colors:Se(e),imageWidth:He,imageHeight:Ge,readOnly:u,disableHoverAnimation:Ze,useLowDetail:Je},e.id)}),Xe.map(e=>{const t=L===e.id;return c.jsx(NV,{overlay:e,isSelected:t,onShapeOverlayClick:k,imageWidth:He,imageHeight:Ge,isPanning:H,isSpacePressed:Q,selectedShapeTool:M,isPlacingSeats:l,isPlacingSections:d,percentageToStage:Te,disableHoverAnimation:Ze},e.id)})]}),c.jsxs(H$,{...et,listening:!0,children:[nt&&c.jsx(c.Fragment,{children:(()=>{const e=le===nt.id&&he?he:{x:nt.x,y:nt.y},{x:t,y:n}=Te(e.x,e.y),s=we(nt);return c.jsx(_V,{seat:nt,x:t,y:n,isSelected:!0,isPlacingSeats:l,isPanning:H,isSpacePressed:Q,isPlacingSections:d,selectedShapeTool:M,onSeatClick:f,onSeatDragStart:Fe,onSeatDragMove:Ie,onSeatDragEnd:Le,onShapeTransform:b,colors:s,imageWidth:He,imageHeight:Ge,readOnly:u,disableHoverAnimation:Ze,useLowDetail:!1},nt.id)})()}),"large"===T&&rt&&(()=>{const e=de===rt.id&&he?he:{x:rt.x,y:rt.y},{x:t,y:n}=Te(e.x,e.y);return c.jsx(PV,{section:rt,x:t,y:n,isSelected:!0,isPlacingSections:d,isPanning:H,isSpacePressed:Q,isPlacingSeats:l,onSectionClick:g,onSectionDoubleClick:x,onSectionDragEnd:Oe,onSectionDragMove:Be,onSectionDragStart:ze,selectedShapeTool:M,onShapeTransform:w,colors:Se(rt),imageWidth:He,imageHeight:Ge,readOnly:u,disableHoverAnimation:Ze,useLowDetail:!1},rt.id)})()]}),c.jsxs(H$,{...et,listening:!0,children:[st&&(!nt||nt.id!==le)&&(()=>{const e=he??{x:st.x,y:st.y},{x:t,y:n}=Te(e.x,e.y),s=we(st);return c.jsx(_V,{seat:st,x:t,y:n,isSelected:!1,isPlacingSeats:l,isPanning:H,isSpacePressed:Q,isPlacingSections:d,selectedShapeTool:M,onSeatClick:f,onSeatDragStart:Fe,onSeatDragMove:Ie,onSeatDragEnd:Le,onShapeTransform:b,colors:s,imageWidth:He,imageHeight:Ge,readOnly:u,disableHoverAnimation:Ze,useLowDetail:!1,forceDraggable:!0},st.id)})(),"large"===T&&it&&(!rt||rt.id!==de)&&(()=>{const e=he??{x:it.x,y:it.y},{x:t,y:n}=Te(e.x,e.y);return c.jsx(PV,{section:it,x:t,y:n,isSelected:!1,isPlacingSections:d,isPanning:H,isSpacePressed:Q,isPlacingSeats:l,onSectionClick:g,onSectionDoubleClick:x,onSectionDragEnd:Oe,onSectionDragMove:Be,onSectionDragStart:ze,selectedShapeTool:M,onShapeTransform:w,colors:Se(it),imageWidth:He,imageHeight:Ge,readOnly:u,disableHoverAnimation:Ze,useLowDetail:!1,forceDraggable:!0},it.id)})()]}),c.jsxs(H$,{...et,listening:!0,onClick:e=>{if(M===jU.FREEFORM&&C){const t=e.target;if(t&&("seat-marker"===t.name()||"section-marker"===t.name()))return;e.cancelBubble=!0;const n=e.target.getStage()?.getPointerPosition();if(n){const e=De(n.x,n.y);if(se.length>=2){const t=se[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...se,t],n=e.reduce((e,t)=>e+t.x,0),s=e.reduce((e,t)=>e+t.y,0),a=n/e.length,r=s/e.length,i=[];e.forEach(e=>{i.push(e.x-a,e.y-r)});const o={type:jU.FREEFORM,points:i};return C(o,a,r),ae([]),void ie(null)}}ae(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}}},children:[c.jsx(K$,{x:Ke,y:We,width:He,height:Ge,fill:"transparent",listening:!1,onMouseMove:e=>{if(M===jU.FREEFORM&&se.length>0){const t=e.target.getStage()?.getPointerPosition();if(t){const e=De(t.x,t.y);ie(e)}}},onClick:e=>{if(be.current)return void(be.current=!1);if(M===jU.FREEFORM&&C){e.cancelBubble=!0;const t=e.target.getStage()?.getPointerPosition();if(t){const e=De(t.x,t.y);if(se.length>=2){const t=se[0];if(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<1.5){const e=[...se,t],n=e.reduce((e,t)=>e+t.x,0),s=e.reduce((e,t)=>e+t.y,0),a=n/e.length,r=s/e.length,i=[];e.forEach(e=>{i.push(e.x-a,e.y-r)});const o={type:jU.FREEFORM,points:i};return C(o,a,r),ae([]),void ie(null)}}ae(t=>{if(0===t.length)return[e];const n=t[t.length-1];return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))>=.1?[...t,e]:t})}return}const t=e.target;if(!t||"background-image"!==t.name()||M||X||j?.(),S){const t=e.target.getStage()?.getPointerPosition();if(t){const n=De(t.x,t.y);S(e,n)}else S(e)}},onDblClick:e=>{if(M===jU.FREEFORM&&se.length>=2&&C){e.cancelBubble=!0;const t=[...se,se[0]],n=t.reduce((e,t)=>e+t.x,0),s=t.reduce((e,t)=>e+t.y,0),a=n/t.length,r=s/t.length,i=[];t.forEach(e=>{i.push(e.x-a,e.y-r)});const o={type:jU.FREEFORM,points:i};C(o,a,r),ae([]),ie(null)}},onTap:e=>{const t=e.target;!t||"background-image"!==t.name()||M||X||j?.()}}),M===jU.FREEFORM&&se.length>0&&(()=>{const e=[];for(let t=0;t<se.length-1;t++){const n=se[t],s=se[t+1],{x:a,y:r}=Te(n.x,n.y),{x:i,y:o}=Te(s.x,s.y);e.push({points:[0,0,i-a,o-r],x:a,y:r})}if(re&&se.length>0){const t=se[se.length-1],{x:n,y:s}=Te(t.x,t.y),{x:a,y:r}=Te(re.x,re.y);e.push({points:[0,0,a-n,r-s],x:n,y:s})}return c.jsx(c.Fragment,{children:e.map((t,n)=>c.jsx(Y$,{points:t.points,x:t.x,y:t.y,stroke:"#3b82f6",strokeWidth:2.5,opacity:.8,dash:n===e.length-1?[5,5]:void 0},`freeform-preview-${n}`))})})(),X&&J&&M&&M!==jU.FREEFORM&&(()=>{if(te){const e=J.x,t=J.y,n=te.x,s=te.y,a=1.5,r=Math.max(a,Math.abs(n-e)),i=Math.max(a,Math.abs(s-t)),o=(e+n)/2,l=(t+s)/2,{x:d,y:u}=Te(o,l);let h;if(M===jU.CIRCLE){const e=Math.max(r,i)/2;h={type:jU.CIRCLE,radius:Math.max(.8,e)}}else if(M===jU.RECTANGLE)h={type:jU.RECTANGLE,width:Math.max(1,r),height:Math.max(1,i),cornerRadius:2};else if(M===jU.ELLIPSE)h={type:jU.ELLIPSE,width:Math.max(1,r),height:Math.max(1,i)};else if(M===jU.POLYGON){const e=r/2,t=i/2,n=[-1,-1,1,-1,1.5,0,1,1,-1,1,-1.5,0].map((n,s)=>s%2==0?n*e:n*t);h={type:jU.POLYGON,points:n}}else h={type:jU.POLYGON,points:[-1,-1,1,-1,1.5,0,1,1,-1,1,-1.5,0]};return c.jsx(G$,{ref:oe,x:d,y:u,children:c.jsx(kV,{shape:h,fill:"rgba(59, 130, 246, 0.15)",stroke:"#3b82f6",strokeWidth:2.5,imageWidth:He,imageHeight:Ge,opacity:.8})})}return null})()]}),pe&&ge&&c.jsx(H$,{listening:!1,children:c.jsx(K$,{x:Math.min(pe.x,ge.x),y:Math.min(pe.y,ge.y),width:Math.abs(ge.x-pe.x),height:Math.abs(ge.y-pe.y),stroke:"#2563eb",strokeWidth:2,dash:[6,4],fill:"rgba(37, 99, 235, 0.08)"})})]}):c.jsxs("div",{style:{width:$e,height:Ue,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),c.jsx("p",{style:{color:"#6b7280",fontSize:"14px"},children:"Loading image..."})]}),c.jsx("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})}const RV=AM({name:PM().min(1,"Section name is required")}),AV=AM({section:PM().min(1,"Section is required"),sectionId:PM().optional(),row:PM().min(1,"Row is required"),seatNumber:PM().min(1,"Seat number is required"),seatType:MM(yV,{errorMap:()=>({message:"Seat type is required"})})});function TV({id:e,label:t,isUploading:n=!1,onFileSelect:s}){return c.jsx(bl,{className:"border-2 border-dashed border-gray-200 bg-gray-50/50 hover:bg-gray-100/50 transition-colors",children:c.jsxs(Dl,{htmlFor:e,className:"flex flex-col items-center justify-center w-full h-full py-12 cursor-pointer gap-4",children:[c.jsx("div",{className:"bg-white p-4 rounded-full shadow-sm ring-1 ring-gray-200/50",children:c.jsx(Qg,{className:"h-6 w-6 text-gray-500"})}),c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("span",{className:"text-base font-medium text-gray-900 block",children:n?"Uploading...":t}),c.jsx("p",{className:"text-sm text-gray-500",children:"Click to select an image from your device"})]}),c.jsx(kl,{id:e,type:"file",accept:"image/*",onChange:s,className:"hidden",disabled:n})]})})}function MV({open:e,onOpenChange:t,form:n,editingSectionId:s,isCreating:a,isUpdating:r,onSave:i,onCancel:o}){const l=n.watch("name"),d=(l?.trim()||"").length>0;f.useEffect(()=>{e&&void 0!==l&&n.trigger("name")},[e,l,n]);const u=d;return c.jsx(uP,{open:e,onOpenChange:t,children:c.jsxs(fP,{side:"right",className:"flex flex-col h-full",children:[c.jsxs(gP,{children:[c.jsx(vP,{children:s?"Edit Section":"New Section"}),c.jsx(yP,{children:s?"Update the section details":"Create a new section for your layout"})]}),c.jsx("div",{className:"mt-6 flex-1  min-h-0",children:c.jsxs("div",{className:"px-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx(Dl,{htmlFor:"section-name",children:"Section Name"}),c.jsx(vR,{name:"name",control:n.control,render:({field:e})=>c.jsx(kl,{...e,id:"section-name",className:"mt-2",placeholder:"e.g., Section A, VIP Area, General Admission",autoFocus:!0})}),n.formState.errors.name&&c.jsx("p",{className:"text-sm text-destructive mt-1",children:n.formState.errors.name.message})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(vl,{variant:"outline",onClick:o,className:"flex-1",children:"Cancel"}),c.jsx(vl,{onClick:i,disabled:a||r||!u,className:"flex-1",children:s?"Update":"Create"})]})]})})]})})}function DV({viewingSeat:e,isOpen:t,onOpenChange:n,isPlacingSeats:s,isDeleting:a,onEdit:r,onDelete:i}){return e?c.jsx(uP,{open:t,onOpenChange:n,children:c.jsxs(fP,{side:"right",className:"w-[400px] sm:w-[540px] flex flex-col",children:[c.jsxs(gP,{children:[c.jsx(vP,{children:"Seat Information"}),c.jsx(yP,{children:s?"View seat details":"View seat details (read-only)"})]}),c.jsxs("div",{className:"mt-6 flex-1 min-h-0 space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Section"}),c.jsx("div",{className:"mt-1 text-sm font-medium",children:e.seat.section})]}),c.jsxs("div",{children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Row"}),c.jsx("div",{className:"mt-1 text-sm font-medium",children:e.seat.row})]}),c.jsxs("div",{children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Seat Number"}),c.jsx("div",{className:"mt-1 text-sm font-medium",children:e.seat.seatNumber})]}),c.jsxs("div",{children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Type"}),c.jsx("div",{className:"mt-1 text-sm font-medium",children:e.seat.seatType})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Position"}),c.jsxs("div",{className:"mt-1 text-sm font-medium",children:["X: ",e.x.toFixed(2),"%, Y:"," ",e.y.toFixed(2),"%"]})]})]}),c.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[s&&c.jsxs(vl,{variant:"outline",size:"sm",onClick:()=>{r(),n(!1)},className:"flex-1",children:[c.jsx(Tg,{className:"h-4 w-4 mr-2"}),"Edit in Toolbox"]}),c.jsxs(vl,{variant:"destructive",size:"sm",onClick:()=>{i(),n(!1)},disabled:a,children:[c.jsx(Hg,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}):null}function LV({form:e,uniqueSections:t,sectionsData:n,sectionMarkers:s,designMode:a,viewingSection:r,onSave:i,onCancel:o,isUpdating:l=!1,standalone:d=!1}){const u=t=>{e.setValue("section",t);const r="seat-level"===a?n:s,i=r?.find(e=>e.name===t);i&&e.setValue("sectionId",i.id)};return c.jsxs("div",{className:al("flex items-center gap-2 flex-wrap",!d&&"border-l pl-2.5"),children:[c.jsx("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap shrink-0",children:"Edit:"}),c.jsx(vR,{name:"section",control:e.control,render:({field:e})=>c.jsxs(ox,{value:r?r.name:e.value||"",onValueChange:u,disabled:!!r,children:[c.jsx(cx,{className:"h-6 text-xs w-20 min-w-20",children:c.jsx(lx,{placeholder:"Section"})}),c.jsx(hx,{children:t.map(e=>c.jsx(mx,{value:e,children:e},e))})]})}),c.jsx(vR,{name:"row",control:e.control,render:({field:e})=>c.jsx(kl,{...e,className:"h-6 text-xs w-10",placeholder:"Row"})}),c.jsx(vR,{name:"seatNumber",control:e.control,render:({field:e})=>c.jsx(kl,{...e,className:"h-6 text-xs w-10",placeholder:"#"})}),c.jsx(vR,{name:"seatType",control:e.control,render:({field:e})=>c.jsxs(ox,{value:e.value,onValueChange:e.onChange,children:[c.jsx(cx,{className:"h-6 text-xs w-20",children:c.jsx(lx,{})}),c.jsx(hx,{children:Object.values(yV).map(e=>c.jsx(mx,{value:e,children:e},e))})]})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",onClick:e.handleSubmit(i),disabled:l,className:al("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-primary hover:border-primary hover:text-primary-foreground","bg-background border-border"),title:"Save",children:c.jsx(Up,{className:"h-3 w-3"})}),c.jsx("button",{type:"button",onClick:o,disabled:l,className:al("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Cancel",children:c.jsx(ax,{className:"h-3 w-3"})})]})]})}function FV({form:e,uniqueSections:t,sectionsData:n,sectionSelectValue:s,onSectionSelectValueChange:a,viewingSection:r,onNewSection:i,onManageSections:o,compact:l=!1}){const d=c.jsxs(c.Fragment,{children:[c.jsx(vR,{name:"section",control:e.control,render:({field:d})=>c.jsxs(ox,{value:r?r.name:s||d.value||"",onValueChange:t=>{if("new-section"===t)i(),a(d.value||"");else if("manage-sections"===t&&o)o(),a(d.value||"");else{d.onChange(t),a(t);const s=n?.find(e=>e.name===t);s&&e.setValue("sectionId",s.id)}},disabled:!!r,children:[c.jsx(cx,{className:l?"h-6 text-xs w-20 min-w-20":"h-8 text-sm flex-1",children:c.jsx(lx,{placeholder:"Section"})}),c.jsxs(hx,{children:[t.map(e=>c.jsx(mx,{value:e,children:e},e)),!r&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-px bg-border my-1 mx-2"}),c.jsx(mx,{value:"new-section",children:c.jsx("div",{className:"flex items-center gap-2 font-medium text-primary",children:c.jsx("span",{children:"+ New Section"})})}),o&&c.jsx(mx,{value:"manage-sections",children:c.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[c.jsx(Tg,{className:"h-3 w-3"}),c.jsx("span",{children:"Manage Sections"})]})})]})]})]})}),c.jsx(vR,{name:"row",control:e.control,render:({field:e})=>c.jsx(kl,{...e,className:l?"h-6 text-xs w-10":"h-8 text-sm w-16",placeholder:"Row"})}),c.jsx(vR,{name:"seatNumber",control:e.control,render:({field:e})=>c.jsx(kl,{...e,className:l?"h-6 text-xs w-10":"h-8 text-sm w-16",placeholder:"#"})})]}),u=c.jsx(vR,{name:"seatType",control:e.control,render:({field:e})=>c.jsxs(ox,{value:e.value,onValueChange:e.onChange,children:[c.jsx(cx,{className:l?"h-6 text-xs w-20":"mt-1 h-8 text-sm",children:c.jsx(lx,{})}),c.jsx(hx,{children:Object.values(yV).map(e=>c.jsx(mx,{value:e,children:e},e))})]})});return l?c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap shrink-0",children:"Place:"}),c.jsx("div",{className:"flex items-center gap-1.5",children:d}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:"Type"}),u]})]}):c.jsx(bl,{className:"p-3",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx(Dl,{className:"text-xs",children:"Section / Row / Seat #"}),c.jsx("div",{className:"flex gap-2 mt-1",children:d})]}),c.jsxs("div",{children:[c.jsx(Dl,{className:"text-xs",children:"Type"}),u]})]})})}function IV({selectedShapeType:e,onShapeTypeSelect:t,selectedSeat:n,selectedSection:s,onSeatEdit:a,onSeatView:r,onSectionEdit:i,onSectionView:o,onSeatDelete:l,onSectionDelete:d,onSeatShapeStyleChange:u,onSectionShapeStyleChange:h,onAlign:m,selectedSeatCount:p=0,selectedSectionCount:f=0,seatPlacementControls:g,seatEditControls:x,className:v,readOnly:y=!1}){const b=!y&&m&&p+f>=2,w=[{type:jU.CIRCLE,icon:tf,label:"Circle"},{type:jU.RECTANGLE,icon:Mg,label:"Rectangle"},{type:jU.ELLIPSE,icon:tf,label:"Ellipse"},{type:jU.POLYGON,icon:jf,label:"Polygon"},{type:jU.FREEFORM,icon:ig,label:"Polygon"}],S=n||s,j=n?`${n.seat.section} ${n.seat.row}-${n.seat.seatNumber}`:s?s.name:null,C=n&&a?()=>a(n):s&&i?()=>i(s):void 0,k=n&&r?()=>r(n):s&&o?()=>o(s):void 0,N=n&&l?()=>l(n):s&&d?()=>d(s):void 0,_=n?.shape??s?.shape,P=n&&u?e=>u(n.id,e):s&&h?e=>h(s.id,e):void 0,E=!y&&S&&P&&(n||s&&s.shape),R=!(!n||!x);return c.jsx(bl,{className:al("px-3 py-2.5",v),children:c.jsxs("div",{className:"flex items-center gap-3 flex-wrap w-full",children:[!R&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Shapes:"}),c.jsxs("div",{className:"flex gap-1.5",children:[c.jsx("button",{type:"button",onClick:()=>t?.(null),disabled:y||!t,className:al("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out",!y&&"hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95",y&&"opacity-50 cursor-not-allowed",e||y?"bg-background border-border":"bg-primary text-primary-foreground border-primary shadow-sm"),title:"Pointer (Select)",children:c.jsx(Zf,{className:"h-3.5 w-3.5 transition-transform duration-200"})}),w.map(n=>{const s=n.icon,a=e===n.type;return c.jsx("button",{type:"button",draggable:!y,onDragStart:e=>{e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("application/json",JSON.stringify({shapeType:n.type,dragSource:"shape-toolbox"}));const t=new Image;t.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%235b21b6' stroke='%235b21b6'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3C/svg%3E",e.dataTransfer.setDragImage(t,12,12)},onDragEnd:e=>{e.dataTransfer.dropEffect="copy"},onClick:()=>{t?.(n.type)},disabled:y||!t,className:al("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out",!y&&"hover:bg-primary hover:border-primary hover:text-white hover:shadow-md hover:scale-110 active:scale-95 cursor-grab active:cursor-grabbing",y&&"opacity-50 cursor-not-allowed",a?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background border-border"),title:`${n.label} (drag to canvas to place)`,children:c.jsx(s,{className:"h-3.5 w-3.5 transition-transform duration-200"})},n.type)})]})]}),b&&c.jsxs("div",{className:"flex items-center gap-1 border-l pl-2.5",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground shrink-0",children:"Align:"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{type:"button",onClick:()=>m?.("left"),className:al("flex items-center justify-center p-1.5 rounded border transition-all","hover:bg-primary hover:border-primary hover:text-white","bg-background border-border"),title:"Align left",children:c.jsx(Vg,{className:"h-3.5 w-3.5"})}),c.jsx("button",{type:"button",onClick:()=>m?.("center"),className:al("flex items-center justify-center p-1.5 rounded border transition-all","hover:bg-primary hover:border-primary hover:text-white","bg-background border-border"),title:"Align center",children:c.jsx(Bg,{className:"h-3.5 w-3.5"})}),c.jsx("button",{type:"button",onClick:()=>m?.("right"),className:al("flex items-center justify-center p-1.5 rounded border transition-all","hover:bg-primary hover:border-primary hover:text-white","bg-background border-border"),title:"Align right",children:c.jsx($g,{className:"h-3.5 w-3.5"})}),c.jsx("button",{type:"button",onClick:()=>m?.("top"),className:al("flex items-center justify-center p-1.5 rounded border transition-all","hover:bg-primary hover:border-primary hover:text-white","bg-background border-border"),title:"Align top",children:c.jsx(jp,{className:"h-3.5 w-3.5"})}),c.jsx("button",{type:"button",onClick:()=>m?.("middle"),className:al("flex items-center justify-center p-1.5 rounded border transition-all","hover:bg-primary hover:border-primary hover:text-white","bg-background border-border"),title:"Align middle",children:c.jsx(wp,{className:"h-3.5 w-3.5"})}),c.jsx("button",{type:"button",onClick:()=>m?.("bottom"),className:al("flex items-center justify-center p-1.5 rounded border transition-all","hover:bg-primary hover:border-primary hover:text-white","bg-background border-border"),title:"Align bottom",children:c.jsx(Sp,{className:"h-3.5 w-3.5"})})]})]}),!R&&g&&c.jsx("div",{className:"flex items-center gap-2 border-l pl-2.5",children:g}),!R&&E&&c.jsxs("div",{className:"flex items-center gap-2 border-l pl-2.5",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Dl,{className:"text-xs text-muted-foreground shrink-0 w-7",children:"Fill"}),c.jsx("input",{type:"color","aria-label":"Fill color",title:"Fill color",value:_?.fillColor?.trim()||"#60a5fa",onChange:e=>P?.({fillColor:e.target.value}),className:"h-6 w-7 cursor-pointer rounded border shrink-0"}),c.jsx(kl,{className:"h-6 w-16 font-mono text-[11px] py-0 px-1 min-w-0",placeholder:"#rrggbb","aria-label":"Fill color hex",value:_?.fillColor?.trim()||"",onChange:e=>P?.({fillColor:e.target.value||void 0})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Dl,{className:"text-xs text-muted-foreground shrink-0 w-12",children:"Border"}),c.jsx("input",{type:"color","aria-label":"Border color",title:"Border color",value:_?.strokeColor?.trim()||"#2563eb",onChange:e=>P?.({strokeColor:e.target.value}),className:"h-6 w-7 cursor-pointer rounded border shrink-0"}),c.jsx(kl,{className:"h-6 w-16 font-mono text-[11px] py-0 px-1 min-w-0",placeholder:"#rrggbb","aria-label":"Border color hex",value:_?.strokeColor?.trim()||"",onChange:e=>P?.({strokeColor:e.target.value||void 0})})]}),c.jsx("button",{type:"button",onClick:()=>P?.({fillColor:void 0,strokeColor:void 0}),className:al("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Reset to default colors","aria-label":"Reset to default colors",children:c.jsx(gg,{className:"h-3 w-3 text-muted-foreground"})})]}),n&&x?x:S&&j&&c.jsxs("div",{className:"flex items-center gap-1.5 ml-auto",children:[c.jsx("span",{className:"text-xs font-medium text-foreground whitespace-nowrap px-2.5 py-1",children:j}),k&&c.jsx("button",{type:"button",onClick:k,className:al("flex items-center justify-center p-1 rounded border transition-all","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"View details",children:c.jsx(mf,{className:"h-3 w-3 text-muted-foreground"})}),C&&!y&&c.jsx("button",{type:"button",onClick:C,className:al("flex items-center justify-center p-1 rounded border transition-all","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Click to edit",children:c.jsx(Tg,{className:"h-3 w-3 text-muted-foreground"})}),N&&!y&&c.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),N()},className:al("flex items-center justify-center p-1 rounded border transition-all","hover:bg-destructive hover:border-destructive hover:text-destructive-foreground","bg-background border-border"),title:"Delete marker",children:c.jsx(Hg,{className:"h-3 w-3 text-destructive"})})]})]})})}function OV({seatPlacement:e,seatEditControls:t,readOnly:n=!1,...s}){const a=e&&!n?c.jsx(FV,{compact:!0,...e}):void 0;return c.jsx(IV,{...s,seatPlacementControls:a,seatEditControls:t,readOnly:n})}function zV({imageUrl:e,showImageUpload:t=!1,imageUploadId:n,imageUploadLabel:s,onImageUpload:a,isUploadingImage:r=!1,containerRef:i,dimensionsReady:o,containerDimensions:l,containerStyle:d="fixed",seats:u,selectedSeatId:h,selectedSeatIds:m=[],isPlacingSeats:f,readOnly:g,zoomLevel:x,panOffset:v,onSeatClick:y,onSeatDragEnd:b,onSeatShapeTransform:w,onImageClick:S,onDeselect:j,onShapeDraw:C,onShapeOverlayClick:k,onMarkersInRect:N,onWheel:_,onPan:P,onZoomIn:E,onZoomOut:R,onResetZoom:A,selectedShapeTool:T,shapeOverlays:M,selectedOverlayId:D,canvasBackgroundColor:L="#e5e7eb",showGrid:F=!1,gridSize:I=5}){const[O,z]=p.useState(!1);if(t&&!e)return c.jsx(TV,{id:n??"seat-design-image-upload",label:s??"Upload Floor Plan Image",isUploading:r,onFileSelect:a??(()=>{})});const B="fixed"===d?{height:"600px",width:"100%",touchAction:"none",overscrollBehavior:"contain"}:{minHeight:"600px",minWidth:0,display:"flex",flexDirection:"column",height:"100%"};return c.jsx("div",{ref:i,className:`relative border rounded-lg overflow-hidden select-none w-full transition-colors ${e?"bg-gray-100":""} ${O?"ring-2 ring-primary bg-primary/5":""}`,style:e?B:{...B,backgroundColor:L},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",z(!0)},onDragLeave:e=>{e.currentTarget===e.target&&z(!1)},onDrop:e=>{e.preventDefault(),z(!1);const t=e.dataTransfer.getData("application/json");if(t&&C)try{const{shapeType:n,dragSource:s}=JSON.parse(t);if("shape-toolbox"!==s||!n)return;const a=n;if(!Object.values(jU).includes(a))return;const r=i.current?.getBoundingClientRect();if(!r)return;const o=e.clientX-r.left,c=e.clientY-r.top,d=(o-v.x)/x/l.width*100,u=(c-v.y)/x/l.height*100,h={[jU.CIRCLE]:{type:jU.CIRCLE,radius:2,fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.RECTANGLE]:{type:jU.RECTANGLE,width:4,height:3,fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.ELLIPSE]:{type:jU.ELLIPSE,width:4,height:3,fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.POLYGON]:{type:jU.POLYGON,points:[-1.5,-1,1.5,-1,2,1,0,2,-2,1],fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.FREEFORM]:{type:jU.FREEFORM,points:[0,0,2,0,3,2,2,3,0,3,-1,2],fillColor:"#60a5fa",strokeColor:"#2563eb"}}[a];if(!h)return;C(h,d,u)}catch(n){}},children:o?c.jsxs(c.Fragment,{children:[c.jsx(EV,{imageUrl:e??void 0,seats:u,sections:[],selectedSeatId:h??null,selectedSeatIds:m,isPlacingSeats:f,isPlacingSections:!1,readOnly:g,zoomLevel:x,panOffset:v,onSeatClick:y,onSeatDragEnd:b,onSeatShapeTransform:w,onImageClick:S,onDeselect:j,onShapeDraw:C,onShapeOverlayClick:k,onWheel:_,onPan:P,onMarkersInRect:N,containerWidth:l.width,containerHeight:l.height,venueType:"small",selectedShapeTool:T??null,shapeOverlays:M,selectedOverlayId:D,canvasBackgroundColor:L,showGrid:F,gridSize:I}),c.jsx(vO,{zoomLevel:x,panOffset:v,onZoomIn:E,onZoomOut:R,onResetZoom:A})]}):c.jsx("div",{className:"flex items-center justify-center w-full h-full py-12 text-muted-foreground",children:"Initializing canvas..."})})}function BV({viewingSection:e,className:t,readOnly:n=!1,displayedSeats:s,selectedSeat:a,seatPlacementForm:r,uniqueSections:i,sectionsData:o,sectionSelectValue:l,onSectionSelectValueChange:d,containerRef:u,dimensionsReady:h,containerDimensions:m,zoomLevel:f,panOffset:g,isPlacingSeats:x,isUploadingImage:v,onBack:y,onSave:b,onClearSectionSeats:w,onSectionImageSelect:S,onRemoveSectionImage:j,onSeatClick:C,onSeatDragEnd:k,onSeatShapeTransform:N,onSeatShapeStyleChange:_,onImageClick:P,onDeselect:E,onWheel:R,onPan:A,onZoomIn:T,onZoomOut:M,onResetZoom:D,onNewSection:L,saveSeatsMutationPending:F,seats:I,onDeleteSeat:O,onSetViewingSeat:z,onEditSeat:B,onSetSelectedSeat:$,seatEditFormReset:U,selectedShapeTool:V,onShapeToolSelect:q,onShapeDraw:H,shapeOverlays:G,selectedOverlayId:K,onShapeOverlayClick:W,onDetectSeats:Q,isDetectingSeats:Y=!1,onMarkersInRect:X,selectedSeatIds:Z=[],onSelectSeatIds:J,onAlign:ee,seatEditControls:te,canvasBackgroundColor:ne="#e5e7eb",onCanvasBackgroundColorChange:se,showGrid:ae=!1,gridSize:re=5,isFullscreen:ie=!1,onToggleFullscreen:oe}){const[le,ce]=p.useState(!1),de=e.canvasBackgroundColor??ne??"#e5e7eb",ue=ie?"flex flex-col flex-1 min-h-0 p-6 space-y-4":"p-6 space-y-4",he=p.useMemo(()=>[c.jsxs(ej,{onClick:w,children:[c.jsx(Tp,{className:"h-4 w-4 mr-2"}),"Clear All Placements"]}),c.jsx(aj,{}),!e.imageUrl&&c.jsx(Dl,{htmlFor:`add-section-image-${e.id}`,className:"cursor-pointer",children:c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Nf,{className:"h-4 w-4 mr-2"}),"Add floor plan image",c.jsx(kl,{id:`add-section-image-${e.id}`,type:"file",accept:"image/*",onChange:t=>{S(e.id,t),t.target.value=""},className:"hidden"})]})})}),e.imageUrl&&S&&c.jsx(Dl,{htmlFor:`change-section-image-${e.id}`,className:"cursor-pointer",children:c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Nf,{className:"h-4 w-4 mr-2"}),"Change Image",c.jsx(kl,{id:`change-section-image-${e.id}`,type:"file",accept:"image/*",onChange:t=>{S(e.id,t),t.target.value=""},className:"hidden"})]})})}),se&&!e.imageUrl&&c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-2 py-1.5",children:[c.jsx(eg,{className:"h-4 w-4 shrink-0"}),c.jsx("span",{className:"flex-1",children:"Canvas background color"}),c.jsx("input",{type:"color","aria-label":"Canvas background color",value:de,onChange:e=>se(e.target.value),className:"h-6 w-8 cursor-pointer rounded border border-input"})]})}),e.imageUrl&&j&&c.jsxs(c.Fragment,{children:[c.jsx(aj,{}),c.jsxs(ej,{onClick:()=>j(e.id),className:"text-destructive focus:text-destructive",children:[c.jsx(Hg,{className:"h-4 w-4 mr-2"}),"Remove Image"]})]})],[w]);return c.jsxs(bl,{className:t,children:[c.jsxs("div",{className:ue,children:[c.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vl,{variant:"ghost",size:"sm",onClick:y,className:"h-8 w-8 p-0",title:"Back to Main Floor Plan",children:c.jsx(Cp,{className:"h-4 w-4"})}),c.jsxs("h3",{className:"text-lg font-semibold",children:["Section: ",e.name]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[!ie&&c.jsx(vl,{onClick:()=>ce(!0),variant:"outline",size:"sm",className:"h-7 w-7 p-0",title:"View seat list",children:c.jsx(Ff,{className:"h-3.5 w-3.5"})}),Q&&e.imageUrl&&!n&&c.jsxs(vl,{variant:"outline",onClick:Q,disabled:Y,size:"sm",className:"h-7 px-2",title:"Detect seats from section image (AI)",children:[c.jsx(wg,{className:"h-3.5 w-3.5 mr-1"}),Y?"Detecting":"Detect seats"]}),!n&&c.jsxs(vl,{onClick:b,disabled:F,size:"sm",className:"h-7 px-2",children:[c.jsx(yg,{className:"h-3.5 w-3.5 mr-1"}),"Save"]}),oe&&c.jsx(vl,{variant:"outline",onClick:oe,size:"sm",className:"h-7 w-7 p-0",title:ie?"Exit Fullscreen":"Enter Fullscreen",children:ie?c.jsx(Qf,{className:"h-3.5 w-3.5"}):c.jsx(Gf,{className:"h-3.5 w-3.5"})}),!n&&he.length>0&&c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"outline",size:"sm",className:"h-7 w-7 p-0",children:c.jsx(uf,{className:"h-3.5 w-3.5"})})}),c.jsx(JS,{align:"end",children:he.map((e,t)=>c.jsx(p.Fragment,{children:e},t))})]})]})]}),q&&c.jsx("div",{className:"shrink-0",children:c.jsx(OV,{selectedShapeType:V||null,onShapeTypeSelect:q,selectedSeat:a,onSeatView:e=>{z(e)},onSeatEdit:e=>{B?.(e)},onSeatDelete:O,onSeatShapeStyleChange:_,onAlign:ee,selectedSeatCount:Z.length,seatPlacement:{form:r,uniqueSections:i,sectionsData:o,sectionSelectValue:l,onSectionSelectValueChange:d,viewingSection:e,onNewSection:L},seatEditControls:te,readOnly:n})}),c.jsx("div",{className:ie?"flex-1 min-h-0 flex flex-col":"space-y-4",children:c.jsx(zV,{imageUrl:e.imageUrl??"",showImageUpload:!1,imageUploadId:`section-image-${e.id}`,imageUploadLabel:`Upload Floor Plan Image for ${e.name}`,onImageUpload:t=>S(e.id,t),isUploadingImage:v,containerRef:u,dimensionsReady:h,containerDimensions:m,containerStyle:"flex",canvasBackgroundColor:de,seats:s,selectedSeatId:a?.id??null,selectedSeatIds:Z,isPlacingSeats:x,readOnly:n,zoomLevel:f,panOffset:g,onSeatClick:C,onSeatDragEnd:k,onSeatShapeTransform:N,onImageClick:P,onDeselect:E,onShapeDraw:H,onShapeOverlayClick:W,onMarkersInRect:X,onWheel:R,onPan:A,onZoomIn:T,onZoomOut:M,onResetZoom:D,selectedShapeTool:V??null,shapeOverlays:G,selectedOverlayId:K,showGrid:ae,gridSize:re})})]}),c.jsx($V,{isOpen:le,onOpenChange:ce,readOnly:n,viewingSection:e,venueType:"small",displayedSeats:s,seats:I,sectionMarkers:[],selectedSeat:a,isPlacingSeats:x,isSectionFormOpen:!1,editingSectionId:null,sectionForm:{},selectedSectionMarker:null,createSectionMutationPending:!1,updateSectionMutationPending:!1,onSeatClick:C,onDeleteSeat:O,onOpenNewSectionForm:()=>{},onCancelSectionForm:()=>{},onSaveSectionForm:()=>{},onSectionMarkerClick:()=>{},onOpenSectionDetail:()=>{},onEditSectionFromSheet:()=>{},onDeleteSection:()=>{},onSetViewingSeat:z,onEditSeat:B,onSetSelectedSeat:$,onSetIsDatasheetOpen:ce,seatEditFormReset:U})]})}function $V({isOpen:e,onOpenChange:t,readOnly:n=!1,viewingSection:s,venueType:a,displayedSeats:r,seats:i,sectionMarkers:o,selectedSeat:l,isPlacingSeats:d,isSectionFormOpen:u,editingSectionId:h,sectionForm:m,selectedSectionMarker:p,createSectionMutationPending:f,updateSectionMutationPending:g,onDeleteSeat:x,onCancelSectionForm:v,onSaveSectionForm:y,onSectionMarkerClick:b,onOpenSectionDetail:w,onEditSectionFromSheet:S,onDeleteSection:j,onSetViewingSeat:C,onEditSeat:k,onSetSelectedSeat:N,onSetIsDatasheetOpen:_,seatEditFormReset:P}){return c.jsx(uP,{open:e,onOpenChange:t,children:c.jsxs(fP,{side:"right",className:"w-[400px] sm:w-[540px] flex flex-col",children:[c.jsxs(gP,{children:[c.jsx(vP,{children:s?`Seats - ${s.name}`:"large"===a?"Sections":"Seats"}),c.jsx(yP,{children:s?`${r.length} seat(s) in ${s.name}`:"large"===a?`${o.length} section(s) placed`:`${i.length} seat(s) placed`})]}),c.jsx("div",{className:"mt-6 flex-1 overflow-y-auto min-h-0",children:s?c.jsx("div",{className:"space-y-2",children:r.map(e=>c.jsx("div",{className:"group p-3 rounded-lg border cursor-pointer transition-colors "+(l?.id===e.id?"bg-blue-50 border-blue-500":"bg-background border-border hover:bg-muted"),onClick:()=>{d?(N(e),_(!1)):(C(e),_(!1))},children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"font-medium text-sm",children:[e.seat.row," ",e.seat.seatNumber]}),c.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.seat.seatType})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d&&!n&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),N(e),k?.(e),_(!1)},className:"h-6 w-6 p-0",title:"Edit seat in toolbox",children:c.jsx(Tg,{className:"h-3 w-3"})}),d&&!n&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),x(e)},className:"h-6 w-6 p-0",title:"Delete seat",children:c.jsx(Hg,{className:"h-3 w-3"})})]})]})},e.id))}):"large"===a?c.jsxs("div",{className:"space-y-2",children:[u&&!n&&c.jsxs(bl,{className:"p-3 space-y-2 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:h?"Update section":"New section"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(vl,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:v,children:"Cancel"}),c.jsx(vl,{size:"sm",className:"h-7 px-3",onClick:y,disabled:!m.watch("name")?.trim()||f||g,children:h?"Update":"Create"})]})]}),c.jsxs("div",{className:"mt-20",children:[c.jsx(Dl,{className:"text-xs",children:"Section Name"}),c.jsx(vR,{name:"name",control:m.control,render:({field:e})=>c.jsx(kl,{...e,className:"mt-1 h-8 text-sm w-full",placeholder:"e.g., Section A",autoFocus:!0})})]})]}),o.map(e=>c.jsx("div",{className:"p-2 rounded-lg border cursor-pointer transition-colors overflow-hidden "+(p?.id===e.id?"bg-blue-50 border-blue-500":"bg-background border-border hover:bg-muted"),onClick:t=>{t.stopPropagation(),b(e,t),_(!1)},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[c.jsx("span",{className:"font-medium text-sm truncate",children:e.name}),e.imageUrl&&c.jsx("div",{className:"flex items-center text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full whitespace-nowrap",children:"Image"})]}),c.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[c.jsxs("span",{children:[i.filter(t=>t.seat.section===e.name).length," ","seats"]}),!e.imageUrl&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-muted-foreground/40"}),c.jsx("span",{className:"italic",children:"No image"})]})]})]}),c.jsxs("div",{className:"flex gap-1 shrink-0",children:[c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w(e),_(!1)},className:"h-7 w-7 p-0",title:"Open Details",children:c.jsx(xf,{className:"h-3.5 w-3.5"})}),!n&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),S(e)},className:"h-7 w-7 p-0",title:"Edit section",children:c.jsx(Tg,{className:"h-3.5 w-3.5"})}),!n&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),j(e)},className:"h-7 w-7 p-0 text-destructive hover:text-destructive",title:"Delete section",children:c.jsx(Hg,{className:"h-3.5 w-3.5"})})]})]})},e.id))]}):c.jsx("div",{className:"space-y-2",children:i.map(e=>c.jsx("div",{className:"group p-3 rounded-lg border cursor-pointer transition-colors "+(l?.id===e.id?"bg-blue-50 border-blue-500":"bg-background border-border hover:bg-muted"),onClick:()=>{d?(N(e),_(!1)):(C(e),_(!1))},children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"font-medium text-sm",children:[e.seat.section," ",e.seat.row," ",e.seat.seatNumber]}),c.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.seat.seatType})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d&&!n&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),N(e),k?.(e),_(!1)},className:"h-6 w-6 p-0",title:"Edit seat in toolbox",children:c.jsx(Tg,{className:"h-3 w-3"})}),d&&!n&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),x(e)},className:"h-6 w-6 p-0",title:"Delete seat",children:c.jsx(Hg,{className:"h-3 w-3"})})]})]})},e.id))})})]})})}function UV({selectedSectionMarker:e,seats:t,isOpen:n,onOpenChange:s,onOpenSectionDetail:a,onEdit:r,onDelete:i}){return e?c.jsx(uP,{open:n,onOpenChange:s,children:c.jsxs(fP,{side:"right",className:"w-[400px] sm:w-[540px] flex flex-col",children:[c.jsxs(gP,{children:[c.jsx(vP,{children:"Selected Section"}),c.jsx(yP,{children:"View and manage the selected section"})]}),c.jsxs("div",{className:"mt-6 px-6 flex-1  min-h-0 space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Name"}),c.jsx("div",{className:"mt-1 text-sm font-medium",children:e.name})]}),c.jsxs("div",{children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Seats"}),c.jsxs("div",{className:"mt-1 text-sm font-medium",children:[t.filter(t=>t.seat.section===e.name).length," ","seat(s)"]})]}),(void 0!==e.x||void 0!==e.y)&&c.jsxs("div",{children:[c.jsx(Dl,{className:"text-muted-foreground",children:"Position"}),c.jsxs("div",{className:"mt-1 text-sm font-medium",children:["X: ",e.x?.toFixed(2)??"N/A","%, Y:"," ",e.y?.toFixed(2)??"N/A","%"]})]})]}),c.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[c.jsxs(vl,{variant:"outline",size:"sm",onClick:()=>{a(e),s(!1)},className:"flex-1",children:[c.jsx(xf,{className:"h-4 w-4 mr-2"}),"Open"]}),c.jsxs(vl,{variant:"outline",size:"sm",onClick:()=>{r(e),s(!1)},className:"flex-1",children:[c.jsx(Tg,{className:"h-4 w-4 mr-2"}),"Edit"]}),c.jsxs(vl,{variant:"destructive",size:"sm",onClick:()=>{i(e),s(!1)},children:[c.jsx(Hg,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}):null}function VV({open:e,onOpenChange:t,sections:n,onEdit:s,onDelete:a,isDeleting:r,form:i,editingSectionId:o,isUpdating:l,onSave:d,onCancelEdit:u}){const[h,m]=p.useState(!1),f=n?.find(e=>e.id===o),g=i.watch("name"),x=(g?.trim()||"").length>0;p.useEffect(()=>{o&&e?m(!0):o||m(!1)},[o,e]),p.useEffect(()=>{e||m(!1)},[e]);return c.jsx(uP,{open:e,onOpenChange:t,children:c.jsx(fP,{side:"right",className:"w-[400px] sm:w-[540px] flex flex-col",children:h&&f?c.jsxs(c.Fragment,{children:[c.jsxs(gP,{children:[c.jsx(vP,{children:"Edit Section"}),c.jsx(yP,{children:"Update the section details"})]}),c.jsx("div",{className:"mt-6 flex-1 min-h-0",children:c.jsxs("div",{className:"px-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx(Dl,{htmlFor:"section-name",children:"Section Name"}),c.jsx(vR,{name:"name",control:i.control,render:({field:e})=>c.jsx(kl,{...e,id:"section-name",className:"mt-2",placeholder:"e.g., Section A, VIP Area, General Admission",autoFocus:!0})}),i.formState.errors.name&&c.jsx("p",{className:"text-sm text-destructive mt-1",children:i.formState.errors.name.message})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(vl,{variant:"outline",onClick:()=>{m(!1),u()},className:"flex-1",children:"Cancel"}),c.jsx(vl,{onClick:d,disabled:l||!x,className:"flex-1",children:"Update"})]})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs(gP,{children:[c.jsx(vP,{children:"Manage Sections"}),c.jsx(yP,{children:"Edit or delete sections for this layout"})]}),c.jsxs("div",{className:"mt-6 px-6 flex-1 overflow-y-auto min-h-0 space-y-4",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("p",{className:"text-sm text-muted-foreground",children:[n?.length||0," section(s)"]})}),c.jsx("div",{className:"space-y-2",children:n&&n.length>0?n.map(e=>{const t=e.seat_count??0,n=t>0;return c.jsx(bl,{className:"p-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:e.name}),c.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[null!=e.x_coordinate&&null!=e.y_coordinate&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Position: (",e.x_coordinate.toFixed(1),","," ",e.y_coordinate.toFixed(1),")"]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:0===t?"No seats":`${t} seat${1===t?"":"s"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>(e=>{s(e),m(!0)})(e),className:"h-8 px-2",title:"Edit section",children:c.jsx(Tg,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>a(e),className:"h-8 px-2 text-destructive hover:text-destructive",title:n?`Cannot delete: ${t} seat${1===t?"":"s"} attached`:"Delete section",disabled:r||n,children:c.jsx(Hg,{className:"h-4 w-4"})})]})]})},e.id)}):c.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No sections found. Create your first section."})})]})]})})})}function qV({initialName:e="",isEditing:t=!1,selectedShapeType:n,onShapeTypeSelect:s,onSave:a,onCancel:r,className:i}){const[o,l]=p.useState(e);p.useEffect(()=>{l(e)},[e]);const d=f.useRef(null);p.useEffect(()=>{d.current&&d.current.focus()},[]);const u=()=>{o.trim()&&a(o)},h=[{type:jU.RECTANGLE,icon:Mg,label:"Rectangle"},{type:jU.CIRCLE,icon:tf,label:"Circle"},{type:jU.POLYGON,icon:jf,label:"Polygon"},{type:jU.FREEFORM,icon:ig,label:"Freeform"}];return c.jsxs(bl,{className:al("px-3 py-2.5 flex items-center gap-3 flex-wrap w-full",i),children:[!t&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Shapes:"}),c.jsxs("div",{className:"flex gap-1.5",children:[c.jsx("button",{type:"button",onClick:()=>s(null),className:al("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md",n?"bg-background border-border":"bg-primary text-primary-foreground border-primary shadow-sm"),title:"Pointer (Select)",children:c.jsx(Zf,{className:"h-3.5 w-3.5"})}),h.map(e=>{const t=e.icon,a=n===e.type;return c.jsx("button",{type:"button",onClick:()=>s(e.type),className:al("flex items-center justify-center p-1.5 rounded border transition-all duration-200 ease-in-out","hover:bg-primary hover:border-primary hover:text-white hover:shadow-md",a?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background border-border"),title:e.label,children:c.jsx(t,{className:"h-3.5 w-3.5"})},e.type)})]})]}),c.jsxs("div",{className:al("flex items-center gap-2 flex-wrap",!t&&"border-l pl-2.5"),children:[t&&c.jsx("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap shrink-0",children:"Edit:"}),c.jsx(kl,{ref:d,value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key?u():"Escape"===e.key&&r()},placeholder:"Section Name (e.g. Stage)",className:"h-6 text-xs w-36 min-w-36"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",onClick:u,disabled:!o.trim(),className:al("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-primary hover:border-primary hover:text-primary-foreground","bg-background border-border"),title:"Save",children:c.jsx(Up,{className:"h-3 w-3"})}),c.jsx("button",{type:"button",onClick:r,className:al("flex items-center justify-center h-6 w-6 rounded border transition-all shrink-0","hover:bg-accent hover:border-accent-foreground","bg-background border-border"),title:"Cancel",children:c.jsx(ax,{className:"h-3 w-3"})})]})]})]})}function HV({layoutName:e,isLoading:t,seatsError:n,venueType:s,sectionMarkers:a,seats:r,viewingSection:i,displayedSeats:o,onToggleDatasheet:l,readOnly:d,onSave:u,isSaving:h,isFullscreen:m,onToggleFullscreen:f,mainImageUrl:g,isPlacingSeats:x,isPlacingSections:v,onClearAllPlacements:y,onMainImageSelect:b,onRemoveImage:w,onDetectSections:S,isDetectingSections:j=!1,onDetectSeats:C,isDetectingSeats:k=!1,canvasBackgroundColor:N="#e5e7eb",onCanvasBackgroundColorChange:_,snapToGrid:P=!1,onSnapToGridChange:E,gridSize:R=5,onGridSizeChange:A,showGrid:T=!1,onShowGridChange:M}){const D=!m&&("large"===s&&a.length>0||"small"===s&&r.length>0||i&&o.length>0),L=p.useMemo(()=>[c.jsxs(ej,{onClick:y,children:[c.jsx(Tp,{className:"h-4 w-4 mr-2"}),"Clear All Placements"]}),c.jsx(aj,{}),!d&&b&&!g&&c.jsx(Dl,{htmlFor:"add-floor-plan-image",className:"cursor-pointer",children:c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Nf,{className:"h-4 w-4 mr-2"}),"Add floor plan image",c.jsx(kl,{id:"add-floor-plan-image",type:"file",accept:"image/*",onChange:e=>{b(e),e.target.value=""},className:"hidden"})]})})}),!d&&_&&c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-2 py-1.5",children:[c.jsx(eg,{className:"h-4 w-4 shrink-0"}),c.jsx("span",{className:"flex-1",children:"Canvas background color"}),c.jsx("input",{type:"color","aria-label":"Canvas background color",value:N,onChange:e=>_(e.target.value),className:"h-6 w-8 cursor-pointer rounded border border-input"})]})}),!d&&g&&c.jsx(Dl,{htmlFor:"change-main-image",className:"cursor-pointer",children:c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("div",{children:[c.jsx(Nf,{className:"h-4 w-4 mr-2"}),"Change Image",c.jsx(kl,{id:"change-main-image",type:"file",accept:"image/*",onChange:e=>{b(e),e.target.value=""},className:"hidden"})]})})}),!d&&w&&c.jsxs(c.Fragment,{children:[c.jsx(aj,{}),c.jsxs(ej,{onClick:()=>w(),className:"text-destructive focus:text-destructive",children:[c.jsx(Hg,{className:"h-4 w-4 mr-2"}),"Remove Image"]})]}),!d&&E&&c.jsxs(c.Fragment,{children:[c.jsx(aj,{}),c.jsxs(ej,{onClick:()=>E(!P),children:[c.jsx(wf,{className:"h-4 w-4 mr-2"}),c.jsx("span",{className:"flex-1",children:"Snap to Grid"}),P&&c.jsx("span",{className:"text-xs text-primary",children:""})]}),P&&A&&c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex flex-col cursor-pointer items-start gap-3 px-2 py-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2 w-full",children:[c.jsx("span",{className:"text-xs text-muted-foreground w-16 flex-shrink-0",children:"Grid size:"}),c.jsx("input",{type:"number",min:"1",max:"20",value:R,onChange:e=>A(Math.max(1,parseInt(e.target.value)||5)),className:"h-6 w-12 px-1 text-xs border rounded",title:"Grid size in percentage"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]}),M&&c.jsxs("div",{className:"flex items-center gap-2 w-full pl-16 cursor-pointer",onClick:e=>{e.preventDefault(),e.stopPropagation(),M(!T)},children:[c.jsx("input",{type:"checkbox",checked:T,onChange:()=>{},className:"h-4 w-4 rounded cursor-pointer",title:"Toggle grid visibility"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Show grid lines"})]})]})}),!P&&M&&c.jsx(ej,{onSelect:e=>e.preventDefault(),asChild:!0,children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer px-2 py-1.5",onClick:e=>{e.preventDefault(),e.stopPropagation(),M(!T)},children:[c.jsx("input",{type:"checkbox",checked:T,onChange:()=>{},className:"h-4 w-4 rounded cursor-pointer",title:"Toggle grid visibility"}),c.jsx("span",{className:"text-xs",children:"Show grid lines"})]})})]})],[y,b,_,w,E,P,R,A,T,M]);return c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-semibold",children:e?`Designer - ${e}`:"Seat Designer"}),t&&c.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading seats..."}),Boolean(n)&&c.jsx("span",{className:"text-xs text-destructive",children:"Error loading seats"})]}),c.jsxs("div",{className:"flex gap-1",children:[D&&c.jsx(vl,{variant:"outline",onClick:l,size:"sm",className:"h-7 w-7 p-0",title:"View Datasheet",children:c.jsx(Ff,{className:"h-3.5 w-3.5"})}),S&&c.jsxs(vl,{variant:"outline",onClick:S,disabled:j,size:"sm",className:"h-7 px-2",title:"Detect sections from image (AI)",children:[c.jsx(wg,{className:"h-3.5 w-3.5 mr-1"}),j?"Detecting":"Detect sections"]}),C&&c.jsxs(vl,{variant:"outline",onClick:C,disabled:k,size:"sm",className:"h-7 px-2",title:"Detect seats from image (AI)",children:[c.jsx(wg,{className:"h-3.5 w-3.5 mr-1"}),k?"Detecting":"Detect seats"]}),!d&&c.jsxs(vl,{onClick:u,disabled:h,size:"sm",className:"h-7 px-2",children:[c.jsx(yg,{className:"h-3.5 w-3.5 mr-1"}),"Save"]}),c.jsx(vl,{variant:"outline",onClick:f,size:"sm",className:"h-7 w-7 p-0",title:m?"Exit Fullscreen":"Enter Fullscreen",children:m?c.jsx(Qf,{className:"h-3.5 w-3.5"}):c.jsx(Gf,{className:"h-3.5 w-3.5"})}),!d&&L.length>0&&c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"outline",size:"sm",className:"h-7 w-7 p-0",children:c.jsx(uf,{className:"h-3.5 w-3.5"})})}),c.jsx(JS,{align:"end",children:L.map((e,t)=>c.jsx(p.Fragment,{children:e},t))})]})]})]})}function GV({venueId:e,layoutId:t,layoutName:n,imageUrl:s,designMode:a="seat-level",readOnly:r=!1,initialSeats:i,initialSections:o,onImageUpload:l,onRemoveImage:d,initialCanvasBackgroundColor:u,onCanvasBackgroundColorChange:h,className:m,fileId:f}){const g="seat-level"===a?"small":"large",[x,v]=p.useState(s),[y,b]=p.useState(u||"#e5e7eb"),[w,S]=p.useState(f);p.useEffect(()=>{void 0!==s&&v(s)},[s]),p.useEffect(()=>{u&&b(u)},[u]);const j=p.useCallback(e=>{b(e),h?.(e)},[h]),[C,k]=p.useState([]),[N,_]=p.useState(null),[P,E]=p.useState(!1),R=!0,[A,T]=p.useState(!1),[M,D]=p.useState(null),[L,F]=p.useState(!1),[I,O]=p.useState(!1),[z,B]=p.useState(!1),[$,U]=p.useState(null),V=uA({resolver:QA(RV),mode:"onChange",defaultValues:{name:"Section A"}}),[q,H]=p.useState(null),[G,K]=p.useState([]),[W,Q]=p.useState(null),[Y,X]=p.useState([]),[Z,J]=p.useState([]),ee=!0,te=uA({resolver:QA(AV),defaultValues:{section:"Section A",sectionId:void 0,row:"Row 1",seatNumber:"1",seatType:yV.STANDARD}}),[ne,se]=p.useState(""),[ae,re]=p.useState(!1),[ie,oe]=p.useState(1),[le,ce]=p.useState({x:0,y:0}),[de,ue]=p.useState(!1),[he,me]=p.useState(null),[pe,fe]=p.useState(!1),[ge,xe]=p.useState(null),[ve,ye]=p.useState(null),be=uA({resolver:QA(AV),defaultValues:{section:"",sectionId:void 0,row:"",seatNumber:"",seatType:yV.STANDARD}}),[we,Se]=p.useState(!1),[je,Ce]=p.useState(!1),[ke,Ne]=p.useState(!1),_e=p.useRef(new Map),[Pe,Ee]=p.useState({type:jU.CIRCLE,radius:1.2}),[Re,Ae]=p.useState(null),[Te,Me]=p.useState([]),[De,Le]=p.useState(null),Fe=p.useMemo(()=>ke&&$?[...Te,{id:"pending-section-creation",x:$.x,y:$.y,shape:Pe,isSelected:!0,isPlacement:!0}]:Te,[Te,ke,$,Pe]),Ie=p.useRef(null),Oe=p.useRef(null),ze=p.useRef(()=>{}),Be=p.useRef(()=>{}),$e=Vs(),[Ue,Ve]=p.useState({width:0,height:0}),[qe,He]=p.useState(!1),[Ge,Ke]=p.useState(!1),[We,Qe]=p.useState(!1),[Ye,Xe]=p.useState(5),[Ze,Je]=p.useState(!1),et=p.useRef(void 0);p.useEffect(()=>{const e="large"===g&&q?q.imageUrl:void 0;!!!et.current&&!!e&&He(!1),et.current=e},[g,q?.id,q?.imageUrl]);const{data:tt,isLoading:nt,error:st}=Ys({queryKey:["seats",t],queryFn:()=>wV.getByLayout(t),enabled:!!t&&!i,retry:!1,refetchOnMount:!0,refetchOnWindowFocus:!1}),{data:at}=Ys({queryKey:["sections","layout",t],queryFn:()=>CV.getByLayout(t),enabled:!!t,refetchOnMount:!0,refetchOnWindowFocus:!1});p.useEffect(()=>{if(!("section-level"!==a||0!==C.length||nt||o||at&&0!==at.length)){const e={id:"section-default",name:"Section A",x:50,y:50,isNew:!0};k([e]),V.setValue("name",e.name)}},[a,nt,C.length,o,at]),p.useLayoutEffect(()=>{if(qe)return;const e=()=>{const e=Ie.current?.getBoundingClientRect(),t=e&&e.width>0?Math.floor(e.width):800,n=e&&e.height>0?Math.floor(e.height):600;Ve({width:t,height:n}),He(!0)};e();const t=setTimeout(e,50);return()=>clearTimeout(t)},[qe]),p.useEffect(()=>{if(!Ie.current||!qe)return;let e,t;const n=()=>{if(!Ie.current)return;const e=Ie.current.getBoundingClientRect(),t=Math.floor(e.width)||800,n=Math.floor(e.height)||600;Ve(e=>{const s=Math.abs(e.width-t),a=Math.abs(e.height-n);return s<=2&&a<=2?e:{width:t,height:n}})},s=()=>{t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{clearTimeout(e),e=setTimeout(n,150)})},a=new ResizeObserver(s);a.observe(Ie.current),window.addEventListener("resize",s);const r=Ie.current,i=e=>{e.preventDefault()};return r.addEventListener("wheel",i,{passive:!1}),()=>{t&&cancelAnimationFrame(t),clearTimeout(e),a.disconnect(),window.removeEventListener("resize",s),r.removeEventListener("wheel",i)}},[qe]),p.useEffect(()=>{if(o&&"section-level"===a){const e=o.map(e=>{let t;if("shape"in e&&e.shape)try{const n=JSON.parse(e.shape);if(n&&"object"==typeof n&&n.type){t={...n,type:n.type}}}catch(n){}return{id:e.id,name:e.name,x:e.x_coordinate||50,y:e.y_coordinate||50,imageUrl:e.image_url||void 0,canvasBackgroundColor:e.canvas_background_color??"#e5e7eb",shape:t,isNew:!1}});k(e)}},[o,a]),p.useEffect(()=>{if(!o&&void 0!==at&&"section-level"===a){const e=at.map(e=>{let t;if(e.shape)try{const n=JSON.parse(e.shape);if(n&&"object"==typeof n&&n.type){t={...n,type:n.type}}}catch(n){}return{id:e.id,name:e.name,x:e.x_coordinate||50,y:e.y_coordinate||50,imageUrl:e.image_url||void 0,canvasBackgroundColor:e.canvas_background_color??"#e5e7eb",shape:t,isNew:!1}});k(e)}},[at,o,a]);const rt=p.useRef(),it=p.useRef();p.useEffect(()=>{const e=i!==rt.current,t=tt!==it.current;if(e||t||void 0===rt.current)if(i)if(rt.current=i,i.length>0){const e=i.map(e=>{let t;if("shape"in e&&e.shape)try{const n=JSON.parse(e.shape);if(n&&"object"==typeof n&&n.type){t={...n,type:n.type}}}catch(n){}return{id:e.id,x:e.x_coordinate||0,y:e.y_coordinate||0,seat:{section:e.section_name||e.section_id||"Unknown",sectionId:e.section_id,row:e.row,seatNumber:e.seat_number,seatType:e.seat_type},shape:t}});K(e)}else K([]);else if(tt)if(it.current=tt,tt.items&&tt.items.length>0){const e=tt.items.map(e=>{let t;if(e.shape)try{const n=JSON.parse(e.shape);if(n&&"object"==typeof n&&n.type){t={...n,type:n.type}}}catch(n){}return{id:e.id,x:e.x_coordinate||0,y:e.y_coordinate||0,seat:{section:e.section_name||e.section_id||"Unknown",sectionId:e.section_id,row:e.row,seatNumber:e.seat_number,seatType:e.seat_type},shape:t}});K(e)}else void 0===rt.current&&void 0===it.current&&K([]);else nt||st||i||void 0!==rt.current||void 0!==it.current||K([])},[tt,i,nt,st]);const ot="small"===g?G:q?G.filter(e=>e.seat.section===q.name):[],lt=async(e,n)=>{const s=n.target.files?.[0];if(s)try{Se(!0);const n=await QP.uploadImage(s);k(t=>t.map(t=>t.id===e?{...t,imageUrl:n.url}:t)),q?.id===e&&H(e=>e?{...e,imageUrl:n.url}:null);const a=at?.find(t=>t.id===e),r=C.find(t=>t.id===e);if(a||r){const s=a||r;if(!s)throw new Error("Section not found");if(!0===r?.isNew&&r){const s=await CV.create({layout_id:t,name:r.name,x_coordinate:r.x,y_coordinate:r.y,file_id:n.id,shape:r.shape?JSON.stringify(r.shape):void 0}),a=e;k(e=>e.map(e=>e.id===a?{...e,id:s.id,imageUrl:n.url,isNew:!1}:e)),N?.id===a&&_(e=>e?{...e,id:s.id,imageUrl:n.url,isNew:!1}:null),q?.id===a&&H(e=>e?{...e,id:s.id,imageUrl:n.url,isNew:!1}:null)}else await CV.update(e,{name:s.name,x_coordinate:a?a.x_coordinate??void 0:r?.x,y_coordinate:a?a.y_coordinate??void 0:r?.y,file_id:n.id});$e.invalidateQueries({queryKey:["sections","layout",t]})}setTimeout(()=>{if(Ie.current){const e=Ie.current.getBoundingClientRect(),t=Math.floor(e.width)||800,n=Math.floor(e.height)||600;Ve({width:t,height:n})}},100)}catch(a){alert("Failed to upload image. Please try again.")}finally{Se(!1)}},ct=p.useCallback(async e=>{try{await CV.update(e,{file_id:""}),k(t=>t.map(t=>t.id===e?{...t,imageUrl:void 0}:t)),N?.id===e&&_(e=>e?{...e,imageUrl:void 0}:null),q?.id===e&&H(e=>e?{...e,imageUrl:void 0}:null),$e.invalidateQueries({queryKey:["sections","layout",t]})}catch(n){alert("Failed to remove section image. Please try again.")}},[t,$e,N?.id,q?.id]),dt=p.useCallback(async()=>{if(x){O(!0);try{const e=x.startsWith("http")?x:`${window.location.origin}${x}`,t=await fetch(e);if(!t.ok)throw new Error("Failed to load image");const n=await t.blob(),s=new File([n],"floor-plan.png",{type:n.type||"image/png"}),a=((await async function(e){const t=new FormData;return t.append("file",e),Fa.postForm("/api/v1/ai/detect-markers",t,{requiresAuth:!0})}(s)).sections||[]).map((e,t)=>{const n={type:"ellipse"===e.shape.type?jU.ELLIPSE:"polygon"===e.shape.type?jU.POLYGON:jU.RECTANGLE,width:e.shape.width,height:e.shape.height};return{id:`detected-${Date.now()}-${t}`,name:e.name,x:e.shape.x,y:e.shape.y,isNew:!0,shape:n}});a.length>0?(k(e=>[...e,...a]),Ek({title:`Added ${a.length} suggested section(s). You can move or edit them.`,variant:"default"})):Ek({title:"No sections detected. Try a clearer floor plan image.",variant:"default"})}catch(wW){wW instanceof Ta&&503===wW.status?Ek({title:"AI section detection is not available",description:"The server is not configured for AI features. Please contact your administrator.",variant:"destructive"}):Ek({title:wW instanceof Error?wW.message:"Failed to detect sections",variant:"destructive"})}finally{O(!1)}}},[x]),ut=p.useCallback(async()=>{const e=q?.imageUrl??x;if(e){B(!0);try{const t=e.startsWith("http")?e:`${window.location.origin}${e}`,n=await fetch(t);if(!n.ok)throw new Error("Failed to load image");const s=await n.blob(),a=new File([s],"floor-plan.png",{type:s.type||"image/png"}),r=q?.name??void 0,i=await async function(e,t){const n=new FormData;return n.append("file",e),null!=t&&""!==t&&n.append("section_name",t),Fa.postForm("/api/v1/ai/detect-seats",n,{requiresAuth:!0})}(a,r),o=te.getValues(),l=q?.name??o.section,c=q?.id??o.sectionId,d=(i.seats||[]).map((e,t)=>({id:`detected-${Date.now()}-${t}`,x:e.x,y:e.y,seat:{section:l,sectionId:c,row:e.row,seatNumber:e.seat_number,seatType:yV.STANDARD},shape:{type:jU.RECTANGLE,width:e.width,height:e.height},isNew:!0}));d.length>0?(K(e=>[...e,...d]),Ek({title:`Added ${d.length} suggested seat(s). You can move or edit them.`,variant:"default"})):Ek({title:"No seats detected. Try a clearer image of the seating area.",variant:"default"})}catch(wW){wW instanceof Ta&&503===wW.status?Ek({title:"AI seat detection is not available",description:"The server is not configured for AI features. Please contact your administrato  r.",variant:"destructive"}):Ek({title:wW instanceof Error?wW.message:"Failed to detect seats",variant:"destructive"})}finally{B(!1)}}},[x,q,te]),ht=()=>{q&&(K(e=>e.filter(e=>e.seat.section!==q.name)),Q(null))},mt=()=>{oe(e=>Math.min(e+.25,3))},pt=()=>{oe(e=>Math.max(e-.25,.5))},ft=()=>{oe(1),ce({x:0,y:0})},gt=p.useCallback((e,t,n,s,r)=>{const{x:i,y:o}=((e,t)=>We?{x:Math.round(e/Ye)*Ye,y:Math.round(t/Ye)*Ye}:{x:e,y:t})(t,n),l=Math.max(0,Math.min(100,i)),c=Math.max(0,Math.min(100,o)),d={...e,...s&&{width:s},...r&&{height:r}};if(Re){if("section-level"===a&&"large"===g&&!q)return U({x:l,y:c}),Ee(d),Ne(!0),void D(null);const e=te.getValues(),t={id:`temp-${Date.now()}`,x:l,y:c,seat:{section:q?.name||e.section,sectionId:q?.id||e.sectionId,row:e.row,seatNumber:e.seatNumber,seatType:e.seatType},shape:d,isNew:!0};K(e=>[...e,t]);const n=String(parseInt(e.seatNumber)+1);return void te.setValue("seatNumber",n)}if("section-level"===a&&"large"===g&&!q)return U({x:l,y:c}),Ee(d),Ne(!0),void D(null);{const e=te.getValues(),t={id:`temp-${Date.now()}`,x:l,y:c,seat:{section:q?.name||e.section,sectionId:q?.id||e.sectionId,row:e.row,seatNumber:e.seatNumber,seatType:e.seatType},shape:d,isNew:!0};K(e=>[...e,t]);const n=String(parseInt(e.seatNumber)+1);te.setValue("seatNumber",n)}},[a,g,q,ee,R,te,V,Re]),xt=p.useCallback(e=>{Le(e);const t=Te.find(t=>t.id===e);t&&t.onClick?.()},[Te]),vt=p.useCallback((e,t)=>{if(!t)return;if(!Re)return;const{x:n,y:s}=t;if("large"===g&&q){const e=te.getValues(),t={id:`temp-${Date.now()}`,x:Math.max(0,Math.min(100,n)),y:Math.max(0,Math.min(100,s)),seat:{section:q.name,sectionId:e.sectionId,row:e.row,seatNumber:e.seatNumber,seatType:e.seatType},shape:Pe,isNew:!0};K(e=>[...e,t]);const a=String(parseInt(e.seatNumber)+1);te.setValue("seatNumber",a)}else if("large"===g){let e;switch(Re){case jU.RECTANGLE:e={type:jU.RECTANGLE,width:15,height:10};break;case jU.CIRCLE:e={type:jU.CIRCLE,radius:8};break;case jU.ELLIPSE:e={type:jU.ELLIPSE,width:15,height:10};break;default:return}e&&Ee(e),U({x:n,y:s}),Ne(!0),D(null)}else if("small"===g){const e=te.getValues(),t={id:`temp-${Date.now()}`,x:Math.max(0,Math.min(100,n)),y:Math.max(0,Math.min(100,s)),seat:{section:e.section,sectionId:e.sectionId,row:e.row,seatNumber:e.seatNumber,seatType:e.seatType},shape:Pe,isNew:!0};K(e=>[...e,t]);const a=String(parseInt(e.seatNumber)+1);te.setValue("seatNumber",a)}},[g,q,ee,R,te,V,Re]),yt=p.useCallback((e,t)=>{if(t){e.evt.preventDefault();const t=e.evt.deltaY>0?-.1:.1;oe(e=>Math.max(.5,Math.min(3,e+t)))}},[]),bt=p.useCallback(e=>{ce(t=>({x:t.x+e.x,y:t.y+e.y}))},[]),wt=p.useCallback((e,t,n)=>{let s=t,a=n;We&&(s=Math.round(t/Ye)*Ye,a=Math.round(n/Ye)*Ye),K(t=>t.map(t=>t.id===e?{...t,x:Math.max(0,Math.min(100,s)),y:Math.max(0,Math.min(100,a))}:t))},[We]),St=p.useCallback((e,t)=>{K(n=>{const s=n.map(n=>n.id===e?{...n,shape:t}:n),a=s.find(t=>t.id===e);if(a&&!a.isNew){const n=_e.current.get(e);n&&clearTimeout(n);const s=setTimeout(()=>{wV.updateCoordinates(e,a.x,a.y,t).catch(e=>{}),_e.current.delete(e)},500);_e.current.set(e,s)}return s})},[]),jt=p.useCallback((e,t,n)=>{let s=t,a=n;We&&(s=Math.round(t/Ye)*Ye,a=Math.round(n/Ye)*Ye),k(t=>t.map(t=>t.id===e?{...t,x:Math.max(0,Math.min(100,s)),y:Math.max(0,Math.min(100,a))}:t))},[We,Ye,Ye]),Ct=p.useCallback((e,t)=>{t?.shiftKey?(H(e),te.setValue("section",e.name),_(null),J([]),X([]),oe(1),ce({x:0,y:0})):(J([e.id]),_(e),H(null))},[te]),kt=e=>{H(e),te.setValue("section",e.name),_(null),oe(1),ce({x:0,y:0})},Nt=(e,t)=>{t?.shiftKey?(X(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id]),Q(e),J([])):(X([e.id]),Q(e),J([]))},_t=e=>{me(e)},Pt=e=>{fe(!0),be.reset({section:e.seat.section,sectionId:e.seat.sectionId,row:e.seat.row,seatNumber:e.seat.seatNumber,seatType:e.seat.seatType})},Et=e=>{W&&!W.isNew?Wt.mutate({seatId:W.id,data:e},{onSuccess:()=>fe(!1)}):W&&W.isNew&&(K(t=>t.map(t=>t.id===W.id?{...t,seat:e}:t)),Q(null),fe(!1),be.reset())},Rt=()=>{fe(!1),be.reset()},At=e=>{_(e),E(!0)},Tt=e=>{D(e.id),Ne(!0),e.shape&&(Ee(e.shape),Ae(e.shape.type))},Mt=()=>{Q(null),_(null),X([]),J([]),fe(!1)},Dt=p.useCallback((e,t)=>{X(e),J(t),Q(e.length>0?G.find(t=>t.id===e[0])??null:null),_(t.length>0?C.find(e=>e.id===t[0])??null:null),H(null)},[G,C]),Lt=e=>{D(e.id),V.reset({name:e.name}),T(!0),U(null)},Ft=te.watch("section");p.useEffect(()=>{se(Ft||"")},[Ft]),p.useEffect(()=>{fe(!1)},[W?.id]);const It=()=>function(e,t,n,s){const a=new Set;return e.forEach(e=>{e.seat.section&&a.add(e.seat.section)}),t&&t.forEach(e=>{a.add(e.name)}),"section-level"===s&&n&&n.forEach(e=>{a.add(e.name)}),Array.from(a).sort()}(G,at,C,a),Ot=Xs({mutationFn:async e=>{const{replaceSectionId:n,...s}=e;return await CV.create({layout_id:t,name:e.name,x_coordinate:e.x,y_coordinate:e.y,shape:e.shape?JSON.stringify(e.shape):void 0})},onSuccess:(e,n)=>{te.setValue("section",e.name),te.setValue("sectionId",e.id);const s=n.replaceSectionId;if("section-level"===a)if(s){let t=Pe;if(e.shape)try{const n=JSON.parse(e.shape);n&&"object"==typeof n&&n.type&&(t={...n,type:n.type})}catch(r){}const n={id:e.id,name:e.name,x:e.x_coordinate??50,y:e.y_coordinate??50,imageUrl:e.image_url||void 0,canvasBackgroundColor:e.canvas_background_color??"#e5e7eb",isNew:!1,shape:t};k(e=>e.map(e=>e.id===s?n:e)),_(e=>e?.id===s?n:e),H(e=>e?.id===s?n:e)}else{const t=$||{x:e.x_coordinate||50,y:e.y_coordinate||50};let n=Pe;if(e.shape)try{const t=JSON.parse(e.shape);n=t&&"object"==typeof t&&t.type?{...t,type:t.type}:Pe}catch(r){n=Pe}const s={id:e.id,name:e.name,x:t.x,y:t.y,imageUrl:e.image_url||void 0,canvasBackgroundColor:e.canvas_background_color??"#e5e7eb",isNew:!1,shape:n};k(e=>[...e,s]),Ee({type:jU.CIRCLE,radius:1.2})}U(null),T(!1),D(null),V.reset({name:""}),Ek({title:"Section created successfully"}),$e.invalidateQueries({queryKey:["sections","layout",t]})},onError:e=>{Ek({title:"Error",description:e instanceof Error?e.message:"Failed to create section",variant:"destructive"})}}),zt=Xs({mutationFn:async e=>await CV.update(e.sectionId,{name:e.name,x_coordinate:e.x,y_coordinate:e.y,file_id:e.file_id,shape:e.shape?JSON.stringify(e.shape):void 0}),onSuccess:e=>{let n;if(e.shape)try{const t=JSON.parse(e.shape);t&&"object"==typeof t&&t.type&&(n={...t,type:t.type})}catch(a){}const s=e.canvas_background_color??"#e5e7eb";k(t=>t.map(t=>t.id===e.id?{...t,name:e.name,x:e.x_coordinate||t.x,y:e.y_coordinate||t.y,imageUrl:e.image_url||t.imageUrl,canvasBackgroundColor:s,shape:void 0!==n?n:t.shape}:t)),_(t=>t&&t.id===e.id?{...t,name:e.name,x:e.x_coordinate||t.x,y:e.y_coordinate||t.y,canvasBackgroundColor:s,shape:void 0!==n?n:t.shape}:t),q?.id===e.id&&H(t=>t?{...t,name:e.name,canvasBackgroundColor:s}:null);te.getValues().section;e.name,T(!1),D(null),V.reset({name:""}),Ek({title:"Section updated successfully"}),$e.invalidateQueries({queryKey:["sections","layout",t]})},onError:e=>{Ek({title:"Error",description:e instanceof Error?e.message:"Failed to update section",variant:"destructive"})}}),Bt=p.useCallback(async e=>{if(q)try{await CV.update(q.id,{canvas_background_color:e}),k(t=>t.map(t=>t.id===q.id?{...t,canvasBackgroundColor:e}:t)),H(t=>t&&t.id===q.id?{...t,canvasBackgroundColor:e}:t),$e.invalidateQueries({queryKey:["sections","layout",t]})}catch(wW){Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to update canvas color",variant:"destructive"})}},[q,t,$e]);p.useEffect(()=>{const e=e=>{const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;if(("Delete"===e.key||"Backspace"===e.key)&&(Y.length>0||Z.length>0))return e.preventDefault(),Z.forEach(e=>{const t=C.find(t=>t.id===e);t&&Be.current?.(t)}),Y.forEach(e=>{const t=G.find(t=>t.id===e);t&&ze.current?.(t)}),X([]),J([]),Q(null),void _(null);if((e.ctrlKey||e.metaKey)&&"c"===e.key){if(W){e.preventDefault();const t=G.find(e=>e.id===W.id);return void(t&&(xe({...t}),ye(null)))}if(N){e.preventDefault();const t=C.find(e=>e.id===N.id);return void(t&&(ye({...t}),xe(null)))}}if((e.ctrlKey||e.metaKey)&&"v"===e.key){if(e.preventDefault(),ge){const e=te.getValues(),t=2,n=2,s=Math.min(100,Math.max(0,ge.x+t)),a=Math.min(100,Math.max(0,ge.y+n)),r=parseInt(e.seatNumber)||1,i=String(r+1),o={id:`temp-${Date.now()}`,x:s,y:a,seat:{section:q?.name||ge.seat.section,sectionId:q?.id||ge.seat.sectionId,row:ge.seat.row,seatNumber:i,seatType:ge.seat.seatType},shape:ge.shape?{...ge.shape}:void 0,isNew:!0};return K(e=>[...e,o]),Q(o),void te.setValue("seatNumber",String(parseInt(i)+1))}if(ve&&"section-level"===a&&"large"===g){const e=2,t=2,n=Math.min(100,Math.max(0,ve.x+e)),s=Math.min(100,Math.max(0,ve.y+t)),a=ve.name,r=C.map(e=>e.name);let i=a,o=1;for(;r.includes(i);)i=`${a} (${o})`,o++;const l={id:`temp-${Date.now()}`,name:i,x:n,y:s,imageUrl:ve.imageUrl,shape:ve.shape?{...ve.shape}:void 0,isNew:!0};return k(e=>[...e,l]),void _(l)}}if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key))return;const n=e.shiftKey?.1:1;if(W){e.preventDefault();const t=G.find(e=>e.id===W.id);if(!t)return;let s=t.x,a=t.y;switch(e.key){case"ArrowUp":a=Math.max(0,t.y-n);break;case"ArrowDown":a=Math.min(100,t.y+n);break;case"ArrowLeft":s=Math.max(0,t.x-n);break;case"ArrowRight":s=Math.min(100,t.x+n)}return wt(W.id,s,a),void(t.isNew||wV.updateCoordinates(W.id,s,a,t.shape).catch(e=>{}))}if(N){e.preventDefault();const t=C.find(e=>e.id===N.id);if(!t)return;let s=t.x,a=t.y;switch(e.key){case"ArrowUp":a=Math.max(0,t.y-n);break;case"ArrowDown":a=Math.min(100,t.y+n);break;case"ArrowLeft":s=Math.max(0,t.x-n);break;case"ArrowRight":s=Math.min(100,t.x+n)}return void jt(N.id,s,a)}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[W,N,Y,Z,G,C,wt,jt,zt,ge,ve,a,g,q,te]);const $t=p.useCallback((e,t)=>{k(n=>n.map(n=>n.id===e?{...n,shape:t}:n))},[]),Ut=p.useCallback((e,t)=>{K(n=>n.map(n=>n.id===e?{...n,shape:{...n.shape||{type:jU.CIRCLE,radius:1.2},...t}}:n)),me(n=>n&&n.id===e?{...n,shape:{...n.shape||{type:jU.CIRCLE,radius:1.2},...t}}:n)},[]),Vt=p.useCallback((e,t)=>{const n=e=>({...e||{type:jU.RECTANGLE,width:3,height:2},...t});k(t=>t.map(t=>t.id===e?{...t,shape:n(t.shape)}:t)),_(t=>t&&t.id===e?{...t,shape:n(t.shape)}:t)},[]),qt=V.handleSubmit(e=>{const t=e.name.trim()||"Section";if(M){const e=C.find(e=>e.id===M),n=at?.find(e=>e.id===M);e?e.isNew?Ot.mutate({name:t,x:e.x,y:e.y,shape:e.shape,replaceSectionId:M}):zt.mutate({sectionId:M,name:t,x:e.x,y:e.y,shape:e.shape}):n&&zt.mutate({sectionId:M,name:t,x:n.x_coordinate??void 0,y:n.y_coordinate??void 0})}else Ot.mutate({name:t,x:"section-level"===a?$?.x??50:void 0,y:"section-level"===a?$?.y??50:void 0,shape:"section-level"===a&&Pe?Pe:void 0})}),Ht=()=>{T(!1),D(null),V.reset({name:""}),U(null)};p.useEffect(()=>{N&&V.setValue("name",N.name)},[N,R,V]);const Gt=Xs({mutationFn:async n=>{const s=w&&w!==f,a=n.map(n=>n.isNew?{venue_id:e,layout_id:t,section:n.seat.section,row:n.seat.row,seat_number:n.seat.seatNumber,seat_type:n.seat.seatType,x_coordinate:n.x,y_coordinate:n.y,shape:n.shape?JSON.stringify(n.shape):void 0}:{id:n.id,x_coordinate:n.x,y_coordinate:n.y,shape:n.shape?JSON.stringify(n.shape):void 0});(a.length>0||s)&&await wV.bulkOperations({venueId:e,seats:a,fileId:s?w:void 0,layoutId:t})},onSuccess:()=>{$e.invalidateQueries({queryKey:["seats",t]}),$e.invalidateQueries({queryKey:["seats",e]}),$e.invalidateQueries({queryKey:["layouts",t]}),$e.invalidateQueries({queryKey:["layouts",t,"with-seats"]}),$e.invalidateQueries({queryKey:["layouts","venue",e]}),K(e=>e.map(e=>({...e,isNew:!1}))),"small"===g||k([]),K([]),Q(null),Ce(!1),Ek({title:"Seats Saved",description:"Seat layout has been saved successfully.",variant:"default"})},onError:e=>{Ce(!1);let t="Failed to save seats. Please try again.";if(e?.message)try{const n=JSON.parse(e.message);t=n.detail||n.message||e.message}catch{t=e.message}Ek({title:"Save Failed",description:t,variant:"destructive"})}}),Kt=Xs({mutationFn:async n=>{await wV.bulkOperations({venueId:e,seats:[{id:n,delete:!0}],layoutId:t})},onSuccess:()=>{$e.invalidateQueries({queryKey:["seats",e]}),Q(null)}}),Wt=Xs({mutationFn:async({seatId:e,data:t})=>{let n=t.sectionId;if(!n&&t.section)if(at&&"seat-level"===a){const e=at.find(e=>e.name===t.section);n=e?.id}else if("section-level"===a){const e=C.find(e=>e.name===t.section);n=e?.id}return await wV.update(e,{section_id:n||t.section,row:t.row,seat_number:t.seatNumber,seat_type:t.seatType})},onSuccess:()=>{$e.invalidateQueries({queryKey:["seats",e]}),be.reset(),me(null),Q(null)}}),Qt=()=>{Ce(!0)},Yt=async()=>{if(Ce(!1),"section-level"===a&&"large"===g){const n=C.filter(e=>!e.isNew),s=C.filter(e=>e.isNew);try{const e=n.map(e=>{const t=at?.find(t=>t.id===e.id);return CV.update(e.id,{name:e.name,x_coordinate:e.x,y_coordinate:e.y,canvas_background_color:e.canvasBackgroundColor||void 0,shape:e.shape?JSON.stringify(e.shape):void 0,file_id:t?.file_id||void 0})}),a=s.map(e=>CV.create({layout_id:t,name:e.name,x_coordinate:e.x,y_coordinate:e.y,canvas_background_color:e.canvasBackgroundColor||void 0,shape:e.shape?JSON.stringify(e.shape):void 0}));await Promise.all([...e,...a]),$e.invalidateQueries({queryKey:["sections","layout",t]}),k(e=>e.map(e=>({...e,isNew:!1}))),Gt.mutate(G)}catch(e){Ek({title:"Error",description:e instanceof Error?e.message:"Failed to save sections. Please try again.",variant:"destructive"})}}else Gt.mutate(G)},Xt=e=>{e.isNew||Kt.mutate(e.id),K(t=>t.filter(t=>t.id!==e.id)),W?.id===e.id&&Q(null),X(t=>t.filter(t=>t!==e.id))},Zt=Xs({mutationFn:async e=>await CV.delete(e),onSuccess:(e,n)=>{k(e=>e.filter(e=>e.id!==n)),K(e=>e.filter(e=>e.seat.sectionId!==n&&e.seat.section!==n)),N?.id===n&&_(null),J(e=>e.filter(e=>e!==n)),q?.id===n&&H(null),Ek({title:"Section deleted successfully"}),$e.invalidateQueries({queryKey:["sections","layout",t]})},onError:e=>{Ek({title:"Error",description:e instanceof Error?e.message:"Failed to delete section",variant:"destructive"})}}),Jt=e=>{if(e.isNew){const t=e.id;k(e=>e.filter(e=>e.id!==t)),K(e=>e.filter(e=>e.seat.sectionId!==t&&e.seat.section!==t)),N?.id===t&&_(null),J(e=>e.filter(e=>e!==t)),q?.id===t&&H(null),Ek({title:"Section removed"})}else{const t=e.seat_count??0;if(t>0)return void Ek({title:"Cannot delete section",description:`This section has ${t} seat${1===t?"":"s"} attached. Please remove all seats before deleting the section.`,variant:"destructive"});Zt.mutate(e.id)}};p.useEffect(()=>{ze.current=Xt,Be.current=Jt});const en=async()=>{if(Oe.current)try{ae?document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen():Oe.current.requestFullscreen?await Oe.current.requestFullscreen():Oe.current.webkitRequestFullscreen?await Oe.current.webkitRequestFullscreen():Oe.current.mozRequestFullScreen?await Oe.current.mozRequestFullScreen():Oe.current.msRequestFullscreen&&await Oe.current.msRequestFullscreen()}catch(e){}};p.useEffect(()=>{const e=()=>{const e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;re(!!e)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]);const tn=p.useCallback(e=>{const t=G.filter(e=>Y.includes(e.id)),n=C.filter(e=>Z.includes(e.id)),s=[...t.map(e=>e.x),...n.map(e=>e.x)],a=[...t.map(e=>e.y),...n.map(e=>e.y)];if(0===s.length&&0===a.length)return;const r=Math.min(...s),i=Math.max(...s),o=Math.min(...a),l=Math.max(...a),c="left"===e?r:"right"===e?i:"center"===e?(r+i)/2:void 0,d="top"===e?o:"bottom"===e?l:"middle"===e?(o+l)/2:void 0;t.length>0&&(void 0!==c||void 0!==d)&&K(e=>e.map(e=>Y.includes(e.id)?{...e,x:void 0!==c?c:e.x,y:void 0!==d?d:e.y}:e)),n.length>0&&(void 0!==c||void 0!==d)&&k(e=>e.map(e=>Z.includes(e.id)?{...e,x:void 0!==c?c:e.x,y:void 0!==d?d:e.y}:e))},[G,C,Y,Z]),nn=c.jsxs("div",{className:ae?"flex flex-col flex-1 min-h-0 space-y-4":"space-y-4",children:[c.jsxs("div",{className:ae?"flex flex-col flex-1 min-h-0 space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700 ease-in-out":"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700 ease-in-out",children:[c.jsx(HV,{layoutName:n,isLoading:nt,seatsError:st,venueType:g,sectionMarkers:C,seats:G,viewingSection:q,displayedSeats:ot,onToggleDatasheet:()=>ue(!0),readOnly:r,onSave:Qt,isSaving:Gt.isPending,isFullscreen:ae,onToggleFullscreen:en,mainImageUrl:x,isPlacingSeats:ee,isPlacingSections:R,onClearAllPlacements:()=>{"small"===g||k([]),K([]),Q(null)},onMainImageSelect:async e=>{const t=e.target.files?.[0];if(t)try{Se(!0);const e=await QP.uploadImage(t);v(e.url),S(e.id),l&&l(e.url,e.id),setTimeout(()=>{if(Ie.current){const e=Ie.current.getBoundingClientRect(),t=Math.floor(e.width)||800,n=Math.floor(e.height)||600;Ve({width:t,height:n})}},100)}catch(n){alert("Failed to upload image. Please try again.")}finally{Se(!1)}},onDetectSections:x&&"section-level"===a?dt:void 0,isDetectingSections:I,onDetectSeats:x&&"small"===g?ut:void 0,isDetectingSeats:z,onRemoveImage:x?async()=>{v(void 0),S(void 0),await(d?.())}:void 0,canvasBackgroundColor:y,onCanvasBackgroundColorChange:x?void 0:j,snapToGrid:We,onSnapToGridChange:Qe,gridSize:Ye,onGridSizeChange:Xe,showGrid:Ze,onShowGridChange:Je}),c.jsxs("div",{className:ae?"flex flex-col flex-1 min-h-0 space-y-4":"space-y-4",children:["small"===g&&c.jsx(OV,{selectedShapeType:Re,onShapeTypeSelect:r?()=>{}:Ae,selectedSeat:W,selectedSection:"section-level"===a?N:null,onSeatEdit:Pt,onSeatView:_t,onSectionEdit:Tt,onSectionView:"section-level"===a?At:void 0,onSeatDelete:Xt,onSectionDelete:Jt,onSeatShapeStyleChange:Ut,onSectionShapeStyleChange:Vt,onAlign:tn,selectedSeatCount:Y.length,selectedSectionCount:Z.length,seatPlacement:{form:te,uniqueSections:It(),sectionsData:at,sectionSelectValue:ne,onSectionSelectValueChange:se,onNewSection:()=>{T(!0),D(null),V.reset({name:""})},onManageSections:()=>F(!0)},seatEditControls:pe&&W&&!r?c.jsx(LV,{form:be,uniqueSections:It(),sectionsData:at,sectionMarkers:C,designMode:a,onSave:Et,onCancel:Rt,isUpdating:Wt.isPending,standalone:!0}):void 0,readOnly:r}),"large"===g&&!q&&c.jsx(c.Fragment,{children:ke?c.jsx(qV,{initialName:M&&C.find(e=>e.id===M)?.name||"",isEditing:!!M,selectedShapeType:Re,onShapeTypeSelect:e=>{Ae(e)},onSave:e=>{if(M){const t=C.find(e=>e.id===M);t&&(t.isNew?Ot.mutate({name:e,x:t.x,y:t.y,shape:Pe??t.shape,replaceSectionId:M}):zt.mutate({sectionId:M,name:e,x:t.x,y:t.y,shape:Pe??t.shape}))}else Ot.mutate({name:e,x:"section-level"===a?$?.x??50:void 0,y:"section-level"===a?$?.y??50:void 0,shape:"section-level"===a&&Pe?Pe:void 0});Ne(!1),U(null),D(null)},onCancel:()=>{Ne(!1),U(null),D(null)}}):c.jsx(IV,{selectedShapeType:Re,onShapeTypeSelect:r?()=>{}:Ae,selectedSeat:null,selectedSection:N,onSeatEdit:Pt,onSeatView:_t,onSectionEdit:Tt,onSectionView:At,onSeatDelete:Xt,onSectionDelete:Jt,onSeatShapeStyleChange:Ut,onSectionShapeStyleChange:Vt,onAlign:tn,selectedSeatCount:0,selectedSectionCount:Z.length,readOnly:r})}),"small"===g?c.jsx("div",{className:ae?"flex-1 min-h-0 flex flex-col":void 0,style:ae?{minHeight:400}:void 0,children:c.jsx(zV,{imageUrl:x,canvasBackgroundColor:y,containerRef:Ie,dimensionsReady:qe,containerDimensions:Ue,containerStyle:ae?"flex":"fixed",seats:ot,selectedSeatId:W?.id??null,selectedSeatIds:Y,isPlacingSeats:ee,readOnly:r,zoomLevel:ie,panOffset:le,onSeatClick:Nt,onSeatDragEnd:wt,onSeatShapeTransform:St,onImageClick:vt,onDeselect:Mt,onShapeDraw:gt,onShapeOverlayClick:xt,onWheel:yt,onPan:bt,onMarkersInRect:Dt,onZoomIn:mt,onZoomOut:pt,onResetZoom:ft,selectedShapeTool:Re,shapeOverlays:Fe,selectedOverlayId:De,showGrid:Ze,gridSize:Ye})}):c.jsxs("div",{ref:Ie,className:`relative border rounded-lg overflow-hidden select-none w-full transition-colors ${x?"bg-gray-100":""} ${Ge?"ring-2 ring-primary bg-primary/5":""} ${ae?"flex-1 min-h-0":""}`,style:{height:ae?void 0:"600px",...ae?{minHeight:400}:{},width:"100%",touchAction:"none",overscrollBehavior:"contain",...x?{}:{backgroundColor:y}},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",Ke(!0)},onDragLeave:e=>{e.currentTarget===e.target&&Ke(!1)},onDrop:e=>{e.preventDefault(),Ke(!1);const t=e.dataTransfer.getData("application/json");if(t)try{const{shapeType:n,dragSource:s}=JSON.parse(t);if("shape-toolbox"!==s||!n)return;const a=n;if(!Object.values(jU).includes(a))return;const r=Ie.current?.getBoundingClientRect();if(!r)return;const i=e.clientX-r.left,o=e.clientY-r.top,l=(i-le.x)/ie/Ue.width*100,c=(o-le.y)/ie/Ue.height*100,d={[jU.CIRCLE]:{type:jU.CIRCLE,radius:2,fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.RECTANGLE]:{type:jU.RECTANGLE,width:4,height:3,fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.ELLIPSE]:{type:jU.ELLIPSE,width:4,height:3,fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.POLYGON]:{type:jU.POLYGON,points:[-1.5,-1,1.5,-1,2,1,0,2,-2,1],fillColor:"#60a5fa",strokeColor:"#2563eb"},[jU.FREEFORM]:{type:jU.FREEFORM,points:[0,0,2,0,3,2,2,3,0,3,-1,2],fillColor:"#60a5fa",strokeColor:"#2563eb"}}[a];if(!d)return;gt(d,l,c)}catch(n){}},children:[qe?c.jsx(EV,{imageUrl:x,canvasBackgroundColor:y,seats:[],sections:C,selectedSeatId:null,selectedSectionId:N?.id||null,selectedSeatIds:[],selectedSectionIds:Z,onMarkersInRect:Dt,isPlacingSeats:!1,isPlacingSections:R,readOnly:r,zoomLevel:ie,panOffset:le,onSeatClick:Nt,onSectionClick:Ct,onSectionDragEnd:jt,onSeatDragEnd:wt,onSeatShapeTransform:St,onSectionShapeTransform:$t,shapeOverlays:Fe,onImageClick:vt,onDeselect:Mt,onShapeDraw:gt,onShapeOverlayClick:xt,onWheel:yt,onPan:bt,containerWidth:Ue.width,containerHeight:Ue.height,venueType:g,selectedShapeTool:Re,selectedOverlayId:De}):c.jsx("div",{className:"flex items-center justify-center w-full h-full py-12 text-muted-foreground",children:"Initializing canvas..."}),c.jsx(vO,{zoomLevel:ie,panOffset:le,onZoomIn:mt,onZoomOut:pt,onResetZoom:ft})]})]})]}),c.jsx($V,{isOpen:de,onOpenChange:ue,readOnly:r,viewingSection:q,venueType:g,displayedSeats:ot,seats:G,sectionMarkers:C,selectedSeat:W,isPlacingSeats:ee,isSectionFormOpen:A,editingSectionId:M,sectionForm:V,selectedSectionMarker:N,createSectionMutationPending:Ot.isPending,updateSectionMutationPending:zt.isPending,onSeatClick:Nt,onDeleteSeat:Xt,onOpenNewSectionForm:()=>{D(null);const e=`Section ${C.length+1}`;V.reset({name:e}),T(!0),U(null)},onCancelSectionForm:Ht,onSaveSectionForm:qt,onSectionMarkerClick:(e,t)=>{t.stopPropagation(),_(e)},onOpenSectionDetail:kt,onEditSectionFromSheet:Lt,onDeleteSection:Jt,onSetViewingSeat:me,onEditSeat:Pt,onSetSelectedSeat:Q,onSetIsDatasheetOpen:ue,seatEditFormReset:be.reset}),c.jsx(DV,{viewingSeat:he,isOpen:!!he,onOpenChange:e=>{e||(me(null),Q(null))},isPlacingSeats:ee,isDeleting:Kt.isPending,onEdit:()=>{he&&Pt(he)},onDelete:()=>{he&&(Xt(he),me(null),Q(null))}}),"large"===g&&c.jsx(UV,{selectedSectionMarker:N,seats:G,isOpen:P,onOpenChange:e=>{E(e)},onOpenSectionDetail:kt,onEdit:e=>Lt(e),onDelete:Jt})]});if(!e)return c.jsx("div",{className:"p-4 text-destructive",children:"Venue ID is required"});if(!t)return c.jsx("div",{className:"p-4 text-destructive",children:"Layout ID is required"});if("large"===g&&q){const e=c.jsx(BV,{viewingSection:q,className:ae?`${m||""} flex-1 min-h-0 flex flex-col`.trim():m,readOnly:r,displayedSeats:ot,selectedSeat:W,seatPlacementForm:te,uniqueSections:It(),sectionsData:at,sectionSelectValue:ne,onSectionSelectValueChange:se,containerRef:Ie,dimensionsReady:qe,containerDimensions:Ue,zoomLevel:ie,panOffset:le,isPlacingSeats:ee,isUploadingImage:we,onBack:()=>{H(null),oe(1),ce({x:0,y:0})},onSave:Qt,onClearSectionSeats:ht,onSectionImageSelect:lt,onRemoveSectionImage:ct,onSeatClick:Nt,selectedSeatIds:Y,onSeatDragEnd:wt,onSeatShapeTransform:St,onSeatShapeStyleChange:Ut,onImageClick:vt,onDeselect:Mt,onWheel:yt,onPan:bt,onMarkersInRect:Dt,onZoomIn:mt,onZoomOut:pt,onResetZoom:ft,onNewSection:()=>{H(null),Ne(!0),D(null)},saveSeatsMutationPending:Gt.isPending,seats:G,onDeleteSeat:Xt,onSetViewingSeat:me,onEditSeat:Pt,onSetSelectedSeat:Q,seatEditFormReset:be.reset,placementShape:Pe,onPlacementShapeChange:Ee,selectedShapeTool:Re,onShapeToolSelect:Ae,onShapeDraw:gt,shapeOverlays:Te,selectedOverlayId:De,onShapeOverlayClick:xt,onDetectSeats:ut,isDetectingSeats:z,canvasBackgroundColor:y,onCanvasBackgroundColorChange:Bt,isFullscreen:ae,onToggleFullscreen:en,showGrid:Ze,gridSize:Ye,seatEditControls:pe&&W&&!r?c.jsx(LV,{form:be,uniqueSections:It(),sectionsData:at,sectionMarkers:C,designMode:a,viewingSection:q,onSave:Et,onCancel:Rt,isUpdating:Wt.isPending,standalone:!0}):void 0});return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:Oe,className:ae?"h-screen w-screen bg-background overflow-auto":"",children:ae?c.jsx("div",{className:"h-full w-full flex flex-col bg-background p-6",children:e}):e}),c.jsx(DV,{viewingSeat:he,isOpen:!!he,onOpenChange:e=>{e||me(null)},isPlacingSeats:ee,isDeleting:Kt.isPending,onEdit:()=>he&&Pt(he),onDelete:()=>{he&&(Xt(he),me(null))}}),c.jsx(jE,{open:je,onOpenChange:e=>!e&&Ce(!1),title:"Save Seat Layout",description:G.length>0?`Are you sure you want to save ${G.length} seat${1===G.length?"":"s"}? This will update the layout with your current seat placements across all sections.`:"Are you sure you want to save? This will update the layout.",confirmAction:{label:"Save",variant:"default",onClick:Yt,loading:Gt.isPending},cancelAction:{label:"Cancel",onClick:()=>Ce(!1)}})]})}return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:Oe,className:ae?"h-screen w-screen bg-background overflow-auto":"",children:ae?c.jsx("div",{className:"h-full w-full flex flex-col bg-background p-6",children:nn}):c.jsx(bl,{className:m,children:c.jsx("div",{className:"p-6",children:nn})})}),c.jsx(jE,{open:je,onOpenChange:Ce,title:"Save Seat Layout",description:G.length>0?`Are you sure you want to save ${G.length} seat${1===G.length?"":"s"}? This will update the layout with your current seat placements.`:"Are you sure you want to save? This will update the layout.",confirmAction:{label:"Save",variant:"default",onClick:Yt,loading:Gt.isPending},cancelAction:{label:"Cancel",onClick:()=>Ce(!1)}}),"seat-level"===a&&c.jsx(VV,{open:L,onOpenChange:F,sections:at,onEdit:e=>{D(e.id),V.reset({name:e.name}),U(null)},onDelete:Jt,isDeleting:Zt.isPending,form:V,editingSectionId:M,isUpdating:zt.isPending,onSave:qt,onCancelEdit:()=>{D(null),V.reset({name:""})}}),c.jsx(MV,{open:A,onOpenChange:e=>{e||(T(!1),D(null),V.reset({name:""}),U(null))},form:V,editingSectionId:M,isCreating:Ot.isPending,isUpdating:zt.isPending,onSave:qt,onCancel:Ht})]})}function KV({data:e=[],loading:t=!1,onCreate:n,onEdit:s,onDelete:a,onSearch:r,className:i}){const{t:o}=fr(),l=[IP({accessorKey:"code",header:()=>o("pages.settings.ticketing.et.code","Code"),size:100}),LP({accessorKey:"name",header:()=>o("pages.settings.ticketing.et.name","Name"),size:150}),zP({header:()=>o("common.actions","Actions"),size:180,actions:[...s?[{icon:Tg,onClick:e=>s(e),title:"Edit"}]:[],...a?[{icon:Hg,onClick:e=>a(e),title:"Delete",className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors"}]:[]]})];return c.jsx("div",{className:i,children:c.jsx($P,{data:e,columns:l,title:o("pages.settings.ticketing.et.title","EventTypes"),description:o("pages.settings.ticketing.et.list","EventType List"),loading:t,onCreate:n,onSearch:r,manualFiltering:!!r,useDefaultColumns:!1})})}function WV(e){return{id:e.id,code:e.code,name:e.name,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0}}class QV{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchEventTypes(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.eventTypes.replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(WV),pagination:l}}catch(t){throw t}}async searchEventTypes(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.endpoints.eventTypes.replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(WV)}catch(n){throw n}}async fetchEventTypeById(e){try{const t=this.endpoints.eventTypes.replace(/\/$/,"");return WV(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createEventType(e){try{return WV(await this.apiClient.post(this.endpoints.eventTypes,e,{requiresAuth:!0}))}catch(t){throw t}}async updateEventType(e,t){try{const n=this.endpoints.eventTypes.replace(/\/$/,"");return WV(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteEventType(e){try{const t=this.endpoints.eventTypes.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}const YV=p.createContext(null);function XV({children:e,config:t}){const n=p.useMemo(()=>new QV(t),[t.apiClient,t.endpoints?.eventTypes]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(YV.Provider,{value:s,children:e})}const ZV={code:"",name:""};function JV({open:e,onOpenChange:t,onSubmit:n,loading:s=!1,error:a=null}){const{t:r}=fr(),i=Ua(),[o,l]=p.useState(ZV),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(0),[x,v]=p.useState(null),y=p.useRef(null),b=p.useRef(null);p.useEffect(()=>{v(a)},[a]);const w=()=>{const e={};return o.code||(e.code=r("pages.settings.ticketing.et.codeRequired","Code is required")),o.name||(e.name=r("pages.settings.ticketing.et.nameRequired","Name is required")),u(e),0===Object.keys(e).length},S=async()=>{try{const e={code:o.code,name:o.name};await n(e),l(ZV),u({}),m(!1),g(e=>e+1)}catch(e){m(!1)}},j=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),x&&v(null)},C=()=>{l(ZV),u({}),t(!1)},k=()=>{l({...ZV}),u({}),v(null),g(e=>e+1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{y.current?.focus()})},[e,f]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&h)return e.preventDefault(),e.stopPropagation(),void m(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h?s||S():!s&&w()&&m(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||k())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,h,s,o]);return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:C,title:r("pages.settings.ticketing.et.createTitle","Create EventType"),maxWidth:"500px",loading:s,showClearButton:!0,onClear:k,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:r("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>C(),disabled:s},{label:s?r("pages.settings.ticketing.et.creating","Creating..."):r("pages.settings.ticketing.et.create","Create EventType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),b.current&&b.current.requestSubmit()},disabled:s}],children:c.jsxs("form",{ref:b,onSubmit:async e=>{e.preventDefault(),w()&&m(!0)},className:al(i.spacingFormSection,"w-full"),children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:al("grid grid-cols-1",i.gapForm),children:[c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"code",className:al(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.et.code","Code")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"code",ref:y,type:"text",value:o.code,onChange:e=>j("code",e.target.value),className:al(i.inputHeight,i.textSize,d.code&&"border-destructive"),disabled:s,placeholder:r("pages.settings.ticketing.et.codePlaceholder","Enter code")})}),c.jsx(Bl,{className:i.textSizeSmall,children:d.code})]}),c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"name",className:al(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.et.name","Name")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"name",type:"text",value:o.name,onChange:e=>j("name",e.target.value),className:al(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:s,placeholder:r("pages.settings.ticketing.et.namePlaceholder","Enter name")})}),c.jsx(Bl,{className:i.textSizeSmall,children:d.name})]})]})}),x&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[r("common.error","ERROR"),":"]}),c.jsx("span",{children:x.message||r("pages.settings.ticketing.et.createError","Failed to create EventType")})]})})]},f)}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||setTimeout(()=>{y.current?.focus()},0)},title:r("pages.settings.ticketing.et.confirmCreateTitle","Confirm EventType Creation"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:r("pages.settings.ticketing.et.confirmCreateDescription","Are you sure you want to create a new event-type?")})}),confirmAction:{label:s?r("pages.settings.ticketing.et.creating","Creating..."):r("pages.settings.ticketing.et.confirmCreate","Confirm & Create"),onClick:S,loading:s,disabled:s},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:s,onClick:()=>m(!1)}})]})}function eq({open:e,onOpenChange:t,et:n,onSubmit:s,loading:a=!1,error:r=null}){const{t:i}=fr(),o=Ua(),[l,d]=p.useState({code:"",name:""}),[u,h]=p.useState({code:"",name:""}),[m,f]=p.useState({}),[g,x]=p.useState(!1),[v,y]=p.useState(0),[b,w]=p.useState(null),S=p.useRef(null),j=p.useRef(null);p.useEffect(()=>{w(r)},[r]),p.useEffect(()=>{if(e&&n){const e={code:n.code||"",name:n.name||""};d(e),h(e),f({}),w(null),y(e=>e+1)}},[e,n]);const C=()=>{const e={};return l.code||(e.code=i("pages.settings.ticketing.et.codeRequired","Code is required")),l.name||(e.name=i("pages.settings.ticketing.et.nameRequired","Name is required")),f(e),0===Object.keys(e).length},k=async()=>{if(n)try{const e={code:l.code,name:l.name};await s(n.id,e),x(!1),t(!1)}catch(e){x(!1)}},N=(e,t)=>{d(n=>({...n,[e]:t})),m[e]&&f(t=>({...t,[e]:void 0})),b&&w(null)},_=()=>{n&&d(u),f({}),t(!1)},P=()=>{n&&(d({...u}),f({}),w(null),y(e=>e+1))};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{S.current?.focus()})},[e,v,n]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&g)return e.preventDefault(),e.stopPropagation(),void x(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),g?a||k():!a&&C()&&x(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||P())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,g,a,l,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:_,title:i("pages.settings.ticketing.et.editTitle","Edit EventType"),maxWidth:"500px",loading:a,showClearButton:!0,onClear:P,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Reset",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:i("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>_(),disabled:a},{label:a?i("pages.settings.ticketing.et.updating","Updating..."):i("pages.settings.ticketing.et.update","Update EventType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),j.current&&j.current.requestSubmit()},disabled:a}],children:c.jsxs("form",{ref:j,onSubmit:async e=>{e.preventDefault(),C()&&x(!0)},className:al(o.spacingFormSection,"w-full"),children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",o.paddingForm),children:c.jsxs("div",{className:al("grid grid-cols-1",o.gapForm),children:[c.jsxs(Fl,{className:o.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"code",className:al(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.et.code","Code")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"code",ref:S,type:"text",value:l.code,onChange:e=>N("code",e.target.value),className:al(o.inputHeight,o.textSize,m.code&&"border-destructive"),disabled:a,placeholder:i("pages.settings.ticketing.et.codePlaceholder","Enter code")})}),c.jsx(Bl,{className:o.textSizeSmall,children:m.code})]}),c.jsxs(Fl,{className:o.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"name",className:al(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.et.name","Name")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"name",type:"text",value:l.name,onChange:e=>N("name",e.target.value),className:al(o.inputHeight,o.textSize,m.name&&"border-destructive"),disabled:a,placeholder:i("pages.settings.ticketing.et.namePlaceholder","Enter name")})}),c.jsx(Bl,{className:o.textSizeSmall,children:m.name})]})]})}),b&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",o.paddingContainer,o.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[i("common.error","ERROR"),":"]}),c.jsx("span",{children:b.message||i("pages.settings.ticketing.et.updateError","Failed to update EventType")})]})})]},v)}),c.jsx(jE,{open:g,onOpenChange:e=>{x(e),e||setTimeout(()=>{S.current?.focus()},0)},title:i("pages.settings.ticketing.et.confirmUpdateTitle","Confirm EventType Update"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:al("mb-3",o.textSizeSmall),children:i("pages.settings.ticketing.et.confirmUpdateDescription","Are you sure you want to update this event-type?")})}),confirmAction:{label:a?i("pages.settings.ticketing.et.updating","Updating..."):i("pages.settings.ticketing.et.confirmUpdate","Confirm & Update"),onClick:k,loading:a,disabled:a},cancelAction:{label:i("common.cancel","Cancel"),variant:"outline",disabled:a,onClick:()=>x(!1)}})]}):null}function tq({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToEventType:n}){const s=function(){const e=p.useContext(YV);if(!e)throw new Error("useEventTypeService must be used within EventTypeProvider");return e.service}(),{toast:a}=Rk(),{t:r}=fr(),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(""),[g,x]=p.useState({page:1,pageSize:50}),[v,y]=p.useState(!1),[b,w]=p.useState(null),{data:S,isLoading:j}=function(e,t){const{search:n,pagination:s,enabled:a=!0}=t||{},r=n?.trim()||void 0;return Ys({queryKey:["et",r,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,n=s?.pageSize||100;return r?e.searchEventTypes(r,n).then(e=>({data:e,pagination:{page:1,pageSize:n,total:e.length,totalPages:1}})):e.fetchEventTypes({skip:t,limit:n})},enabled:a,staleTime:3e5})}(s,{search:m||void 0,pagination:g}),C=S?.data||[],k=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteEventType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["et"]})}})}(s),N=function(e){const t=Vs();return Xs({mutationFn:t=>e.createEventType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["et"]})}})}(s),_=function(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateEventType(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["et"]}),t.invalidateQueries({queryKey:["et",n.id]})}})}(s),P=p.useCallback(e=>{w(e),y(!0)},[]),E=p.useCallback(async()=>{if(b)try{await k.mutateAsync(b.id),a({title:r("common.success"),description:r("pages.settings.ticketing.et.deleted")}),y(!1),w(null)}catch(e){a({title:r("common.error"),description:r("common.errorOccurred"),variant:"destructive"})}},[b,k,a,r]),R=p.useCallback(e=>{h(e),d(!0)},[]),A=p.useCallback(()=>{o(!0)},[]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const T=p.useCallback(async e=>{try{await N.mutateAsync(e),a({title:r("common.success","Success"),description:r("pages.settings.ticketing.et.created","EventType created successfully")})}catch(t){throw a({title:r("common.error","Error"),description:r("pages.settings.ticketing.et.createError","Failed to create event-type"),variant:"destructive"}),t}},[N,a,r]),M=p.useCallback(async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),a({title:r("common.success","Success"),description:r("pages.settings.ticketing.et.updated","EventType updated successfully")})}catch(n){throw a({title:r("common.error","Error"),description:r("pages.settings.ticketing.et.updateError","Failed to update event-type"),variant:"destructive"}),n}},[_,a,r]),D=p.useCallback(e=>{f(e),x(e=>({...e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(KV,{data:C,loading:j,onCreate:A,onEdit:R,onDelete:P,onSearch:D}),c.jsx(JV,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:T,loading:N.isPending,error:N.error}),c.jsx(eq,{open:l,onOpenChange:e=>{d(e),e||h(null)},et:u,onSubmit:M,loading:_.isPending,error:_.error}),c.jsx(jE,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:r("pages.settings.ticketing.et.confirmDeleteTitle","Delete EventType"),description:b?r("pages.settings.ticketing.et.confirmDelete",{defaultValue:`Are you sure you want to delete "${b.name||b.id}"? This action cannot be undone.`,name:b.name||b.id}):"",confirmText:"delete",confirmTextLabel:r("common.typeToConfirm","Type 'delete' to confirm"),confirmAction:{label:r("common.delete","Delete"),variant:"destructive",onClick:E,loading:k.isPending,disabled:k.isPending},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:k.isPending}})]})}function nq({data:e=[],loading:t=!1,onCreate:n,onEdit:s,onDelete:a,onSearch:r,className:i}){const{t:o}=fr(),l=[IP({accessorKey:"code",header:()=>o("pages.settings.ticketing.vt.code","Code"),size:100}),LP({accessorKey:"name",header:()=>o("pages.settings.ticketing.vt.name","Name"),size:150}),zP({header:()=>o("common.actions","Actions"),size:180,actions:[...s?[{icon:Tg,onClick:e=>s(e),title:"Edit"}]:[],...a?[{icon:Hg,onClick:e=>a(e),title:"Delete",className:"h-7 w-7 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors"}]:[]]})];return c.jsx("div",{className:i,children:c.jsx($P,{data:e,columns:l,title:o("pages.settings.ticketing.vt.title","VenueTypes"),description:o("pages.settings.ticketing.vt.list","VenueType List"),loading:t,onCreate:n,onSearch:r,manualFiltering:!!r,useDefaultColumns:!1})})}const sq={code:"",name:""};function aq({open:e,onOpenChange:t,onSubmit:n,loading:s=!1,error:a=null}){const{t:r}=fr(),i=Ua(),[o,l]=p.useState(sq),[d,u]=p.useState({}),[h,m]=p.useState(!1),[f,g]=p.useState(0),[x,v]=p.useState(null),y=p.useRef(null),b=p.useRef(null);p.useEffect(()=>{v(a)},[a]);const w=()=>{const e={};return o.code||(e.code=r("pages.settings.ticketing.vt.codeRequired","Code is required")),o.name||(e.name=r("pages.settings.ticketing.vt.nameRequired","Name is required")),u(e),0===Object.keys(e).length},S=async()=>{try{const e={code:o.code,name:o.name};await n(e),l(sq),u({}),m(!1),g(e=>e+1)}catch(e){m(!1)}},j=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&u(t=>({...t,[e]:void 0})),x&&v(null)},C=()=>{l(sq),u({}),t(!1)},k=()=>{l({...sq}),u({}),v(null),g(e=>e+1)};p.useEffect(()=>{e&&requestAnimationFrame(()=>{y.current?.focus()})},[e,f]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&h)return e.preventDefault(),e.stopPropagation(),void m(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h?s||S():!s&&w()&&m(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(s||k())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,h,s,o]);return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:C,title:r("pages.settings.ticketing.vt.createTitle","Create VenueType"),maxWidth:"500px",loading:s,showClearButton:!0,onClear:k,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Clear",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:r("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>C(),disabled:s},{label:s?r("pages.settings.ticketing.vt.creating","Creating..."):r("pages.settings.ticketing.vt.create","Create VenueType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),b.current&&b.current.requestSubmit()},disabled:s}],children:c.jsxs("form",{ref:b,onSubmit:async e=>{e.preventDefault(),w()&&m(!0)},className:al(i.spacingFormSection,"w-full"),children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsxs("div",{className:al("grid grid-cols-1",i.gapForm),children:[c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"code",className:al(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.vt.code","Code")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"code",ref:y,type:"text",value:o.code,onChange:e=>j("code",e.target.value),className:al(i.inputHeight,i.textSize,d.code&&"border-destructive"),disabled:s,placeholder:r("pages.settings.ticketing.vt.codePlaceholder","Enter code")})}),c.jsx(Bl,{className:i.textSizeSmall,children:d.code})]}),c.jsxs(Fl,{className:i.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"name",className:al(i.textSizeLabel,"font-medium"),children:[r("pages.settings.ticketing.vt.name","Name")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"name",type:"text",value:o.name,onChange:e=>j("name",e.target.value),className:al(i.inputHeight,i.textSize,d.name&&"border-destructive"),disabled:s,placeholder:r("pages.settings.ticketing.vt.namePlaceholder","Enter name")})}),c.jsx(Bl,{className:i.textSizeSmall,children:d.name})]})]})}),x&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",i.paddingContainer,i.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[r("common.error","ERROR"),":"]}),c.jsx("span",{children:x.message||r("pages.settings.ticketing.vt.createError","Failed to create VenueType")})]})})]},f)}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||setTimeout(()=>{y.current?.focus()},0)},title:r("pages.settings.ticketing.vt.confirmCreateTitle","Confirm VenueType Creation"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:r("pages.settings.ticketing.vt.confirmCreateDescription","Are you sure you want to create a new venue-type?")})}),confirmAction:{label:s?r("pages.settings.ticketing.vt.creating","Creating..."):r("pages.settings.ticketing.vt.confirmCreate","Confirm & Create"),onClick:S,loading:s,disabled:s},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:s,onClick:()=>m(!1)}})]})}function rq({open:e,onOpenChange:t,vt:n,onSubmit:s,loading:a=!1,error:r=null}){const{t:i}=fr(),o=Ua(),[l,d]=p.useState({code:"",name:""}),[u,h]=p.useState({code:"",name:""}),[m,f]=p.useState({}),[g,x]=p.useState(!1),[v,y]=p.useState(0),[b,w]=p.useState(null),S=p.useRef(null),j=p.useRef(null);p.useEffect(()=>{w(r)},[r]),p.useEffect(()=>{if(e&&n){const e={code:n.code||"",name:n.name||""};d(e),h(e),f({}),w(null),y(e=>e+1)}},[e,n]);const C=()=>{const e={};return l.code||(e.code=i("pages.settings.ticketing.vt.codeRequired","Code is required")),l.name||(e.name=i("pages.settings.ticketing.vt.nameRequired","Name is required")),f(e),0===Object.keys(e).length},k=async()=>{if(n)try{const e={code:l.code,name:l.name};await s(n.id,e),x(!1),t(!1)}catch(e){x(!1)}},N=(e,t)=>{d(n=>({...n,[e]:t})),m[e]&&f(t=>({...t,[e]:void 0})),b&&w(null)},_=()=>{n&&d(u),f({}),t(!1)},P=()=>{n&&(d({...u}),f({}),w(null),y(e=>e+1))};p.useEffect(()=>{e&&n&&requestAnimationFrame(()=>{S.current?.focus()})},[e,v,n]),p.useEffect(()=>{if(!e)return;const t=e=>{if("Escape"===e.key&&g)return e.preventDefault(),e.stopPropagation(),void x(!1);if("Enter"!==e.key&&"Enter"!==e.code||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),g?a||k():!a&&C()&&x(!0)),(e.metaKey||e.ctrlKey)&&e.shiftKey){const t="Delete"===e.key||"Delete"===e.code,n="Backspace"===e.key||"Backspace"===e.code;if(t||n)return e.preventDefault(),void(a||P())}};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[e,g,a,l,n]);return n?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:_,title:i("pages.settings.ticketing.vt.editTitle","Edit VenueType"),maxWidth:"500px",loading:a,showClearButton:!0,onClear:P,shortcuts:[{label:"Submit",keys:["Enter"],metaOrCtrl:!0},{label:"Reset",keys:["Delete"],metaOrCtrl:!0,shift:!0}],autoSubmitShortcut:!1,autoClearShortcut:!1,footer:[{label:i("common.cancel","Cancel"),variant:"outline",type:"button",onClick:()=>_(),disabled:a},{label:a?i("pages.settings.ticketing.vt.updating","Updating..."):i("pages.settings.ticketing.vt.update","Update VenueType"),variant:"default",type:"submit",onClick:e=>{e?.preventDefault(),j.current&&j.current.requestSubmit()},disabled:a}],children:c.jsxs("form",{ref:j,onSubmit:async e=>{e.preventDefault(),C()&&x(!0)},className:al(o.spacingFormSection,"w-full"),children:[c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",o.paddingForm),children:c.jsxs("div",{className:al("grid grid-cols-1",o.gapForm),children:[c.jsxs(Fl,{className:o.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"code",className:al(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.vt.code","Code")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"code",ref:S,type:"text",value:l.code,onChange:e=>N("code",e.target.value),className:al(o.inputHeight,o.textSize,m.code&&"border-destructive"),disabled:a,placeholder:i("pages.settings.ticketing.vt.codePlaceholder","Enter code")})}),c.jsx(Bl,{className:o.textSizeSmall,children:m.code})]}),c.jsxs(Fl,{className:o.spacingFormItem,children:[c.jsxs(Il,{htmlFor:"name",className:al(o.textSizeLabel,"font-medium"),children:[i("pages.settings.ticketing.vt.name","Name")," *"]}),c.jsx(Ol,{children:c.jsx(kl,{id:"name",type:"text",value:l.name,onChange:e=>N("name",e.target.value),className:al(o.inputHeight,o.textSize,m.name&&"border-destructive"),disabled:a,placeholder:i("pages.settings.ticketing.vt.namePlaceholder","Enter name")})}),c.jsx(Bl,{className:o.textSizeSmall,children:m.name})]})]})}),b&&c.jsx("div",{className:al("rounded-md bg-destructive/10 border border-destructive/20",o.paddingContainer,o.textSizeSmall,"text-destructive"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive"}),c.jsxs("span",{className:"font-semibold",children:[i("common.error","ERROR"),":"]}),c.jsx("span",{children:b.message||i("pages.settings.ticketing.vt.updateError","Failed to update VenueType")})]})})]},v)}),c.jsx(jE,{open:g,onOpenChange:e=>{x(e),e||setTimeout(()=>{S.current?.focus()},0)},title:i("pages.settings.ticketing.vt.confirmUpdateTitle","Confirm VenueType Update"),description:c.jsx(c.Fragment,{children:c.jsx("p",{className:al("mb-3",o.textSizeSmall),children:i("pages.settings.ticketing.vt.confirmUpdateDescription","Are you sure you want to update this venue-type?")})}),confirmAction:{label:a?i("pages.settings.ticketing.vt.updating","Updating..."):i("pages.settings.ticketing.vt.confirmUpdate","Confirm & Update"),onClick:k,loading:a,disabled:a},cancelAction:{label:i("common.cancel","Cancel"),variant:"outline",disabled:a,onClick:()=>x(!1)}})]}):null}function iq({autoOpenCreate:e=!1,onCreateDialogClose:t,onNavigateToVenueType:n}){const s=function(){const e=p.useContext(JU);if(!e)throw new Error("useVenueTypeService must be used within VenueTypeProvider");return e.service}(),{toast:a}=Rk(),{t:r}=fr(),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,f]=p.useState(""),[g,x]=p.useState({page:1,pageSize:50}),[v,y]=p.useState(!1),[b,w]=p.useState(null),{data:S,isLoading:j}=tV(s,{search:m||void 0,pagination:g}),C=S?.data||[],k=function(e){const t=Vs();return Xs({mutationFn:t=>e.deleteVenueType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["vt"]})}})}(s),N=function(e){const t=Vs();return Xs({mutationFn:t=>e.createVenueType(t),onSuccess:()=>{t.invalidateQueries({queryKey:["vt"]})}})}(s),_=function(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateVenueType(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["vt"]}),t.invalidateQueries({queryKey:["vt",n.id]})}})}(s),P=p.useCallback(e=>{w(e),y(!0)},[]),E=p.useCallback(async()=>{if(b)try{await k.mutateAsync(b.id),a({title:r("common.success"),description:r("pages.settings.ticketing.vt.deleted")}),y(!1),w(null)}catch(e){a({title:r("common.error"),description:r("common.errorOccurred"),variant:"destructive"})}},[b,k,a,r]),R=p.useCallback(e=>{h(e),d(!0)},[]),A=p.useCallback(()=>{o(!0)},[]);p.useEffect(()=>{e&&!i&&o(!0)},[e,i]);const T=p.useCallback(async e=>{try{await N.mutateAsync(e),a({title:r("common.success","Success"),description:r("pages.settings.ticketing.vt.created","VenueType created successfully")})}catch(t){throw a({title:r("common.error","Error"),description:r("pages.settings.ticketing.vt.createError","Failed to create venue-type"),variant:"destructive"}),t}},[N,a,r]),M=p.useCallback(async(e,t)=>{try{await _.mutateAsync({id:e,input:t}),a({title:r("common.success","Success"),description:r("pages.settings.ticketing.vt.updated","VenueType updated successfully")})}catch(n){throw a({title:r("common.error","Error"),description:r("pages.settings.ticketing.vt.updateError","Failed to update venue-type"),variant:"destructive"}),n}},[_,a,r]),D=p.useCallback(e=>{f(e),x(e=>({...e,page:1}))},[]);return c.jsxs(c.Fragment,{children:[c.jsx(nq,{data:C,loading:j,onCreate:A,onEdit:R,onDelete:P,onSearch:D}),c.jsx(aq,{open:i,onOpenChange:e=>{o(e),e||t?.()},onSubmit:T,loading:N.isPending,error:N.error}),c.jsx(rq,{open:l,onOpenChange:e=>{d(e),e||h(null)},vt:u,onSubmit:M,loading:_.isPending,error:_.error}),c.jsx(jE,{open:v,onOpenChange:e=>{y(e),e||w(null)},title:r("pages.settings.ticketing.vt.confirmDeleteTitle","Delete VenueType"),description:b?r("pages.settings.ticketing.vt.confirmDelete",{defaultValue:`Are you sure you want to delete "${b.name||b.id}"? This action cannot be undone.`,name:b.name||b.id}):"",confirmText:"delete",confirmTextLabel:r("common.typeToConfirm","Type 'delete' to confirm"),confirmAction:{label:r("common.delete","Delete"),variant:"destructive",onClick:E,loading:k.isPending,disabled:k.isPending},cancelAction:{label:r("common.cancel","Cancel"),variant:"outline",disabled:k.isPending}})]})}function oq(e){return{id:e.id,code:e.code,name:e.name,user_id:e.user_id??void 0,work_email:e.work_email??void 0,job_title:e.job_title??void 0,department:e.department??void 0,employment_type:e.employment_type??void 0,hire_date:e.hire_date??void 0,work_phone:e.work_phone??void 0,mobile_phone:e.mobile_phone??void 0,office_location:e.office_location??void 0,timezone:e.timezone||"UTC",skills:e.skills??void 0,assigned_territories:e.assigned_territories??void 0,quota_config:e.quota_config??void 0,commission_tier:e.commission_tier??void 0,birthday:e.birthday??void 0,emergency_contact_name:e.emergency_contact_name??void 0,emergency_contact_phone:e.emergency_contact_phone??void 0,emergency_contact_relationship:e.emergency_contact_relationship??void 0,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0,deactivated_at:e.deactivated_at?new Date(e.deactivated_at):void 0}}class lq{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}async fetchEmployees(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.is_active&&t.append("is_active",e.is_active.toString());const n=this.endpoints.employees.replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(oq),pagination:l}}catch(t){throw t}}async searchEmployees(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.endpoints.employees.replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(oq)}catch(n){throw n}}async fetchEmployeeById(e){try{const t=this.endpoints.employees.replace(/\/$/,"");return oq(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createEmployee(e){try{return oq(await this.apiClient.post(this.endpoints.employees,e,{requiresAuth:!0}))}catch(t){throw t}}async updateEmployee(e,t){try{const n=this.endpoints.employees.replace(/\/$/,"");return oq(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteEmployee(e){try{const t=this.endpoints.employees.replace(/\/$/,"");await this.apiClient.delete(`${t}/${e}`,{requiresAuth:!0})}catch(t){throw t}}}function cq(e,t){const{filter:n,pagination:s}=t||{};return Ys({queryKey:["employees",n?.search,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchEmployees({skip:t,limit:a,search:n?.search})},staleTime:3e5})}function dq({customers:e,selectedCustomerId:t,onSelectedCustomerIdChange:n,customerPopoverOpen:s,onCustomerPopoverOpenChange:a,customerSearchQuery:r,onCustomerSearchQueryChange:i,employees:o,selectedSalespersonId:l,onSelectedSalespersonIdChange:d,salespersonPopoverOpen:u,onSalespersonPopoverOpenChange:h,salespersonSearchQuery:m,onSalespersonSearchQueryChange:p,discountType:f,onDiscountTypeChange:g,discountValue:x,onDiscountValueChange:v,selectedTickets:y,onRemoveTicket:b,onClearAll:w,subtotalAmount:S,discountAmount:j,taxAmount:C,totalAmount:k}){const N=e.find(e=>e.id===t),_=o.find(e=>e.id===l);return c.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[c.jsxs("div",{className:"p-4 border-b bg-muted/20 space-y-4 flex-shrink-0",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground mb-2 block",children:"Customer"}),c.jsxs(lP,{open:s,onOpenChange:e=>{a(e),e||i("")},children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",children:[t?N?.name||N?.code||"Select a customer":"Select customer (optional)",c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(dP,{className:"w-[400px] p-0",align:"start",children:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:"Search customers...",className:"h-9",value:r,onValueChange:i}),c.jsxs(wN,{children:[c.jsx(SN,{children:r?`No customers found matching "${r}"`:"Start typing to search customers..."}),c.jsxs(jN,{children:[c.jsx(kN,{value:"none",onSelect:()=>{n(null),a(!1)},children:c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-muted-foreground",children:"No customer selected"})})}),e.map(e=>c.jsx(kN,{value:`${e.name||e.code} ${e.code||""} ${e.email||""}`,onSelect:()=>{n(e.id),a(!1),i("")},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.name||e.code}),e.code&&e.name&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.code}),e.email&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.email})]})},e.id))]})]})]})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground mb-2 block",children:"Salesperson"}),c.jsxs(lP,{open:u,onOpenChange:e=>{h(e),e||p("")},children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",children:[l?_?.name||_?.code||"Select a salesperson":"Select salesperson (optional)",c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(dP,{className:"w-[400px] p-0",align:"start",children:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:"Search salespeople...",className:"h-9",value:m,onValueChange:p}),c.jsxs(wN,{children:[c.jsx(SN,{children:m?`No salespeople found matching "${m}"`:"Start typing to search salespeople..."}),c.jsxs(jN,{children:[c.jsx(kN,{value:"none",onSelect:()=>{d(null),h(!1)},children:c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-muted-foreground",children:"No salesperson selected"})})}),o.map(e=>c.jsx(kN,{value:`${e.name} ${e.code||""} ${e.work_email||""}`,onSelect:()=>{d(e.id),h(!1),p("")},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.name}),e.code&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.code})]})},e.id))]})]})]})})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx(Dl,{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Discount"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:al("text-xs","percentage"===f?"text-foreground font-medium":"text-muted-foreground"),children:"%"}),c.jsx(kx,{checked:"amount"===f,onCheckedChange:e=>{g(e?"amount":"percentage"),v("0")},className:"scale-75"}),c.jsx("span",{className:al("text-xs","amount"===f?"text-foreground font-medium":"text-muted-foreground"),children:"$"})]})]}),c.jsx(kl,{type:"number",min:"0",max:"percentage"===f?"100":void 0,step:"percentage"===f?"0.1":"0.01",value:x,onChange:e=>v(e.target.value),placeholder:"percentage"===f?"0":"0.00",className:"h-9"})]})]}),c.jsx("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:0===y.length?c.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:c.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsx("p",{className:"font-medium",children:"No tickets selected"}),c.jsx("p",{className:"text-xs",children:"Select seats from the layout or list"})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-0",children:y.map((e,t)=>{const n=e.sectionName&&e.rowName&&e.seatNumber?`${e.sectionName} ${e.rowName} ${e.seatNumber}`:e.seatId?`Seat ${e.seatId.slice(0,8)}`:"Unknown";return c.jsx("div",{className:"group py-3 border-b last:border-b-0 hover:bg-muted/30 transition-colors relative",children:c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"text-xs font-mono text-muted-foreground",children:["#",String(t+1).padStart(3,"0")]}),c.jsx("span",{className:"text-sm font-medium truncate",children:n})]}),e.ticketNumber&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ticket: ",e.ticketNumber]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsxs("span",{className:"text-sm font-semibold tabular-nums",children:["$",e.ticketPrice?.toFixed(2)||"0.00"]}),c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>b(e.eventSeatId),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive hover:bg-destructive/10","aria-label":"Remove ticket",title:"Remove ticket",children:c.jsx(Hg,{className:"h-3.5 w-3.5"})})]})]})},e.eventSeatId)})}),c.jsxs("div",{className:"pt-4 mt-auto border-t space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"}),c.jsxs("span",{className:"font-semibold tabular-nums",children:["$",S.toFixed(2)]})]}),j>0&&c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground",children:["Discount","percentage"===f?` (${x}%):`:" ($):"]}),c.jsxs("span",{className:"font-semibold tabular-nums text-green-600",children:["-$",j.toFixed(2)]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Tax (10%):"}),c.jsxs("span",{className:"font-semibold tabular-nums",children:["$",C.toFixed(2)]})]}),c.jsx(Hj,{}),c.jsxs("div",{className:"flex items-center justify-between text-base font-bold",children:[c.jsx("span",{children:"TOTAL:"}),c.jsxs("span",{className:"tabular-nums",children:["$",k.toFixed(2)]})]}),y.length>0&&c.jsx("div",{className:"pt-2",children:c.jsx(vl,{variant:"ghost",size:"sm",onClick:w,className:"w-full h-8 text-xs",children:"Clear All"})})]})]})})]})}function uq({selectedEventId:e,seatViewMode:t,layoutWithSeats:n,eventSeats:s,seatStatusMap:a,locationStatusMap:r,onSeatClick:i,selectedTickets:o,selectedSectionId:l,onSelectedSectionIdChange:d,onListSeatSelect:u,onAddSeatsToBooking:h}){return c.jsx("div",{className:"pr-1 flex-1",children:e?"visualization"===t?n?c.jsx("div",{className:"h-full overflow-hidden",children:c.jsx(DU,{layout:n.layout,layoutSeats:n.seats,sections:n.sections,eventSeats:s,seatStatusMap:a,locationStatusMap:r,imageUrl:n.layout.image_url,onSeatClick:i,selectedSeatIds:new Set(o.map(e=>{if(e.sectionName&&e.rowName&&e.seatNumber){const t=n.seats.find(t=>t.section_name===e.sectionName&&t.row===e.rowName&&t.seat_number===e.seatNumber);return t?.id}return e.seatId}).filter(Boolean)),selectedSectionId:l,onSelectedSectionIdChange:d})}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No layout available for this event"}):c.jsx("div",{className:"h-full overflow-y-auto p-4",children:c.jsx(FU,{eventSeats:s,onSeatSelect:u,selectedSeatIds:void 0,showSelection:!0,onAddToBooking:h,showAddToBooking:!0,bookedSeatIds:new Set(o.map(e=>e.eventSeatId))})}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Select a show and event to view seats"})})}function hq({open:e,onOpenChange:t,onSubmit:n,title:s="Create Booking",maxWidth:a="95vw",initialShowId:r,initialEventId:i,initialCustomerId:o}){const l=Ua(),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null),[x,v]=p.useState(r||null),[y,b]=p.useState(i||null),[w,S]=p.useState(!1),[j,C]=p.useState(!1),[k,N]=p.useState(!1),[_,P]=p.useState(""),[E,R]=p.useState(""),[A,T]=p.useState(null),[M,D]=p.useState(!1),[L,F]=p.useState(""),[I,O]=p.useState(""),[z,B]=p.useState("visualization"),[$,U]=p.useState(null),[V,q]=p.useState([]),[H,G]=p.useState(o||null),[K,W]=p.useState("percentage"),[Q,Y]=p.useState("0"),X=p.useMemo(()=>new OI({apiClient:Fa,endpoints:{shows:"/api/v1/ticketing/shows"}}),[]),Z=p.useMemo(()=>new rI({apiClient:Fa,endpoints:{events:"/api/v1/ticketing/events"}}),[]),J=p.useMemo(()=>new _I({apiClient:Fa,endpoints:{layouts:"/api/v1/ticketing/layouts"}}),[]),ee=p.useMemo(()=>new vF({apiClient:Fa,endpoints:{customers:"/api/v1/sales/customers"}}),[]),te=p.useMemo(()=>new lq({apiClient:Fa,endpoints:{employees:"/api/v1/sales/employees"}}),[]),{data:ne}=ZI(X,{pagination:{page:1,pageSize:100}}),se=p.useMemo(()=>{const e=ne?.data||[],t=new Map;return e.forEach(e=>{t.has(e.id)||t.set(e.id,e)}),Array.from(t.values())},[ne?.data]),{data:ae}=cI(Z,{filter:x?{show_id:x}:void 0,pagination:{page:1,pageSize:200}}),re=(ae?.data||[]).filter(e=>e.status===eI.ON_SALE),{data:ie}=dI(Z,y),{data:oe}=TI(J,ie?.layout_id||null),{data:le}=mI(Z,y||"",{skip:0,limit:1e3}),ce=le?.data||[];p.useEffect(()=>{const e=setTimeout(()=>{R(_)},300);return()=>clearTimeout(e)},[_]),p.useEffect(()=>{const e=setTimeout(()=>{O(L)},300);return()=>clearTimeout(e)},[L]);const{data:de}=yF(ee,{filter:{search:E||void 0},pagination:{page:1,pageSize:50}}),ue=de?.data||[],{data:he}=cq(te,{filter:{search:I||void 0},pagination:{page:1,pageSize:50}}),me=he?.data||[],pe=p.useMemo(()=>{const e=new Map;return ce.forEach(t=>{t.seat_id&&e.set(t.seat_id,t)}),e},[ce]),fe=p.useMemo(()=>{const e=new Map;return ce.forEach(t=>{if(t.section_name&&t.row_name&&t.seat_number){const n=`${t.section_name}|${t.row_name}|${t.seat_number}`;e.set(n,t)}}),e},[ce]);p.useEffect(()=>{y&&(q([]),U(null))},[y]),p.useEffect(()=>{e?(r&&v(r),i&&b(i),o&&G(o)):(v(null),b(null),q([]),G(null),T(null),B("visualization"),U(null),g(null),m(!1),P(""),N(!1),F(""),D(!1))},[e,r,i,o]);const ge=p.useCallback((e,t)=>{if(!y)return;let n=t;if(!n&&e&&(n=pe.get(e),!n&&oe)){const t=oe.seats.find(t=>t.id===e);if(t&&t.section_name&&t.row&&t.seat_number){const e=`${t.section_name}|${t.row}|${t.seat_number}`;n=fe.get(e)}}if(!n)return;const s=V.findIndex(e=>e.eventSeatId===n.id);if(s>=0)q(e=>e.filter((e,t)=>t!==s));else{const e=n.status?.toUpperCase();if("AVAILABLE"===e){const e={eventSeatId:n.id,seatId:n.seat_id,sectionName:n.section_name,rowName:n.row_name,seatNumber:n.seat_number,ticketPrice:n.ticket_price,ticketNumber:n.ticket_number,status:n.status};q(t=>[...t,e])}}},[y,V,pe,fe,oe]),xe=p.useCallback((e,t)=>{},[]),ve=p.useCallback(e=>{y&&0!==e.length&&q(t=>{const n=e.map(e=>ce.find(t=>t.id===e)).filter(e=>{if(!e)return!1;const n=e.status?.toUpperCase();if("AVAILABLE"!==n)return!1;return!t.some(t=>t.eventSeatId===e.id)});if(0===n.length)return t;const s=n.map(e=>({eventSeatId:e.id,seatId:e.seat_id,sectionName:e.section_name,rowName:e.row_name,seatNumber:e.seat_number,ticketPrice:e.ticket_price,ticketNumber:e.ticket_number,status:e.status}));return[...t,...s]})},[y,ce]),ye=p.useMemo(()=>V.reduce((e,t)=>e+(t.ticketPrice||0),0),[V]),be=p.useMemo(()=>{const e=parseFloat(Q)||0;return e<=0?0:"percentage"===K?ye*e/100:Math.min(e,ye)},[ye,Q,K]),we=p.useMemo(()=>ye-be,[ye,be]),Se=p.useMemo(()=>.1*we,[we]),je=p.useMemo(()=>we+Se,[we,Se]),Ce=()=>{m(!1),g(null),t(!1)},ke={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e={event_id:f.eventId,customer_id:f.customerId||void 0,salesperson_id:f.salespersonId||void 0,items:f.tickets.map(e=>({event_seat_id:e.eventSeatId,section_name:e.sectionName,row_name:e.rowName,seat_number:e.seatNumber,unit_price:e.ticketPrice||0,total_price:e.ticketPrice||0,currency:"USD",ticket_number:e.ticketNumber,ticket_status:e.status})),discount_type:K,discount_value:parseFloat(Q)||0,tax_rate:.1,currency:"USD"};await n(e),g(null),m(!1),t(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},Ne={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:Ce,title:s,maxWidth:a,loading:d,showSubmitButton:!0,onSubmit:async()=>{if(!y||0===V.length)return;const e=re.find(e=>e.id===y);if(!e||e.status!==eI.ON_SALE)return void alert("The selected event is no longer available for booking. Please select a different event.");g({customerId:H||void 0,salespersonId:A||void 0,eventId:y,tickets:V}),m(!0)},onCancel:Ce,children:c.jsxs("div",{className:al("flex h-full",l.paddingForm),children:[c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 ",children:[c.jsxs("div",{className:"pr-1 border-b flex items-center gap-3 flex-shrink-0",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs(lP,{open:w,onOpenChange:S,children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",children:[c.jsx("span",{className:"truncate",children:x&&(se.find(e=>e.id===x)?.name||se.find(e=>e.id===x)?.code)||"Select a show"}),c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(dP,{className:"w-[400px] p-0",align:"start",children:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:"Search shows...",className:"h-9"}),c.jsxs(wN,{children:[c.jsx(SN,{children:"No shows found."}),c.jsx(jN,{children:se.map(e=>c.jsx(kN,{value:`${e.name||e.code} ${e.code||""}`,onSelect:()=>{v(e.id),b(null),S(!1)},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.name||e.code}),e.code&&e.name&&c.jsx("span",{className:"text-xs text-muted-foreground",children:e.code})]})},e.id))})]})]})})]})}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs(lP,{open:j,onOpenChange:C,children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",role:"combobox",className:"w-full justify-between h-9",disabled:!x,children:[c.jsx("span",{className:"truncate",children:y?(()=>{const e=re.find(e=>e.id===y);return e?`${e.title} - ${new Date(e.start_dt).toLocaleDateString()}`:"Select an event"})():"Select an on-sale event"}),c.jsx("svg",{className:"ml-2 h-4 w-4 shrink-0 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),c.jsx(dP,{className:"w-[400px] p-0",align:"start",children:c.jsxs(vN,{children:[c.jsx(bN,{placeholder:"Search on-sale events...",className:"h-9"}),c.jsxs(wN,{children:[c.jsx(SN,{children:"No on-sale events found."}),c.jsx(jN,{children:re.map(e=>c.jsx(kN,{value:`${e.title} ${new Date(e.start_dt).toLocaleDateString()}`,onSelect:()=>{b(e.id),C(!1)},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:e.title}),c.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.start_dt).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},e.id))})]})]})})]})}),c.jsx(sy,{value:z,onValueChange:e=>B(e),children:c.jsxs(ay,{children:[c.jsxs(ry,{value:"visualization",className:"h-9 w-9 p-0",children:[c.jsx(Df,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Layout"})]}),c.jsxs(ry,{value:"list",className:"h-9 w-9 p-0",children:[c.jsx(Ff,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"List"})]})]})})]}),c.jsx(uq,{selectedEventId:y,seatViewMode:z,layoutWithSeats:oe,eventSeats:ce,seatStatusMap:pe,locationStatusMap:fe,onSeatClick:ge,selectedTickets:V,selectedSectionId:$,onSelectedSectionIdChange:U,onListSeatSelect:xe,onAddSeatsToBooking:ve})]}),c.jsx("div",{className:"w-96 flex flex-col min-w-0 border rounded-xl bg-card flex-shrink-0 shadow-lg ml-6",children:c.jsx("div",{className:"h-full overflow-y-auto flex flex-col",children:c.jsx(dq,{customers:ue,selectedCustomerId:H,onSelectedCustomerIdChange:G,customerPopoverOpen:k,onCustomerPopoverOpenChange:N,customerSearchQuery:_,onCustomerSearchQueryChange:P,employees:me,selectedSalespersonId:A,onSelectedSalespersonIdChange:T,salespersonPopoverOpen:M,onSalespersonPopoverOpenChange:D,salespersonSearchQuery:L,onSalespersonSearchQueryChange:F,discountType:K,onDiscountTypeChange:W,discountValue:Q,onDiscountValueChange:Y,selectedTickets:V,onRemoveTicket:e=>{q(t=>t.filter(t=>t.eventSeatId!==e))},onClearAll:()=>q([]),subtotalAmount:ye,discountAmount:be,taxAmount:Se,totalAmount:je})})})]})}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||g(null)},title:"Confirm Booking Creation",description:f?c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:al("mb-3",l.textSizeSmall),children:"Are you sure you want to create this booking?"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Event:"})," ",re.find(e=>e.id===f.eventId)?.title||"N/A"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Tickets:"})," ",f.tickets.length]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Total:"})," $",je.toFixed(2)]})]})]}):void 0,confirmAction:ke,cancelAction:Ne})]})}function mq(e){return{id:e.id,tenant_id:e.tenant_id,booking_number:e.booking_number,customer_id:e.customer_id,salesperson_id:e.salesperson_id,event_id:e.event_id,status:e.status,subtotal_amount:e.subtotal_amount,discount_amount:e.discount_amount,discount_type:e.discount_type,discount_value:e.discount_value,tax_amount:e.tax_amount,tax_rate:e.tax_rate,total_amount:e.total_amount,currency:e.currency,payment_status:e.payment_status,due_balance:e.due_balance,reserved_until:e.reserved_until?new Date(e.reserved_until):void 0,cancelled_at:e.cancelled_at?new Date(e.cancelled_at):void 0,cancellation_reason:e.cancellation_reason,items:e.items||[],created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):void 0,version:e.version}}class pq{apiClient;endpoints;constructor(e){this.apiClient=e.apiClient,this.endpoints=e.endpoints}getEndpoint(){return this.endpoints?.bookings||ma.ENDPOINTS.SALES.BOOKINGS}async fetchBookings(e){try{const t=new URLSearchParams;void 0!==e?.skip&&t.append("skip",e.skip.toString()),void 0!==e?.limit&&t.append("limit",e.limit.toString()),void 0!==e?.search&&e.search.trim()&&t.append("search",e.search.trim()),void 0!==e?.status&&t.append("status",e.status);const n=this.getEndpoint().replace(/\/$/,""),s=t.toString()?`${n}?${t.toString()}`:n,a=await this.apiClient.get(s,{requiresAuth:!0}),r=a.skip||e?.skip||0,i=a.limit||e?.limit||50,o=a.total||0,l={page:Math.floor(r/i)+1,pageSize:i,total:o,totalPages:Math.ceil(o/i)};return{data:(a.items||[]).map(mq),pagination:l}}catch(t){throw t}}async searchBookings(e,t=100){try{const n=e.trim();if(!n)return[];const s=new URLSearchParams;s.append("search",n),s.append("limit",Math.min(t,200).toString());const a=`${this.getEndpoint().replace(/\/$/,"")}?${s.toString()}`;return((await this.apiClient.get(a,{requiresAuth:!0})).items||[]).map(mq)}catch(n){throw n}}async fetchBookingById(e){try{const t=this.getEndpoint().replace(/\/$/,"");return mq(await this.apiClient.get(`${t}/${e}`,{requiresAuth:!0}))}catch(t){throw t}}async createBooking(e){try{return mq(await this.apiClient.post(this.getEndpoint(),e,{requiresAuth:!0}))}catch(t){throw t}}async updateBooking(e,t){try{const n=this.getEndpoint().replace(/\/$/,"");return mq(await this.apiClient.put(`${n}/${e}`,t,{requiresAuth:!0}))}catch(n){throw n}}async deleteBooking(e,t){try{const n=this.getEndpoint().replace(/\/$/,""),s=`${n}/${e}?${new URLSearchParams({cancellation_reason:t}).toString()}`;await this.apiClient.delete(s,{requiresAuth:!0})}catch(n){throw n}}}function fq(e,t){return Ys({queryKey:["bookings",t],queryFn:()=>t?e.fetchBookingById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}function gq(e){const t=Vs();return Xs({mutationFn:t=>e.createBooking(t),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["bookings"]}),n.event_id&&t.invalidateQueries({queryKey:["events",n.event_id,"seats"]})}})}const xq=p.createContext(null);function vq({children:e,config:t}){const n=p.useMemo(()=>new pq(t),[t.apiClient,t.endpoints?.bookings]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(xq.Provider,{value:s,children:e})}function yq(){const e=p.useContext(xq);if(!e)throw new Error("useBookingService must be used within BookingProvider");return e.service}function bq({onNavigateToBooking:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:s}){const a=yq(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(!1),[v,y]=p.useState(null),[b,w]=p.useState(null),S=p.useMemo(()=>new OU({apiClient:Fa,endpoints:{payments:"/api/v1/sales/payments"}}),[]),j=f.useRef(!1);f.useEffect(()=>{const e=j.current;n&&!e&&u(!0),j.current=!!n},[n]);const{data:C,isLoading:k,error:N}=function(e,t){const{filter:n,pagination:s}=t||{};return Ys({queryKey:["bookings",n?.search,s?.page,s?.pageSize],queryFn:()=>{const t=s?(s.page-1)*s.pageSize:0,a=s?.pageSize||50;return e.fetchBookings({skip:t,limit:a,search:n?.search})},staleTime:3e5})}(a,{filter:r,pagination:o}),_=gq(a),P=function(e){const t=Vs();return Xs({mutationFn:({id:t,cancellationReason:n})=>e.deleteBooking(t,n),onSuccess:()=>{t.invalidateQueries({queryKey:["bookings"]}),t.invalidateQueries({queryKey:["events"]})}})}(a),E=zU(S),R=C?.data??[],A=C?.pagination,T=p.useCallback(()=>{t&&t(),u(!0)},[t]),M=p.useCallback(async(e,t)=>{try{await P.mutateAsync({id:e.id,cancellationReason:t}),Ek({title:"Success",description:"Booking cancelled successfully"})}catch(wW){Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to cancel booking",variant:"destructive"})}},[P]),D=p.useCallback(e=>{!function(e){const t=e.toLowerCase().trim();return"pending"===t||"confirmed"===t||"reserved"===t}(e.status)?Ek({title:"Payment Not Allowed",description:`Payments can only be processed for bookings with status PENDING, CONFIRMED, or RESERVED. Current status: ${e.status.toUpperCase()}`,variant:"destructive"}):(y(e),m(!0))},[]),L=p.useCallback(e=>{w(e),x(!0)},[]),F=p.useCallback(async e=>{try{await E.mutateAsync(e),Ek({title:"Success",description:"Payment processed successfully"}),m(!1),y(null)}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to process payment",variant:"destructive"}),wW}},[E]),I=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),O=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),z=p.useCallback(e=>{l({page:1,pageSize:e})},[]),B=p.useCallback(async e=>{try{await _.mutateAsync(e),Ek({title:"Success",description:"Booking created successfully"}),u(!1),s?.()}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to create booking",variant:"destructive"}),wW}},[_,s]),$=p.useCallback(t=>{e?.(t.id)},[e]),U=p.useMemo(()=>{if(A)return{page:o.page,pageSize:o.pageSize,total:A.total,totalPages:A.totalPages}},[o,A]);return c.jsxs(c.Fragment,{children:[c.jsx(JF,{bookings:R,loading:k,error:N,onBookingClick:$,onCancel:M,onPayment:D,onVoidPayment:L,onCreate:T,onSearch:I,pagination:U,onPageChange:O,onPageSizeChange:z}),c.jsx(hq,{open:d,onOpenChange:e=>{u(e),e||s?.()},onSubmit:B}),c.jsx(VU,{open:h&&!!v,onOpenChange:e=>{m(e),e||y(null)},onSubmit:F,booking:v,isLoading:E.isPending}),c.jsx(qU,{open:g&&!!b,onOpenChange:e=>{x(e),e||w(null)},booking:b})]})}function wq({open:e,onOpenChange:t,payment:n}){const s=p.useMemo(()=>new pq({apiClient:Fa,endpoints:{bookings:"/api/v1/sales/bookings"}}),[]),{data:a,isLoading:r}=fq(s,n?.booking_id??null);if(!n)return null;return c.jsx(Zy,{open:e,onOpenChange:t,children:c.jsxs(tb,{className:"max-w-2xl",children:[c.jsxs(nb,{children:[c.jsx(ab,{children:"Payment Details"}),c.jsx(rb,{children:"View payment information and transaction details."})]}),c.jsx("div",{className:"py-4",children:c.jsxs(QM,{columns:2,children:[c.jsx(WM,{label:"Payment Code",value:n.payment_code||"N/A",valueClassName:"font-mono"}),c.jsx(WM,{label:"Amount",value:`${n.currency} ${n.amount.toFixed(2)}`,valueClassName:"font-semibold"}),c.jsx(WM,{label:"Status",value:c.jsx("span",{className:"capitalize",children:n.status.toLowerCase()})}),c.jsx(WM,{label:"Payment Method",value:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[n.payment_method]||n.payment_method}),c.jsx(WM,{label:"Booking",value:r?"Loading...":a?.booking_number||n.booking_id,valueClassName:"font-mono",span:"col-span-2"}),c.jsx(WM,{label:"Transaction Reference",value:n.transaction_reference,span:"col-span-2",valueClassName:"font-mono"}),c.jsx(WM,{label:"Notes",value:n.notes,span:"col-span-2"}),c.jsx(WM,{label:"Created At",value:qa(n.created_at)}),c.jsx(WM,{label:"Processed At",value:n.processed_at?qa(n.processed_at):"N/A"})]})}),c.jsx(sb,{children:c.jsx(vl,{onClick:()=>t(!1),children:"Close"})})]})})}function Sq({className:e,payments:t=[],loading:n=!1,error:s=null,pagination:a,onPaymentClick:r,onSearch:i,onPageChange:o,onPageSizeChange:l}){const d=Ua(),u=(e,t="USD")=>`${t} ${e.toFixed(2)}`,h=[OP({getDisplayName:e=>e.payment_code||e.id.slice(0,8).toUpperCase(),getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.payment_code||e.id),header:"Payment Code",showAvatar:!1,onClick:r,additionalOptions:{id:"id"}}),LP({accessorKey:"booking_id",header:"Booking",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",d.textSize),children:t?t.slice(0,8).toUpperCase():"-"})}}),LP({accessorKey:"amount",header:"Amount",cell:e=>{const t=e.row.original;return c.jsx("span",{className:al("font-semibold",d.textSize),children:u(t.amount,t.currency)})}}),LP({accessorKey:"payment_method",header:"Method",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",d.textSize),children:{credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",bank_transfer:"Bank Transfer",cash:"Cash",other:"Other"}[t]||t})}}),LP({accessorKey:"status",header:"Status",cell:e=>(e=>c.jsx("span",{className:al("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold",{completed:"bg-green-50 text-green-700 border-green-200",pending:"bg-yellow-50 text-yellow-700 border-yellow-200",processing:"bg-blue-50 text-blue-700 border-blue-200",failed:"bg-red-50 text-red-700 border-red-200",refunded:"bg-gray-50 text-gray-700 border-gray-200",cancelled:"bg-gray-50 text-gray-700 border-gray-200"}[e.toLowerCase()]||"bg-gray-50 text-gray-700 border-gray-200"),children:e.toUpperCase()}))(e.getValue())}),FP({accessorKey:"created_at",header:"Created At"})],m=t,p=a?{page:a.page,pageSize:a.pageSize,total:a.total,totalPages:a.totalPages}:void 0;return c.jsx("div",{className:al("space-y-4",e),children:c.jsx($P,{data:m,columns:h,loading:n,manualPagination:!1,serverPagination:p,onPageChange:o,onPageSizeChange:l,onSearch:i})})}function jq({}){const[e,t]=p.useState({page:1,pageSize:50}),[n,s]=p.useState(null),[a,r]=p.useState(!1),i=p.useMemo(()=>new OU({apiClient:Fa,endpoints:{payments:"/api/v1/sales/payments"}}),[]),{data:o=[],isLoading:l,error:d}=Ys({queryKey:["payments","all"],queryFn:async()=>i.getAllPayments(),staleTime:3e5}),u=p.useCallback(e=>{},[]),h=p.useCallback(e=>{t(t=>({...t,page:e}))},[]),m=p.useCallback(e=>{t({page:1,pageSize:e})},[]),f=p.useCallback(e=>{s(e),r(!0)},[]),g=p.useMemo(()=>{const t=o.length;return{...e,total:t,totalPages:Math.ceil(t/e.pageSize)}},[e,o.length]);return c.jsxs(c.Fragment,{children:[c.jsx(Sq,{payments:o,loading:l,error:d,onPaymentClick:f,onSearch:u,pagination:g,onPageChange:h,onPageSizeChange:m}),c.jsx(wq,{open:a,onOpenChange:r,payment:n})]})}function Cq({open:e,onOpenChange:t,show:n,onEventClick:s,onBookNow:a,showShowNameInTitle:r=!1}){const i=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`};return c.jsx(uP,{open:e,onOpenChange:t,children:c.jsx(fP,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0",children:n&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx(gP,{children:c.jsx(vP,{className:"text-xl",children:n.name})})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:c.jsx(qP,{items:n.events.map(e=>({...e,name:e.title})),searchable:!1,viewMode:"list",showViewToggle:!1,gridCols:{default:1},emptyMessage:"No events available for this show.",renderItem:e=>{const t=(e=>{switch(e.toLowerCase()){case"on_sale":return"default";case"published":return"secondary";case"sold_out":default:return"outline";case"cancelled":return"destructive"}})(e.status),o=(e=>{const t=new Date(e);return{month:t.toLocaleDateString("en-US",{month:"short"}),day:t.getDate(),fullDate:t}})(e.start_dt),l=(e=>{const t=new Date(e);return{dayOfWeek:t.toLocaleDateString("en-US",{weekday:"short"}),time:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}})(e.start_dt);return c.jsx("div",{className:"group rounded-lg border bg-card transition-all hover:shadow-md hover:border-primary/20 cursor-pointer overflow-hidden mb-3",onClick:()=>s(e),children:c.jsxs("div",{className:"flex gap-3 p-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsxs("div",{className:"flex flex-col items-center justify-center w-16 h-16 rounded bg-muted/50 border border-border/50",children:[c.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase leading-tight tracking-wide",children:o.month}),c.jsx("span",{className:"text-xl font-bold text-foreground leading-none mt-0.5",children:o.day})]})}),c.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1.5",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx("h4",{className:"text-sm font-semibold text-foreground line-clamp-2 leading-snug flex-1",children:r&&n?`${n.name} - ${e.title}`:e.title}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx(mC,{variant:t,className:"text-xs",children:(d=e.status,d.charAt(0).toUpperCase()+d.slice(1).replace(/_/g," "))})})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-muted-foreground flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(sf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"font-medium text-foreground",children:l.dayOfWeek}),c.jsx("span",{children:l.time})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Vf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:e.venue?.name||"Venue TBD"})]}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsx("span",{children:i(e.duration_minutes)})})]}),c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:e.status===eI.ON_SALE&&c.jsxs(vl,{size:"sm",className:"h-7 px-2",onClick:t=>{t.stopPropagation(),a(e)},children:[c.jsx(qg,{className:"h-3.5 w-3.5 mr-1.5"}),"Book Now"]})})]})]})]})},e.id);var d}})})]})})})}function kq({isLoading:e,shows:t,hasActiveFilters:n,onClearFilters:s,onShowClick:a}){const r=Ua(),i=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return e?c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(e=>c.jsxs(bl,{className:"animate-pulse",children:[c.jsx("div",{className:"h-48 bg-muted rounded-t-lg"}),c.jsx(wl,{children:c.jsx("div",{className:"h-6 bg-muted rounded w-3/4"})})]},e))}):0===t.length?c.jsx(bl,{children:c.jsx(Cl,{className:"pt-6",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Ip,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:al("font-semibold mb-2",r.textSizeCardTitle),children:"No shows found"}),c.jsx("p",{className:al("text-muted-foreground",r.textSizeCardDescription),children:n?"Try adjusting your filters to see more shows.":"No shows with upcoming events available at the moment."}),n&&c.jsx(vl,{variant:"outline",onClick:s,className:"mt-4",children:"Clear Filters"})]})})}):c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(e=>{const t=e.events.length>0;return c.jsxs(bl,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>a(e),children:[e.bannerImage?.file_url?c.jsx("div",{className:"relative h-48 w-full overflow-hidden bg-muted",children:c.jsx("img",{src:e.bannerImage.file_url,alt:e.bannerImage.name||e.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})}):c.jsx("div",{className:"relative h-48 w-full overflow-hidden bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center",children:c.jsx(Ip,{className:"h-16 w-16 text-muted-foreground/30"})}),c.jsx(wl,{children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(Sl,{className:al("mb-2",r.textSizeCardTitle),children:e.name}),e.code&&c.jsxs("p",{className:al("text-muted-foreground",r.textSizeCardDescription),children:["Code: ",e.code]}),e.started_date&&e.ended_date&&c.jsxs("p",{className:al("text-muted-foreground mt-1",r.textSizeCardDescription),children:[i(new Date(e.started_date))," -"," ",i(new Date(e.ended_date))]})]}),t&&c.jsxs(vl,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),a(e)},className:"ml-4",children:[c.jsx(Vp,{className:"h-4 w-4 mr-2"}),"View Events (",e.events.length,")"]})]})}),!t&&c.jsx(Cl,{children:c.jsx("p",{className:al("text-muted-foreground",r.textSizeCardDescription),children:"No events available for this show."})})]},e.id)})})}function Nq({search:e,onSearchChange:t,statusFilter:n,onStatusFilterChange:s,dateFilter:a,onDateFilterChange:r,showPastEvents:i,onShowPastEventsChange:o,onClearFilters:l,pastEventsLabel:d="Include past events",pastEventsClearLabel:u="Clear past events filter"}){const h=e||"all"!==n||a.startDate||a.endDate||i,m=["all"!==n,a.startDate,a.endDate,i].filter(Boolean).length,p=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Sg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),c.jsx(kl,{placeholder:"Search shows or events...",value:e,onChange:e=>t(e.target.value),className:"pl-10 h-8"})]}),c.jsx(NP,{badgeCount:m,label:"Filters",align:"end",popoverContentClassName:"w-80 p-5",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Status"}),c.jsxs(ox,{value:n,onValueChange:e=>s(e),children:[c.jsx(cx,{className:"w-full",children:c.jsx(lx,{placeholder:"Status"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"all",children:"All Status"}),c.jsx(mx,{value:eI.ON_SALE,children:"On Sale"}),c.jsx(mx,{value:eI.PUBLISHED,children:"Published"}),c.jsx(mx,{value:eI.SOLD_OUT,children:"Sold Out"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Date Range"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"From"}),c.jsx(kl,{type:"date",value:a.startDate||"",onChange:e=>r({...a,startDate:e.target.value||null}),className:"w-full"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"To"}),c.jsx(kl,{type:"date",value:a.endDate||"",onChange:e=>r({...a,endDate:e.target.value||null}),min:a.startDate||void 0,className:"w-full"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx("input",{type:"checkbox",id:"showPastEvents",checked:i,onChange:e=>o(e.target.checked),className:"h-4 w-4 rounded border-gray-300 accent-primary"}),c.jsx("label",{htmlFor:"showPastEvents",className:"text-sm font-medium cursor-pointer flex-1",children:d})]}),h&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>{l()},className:"w-full h-8 mt-2",children:"Reset all filters"})]})})]}),h&&c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Search: ",c.jsx("span",{className:"font-medium",children:e}),c.jsx("button",{type:"button",onClick:()=>t(""),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear search filter",title:"Clear search filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),"all"!==n&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:[(f=n,f.charAt(0).toUpperCase()+f.slice(1).replace(/_/g," ")),c.jsx("button",{type:"button",onClick:()=>s("all"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear status filter",title:"Clear status filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),a.startDate&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["From: ",p(a.startDate),c.jsx("button",{type:"button",onClick:()=>r({...a,startDate:null}),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear start date filter",title:"Clear start date filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),a.endDate&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["To: ",p(a.endDate),c.jsx("button",{type:"button",onClick:()=>r({...a,endDate:null}),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear end date filter",title:"Clear end date filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),i&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Past events",c.jsx("button",{type:"button",onClick:()=>o(!1),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":u,title:u,children:c.jsx(ax,{className:"h-3 w-3"})})]}),c.jsx(vl,{variant:"ghost",size:"sm",onClick:l,className:"h-6 px-2 text-xs",children:"Clear all"})]})]});var f}function _q({search:e,onSearchChange:t,statusFilter:n,onStatusFilterChange:s,dateFilter:a,onDateFilterChange:r,showPastEvents:i,onShowPastEventsChange:o,onClearFilters:l,events:d=[],onTimelineSourceChange:u,pastEventsLabel:h="Include past events",pastEventsClearLabel:m="Clear past events filter"}){const f=e||"all"!==n||a.startDate||a.endDate||i,g=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),x=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,v=(()=>{const e=d.filter(e=>e.status===eI.ON_SALE);if(!e.length)return[];const t=new Date;t.setHours(0,0,0,0);const n=new Date(t);n.setDate(n.getDate()+21);const s=new Set;for(const a of e){const e=new Date(a.start_dt);e.setHours(0,0,0,0),e>=t&&e<=n&&s.add(x(e))}return Array.from(s).sort()})(),y=(()=>{const e=d.filter(e=>e.status===eI.PUBLISHED);if(!e.length)return[];const t=new Date,n=t.getFullYear(),s=t.getMonth(),a=new Set;for(const r of e){const e=new Date(r.start_dt),t=e.getFullYear(),i=e.getMonth();(t>n||t===n&&i>=s)&&a.add(`${t}-${i}`)}return Array.from(a).sort()})(),b=e=>e===x(new Date),w=e=>!!a.startDate&&a.startDate===e&&a.endDate===e,S=e=>{const[t,n]=e.split("-").map(Number),s=`${t}-${String(n+1).padStart(2,"0")}-01`,r=new Date(t,n+1,0).getDate(),i=`${t}-${String(n+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`;return a.startDate===s&&a.endDate===i},j=e=>{r({startDate:e,endDate:e}),u?.("now-showing")},C=e=>{const[t,n]=e.split("-").map(Number),s=`${t}-${String(n+1).padStart(2,"0")}-01`,a=new Date(t,n+1,0).getDate(),i=`${t}-${String(n+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`;r({startDate:s,endDate:i}),u?.("coming-soon")},k=e=>{r({...a,startDate:null,endDate:null}),u?.(e)},N=null!=a.startDate&&null!=a.endDate,[_,P]=p.useState("now-showing"),E=v.length>0&&y.length>0;return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Sg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),c.jsx(kl,{placeholder:"Search events...",value:e,onChange:e=>t(e.target.value),className:"pl-10 h-8"})]}),c.jsxs(lP,{children:[c.jsx(cP,{asChild:!0,children:c.jsxs(vl,{variant:"outline",className:"h-8 gap-2 px-4 shadow-sm border-dashed",children:[c.jsx(Lf,{className:"h-4 w-4"}),"Filters",f&&c.jsx("div",{className:"bg-primary text-primary-foreground text-[10px] rounded-full h-4 w-4 grid place-items-center ml-1 font-bold",children:["all"!==n,a.startDate,a.endDate,i].filter(Boolean).length})]})}),c.jsx(dP,{className:"w-80 p-5",align:"end",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Status"}),c.jsxs(ox,{value:n,onValueChange:e=>s(e),children:[c.jsx(cx,{className:"w-full",children:c.jsx(lx,{placeholder:"Status"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"all",children:"All Status"}),c.jsx(mx,{value:eI.ON_SALE,children:"On Sale"}),c.jsx(mx,{value:eI.PUBLISHED,children:"Published"}),c.jsx(mx,{value:eI.SOLD_OUT,children:"Sold Out"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-sm leading-none",children:"Date Range"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"From"}),c.jsx(kl,{type:"date",value:a.startDate||"",onChange:e=>{r({...a,startDate:e.target.value||null}),u?.(null)},className:"w-full"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"To"}),c.jsx(kl,{type:"date",value:a.endDate||"",onChange:e=>{r({...a,endDate:e.target.value||null}),u?.(null)},min:a.startDate||void 0,className:"w-full"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx("input",{type:"checkbox",id:"eventShowPastEvents",checked:i,onChange:e=>o(e.target.checked),className:"h-4 w-4 rounded border-gray-300 accent-primary"}),c.jsx("label",{htmlFor:"eventShowPastEvents",className:"text-sm font-medium cursor-pointer flex-1",children:h})]}),f&&c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>{l()},className:"w-full h-8 mt-2",children:"Reset all filters"})]})})]})]}),d.length>0&&(v.length>0||y.length>0)&&c.jsx("div",{className:"rounded-lg border border-l-[3px] border-l-primary/40 bg-muted/30 px-4 py-3","aria-label":"Timeline filters",children:E?c.jsxs(sy,{value:_,onValueChange:e=>{const t=e;P(t),u?.(t),r({...a,startDate:null,endDate:null})},children:[c.jsxs(ay,{className:"h-9 w-auto inline-flex mb-2",children:[c.jsxs(ry,{value:"now-showing",className:"gap-1.5 text-xs px-3",children:[c.jsx(ug,{className:"h-3.5 w-3.5"}),"Now Showing"]}),c.jsxs(ry,{value:"coming-soon",className:"gap-1.5 text-xs px-3",children:[c.jsx(Fp,{className:"h-3.5 w-3.5"}),"Coming Soon"]})]}),c.jsx(iy,{value:"now-showing",className:"mt-0",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("now-showing"),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),v.map(e=>{const t=new Date(e+"T12:00:00"),n=b(e)?"Today":t.toLocaleDateString(void 0,{weekday:"short",day:"numeric"}),s=w(e);return c.jsx("button",{type:"button",onClick:()=>j(e),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",s?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:n},e)})]})}),c.jsx(iy,{value:"coming-soon",className:"mt-0",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("coming-soon"),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),y.map(e=>{const[t,n]=e.split("-").map(Number),s=new Date(t,n,1).toLocaleDateString(void 0,{month:"short",year:"numeric"}),a=S(e);return c.jsx("button",{type:"button",onClick:()=>C(e),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",a?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:s},e)})]})})]}):v.length>0?c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-foreground mb-2",children:[c.jsx(ug,{className:"h-3.5 w-3.5 text-primary"}),c.jsx("span",{children:"Now Showing"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("now-showing"),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),v.map(e=>{const t=new Date(e+"T12:00:00"),n=b(e)?"Today":t.toLocaleDateString(void 0,{weekday:"short",day:"numeric"}),s=w(e);return c.jsx("button",{type:"button",onClick:()=>j(e),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",s?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:n},e)})]})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-foreground mb-2",children:[c.jsx(Fp,{className:"h-3.5 w-3.5 text-primary"}),c.jsx("span",{children:"Coming Soon"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 overflow-x-auto pb-1",children:[c.jsx("button",{type:"button",onClick:()=>k("coming-soon"),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",N?"border-border bg-background hover:bg-accent hover:border-primary/50":"border-primary bg-primary text-primary-foreground"),children:"All"}),y.map(e=>{const[t,n]=e.split("-").map(Number),s=new Date(t,n,1).toLocaleDateString(void 0,{month:"short",year:"numeric"}),a=S(e);return c.jsx("button",{type:"button",onClick:()=>C(e),className:al("shrink-0 rounded-full border px-3 py-1.5 text-xs font-medium transition-colors",a?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-accent hover:border-primary/50"),children:s},e)})]})]})}),f&&c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Search: ",c.jsx("span",{className:"font-medium",children:e}),c.jsx("button",{type:"button",onClick:()=>t(""),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear search filter",title:"Clear search filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),"all"!==n&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:[(R=n,R.charAt(0).toUpperCase()+R.slice(1).replace(/_/g," ")),c.jsx("button",{type:"button",onClick:()=>s("all"),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear status filter",title:"Clear status filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),a.startDate&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["From: ",g(a.startDate),c.jsx("button",{type:"button",onClick:()=>{r({...a,startDate:null}),u?.(null)},className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear start date filter",title:"Clear start date filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),a.endDate&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["To: ",g(a.endDate),c.jsx("button",{type:"button",onClick:()=>{r({...a,endDate:null}),u?.(null)},className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":"Clear end date filter",title:"Clear end date filter",children:c.jsx(ax,{className:"h-3 w-3"})})]}),i&&c.jsxs(mC,{variant:"secondary",className:"gap-1 rounded-sm px-2 py-1",children:["Past events",c.jsx("button",{type:"button",onClick:()=>o(!1),className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5","aria-label":m,title:m,children:c.jsx(ax,{className:"h-3 w-3"})})]}),c.jsx(vl,{variant:"ghost",size:"sm",onClick:l,className:"h-6 px-2 text-xs",children:"Clear all"})]})]});var R}const Pq=e=>{switch(e){case eI.PUBLISHED:return"border-l-blue-500 bg-blue-50/50 hover:bg-blue-50";case eI.ON_SALE:return"border-l-green-500 bg-green-50/50 hover:bg-green-50";case eI.SOLD_OUT:return"border-l-red-500 bg-red-50/50 hover:bg-red-50";case eI.CANCELLED:return"border-l-gray-500 bg-gray-50/50 hover:bg-gray-50";case eI.COMPLETED:return"border-l-purple-500 bg-purple-50/50 hover:bg-purple-50";case eI.DRAFT:return"border-l-yellow-500 bg-yellow-50/50 hover:bg-yellow-50";default:return"border-l-gray-400 bg-gray-50/50 hover:bg-gray-50"}},Eq=e=>{switch(e){case eI.PUBLISHED:return"bg-blue-500";case eI.ON_SALE:return"bg-green-500";case eI.SOLD_OUT:return"bg-red-500";case eI.CANCELLED:return"bg-gray-500";case eI.COMPLETED:return"bg-purple-500";case eI.DRAFT:return"bg-yellow-500";default:return"bg-gray-400"}};function Rq({events:e,onEventClick:t,onDateClick:n,className:s}){const[a,r]=p.useState(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}),[i,o]=p.useState("all"),[l,d]=p.useState(new Set),u=p.useMemo(()=>{const t=new Set;return e.forEach(e=>{e.venue?.city&&t.add(e.venue.city)}),Array.from(t).sort()},[e]),h=p.useMemo(()=>"all"===i?e:e.filter(e=>e.venue?.city===i),[e,i]),m=p.useMemo(()=>{const e={};return h.forEach(t=>{const n=new Date(t.start_dt),s=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`;e[s]||(e[s]=[]),e[s].push(t)}),e},[h]),f=e=>{const t=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`;return m[t]||[]},g=(e,t)=>h.filter(n=>{const s=new Date(n.start_dt);return s.getFullYear()===e&&s.getMonth()===t}).length,x=p.useMemo(()=>{const e=[],t=a.getFullYear(),n=a.getMonth();for(let s=-2;s<=2;s++){const a=new Date(t,n+s,1),r=a.getFullYear(),i=a.getMonth(),o=g(r,i);e.push({date:a,shortName:a.toLocaleString("default",{month:"short"}),fullName:a.toLocaleString("default",{month:"long"}),year:r,eventCount:o,isDisabled:0===o})}return e},[a,h]),v=p.useMemo(()=>{const e=a.getFullYear(),t=a.getMonth(),n=new Date;n.setHours(0,0,0,0);const s=new Date(e,t,1),r=new Date(e,t+1,0),i=s.getDay(),o=new Date(e,t,0).getDate(),l=[];for(let a=i-1;a>=0;a--){const s=new Date(e,t-1,o-a);s.setHours(0,0,0,0),l.push({date:s,dayNumber:s.getDate(),isCurrentMonth:!1,isPast:s<n,events:f(s)})}for(let a=1;a<=r.getDate();a++){const s=new Date(e,t,a);s.setHours(0,0,0,0),l.push({date:s,dayNumber:a,isCurrentMonth:!0,isPast:s<n,events:f(s)})}const c=7-l.length%7;if(c<7)for(let a=1;a<=c;a++){const s=new Date(e,t+1,a);s.setHours(0,0,0,0),l.push({date:s,dayNumber:a,isCurrentMonth:!1,isPast:s<n,events:f(s)})}return l},[a,m]),y=p.useMemo(()=>{const e=[];for(let t=0;t<v.length;t+=7)e.push(v.slice(t,t+7));return e},[v]),b=e=>{const t=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`;d(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})},w=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),S=e=>e.venue?.city&&e.venue?.state?`${e.venue.city}, ${e.venue.state}`:e.venue?.city?e.venue.city:"Location TBA";return c.jsxs("div",{className:al("space-y-6",s),"data-testid":"calendar",children:[c.jsxs("div",{className:"space-y-4",children:[u.length>0&&c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{className:"w-full max-w-sm",children:[c.jsx("label",{htmlFor:"location-filter",className:"block text-sm font-medium mb-2",children:"Location"}),c.jsxs("div",{className:"relative",children:[c.jsx(Vf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-cyan-500 h-4 w-4 z-10"}),c.jsxs("select",{id:"location-filter",value:i,onChange:e=>o(e.target.value),"aria-label":"Location suggestions","aria-autocomplete":"both",className:al("w-full h-11 pl-10 pr-4 py-2","border border-input rounded-md","bg-background text-sm","focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent","transition-colors cursor-pointer","appearance-none"),children:[c.jsx("option",{value:"all",children:"City or Zip Code"}),u.map(e=>c.jsx("option",{value:e,children:e},e))]}),c.jsx(Vp,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4 pointer-events-none"})]})]})}),c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsx("span",{className:"sr-only",children:c.jsxs("div",{"aria-live":"polite",children:[c.jsx("span",{children:c.jsxs("span",{children:[a.toLocaleString("default",{month:"long",year:"numeric"})," selected"]})}),c.jsxs("span",{children:[g(a.getFullYear(),a.getMonth())," Events"]})]})}),c.jsx(vl,{variant:"outline",size:"icon",onClick:()=>{r(new Date(a.getFullYear()-1,a.getMonth(),1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Previous Year",children:c.jsx(Vp,{className:"h-5 w-5 rotate-90"})}),c.jsx(vl,{variant:"ghost",size:"icon",onClick:()=>{r(new Date(a.getFullYear(),a.getMonth()-1,1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Previous Month",children:c.jsx(Vp,{className:"h-5 w-5 rotate-90"})}),c.jsx("div",{role:"tablist",className:"flex items-center justify-center gap-2 flex-1 overflow-x-auto scrollbar-hide",children:x.map((e,t)=>{const n=e.date.getFullYear()===a.getFullYear()&&e.date.getMonth()===a.getMonth(),s=e.date.getFullYear()===a.getFullYear()&&e.date.getMonth()===a.getMonth();return c.jsx("button",{role:"tab",...n?{"aria-selected":"true"}:{"aria-selected":"false"},onClick:()=>{return!e.isDisabled&&(t=e.date,void r(t));var t},disabled:e.isDisabled,className:al("shrink-0","px-4 py-2.5 min-w-[100px]","text-sm font-medium transition-all duration-200","whitespace-nowrap rounded-lg","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",n&&"bg-primary text-primary-foreground shadow-md scale-105",!n&&!e.isDisabled&&"hover:bg-accent hover:scale-102",e.isDisabled&&"opacity-40 cursor-not-allowed"),children:c.jsxs("span",{className:"flex flex-col items-center gap-1",children:[c.jsx("span",{className:al(n&&"font-bold"),children:s?c.jsxs(c.Fragment,{children:[c.jsx("span",{"aria-hidden":"true",children:c.jsxs("span",{children:[e.shortName," ",e.year]})}),c.jsxs("span",{className:"sr-only",children:[c.jsxs("span",{children:[e.fullName," ",e.year]})," selected"]})]}):c.jsx("span",{children:e.shortName})}),c.jsx("span",{className:"sr-only",children:", "}),c.jsx("span",{className:al("text-xs font-normal",n?"text-primary-foreground/80":"text-muted-foreground"),children:e.eventCount>0?`${e.eventCount} Event${1!==e.eventCount?"s":""}`:"No Events"})]})},`${e.date.getTime()}-${t}`)})}),c.jsx(vl,{variant:"ghost",size:"icon",onClick:()=>{r(new Date(a.getFullYear(),a.getMonth()+1,1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Next Month",children:c.jsx(Vp,{className:"h-5 w-5 -rotate-90"})}),c.jsx(vl,{variant:"outline",size:"icon",onClick:()=>{r(new Date(a.getFullYear()+1,a.getMonth(),1))},className:"h-10 w-10 rounded-full shrink-0","aria-label":"Next Year",children:c.jsx(Vp,{className:"h-5 w-5 -rotate-90"})})]})]}),c.jsxs("div",{className:"border rounded-lg overflow-hidden bg-border shadow-sm","data-testid":"calendarGrid",children:[c.jsx("ul",{"aria-hidden":"true",className:"grid grid-cols-7 gap-px bg-border border-b",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>c.jsx("li",{className:"py-3 px-2 text-center text-xs font-bold text-muted-foreground uppercase tracking-wider bg-muted/50",children:c.jsx("span",{children:e})},e))}),c.jsx("div",{"aria-hidden":"false",className:"flex flex-col gap-px bg-border",children:y.map((e,s)=>c.jsxs("section",{children:[c.jsxs("h3",{className:"sr-only",children:["Week ",s+1]}),c.jsx("ul",{className:"grid grid-cols-7 gap-px bg-border",children:e.map((e,s)=>{const a=e.events.length>0,r=!a,i=(e=>{const t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()})(e.date),o=(e=>{const t=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`;return l.has(t)})(e.date),d=`${e.date.getFullYear()}-${e.date.getMonth()}-${e.date.getDate()}`,u=0===(h=e.events).length?"":1===h.length||1===new Set(h.map(e=>e.venue?.city).filter(Boolean)).size?S(h[0]):"Multiple Locations";var h;return c.jsx("li",{className:al("relative min-h-[140px] group","transition-all duration-200 ease-in-out",!e.isCurrentMonth&&"bg-muted/20",e.isCurrentMonth&&"bg-card",a&&e.isCurrentMonth&&"bg-accent/5",a&&!e.isCurrentMonth&&"bg-accent/10",i&&"bg-primary/5 ring-1 ring-primary/20 ring-inset",i&&a&&"bg-primary/10 ring-1 ring-primary/30",a&&!o&&"hover:bg-accent/20 hover:shadow-sm cursor-pointer"),onClick:()=>{a&&!o&&e.events.length>1&&b(e.date)},children:c.jsxs("div",{className:"h-full flex flex-col p-3",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("button",{disabled:r,...o?{"aria-expanded":"true"}:{"aria-expanded":"false"},onClick:t=>{t.stopPropagation(),a&&b(e.date)},className:al("text-sm font-semibold leading-none","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded","transition-colors",i&&"text-primary font-bold",!i&&e.isCurrentMonth&&"text-foreground",!e.isCurrentMonth&&"text-muted-foreground/50",!r&&"hover:text-primary"),children:[c.jsxs("span",{className:"sr-only",children:[a&&c.jsxs(c.Fragment,{children:[e.events.length," Event",1!==e.events.length?"s":"",", "]}),!a&&c.jsx(c.Fragment,{children:"0 Events, "}),c.jsx("span",{children:e.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),c.jsx("span",{"aria-hidden":"true",children:String(e.dayNumber).padStart(2,"0")})]}),a&&c.jsx("span",{className:"flex items-center gap-1 shrink-0 ml-2",children:1===e.events.length?c.jsxs("span",{"data-testid":"availability-pill",children:[c.jsx("div",{className:al("h-2.5 w-2.5 rounded-full shadow-sm",Eq(e.events[0].status))}),c.jsx("span",{className:"sr-only",children:e.events[0].status})]}):(()=>{const t=Array.from(new Set(e.events.map(e=>e.status))).slice(0,3);return t.length<=3?c.jsx("span",{className:"flex gap-0.5",children:t.map((e,t)=>c.jsx("div",{className:al("h-2 w-2 rounded-full shadow-sm",Eq(e)),title:e},t))}):c.jsxs("span",{"aria-hidden":"true",className:"text-xs font-bold text-primary px-1.5 py-0.5 bg-primary/10 rounded",children:["+",e.events.length]})})()})]}),a&&!o&&c.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground truncate",children:u}),c.jsx("div",{className:"mt-auto",children:c.jsxs("button",{onClick:s=>{s.stopPropagation(),n?n(e.date,e.events):1===e.events.length?t(e.events[0]):b(e.date)},className:al("w-full text-left px-2 py-1.5 rounded-md","transition-all duration-150","group flex items-center justify-between","hover:bg-accent/80 focus:outline-none focus:ring-2 focus:ring-ring"),children:[1===e.events.length?c.jsx("span",{className:"text-xs font-semibold text-foreground",children:w(e.events[0].start_dt)}):c.jsxs("span",{className:"text-xs font-semibold text-primary",children:[e.events.length," Events"]}),c.jsx(Vp,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-foreground transition-all -rotate-90"}),c.jsxs("span",{className:"sr-only",children:[", ",c.jsx("span",{children:e.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),1===e.events.length&&c.jsxs("span",{children:[", ",S(e.events[0])]}),e.events.length>1&&c.jsxs("span",{children:[", ",u]})]})]})})]}),a&&o&&c.jsxs("div",{className:"flex-1 flex flex-col gap-2 -mx-1",children:[c.jsx("div",{className:"text-xs font-bold text-foreground px-1 pb-1 border-b",children:e.date.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),c.jsx("div",{className:"flex-1 space-y-1.5 overflow-y-auto max-h-[180px] pr-1 custom-scrollbar",children:e.events.map(e=>c.jsxs("button",{onClick:n=>{n.stopPropagation(),t(e)},className:al("w-full text-left p-2 rounded-md border-l-4","transition-all duration-150 group","focus:outline-none focus:ring-2 focus:ring-ring",Pq(e.status)),children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsx("span",{className:"text-xs font-semibold text-foreground",children:w(e.start_dt)}),c.jsx(Vp,{className:"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors shrink-0 -rotate-90"})]}),c.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S(e)}),e.show&&c.jsx("div",{className:"text-xs text-muted-foreground/80 truncate mt-0.5",children:e.show.name})]},e.id))})]})]})},`${d}-${s}`)})})]},s))})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx(Ip,{className:"h-4 w-4"}),c.jsxs("span",{children:["Showing ",h.length," event",1!==h.length?"s":""," in"," ",a.toLocaleString("default",{month:"long",year:"numeric"})]})]})]})}function Aq({open:e,onOpenChange:t,date:n,events:s,onEventClick:a,onBookNow:r}){const i=e=>{const t=Math.floor(e/60),n=e%60;return t>0?n>0?`${t}h ${n}m`:`${t}h`:`${n}m`};return c.jsx(uP,{open:e,onOpenChange:t,children:c.jsx(fP,{side:"right",className:"w-[600px] sm:w-[740px] sm:max-w-[740px] flex flex-col p-0",children:n&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx(gP,{children:c.jsxs(vP,{className:"text-xl flex items-center gap-2",children:[c.jsx(Ip,{className:"h-5 w-5 text-muted-foreground"}),(o=n,o.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}))]})})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:c.jsx(qP,{items:s.map(e=>({...e,name:e.title})),searchable:!1,viewMode:"list",showViewToggle:!1,gridCols:{default:1},emptyMessage:`No events scheduled for ${n.toLocaleDateString()}.`,renderItem:e=>{const t=(e=>{switch(e.toLowerCase()){case"on_sale":return"default";case"published":return"secondary";case"sold_out":default:return"outline";case"cancelled":return"destructive"}})(e.status),n=(s=e.start_dt,new Date(s).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}));var s,o;return c.jsx("div",{className:"group rounded-lg border bg-card transition-all hover:shadow-md hover:border-primary/20 cursor-pointer overflow-hidden mb-3",onClick:()=>a(e),children:c.jsxs("div",{className:"flex gap-3 p-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"flex flex-col items-center justify-center w-20 h-16 rounded bg-muted/50 border border-border/50 px-1",children:c.jsx("span",{className:"text-sm font-bold text-foreground leading-none",children:n})})}),c.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1.5",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex flex-col min-w-0",children:[e.show&&c.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide truncate",children:e.show.name}),c.jsx("h4",{className:"text-sm font-semibold text-foreground line-clamp-1 leading-snug",children:e.title})]}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx(mC,{variant:t,className:"text-xs",children:(o=e.status,o.charAt(0).toUpperCase()+o.slice(1).replace(/_/g," "))})})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-muted-foreground flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Vf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:e.venue?.name||"Venue TBD"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(sf,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{children:i(e.duration_minutes)})]})]}),c.jsx("div",{className:"flex items-center gap-1 flex-shrink-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:e.status===eI.ON_SALE&&c.jsxs(vl,{size:"sm",className:"h-7 px-2",onClick:t=>{t.stopPropagation(),r(e)},children:[c.jsx(qg,{className:"h-3.5 w-3.5 mr-1.5"}),"Book Now"]})})]})]})]})},e.id)}})})]})})});var o}const Tq="Include past events (90 days back)",Mq="Clear past events filter (90 days back)";function Dq(){const e=Yt(),[t,n]=p.useState("show"),[s,a]=p.useState(""),[r,i]=p.useState("all"),[o,l]=p.useState({startDate:null,endDate:null}),[d,u]=p.useState(!1),[h,m]=p.useState(""),[f,g]=p.useState("all"),[x,v]=p.useState({startDate:null,endDate:null}),[y,b]=p.useState(!1),[w,S]=p.useState("now-showing"),[j,C]=p.useState({}),[k,N]=p.useState(null),[_,P]=p.useState(!1),[E,R]=p.useState([]),[A,T]=p.useState(null),[M,D]=p.useState(!1),[L,F]=p.useState(!1),[I,O]=p.useState(null),[z,B]=p.useState(null),$=gq(p.useMemo(()=>new pq({apiClient:Fa,endpoints:{bookings:"/api/v1/sales/bookings"}}),[])),U=lI(),V=$I(),q=p.useMemo(()=>({page:1,pageSize:100,total:0,totalPages:0}),[]),H=p.useMemo(()=>({page:1,pageSize:200,total:0,totalPages:0}),[]),G=p.useMemo(()=>{const e=new Date;return e.setHours(0,0,0,0),e},[]),K=p.useMemo(()=>{const e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()-90),e},[]),[W,Q]=p.useState(""),[Y,X]=p.useState("");p.useEffect(()=>{const e=setTimeout(()=>{Q(s)},300);return()=>clearTimeout(e)},[s]),p.useEffect(()=>{const e=setTimeout(()=>{X(h)},300);return()=>clearTimeout(e)},[h]);const{data:Z,isLoading:J}=ZI(V,{filter:{search:W||void 0},pagination:q,enabled:"show"===t||"event"===t}),{data:ee,isLoading:te}=cI(U,{filter:{status:[eI.PUBLISHED,eI.ON_SALE,eI.SOLD_OUT]},pagination:H,enabled:"show"===t}),ne=p.useMemo(()=>"now-showing"===w?[eI.ON_SALE,eI.SOLD_OUT]:"coming-soon"===w?[eI.PUBLISHED]:[eI.PUBLISHED,eI.ON_SALE,eI.SOLD_OUT],[w]),{data:se,isLoading:ae}=cI(U,{filter:{search:Y||void 0,status:ne},pagination:H,enabled:"event"===t}),{data:re,isLoading:ie}=cI(U,{filter:{status:[eI.PUBLISHED,eI.ON_SALE,eI.SOLD_OUT]},pagination:H,enabled:"calendar"===t}),{data:oe}=cI(U,{filter:{status:[eI.PUBLISHED,eI.ON_SALE,eI.SOLD_OUT]},pagination:H,enabled:"event"===t});p.useEffect(()=>{if("show"===t&&Z?.data&&Z.data.length>0){(async()=>{for(let t=0;t<Z.data.length;t++){const n=Z.data[t];try{const e=await V.fetchShowImages(n.id);C(t=>t[n.id]?t:{...t,[n.id]:e}),t<Z.data.length-1&&await new Promise(e=>setTimeout(e,100))}catch(e){429!==e?.response?.status&&429!==e?.status||await new Promise(e=>setTimeout(e,2e3))}}})()}},[t,Z?.data,V]);const le=p.useMemo(()=>{if(!Z?.data||!ee?.data)return[];(new Date).setHours(0,0,0,0);const e=ee.data.filter(e=>{const t=new Date(e.start_dt);t.setHours(0,0,0,0);if(t<(d?K:G))return!1;if(!1===e.is_active)return!1;if("all"!==r&&e.status!==r)return!1;if(o.startDate){const e=new Date(o.startDate);if(e.setHours(0,0,0,0),t<e)return!1}if(o.endDate){const e=new Date(o.endDate);if(e.setHours(23,59,59,999),t>e)return!1}return!0}),t=new Map;e.forEach(e=>{const n=t.get(e.show_id)||[];t.set(e.show_id,[...n,e])});return Z.data.reduce((e,n)=>{const s=t.get(n.id)||[];let a=!1;if(W){const e=W.toLowerCase(),t=n.name.toLowerCase().includes(e),r=s.some(t=>t.title.toLowerCase().includes(e));(t||r)&&(a=!0)}else s.length>0&&(a=!0);if(a){const t=j[n.id]||[],a=t.find(e=>e.is_banner)||t[0];e.push({...n,events:s.sort((e,t)=>new Date(e.start_dt).getTime()-new Date(t.start_dt).getTime()),bannerImage:a})}return e},[]).sort((e,t)=>0===e.events.length&&0===t.events.length?0:0===e.events.length?1:0===t.events.length?-1:new Date(e.events[0].start_dt).getTime()-new Date(t.events[0].start_dt).getTime())},[Z?.data,ee?.data,j,W,r,o,d,G,K]),ce=p.useCallback(t=>{e({to:"/ticketing/events/$eventId/inventory",params:{eventId:t.id}})},[e]),de=p.useCallback(()=>{a(""),i("all"),l({startDate:null,endDate:null}),u(!1)},[]),ue=p.useCallback(()=>{m(""),g("all"),v({startDate:null,endDate:null}),b(!1)},[]),he=!!(s||"all"!==r||o.startDate||o.endDate||d),me=p.useMemo(()=>{if(!se?.data)return[];const e=new Map(Z?.data?.map(e=>[e.id,e]));(new Date).setHours(0,0,0,0);return se.data.map(t=>{const n=e.get(t.show_id);return n?{...t,show:{id:n.id,name:n.name}}:t}).filter(e=>{const t=new Date(e.start_dt);t.setHours(0,0,0,0);if(t<(y?K:G))return!1;if(!1===e.is_active)return!1;if(null===w&&"all"!==f&&e.status!==f)return!1;if(x.startDate){if(t<new Date(x.startDate+"T00:00:00"))return!1}if(x.endDate){if(t>new Date(x.endDate+"T23:59:59.999"))return!1}return!0}).sort((e,t)=>new Date(e.start_dt).getTime()-new Date(t.start_dt).getTime())},[se?.data,Z?.data,f,x,y,w]),pe=p.useMemo(()=>{if(!re?.data)return[];const e=new Map(Z?.data?.map(e=>[e.id,e]));return(new Date).setHours(0,0,0,0),re.data.filter(e=>{const t=new Date(e.start_dt);return t.setHours(0,0,0,0),!(t<K)&&!1!==e.is_active}).map(t=>{const n=e.get(t.show_id);return n?{...t,show:{id:n.id,name:n.name}}:t}).sort((e,t)=>new Date(e.start_dt).getTime()-new Date(t.start_dt).getTime())},[re?.data,Z?.data,K]),fe="show"===t?J||te:"event"===t?ae:ie,ge=le.reduce((e,t)=>e+t.events.length,0),xe=p.useCallback(e=>{N(e),P(!0)},[]),ve=p.useCallback((e,t)=>{T(e),R(t),D(!0)},[]),ye=p.useCallback(e=>{O(e.show?.id||e.show_id||null),B(e.id),F(!0)},[]),be=p.useCallback(async e=>{try{await $.mutateAsync(e),Ek({title:"Success",description:"Booking created successfully"}),F(!1)}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to create booking",variant:"destructive"}),wW}},[$]);return c.jsxs("div",{className:"space-y-6 p-6",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsx("div",{className:"flex-1 max-w-3xl",children:"show"===t?c.jsx(Nq,{search:s,onSearchChange:a,statusFilter:r,onStatusFilterChange:i,dateFilter:o,onDateFilterChange:l,showPastEvents:d,onShowPastEventsChange:u,onClearFilters:de,pastEventsLabel:Tq,pastEventsClearLabel:Mq}):"event"===t?c.jsx(_q,{search:h,onSearchChange:m,statusFilter:f,onStatusFilterChange:g,dateFilter:x,onDateFilterChange:v,showPastEvents:y,onShowPastEventsChange:b,onClearFilters:ue,events:oe?.data||[],onTimelineSourceChange:S,pastEventsLabel:Tq,pastEventsClearLabel:Mq}):c.jsx("h1",{className:"text-2xl font-bold tracking-tight h-10 flex items-center",children:"Explore Calendar"})}),c.jsx("div",{className:"flex items-center gap-2 pt-0.5",children:c.jsxs("div",{className:"flex border rounded-md",children:[c.jsx(vl,{variant:"show"===t?"default":"ghost",size:"icon",onClick:()=>n("show"),className:"rounded-none rounded-l-md border-r h-8 w-8 px-0",title:"Show Layout",children:c.jsx(wf,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"event"===t?"default":"ghost",size:"icon",onClick:()=>n("event"),className:"rounded-none border-r h-8 w-8 px-0",title:"Event Layout",children:c.jsx(Ff,{className:"h-4 w-4"})}),c.jsx(vl,{variant:"calendar"===t?"default":"ghost",size:"icon",onClick:()=>n("calendar"),className:"rounded-none rounded-r-md h-8 w-8 px-0",title:"Calendar Layout",children:c.jsx(Ip,{className:"h-4 w-4"})})]})})]}),"calendar"!==t&&c.jsx("div",{className:"text-sm text-muted-foreground",children:fe?"Loading events...":"show"===t?c.jsxs(c.Fragment,{children:["Showing ",le.length," show",1!==le.length?"s":""," with"," ",ge," event",1!==ge?"s":""]}):c.jsxs(c.Fragment,{children:["Showing ",me.length," event",1!==me.length?"s":""]})}),"event"===t?c.jsx(xI,{events:me,loading:fe,error:ae||se?null:new Error("Failed to load events"),onEventClick:ce,searchable:!1,title:"",description:"",showViewToggle:!1,showShowNameInTitle:!0,customActions:e=>c.jsx("div",{className:"flex gap-2",children:e.status===eI.ON_SALE&&c.jsxs(vl,{size:"sm",onClick:()=>ye(e),children:[c.jsx(qg,{className:"h-4 w-4 mr-2"}),"Book Now"]})})}):"calendar"===t?c.jsx(Rq,{events:pe,onEventClick:ye,onDateClick:ve}):c.jsx(c.Fragment,{children:c.jsx(kq,{isLoading:fe,shows:le,hasActiveFilters:he,onClearFilters:de,onShowClick:xe})}),c.jsx(Cq,{open:_,onOpenChange:P,show:k,onEventClick:ce,onBookNow:ye}),c.jsx(Aq,{open:M,onOpenChange:D,date:A,events:E,onEventClick:ce,onBookNow:ye}),c.jsx(hq,{open:L,onOpenChange:F,onSubmit:be,initialShowId:I,initialEventId:z})]})}function Lq({className:e,employees:t=[],loading:n=!1,error:s=null,pagination:a,onEmployeeClick:r,onCreate:i,onSearch:o,onPageChange:l,onPageSizeChange:d,customActions:u}){const h=Ua(),m=[OP({getDisplayName:e=>e.code||e.name||String(e.id),getInitials:e=>(e=>{if(!e)return"?";const t=e.replace(/[^A-Za-z]/g,"");return t.length>=2?t.slice(0,2).toUpperCase():e.length>=2?e.slice(0,2).toUpperCase():e.charAt(0).toUpperCase()})(e.code),header:"Code",showAvatar:!1,onClick:r,additionalOptions:{id:"code"}}),LP({accessorKey:"name",header:"Name",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",h.textSize),children:t??"-"})}}),LP({accessorKey:"job_title",header:"Job Title",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",h.textSize),children:t??"-"})}}),LP({accessorKey:"department",header:"Department",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",h.textSize),children:t??"-"})}}),LP({accessorKey:"work_email",header:"Email",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",h.textSize),children:t??"-"})}}),LP({accessorKey:"employment_type",header:"Type",cell:e=>{const t=e.getValue();return c.jsx("span",{className:al("text-muted-foreground",h.textSize),children:t??"-"})}}),...u?[zP({customActions:u})]:[]],p=t,f=a?{page:a.page,pageSize:a.pageSize,total:a.total,totalPages:a.totalPages}:void 0;return c.jsx("div",{className:al("w-full",e),children:c.jsx($P,{data:p,columns:m,useDefaultColumns:!1,title:"Employees",description:"Manage and view employees",onCreate:i,onSearch:o,manualPagination:Boolean(a&&l),serverPagination:f,onPageChange:l,onPageSizeChange:d,loading:n})})}function Fq({className:e,data:t,loading:n=!1,error:s=null,showMetadata:a=!1,editable:r=!0,attachmentService:i,onEdit:o,onManageTags:l,onManageAttachments:d,profilePhotoComponent:u,customActions:h}){const[m,f]=p.useState("profile"),[g,x]=p.useState([]),[v,y]=p.useState(!1),b=p.useMemo(()=>i||new YP({apiClient:Fa,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[i]),w=p.useMemo(()=>t&&(t?.name||t?.code||t?.id)||"",[t,t?.code,t?.name]),S=e=>{if(!e)return"N/A";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},j=p.useCallback(async()=>{if(t?.id&&b){y(!0);try{const e=await b.getAttachmentsForEntity("employee",t.id,"document");x(e.items||[])}catch(e){x([])}finally{y(!1)}}},[t?.id,b]);if(p.useEffect(()=>{"documents"===m&&t?.id&&b&&j()},[m,t?.id,b,j]),n)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading..."})})});if(s)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-destructive",children:["Error: ",s.message]})})});if(!t)return c.jsx(bl,{className:al("p-6",e),children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"No employee selected"})})});const C=a,k=[{value:"profile",label:"Overview",icon:_f},{value:"contact",label:"Contact & Address",icon:Uf},{value:"sales",label:"Sales & Performance",icon:Kg},{value:"documents",label:"Documents"+(g.length>0?` (${g.length})`:""),icon:pf}];return C&&k.push({value:"metadata",label:"Metadata",icon:lf}),c.jsx(bl,{className:al("p-6",e),children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[u?c.jsx("div",{className:"flex-shrink-0",children:u}):c.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-primary/10",children:c.jsx(_f,{className:"h-10 w-10 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:w}),t.code&&c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",t.code,c.jsx(HD,{value:t.code,variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",title:"Copy code"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[h?.(t),r&&o&&c.jsxs(vl,{onClick:()=>o(t),size:"sm",variant:"outline",className:al("h-8 px-2 text-xs"),children:[c.jsx(Tg,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),c.jsx("div",{children:c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",size:"sm",className:al("h-8 px-2 text-xs"),"aria-label":"Actions",children:c.jsx(uf,{className:"h-3 w-3"})})}),c.jsxs(JS,{align:"end",className:"w-56",children:[r&&l&&c.jsxs(ej,{onClick:()=>l(t),children:[c.jsx(zg,{className:"mr-2 h-3.5 w-3.5"})," Manage Tags"]}),r&&d&&c.jsxs(ej,{onClick:()=>d(t),children:[c.jsx(pf,{className:"mr-2 h-3.5 w-3.5"})," Manage Documents"]}),h&&h(t)]})]})})]})]}),c.jsx(HM,{tabs:k,value:m,onValueChange:e=>f(e),children:e=>c.jsxs("div",{className:"mt-0",children:["profile"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(QM,{columns:3,children:[c.jsx(WM,{label:"Work Email",value:t.work_email,linkType:"email",icon:Uf,hideIfEmpty:!1}),c.jsx(WM,{label:"Job Title",value:t.job_title,icon:Ap,hideIfEmpty:!1}),c.jsx(WM,{label:"Department",value:t.department,hideIfEmpty:!1}),c.jsx(WM,{label:"Employment Type",value:t.employment_type,icon:sf,hideIfEmpty:!1}),c.jsx(WM,{label:"Hire Date",value:t.hire_date,icon:Ip,render:e=>S(e),hideIfEmpty:!1}),c.jsx(WM,{label:"Birthday",value:t.birthday,icon:Lp,render:e=>S(e),hideIfEmpty:!1})]}),c.jsx(KM,{showBorder:!0,children:c.jsx(QM,{gridClassName:"!grid-cols-1",className:"mt-0 mb-0",children:c.jsx(WM,{label:"Tags"+(t.tags&&t.tags.length>0?` (${t.tags.length})`:""),value:t.tags&&t.tags.length>0?c.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((e,t)=>c.jsxs(mC,{variant:"secondary",className:"text-xs flex items-center gap-1.5 pr-2 py-1.5 px-2.5 bg-primary/10 text-primary border-primary/20",children:[c.jsx(zg,{className:"h-3 w-3"}),c.jsx("span",{children:e})]},`tag-${t}-${e}`))}):c.jsx("span",{className:"text-muted-foreground italic",children:"No tags"}),hideIfEmpty:!1})})}),c.jsx(KM,{showBorder:!0,children:c.jsxs(QM,{columns:2,icon:lf,title:"System Information",className:"mt-0 mb-0",children:[c.jsx(WM,{label:"Created",value:t.created_at,render:e=>S(e),hideIfEmpty:!1}),c.jsx(WM,{label:"Last Updated",value:t.updated_at,render:e=>S(e),hideIfEmpty:!1})]})})]}),"contact"===e&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs(QM,{icon:Uf,title:"Contact",columns:3,children:[c.jsx(WM,{label:"Work Phone",value:t.work_phone,linkType:"tel",icon:lg,hideIfEmpty:!1}),c.jsx(WM,{label:"Mobile Phone",value:t.mobile_phone,linkType:"tel",icon:Eg,hideIfEmpty:!1}),c.jsx(WM,{label:"Emergency Contact",value:t.emergency_contact_name?c.jsxs("span",{children:[t.emergency_contact_name,t.emergency_contact_phone&&c.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",t.emergency_contact_phone,")"]}),t.emergency_contact_relationship&&c.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:t.emergency_contact_relationship})]}):null,icon:Yp,hideIfEmpty:!1})]}),c.jsx(QM,{icon:Vf,title:"Address",columns:3,children:c.jsx(WM,{value:t.office_location?c.jsx("div",{className:"whitespace-pre-line",children:t.office_location}):null,hideIfEmpty:!1})})]}),"sales"===e&&c.jsx("div",{className:"space-y-8",children:c.jsxs(QM,{columns:3,children:[c.jsx(WM,{label:"Skills",value:t.skills&&t.skills.length>0?c.jsx("div",{className:"flex flex-wrap gap-1",children:t.skills.map((e,t)=>c.jsx("span",{className:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary",children:e},t))}):null,icon:_p,hideIfEmpty:!1}),c.jsx(WM,{label:"Territories",value:t.assigned_territories&&t.assigned_territories.length>0?c.jsx("div",{className:"flex flex-wrap gap-1",children:t.assigned_territories.map((e,t)=>c.jsx("span",{className:"inline-flex items-center rounded-md bg-secondary/10 px-2 py-1 text-xs font-medium text-secondary-foreground",children:e},t))}):null,icon:qf,hideIfEmpty:!1}),c.jsx(WM,{label:"Commission Tier",value:t.commission_tier,icon:Kg,hideIfEmpty:!1})]})}),"documents"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(qD,{documents:g,isLoading:v,onManageAttachments:r&&d?()=>d(t):void 0})}),"metadata"===e&&c.jsx("div",{className:"space-y-6",children:c.jsx(bl,{children:c.jsx("div",{className:"p-4",children:c.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(t,null,2)})})})})]})})]})})}const Iq=AM({name:PM().min(1,"Name is required"),work_email:PM().email("Invalid email format").optional().or(TM("")),job_title:PM().optional(),department:PM().optional(),employment_type:PM().optional(),hire_date:PM().optional(),work_phone:PM().optional(),mobile_phone:PM().optional(),street_address:PM().optional(),city:PM().optional(),state_province:PM().optional(),postal_code:PM().optional(),country:PM().optional(),office_location:PM().optional(),timezone:PM().optional(),skills:PM().optional(),assigned_territories:PM().optional(),commission_tier:PM().optional(),birthday:PM().optional(),emergency_contact_name:PM().optional(),emergency_contact_phone:PM().optional(),emergency_contact_relationship:PM().optional()}).transform(e=>e);function Oq(e){return null==e?"":Array.isArray(e)?e.map(e=>String(e??"")).join(", "):String(e)}const zq=p.forwardRef(function({defaultValues:e,onSubmit:t,isLoading:n=!1},s){const{handleSubmit:a,control:r,reset:i,watch:o,setValue:l,formState:{errors:d,isSubmitted:u}}=uA({resolver:QA(Iq),defaultValues:(()=>{const t={name:"",work_email:"",job_title:"",department:"",employment_type:"",street_address:"",city:"",state_province:"",postal_code:"",country:"",office_location:"",timezone:"UTC",hire_date:"",work_phone:"",mobile_phone:"",skills:"",assigned_territories:"",commission_tier:"",birthday:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:""};return e?{...t,...e,skills:Oq(e.skills),assigned_territories:Oq(e.assigned_territories)}:t})()}),h=p.useRef(null);p.useEffect(()=>{e&&i(t=>({...t,...e,skills:Oq(e.skills??t.skills),assigned_territories:Oq(e.assigned_territories??t.assigned_territories)}))},[e,i]),p.useEffect(()=>{if(u&&Object.keys(d).length>0){const e=Object.keys(d)[0],t=document.querySelector(`[name="${e}"], #${e}`);t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus?.()):h.current&&h.current.scrollIntoView({behavior:"smooth",block:"center"})}},[d,u]);const m=o(),f={name:Oq(m.name),work_email:Oq(m.work_email),job_title:Oq(m.job_title),department:Oq(m.department),employment_type:Oq(m.employment_type),hire_date:Oq(m.hire_date),work_phone:Oq(m.work_phone),mobile_phone:Oq(m.mobile_phone),street_address:Oq(m.street_address),city:Oq(m.city),state_province:Oq(m.state_province),postal_code:Oq(m.postal_code),country:Oq(m.country),office_location:Oq(m.office_location),timezone:Oq(m.timezone),skills:Oq(m.skills),assigned_territories:Oq(m.assigned_territories),commission_tier:Oq(m.commission_tier),birthday:Oq(m.birthday),emergency_contact_name:Oq(m.emergency_contact_name),emergency_contact_phone:Oq(m.emergency_contact_phone),emergency_contact_relationship:Oq(m.emergency_contact_relationship)};return c.jsxs("form",{ref:s,id:"employee-form",onSubmit:a(async e=>{await t(e)}),className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx(wA,{formType:"employee",currentValues:f,onSuggest:e=>{Object.entries(e).forEach(([e,t])=>{null!=t&&l(e,t)})},disabled:n})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),c.jsxs("div",{className:al("grid grid-cols-1 md:grid-cols-2 gap-4"),ref:h,children:[c.jsx(hA,{control:r,name:"name",label:"Name",placeholder:"Enter full name",required:!0,disabled:n}),c.jsx(hA,{control:r,name:"work_email",label:"Work Email",type:"email",placeholder:"employee@company.com",disabled:n})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsx(pA,{control:r,name:"birthday",label:"Birthday (for celebrations)",disabled:n})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Contact & Location"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(hA,{control:r,name:"work_phone",label:"Work Phone",type:"tel",placeholder:"+1 (555) 123-4567",disabled:n}),c.jsx(hA,{control:r,name:"mobile_phone",label:"Mobile Phone",type:"tel",placeholder:"+1 (555) 987-6543",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(hA,{control:r,name:"street_address",label:"Street Address",placeholder:"123 Main Street",disabled:n})}),c.jsx(hA,{control:r,name:"city",label:"City",placeholder:"New York",disabled:n}),c.jsx(hA,{control:r,name:"state_province",label:"State/Province",placeholder:"NY",disabled:n}),c.jsx(hA,{control:r,name:"postal_code",label:"Postal Code",placeholder:"10001",disabled:n}),c.jsx(hA,{control:r,name:"country",label:"Country",placeholder:"United States",disabled:n})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsx(hA,{control:r,name:"timezone",label:"Timezone",placeholder:"UTC",disabled:n})}),c.jsx("div",{className:"hidden",children:c.jsx(hA,{control:r,name:"office_location",label:"Office Location",placeholder:"e.g., New York HQ",disabled:n})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Organization"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(hA,{control:r,name:"job_title",label:"Job Title",placeholder:"e.g., Sales Manager",disabled:n}),c.jsx(hA,{control:r,name:"department",label:"Department",placeholder:"e.g., Sales",disabled:n}),c.jsx(gA,{control:r,name:"employment_type",label:"Employment Type",placeholder:"Select type",options:[{value:"Full-time",label:"Full-time"},{value:"Part-time",label:"Part-time"},{value:"Contractor",label:"Contractor"},{value:"Intern",label:"Intern"}],disabled:n}),c.jsx(pA,{control:r,name:"hire_date",label:"Hire Date",disabled:n})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Sales & Operations"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(hA,{control:r,name:"skills",label:"Skills",placeholder:"Comma-separated (e.g., Sales, Spanish)",helperText:"Separate skills with commas",disabled:n}),c.jsx(hA,{control:r,name:"assigned_territories",label:"Assigned Territories",placeholder:"Comma-separated (e.g., EMEA, APAC)",helperText:"Separate territories with commas",disabled:n}),c.jsx(hA,{control:r,name:"commission_tier",label:"Commission Tier",placeholder:"e.g., Tier 1",disabled:n})]})]}),c.jsxs("details",{className:"space-y-4",children:[c.jsx("summary",{className:"text-lg font-semibold cursor-pointer",children:"Emergency Contact"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[c.jsx(hA,{control:r,name:"emergency_contact_name",label:"Contact Name",placeholder:"Full name",disabled:n}),c.jsx(hA,{control:r,name:"emergency_contact_phone",label:"Contact Phone",type:"tel",placeholder:"+1 (555) 000-0000",disabled:n}),c.jsx(hA,{control:r,name:"emergency_contact_relationship",label:"Relationship",placeholder:"e.g., Spouse, Parent",disabled:n})]})]})]})});function Bq({open:e,onOpenChange:t,onSubmit:n,title:s="Create Employee",maxWidth:a="720px"}){const r=Ua(),i=p.useRef(null),[o,l]=p.useState(0),[d,u]=p.useState(!1),[h,m]=p.useState(!1),[f,g]=p.useState(null);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()})},[e,o]);const x=e=>{if(0===[e.street_address?.trim(),e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim(),e.country?.trim()].filter(Boolean).length)return e.office_location?.trim()||void 0;const t=e.street_address?.trim(),n=[e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim()].filter(Boolean).join(", "),s=e.country?.trim(),a=[];return t&&a.push(t),n&&a.push(n),s&&a.push(s),a.join("\n")},v=p.useMemo(()=>e=>({name:e.name,work_email:e.work_email||void 0,job_title:e.job_title||void 0,department:e.department||void 0,employment_type:e.employment_type||void 0,hire_date:e.hire_date?.trim()||void 0,work_phone:e.work_phone||void 0,mobile_phone:e.mobile_phone||void 0,office_location:x(e)||void 0,timezone:e.timezone||void 0,skills:e.skills?e.skills.split(",").map(e=>e.trim()).filter(Boolean):void 0,assigned_territories:e.assigned_territories?e.assigned_territories.split(",").map(e=>e.trim()).filter(Boolean):void 0,commission_tier:e.commission_tier||void 0,birthday:e.birthday?.trim()||void 0,emergency_contact_name:e.emergency_contact_name||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,emergency_contact_relationship:e.emergency_contact_relationship||void 0}),[]),y=()=>{m(!1),g(null),t(!1)},b={label:d?"Creating...":"Confirm & Create",onClick:async()=>{if(f){u(!0);try{const e=v(f);await n(e),g(null),m(!1)}catch(e){m(!1)}finally{u(!1)}}},loading:d,disabled:d,variant:"default"},w={label:"Cancel",variant:"outline",disabled:d};return c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:y,title:s,maxWidth:a,loading:d,formSelector:i,onClear:()=>{g(null),l(e=>e+1)},onCancel:y,showSubmitButton:!0,onSubmit:()=>{i.current?.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",r.paddingForm),children:c.jsx(zq,{ref:i,onSubmit:async e=>{g(e),m(!0)},isLoading:d,mode:"create"},o)})}),c.jsx(jE,{open:h,onOpenChange:e=>{m(e),e||(g(null),setTimeout(()=>{const e=i.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Employee Creation",description:f?c.jsx("p",{className:al("mb-3",r.textSizeSmall),children:"Are you sure you want to create this employee?"}):void 0,confirmAction:b,cancelAction:w})]})}function $q({open:e,onOpenChange:t,onSubmit:n,employee:s,title:a="Edit Employee",maxWidth:r="720px"}){const i=Ua(),o=p.useRef(null),[l,d]=p.useState(0),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[g,x]=p.useState(null),v=e=>{if(0===[e.street_address?.trim(),e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim(),e.country?.trim()].filter(Boolean).length)return e.office_location?.trim()||void 0;const t=e.street_address?.trim(),n=[e.city?.trim(),e.state_province?.trim(),e.postal_code?.trim()].filter(Boolean).join(", "),s=e.country?.trim(),a=[];return t&&a.push(t),n&&a.push(n),s&&a.push(s),a.join("\n")},y=p.useMemo(()=>{if(!s)return;const e=(e=>{if(!e)return{street_address:"",city:"",state_province:"",postal_code:"",country:""};const t=e.split("\n").map(e=>e.trim()).filter(Boolean),n={street_address:t[0]||"",city:"",state_province:"",postal_code:"",country:t[t.length-1]||""};if(t[1]){const e=t[1].split(",").map(e=>e.trim());if(n.city=e[0]||"",e[1]){const t=e[1].split(" ");n.state_province=t[0]||"",n.postal_code=t.slice(1).join(" ")||""}}return n})(s.office_location);return{name:s.name??"",work_email:s.work_email??"",job_title:s.job_title??"",department:s.department??"",employment_type:s.employment_type??"",hire_date:s.hire_date??"",work_phone:s.work_phone??"",mobile_phone:s.mobile_phone??"",street_address:e.street_address,city:e.city,state_province:e.state_province,postal_code:e.postal_code,country:e.country,office_location:s.office_location??"",timezone:s.timezone??"UTC",skills:s.skills?.join(", ")??"",assigned_territories:s.assigned_territories?.join(", ")??"",commission_tier:s.commission_tier??"",birthday:s.birthday??"",emergency_contact_name:s.emergency_contact_name??"",emergency_contact_phone:s.emergency_contact_phone??"",emergency_contact_relationship:s.emergency_contact_relationship??""}},[s]);p.useEffect(()=>{e&&requestAnimationFrame(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()})},[e,l]);const b=p.useMemo(()=>e=>({name:e.name,work_email:e.work_email||void 0,job_title:e.job_title||void 0,department:e.department||void 0,employment_type:e.employment_type||void 0,hire_date:e.hire_date?.trim()||void 0,work_phone:e.work_phone||void 0,mobile_phone:e.mobile_phone||void 0,office_location:v(e)||void 0,timezone:e.timezone||void 0,skills:e.skills?e.skills.split(",").map(e=>e.trim()).filter(Boolean):void 0,assigned_territories:e.assigned_territories?e.assigned_territories.split(",").map(e=>e.trim()).filter(Boolean):void 0,commission_tier:e.commission_tier||void 0,birthday:e.birthday?.trim()||void 0,emergency_contact_name:e.emergency_contact_name||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,emergency_contact_relationship:e.emergency_contact_relationship||void 0}),[]),w=()=>{f(!1),x(null),t(!1)},S={label:u?"Updating...":"Confirm & Update",onClick:async()=>{if(g&&s){h(!0);try{const e=b(g);await n(s.id,e),f(!1),x(null)}catch(e){Ek({title:"Error",description:e instanceof Error?e.message:"Failed to update employee",variant:"destructive"}),f(!1)}finally{h(!1)}}},loading:u,disabled:u,variant:"default"},j={label:"Cancel",variant:"outline",disabled:u};return s?c.jsxs(c.Fragment,{children:[c.jsx(SE,{open:e,onClose:w,title:a,maxWidth:r,loading:u,formSelector:o,autoSubmitShortcut:!0,showClearButton:!0,onClear:()=>{d(e=>e+1)},showCancelButton:!0,onCancel:w,showSubmitButton:!0,onSubmit:()=>{o.current&&o.current.requestSubmit()},children:c.jsx("div",{className:al("bg-background border border-border rounded-lg shadow-sm mt-12",i.paddingForm),children:c.jsx(zq,{ref:o,defaultValues:y,onSubmit:async e=>{x(e),f(!0)},isLoading:u,mode:"edit"},`${s.id}-${l}`)})}),c.jsx(jE,{open:m,onOpenChange:e=>{f(e),e||(x(null),setTimeout(()=>{const e=o.current?.querySelector("input, textarea, select");e?.focus()},0))},title:"Confirm Employee Update",description:g?c.jsx("p",{className:al("mb-3",i.textSizeSmall),children:"Are you sure you want to update this employee?"}):void 0,confirmAction:S,cancelAction:j})]}):null}function Uq({open:e,onOpenChange:t,employee:n,tagService:s,onSave:a,loading:r=!1}){return c.jsx(UD,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"employee",initialTags:n.tags,tagService:s,onSave:a,loading:r})}function Vq({open:e,onOpenChange:t,employee:n,attachmentService:s,onSave:a,loading:r=!1}){return c.jsx(VD,{open:e,onOpenChange:t,entityId:n.id,entityName:n.name||n.code||"",entityType:"employee",attachmentService:s,onSave:a,loading:r})}function qq({employee:e,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a=!1,size:r="md"}){return c.jsx(YD,{entityId:e.id,entityType:"employee",defaultImageUrl:null,altText:e.name,FallbackIcon:Jg,attachmentService:t,currentPhoto:n,onPhotoChange:s,disabled:a,size:r})}const Hq=p.createContext(null);function Gq({children:e,config:t}){const n=p.useMemo(()=>new lq(t),[t.apiClient,t.endpoints?.employees]),s=p.useMemo(()=>({service:n}),[n]);return c.jsx(Hq.Provider,{value:s,children:e})}function Kq(){const e=p.useContext(Hq);if(!e)throw new Error("useEmployeeService must be used within EmployeeProvider");return e.service}function Wq({onNavigateToEmployee:e,onNavigateToCreate:t,autoOpenCreate:n,onCreateDialogClose:s}){const a=Kq(),[r,i]=p.useState({}),[o,l]=p.useState({page:1,pageSize:50}),[d,u]=p.useState(!1),h=f.useRef(!1);f.useEffect(()=>{const e=h.current;n&&!e&&u(!0),h.current=!!n},[n]);const{data:m,isLoading:g,error:x}=cq(a,{filter:r,pagination:o}),v=function(e){const t=Vs();return Xs({mutationFn:t=>e.createEmployee(t),onSuccess:()=>{t.invalidateQueries({queryKey:["employees"]})}})}(a),y=m?.data??[],b=m?.pagination,w=p.useCallback(()=>{t&&t(),u(!0)},[t]),S=p.useCallback(e=>{i(t=>({...t,search:e||void 0})),l(e=>({...e,page:1}))},[]),j=p.useCallback(e=>{l(t=>({...t,page:e}))},[]),C=p.useCallback(e=>{l({page:1,pageSize:e})},[]),k=p.useCallback(async e=>{try{await v.mutateAsync(e),Ek({title:"Success",description:"Employee created successfully"}),u(!1),s?.()}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to create employee",variant:"destructive"}),wW}},[v,s]),N=p.useCallback(t=>{e?.(t.id)},[e]),_=p.useMemo(()=>{if(b)return{page:o.page,pageSize:o.pageSize,total:b.total,totalPages:b.totalPages}},[o,b]);return c.jsxs(c.Fragment,{children:[c.jsx(Lq,{employees:y,loading:g,error:x,onEmployeeClick:N,onCreate:w,onSearch:S,pagination:_,onPageChange:j,onPageSizeChange:C}),c.jsx(Bq,{open:d,onOpenChange:e=>{u(e),e||s?.()},onSubmit:k})]})}function Qq({children:e}){const t={apiClient:Fa,endpoints:{customers:"/api/v1/sales/customers"}};return c.jsx(CF,{config:t,children:e})}function Yq({children:e}){return c.jsx(iF,{children:c.jsx(Qq,{children:c.jsx(Gq,{config:{apiClient:Fa,endpoints:{employees:"/api/v1/sales/employees"}},children:c.jsx(vq,{config:{apiClient:Fa,endpoints:{bookings:"/api/v1/sales/bookings"}},children:c.jsx(wI,{config:{apiClient:Fa,endpoints:{venues:"/api/v1/ticketing/venues"}},children:c.jsx(BI,{config:{apiClient:Fa,endpoints:{shows:"/api/v1/ticketing/shows"}},children:c.jsx(WI,{config:{apiClient:Fa,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:e})})})})})})})}const Xq=function(){return null},Zq=function(e){return new hn(e)}({component:()=>c.jsxs(c.Fragment,{children:[c.jsx(_n,{}),c.jsx(Ak,{}),c.jsx(Xq,{})]})}),Jq=()=>{const e=p.useContext(Wa);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},eH=[{code:"en",name:"English"},{code:"fr",name:"Franais"},{code:"es",name:"Espaol"}];function tH(){const{i18n:e,t:t}=fr();return c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent/50 transition-all duration-200","aria-label":t("language.select"),children:c.jsx(Af,{className:"h-4 w-4"})})}),c.jsx(JS,{align:"end",children:eH.map(t=>c.jsx(ej,{onClick:()=>{return n=t.code,e.changeLanguage(n),void Ga.set(va,n);var n},className:e.language===t.code?"bg-accent":"",children:t.name},t.code))})]})}const nH=["Pinned","General","Sales & Bookings","Ticketing","Users","Settings","Other"],sH={tabs:[{path:"/",title:"Home",iconName:"Home",pageType:"list",module:"General",group:"primary",sequence:1,priority:1},{path:"/users",title:"Users",iconName:"Users",pageType:"list",module:"Users",group:"users",sequence:1,priority:1},{path:"/users/$id",title:"User",iconName:"User",pageType:"detail",module:"users",group:"primary",sequence:2,priority:2},{path:"/profile",title:"Profile",iconName:"User",pageType:"detail",module:"profile",group:"secondary",sequence:1,priority:3},{path:"/settings/profile",title:"Profile Settings",iconName:"User",pageType:"detail",module:"Settings",group:"profile",sequence:2,priority:1},{path:"/sales/customers",title:"Customers",iconName:"Users",pageType:"list",module:"Sales & Bookings",group:"customers",sequence:1,priority:1},{path:"/sales/customers/$id",title:"Customer",iconName:"User",pageType:"detail",module:"Sales & Bookings",group:"customers",sequence:2,priority:2},{path:"/sales/bookings",title:"Bookings",iconName:"Calendar",pageType:"list",module:"Sales & Bookings",group:"bookings",sequence:1,priority:3},{path:"/sales/bookings/$id",title:"Booking",iconName:"Calendar",pageType:"detail",module:"Sales & Bookings",group:"bookings",sequence:2,priority:4},{path:"/bookings",title:"Bookings",iconName:"Calendar",pageType:"list",module:"Sales & Bookings",group:"bookings",sequence:5,priority:11},{path:"/sales/employees",title:"Employees",iconName:"Users",pageType:"list",module:"Sales & Bookings",group:"employees",sequence:1,priority:5},{path:"/sales/employees/$id",title:"Employee",iconName:"User",pageType:"detail",module:"Sales & Bookings",group:"employees",sequence:2,priority:6},{path:"/sales/payments",title:"Payments",iconName:"CreditCard",pageType:"list",module:"Sales & Bookings",group:"payments",sequence:1,priority:7},{path:"/sales/payments/$id",title:"Payment",iconName:"CreditCard",pageType:"detail",module:"Sales & Bookings",group:"payments",sequence:2,priority:8},{path:"/sales/explore",title:"Explore",iconName:"Search",pageType:"list",module:"Sales & Bookings",group:"explore",sequence:1,priority:9},{path:"/explore",title:"Explore",iconName:"Search",pageType:"list",module:"Sales & Bookings",group:"explore",sequence:2,priority:10},{path:"/ticketing/venues",title:"Venues",iconName:"MapPin",pageType:"list",module:"Ticketing",group:"venues",sequence:1,priority:1},{path:"/ticketing/venues/$id",title:"Venue",iconName:"MapPin",pageType:"detail",module:"Ticketing",group:"venues",sequence:2,priority:2},{path:"/ticketing/venues/$id/seats/designer",title:"Seat Designer",iconName:"LayoutGrid",pageType:"sub-detail",module:"Ticketing",group:"venues",sequence:3,priority:3},{path:"/ticketing/events",title:"Events",iconName:"Calendar",pageType:"list",module:"Ticketing",group:"events",sequence:4,priority:4},{path:"/ticketing/events/$id",title:"Event",iconName:"Calendar",pageType:"detail",module:"Ticketing",group:"events",sequence:5,priority:5},{path:"/ticketing/events/$eventId/inventory",title:"Event Inventory",iconName:"Package",pageType:"sub-detail",module:"Ticketing",group:"events",sequence:6,priority:6,loadingOnAdded:!0},{path:"/ticketing/shows",title:"Shows",iconName:"Play",pageType:"list",module:"Ticketing",group:"shows",sequence:1,priority:8},{path:"/ticketing/shows/$id",title:"Show",iconName:"Play",pageType:"detail",module:"Ticketing",group:"shows",sequence:2,priority:9},{path:"/ticketing/organizers",title:"Organizers",iconName:"Users",pageType:"list",module:"Ticketing",group:"organizers",sequence:1,priority:6},{path:"/ticketing/organizers/$id",title:"Organizer",iconName:"User",pageType:"detail",module:"Ticketing",group:"organizers",sequence:2,priority:7},{path:"/settings",title:"Settings",iconName:"Settings",pageType:"list",module:"Settings",group:"settings",sequence:1,priority:1},{path:"/settings/account",title:"Account Settings",iconName:"User",pageType:"detail",module:"Settings",group:"settings",sequence:2,priority:2},{path:"/settings/appearance",title:"Appearance",iconName:"Palette",pageType:"detail",module:"Settings",group:"settings",sequence:3,priority:4},{path:"/settings/notifications",title:"Notifications",iconName:"Bell",pageType:"detail",module:"Settings",group:"settings",sequence:1,priority:3},{path:"/settings/language",title:"Language",iconName:"Globe",pageType:"detail",module:"Settings",group:"settings",sequence:2,priority:5},{path:"/settings/security",title:"Security",iconName:"Shield",pageType:"detail",module:"Settings",group:"settings",sequence:3,priority:6}]},aH="app_tabs";function rH({onTabChange:e,inline:t=!1}){const n=Yt(),s=Mn(),a=p.useRef(null),r=p.useRef(null),[i,o]=p.useState(()=>Ga.get(aH)||[]),[l,d]=p.useState(null),[u,h]=p.useState(null),[m,f]=p.useState(null),[g,x]=p.useState(null),[v,y]=p.useState(!1),[b,w]=p.useState(()=>Ga.get("tab_position")??"separate"),S=p.useCallback(e=>GM(sH,e),[]);p.useEffect(()=>{o(e=>{const t=e.filter(e=>null!=e&&!!e.id&&!!e.path);return t.length!==e.length?t:e})},[]),p.useEffect(()=>{const e=i.filter(e=>null!=e&&!!e.id&&!!e.path);Ga.set(aH,e)},[i]);const j=p.useCallback(e=>function(e,t){const n=GM(e,t);if(n)return{title:n.title,iconName:n.iconName};const s=t.split("/").pop()||"Page";return{title:s.match(/^[a-zA-Z][a-zA-Z0-9_-]*$/)?s.charAt(0).toUpperCase()+s.slice(1):"Page",iconName:"FileText"}}(sH,e),[]);p.useEffect(()=>{const t=s.pathname.includes("/seats/designer"),n=new URLSearchParams(s.search).get("layoutId"),a=t&&n?`${s.pathname}?layoutId=${n}`:s.pathname;o(t=>{const n=t.find(e=>e.path===a);if(n)return d(n.id),e&&e(n),t;{const{title:n,iconName:r}=j(s.pathname),i=S(a),o=i?.loadingOnAdded?"Loading...":n,l={id:C(),path:a,title:o,iconName:r};if(i?.group){t.some(e=>{if(e.grouped){const t=S(e.path);return t?.group===i.group}return!1})&&(l.grouped=!0)}d(l.id),e&&e(l);const c=[...t,l];return $(c)}})},[s.pathname,s.search,e,j,S]),p.useEffect(()=>{if(v)return;const e=setTimeout(()=>{r.current&&r.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},10);return()=>clearTimeout(e)},[l,i,v]),p.useEffect(()=>{const e=e=>{const{path:t,title:n,iconName:s}=e.detail||{};t&&n&&o(e=>e.map(e=>e.path===t?{...e,title:n,iconName:s??e.iconName}:e))};return window.addEventListener("update-tab-title",e),()=>{window.removeEventListener("update-tab-title",e)}},[]);const C=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,k=e=>e?{Home:kf,LayoutDashboard:Mf,Users:tx,User:Jg,Settings:jg,FileText:pf,Package:Jf}[e]:null,N=p.useCallback(e=>{const[t,s]=e.split("?"),a=s?new URLSearchParams(s):void 0;n({to:t,search:a?Object.fromEntries(a):void 0})},[n]),_=p.useCallback(t=>{y(!0),d(t.id),N(t.path),e&&e(t),setTimeout(()=>y(!1),100)},[N,e]),P=p.useCallback((e,t)=>{e.stopPropagation();const s=i.findIndex(e=>e.id===t),a=i.filter(e=>e.id!==t);if(o(a),l===t)if(a.length>0){const e=a[Math.min(s,a.length-1)];n({to:e.path})}else n({to:"/"})},[i,l,n]),E=p.useCallback(()=>{const e=i.find(e=>e.id===l);e&&o([e])},[i,l]),R=p.useCallback(()=>{o([]),n({to:"/"})},[n]),A=p.useCallback((e,t)=>{h(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",t)},[]),T=p.useCallback((e,t)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",f(t)},[]),M=p.useCallback(()=>{f(null)},[]),D=p.useCallback((e,t)=>{if(e.preventDefault(),!u||u===t)return h(null),void f(null);o(e=>{const n=e.findIndex(e=>e.id===u),s=e.findIndex(e=>e.id===t);if(-1===n||-1===s)return e;const a=[...e],[r]=a.splice(n,1);return a.splice(s,0,r),a}),h(null),f(null)},[u]),L=p.useCallback(()=>{h(null),f(null)},[]),F=p.useCallback(e=>{x(e)},[]),I=p.useCallback(()=>{x(null)},[]),[O,z]=p.useState(()=>!1!==Ga.get("enable_tabs"));p.useEffect(()=>{const e=e=>{z(e.detail.enabled)};return window.addEventListener("tabs-preference-changed",e),()=>{window.removeEventListener("tabs-preference-changed",e)}},[]),p.useEffect(()=>{const e=e=>{w(e.detail.position)};return window.addEventListener("tab-position-changed",e),()=>{window.removeEventListener("tab-position-changed",e)}},[]);const B=p.useCallback(e=>function(e,t){const n=GM(e,t);return n?.module||"Other"}(sH,e),[]),$=e=>{const t=["/"];return[...e].sort((e,n)=>{const s=t.includes(e.path),a=t.includes(n.path);return s&&!a?-1:!s&&a?1:s&&a?0:e.pinned&&!n.pinned?-1:!e.pinned&&n.pinned?1:e.grouped&&!n.grouped?-1:!e.grouped&&n.grouped?1:0})},U=p.useCallback(e=>{o(t=>{const n=t.map(t=>t.id===e.id?{...t,pinned:!t.pinned}:t);return $(n)})},[]),V=p.useCallback(e=>{o(t=>{if(e.grouped){const n=S(e.path);if(n?.group){const e=t.map(e=>{const t=S(e.path);return t?.group===n.group?{...e,grouped:!1}:e});return $(e)}}else{const n=S(e.path);if(n?.group){const e=t.map(e=>{const t=S(e.path);return t?.group===n.group?{...e,grouped:!0}:e});return $(e)}}return t})},[S]),q=p.useCallback(()=>{o(e=>[...e].sort((e,t)=>{if(e.pinned&&!t.pinned)return-1;if(!e.pinned&&t.pinned)return 1;if(e.pinned&&t.pinned)return 0;const n=B(e.path),s=B(t.path);if(n===s){const n=S(e.path),s=S(t.path);if(n&&s){const e=n.group,t=s.group;if(e&&!t)return-1;if(!e&&t)return 1;if(e&&t&&e!==t)return e.localeCompare(t);const a=n.sequence-s.sequence;if(0!==a)return a}return"/"===e.path?-1:"/"===t.path?1:e.title.localeCompare(t.title)}return nH.indexOf(n)-nH.indexOf(s)}))},[B,S]),H=i.reduce((e,t)=>{const n=t.pinned?"Pinned":B(t.path);return e[n]||(e[n]=[]),e[n].push(t),e},{});if(!O||t&&"inline"!==b)return null;const G=i.filter(e=>null!=e);return c.jsx("div",{className:t?"":"sticky-tabs border-b border-border bg-background/95 backdrop-blur-sm supports-[backdrop-filter]:bg-background/80",children:c.jsxs("div",{className:al("flex items-center",t?"gap-1.5":"container gap-0.5 h-8 px-4 sm:px-6"),children:[c.jsx("div",{className:"flex-1 min-w-0 overflow-hidden relative group/tabs-container",children:c.jsx("div",{className:al("flex items-center scroll-smooth tab-container",t?"gap-1.5":"gap-0.5"),ref:a,children:G.map(e=>{const n=G.find(e=>e.id===l),s=n?S(n.path):null,a=S(e.path),o=s?.group&&a?.group&&s.group===a.group&&e.id!==l;return c.jsxs(Lj,{children:[c.jsx(Fj,{asChild:!0,children:c.jsxs("div",{ref:l===e.id?r:null,draggable:g===e.id,onDragStart:t=>A(t,e.id),onDragOver:t=>T(t,e.id),onDragLeave:M,onDrop:t=>D(t,e.id),onDragEnd:L,onClick:()=>_(e),className:al("group relative flex items-center justify-between gap-1.5 px-2 py-1 rounded-md","transition-all duration-200 whitespace-nowrap text-xs border","flex-shrink-0 select-none",e.pinned?"w-8 px-0 justify-center min-w-[32px]":al("min-w-0",t?"max-w-[140px] text-[11px]":"max-w-[200px]"),g===e.id?"cursor-grab":"cursor-pointer",l===e.id?"bg-primary/10 dark:bg-primary/20 text-primary dark:text-primary border-primary/30 dark:border-primary/50 shadow-sm ring-1 ring-primary/20 dark:ring-primary/30":"bg-transparent hover:bg-accent/50 border-transparent hover:border-border/50 text-muted-foreground hover:text-foreground",u===e.id?"opacity-50 scale-95":"",m===e.id&&u!==e.id?"ring-2 ring-primary/50 bg-primary/10":"",o?"bg-accent/90 text-accent-foreground border-border shadow-sm":""),title:e.title,children:[e.pinned?(()=>{const t=k(e.iconName);return t?c.jsx(t,{className:"h-3.5 w-3.5 flex-shrink-0 mx-auto"}):null})():c.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1",children:[c.jsx(Sf,{className:"h-2.5 w-2.5 flex-shrink-0 opacity-0 group-hover:opacity-40 transition-opacity duration-200",onMouseEnter:()=>F(e.id),onMouseLeave:I}),(()=>{const t=k(e.iconName);return t?c.jsx(t,{className:"h-3.5 w-3.5 flex-shrink-0"}):null})(),c.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[c.jsx("span",{className:"font-medium truncate",children:e.title}),e.grouped&&c.jsx(Tf,{className:"h-2.5 w-2.5 flex-shrink-0 text-muted-foreground opacity-60"})]})]}),!e.pinned&&i.length>1&&c.jsx("button",{onClick:t=>P(t,e.id),className:al("opacity-0 group-hover:opacity-100 transition-all duration-150","hover:bg-red-500/10 dark:hover:bg-red-500/20 rounded p-0.5 -mr-0.5","shrink-0 ml-1",l===e.id?"opacity-100":""),"aria-label":`Close ${e.title}`,title:`Close ${e.title}`,children:c.jsx(ax,{className:"h-3 w-3 transition-all duration-150 hover:text-red-500 hover:scale-110 active:scale-95"})})]})}),c.jsx(Ij,{className:"min-w-[120px]",children:i.length>1&&c.jsxs(c.Fragment,{children:[c.jsxs(Oj,{onClick:()=>U(e),className:"text-xs",children:[e.pinned?c.jsx(cg,{className:"mr-2 h-3.5 w-3.5"}):c.jsx(dg,{className:"mr-2 h-3.5 w-3.5"}),e.pinned?"Unpin Tab":"Pin Tab"]}),c.jsxs(Oj,{onClick:()=>V(e),className:"text-xs",children:[c.jsx(Tf,{className:"mr-2 h-3.5 w-3.5"}),e.grouped?"Ungroup Tab":"Group Related Tabs"]}),c.jsxs(Oj,{onClick:q,className:"text-xs",children:[c.jsx(Tf,{className:"mr-2 h-3.5 w-3.5"}),"Sort by Groups"]}),c.jsx(zj,{}),c.jsx(Oj,{onClick:E,className:"text-xs",children:"Close Others"}),c.jsx(Oj,{onClick:R,className:"text-xs",children:"Close All"})]})})]},e.id)})})}),c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",size:"sm",className:al("h-[26px] w-[26px] p-0 border border-transparent rounded-md hover:bg-accent/50 shrink-0 ml-1","text-muted-foreground hover:text-foreground"),"aria-label":"List all tabs",title:"List all tabs",children:c.jsx(Vp,{className:"h-4 w-4"})})}),c.jsxs(JS,{align:"end",className:"max-h-[400px] overflow-y-auto min-w-[200px]",children:[nH.map(e=>{const t=H[e];return t&&0!==t.length?c.jsxs("div",{children:[c.jsx(sj,{className:"text-[10px] uppercase text-muted-foreground px-2 py-1.5 font-bold tracking-wider opacity-70",children:e}),t.map(e=>{const t=k(e.iconName);return c.jsxs(ej,{onClick:()=>_(e),className:al("text-xs flex items-center justify-between gap-2 pl-4",l===e.id&&"bg-accent text-accent-foreground font-medium"),children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.pinned&&c.jsx(dg,{className:"h-3 w-3 text-muted-foreground shrink-0 rotate-45"}),e.grouped&&c.jsx(Tf,{className:"h-3 w-3 text-muted-foreground shrink-0"}),t&&c.jsx(t,{className:"mr-2 h-3.5 w-3.5 shrink-0"}),c.jsx("span",{className:"truncate",title:e.title,children:e.title})]}),!e.pinned&&i.length>1&&c.jsx("div",{role:"button",onClick:t=>P(t,e.id),className:"opacity-50 hover:opacity-100 p-1 hover:bg-background/80 rounded","aria-label":`Close ${e.title}`,title:`Close ${e.title}`,children:c.jsx(ax,{className:"h-3 w-3"})})]},e.id)}),c.jsx(aj,{className:"my-1"})]},e):null}),i.length>1&&c.jsxs(c.Fragment,{children:[c.jsxs(ej,{onClick:()=>{const e=i.find(e=>e.id===l);e&&V(e)},className:"text-xs",children:[c.jsx(Tf,{className:"mr-2 h-3.5 w-3.5"}),i.find(e=>e.id===l)?.grouped?"Ungroup Tabs":"Group Related Tabs"]}),c.jsxs(ej,{onClick:q,className:"text-xs",children:[c.jsx(Tf,{className:"mr-2 h-3.5 w-3.5"}),"Sort by Groups"]}),c.jsx(aj,{className:"my-1"}),c.jsx(ej,{onClick:R,className:"text-xs text-red-500 focus:text-red-600",children:"Close All Tabs"})]})]})]})]})})}function iH({className:e}){const{t:t}=fr(),n=Yt(),{toast:s}=Rk(),a=Vs(),{data:r,isLoading:i}=Ys({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser()}),o=()=>r?r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.name?r.name:r.username?r.username:"User":"User";return c.jsxs(KS,{children:[c.jsx(WS,{asChild:!0,children:c.jsx(vl,{variant:"ghost",className:`relative h-8 w-8 rounded-full p-0 hover:bg-accent/50 transition-all duration-200 ${e||""}`,children:c.jsxs(cC,{className:"h-8 w-8",children:[c.jsx(dC,{src:"",alt:o()}),c.jsx(uC,{className:"text-sm font-medium",children:i?"...":(()=>{if(!r)return"??";if(r.first_name&&r.last_name)return`${r.first_name[0]}${r.last_name[0]}`.toUpperCase();if(r.name){const e=r.name.trim().split(/\s+/);return e.length>=2?`${e[0][0]}${e[e.length-1][0]}`.toUpperCase():e[0].substring(0,2).toUpperCase()}return r.username?r.username.substring(0,2).toUpperCase():r.email?r.email.substring(0,2).toUpperCase():"??"})()})]})})}),c.jsxs(JS,{align:"end",className:"w-56",children:[c.jsx(sj,{children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:i?"Loading...":o()}),c.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r?.email||"user@example.com"})]})}),c.jsx(aj,{}),c.jsx(ej,{asChild:!0,children:c.jsxs(dn,{to:"/profile",className:"cursor-pointer",children:[c.jsx(Jg,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:t("common.profile")})]})}),c.jsx(ej,{asChild:!0,children:c.jsxs(dn,{to:"/settings/profile",className:"cursor-pointer",children:[c.jsx(jg,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:t("common.settings")})]})}),c.jsx(aj,{}),c.jsxs(ej,{onClick:async()=>{_a(!0);try{await di.logout(),a.clear(),Ga.removeMatching?Ga.removeMatching("^command-palette-recent"):Ga.remove("command-palette-recent"),s({title:t("common.success"),description:t("auth.logoutSuccess")})}catch(e){a.clear(),Ga.removeMatching?Ga.removeMatching("^command-palette-recent"):Ga.remove("command-palette-recent"),s({title:t("common.success"),description:"Logged out locally"})}n({to:"/login"})},children:[c.jsx($f,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:t("common.logout")})]})]})]})}class oH{async fetchNavigation(){return La("/api/v1/navigation",{method:"GET",requiresAuth:!0})}}const lH=["navigation","v2"];function cH(e,t){return Ys({queryKey:lH,queryFn:()=>e.fetchNavigation(),staleTime:9e5,enabled:void 0===t?.enabled||t.enabled})}const dH={Home:kf,LayoutDashboard:Mf,Users:tx,Settings:jg,Layout:sg,Boxes:Rp,User:Jg,Bell:Ep,Palette:eg,Languages:Af,Shield:Ng,Warehouse:nx,Sliders:Pg,ClipboardList:nf,TrendingUp:Kg,MapPin:Vf,Building2:Mp,ShoppingCart:_g,Ticket:qg,Search:Sg,Calendar:Ip,Building:Dp,DollarSign:cf};function uH(e){if(e)return dH[e]||void 0}function hH(e){return e?"/"===e?"/":e.endsWith("/")?e.slice(0,-1):e:""}function mH(e,t){if(!t)return!1;const n=hH(t),s=hH(e);return"/"===n?"/"===s:s===n||s.startsWith(`${n}/`)}function pH(e,t){const n=uH(e.icon)||Mf,s=Array.isArray(e.children)?e.children.filter(t=>{if(!t?.path)return!1;const n=hH(t.path)===hH(e.path),s=(t.label||"").trim()===(e.label||"").trim();return!(n||s&&n)}):[],a=s.map(s=>{const a=uH(s.icon)||n,r=mH(t,s.path),i=Array.isArray(s.children)&&s.children.length>0;return c.jsx("li",{children:c.jsxs(dn,{to:s.path,className:"group flex items-start gap-3 rounded-lg px-3 py-2 transition-colors duration-150 "+(r?"bg-primary/10 text-primary":"hover:bg-accent/40 hover:text-accent-foreground"),children:[c.jsx("span",{className:"mt-0.5 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-md border transition-colors duration-150 "+(r?"border-primary/40 bg-primary/10 text-primary":"border-border/60 bg-background text-muted-foreground group-hover:border-border group-hover:bg-accent group-hover:text-accent-foreground"),children:c.jsx(a,{className:"h-5 w-5"})}),c.jsxs("span",{className:"flex flex-1 flex-col gap-1",children:[c.jsx("span",{className:"text-sm font-medium",children:s.label}),s.description?c.jsx("span",{className:"text-xs leading-snug text-muted-foreground",children:s.description}):null]}),i&&c.jsx(Hp,{className:"h-3.5 w-3.5 text-muted-foreground/70"})]})},`${e.path}-${s.path}`)});return c.jsx("div",{className:"flex w-[420px] flex-col gap-3 p-4 sm:w-[460px]",children:s.length>0?c.jsx("ul",{className:"flex flex-col gap-1.5",children:a}):c.jsxs(dn,{to:e.path,className:"group flex items-center justify-between rounded-lg border border-border/70 px-3 py-2 text-sm font-medium transition-colors duration-150 hover:border-border hover:bg-accent/40 hover:text-accent-foreground",children:[c.jsxs("span",{children:["Open ",e.label]}),c.jsx(Hp,{className:"h-3.5 w-3.5 text-muted-foreground/70 group-hover:text-accent-foreground"})]})})}function fH(){const e=Mn(),t=p.useMemo(()=>new oH,[]),{data:n}=Ys({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser()}),{data:s}=cH(t,{enabled:!!n}),a=s??[];return a.length?c.jsxs(__,{children:[c.jsx(P_,{children:a.map(t=>{const n=uH(t.icon)||Mf,s=Array.isArray(t.children)&&t.children.length>0,a=mH(e.pathname,t.path);return s?c.jsxs(E_,{children:[c.jsxs(A_,{className:"group inline-flex items-center gap-1.5 rounded-md px-2.5 py-1 text-xs font-medium transition-colors duration-150 "+(a?"text-primary":"text-muted-foreground hover:text-foreground"),children:[c.jsx(n,{className:"h-3.5 w-3.5","aria-hidden":"true"}),c.jsx("span",{children:t.label})]}),c.jsx(T_,{className:"rounded-lg border border-border/60 bg-background/95 shadow-lg",children:pH(t,e.pathname)})]},t.path):c.jsx(E_,{children:c.jsx(M_,{asChild:!0,children:c.jsxs(dn,{to:t.path,className:"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1 text-xs font-medium transition-colors duration-150 "+(a?"text-primary":"text-muted-foreground hover:text-foreground"),children:[c.jsx(n,{className:"h-3.5 w-3.5","aria-hidden":"true"}),c.jsx("span",{children:t.label})]})})},t.path)})}),c.jsx(D_,{className:"rounded-lg border border-border/60 bg-background/95 shadow-lg"})]}):c.jsx(__,{children:c.jsx(P_,{children:c.jsx(E_,{children:c.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"Loading"})})})})}function gH({onCommandPaletteOpen:e}){const{t:t}=fr(),{theme:n,resolvedTheme:s,setTheme:a}=Jq(),[r,i]=p.useState(()=>Ga.get("tab_position")??"separate");p.useEffect(()=>{const e=e=>{i(e.detail.position)};return window.addEventListener("tab-position-changed",e),()=>{window.removeEventListener("tab-position-changed",e)}},[]);const o=()=>{a("system"===n?"dark"===s?"light":"dark":"dark"===n?"light":"dark")},l="undefined"!=typeof navigator&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"":"Ctrl";return c.jsx("header",{className:"sticky-header w-full border-b border-border/40 bg-background/95 backdrop-blur-xl supports-[backdrop-filter]:bg-background/80",children:"inline"===r?c.jsxs("div",{className:"container flex h-12 items-center justify-between px-4 sm:px-6",children:[c.jsxs("div",{className:"flex gap-3 items-center flex-1 min-w-0",children:[c.jsx(dn,{to:"/",className:"flex items-center group flex-shrink-0",children:c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"font-semibold text-lg tracking-tight text-foreground group-hover:text-primary transition-colors duration-200",children:"Hello Ticket"}),c.jsx("div",{className:"absolute -bottom-0.5 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"})]})}),c.jsx("div",{className:"hidden lg:flex flex-shrink-0",children:c.jsx(fH,{})}),c.jsx(vl,{variant:"ghost",size:"icon",className:"h-8 w-8 lg:hidden",onClick:()=>e?.(),"aria-label":"Open quick navigation",children:c.jsx(Kf,{className:"h-4 w-4"})}),c.jsx("div",{className:"flex items-center gap-1.5 max-w-[500px] min-w-0 flex-1",children:c.jsx(rH,{inline:!0})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[c.jsxs(vl,{variant:"outline",className:"relative h-8 w-full justify-start text-sm text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-all duration-200 sm:pr-8 md:w-32 lg:w-40 border-border/50 hover:border-border min-w-[80px]",onClick:e,children:[c.jsx(Sg,{className:"mr-2 h-4 w-4 flex-shrink-0"}),c.jsx("span",{className:"hidden sm:inline-flex truncate",children:"Search..."}),c.jsx("span",{className:"inline-flex sm:hidden",children:"Search"}),c.jsxs("kbd",{className:"pointer-events-none absolute right-1 top-1 hidden h-5 select-none items-center gap-0.5 rounded border bg-muted px-1 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[c.jsx("span",{className:"text-[9px]",children:l}),"K"]})]}),c.jsx(tH,{}),c.jsx(vl,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent/50 transition-all duration-200",onClick:o,"aria-label":t("theme.toggle"),children:"dark"===s?c.jsx(Og,{className:"h-4 w-4"}):c.jsx(Xf,{className:"h-4 w-4"})}),c.jsx(iH,{})]})]}):c.jsxs("div",{className:"container flex h-12 items-center justify-between px-4 sm:px-6",children:[c.jsxs("div",{className:"flex gap-3 items-center",children:[c.jsx(dn,{to:"/",className:"flex items-center group",children:c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"font-semibold text-lg tracking-tight text-foreground group-hover:text-primary transition-colors duration-200",children:"Hello Ticket"}),c.jsx("div",{className:"absolute -bottom-0.5 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"})]})}),c.jsx("div",{className:"hidden lg:flex",children:c.jsx(fH,{})}),c.jsx(vl,{variant:"ghost",size:"icon",className:"h-8 w-8 lg:hidden",onClick:()=>e?.(),"aria-label":"Open quick navigation",children:c.jsx(Kf,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsxs(vl,{variant:"outline",className:"relative h-8 w-full justify-start text-sm text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-all duration-200 sm:pr-8 md:w-32 lg:w-40 border-border/50 hover:border-border min-w-[80px]",onClick:e,children:[c.jsx(Sg,{className:"mr-2 h-4 w-4 flex-shrink-0"}),c.jsx("span",{className:"hidden sm:inline-flex truncate",children:"Search..."}),c.jsx("span",{className:"inline-flex sm:hidden",children:"Search"}),c.jsxs("kbd",{className:"pointer-events-none absolute right-1 top-1 hidden h-5 select-none items-center gap-0.5 rounded border bg-muted px-1 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[c.jsx("span",{className:"text-[9px]",children:l}),"K"]})]}),c.jsx(tH,{}),c.jsx(vl,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent/50 transition-all duration-200",onClick:o,"aria-label":t("theme.toggle"),children:"dark"===s?c.jsx(Og,{className:"h-4 w-4"}):c.jsx(Xf,{className:"h-4 w-4"})}),c.jsx(iH,{})]})]})})}const xH="scroll_positions";function vH(){const e=Mn().pathname;p.useEffect(()=>{const t=()=>{(document.body.scrollTop||document.documentElement.scrollTop)&&function(e,t){const n=JSON.parse(localStorage.getItem(xH)||"{}");n[e]=t,localStorage.setItem(xH,JSON.stringify(n))}(e,window.scrollY)},n=function(e){return JSON.parse(localStorage.getItem(xH)||"{}")[e]||0}(e),s=setTimeout(()=>{window.scrollTo({top:n,behavior:"instant"})},0);return function(){const e=JSON.parse(localStorage.getItem(xH)||"{}");localStorage.setItem(xH,JSON.stringify(e))}(),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("beforeunload",t),()=>{clearTimeout(s),window.removeEventListener("scroll",t),window.removeEventListener("beforeunload",t),t()}},[e])}function yH({open:e,onOpenChange:t,dataTypes:n,navigationItems:s,quickActions:a,userId:r}){return c.jsx(yE,{open:e,onOpenChange:t,dataTypes:n,userId:r,navigationItems:s,quickActions:a})}const bH={user:{extractName:e=>(e=>{if(e.firstName&&e.lastName)return`${e.firstName} ${e.lastName}`;if(e.firstName)return e.firstName;if(e.lastName)return e.lastName;if(e.username)return e.username;if(e.email){const[t]=e.email.split("@");return t||e.email}return"Unknown User"})(e),fallbackName:"Unknown User"}};const wH=e=>function(e,t){const n=bH[t],s=(0,n.extractName)(e)||n.fallbackName||"Unknown";return{...e,name:s}}(e,"user"),SH={user:bH.user.extractName};function jH({icon:e,displayName:t,subtitle:n,badge:s,searchValue:a,itemKey:r,itemId:i,onSelect:o}){return c.jsxs(kN,{value:a,onSelect:o,children:[c.jsx(e,{className:"mr-2 h-4 w-4"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm",children:t}),n&&c.jsx("span",{className:"text-xs text-muted-foreground",children:n})]}),s&&c.jsx(mC,{variant:"outline",className:"ml-auto text-[10px]",children:s})]},`${r}-${i}`)}function CH(e){const{key:t,name:n,icon:s,scope:a,fetcher:r,navigateTo:i,renderItem:o,getSearchValue:l,getDisplayName:d,getSubtitle:u,getBadge:h}=e;return{key:t,name:n,icon:s,scope:a,fetcher:r,renderItem:o?(e,t)=>o(e,t):(e,n)=>{const a=e,r=d?.(a)??e.name??"Unknown",i=u?.(a)??null,o=h?.(a)??null,m=l?.(a)??`${t}-${e.id}-${r}`;return c.jsx(jH,{icon:s,displayName:r,subtitle:i,badge:o,searchValue:m,itemKey:t,itemId:e.id,onSelect:n})},getSearchValue:l?e=>l(e):e=>{const n=e,s=d?.(n)??e.name??"",a=u?.(n)??"";return`${t}-${e.id}-${s}-${a}`.toLowerCase()},navigateTo:i}}const kH=e=>CH({key:"customers",name:"Customers",icon:tx,scope:"customers",fetcher:e,navigateTo:"/sales/customers/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.code||null,getSearchValue:e=>{const t=e.code||e.id,n=e.name||t;return`customer-${e.id}-${t}-${n}`}}),NH=e=>CH({key:"employees",name:"Employees",icon:Xg,scope:"employees",fetcher:e,navigateTo:"/sales/employees/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.job_title||e.department||null,getBadge:e=>e.employment_type||null,getSearchValue:e=>`employee-${e.name}-${e.code||""}-${e.work_email||""}`}),_H=e=>CH({key:"bookings",name:"Bookings",icon:qg,scope:"bookings",fetcher:e,navigateTo:"/sales/bookings/$id",getDisplayName:e=>e.booking_number||String(e.id),getSubtitle:e=>e.status||null,getBadge:e=>e.payment_status||null,getSearchValue:e=>`booking-${e.booking_number}-${e.id}-${e.status||""}`}),PH=e=>CH({key:"venues",name:"Venues",icon:Mp,scope:"venues",fetcher:e,navigateTo:"/ticketing/venues/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.city||e.venue_type||null,getBadge:e=>e.capacity?`${e.capacity} seats`:null,getSearchValue:e=>`venue-${e.name}-${e.code||""}-${e.city||""}-${e.venue_type||""}`}),EH=e=>CH({key:"shows",name:"Shows",icon:gf,scope:"shows",fetcher:e,navigateTo:"/ticketing/shows/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.organizer?.name||e.started_date||null,getBadge:e=>e.started_date||null,getSearchValue:e=>`show-${e.name}-${e.code||""}-${e.organizer?.name||""}`}),RH=e=>CH({key:"organizers",name:"Organizers",icon:Fg,scope:"organizers",fetcher:e,navigateTo:"/ticketing/organizers/$id",getDisplayName:e=>e.name||e.code||String(e.id),getSubtitle:e=>e.email||e.city||null,getSearchValue:e=>`organizer-${e.name}-${e.code||""}-${e.email||""}`});function AH(e){const t=Yt(),n=UL(),s=kF(),a=Kq(),r=yq(),i=SI(),o=$I(),l=QI(),c=p.useMemo(()=>new oH,[]),{data:d}=Ys({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser(),enabled:e}),u=d?.id||d?.sub||void 0,{data:h}=cH(c,{enabled:!!u}),{fetchUsers:m,fetchCustomers:f,fetchEmployees:g,fetchBookings:x,fetchVenues:v,fetchShows:y,fetchOrganizers:b}=(e=>{const{userService:t,customerService:n,employeeService:s,bookingService:a,venueService:r,showService:i,organizerService:o}=e;return{fetchUsers:p.useCallback(async e=>(await t.searchUsers(e?.trim(),10)??[]).map(wH),[t]),fetchCustomers:p.useCallback(async e=>(await n.fetchCustomers({search:e?.trim(),skip:0,limit:10})).data??[],[n]),fetchEmployees:p.useCallback(async e=>await s.searchEmployees(e?.trim(),10)??[],[s]),fetchBookings:p.useCallback(async e=>(await a.searchBookings(e?.trim(),10)??[]).map(e=>({...e,name:e.booking_number})),[a]),fetchVenues:p.useCallback(async e=>await r.searchVenues(e?.trim(),10)??[],[r]),fetchShows:p.useCallback(async e=>await i.searchShows(e?.trim(),10)??[],[i]),fetchOrganizers:p.useCallback(async e=>await o.searchOrganizers(e?.trim(),10)??[],[o])}})({userService:n,customerService:s,employeeService:a,bookingService:r,venueService:i,showService:o,organizerService:l}),w=p.useMemo(()=>{return[(e=m,CH({key:"users",name:"Users",icon:Jg,scope:"users",fetcher:e,navigateTo:"/users/$id",getDisplayName:e=>e.name??SH.user(e),getSubtitle:e=>e.email||null,getBadge:e=>e.role||null,getSearchValue:e=>`user-${e.name??SH.user(e)}-${e.email||""}`})),kH(f),NH(g),_H(x),PH(v),EH(y),RH(b)];var e},[m,f,g,x,v,y,b]),S=p.useMemo(()=>(e=>{if(!e)return;const t=(e,n)=>e.flatMap(e=>{const s=n?.fallbackIcon??Mf,a=uH(e.icon)||s,r=(e.label||e.path||"nav-item").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),i=n?.slugPrefix?`${n.slugPrefix}-${r}`:r;return[{icon:a,label:e.label,value:`nav-${i}`,path:e.path,shortcut:e.shortcut,description:e.description,keywords:e.keywords,parentLabel:n?.parentLabel},...Array.isArray(e.children)?t(e.children,{parentLabel:e.label,slugPrefix:i,fallbackIcon:a}):[]]});return t(e)})(h),[h]),j=p.useMemo(()=>function(e){return[{icon:Jg,label:"Add New User",value:"action-add-user",keywords:["user","usr","people","person"],action:()=>{e&&e({to:"/users?action=create"})}},{icon:_g,label:"Add New Customer",value:"action-add-customer",keywords:["customer","cust","client","cus"],action:()=>{e&&e({to:"/sales/customers?action=create"})}},{icon:Xg,label:"Add New Employee",value:"action-add-employee",keywords:["employee","emp","staff","worker"],action:()=>{e&&e({to:"/sales/employees?action=create"})}},{icon:qg,label:"Add New Booking",value:"action-add-booking",keywords:["booking","book","reservation","order"],action:()=>{e&&e({to:"/sales/bookings?action=create"})}},{icon:gf,label:"Add New Show",value:"action-add-show",keywords:["show","event","concert"],action:()=>{e&&e({to:"/ticketing/shows?action=create"})}},{icon:Mp,label:"Add New Venue",value:"action-add-venue",keywords:["venue","location","place","theater"],action:()=>{e&&e({to:"/ticketing/venues?action=create"})}},{icon:Fg,label:"Add New Organizer",value:"action-add-organizer",keywords:["organizer","org","promoter"],action:()=>{e&&e({to:"/ticketing/organizers?action=create"})}},{icon:gg,label:"Invalidate Query Cache",value:"action-invalidate-cache",keywords:["cache","clear","invalidate","refresh","reset"],action:()=>{oa.queryClient&&oa.queryClient.clear(),hL().catch(e=>{})}}]}(t),[t]);return{dataTypes:w,navigationItems:S,quickActions:j,userId:u}}function TH({children:e}){const t=Yt(),n=Mn(),{open:s,setOpen:a}=function(e){const[t,n]=p.useState(!1);return p.useEffect(()=>{const s=s=>{if("k"===s.key&&(s.metaKey||s.ctrlKey))return s.preventDefault(),s.stopPropagation(),void n(e=>!e);if(!t&&e){if("h"===s.key&&(s.metaKey||s.ctrlKey))return s.preventDefault(),s.stopPropagation(),void e({to:"/"});if("d"===s.key&&(s.metaKey||s.ctrlKey))return s.preventDefault(),s.stopPropagation(),void e({to:"/dashboard"});if("u"===s.key&&(s.metaKey||s.ctrlKey))return s.preventDefault(),s.stopPropagation(),void e({to:"/users"});if(","===s.key&&(s.metaKey||s.ctrlKey))return s.preventDefault(),s.stopPropagation(),void e({to:"/settings"})}};return document.addEventListener("keydown",s,!0),()=>{document.removeEventListener("keydown",s,!0)}},[t,e]),{open:t,setOpen:n}}(t),{dataTypes:r,navigationItems:i,quickActions:o,userId:l}=AH(s),[d,u]=p.useState(()=>Ga.get("tab_position")??"separate");return p.useEffect(()=>{if("/change-password"===n.pathname)return;di.getMustChangePassword()&&di.isAuthenticated()&&t({to:"/change-password"})},[n.pathname,t]),p.useEffect(()=>{document.title="Hello Ticket"},[]),vH(),p.useEffect(()=>{const e=e=>{u(e.detail.position)};return window.addEventListener("tab-position-changed",e),()=>{window.removeEventListener("tab-position-changed",e)}},[]),c.jsxs("div",{className:"min-h-screen bg-background min-w-[1024px]",children:[c.jsx(gH,{onCommandPaletteOpen:()=>a(!0)}),"separate"===d&&c.jsx(rH,{}),c.jsx("main",{className:"container py-3",children:e}),c.jsx(yH,{open:s,onOpenChange:a,dataTypes:r,navigationItems:i,quickActions:o,userId:l})]})}const MH=mn("/users")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});function DH(){const{showSessionExpiredDialog:e}=function(){const e=p.useContext(JD);if(void 0===e)throw new Error("useSession must be used within a SessionProvider");return e}();p.useEffect(()=>{di.isAuthenticated()||e()},[e])}function LH(){const{t:e}=fr();DH();const{data:t,isLoading:n,error:s}=Ys({queryKey:["currentUser"],queryFn:()=>di.getCurrentUser()});if(n)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e("pages.profile.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.profile.loading")})]}),c.jsx(bl,{children:c.jsx(Cl,{className:"pt-6",children:c.jsx("div",{className:"flex items-center justify-center h-40",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})})]});if(s||!t)return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e("pages.profile.title")})}),c.jsx(bl,{children:c.jsx(Cl,{className:"pt-6",children:c.jsx("div",{className:"text-center text-destructive",children:e("pages.profile.error")})})})]});const a=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",r=(()=>{if(!t)return"";if("name"in t&&t.name)return t.name;return`${("first_name"in t?t.first_name:"")||""} ${("last_name"in t?t.last_name:"")||""}`.trim()||t.username||t.email})(),i=t.role||"";return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e("pages.profile.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.profile.subtitle")})]}),c.jsx(bl,{children:c.jsx(wl,{children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(cC,{className:"h-20 w-20",children:[c.jsx(dC,{src:"",alt:r}),c.jsx(uC,{className:"text-2xl",children:(o=r,o?o.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"??")})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx(Sl,{className:"text-2xl",children:r}),c.jsxs(jl,{className:"text-base",children:["@",t.username]})]}),c.jsx(mC,{variant:"secondary",className:"h-fit",children:a(i)})]})})}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs(bl,{children:[c.jsx(wl,{children:c.jsxs(Sl,{className:"flex items-center gap-2",children:[c.jsx(Uf,{className:"h-5 w-5"}),e("pages.profile.contactInfo")]})}),c.jsxs(Cl,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.email")}),c.jsx("p",{className:"text-base",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.username")}),c.jsxs("p",{className:"text-base",children:["@",t.username]})]})]})]}),c.jsxs(bl,{children:[c.jsx(wl,{children:c.jsxs(Sl,{className:"flex items-center gap-2",children:[c.jsx(Ng,{className:"h-5 w-5"}),e("pages.profile.accountInfo")]})}),c.jsxs(Cl,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.userId")}),c.jsx("p",{className:"font-mono text-sm",children:t.id||t.sub||"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.role")}),c.jsx("p",{className:"text-base",children:a(i)})]}),t.tenant_id&&c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-muted-foreground",children:[c.jsx(Mp,{className:"inline h-4 w-4 mr-1"}),e("pages.profile.tenantId")]}),c.jsx("p",{className:"font-mono text-sm",children:t.tenant_id})]})]})]})]}),c.jsxs(bl,{children:[c.jsx(wl,{children:c.jsxs(Sl,{className:"flex items-center gap-2",children:[c.jsx(Jg,{className:"h-5 w-5"}),e("pages.profile.additionalInfo")]})}),c.jsx(Cl,{children:c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.displayName")}),c.jsx("p",{className:"text-base",children:r})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:e("pages.profile.accountStatus")}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),c.jsx("span",{className:"text-base",children:e("pages.profile.active")})]})]})]})})]})]});var o}const FH=mn("/profile")({component:function(){return c.jsx(TH,{children:c.jsx(LH,{})})}});function IH(){return DH(),c.jsxs("div",{className:"container mx-auto space-y-6 p-6",children:[c.jsx(CA,{title:"My Page",description:"Example page"}),c.jsxs("div",{className:"rounded-lg border bg-card p-6 text-card-foreground shadow-sm",children:[c.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Welcome"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"This is a sample page."})]})]})}const OH=mn("/my-page")({component:function(){return c.jsx(TH,{children:c.jsx(IH,{})})}});function zH(){const{t:e}=fr();return c.jsxs(bl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(wl,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"h-20 w-20 rounded-full bg-destructive/10 flex items-center justify-center",children:c.jsx(Yp,{className:"h-10 w-10 text-destructive"})})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-6xl font-bold text-muted-foreground",children:"404"}),c.jsx(Sl,{className:"text-2xl",children:e("pages.notFound.title")}),c.jsx(jl,{className:"text-base",children:e("pages.notFound.message")})]})]}),c.jsxs(Cl,{className:"space-y-3",children:[c.jsx(vl,{asChild:!0,className:"w-full",size:"lg",children:c.jsxs(dn,{to:"/",children:[c.jsx(kf,{className:"mr-2 h-4 w-4"}),e("pages.notFound.goHome")]})}),c.jsxs(vl,{variant:"outline",className:"w-full",size:"lg",onClick:()=>window.history.back(),children:[c.jsx(Cp,{className:"mr-2 h-4 w-4"}),e("pages.notFound.goBack")]})]})]})}function BH({children:e}){const{theme:t,resolvedTheme:n,setTheme:s}=Jq();return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted",children:[c.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:c.jsx("span",{className:"text-primary-foreground font-bold text-lg",children:"T"})}),c.jsx("span",{className:"font-semibold text-lg",children:"Truths"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tH,{}),c.jsx(vl,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>{s("system"===t?"dark"===n?"light":"dark":"dark"===t?"light":"dark")},children:"dark"===n?c.jsx(Og,{className:"h-4 w-4"}):c.jsx(Xf,{className:"h-4 w-4"})})]})]}),c.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-center text-sm text-muted-foreground",children:c.jsx("p",{children:" 2025 Truths. All rights reserved."})})]})}const $H=mn("/$")({component:function(){return c.jsx(BH,{children:c.jsx(zH,{})})}});function UH(){const{t:e}=fr(),[t,n]=p.useState(null),[s,a]=p.useState([]),[r,i]=p.useState(!0),[o,l]=p.useState(null),[d,u]=p.useState("30");DH();const h=p.useCallback(async()=>{try{i(!0),l(null);const e=(e=>{const t=new Date,n=new Date;switch(e){case"7":n.setDate(t.getDate()-7);break;case"30":default:n.setDate(t.getDate()-30);break;case"thisMonth":n.setDate(1);break;case"lastMonth":n.setMonth(n.getMonth()-1),n.setDate(1),t.setDate(0);break;case"year":n.setMonth(0,1)}return{start_date:n.toISOString(),end_date:t.toISOString()}})(d),[t,s]=await Promise.all([XP.getAnalytics(e),XP.getRevenueAnalytics({...e,group_by:"month"}).catch(()=>[])]);n(t),a(s)}catch(wW){l("Failed to load dashboard data")}finally{i(!1)}},[d]);p.useEffect(()=>{h()},[d,h]);return r&&!t?c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:e("pages.home.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.home.subtitle")})]}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((e,t)=>c.jsxs(bl,{children:[c.jsxs(wl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(yv,{className:"h-4 w-24"}),c.jsx(yv,{className:"h-4 w-4"})]}),c.jsxs(Cl,{children:[c.jsx(yv,{className:"h-8 w-16 mb-2"}),c.jsx(yv,{className:"h-3 w-20"})]})]},t))}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[...Array(3)].map((e,t)=>c.jsx(yv,{className:"h-64 w-full"},t))})]}):o||!t?c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:e("pages.home.title")}),c.jsx("p",{className:"text-muted-foreground",children:e("pages.home.subtitle")})]}),c.jsx(bl,{children:c.jsxs(Cl,{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(bp,{className:"h-12 w-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Unable to Load Dashboard"}),c.jsx("p",{className:"text-muted-foreground text-center mb-4",children:o||"Something went wrong while loading your dashboard data."}),c.jsxs(vl,{onClick:h,variant:"outline",children:[c.jsx(fg,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]}):c.jsx("div",{className:"space-y-8",children:c.jsxs(sy,{defaultValue:"overview",className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsx("h3",{className:"text-2xl font-bold",children:e("pages.home.title")})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs(ay,{className:"inline-flex h-8 items-center justify-center rounded-md bg-muted p-0.5 text-muted-foreground",children:[c.jsxs(ry,{value:"overview",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm gap-1.5 hover:bg-muted/50",title:"View dashboard overview with key metrics and recent activity",children:[c.jsx(kf,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),c.jsxs(ry,{value:"analytics",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm gap-1.5 hover:bg-muted/50",title:"Detailed analytics and performance metrics",children:[c.jsx($p,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]}),c.jsxs(ry,{value:"operations",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm gap-1.5 hover:bg-muted/50",title:"Operational insights and status distributions",children:[c.jsx(jg,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Operations"})]})]}),c.jsxs(ox,{value:d,onValueChange:u,disabled:r,children:[c.jsx(cx,{className:"w-[120px] h-7",children:c.jsx(lx,{placeholder:"Period"})}),c.jsxs(hx,{children:[c.jsx(mx,{value:"7",children:"7 Days"}),c.jsx(mx,{value:"30",children:"30 Days"}),c.jsx(mx,{value:"thisMonth",children:"This Month"}),c.jsx(mx,{value:"lastMonth",children:"Last Month"}),c.jsx(mx,{value:"year",children:"YTD"})]})]}),c.jsx(vl,{onClick:h,variant:"outline",size:"sm",disabled:r,className:"h-7 w-7 p-0",children:c.jsx(fg,{className:"h-3.5 w-3.5 "+(r?"animate-spin":"")})})]})]}),c.jsxs(iy,{value:"overview",className:"space-y-8",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[c.jsx(uE,{title:"Total Events",value:XP.formatNumber(t.total_events),change:t.events_growth,changeType:t.events_growth>0?"positive":"negative",icon:c.jsx(Ip,{className:"h-4 w-4 text-muted-foreground"}),description:`${t.upcoming_events} upcoming, ${t.active_events} active`}),c.jsx(uE,{title:"Total Bookings",value:XP.formatNumber(t.total_bookings),change:t.bookings_growth,changeType:t.bookings_growth>0?"positive":"negative",icon:c.jsx(qg,{className:"h-4 w-4 text-muted-foreground"}),description:`${t.bookings_this_month} this month`}),c.jsx(uE,{title:"Total Revenue",value:XP.formatCurrency(t.total_revenue),change:t.revenue_growth,changeType:t.revenue_growth>0?"positive":"negative",icon:c.jsx(cf,{className:"h-4 w-4 text-muted-foreground"}),description:`${XP.formatCurrency(t.revenue_this_month)} this month`}),c.jsx(uE,{title:"Active Customers",value:XP.formatNumber(t.active_customers),change:t.customers_growth,changeType:t.customers_growth>0?"positive":"negative",icon:c.jsx(tx,{className:"h-4 w-4 text-muted-foreground"}),description:`${t.new_customers_this_month} new this month`})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[c.jsx("div",{className:"col-span-4",children:c.jsx(BD,{data:s.map(e=>({label:e.period,value:e.revenue})),title:"Revenue Overview",height:350,color:"#22c55e"})}),c.jsx("div",{className:"col-span-3",children:c.jsxs(bl,{className:"h-full",children:[c.jsxs(wl,{children:[c.jsx(Sl,{children:"Top Performers"}),c.jsx(jl,{children:"Leading shows by revenue"})]}),c.jsx(Cl,{children:c.jsxs("div",{className:"space-y-4",children:[t.top_shows_by_revenue.slice(0,5).map((e,t)=>c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(mC,{variant:"outline",className:"w-6 h-6 p-0 flex items-center justify-center",children:t+1}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:e.show_name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:XP.formatCurrency(e.revenue)})]})]})},e.show_id)),c.jsx(vl,{variant:"ghost",size:"sm",className:"w-full mt-4",asChild:!0,children:c.jsxs(dn,{to:"/ticketing/shows",children:["View All Shows ",c.jsx(kp,{className:"h-4 w-4 ml-2"})]})})]})})]})})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsx(hE,{activities:(e=>{const t=[];return e.recent_events.forEach(e=>{t.push({id:`event-${e.id}`,type:"info",title:`Event Created: ${e.title}`,description:`Status: ${e.status}`,timestamp:new Date(e.created_at).toLocaleDateString()})}),e.recent_bookings.forEach(e=>{t.push({id:`booking-${e.id}`,type:"success",title:`New Booking: ${e.customer_name}`,description:`${XP.formatCurrency(e.total_amount)} - ${e.status}`,timestamp:new Date(e.created_at).toLocaleDateString()})}),e.recent_payments.forEach(e=>{t.push({id:`payment-${e.id}`,type:"success",title:"Payment Received",description:`${XP.formatCurrency(e.amount)} - ${e.status}`,timestamp:new Date(e.created_at).toLocaleDateString()})}),t.slice(0,10)})(t),maxItems:6}),c.jsxs(bl,{children:[c.jsxs(wl,{children:[c.jsxs(Sl,{className:"flex items-center gap-2",children:[c.jsx(bp,{className:"h-5 w-5"}),"Action Center"]}),c.jsx(jl,{children:"Items ensuring your attention"})]}),c.jsxs(Cl,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:"Draft Events"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.event_status_breakdown.draft||0," shows pending publication"]})]}),c.jsx(vl,{variant:"outline",size:"sm",asChild:!0,children:c.jsx(dn,{to:"/ticketing/shows",children:"Review"})})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:"Pending Bookings"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.booking_status_breakdown.pending||0," orders awaiting confirmation"]})]}),c.jsx(vl,{variant:"outline",size:"sm",asChild:!0,children:c.jsx(dn,{to:"/sales/bookings",children:"Process"})})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:"New Customers"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.new_customers_this_month||0," joined this month"]})]}),c.jsx(vl,{variant:"ghost",size:"sm",asChild:!0,children:c.jsx(dn,{to:"/sales/customers",children:"View"})})]})]})]})]})]}),c.jsxs(iy,{value:"analytics",className:"space-y-4",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsx(BD,{data:s.map(e=>({label:e.period,value:e.revenue})),title:"Revenue Trends",height:350,color:"#22c55e"}),c.jsx(BD,{data:s.map(e=>({label:e.period,value:e.bookings_count})),title:"Booking Volume Trends",height:350,color:"#3b82f6"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsx(zD,{data:t.top_events_by_bookings.map(e=>({label:e.event_title.length>15?`${e.event_title.slice(0,15)}...`:e.event_title,value:e.bookings_count})),title:"Top Events by Bookings",height:300}),c.jsxs(bl,{className:"col-span-1",children:[c.jsx(wl,{children:c.jsx(Sl,{children:"Ticket Type Distribution"})}),c.jsx(Cl,{className:"flex items-center justify-center h-[250px]",children:c.jsx("p",{className:"text-muted-foreground text-sm",children:"Select an event to view breakdown"})})]}),c.jsxs(bl,{className:"col-span-1",children:[c.jsx(wl,{children:c.jsx(Sl,{children:"Key Metrics"})}),c.jsxs(Cl,{className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Average Ticket Price"}),c.jsx("span",{className:"text-2xl font-bold",children:t.average_ticket_price>0?XP.formatCurrency(t.average_ticket_price):"$0.00"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),c.jsx("span",{className:"text-2xl font-bold",children:t.active_users})]})]})]})]})]}),c.jsx(iy,{value:"operations",className:"space-y-4",children:c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsx($D,{data:(m=t,Object.entries(m.event_status_breakdown).map(([e,t])=>({label:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," "),value:t,color:"published"===e?"#22c55e":"draft"===e?"#f59e0b":"cancelled"===e?"#ef4444":"#6b7280"}))),title:"Event Status Distribution",height:300}),c.jsx($D,{data:(e=>Object.entries(e.booking_status_breakdown).map(([e,t])=>({label:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," "),value:t,color:"confirmed"===e?"#22c55e":"pending"===e?"#f59e0b":"cancelled"===e?"#ef4444":"#6b7280"})))(t),title:"Booking Status Distribution",height:300}),c.jsxs(bl,{children:[c.jsxs(wl,{children:[c.jsx(Sl,{children:"Top Venues"}),c.jsx(jl,{children:"By number of events"})]}),c.jsx(Cl,{children:c.jsx("div",{className:"space-y-4",children:t.top_venues_by_events?.length>0?t.top_venues_by_events.slice(0,5).map((e,t)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(mC,{variant:"secondary",className:"w-5 h-5 p-0 flex items-center justify-center rounded-full text-xs",children:t+1}),c.jsx("span",{className:"font-medium text-sm",children:e.venue_name})]}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.events_count," events"]})]},e.venue_id)):c.jsx("p",{className:"text-sm text-muted-foreground",children:"No venue data available"})})})]})]})})]})});var m}const VH=mn("/")({component:function(){return c.jsx(TH,{children:c.jsx(UH,{})})}});const qH=mn("/users/")({component:function(){DH();const e=Yt(),t=Mn(),n=new URLSearchParams(t.search),s="create"===n.get("action"),a=n.get("tab")||"users";return c.jsx("div",{className:"space-y-4",children:c.jsx(rF,{autoOpenCreate:s,defaultTab:a,onCreateDialogClose:()=>e({to:"/users",search:{}}),onUserClick:t=>e({to:"/users/$id",params:{id:t}}),onRoleClick:e=>{},onGroupClick:e=>{}})})}}),HH=mn("/settings/")({component:()=>c.jsx(Xt,{to:"/settings/profile",replace:!0})});const GH=mn("/users/$id")({component:function(){DH();const{id:e}=Gt({from:"/users/$id"}),t=Yt();return e?c.jsx(HL,{userId:e,onBack:()=>{t({to:"/users"})},onUpdateTabTitle:(t,n)=>{window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/users/${e}`,title:t,iconName:n||"User"}}))}}):null}});const KH=mn("/ticketing/venues")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});const WH=mn("/ticketing/shows")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});const QH=mn("/ticketing/organizers")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});function YH(){const{t:e}=fr(),t=Ua();return c.jsxs("div",{className:al("space-y-6",t.spacingFormSection),children:[c.jsxs(bl,{children:[c.jsxs(wl,{className:t.spacingFormItem,children:[c.jsxs(Sl,{className:al("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(Ef,{className:t.iconSize}),e("pages.settings.security.changePassword")]}),c.jsx(jl,{className:t.textSizeSmall,children:e("pages.settings.security.changePasswordDesc")})]}),c.jsxs(Cl,{className:al(t.paddingContainer,t.spacingFormSection),children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"current-password",className:t.textSizeLabel,children:e("pages.settings.security.currentPassword")}),c.jsx(kl,{id:"current-password",type:"password",autoComplete:"current-password",className:al(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"new-password",className:t.textSizeLabel,children:e("pages.settings.security.newPassword")}),c.jsx(kl,{id:"new-password",type:"password",autoComplete:"new-password",className:al(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"confirm-password",className:t.textSizeLabel,children:e("pages.settings.security.confirmPassword")}),c.jsx(kl,{id:"confirm-password",type:"password",autoComplete:"new-password",className:al(t.inputHeight,t.textSize)})]}),c.jsxs(vl,{className:al(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx(Ef,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.security.updatePassword")})]})]})]}),c.jsxs(bl,{children:[c.jsxs(wl,{className:t.spacingFormItem,children:[c.jsxs(Sl,{className:al("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(Ng,{className:t.iconSize}),e("pages.settings.security.twoFactor")]}),c.jsx(jl,{className:t.textSizeSmall,children:e("pages.settings.security.twoFactorDesc")})]}),c.jsx(Cl,{className:t.paddingContainer,children:c.jsxs(vl,{variant:"outline",className:al(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx(Ng,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.security.enableTwoFactor")})]})})]})]})}const XH={sales:Kg,default:Jf},ZH={profile:Jg,account:Ng,notifications:Ep,appearance:eg,language:bf,security:Ef,"company-addresses":Vf,sales:Kg,units:vg,"customer-types":Jg},JH=[{title:"pages.settings.menu.profile",href:"/settings/profile",icon:Jg,description:"pages.settings.menu.profileDesc"},{title:"pages.settings.menu.account",href:"/settings/account",icon:Ng,description:"pages.settings.menu.accountDesc"},{title:"pages.settings.menu.notifications",href:"/settings/notifications",icon:Ep,description:"pages.settings.menu.notificationsDesc"},{title:"pages.settings.menu.appearance",href:"/settings/appearance",icon:eg,description:"pages.settings.menu.appearanceDesc"},{title:"pages.settings.menu.language",href:"/settings/language",icon:bf,description:"pages.settings.menu.languageDesc"},{title:"pages.settings.menu.security",href:"/settings/security",icon:Ef,description:"pages.settings.menu.securityDesc"},{title:"pages.settings.menu.companyAddresses",href:"/settings/company-addresses",icon:Vf,description:"pages.settings.menu.companyAddressesDesc"}];const eG="settings-menu-collapsed",tG="settings-expanded-menu-items";function nG({children:e}){const{t:t}=fr(),n=Bt(),s=zt(),a=n.location.pathname,[r,i]=p.useState(()=>{if("undefined"!=typeof window){return"true"===localStorage.getItem(eG)}return!1}),[o,l]=p.useState(()=>{if("undefined"!=typeof window){const e=localStorage.getItem(tG);if(e)try{return new Set(JSON.parse(e))}catch{return new Set}}return new Set}),[d,u]=p.useState(""),[h,m]=p.useState(null),[f,g]=p.useState(null),x=p.useRef(null),v=p.useRef(null);p.useEffect(()=>{"undefined"!=typeof window&&localStorage.setItem(eG,String(r))},[r]),p.useEffect(()=>{"undefined"!=typeof window&&localStorage.setItem(tG,JSON.stringify(Array.from(o)))},[o]);const y=p.useCallback(e=>{if(e.includes(".")){const n=t(e);return n!==e?n:e}return e},[t]),b=p.useMemo(()=>{const e=function(e){const t=[];if(!e)return[];try{const n=e,s=n?.routesById;s&&"object"==typeof s&&Object.values(s).forEach(e=>{const n=e?.id||"",s=e?.fullPath||n;if("string"==typeof s&&s.startsWith("/settings/")&&!s.includes("$")){const e=s.replace(/\/$/,"");"/settings"!==e&&t.push(e)}})}catch(n){}return[...new Set(t)].sort()}(s);return function(e=null,t=(e,t)=>t||e){const n=e||["/settings/sales/customer-types"].sort(),s=new Set(JH.map(e=>e.href)),a=n.filter(e=>!s.has(e)&&e.startsWith("/settings/")),r={};a.forEach(e=>{const t=e.replace("/settings/","").split("/").filter(Boolean);if(t.length>=2){const n=t[0],s=e;r[n]||(r[n]=[]),t.length>1&&r[n].push(s)}});const i=Object.entries(r).map(([e,n])=>{const s=XH[e]||XH.default,a=e.charAt(0).toUpperCase()+e.slice(1),r=n.map(e=>{const n=e.split("/").pop()||"",s=n.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return{title:t(`pages.settings.menu.${n}`,s),href:e,icon:ZH[n]||Jg,description:t(`pages.settings.menu.${n}Desc`,`Manage ${s.toLowerCase()} and related data.`)}}),i=`/settings/${e}`;return{title:t(`pages.settings.menu.${e}`,a),href:i,icon:s,description:t(`pages.settings.menu.${e}Desc`,`Manage ${a.toLowerCase()} settings`),children:r.length>0?r:void 0}});return[...JH,...i.sort((e,t)=>e.href.localeCompare(t.href))]}(e.length>0?e:null,(e,n)=>{const s=n?t(e,{defaultValue:n}):t(e);return"string"==typeof s?s:n||e})},[s,t]);p.useEffect(()=>{b.forEach(e=>{if(e.children){const t=e.children.some(e=>a===e.href||a.startsWith(e.href+"/")),n=!!d&&e.children.some(e=>y(e.title).toLowerCase().includes(d.toLowerCase()));(t||n)&&l(t=>t.has(e.href)?t:new Set([...t,e.href]))}})},[a,d,b,y]);const w=p.useMemo(()=>b.filter(e=>{if(!d)return!0;const t=d.toLowerCase(),n=y(e.title).toLowerCase().includes(t),s=e.children?.some(e=>y(e.title).toLowerCase().includes(t));return n||s}),[b,d,y]);return p.useEffect(()=>{const e=e=>{const t=document.activeElement;if(t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||null!==t.closest("[role='dialog']")||null!==t.closest("[role='combobox']")||null!==t.closest("[role='listbox']")))return;if((e.metaKey||e.ctrlKey)&&"k"===e.key)return e.preventDefault(),void(!r&&x.current&&(x.current.focus(),x.current.select()));const n=v.current&&t&&v.current.contains(t);if(r||!x.current||document.activeElement===x.current||!n||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||"Enter"===e.key||"Tab"===e.key){if(document.activeElement===x.current&&x.current)"Escape"===e.key&&(x.current.blur(),m(null),g(null),u(""));else if(!r)if("ArrowDown"===e.key)if(e.preventDefault(),null!==f){const e=f.parentIndex,t=w[e],n=t.children?.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())})||[];if(f.childIndex<n.length-1)g({parentIndex:f.parentIndex,childIndex:f.childIndex+1});else{const t=e+1;if(t<w.length){const e=w[t];e.children&&o.has(e.href)?g({parentIndex:t,childIndex:0}):(m(t),g(null))}}}else{const e=null===h?0:Math.min(h+1,w.length-1),t=w[e];t.children&&o.has(t.href)?g({parentIndex:e,childIndex:0}):m(e)}else if("ArrowUp"===e.key)if(e.preventDefault(),null!==f)f.childIndex>0?g({parentIndex:f.parentIndex,childIndex:f.childIndex-1}):(m(f.parentIndex),g(null));else{const e=null===h?w.length-1:Math.max(h-1,0),t=w[e];if(t.children&&o.has(t.href)){const n=t.children.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())});g({parentIndex:e,childIndex:n.length-1})}else m(e)}else if("Enter"===e.key||" "===e.key){if(e.preventDefault(),null!==f){const e=w[f.parentIndex],t=(e.children?.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())})||[])[f.childIndex];t&&(window.location.href=t.href)}else if(null!==h){const e=w[h];e.children?l(t=>{const n=new Set(t);return n.has(e.href)?n.delete(e.href):n.add(e.href),n}):window.location.href=e.href}}else"Escape"===e.key&&(m(null),g(null),u(""))}else x.current.focus()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,h,f,w,o,d,y]),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[c.jsxs("aside",{ref:v,className:al("flex-shrink-0 transition-all duration-300 ease-in-out",r?"w-12 md:w-12":"w-full md:w-52"),children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[!r&&c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Sg,{className:"absolute left-1.5 top-1.5 h-3 w-3 text-muted-foreground"}),c.jsx(kl,{ref:x,placeholder:t("common.search","Search..."),value:d,onChange:e=>u(e.target.value),className:"pl-6 h-7 text-xs",onKeyDown:e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key)if(e.preventDefault(),x.current?.blur(),"ArrowDown"===e.key){const e=w[0];e&&(e.children&&o.has(e.href)?g({parentIndex:0,childIndex:0}):m(0))}else{const e=w.length-1,t=w[e];if(t)if(t.children&&o.has(t.href)){const n=t.children.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())});g({parentIndex:e,childIndex:n.length-1})}else m(e)}}})]}),c.jsx(vl,{variant:"ghost",size:"sm",onClick:()=>i(!r),className:"h-7 w-7 p-0 flex-shrink-0","aria-label":r?t("common.expandMenu","Expand menu"):t("common.collapseMenu","Collapse menu"),children:r?c.jsx(Hp,{className:"h-3.5 w-3.5"}):c.jsx(qp,{className:"h-3.5 w-3.5"})})]}),c.jsx("nav",{className:"space-y-0.5",children:w.map((e,t)=>{const n=e.icon,s=e.children&&e.children.length>0,i=!!s&&e.children.some(e=>a===e.href||a.startsWith(e.href+"/")),u=!i&&(a===e.href||a.startsWith(e.href+"/")),p=i&&(a===e.href||a.startsWith(e.href+"/"));if(r&&s)return c.jsxs(lP,{children:[c.jsx(cP,{asChild:!0,children:c.jsx("button",{className:al("flex items-center justify-center px-2 py-2 rounded transition-all duration-300 text-xs w-full",u?"bg-primary text-primary-foreground":p?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground"),title:y(e.title),children:c.jsx(n,{className:"h-4 w-4"})})}),c.jsx(dP,{side:"right",align:"start",className:"w-48 p-1.5",onOpenAutoFocus:e=>e.preventDefault(),children:c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold border-b",children:y(e.title)}),e.children.map(e=>{const t=e.icon,n=a===e.href||a.startsWith(e.href+"/");return c.jsxs(dn,{to:e.href,className:al("flex items-center gap-2 px-2 py-1.5 rounded transition-all duration-300 text-xs",n?"bg-primary text-primary-foreground font-medium":"hover:bg-accent hover:text-accent-foreground"),children:[c.jsx(t,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:y(e.title)})]},e.href)})]})})]},e.href);const x=o.has(e.href);return c.jsxs("div",{className:"space-y-1",children:[s&&!r?c.jsxs("button",{onClick:t=>{t.preventDefault(),l(t=>{const n=new Set(t);return n.has(e.href)?n.delete(e.href):n.add(e.href),n})},onFocus:()=>{m(t),g(null)},tabIndex:h===t&&null===f?0:-1,className:al("flex items-center gap-2 px-2 py-1.5 rounded transition-all duration-300 text-xs w-full text-left outline-none",u?"bg-primary text-primary-foreground":p?"bg-primary/10 text-primary":"hover:bg-accent hover:text-accent-foreground",h===t&&null===f?"ring-2 ring-ring ring-offset-1":""),...s&&{"aria-expanded":x},children:[c.jsx(n,{className:"h-4 w-4 flex-shrink-0"}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("div",{className:"font-medium whitespace-nowrap text-xs",children:y(e.title)})}),c.jsx(Vp,{className:al("h-3 w-3 flex-shrink-0 transition-transform duration-200",x?"rotate-180":"rotate-0")})]}):c.jsxs(dn,{to:e.href,onFocus:()=>{m(t),g(null)},tabIndex:h===t&&null===f?0:-1,className:al("flex rounded transition-all duration-300 outline-none",r?"items-center justify-center px-2 py-2":"items-center gap-2 px-2 py-1.5","text-xs",u?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground",h===t&&null===f?"ring-2 ring-ring ring-offset-1":""),title:r?y(e.title):void 0,children:[c.jsx(n,{className:al("flex-shrink-0 transition-all duration-300","h-4 w-4")}),c.jsx("div",{className:al("flex-1 transition-all duration-300 ease-in-out overflow-hidden",r?"max-w-0 opacity-0":"max-w-full opacity-100"),children:c.jsx("div",{className:"font-medium whitespace-nowrap text-xs",children:y(e.title)})})]}),s&&!r&&x&&c.jsx("div",{className:"ml-6 space-y-0.5",children:e.children.filter(e=>{if(!d)return!0;return y(e.title).toLowerCase().includes(d.toLowerCase())}).map((e,n)=>{const s=e.icon,r=a===e.href||a.startsWith(e.href+"/"),i=f?.parentIndex===t&&f?.childIndex===n;return c.jsxs(dn,{to:e.href,onFocus:()=>{g({parentIndex:t,childIndex:n}),m(null)},tabIndex:i?0:-1,className:al("flex items-center gap-2 px-2 py-1 rounded transition-all duration-300 text-xs outline-none",r?"bg-primary text-primary-foreground font-medium":"hover:bg-accent hover:text-accent-foreground text-muted-foreground",i?"ring-2 ring-ring ring-offset-1":""),children:[c.jsx(s,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:y(e.title)})]},e.href)})})]},e.href)})})]}),c.jsx("main",{className:"flex-1 min-w-0",children:e})]})})}const sG=mn("/settings/security")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(YH,{})})})}});function aG(){const{t:e}=fr(),t=Ua();return c.jsx("div",{className:al("space-y-6",t.spacingFormSection),children:c.jsxs(bl,{children:[c.jsxs(wl,{className:t.spacingFormItem,children:[c.jsx(Sl,{className:al(t.textSizeCardTitle,"font-semibold"),children:e("pages.settings.profile.title")}),c.jsx(jl,{className:t.textSizeSmall,children:e("pages.settings.profile.description")})]}),c.jsxs(Cl,{className:al(t.paddingContainer,t.spacingFormSection),children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"name",className:t.textSizeLabel,children:e("pages.settings.profile.name")}),c.jsx(kl,{id:"name",placeholder:"John Doe",className:al(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"username",className:t.textSizeLabel,children:e("pages.settings.profile.username")}),c.jsx(kl,{id:"username",placeholder:"johndoe",className:al(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"email",className:t.textSizeLabel,children:e("pages.settings.profile.email")}),c.jsx(kl,{id:"email",type:"email",placeholder:"john@example.com",className:al(t.inputHeight,t.textSize)})]}),c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"bio",className:t.textSizeLabel,children:e("pages.settings.profile.bio")}),c.jsx("textarea",{id:"bio",className:al("flex w-full rounded-md border border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t.paddingCell,t.textSize,"h-7"===t.inputHeight?"min-h-[60px]":"min-h-[80px]"),placeholder:e("pages.settings.profile.bioPlaceholder")})]}),c.jsxs(vl,{className:al(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx(yg,{className:t.iconSizeSmall}),c.jsx("span",{children:e("common.save")})]})]})]})})}const rG=mn("/settings/profile")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(aG,{})})})}});function iG(){const{t:e}=fr(),t=Ua();return c.jsx("div",{className:al("space-y-6",t.spacingFormSection),children:c.jsxs(bl,{children:[c.jsxs(wl,{className:t.spacingFormItem,children:[c.jsx(Sl,{className:al(t.textSizeCardTitle,"font-semibold"),children:e("pages.settings.notifications.title")}),c.jsx(jl,{className:t.textSizeSmall,children:e("pages.settings.notifications.description")})]}),c.jsxs(Cl,{className:al(t.paddingContainer,t.spacingFormSection),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"email-notifications",className:t.textSizeLabel,children:e("pages.settings.notifications.emailNotifications")}),c.jsx("p",{className:al("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.emailNotificationsDesc")})]}),c.jsx(kx,{id:"email-notifications"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"push-notifications",className:t.textSizeLabel,children:e("pages.settings.notifications.pushNotifications")}),c.jsx("p",{className:al("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.pushNotificationsDesc")})]}),c.jsx(kx,{id:"push-notifications"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"marketing-emails",className:t.textSizeLabel,children:e("pages.settings.notifications.marketingEmails")}),c.jsx("p",{className:al("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.marketingEmailsDesc")})]}),c.jsx(kx,{id:"marketing-emails"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"security-alerts",className:t.textSizeLabel,children:e("pages.settings.notifications.securityAlerts")}),c.jsx("p",{className:al("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.notifications.securityAlertsDesc")})]}),c.jsx(kx,{id:"security-alerts",defaultChecked:!0})]})]})]})})}const oG=mn("/settings/notifications")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(iG,{})})})}});function lG(){const{t:e,i18n:t}=fr(),n=Ua();return c.jsx("div",{className:al("space-y-6",n.spacingFormSection),children:c.jsxs(bl,{children:[c.jsxs(wl,{className:n.spacingFormItem,children:[c.jsx(Sl,{className:al(n.textSizeCardTitle,"font-semibold"),children:e("pages.settings.language.title")}),c.jsx(jl,{className:n.textSizeSmall,children:e("pages.settings.language.description")})]}),c.jsx(Cl,{className:n.paddingContainer,children:c.jsx("div",{className:al("space-y-2",n.spacingFormItem),children:[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"Franais"},{code:"es",name:"Spanish",nativeName:"Espaol"}].map(e=>{const s=t.language===e.code;return c.jsxs("button",{onClick:()=>{return n=e.code,void t.changeLanguage(n);var n},className:al("w-full flex items-center justify-between rounded-lg border hover:bg-accent transition-colors",n.paddingForm,s?"border-primary bg-accent":"border-muted"),children:[c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:al("font-medium",n.textSize),children:e.nativeName}),c.jsx("div",{className:al("text-muted-foreground",n.textSizeSmall),children:e.name})]}),s&&c.jsx(Up,{className:al("text-primary",n.iconSize)})]},e.code)})})})]})})}const cG=mn("/settings/language")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(lG,{})})})}});function dG(e){return{id:e.id,name:e.name,street:e.street??void 0,city:e.city??void 0,state:e.state??void 0,postal_code:e.postal_code??void 0,country:e.country??void 0,is_default:e.is_default,notes:e.notes??void 0,address_type:e.address_type,created_at:e.created_at,updated_at:e.updated_at}}class uG{constructor(e){this.companyAddressService=e}async listAddresses(e,t){return(await this.companyAddressService.fetchCompanyAddresses({address_type:t,skip:0,limit:200})).data.map(dG)}async createAddress(e,t){if(!t.name||!t.name.trim())throw new Error("Address name is required");const n={name:t.name,address_type:t.address_type,street:t.street??null,city:t.city??null,state:t.state??null,postal_code:t.postal_code??null,country:t.country??null,is_default:t.is_default??!1,notes:t.notes??null};return dG(await this.companyAddressService.createCompanyAddress(n))}async updateAddress(e,t,n){const s={name:n.name,address_type:n.address_type,street:n.street??null,city:n.city??null,state:n.state??null,postal_code:n.postal_code??null,country:n.country??null,is_default:n.is_default,notes:n.notes??null};return dG(await this.companyAddressService.updateCompanyAddress(t,s))}async deleteAddress(e,t){await this.companyAddressService.deleteCompanyAddress(t)}async setDefaultAddress(e,t){const n=await this.companyAddressService.updateCompanyAddress(t,{is_default:!0}),s=(await this.companyAddressService.fetchCompanyAddresses({skip:0,limit:200})).data.filter(e=>e.id!==t&&e.is_default).map(e=>this.companyAddressService.updateCompanyAddress(e.id,{is_default:!1}));return await Promise.all(s),dG(n)}}function hG(){const{t:e}=fr(),t=Ua(),[n,s]=p.useState(!1),a=p.useMemo(()=>new GP({apiClient:Fa,endpoints:{"company-addresses":"/api/v1/company-addresses"}}),[]),r=p.useMemo(()=>new uG(a),[a]),i=p.useMemo(()=>({addressTypes:["default","billing","shipping"],addressTypeLabels:{default:e("pages.settings.companyAddresses.default","Default"),billing:e("pages.settings.companyAddresses.billing","Billing"),shipping:e("pages.settings.companyAddresses.shipping","Shipping")},defaultAddressType:"default",entityLabel:"company",formatAddressTypeLabel:t=>({default:e("pages.settings.companyAddresses.default","Default"),billing:e("pages.settings.companyAddresses.billing","Billing"),shipping:e("pages.settings.companyAddresses.shipping","Shipping")}[t])}),[e]);return c.jsx("div",{className:al("space-y-6",t.spacingFormSection),children:c.jsxs(bl,{children:[c.jsx(wl,{className:t.spacingFormItem,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs(Sl,{className:al("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(Vf,{className:al("h-5 w-5",t.iconSize)}),e("pages.settings.companyAddresses.title","Company Addresses")]}),c.jsx(jl,{className:t.textSizeCardDescription,children:e("pages.settings.companyAddresses.description","Manage your company addresses. You can have one default address, multiple billing addresses, and multiple shipping addresses.")})]}),c.jsxs(vl,{onClick:()=>s(!0),className:"flex items-center gap-2",children:[c.jsx(hg,{className:"h-4 w-4"}),e("pages.settings.companyAddresses.addAddress","Add Address")]})]})}),c.jsx(Cl,{className:al(t.paddingContainer),children:c.jsx(BM,{entityId:"company",service:r,config:i,addDialogOpen:n,onAddDialogOpenChange:s})})]})})}const mG=mn("/settings/company-addresses")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(hG,{})})})}}),pG="enable_tabs",fG="tab_position";function gG(){const{t:e}=fr(),{theme:t,setTheme:n}=Jq(),{density:s,setDensity:a}=(()=>{const e=p.useContext(Za);if(void 0===e)throw new Error("useDensity must be used within a DensityProvider");return e})(),r=Ua(),[i,o]=p.useState(()=>Ga.get(pG)??!0),[l,d]=p.useState(()=>Ga.get(fG)??"separate"),u=e=>{d(e),Ga.set(fG,e),window.dispatchEvent(new CustomEvent("tab-position-changed",{detail:{position:e}}))},h=[{value:"light",label:e("theme.light"),icon:Og},{value:"dark",label:e("theme.dark"),icon:Xf},{value:"system",label:e("theme.system"),icon:Yf}],m=[{value:"compact",label:e("pages.settings.appearance.compact","Compact"),icon:Wf,description:e("pages.settings.appearance.compactDesc","Dense layout with smaller spacing")},{value:"normal",label:e("pages.settings.appearance.normal","Normal"),icon:Hf,description:e("pages.settings.appearance.normalDesc","Comfortable layout with more spacing")}];return c.jsxs("div",{className:al("space-y-6",r.spacingFormSection),children:[c.jsxs(bl,{children:[c.jsxs(wl,{className:r.spacingFormItem,children:[c.jsx(Sl,{className:al(r.textSizeCardTitle,"font-semibold"),children:e("pages.settings.appearance.title")}),c.jsx(jl,{className:r.textSizeCardDescription,children:e("pages.settings.appearance.description")})]}),c.jsxs(Cl,{className:al(r.paddingContainer,r.spacingFormSection),children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(Dl,{children:e("pages.settings.appearance.themeMode")}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:h.map(e=>{const s=e.icon;return c.jsxs("button",{onClick:()=>n(e.value),className:al("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors",t===e.value?"border-primary bg-accent":"border-muted"),children:[c.jsx(s,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.value)})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Dl,{children:e("pages.settings.appearance.uiDensity","UI Density")}),c.jsx("p",{className:"text-sm text-muted-foreground",children:e("pages.settings.appearance.uiDensityDesc","Choose between compact and normal spacing for a more comfortable or data-dense interface")}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.map(e=>{const t=e.icon;return c.jsxs("button",{onClick:()=>a(e.value),className:al("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors",s===e.value?"border-primary bg-accent":"border-muted"),children:[c.jsx(t,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e.label}),c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:e.description})]},e.value)})})]})]})]}),c.jsxs(bl,{children:[c.jsxs(wl,{className:r.spacingFormItem,children:[c.jsxs(Sl,{className:al("flex items-center gap-2",r.textSizeCardTitle,"font-semibold"),children:[c.jsx(sg,{className:al("h-5 w-5",r.iconSize)}),e("pages.settings.appearance.interfaceSettings")]}),c.jsx(jl,{className:r.textSizeCardDescription,children:e("pages.settings.appearance.interfaceSettingsDesc")})]}),c.jsxs(Cl,{className:al(r.paddingContainer,r.spacingFormSection),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(Dl,{htmlFor:"enable-tabs",children:e("pages.settings.appearance.enableTabs")}),c.jsx("p",{className:"text-sm text-muted-foreground",children:e("pages.settings.appearance.enableTabsDesc")})]}),c.jsx(kx,{id:"enable-tabs",checked:i,onCheckedChange:e=>{o(e),Ga.set(pG,e),window.dispatchEvent(new CustomEvent("tabs-preference-changed",{detail:{enabled:e}}))}})]}),i&&c.jsxs("div",{className:"space-y-3",children:[c.jsx(Dl,{children:e("pages.settings.appearance.tabPosition")}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>u("separate"),className:al("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors","separate"===l?"border-primary bg-accent":"border-muted"),children:[c.jsx(ng,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e("pages.settings.appearance.tabPositionSeparate")}),c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:e("pages.settings.appearance.tabPositionSeparateDesc")})]}),c.jsxs("button",{onClick:()=>u("inline"),className:al("flex flex-col items-center gap-2 rounded-lg border-2 p-4 hover:bg-accent transition-colors","inline"===l?"border-primary bg-accent":"border-muted"),children:[c.jsx(tg,{className:"h-6 w-6"}),c.jsx("span",{className:"text-sm font-medium",children:e("pages.settings.appearance.tabPositionInline")}),c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:e("pages.settings.appearance.tabPositionInlineDesc")})]})]})]})]})]})]})}const xG=mn("/settings/appearance")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(gG,{})})})}});function vG(){const{t:e}=fr(),t=Ua(),n=Vs(),{toast:s}=Rk(),[a,r]=p.useState(!0),[i,o]=p.useState(!0);p.useEffect(()=>{const e=za.get("cache","queryCacheEnabled"),t=za.get("cache","reactQueryCacheEnabled");r(!1!==e),o(!1!==t)},[]);return c.jsxs("div",{className:al("space-y-6",t.spacingFormSection),children:[c.jsxs(bl,{children:[c.jsxs(wl,{className:t.spacingFormItem,children:[c.jsx(Sl,{className:al(t.textSizeCardTitle,"font-semibold"),children:e("pages.settings.account.title")}),c.jsx(jl,{className:t.textSizeSmall,children:e("pages.settings.account.description")})]}),c.jsx(Cl,{className:al(t.paddingContainer,t.spacingFormSection),children:c.jsxs("div",{className:al("flex items-center justify-between border rounded-lg",t.paddingForm),children:[c.jsxs("div",{children:[c.jsx("h4",{className:al("font-medium",t.textSize),children:e("pages.settings.account.accountStatus")}),c.jsx("p",{className:al("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.account.accountStatusDesc")})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:al("rounded-full bg-green-500",t.iconSizeSmall)}),c.jsx("span",{className:al("font-medium",t.textSizeSmall),children:e("pages.settings.account.active")})]})]})})]}),c.jsxs(bl,{children:[c.jsxs(wl,{className:t.spacingFormItem,children:[c.jsxs(Sl,{className:al("flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(lf,{className:t.iconSize}),e("pages.settings.account.cacheManagement")]}),c.jsx(jl,{className:t.textSizeSmall,children:e("pages.settings.account.cacheManagementDesc")})]}),c.jsx(Cl,{className:al(t.paddingContainer,t.spacingFormSection),children:c.jsxs("div",{className:al("space-y-6",t.spacingFormSection),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"query-cache-enabled",className:t.textSizeLabel,children:e("pages.settings.account.enableQueryCache")}),c.jsx("p",{className:al("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.account.enableQueryCacheDesc")})]}),c.jsx(kx,{id:"query-cache-enabled",checked:a,onCheckedChange:async t=>{try{r(t),await za.setAsync(["cache","queryCacheEnabled"],t),s({title:e(t?"pages.settings.account.queryCacheEnabled":"pages.settings.account.queryCacheDisabled"),description:e(t?"pages.settings.account.queryCacheEnabledDesc":"pages.settings.account.queryCacheDisabledDesc")})}catch(n){r(!t),s({title:e("pages.settings.account.preferenceUpdateError"),description:e("pages.settings.account.preferenceUpdateErrorDesc"),variant:"destructive"})}}})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:t.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"react-query-cache-enabled",className:t.textSizeLabel,children:e("pages.settings.account.enableReactQueryCache")}),c.jsx("p",{className:al("text-muted-foreground",t.textSizeSmall),children:e("pages.settings.account.enableReactQueryCacheDesc")})]}),c.jsx(kx,{id:"react-query-cache-enabled",checked:i,onCheckedChange:async t=>{try{o(t),await za.setAsync(["cache","reactQueryCacheEnabled"],t);const a=t?864e5:0,r=t?3e5:0;n.setDefaultOptions({queries:{gcTime:a,staleTime:r}}),t||(n.clear(),await hL()),s({title:e(t?"pages.settings.account.reactQueryCacheEnabled":"pages.settings.account.reactQueryCacheDisabled"),description:e(t?"pages.settings.account.reactQueryCacheEnabledDesc":"pages.settings.account.reactQueryCacheDisabledDesc")})}catch(a){o(!t),s({title:e("pages.settings.account.preferenceUpdateError"),description:e("pages.settings.account.preferenceUpdateErrorDesc"),variant:"destructive"})}}})]}),c.jsxs("div",{className:al("space-y-3",t.spacingFormSection),children:[c.jsxs(vl,{variant:"outline",onClick:async()=>{try{n.clear(),n.removeQueries(),await hL(),Ga&&"function"==typeof Ga.remove&&(Ga.remove("REACT_QUERY_OFFLINE_CACHE"),Ga.remove("app_tabs"),Ga.remove("scroll_positions"),Ga.removeMatching?Ga.removeMatching("^command-palette-recent"):Ga.remove("command-palette-recent")),s({title:e("pages.settings.account.cacheCleared"),description:e("pages.settings.account.cacheClearedDesc")})}catch(t){s({title:e("pages.settings.account.cacheClearError"),description:e("pages.settings.account.cacheClearErrorDesc"),variant:"destructive"})}},className:al(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5 w-full justify-start"),children:[c.jsx(lf,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.account.clearCache")})]}),c.jsxs(vl,{variant:"outline",onClick:async()=>{try{await n.invalidateQueries(),s({title:e("pages.settings.account.queriesInvalidated"),description:e("pages.settings.account.queriesInvalidatedDesc")})}catch(t){s({title:e("pages.settings.account.queriesInvalidateError"),description:e("pages.settings.account.queriesInvalidateErrorDesc"),variant:"destructive"})}},className:al(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5 w-full justify-start"),children:[c.jsx(fg,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.account.invalidateAllQueries")})]})]})]})})]}),c.jsxs(bl,{className:"border-destructive",children:[c.jsxs(wl,{className:t.spacingFormItem,children:[c.jsxs(Sl,{className:al("text-destructive flex items-center gap-2",t.textSizeCardTitle,"font-semibold"),children:[c.jsx(Wg,{className:t.iconSize}),e("pages.settings.account.dangerZone")]}),c.jsx(jl,{className:t.textSizeSmall,children:e("pages.settings.account.dangerZoneDesc")})]}),c.jsx(Cl,{className:t.paddingContainer,children:c.jsxs(vl,{variant:"destructive",className:al(t.buttonHeightSmall,t.paddingCell,t.textSizeSmall,"flex items-center gap-1.5"),children:[c.jsx(Hg,{className:t.iconSizeSmall}),c.jsx("span",{children:e("pages.settings.account.deleteAccount")})]})})]})]})}const yG=mn("/settings/account")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(vG,{})})})}});const bG=mn("/sales/payments")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});const wG=mn("/sales/explore")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});const SG=mn("/sales/employees")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});const jG=mn("/sales/customers")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});const CG=mn("/sales/bookings")({component:function(){return c.jsx(TH,{children:c.jsx(_n,{})})}});function kG(){const{t:e}=fr(),t=Yt(),{toast:n}=Rk(),s=Vs(),[a,r]=p.useState(!1),[i,o]=p.useState(!1),[l,d]=p.useState({username:"",password:""}),[u,h]=p.useState({});p.useEffect(()=>{const e=di.isAuthenticated();o(e)},[]);const m=(e,t)=>{d(n=>({...n,[e]:t})),u[e]&&h(t=>({...t,[e]:void 0}))},f=async()=>{_a(!0);try{await di.logout(),s.clear(),Ga.removeMatching?Ga.removeMatching("^command-palette-recent"):Ga.remove("command-palette-recent"),o(!1),n({title:"Logged Out",description:"You have been successfully logged out."})}catch(e){s.clear(),Ga.removeMatching?Ga.removeMatching("^command-palette-recent"):Ga.remove("command-palette-recent"),o(!1),n({title:"Logged Out",description:"You have been logged out locally."})}},g=()=>{t({to:"/"})};return i?c.jsxs(bl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(wl,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"h-16 w-16 rounded-full bg-green-500/10 flex items-center justify-center",children:c.jsx(Xp,{className:"h-8 w-8 text-green-500"})})}),c.jsx(Sl,{className:"text-2xl",children:"Already Logged In"}),c.jsx(jl,{className:"text-base",children:"You are currently logged in to your account. Would you like to continue to the home page or logout?"})]}),c.jsxs(Cl,{className:"space-y-3",children:[c.jsxs(vl,{onClick:g,className:"w-full",size:"lg",children:[c.jsx(kf,{className:"mr-2 h-4 w-4"}),"Go to Home Page"]}),c.jsxs(vl,{onClick:f,variant:"outline",className:"w-full",size:"lg",children:[c.jsx($f,{className:"mr-2 h-4 w-4"}),"Logout & Login as Different User"]})]})]}):c.jsxs(bl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(wl,{className:"space-y-1 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:c.jsx(zf,{className:"h-6 w-6 text-primary"})})}),c.jsx(Sl,{className:"text-2xl font-bold",children:e("pages.login.title")}),c.jsx(jl,{children:e("pages.login.subtitle")})]}),c.jsx(Cl,{children:c.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),h({}),(()=>{const t={};return l.username.trim()||(t.username=e("pages.login.errors.usernameRequired")),l.password?l.password.length<8&&(t.password=e("pages.login.errors.passwordTooShort")):t.password=e("pages.login.errors.passwordRequired"),h(t),0===Object.keys(t).length})()){r(!0);try{s.clear(),s.removeQueries(),Ga&&"function"==typeof Ga.remove&&(Ga.remove("REACT_QUERY_OFFLINE_CACHE"),Ga.remove("app_tabs"),Ga.remove("scroll_positions"),Ga.removeMatching?Ga.removeMatching("^command-palette-recent"):Ga.remove("command-palette-recent"));const a=await di.login(l);if(n({title:e("pages.login.success"),description:e("pages.login.successDescription")}),await s.invalidateQueries(),a.must_change_password)return di.setMustChangePassword(!0),void t({to:"/change-password"});t({to:"/"})}catch(i){if(i instanceof ci){let t="",s=e("pages.login.error"),a="";switch(i.type){case"locked":{let e="Your account has been locked.";if(i.lockedUntil)try{const t=new Date(i.lockedUntil);e=`Your account has been locked until ${new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(t)}.`}catch{e=`Your account has been locked. ${i.lockedUntil}`}t=e,s="Account Locked",a=e+" Please contact your administrator or try again later.";break}case"inactive":t="Your account is inactive.",s="Account Inactive",a="Your account has been deactivated. Please contact your administrator to reactivate your account.";break;default:t=e("pages.login.errors.invalidCredentials"),s=e("pages.login.error"),a="The username or password you entered is incorrect. Please try again."}h({general:t}),n({title:s,description:a,variant:"destructive"})}else{const t=i instanceof Error?i.message:"An error occurred";h({general:e("pages.login.errors.invalidCredentials")}),n({title:e("pages.login.error"),description:t,variant:"destructive"})}}finally{r(!1)}}},className:"space-y-4",children:[u.general&&c.jsx(_A,{message:u.general}),c.jsx(_E,{label:e("pages.login.usernameLabel"),htmlFor:"username",error:u.username,children:c.jsx(PE,{id:"username",type:"text",placeholder:e("pages.login.usernamePlaceholder"),value:l.username,onChange:e=>m("username",e.target.value),leftIcon:c.jsx(Jg,{className:"h-4 w-4"}),error:Boolean(u.username),disabled:a,autoComplete:"username",autoFocus:!0})}),c.jsx(_E,{label:e("pages.login.passwordLabel"),htmlFor:"password",error:u.password,children:c.jsx(NE,{id:"password",placeholder:e("pages.login.passwordPlaceholder"),value:l.password,onChange:e=>m("password",e.target.value),leftIcon:c.jsx(zf,{className:"h-4 w-4"}),error:Boolean(u.password),disabled:a,autoComplete:"current-password",capsLockMessage:e("pages.login.capsLockOn")})}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"text-sm text-primary hover:underline",onClick:()=>n({title:"Feature Coming Soon",description:"Password reset functionality will be available soon."}),children:e("pages.login.forgotPassword")})}),c.jsx(vl,{type:"submit",className:"w-full",disabled:a,children:e(a?"pages.login.loggingIn":"pages.login.submit")}),c.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e("pages.login.noAccount")," ",c.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>n({title:"Feature Coming Soon",description:"Sign up functionality will be available soon."}),children:e("pages.login.signUp")})]})]})})]})}const NG=mn("/(auth)/login")({component:function(){return c.jsx(BH,{children:c.jsx(kG,{})})}});function _G(){const{t:e}=fr(),t=Yt(),{toast:n}=Rk(),[s,a]=p.useState(!1),[r,i]=p.useState(!1),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[h,m]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,g]=p.useState({}),x=Ua(),v=(e,t)=>{m(n=>({...n,[e]:t})),f[e]&&g(t=>({...t,[e]:void 0}))};return c.jsxs(bl,{className:"w-full max-w-md shadow-lg",children:[c.jsxs(wl,{className:al(x.spacingFormItem,"text-center"),children:[c.jsx("div",{className:al("flex justify-center",x.gapFormItem),children:c.jsx("div",{className:al("rounded-full bg-primary/10 flex items-center justify-center","h-4 w-4"===x.iconSize?"h-10 w-10":"h-12 w-12"),children:c.jsx(Pf,{className:al("text-primary","h-4 w-4"===x.iconSize?"h-5 w-5":"h-6 w-6")})})}),c.jsx(Sl,{className:al("font-bold","text-sm"===x.textSize?"text-xl":"text-2xl"),children:"Change Your Password"}),c.jsx(jl,{className:x.textSizeSmall,children:"For security reasons, please change your password before continuing."})]}),c.jsx(Cl,{className:x.paddingContainer,children:c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g({}),(()=>{const e={};return h.currentPassword||(e.currentPassword="Current password is required"),h.newPassword?h.newPassword.length<8&&(e.newPassword="Password must be at least 8 characters"):e.newPassword="New password is required",h.confirmPassword?h.newPassword!==h.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your new password",h.currentPassword===h.newPassword&&(e.newPassword="New password must be different from current password"),g(e),0===Object.keys(e).length})()){a(!0);try{await di.changePassword({current_password:h.currentPassword,new_password:h.newPassword}),di.clearMustChangePassword(),n({title:"Password Changed",description:"Your password has been successfully changed."}),t({to:"/"})}catch(s){const e=s instanceof Error?s.message:"Failed to change password";g({general:e}),n({title:"Password Change Failed",description:e,variant:"destructive"})}finally{a(!1)}}},className:x.spacingFormSection,children:[f.general&&c.jsxs("div",{className:al("flex items-center gap-2 text-destructive bg-destructive/10 rounded-md",x.paddingCell,x.textSizeSmall),children:[c.jsx(Yp,{className:x.iconSizeSmall}),c.jsx("span",{children:f.general})]}),c.jsxs("div",{className:x.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"current-password",className:x.textSizeLabel,children:"Current Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(zf,{className:al("absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",x.iconSizeSmall)}),c.jsx(kl,{id:"current-password",type:r?"text":"password",placeholder:"Enter your current password",value:h.currentPassword,onChange:e=>v("currentPassword",e.target.value),className:al("pl-10 pr-10",x.inputHeight,x.textSize,f.currentPassword?"border-destructive":""),disabled:s,autoComplete:"current-password",autoFocus:!0}),c.jsx("button",{type:"button",onClick:()=>i(!r),className:al("absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"),tabIndex:-1,children:r?c.jsx(hf,{className:x.iconSizeSmall}):c.jsx(mf,{className:x.iconSizeSmall})})]}),f.currentPassword&&c.jsx("p",{className:al("text-destructive",x.textSizeSmall),children:f.currentPassword})]}),c.jsxs("div",{className:x.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"new-password",className:x.textSizeLabel,children:"New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(zf,{className:al("absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",x.iconSizeSmall)}),c.jsx(kl,{id:"new-password",type:o?"text":"password",placeholder:"Enter your new password",value:h.newPassword,onChange:e=>v("newPassword",e.target.value),className:al("pl-10 pr-10",x.inputHeight,x.textSize,f.newPassword?"border-destructive":""),disabled:s,autoComplete:"new-password"}),c.jsx("button",{type:"button",onClick:()=>l(!o),className:al("absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"),tabIndex:-1,children:o?c.jsx(hf,{className:x.iconSizeSmall}):c.jsx(mf,{className:x.iconSizeSmall})})]}),f.newPassword&&c.jsx("p",{className:al("text-destructive",x.textSizeSmall),children:f.newPassword})]}),c.jsxs("div",{className:x.spacingFormItem,children:[c.jsx(Dl,{htmlFor:"confirm-password",className:x.textSizeLabel,children:"Confirm New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(zf,{className:al("absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",x.iconSizeSmall)}),c.jsx(kl,{id:"confirm-password",type:d?"text":"password",placeholder:"Confirm your new password",value:h.confirmPassword,onChange:e=>v("confirmPassword",e.target.value),className:al("pl-10 pr-10",x.inputHeight,x.textSize,f.confirmPassword?"border-destructive":""),disabled:s,autoComplete:"new-password"}),c.jsx("button",{type:"button",onClick:()=>u(!d),className:al("absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"),tabIndex:-1,children:d?c.jsx(hf,{className:x.iconSizeSmall}):c.jsx(mf,{className:x.iconSizeSmall})})]}),f.confirmPassword&&c.jsx("p",{className:al("text-destructive",x.textSizeSmall),children:f.confirmPassword})]}),c.jsxs(vl,{type:"submit",className:al("w-full flex items-center gap-1.5",x.buttonHeightSmall,x.paddingCell,x.textSizeSmall),disabled:s,children:[c.jsx(Pf,{className:x.iconSizeSmall}),c.jsx("span",{children:s?"Changing Password...":"Change Password"})]})]})})]})}const PG=mn("/(auth)/change-password")({component:function(){return c.jsx(BH,{children:c.jsx(_G,{})})}});const EG=mn("/ticketing/venues/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(wI,{config:{apiClient:Fa,endpoints:{venues:"/api/v1/ticketing/venues"}},children:c.jsx(eV,{config:{apiClient:Fa,endpoints:{venueTypes:"/api/v1/ticketing/venue-types"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(oV,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/ticketing/venues",search:{}}),onNavigateToVenue:t=>e({to:"/ticketing/venues/$id",params:{id:t}})})})})})}});const RG=mn("/ticketing/shows/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(BI,{config:{apiClient:Fa,endpoints:{shows:"/api/v1/ticketing/shows"}},children:c.jsx(WI,{config:{apiClient:Fa,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(aO,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/ticketing/shows",search:{}}),onNavigateToShow:t=>e({to:"/ticketing/shows/$id",params:{id:t}})})})})})}});const AG=mn("/ticketing/organizers/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(WI,{config:{apiClient:Fa,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(fV,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/ticketing/organizers",search:{}}),onNavigateToOrganizer:t=>e({to:"/ticketing/organizers/$id",params:{id:t}})})})})}});const TG=mn("/sales/payments/")({component:function(){const e=Yt();return c.jsx("div",{className:"space-y-4",children:c.jsx(jq,{onNavigateToPayment:t=>e({to:"/sales/payments/$id",params:{id:t}})})})}});const MG=mn("/sales/explore/")({component:function(){return c.jsx(BI,{config:{apiClient:Fa,endpoints:{shows:"/api/v1/ticketing/shows"}},children:c.jsx(oI,{config:{apiClient:Fa,endpoints:{events:"/api/v1/ticketing/events"}},children:c.jsx(Dq,{})})})}});const DG=mn("/sales/employees/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(Gq,{config:{apiClient:Fa,endpoints:{employees:"/api/v1/sales/employees"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(Wq,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/sales/employees",search:{}}),onNavigateToEmployee:t=>e({to:"/sales/employees/$id",params:{id:t}})})})})}});const LG=mn("/sales/customers/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx("div",{className:"space-y-4",children:c.jsx(NF,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/sales/customers",search:{}}),onNavigateToCustomer:t=>e({to:"/sales/customers/$id",params:{id:t}})})})}});const FG=mn("/sales/bookings/")({component:function(){const e=Yt(),t=Mn(),n="create"===new URLSearchParams(t.search).get("action");return c.jsx(vq,{config:{apiClient:Fa,endpoints:{bookings:"/api/v1/sales/bookings"}},children:c.jsx("div",{className:"space-y-4",children:c.jsx(bq,{autoOpenCreate:n,onCreateDialogClose:()=>e({to:"/sales/bookings",search:{}}),onNavigateToBooking:t=>e({to:"/sales/bookings/$id",params:{id:t}})})})})}});function IG({id:e}){const t=Yt(),n=SI(),{data:s,isLoading:a,error:r}=CI(n,e??null),i=kI(n),[o,l]=p.useState(!1),d=function(){const e=zt();return Bt({select:e=>[e.location.href,e.resolvedLocation?.href,e.status],structuralSharing:!0}),p.useCallback(t=>{const{pending:n,caseSensitive:s,fuzzy:a,includeSearch:r,...i}=t;return e.matchRoute(i,{pending:n,caseSensitive:s,fuzzy:a,includeSearch:r})},[e])}()({to:"/ticketing/venues/$id/seats/designer",params:{id:e}}),u=p.useMemo(()=>new YP({apiClient:Fa,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[]);p.useEffect(()=>{if(!s||d)return;const t=s.name||s.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/venues/${e}`,title:t,iconName:"Users"}}))},[e,s,d]);return d?c.jsx(_n,{}):c.jsxs(c.Fragment,{children:[c.jsx(YU,{data:s??void 0,loading:a,error:r,editable:!0,onEdit:()=>{l(!0)},onNavigateToSeatDesigner:(e,n)=>{t({to:"/ticketing/venues/$id/seats/designer",params:{id:e},search:{layoutId:n}})},profilePhotoComponent:s?c.jsx(lV,{venue:s,attachmentService:u}):void 0}),s&&c.jsx(iV,{open:o,onOpenChange:l,onSubmit:async(e,t)=>{try{await i.mutateAsync({id:e,input:t}),Ek({title:"Success",description:"Venue updated successfully"}),l(!1)}catch(n){throw Ek({title:"Error",description:n instanceof Error?n.message:"Failed to update venue",variant:"destructive"}),n}},venue:s})]})}const OG=mn("/ticketing/venues/$id")({component:function(){const{id:e}=Gt({from:"/ticketing/venues/$id"}),t={apiClient:Fa,endpoints:{venues:"/api/v1/ticketing/venues"}},n={apiClient:Fa,endpoints:{layouts:"/api/v1/ticketing/layouts"}};return c.jsx(wI,{config:t,children:c.jsx(eV,{config:{apiClient:Fa,endpoints:{venueTypes:"/api/v1/ticketing/venue-types"}},children:c.jsx(EI,{config:n,children:c.jsx(IG,{id:e})})})})}});function zG({id:e}){const t=Yt(),n=$I(),{data:s,isLoading:a,error:r}=JI(n,e??null);return p.useEffect(()=>{if(!s)return;const t=s.code||s.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/shows/${e}`,title:t,iconName:"Users"}}))},[e,s]),c.jsx(tO,{data:s??void 0,loading:a,error:r,editable:!0,onNavigateToInventory:e=>{t({to:"/ticketing/events/$eventId/inventory",params:{eventId:e}})}})}const BG=mn("/ticketing/shows/$id")({component:function(){const{id:e}=Gt({from:"/ticketing/shows/$id"}),t={apiClient:Fa,endpoints:{shows:"/api/v1/ticketing/shows"}};return c.jsx(BI,{config:t,children:c.jsx(WI,{config:{apiClient:Fa,endpoints:{organizers:"/api/v1/ticketing/organizers"}},children:c.jsx(oI,{config:{apiClient:Fa,endpoints:{events:"/api/v1/ticketing/events"}},children:c.jsx(wI,{config:{apiClient:Fa,endpoints:{venues:"/api/v1/ticketing/venues"}},children:c.jsx(EI,{config:{apiClient:Fa,endpoints:{layouts:"/api/v1/ticketing/layouts"}},children:c.jsx(nE,{config:{apiClient:Fa,baseUrl:"/api/v1"},children:c.jsx(zG,{id:e})})})})})})})}});function $G({id:e}){const t=QI(),{data:n,isLoading:s,error:a,refetch:r}=function(e,t){return Ys({queryKey:["organizers",t],queryFn:()=>t?e.fetchOrganizerById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}(t,e??null);f.useEffect(()=>{},[n]);const[i,o]=p.useState(!1),[l,d]=p.useState(null),[u,h]=p.useState(!1),[m,g]=p.useState(!1),[x,v]=p.useState(null),y=function(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateOrganizer(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["organizers"]}),t.invalidateQueries({queryKey:["organizers",n.id]})}})}(t),b=new JP({apiClient:Fa,endpoints:{tags:"/api/v1/shared/tags"}}),w=new YP({apiClient:Fa,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),{data:S,refetch:j}=Ys({queryKey:["profilePhoto",e,"organizer"],queryFn:()=>e?w.getProfilePhoto("organizer",e):null,enabled:!!e});p.useEffect(()=>{v(S||null)},[S]);const{data:C,isLoading:k,refetch:N}=Ys({queryKey:["organizer-documents",e],queryFn:()=>e?w.getAttachmentsForEntity("organizer",e,"document").then(e=>e.items):Promise.resolve([]),enabled:!!e});return p.useEffect(()=>{if(!n)return;const t=n.code||n.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/organizers/${e}`,title:t,iconName:"Users"}}))},[e,n]),c.jsxs(c.Fragment,{children:[c.jsx(dV,{data:n??void 0,loading:s,error:a,editable:!0,onEdit:e=>{d(e),o(!0)},onManageTags:e=>{h(!0)},onManageAttachments:e=>{g(!0)},attachmentService:w,profilePhotoComponent:n?c.jsx(vV,{organizer:n,attachmentService:w,currentPhoto:x,onPhotoChange:async e=>{v(e),await j()}}):void 0}),c.jsx(pV,{open:i,onOpenChange:e=>{o(e),e||d(null)},onSubmit:async(e,t)=>{try{await y.mutateAsync({id:e,input:t}),Ek({title:"Success",description:"Organizer updated successfully"}),o(!1),d(null)}catch(wW){throw Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to update organizer",variant:"destructive"}),wW}},organizer:l}),n&&c.jsxs(c.Fragment,{children:[c.jsx(gV,{open:u,onOpenChange:h,organizer:n,tagService:b,onSave:async e=>{if(n)try{await b.manageEntityTags("organizer",n.id,e),await r(),Ek({title:"Success",description:"Tags updated successfully"}),h(!1)}catch(wW){Ek({title:"Error",description:wW instanceof Error?wW.message:"Failed to update tags",variant:"destructive"})}}}),c.jsx(xV,{open:m,onOpenChange:g,organizer:n,attachmentService:w,onSave:async e=>{await N(),Ek({title:"Success",description:"Attachments updated successfully"})}})]})]})}const UG=mn("/ticketing/organizers/$id")({component:function(){const{id:e}=Gt({from:"/ticketing/organizers/$id"}),t={apiClient:Fa,endpoints:{organizers:"/api/v1/ticketing/organizers"}};return c.jsx(WI,{config:t,children:c.jsx($G,{id:e})})}});function VG(){const e=Yt(),t=Mn(),n=Ua(),s="create"===new URLSearchParams(t.search).get("action");return c.jsx(eV,{config:{apiClient:Fa,endpoints:{venueTypes:"/api/v1/ticketing/venue-types"}},children:c.jsx("div",{className:al("space-y-4",n.spacingFormSection),children:c.jsx(iq,{autoOpenCreate:s,onCreateDialogClose:()=>e({to:"/settings/ticketing/venue-types",search:{}})})})})}const qG=mn("/settings/ticketing/venue-types")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(VG,{})})})}});function HG(){const e=Yt(),t=Mn(),n=Ua(),s="create"===new URLSearchParams(t.search).get("action");return c.jsx(XV,{config:{apiClient:Fa,endpoints:{eventTypes:"/api/v1/ticketing/event-types"}},children:c.jsx("div",{className:al("space-y-4",n.spacingFormSection),children:c.jsx(tq,{autoOpenCreate:s,onCreateDialogClose:()=>e({to:"/settings/ticketing/event-types",search:{}})})})})}const GG=mn("/settings/ticketing/event-types")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(HG,{})})})}});function KG(){const e=Yt(),t=Mn(),n=Ua(),s="create"===new URLSearchParams(t.search).get("action");return c.jsx(AF,{config:{apiClient:Fa,endpoints:{customerTypes:"/api/v1/sales/customer-types"}},children:c.jsx("div",{className:al("space-y-4",n.spacingFormSection),children:c.jsx(LF,{autoOpenCreate:s,onCreateDialogClose:()=>e({to:"/settings/sales/customer-types",search:{}})})})})}const WG=mn("/settings/sales/customer-types")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(KG,{})})})}});function QG(){const e=Yt(),t=Mn(),n=Ua(),s="create"===new URLSearchParams(t.search).get("action");return c.jsx(WF,{config:{apiClient:Fa,endpoints:{customerGroups:"/api/v1/sales/customer-groups"}},children:c.jsx("div",{className:al("space-y-4",n.spacingFormSection),children:c.jsx(GF,{autoOpenCreate:s,onCreateDialogClose:()=>e({to:"/settings/sales/customer-groups",search:{}})})})})}const YG=mn("/settings/sales/customer-groups")({component:function(){return c.jsx(TH,{children:c.jsx(nG,{children:c.jsx(QG,{})})})}});const XG=mn("/sales/payments/$id")({component:function(){const{id:e}=Gt({from:"/sales/payments/$id"});return c.jsxs("div",{children:["Payment Detail: ",e]})}});function ZG({id:e}){const t=Kq(),[n,s]=p.useState(!1),[a,r]=p.useState(!1),[i,o]=p.useState(!1),l=function(e){const t=Vs();return Xs({mutationFn:({id:t,input:n})=>e.updateEmployee(t,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["employees"]}),t.invalidateQueries({queryKey:["employees",n.id]})}})}(t),{data:d,isLoading:u,error:h,refetch:m}=function(e,t){return Ys({queryKey:["employees",t],queryFn:()=>t?e.fetchEmployeeById(t):Promise.resolve(null),enabled:!!t,staleTime:3e5})}(t,e??null),f=p.useMemo(()=>new JP({apiClient:Fa,endpoints:{tags:"/api/v1/shared/tags",entityTags:"/api/v1/shared/tags/entity"}}),[]),g=p.useMemo(()=>new YP({apiClient:Fa,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),[]);p.useEffect(()=>{if(!d)return;const t=d.code||d.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/sales/employees/${e}`,title:t,iconName:"Users"}}))},[e,d]);const x=p.useCallback(()=>{m()},[m]);return e?c.jsxs(c.Fragment,{children:[c.jsx(Fq,{data:d??void 0,loading:u,error:h,editable:!0,onEdit:()=>{s(!0)},attachmentService:g,onManageTags:()=>r(!0),onManageAttachments:()=>o(!0),profilePhotoComponent:d?c.jsx(qq,{employee:d,attachmentService:g,currentPhoto:null,onPhotoChange:x}):void 0}),c.jsx($q,{open:n,onOpenChange:s,onSubmit:async(e,t)=>{try{await l.mutateAsync({id:e,input:t}),Ek({title:"Success",description:"Employee updated successfully"}),s(!1)}catch(n){throw n}},employee:d??null}),d&&c.jsxs(c.Fragment,{children:[c.jsx(Uq,{open:a,onOpenChange:r,employee:d,tagService:f,onSave:async()=>{d&&(await m(),r(!1))}}),c.jsx(Vq,{open:i,onOpenChange:o,employee:d,attachmentService:g,onSave:async()=>{o(!1)}})]})]}):null}const JG=mn("/sales/employees/$id")({component:function(){const{id:e}=Gt({from:"/sales/employees/$id"}),t=p.useMemo(()=>({apiClient:Fa,endpoints:{employees:"/api/v1/sales/employees"}}),[]);return c.jsx(Gq,{config:t,children:c.jsx(ZG,{id:e})})}});function eK({id:e}){const t=Yt(),n=kF(),{data:s,isLoading:a,error:r,refetch:i}=bF(n,e??null),o=wF(n),l=SF(n),{toast:d}=Rk(),u=new JP({apiClient:Fa,endpoints:{}}),h=new YP({apiClient:Fa,endpoints:{attachments:"/api/v1/shared/attachments",entityAttachments:"/api/v1/shared/attachments/entity",profilePhoto:"/api/v1/shared/attachments/entity"}}),m=gq(new pq({apiClient:Fa,endpoints:{bookings:"/api/v1/sales/bookings"}})),[f,g]=p.useState(!1),[x,v]=p.useState(!1),[y,b]=p.useState(!1),[w,S]=p.useState(!1),[j,C]=p.useState(!1),[k,N]=p.useState(!1),[_,P]=p.useState(!1),[E,R]=p.useState(null),{data:A,refetch:T}=Ys({queryKey:["profilePhoto",s?.id,"customer"],queryFn:()=>s?h.getProfilePhoto("customer",s.id):null,enabled:!!s});p.useEffect(()=>{R(A||null)},[A]),p.useEffect(()=>{if(!s)return;const t=s.code||s.name||s.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/sales/customers/${e}`,title:t,iconName:"Users"}}))},[e,s]);const M=p.useCallback(()=>{g(!0)},[]),D=p.useCallback(()=>{v(!0)},[]),L=p.useCallback(async()=>{if(s){try{await l.mutateAsync(s.id),d({title:"Success",description:"Customer deleted successfully"}),t({to:"/sales/customers"})}catch(wW){d({title:"Error",description:wW instanceof Error?wW.message:"Failed to delete customer",variant:"destructive"})}v(!1)}},[s,l,d,t]),F=p.useCallback(()=>{b(!0)},[]),I=p.useCallback(()=>{S(!0)},[]),O=p.useCallback(async()=>{if(s)try{await o.mutateAsync({id:s.id,input:{status:"active"}}),await i(),d({title:"Success",description:"Customer activated successfully"}),b(!1)}catch(wW){d({title:"Error",description:wW instanceof Error?wW.message:"Failed to activate customer",variant:"destructive"})}},[s,o,d,i]),z=p.useCallback(async()=>{if(s)try{await o.mutateAsync({id:s.id,input:{status:"inactive"}}),await i(),d({title:"Success",description:"Customer deactivated successfully"}),S(!1)}catch(wW){d({title:"Error",description:wW instanceof Error?wW.message:"Failed to deactivate customer",variant:"destructive"})}},[s,o,d,i]),B=p.useCallback(async(e,t)=>{try{await o.mutateAsync({id:e,input:t}),await i(),d({title:"Success",description:"Customer updated successfully"}),g(!1)}catch(wW){throw d({title:"Error",description:wW instanceof Error?wW.message:"Failed to update customer",variant:"destructive"}),wW}},[o,d,i]),$=p.useCallback(e=>{P(!0)},[]),U=p.useCallback(async e=>{try{const n=await m.mutateAsync(e);d({title:"Success",description:"Booking created successfully"}),P(!1),t({to:"/sales/bookings/$id",params:{id:n.id}})}catch(wW){throw d({title:"Error",description:wW instanceof Error?wW.message:"Failed to create booking",variant:"destructive"}),wW}},[m,t,d]),V=p.useCallback(e=>{t({to:"/sales/bookings",search:{customer_id:e.id}})},[t]),q=p.useCallback(()=>{C(!0)},[]),H=p.useCallback(async e=>{if(s)try{await u.manageEntityTags("customer",s.id,e),await i(),d({title:"Success",description:"Tags updated successfully"}),C(!1)}catch(wW){throw d({title:"Error",description:wW instanceof Error?wW.message:"Failed to update tags",variant:"destructive"}),wW}},[s,i,d,u]),G=p.useCallback(async e=>{R(e),await T()},[T]),K=p.useCallback(()=>{N(!0)},[]),W=p.useCallback(async e=>{d({title:"Success",description:"Attachments updated successfully"})},[d]);return c.jsxs(c.Fragment,{children:[c.jsx(cF,{cus:s??void 0,loading:a,error:r,editable:!0,onEdit:M,onDelete:D,onActivate:F,onDeactivate:I,onCreateBooking:$,onViewBookings:V,onManageTags:q,onManageAttachments:K,profilePhoto:E,onProfilePhotoChange:G}),s&&c.jsxs(c.Fragment,{children:[c.jsx(mF,{open:f,onOpenChange:g,customer:s,onSubmit:B}),c.jsx(jE,{open:x,onOpenChange:e=>{v(e)},title:"Delete Customer",description:`Are you sure you want to delete "${s.name||s.code}"? This action cannot be undone.`,confirmText:"delete",confirmTextLabel:c.jsxs(c.Fragment,{children:["Type ",c.jsx("span",{className:"font-mono font-semibold",children:"delete"})," to confirm:"]}),confirmTextPlaceholder:"Type 'delete' to confirm",confirmAction:{label:"Delete",onClick:L,variant:"destructive",type:"delete",loading:l.isPending,disabled:l.isPending},cancelAction:{label:"Cancel",onClick:()=>v(!1),disabled:l.isPending}}),c.jsx(jE,{open:y,onOpenChange:e=>{b(e)},title:"Activate Customer",description:`Are you sure you want to activate "${s.name||s.code}"? This will make the customer active and available for bookings.`,confirmAction:{label:"Activate",onClick:O,variant:"default",loading:o.isPending,disabled:o.isPending},cancelAction:{label:"Cancel",onClick:()=>b(!1),disabled:o.isPending}}),c.jsx(jE,{open:w,onOpenChange:e=>{S(e)},title:"Deactivate Customer",description:`Are you sure you want to deactivate "${s.name||s.code}"? This will make the customer inactive and unavailable for new bookings.`,confirmAction:{label:"Deactivate",onClick:z,variant:"default",loading:o.isPending,disabled:o.isPending},cancelAction:{label:"Cancel",onClick:()=>S(!1),disabled:o.isPending}}),c.jsx(pF,{open:j,onOpenChange:C,customer:s,tagService:u,onSave:H,loading:!1}),c.jsx(fF,{open:k,onOpenChange:N,customer:s,attachmentService:h,onSave:W,loading:!1}),c.jsx(hq,{open:_,onOpenChange:P,onSubmit:U,initialCustomerId:s.id})]})]})}const tK=mn("/sales/customers/$id")({component:function(){const{id:e}=Gt({from:"/sales/customers/$id"});return c.jsx(eK,{id:e})}});function nK({id:e}){const t=yq(),{data:n,isLoading:s,error:a}=fq(t,e??null);return p.useEffect(()=>{if(!n)return;const t=n.booking_number||n.id;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/sales/bookings/${e}`,title:t,iconName:"ShoppingCart"}}))},[e,n]),c.jsx(HU,{data:n??void 0,loading:s,error:a,editable:!0})}const sK=mn("/sales/bookings/$id")({component:function(){const{id:e}=Gt({from:"/sales/bookings/$id"}),t={apiClient:Fa,endpoints:{bookings:"/api/v1/sales/bookings"}};return c.jsx(vq,{config:t,children:c.jsx(nK,{id:e})})}});function aK({eventId:e}){const t=lI(),n=$I(),{data:s}=dI(t,e||null),{data:a}=JI(n,s?.show_id||null);return p.useEffect(()=>{if(!e)return;if(!s)return;if(!a)return;const t=`${a?.code||""} - ${s.title}`;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:`/ticketing/events/${e}/inventory`,title:t,iconName:"Package"}}))},[e,s,a]),c.jsx(IU,{eventId:e})}function rK(){const{eventId:e}=Gt({from:"/ticketing/events/$eventId/inventory"});if(!e)return c.jsx("div",{className:"p-4",children:"Invalid event ID"});const t={apiClient:Fa,endpoints:{events:"/api/v1/ticketing/events"}},n={apiClient:Fa,endpoints:{shows:"/api/v1/ticketing/shows"}},s={apiClient:Fa,endpoints:{layouts:"/api/v1/ticketing/layouts"}};return c.jsx(TH,{children:c.jsx(oI,{config:t,children:c.jsx(BI,{config:n,children:c.jsx(EI,{config:s,children:c.jsx(aK,{eventId:e})})})})})}const iK=mn("/ticketing/events/$eventId/inventory")({component:function(){return c.jsx(rK,{})}});function oK({id:e,layoutId:t}){const n=SI(),s=RI(),a=lI(),{data:r,isLoading:i}=CI(n,e??null),{data:o,isLoading:l,error:d}=AI(s,e??null),u=t||(o&&o.length>0?o[0].id:void 0),{data:h,isLoading:m}=TI(s,u??null),f=MI(s),{data:g}=cI(a,u?{filter:{layout_id:u,is_active:!0}}:void 0),x=g?.data.some(e=>e.status!==eI.COMPLETED&&e.status!==eI.CANCELLED);return p.useEffect(()=>{if(!e||!u)return;const t=`Designer - ${h?.layout.name||`Layout ${u}`}`,n=`/ticketing/venues/${e}/seats/designer?layoutId=${u}`;window.dispatchEvent(new CustomEvent("update-tab-title",{detail:{path:n,title:t,iconName:"MapPin"}}))},[e,u,h?.layout.name]),i||m||l?c.jsx("div",{className:"p-4",children:"Loading layout and seats..."}):u?c.jsx("div",{className:"container mx-auto py-6 space-y-4",children:c.jsx(GV,{venueId:e,layoutId:u,layoutName:h?.layout.name,imageUrl:h?.layout.image_url||r?.image_url,designMode:h?.layout.design_mode,initialSeats:h?.seats,initialSections:h?.sections,fileId:h?.layout.file_id,initialCanvasBackgroundColor:h?.layout.canvas_background_color,readOnly:x,onImageUpload:(e,t)=>{t&&f.mutate({id:u,input:{file_id:t}})},onRemoveImage:async()=>{await f.mutateAsync({id:u,input:{file_id:""}})},onCanvasBackgroundColorChange:e=>{f.mutate({id:u,input:{canvas_background_color:e}})}},u)}):d?c.jsxs("div",{className:"p-4 text-destructive",children:["Failed to load layouts:"," ",d instanceof Error?d.message:"Unknown error"]}):c.jsx("div",{className:"p-4 text-muted-foreground",children:"No layouts found for this venue. Please create a layout first."})}const lK=mn("/ticketing/venues/$id/seats/designer")({component:function(){const{id:e}=Gt({from:"/ticketing/venues/$id/seats/designer"}),t=Kt({from:"/ticketing/venues/$id/seats/designer"}),n=t?.layoutId;if(!e)return c.jsx("div",{className:"p-4",children:"Invalid venue ID"});const s={apiClient:Fa,endpoints:{venues:"/api/v1/ticketing/venues"}},a={apiClient:Fa,endpoints:{events:"/api/v1/ticketing/events"}},r={apiClient:Fa,endpoints:{layouts:"/api/v1/ticketing/layouts"}};return c.jsx(wI,{config:s,children:c.jsx(EI,{config:r,children:c.jsx(oI,{config:a,children:c.jsx(oK,{id:e,layoutId:n})})})})},validateSearch:AM({layoutId:PM().optional()})}),cK=MH.update({id:"/users",path:"/users",getParentRoute:()=>Zq}),dK=FH.update({id:"/profile",path:"/profile",getParentRoute:()=>Zq}),uK=OH.update({id:"/my-page",path:"/my-page",getParentRoute:()=>Zq}),hK=$H.update({id:"/$",path:"/$",getParentRoute:()=>Zq}),mK=VH.update({id:"/",path:"/",getParentRoute:()=>Zq}),pK=qH.update({id:"/",path:"/",getParentRoute:()=>cK}),fK=HH.update({id:"/settings/",path:"/settings/",getParentRoute:()=>Zq}),gK=GH.update({id:"/$id",path:"/$id",getParentRoute:()=>cK}),xK=KH.update({id:"/ticketing/venues",path:"/ticketing/venues",getParentRoute:()=>Zq}),vK=WH.update({id:"/ticketing/shows",path:"/ticketing/shows",getParentRoute:()=>Zq}),yK=QH.update({id:"/ticketing/organizers",path:"/ticketing/organizers",getParentRoute:()=>Zq}),bK=sG.update({id:"/settings/security",path:"/settings/security",getParentRoute:()=>Zq}),wK=rG.update({id:"/settings/profile",path:"/settings/profile",getParentRoute:()=>Zq}),SK=oG.update({id:"/settings/notifications",path:"/settings/notifications",getParentRoute:()=>Zq}),jK=cG.update({id:"/settings/language",path:"/settings/language",getParentRoute:()=>Zq}),CK=mG.update({id:"/settings/company-addresses",path:"/settings/company-addresses",getParentRoute:()=>Zq}),kK=xG.update({id:"/settings/appearance",path:"/settings/appearance",getParentRoute:()=>Zq}),NK=yG.update({id:"/settings/account",path:"/settings/account",getParentRoute:()=>Zq}),_K=bG.update({id:"/sales/payments",path:"/sales/payments",getParentRoute:()=>Zq}),PK=wG.update({id:"/sales/explore",path:"/sales/explore",getParentRoute:()=>Zq}),EK=SG.update({id:"/sales/employees",path:"/sales/employees",getParentRoute:()=>Zq}),RK=jG.update({id:"/sales/customers",path:"/sales/customers",getParentRoute:()=>Zq}),AK=CG.update({id:"/sales/bookings",path:"/sales/bookings",getParentRoute:()=>Zq}),TK=NG.update({id:"/(auth)/login",path:"/login",getParentRoute:()=>Zq}),MK=PG.update({id:"/(auth)/change-password",path:"/change-password",getParentRoute:()=>Zq}),DK=EG.update({id:"/",path:"/",getParentRoute:()=>xK}),LK=RG.update({id:"/",path:"/",getParentRoute:()=>vK}),FK=AG.update({id:"/",path:"/",getParentRoute:()=>yK}),IK=TG.update({id:"/",path:"/",getParentRoute:()=>_K}),OK=MG.update({id:"/",path:"/",getParentRoute:()=>PK}),zK=DG.update({id:"/",path:"/",getParentRoute:()=>EK}),BK=LG.update({id:"/",path:"/",getParentRoute:()=>RK}),$K=FG.update({id:"/",path:"/",getParentRoute:()=>AK}),UK=OG.update({id:"/$id",path:"/$id",getParentRoute:()=>xK}),VK=BG.update({id:"/$id",path:"/$id",getParentRoute:()=>vK}),qK=UG.update({id:"/$id",path:"/$id",getParentRoute:()=>yK}),HK=qG.update({id:"/settings/ticketing/venue-types",path:"/settings/ticketing/venue-types",getParentRoute:()=>Zq}),GK=GG.update({id:"/settings/ticketing/event-types",path:"/settings/ticketing/event-types",getParentRoute:()=>Zq}),KK=WG.update({id:"/settings/sales/customer-types",path:"/settings/sales/customer-types",getParentRoute:()=>Zq}),WK=YG.update({id:"/settings/sales/customer-groups",path:"/settings/sales/customer-groups",getParentRoute:()=>Zq}),QK=XG.update({id:"/$id",path:"/$id",getParentRoute:()=>_K}),YK=JG.update({id:"/$id",path:"/$id",getParentRoute:()=>EK}),XK=tK.update({id:"/$id",path:"/$id",getParentRoute:()=>RK}),ZK=sK.update({id:"/$id",path:"/$id",getParentRoute:()=>AK}),JK=iK.update({id:"/ticketing/events/$eventId/inventory",path:"/ticketing/events/$eventId/inventory",getParentRoute:()=>Zq}),eW=lK.update({id:"/seats/designer",path:"/seats/designer",getParentRoute:()=>UK}),tW={UsersIdRoute:gK,UsersIndexRoute:pK},nW=cK._addFileChildren(tW),sW={SalesBookingsIdRoute:ZK,SalesBookingsIndexRoute:$K},aW=AK._addFileChildren(sW),rW={SalesCustomersIdRoute:XK,SalesCustomersIndexRoute:BK},iW=RK._addFileChildren(rW),oW={SalesEmployeesIdRoute:YK,SalesEmployeesIndexRoute:zK},lW=EK._addFileChildren(oW),cW={SalesExploreIndexRoute:OK},dW=PK._addFileChildren(cW),uW={SalesPaymentsIdRoute:QK,SalesPaymentsIndexRoute:IK},hW=_K._addFileChildren(uW),mW={TicketingOrganizersIdRoute:qK,TicketingOrganizersIndexRoute:FK},pW=yK._addFileChildren(mW),fW={TicketingShowsIdRoute:VK,TicketingShowsIndexRoute:LK},gW=vK._addFileChildren(fW),xW={TicketingVenuesIdSeatsDesignerRoute:eW},vW={TicketingVenuesIdRoute:UK._addFileChildren(xW),TicketingVenuesIndexRoute:DK},yW={IndexRoute:mK,SplatRoute:hK,MyPageRoute:uK,ProfileRoute:dK,UsersRoute:nW,authChangePasswordRoute:MK,authLoginRoute:TK,SalesBookingsRoute:aW,SalesCustomersRoute:iW,SalesEmployeesRoute:lW,SalesExploreRoute:dW,SalesPaymentsRoute:hW,SettingsAccountRoute:NK,SettingsAppearanceRoute:kK,SettingsCompanyAddressesRoute:CK,SettingsLanguageRoute:jK,SettingsNotificationsRoute:SK,SettingsProfileRoute:wK,SettingsSecurityRoute:bK,TicketingOrganizersRoute:pW,TicketingShowsRoute:gW,TicketingVenuesRoute:xK._addFileChildren(vW),SettingsIndexRoute:fK,SettingsSalesCustomerGroupsRoute:WK,SettingsSalesCustomerTypesRoute:KK,SettingsTicketingEventTypesRoute:GK,SettingsTicketingVenueTypesRoute:HK,TicketingEventsEventIdInventoryRoute:JK},bW=(e=>new Rn(e))({routeTree:Zq._addFileChildren(yW)._addFileTypes(),defaultPreload:"intent"});M.createRoot(document.getElementById("root")).render(c.jsx(f.StrictMode,{children:c.jsx(vL,{children:c.jsx(mL,{children:c.jsx(iL,{children:c.jsx(Yq,{children:c.jsx(Xa,{defaultTheme:"system",storageKey:"ui-theme",children:c.jsx(Ja,{defaultDensity:"normal",storageKey:"ui-density",children:c.jsxs(li,{children:[c.jsx(Tn,{router:bW}),c.jsx(ea,{initialIsOpen:!1})]})})})})})})})}));
