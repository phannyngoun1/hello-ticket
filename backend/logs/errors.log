========================================================================================================================
timestamp: 2025-12-06T02:45:25.505673Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: is_deleted
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 107, in search
    conditions.append(GoodsReceiptModel.is_deleted == False)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: is_deleted

========================================================================================================================
timestamp: 2025-12-06T02:45:26.575182Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: is_deleted
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 107, in search
    conditions.append(GoodsReceiptModel.is_deleted == False)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: is_deleted

========================================================================================================================
timestamp: 2025-12-06T02:45:28.648441Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: is_deleted
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 107, in search
    conditions.append(GoodsReceiptModel.is_deleted == False)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: is_deleted

========================================================================================================================
timestamp: 2025-12-06T02:45:32.709291Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: is_deleted
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 107, in search
    conditions.append(GoodsReceiptModel.is_deleted == False)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: is_deleted

========================================================================================================================
timestamp: 2025-12-06T03:02:19.046423Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=s
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 's'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:19.128859Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:20.176832Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:22.228483Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:26.280903Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:54.985546Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssf
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssf'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:55.038875Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfd
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfd'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:55.117667Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfda
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfda'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:55.176634Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdasf
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdasf'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:55.211382Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdas
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdas'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:55.257670Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdasfd
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdasfd'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:55.293472Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdasfds
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdasfds'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:55.319183Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdasfdsa
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdasfdsa'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:56.357717Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdasfdsa
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdasfdsa'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:02:58.406037Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdasfdsa
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdasfdsa'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:03:02.469163Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ssfdasfdsa
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ssfdasfdsa'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: AttributeError
exception_message: code
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 69, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 132, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 113, in search
    GoodsReceiptModel.code.ilike(search_term),
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_model_construction.py", line 289, in __getattr__
    raise AttributeError(item)
AttributeError: code

========================================================================================================================
timestamp: 2025-12-06T03:09:59.003603Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T03:11:25.599479Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T03:11:27.671481Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T03:11:31.738210Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T03:11:37.345383Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T03:11:38.398837Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T03:11:40.450160Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T03:11:44.502898Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 68, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 129, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 120, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.code does not exist
LINE 1: SELECT goods_receipts.id, goods_receipts.code, goods_receipt...
                                  ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T06:55:07.826214Z
path: http://localhost:8000/api/v1/inventory/goods-receipts/56019c78-f3b8-43df-8ee3-f5c99cc97d1d/complete
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '56019c78-f3b8-43df-8ee3-f5c99cc97d1d', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 187, in complete_goods_receipt
    goods_receipt = await mediator.send(command)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 90, in send
    return await self._invoke_handler(handler, command)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 111, in handle_complete_goods_receipt
    goods_receipt = await self._get_goods_receipt_or_raise(tenant_id, command.goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 169, in _get_goods_receipt_or_raise
    goods_receipt = await self._goods_receipt_repository.get_by_id(tenant_id, goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 109, in get_by_id
    lines = self._load_lines(session, goods_receipt_id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '56019c78-f3b8-43df-8ee3-f5c99cc97d1d', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T06:55:17.355173Z
path: http://localhost:8000/api/v1/inventory/goods-receipts/56019c78-f3b8-43df-8ee3-f5c99cc97d1d/complete
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '56019c78-f3b8-43df-8ee3-f5c99cc97d1d', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 187, in complete_goods_receipt
    goods_receipt = await mediator.send(command)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 90, in send
    return await self._invoke_handler(handler, command)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 111, in handle_complete_goods_receipt
    goods_receipt = await self._get_goods_receipt_or_raise(tenant_id, command.goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 169, in _get_goods_receipt_or_raise
    goods_receipt = await self._goods_receipt_repository.get_by_id(tenant_id, goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 109, in get_by_id
    lines = self._load_lines(session, goods_receipt_id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '56019c78-f3b8-43df-8ee3-f5c99cc97d1d', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T06:55:28.393490Z
path: http://localhost:8000/api/v1/inventory/goods-receipts/56019c78-f3b8-43df-8ee3-f5c99cc97d1d/complete
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '56019c78-f3b8-43df-8ee3-f5c99cc97d1d', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 187, in complete_goods_receipt
    goods_receipt = await mediator.send(command)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 90, in send
    return await self._invoke_handler(handler, command)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 111, in handle_complete_goods_receipt
    goods_receipt = await self._get_goods_receipt_or_raise(tenant_id, command.goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 169, in _get_goods_receipt_or_raise
    goods_receipt = await self._goods_receipt_repository.get_by_id(tenant_id, goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 109, in get_by_id
    lines = self._load_lines(session, goods_receipt_id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.expiration_date does not exist
LINE 1: ...ipt_lines.status, goods_receipt_lines.lot_number, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '56019c78-f3b8-43df-8ee3-f5c99cc97d1d', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:26:49.637456Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:26:49.701634Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:11.462793Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:15.140971Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:28.783642Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:29.843526Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:31.000527Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:34.030233Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:35.182264Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:37.246257Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:27:41.309362Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:28:09.799582Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=s
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 's'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%s%', 'receipt_number_1': '%s%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%s%', 'receipt_number_1': '%s%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:28:09.959093Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:28:11.021147Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:28:13.086436Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-06T15:28:17.146184Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50&search=ss
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50', 'search': 'ss'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 124, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 223, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 166, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipts.vendor_id does not exist
LINE 1: ..._receipts.tenant_id, goods_receipts.warehouse_id, goods_rece...
                                                             ^

[SQL: SELECT goods_receipts.id, goods_receipts.code, goods_receipts.tenant_id, goods_receipts.warehouse_id, goods_receipts.vendor_id, goods_receipts.purchase_order_id, goods_receipts.receipt_number, goods_receipts.delivery_note, goods_receipts.bill_of_lading, goods_receipts.status, goods_receipts.received_at, goods_receipts.closed_at, goods_receipts.cancelled_at, goods_receipts.notes, goods_receipts.version, goods_receipts.is_deleted, goods_receipts.deleted_at, goods_receipts.created_at, goods_receipts.updated_at 
FROM goods_receipts 
WHERE goods_receipts.tenant_id = %(tenant_id_1)s AND goods_receipts.is_deleted = false AND (goods_receipts.code ILIKE %(code_1)s OR goods_receipts.receipt_number ILIKE %(receipt_number_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'receipt_number_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T02:50:06.869764Z
path: http://localhost:8000/api/v1/store-locations/tree/root
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column store_locations.sub_location_type does not exist
LINE 1: ...cations.name, store_locations.parent_location_id, store_loca...
                                                             ^

[SQL: SELECT store_locations.id, store_locations.tenant_id, store_locations.location_type, store_locations.code, store_locations.name, store_locations.parent_location_id, store_locations.sub_location_type, store_locations.address, store_locations.bin_type, store_locations.max_weight, store_locations.max_volume, store_locations.attributes, store_locations.created_at, store_locations.updated_at 
FROM store_locations 
WHERE store_locations.tenant_id = %(tenant_id_1)s AND store_locations.location_type = %(location_type_1)s 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'tenant_id_1': 'default-tenant', 'location_type_1': <LocationTypeEnum.WAREHOUSE: 'warehouse'>, 'param_1': 1000, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column store_locations.sub_location_type does not exist
LINE 1: ...cations.name, store_locations.parent_location_id, store_loca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/store_location_routes.py", line 164, in get_location_tree
    warehouses = await repository.get_all_warehouses(tenant_id=tenant_id, skip=0, limit=1000)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/store_location_repository.py", line 538, in get_all_warehouses
    return await self.get_by_type(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/store_location_repository.py", line 528, in get_by_type
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column store_locations.sub_location_type does not exist
LINE 1: ...cations.name, store_locations.parent_location_id, store_loca...
                                                             ^

[SQL: SELECT store_locations.id, store_locations.tenant_id, store_locations.location_type, store_locations.code, store_locations.name, store_locations.parent_location_id, store_locations.sub_location_type, store_locations.address, store_locations.bin_type, store_locations.max_weight, store_locations.max_volume, store_locations.attributes, store_locations.created_at, store_locations.updated_at 
FROM store_locations 
WHERE store_locations.tenant_id = %(tenant_id_1)s AND store_locations.location_type = %(location_type_1)s 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'tenant_id_1': 'default-tenant', 'location_type_1': <LocationTypeEnum.WAREHOUSE: 'warehouse'>, 'param_1': 1000, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T03:01:41.957257Z
path: http://localhost:8000/api/v1/store-locations/tree/root
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column store_locations.sub_location_type does not exist
LINE 1: ...cations.name, store_locations.parent_location_id, store_loca...
                                                             ^

[SQL: SELECT store_locations.id, store_locations.tenant_id, store_locations.location_type, store_locations.code, store_locations.name, store_locations.parent_location_id, store_locations.sub_location_type, store_locations.address, store_locations.bin_type, store_locations.max_weight, store_locations.max_volume, store_locations.attributes, store_locations.created_at, store_locations.updated_at 
FROM store_locations 
WHERE store_locations.tenant_id = %(tenant_id_1)s AND store_locations.location_type = %(location_type_1)s 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'tenant_id_1': 'default-tenant', 'location_type_1': <LocationTypeEnum.WAREHOUSE: 'warehouse'>, 'param_1': 1000, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column store_locations.sub_location_type does not exist
LINE 1: ...cations.name, store_locations.parent_location_id, store_loca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/store_location_routes.py", line 164, in get_location_tree
    warehouses = await repository.get_all_warehouses(tenant_id=tenant_id, skip=0, limit=1000)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/store_location_repository.py", line 538, in get_all_warehouses
    return await self.get_by_type(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/store_location_repository.py", line 528, in get_by_type
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column store_locations.sub_location_type does not exist
LINE 1: ...cations.name, store_locations.parent_location_id, store_loca...
                                                             ^

[SQL: SELECT store_locations.id, store_locations.tenant_id, store_locations.location_type, store_locations.code, store_locations.name, store_locations.parent_location_id, store_locations.sub_location_type, store_locations.address, store_locations.bin_type, store_locations.max_weight, store_locations.max_volume, store_locations.attributes, store_locations.created_at, store_locations.updated_at 
FROM store_locations 
WHERE store_locations.tenant_id = %(tenant_id_1)s AND store_locations.location_type = %(location_type_1)s 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'tenant_id_1': 'default-tenant', 'location_type_1': <LocationTypeEnum.WAREHOUSE: 'warehouse'>, 'param_1': 1000, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:55:43.671260Z
path: http://localhost:8000/api/v1/inventory/goods-receipts/0f101a50-5385-4c8a-a2f6-146c10d588e8
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 159, in get_goods_receipt
    goods_receipt = await mediator.query(GetGoodsReceiptByIdQuery(goods_receipt_id=goods_receipt_id))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 216, in handle_get_goods_receipt_by_id
    goods_receipt = await self._goods_receipt_repository.get_by_id(tenant_id, query.goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 109, in get_by_id
    lines = self._load_lines(session, goods_receipt_id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:55:44.740412Z
path: http://localhost:8000/api/v1/inventory/goods-receipts/0f101a50-5385-4c8a-a2f6-146c10d588e8
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 159, in get_goods_receipt
    goods_receipt = await mediator.query(GetGoodsReceiptByIdQuery(goods_receipt_id=goods_receipt_id))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 216, in handle_get_goods_receipt_by_id
    goods_receipt = await self._goods_receipt_repository.get_by_id(tenant_id, query.goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 109, in get_by_id
    lines = self._load_lines(session, goods_receipt_id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:55:46.829612Z
path: http://localhost:8000/api/v1/inventory/goods-receipts/0f101a50-5385-4c8a-a2f6-146c10d588e8
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 159, in get_goods_receipt
    goods_receipt = await mediator.query(GetGoodsReceiptByIdQuery(goods_receipt_id=goods_receipt_id))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 216, in handle_get_goods_receipt_by_id
    goods_receipt = await self._goods_receipt_repository.get_by_id(tenant_id, query.goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 109, in get_by_id
    lines = self._load_lines(session, goods_receipt_id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:55:48.667446Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:55:49.733343Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:55:51.800572Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:55:55.879090Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:57:50.466674Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:57:51.548149Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:57:53.620739Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:57:57.699862Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:00.351351Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:01.410729Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:03.465714Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:07.539115Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:22.875725Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:23.920870Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:25.982454Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:30.052764Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:37.005017Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:38.053091Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:40.119185Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:41.929652Z
path: http://localhost:8000/api/v1/inventory/goods-receipts/0f101a50-5385-4c8a-a2f6-146c10d588e8
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 159, in get_goods_receipt
    goods_receipt = await mediator.query(GetGoodsReceiptByIdQuery(goods_receipt_id=goods_receipt_id))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 216, in handle_get_goods_receipt_by_id
    goods_receipt = await self._goods_receipt_repository.get_by_id(tenant_id, query.goods_receipt_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 109, in get_by_id
    lines = self._load_lines(session, goods_receipt_id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T06:59:44.199046Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 129, in list_goods_receipts
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/inventory/handlers_goods_receipt.py", line 236, in handle_search_goods_receipts
    return await self._goods_receipt_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 182, in search
    lines = self._load_lines(session, model.id, tenant_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/inventory/goods_receipt_repository.py", line 40, in _load_lines
    return list(session.exec(statement).all())
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column goods_receipt_lines.store_location_id does not exist
LINE 1: ...pplier_batch, goods_receipt_lines.serial_numbers, goods_rece...
                                                             ^

[SQL: SELECT goods_receipt_lines.id, goods_receipt_lines.tenant_id, goods_receipt_lines.goods_receipt_id, goods_receipt_lines.purchase_order_line_id, goods_receipt_lines.item_id, goods_receipt_lines.quantity, goods_receipt_lines.uom, goods_receipt_lines.cost, goods_receipt_lines.landing_cost, goods_receipt_lines.status, goods_receipt_lines.lot_number, goods_receipt_lines.expiration_date, goods_receipt_lines.manufacturing_date, goods_receipt_lines.supplier_batch, goods_receipt_lines.serial_numbers, goods_receipt_lines.store_location_id, goods_receipt_lines.created_at, goods_receipt_lines.updated_at 
FROM goods_receipt_lines 
WHERE goods_receipt_lines.goods_receipt_id = %(goods_receipt_id_1)s AND goods_receipt_lines.tenant_id = %(tenant_id_1)s]
[parameters: {'goods_receipt_id_1': '0f101a50-5385-4c8a-a2f6-146c10d588e8', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T07:48:24.028506Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:24.439987Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:30.241255Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:31.330249Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:40.331045Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:41.387757Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:45.475876Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:46.539654Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:49.501102Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:50.567254Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:52.673758Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T07:51:56.736264Z
path: http://localhost:8000/api/v1/inventory/goods-receipts?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ModuleNotFoundError
exception_message: No module named 'app.domain.shared.value_objects.tenant_context'
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 191, in list_goods_receipts
    items = await _enrich_goods_receipts(mediator, result.items, po_repo)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/inventory/goods_receipt_routes.py", line 123, in _enrich_goods_receipts
    from app.domain.shared.value_objects.tenant_context import require_tenant_context
ModuleNotFoundError: No module named 'app.domain.shared.value_objects.tenant_context'

========================================================================================================================
timestamp: 2025-12-07T17:20:38.897451Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:44.676458Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:45.149223Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:45.605222Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:48.166528Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:48.575246Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:48.907777Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:49.241809Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:50.548068Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:50.907231Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:52.329424Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:52.591994Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:53.634927Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:20:54.977660Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:22:07.075758Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:22:08.429279Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:22:08.837210Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:22:11.386373Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:22:22.564237Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:26:07.058559Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:26:08.238677Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T17:26:08.592260Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T18:01:25.044507Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T18:01:25.920654Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-07T18:43:20.130699Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:43:21.205684Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:43:23.282754Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:43:27.352206Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:46:13.994769Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:46:15.042766Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:46:17.116606Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:46:21.229383Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 88, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...taway_rules.warehouse_id, putaway_rules.selector, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.item_ids, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:59:29.284276Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:59:30.409084Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:59:32.487415Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T18:59:36.566174Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:01:50.780611Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:01:51.858520Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:01:53.964115Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:01:58.054746Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:04:02.138729Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:04:03.206388Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:04:05.284304Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:04:09.454988Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:37.757077Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:39.250577Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:41.437273Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:45.512854Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:49.857037Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:50.966228Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:53.050493Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T19:07:57.142549Z
path: http://localhost:8000/api/v1/warehouse/putaway/rules/?warehouse_id=e1fc852a-1beb-445e-80e8-2bcdf711e043&enabled_only=false
method: GET
status_code: 500
query_params: {'warehouse_id': 'e1fc852a-1beb-445e-80e8-2bcdf711e043', 'enabled_only': 'false'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 87, in get_putaway_rules
    results = await mediator.query(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/putaway_handlers.py", line 219, in handle_get_putaway_rules_by_warehouse
    rules = await self._putaway_rule_repository.get_by_warehouse(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/putaway_rule_repository.py", line 138, in get_by_warehouse
    models = session.exec(statement).all()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column putaway_rules.item_ids does not exist
LINE 1: ...e, putaway_rules.priority, putaway_rules.enabled, putaway_ru...
                                                             ^

[SQL: SELECT putaway_rules.id, putaway_rules.tenant_id, putaway_rules.warehouse_id, putaway_rules.selector, putaway_rules.target_zone_id, putaway_rules.target_bin_type, putaway_rules.priority, putaway_rules.enabled, putaway_rules.item_ids, putaway_rules.created_at, putaway_rules.updated_at 
FROM putaway_rules 
WHERE putaway_rules.tenant_id = %(tenant_id_1)s AND putaway_rules.warehouse_id = %(warehouse_id_1)s ORDER BY putaway_rules.priority DESC]
[parameters: {'tenant_id_1': 'default-tenant', 'warehouse_id_1': 'e1fc852a-1beb-445e-80e8-2bcdf711e043'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:34:44.610877Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:34:45.666555Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:34:47.793002Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:34:51.929740Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:34:52.003523Z
path: http://localhost:8000/api/v1/warehouse/vehicles?search=ss&limit=50
method: GET
status_code: 500
query_params: {'search': 'ss', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false AND (vehicles.code ILIKE %(code_1)s OR vehicles.name ILIKE %(name_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'name_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false AND (vehicles.code ILIKE %(code_1)s OR vehicles.name ILIKE %(name_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'name_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:34:53.060278Z
path: http://localhost:8000/api/v1/warehouse/vehicles?search=ss&limit=50
method: GET
status_code: 500
query_params: {'search': 'ss', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false AND (vehicles.code ILIKE %(code_1)s OR vehicles.name ILIKE %(name_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'name_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false AND (vehicles.code ILIKE %(code_1)s OR vehicles.name ILIKE %(name_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'name_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:34:55.124407Z
path: http://localhost:8000/api/v1/warehouse/vehicles?search=ss&limit=50
method: GET
status_code: 500
query_params: {'search': 'ss', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false AND (vehicles.code ILIKE %(code_1)s OR vehicles.name ILIKE %(name_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'name_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false AND (vehicles.code ILIKE %(code_1)s OR vehicles.name ILIKE %(name_1)s)]
[parameters: {'tenant_id_1': 'default-tenant', 'code_1': '%ss%', 'name_1': '%ss%'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:35:02.029486Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:35:03.094429Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:35:05.164311Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:35:09.236570Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:36:30.497008Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:36:31.552407Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:36:33.792652Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:36:37.903067Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:38:41.604242Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:38:42.675500Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:38:44.721877Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:38:48.792095Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:38:52.855543Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:38:54.217864Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:38:56.277322Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:39:00.354033Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:39:22.999106Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:39:26.803344Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:39:27.884748Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:39:29.953167Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-07T20:39:34.003822Z
path: http://localhost:8000/api/v1/warehouse/vehicles?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/vehicle_routes.py", line 72, in list_vehicles
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/application/warehouse/handlers_vehicle.py", line 135, in handle_search_vehicles
    return await self._vehicle_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/infrastructure/warehouse/vehicle_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column vehicles.vehicle_type does not exist
LINE 1: ...vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.v...
                                                             ^

[SQL: SELECT vehicles.id, vehicles.tenant_id, vehicles.code, vehicles.name, vehicles.vehicle_type, vehicles.status, vehicles.capacity_load_weight, vehicles.capacity_pallet_count, vehicles.is_active, vehicles.is_deleted, vehicles.version, vehicles.created_at, vehicles.updated_at, vehicles.deleted_at 
FROM vehicles 
WHERE vehicles.tenant_id = %(tenant_id_1)s AND vehicles.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-08T03:43:43.273897Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:43:45.067280Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:46:00.616136Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:46:02.534487Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:46:03.597189Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:46:06.703348Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:46:07.531041Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:46:08.571232Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-08T03:46:11.770606Z
path: http://localhost:8000/api/v1/warehouse/putaway/suggest-multiple
method: POST
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: TypeError
exception_message: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/app/presentation/warehouse/putaway_routes.py", line 214, in suggest_putaway_locations
    suggestions = [PutawaySuggestionResponse(**r) for r in results]
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: app.presentation.api.warehouse.putaway_schemas.PutawaySuggestionResponse() argument after ** must be a mapping, not str

========================================================================================================================
timestamp: 2025-12-20T03:38:23.116937Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:39:59.177264Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:16.121507Z
path: http://localhost:8000/api/v1/ticketing/venues?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.tenant_id = %(tenant_id_1)s AND venues.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 69, in list_venues
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 134, in handle_search_venues
    return await self._venue_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.tenant_id = %(tenant_id_1)s AND venues.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:17.165357Z
path: http://localhost:8000/api/v1/ticketing/venues?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.tenant_id = %(tenant_id_1)s AND venues.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 69, in list_venues
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 134, in handle_search_venues
    return await self._venue_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.tenant_id = %(tenant_id_1)s AND venues.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:18.216879Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:19.273291Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:20.276091Z
path: http://localhost:8000/api/v1/ticketing/venues?skip=0&limit=50
method: GET
status_code: 500
query_params: {'skip': '0', 'limit': '50'}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.tenant_id = %(tenant_id_1)s AND venues.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 69, in list_venues
    result = await mediator.query(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 134, in handle_search_venues
    return await self._venue_repository.search(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 123, in search
    all_models = session.exec(count_statement).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.tenant_id = %(tenant_id_1)s AND venues.is_deleted = false]
[parameters: {'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:21.342281Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:25.437143Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:50.064990Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:51.138311Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:53.200996Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

========================================================================================================================
timestamp: 2025-12-20T03:40:57.270060Z
path: http://localhost:8000/api/v1/ticketing/venues/9b3768ee-7a5e-424f-89c8-1dca149b01d0
method: GET
status_code: 500
query_params: {}
tenant_id: None
user_id: None
client_ip: 127.0.0.1
exception_type: ProgrammingError
exception_message: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
========================================================================================================================
Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/error_logging_middleware.py", line 171, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/audit_middleware.py", line 101, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/session_middleware.py", line 82, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/middleware/tenant_middleware.py", line 150, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/presentation/ticketing/venue_routes.py", line 98, in get_venue
    venue = await mediator.query(GetVenueByIdQuery(venue_id=venue_id))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 121, in query
    return await self._invoke_handler(handler, query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/shared/mediator.py", line 149, in _invoke_handler
    return await method(message)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/application/ticketing/handlers_venue.py", line 114, in handle_get_venue_by_id
    venue = await self._venue_repository.get_by_id(tenant_id, query.venue_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/ticket-system/backend/app/infrastructure/ticketing/venue_repository.py", line 77, in get_by_id
    model = session.exec(statement).first()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
    results = super().execute(
              ^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/ngounphanny/dev/envs/projects/truths/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column venues.image_url does not exist
LINE 1: ...s.id, venues.tenant_id, venues.code, venues.name, venues.ima...
                                                             ^

[SQL: SELECT venues.id, venues.tenant_id, venues.code, venues.name, venues.image_url, venues.is_active, venues.is_deleted, venues.version, venues.created_at, venues.updated_at, venues.deleted_at 
FROM venues 
WHERE venues.id = %(id_1)s AND venues.tenant_id = %(tenant_id_1)s]
[parameters: {'id_1': '9b3768ee-7a5e-424f-89c8-1dca149b01d0', 'tenant_id_1': 'default-tenant'}]
(Background on this error at: https://sqlalche.me/e/20/f405)

