# ============================================================================
# ENVIRONMENT CONFIGURATION
# ============================================================================
# Set to "development" or "production"
# This affects validation strictness, logging, and security checks
ENVIRONMENT=development

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Single Database - Contains all application data (tenants, users, products, orders)
# Development: SQLite is fine for testing
# Production: Use PostgreSQL for reliability and performance
#
# Development (SQLite):
# DATABASE_URL=sqlite:///./ticket.db
#
# Production/Docker (PostgreSQL):
DATABASE_URL=postgresql://ticket:ticket_pass@localhost:5432/ticket

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
APP_NAME=Hello Ticket
APP_VERSION=0.1.0
DEBUG=true

# Logging: Set in production to troubleshoot issues
# LOG_LEVEL=DEBUG | INFO | WARNING | ERROR (default: INFO)
# ENABLE_DEBUG_LOG=true  # Alternative: enables DEBUG level
# LOG_LEVEL=DEBUG

# Server Configuration
HOST=0.0.0.0
PORT=8000

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# ?? CRITICAL: Change SECRET_KEY in production!
# Generate a strong secret key:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
# 
# Development: Can use default (not recommended even for dev)
# Production: MUST be 32+ characters, random, and kept secret
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# ?? CRITICAL: Configure CORS properly in production!
# 
# Development: "*" allows all origins (convenient for testing)
# Production: Specify exact origins (comma-separated)
# 
# Development:
# ALLOWED_ORIGINS=*
#
# Production:
# ALLOWED_ORIGINS=https://app.example.com,https://www.example.com
ALLOWED_ORIGINS=*

# Caching Configuration
# CACHE_BACKEND options: auto | redis | disk
#   auto: Try Redis first, fallback to DiskCache (default)
#   redis: Use Redis only (fails if unavailable)
#   disk: Use DiskCache only (no Redis required)
CACHE_BACKEND=auto

# Redis settings (only used when CACHE_BACKEND is 'auto' or 'redis')
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379/0

# DiskCache settings (only used when CACHE_BACKEND is 'auto' or 'disk')
DISKCACHE_DIR=/tmp/ticket_cache
DISKCACHE_SIZE_MB=100

# Multi-Tenancy Configuration
# Set to 'true' to require tenant identification on all requests (recommended for production)
REQUIRE_TENANT=false
# Default tenant ID to use when no tenant is specified (useful for development)
DEFAULT_TENANT_ID=default-tenant

# ============================================================================
# DEFAULT ADMIN USER CONFIGURATION
# ============================================================================
# ?? SECURITY WARNING: Change these immediately in production!
# The admin user is created automatically on first startup
# 
# IMPORTANT SECURITY NOTES:
# 1. Change DEFAULT_ADMIN_PASSWORD after first login
# 2. Use a strong, unique password (16+ characters)
# 3. Enable must_change_password enforcement
# 4. Consider disabling auto-creation in production
# 
# Generate strong password:
#   python -c "import secrets; print(secrets.token_urlsafe(16))"
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_EMAIL=admin@yourdomain.com
DEFAULT_ADMIN_PASSWORD=ChangeMe123!
DEFAULT_ADMIN_NAME=System Administrator


# ============================================================================
# AI / LLM CONFIGURATION (optional)
# ============================================================================
# Used for AI-assisted form fill, text improvement, and marker detection.
# Get an API key from https://platform.openai.com/api-keys
# Set OPENAI_API_KEY=sk-your-key in backend/.env to enable AI features
# OPENAI_API_KEY=sk-...

# ============================================================================
# Subscription Management
# ============================================================================
# Enable/disable subscription limit enforcement
ENFORCE_SUBSCRIPTION_LIMITS=true

# Database Strategy Configuration
# Admin database URL for provisioning (same as main DATABASE_URL for single-db setup)
# ADMIN_DATABASE_URL=postgresql://ticket:ticket_pass@localhost:5432/ticket

# ============================================================================
# COMBINED PRODUCTION DEPLOYMENT (backend serves frontend SPA)
# ============================================================================
# When set, backend serves the built frontend from this directory (index.html + /assets).
# Default: <project_root>/frontend/apps/web/dist
# Override in Docker or when frontend is built elsewhere, e.g.:
# FRONTEND_DIST_DIR=/app/frontend/dist
# FRONTEND_DIST_DIR=
